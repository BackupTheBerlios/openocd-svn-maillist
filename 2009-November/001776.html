<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openocd-svn] Main OpenOCD repository branch, master,	updated. v0.3.0-358-gd16968e
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-svn/2009-November/index.html" >
   <LINK REL="made" HREF="mailto:openocd-svn%40lists.berlios.de?Subject=Re%3A%20%5Bopenocd-svn%5D%20Main%20OpenOCD%20repository%20branch%2C%20master%2C%0A%09updated.%20v0.3.0-358-gd16968e&In-Reply-To=%3CE1N92gJ-0000Gj-Uj%40cxgxhf1.ch3.sourceforge.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001775.html">
   <LINK REL="Next"  HREF="001777.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.3.0-358-gd16968e</H1>
    <B>Zach Welch</B> 
    <A HREF="mailto:openocd-svn%40lists.berlios.de?Subject=Re%3A%20%5Bopenocd-svn%5D%20Main%20OpenOCD%20repository%20branch%2C%20master%2C%0A%09updated.%20v0.3.0-358-gd16968e&In-Reply-To=%3CE1N92gJ-0000Gj-Uj%40cxgxhf1.ch3.sourceforge.com%3E"
       TITLE="[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.3.0-358-gd16968e">zwelch at users.sourceforge.net
       </A><BR>
    <I>Fri Nov 13 21:23:43 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001775.html">[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.3.0-184-g99b57b6
</A></li>
        <LI>Next message: <A HREF="001777.html">[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.3.0-360-gef746e2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1776">[ date ]</a>
              <a href="thread.html#1776">[ thread ]</a>
              <a href="subject.html#1776">[ subject ]</a>
              <a href="author.html#1776">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;Main OpenOCD repository&quot;.

The branch, master has been updated
       via  d16968e24f5d9e436ae4e136cd27652c4c948203 (commit)
       via  96b62996d2d81b09a48bf253bc9e60e637f687bd (commit)
       via  2f6e56e38320350bb300b363d0b3737fa8d1f3ea (commit)
       via  0f1163e823c6ca3c2a81fa296157f5dde0635fea (commit)
       via  d0dee7ccafcf87259fadf6c5de43df8583b0e885 (commit)
       via  ac927559c3ce5406adac34b9d4ca4ecb37a48181 (commit)
       via  d64a873db44258470b50f370f2c8af71157952d0 (commit)
       via  dfecfd5fd471708ac15af08b52964e8f8da9f4be (commit)
       via  af949b2531d2a8863d077025db40cbb170d13a63 (commit)
       via  d0c19e0a9d51211953a363026c662d290542fe85 (commit)
       via  6421c2075c733d18b7fc9daed847c135b98230b7 (commit)
       via  4952eadd8f04ca3755c30013abc3ea85e35d8654 (commit)
       via  d90063ffc54ea042c0ff37e6cec1e95848bf1e26 (commit)
       via  2ec440588fa455e4609bae3d7fc146bf53f1bbab (commit)
       via  cdd2d9c2d0dee319ba5d2f419ac78aa6490bb74b (commit)
       via  d727f978897105ceacfed06da0152b4b4dfffc3d (commit)
       via  42fb6b88764fb39fd07726d7bb447a79c3951aa4 (commit)
       via  53c05c8b1d5718b2acf5dbe0eb517dd427340041 (commit)
       via  1e51cf049cfed3bc42a748d848210f8e4b472282 (commit)
       via  e76d085603c36efddd9b38cc7383f86ee399177c (commit)
       via  abd7b404086d3c63b163a5ffa786f3538714b7d9 (commit)
       via  55edfdf2ab6c5d1d6cd4c1c97a79cbb1d39b1f22 (commit)
       via  22f6a4cef5b4bf6696a7ea0fa41fafc3da06c9fa (commit)
       via  18475360b253e52eae7d070421523d5d7636383d (commit)
       via  1f87cf4e804812c81279cc7bcb0fcb86aa2bf48f (commit)
       via  ea34dc988f63ffa1a9ba9e592a65f2f46e78f82a (commit)
       via  73ad5cbb1a6d60ee2209ad9faadd19df0295942a (commit)
       via  151347585a48ef746d8ffbfed7ba9bd621737b0c (commit)
       via  93459582fd340e4f63efed0fab9abd49a2cb6373 (commit)
       via  2d5767201b8b748b85d6aceb7dd93965e25bd00b (commit)
       via  46fc1d57ac9462fd788277609707a379c7a406cb (commit)
       via  c2b5d8a6fa72ce6b0fed1e612d4fe5e4b54ba45a (commit)
       via  74d09617b927ed7011098d5a65087dee1ef1e87a (commit)
       via  de3fb2f3bce2de5be44223204ce368216ed85b0f (commit)
       via  f4e03e3b902104f5cf8aab1ea3cd5db2bb36890e (commit)
       via  b87f07110a42981aa53bb6f824d29216658dafc4 (commit)
       via  a8141cafdef162d52e128cd2ab51702b9800fda2 (commit)
       via  ccde06a08fbf9c4f57b321dbec0509f73239c2de (commit)
       via  3b7aee21b50f4bd0014878f29129ac33812faea3 (commit)
       via  1bd7a78d92e06fcd403c915f0e9d3ecdbcc8305d (commit)
       via  ef36a7fb3b87bddc14ad9c5d98fde1d041a0de2d (commit)
       via  b154972bdbcbda1ae8e05271c0db556fade8dbef (commit)
       via  1a4ff43a7ce4463e7b37f893ca185b055ec6fa9d (commit)
       via  a87faf5b66fabb03cdf15a54185f15b91da779c2 (commit)
       via  24df46d0676630c90f04ee49b96533f5fddca6cd (commit)
       via  99614219ad111c124ea5d5f997bb388cbcf00e32 (commit)
       via  e2001ba2116fe5c0c75f7953b5fbe35da65fa29d (commit)
       via  63242c6d45570ca32fd569a71b5ecea522f839ea (commit)
       via  01f9dc18fcce8d5a0e02e56822d580da81570fdc (commit)
       via  2f7fc2921d5769799f1bd527b49a7a877b4c8fa0 (commit)
       via  26a99ed740f4071c9eebba10f7f597844812fc13 (commit)
       via  a1971ecacf6450aa57192680fc201928deb46b7d (commit)
       via  72b421418f315cb54a01ba4d249082f989d5154a (commit)
       via  e7f65c5a116802c4e510fe212b26e9a020de0b3e (commit)
       via  4bc80e5a65dde09ca795e50e77bcfe77b8dd444f (commit)
       via  94f5ed90f1832e81803713f4364de586a69247d4 (commit)
       via  5e43565ab543b1ceff4cc8030434a54ac28dd875 (commit)
       via  e8a6e3b2f4e1b0f3cccfa01c486fbdd952842801 (commit)
       via  2744a031cb333f4d1c2cd81171cbdafd6c780e1d (commit)
       via  5415d07139faeb2541127d5a7bcedef833b79de3 (commit)
       via  248448ee3a5f4f97307f1d5af4ef940529478a34 (commit)
       via  f6dae0cf84de26846a18f3fcaea842ccd898a5c1 (commit)
       via  405a5df7860bf9c0465fce4ac517083a1f9c4a4b (commit)
       via  e976786d55c367ec5b867baffb055b06bbda6ea0 (commit)
       via  2dd9c5e1da3a7e9152e7ca45fefc73363b509d5a (commit)
       via  15e8e4530866454c18c5d91ad9e867f339c2e82b (commit)
       via  056fcdb540f0ab9a404f3b5de72fd707eb146603 (commit)
       via  c25e00b52810822108b54ac40dffadba62ef48d9 (commit)
       via  7de3c44320af79e5d666e5a4cb4a669f5ecb8eb5 (commit)
       via  f9e091a2d3841d4b5e2f49f3b4337261974b2f2c (commit)
       via  67f2f8393742bd88017b54ae0cfd833265bb1517 (commit)
       via  f96d6054e65708e7abdceac673f1a18fec3204b6 (commit)
       via  6ba48a1b44d34e445af17ae66efb7e168f911a0f (commit)
       via  785115a6a0a850f24f01fb385757a331eea9f093 (commit)
       via  1ad4ee2deb5a888cb9f9b825a0e4fbfa68aa1218 (commit)
       via  5f68f45186c1fe73e1c83bd5847edd6bfaf06b34 (commit)
       via  16487e70856a72f9cbe174c7d7d2fb6a1f258100 (commit)
       via  b174a0d75ec81fbcd075c8c8d7f915e4a3d76bc3 (commit)
       via  8e77975b92a75d392727339eccd6cc7898628ebb (commit)
       via  8012b3963fc49c7edf87f31a93bc0039095f5b59 (commit)
       via  bcb18b2044e9a9b812f8e0d390ed903f74524586 (commit)
       via  f3b3752a9eebae273da6580c182e9d1486e41ed9 (commit)
       via  3bcd9ad9d017649038be26fad5440e507db2118d (commit)
       via  55926f576f99a0c67b2836fedf0dc1bfc1260428 (commit)
       via  0eae94879d85a7a402c890bda66efdeffde6f1c7 (commit)
       via  b1de5eb9a074b362e953e857c42cac9a9b18b2a3 (commit)
       via  6c965a3da9cd6f5b2cf1b177d38723356c83d923 (commit)
       via  996613522df32870b23e68d8d63e523908694598 (commit)
       via  52bc6cad87c2ae0558ec5b3539fecad15b75b008 (commit)
       via  ea49f2e3ff55268faeff6e1603d86025873320ed (commit)
       via  95bf461c0af385fc6b3abfff610e5510534ef571 (commit)
       via  db08ab8a792a09399d2ffe362f580683ff102707 (commit)
       via  cd4c0598060dc6539604c9cad8cb645aa14b4ab1 (commit)
       via  db2086897a581111bb86a0fb49d72b776a9801a9 (commit)
       via  38d826cec18902f719439903838ebb612575d05d (commit)
       via  f7cd2aa0ef2939f7d3df5f4a86f5e777a27dbd37 (commit)
       via  f2cbaba3cc4af99db7b4f2682c2e0dd4467655e3 (commit)
       via  8775a0f6638d966b6ef135b488da6efb954e2573 (commit)
       via  e01a0be57655683c58e9dd5e66ee30fe3049e8d9 (commit)
       via  45a165a432eae2eb74b97ec5196736a352923a12 (commit)
       via  53bfd73591037044b391dd9a849e77284a7932d1 (commit)
       via  43483e5054c78e0fdfaebed5e14c14246af07c97 (commit)
       via  a03c9a8dce92d0df0e995e348edfa1b3ea952f45 (commit)
       via  6a374afe71ad947970b5d5bb14fa4b4c856ebfc8 (commit)
       via  3c9afaa6454879a48d684338041250f2a1165c93 (commit)
       via  54be77bc79ce05cd1ce4320958d8ce9d131aea09 (commit)
       via  d0dfec33b6d6844c3c1b817a464b9f040ce40087 (commit)
       via  92fc7a6fdecac39ebc890ee3c2ae91f3fd50fdc5 (commit)
       via  6aa82891b60dc4a332ac548c13fc8d207bf171b0 (commit)
       via  774d71f2cf7bce27a01424fad360cbadebf20459 (commit)
       via  3b09560ae8db9685f03b358709fc63d1bb545628 (commit)
       via  01b10d65bfcc6eb9a3994b20b1342389edda2df0 (commit)
       via  c7b2cad52dbc59b53d6f1734a443d3ad5e826a42 (commit)
       via  40273967bf535aefb3eaec9367c50e7799b079bb (commit)
       via  9059f9f28e4d88c9608ef92723bbd493e106ba67 (commit)
       via  ed9c4ef3c41ac21d0a08cb7e07ab68d0c7930138 (commit)
       via  eba5608b5227696e00437543c0226ed04cae12d5 (commit)
       via  5948e66ee8f2331606c2adce439c5d7ebc77d51f (commit)
       via  c7b96a4dc106fc28808f9503d15803e942b941a0 (commit)
       via  958ff04b086d60e901bfd9c05cf7b4e3e5af641a (commit)
       via  f7ca04721300da7ddd4031885e98f3138825ccd1 (commit)
       via  8f4860d13f03c40b28bb32e9cb0f1d650e200ce9 (commit)
       via  86053523875d18151f3dd0b53bf30e07eec2acf2 (commit)
       via  4bc46d61cade59a43d158862dfbe738255f00a81 (commit)
       via  79338ec6c208fc34d2c16d109dea6bf5ae20f860 (commit)
       via  bb6b9988cbd32f5f87e228340172aa1004775df2 (commit)
       via  fc01dd6a13167c33491b9ccc1543d34b2e485c32 (commit)
       via  a043632a529c0b98bb8771c8815e7681e4ed0f12 (commit)
       via  ed1aed8dd9f282fe7a948676453054c15d8ebd4e (commit)
       via  b712a4e8b85f3b351f2af93d0988d9983e57d6fe (commit)
       via  12f83f0429a84168f8761a575a12c703025dd598 (commit)
       via  a15d4cc75eb7bae55db5f6a156cd15918d574688 (commit)
       via  632fd663a821047df9a9b965ec1c35d6b034ebba (commit)
       via  fb59ec739a3ae79937020dc2fe5413be0e73e8d3 (commit)
       via  98d7ed8523f4324b21963d6b15391df91680a658 (commit)
       via  de1781b7fa5aa73ba4c74dcc14e449acb44182ec (commit)
       via  453a103f48242b2b48031c7d268782df0347f81f (commit)
       via  4c28cc68edfb6a3ced1e31fae8a91fbbbc2f02cf (commit)
       via  0139e7d51abfba861ff9d3c8c1bc1b12e79c696a (commit)
       via  2ded74115d2b1dcea5a1c1a327a0da159cf1b962 (commit)
       via  1f328f2885f370aa9f79d2ed08515821bc8d856a (commit)
       via  3be0edbc5e5b121caee3ebdf987f5e9c47d4257e (commit)
       via  a7a8a1c9e2e86902a3a5864cd257e01e0b3f6da6 (commit)
       via  6ca63ee756ea0772a60760da37867ca982b0b049 (commit)
       via  3877201581c96a02d0e49b74050272ae77753cf1 (commit)
       via  246068fd8985b293d7109058f83c57f6c22a4336 (commit)
       via  1053c32d9ecc95ce946bbbf49cccfe800881f9aa (commit)
       via  22b220ad7f42ea288b1762692d079ecbde10ba24 (commit)
       via  cf2e402d71fa39dc8138985027b7ab8f4d510e81 (commit)
       via  8cc8c0544f3f24772d6644df16d5a70d4ffe8b4a (commit)
       via  2fecae46f62ca98657d650de9fc73d44247971e8 (commit)
       via  5f6d8ecf8c2cf1427a8677155843081d07ff57c4 (commit)
       via  c07f0600ff3c77a00efaf4bdcd4dc3691f0421f6 (commit)
       via  af3f4a0bbefd796bd40602ae28f66dd373272e6a (commit)
       via  e11c5a3b42a2a39c5b24c9a19ba03f7b16caf3d7 (commit)
       via  2ddeec9db5a8771c948294b7194778a95295b7a0 (commit)
       via  4a29f8e21d4932ddf6523ccf23463d8636ad05a9 (commit)
       via  7c0ba75eae7162147e7cb6e55fa709f014f2abf4 (commit)
       via  ffc77b61ddb4407f6c6dcd6188a07d5c630a2780 (commit)
       via  a3f1c87eb72a8c91c54999e04349253159c1bdfd (commit)
       via  4bc155398e88c9cc4393e4113496d088b7ff7ab0 (commit)
       via  9036fdd589b20f7a5f2757a1ad01ca7e47a68fab (commit)
       via  e1c26950c03b09efe42b8a25dd83f1e50e22a507 (commit)
       via  8bbb279c2820e8d0b3c95e0de0289be933ccea92 (commit)
       via  5874d5f2ea2ef9bd7d759d47ed868269ba99ab65 (commit)
       via  363d72a48457e03d2ffdbf9154b8ba3fdb9197d0 (commit)
       via  9f535f9af7c6b7e8843033049a6da0f6d76d513b (commit)
       via  bee796b5b07a0f83ed0ad2360bad70d8409e1109 (commit)
       via  c20b779b891f9d0fd031880841b269fbe8582579 (commit)
       via  ff3150922b676223ad1acc4bcd127aa9fe03fa31 (commit)
       via  d0809ac060b35a04e7f0bceb96e1868663bd18df (commit)
       via  42ef503d37b18d907da16d26e99167566d5aabd1 (commit)
       via  9f212b01be20da43ba534ad33b20419779c89335 (commit)
       via  f59ec2043b840a4534fdd61502de59e2571988d5 (commit)
      from  99b57b6dccec1059f746121b9b9ddb11313f708b (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit d16968e24f5d9e436ae4e136cd27652c4c948203
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 12:19:39 2009 -0800

    remove rlink structure typedefs
    
    Remove useless typedefs from the rlink driver.  Improve whitespace.

diff --git a/src/jtag/rlink/rlink.c b/src/jtag/rlink/rlink.c
index bc35457..9dd8b88 100644
--- a/src/jtag/rlink/rlink.c
+++ b/src/jtag/rlink/rlink.c
@@ -576,8 +576,7 @@ dtc_run_download(
  * The dtc reply queue is a singly linked list that describes what to do with the reply packet that comes from the DTC.  Only SCAN_IN and SCAN_IO generate these entries.
  */
 
-typedef
-struct dtc_reply_queue_entry_s {
+struct dtc_reply_queue_entry {
 	struct dtc_reply_queue_entry_s	*next;
 	jtag_command_t	*cmd;	/* the command that resulted in this entry */
 
@@ -588,7 +587,7 @@ struct dtc_reply_queue_entry_s {
 		int		length;		/* how many bits are processed in this operation? */
 		enum scan_type	type;		/* SCAN_IN/SCAN_OUT/SCAN_IO */
 	} scan;
-} dtc_reply_queue_entry_t;
+};
 
 
 /*
@@ -598,8 +597,8 @@ struct dtc_reply_queue_entry_s {
 
 static
 struct {
-	dtc_reply_queue_entry_t	*rq_head;
-	dtc_reply_queue_entry_t	*rq_tail;
+	struct dtc_reply_queue_entry	*rq_head;
+	struct dtc_reply_queue_entry	*rq_tail;
 	uint32_t			cmd_index;
 	uint32_t			reply_index;
 	uint8_t			cmd_buffer[USB_EP2BANK_SIZE];
@@ -631,7 +630,7 @@ dtc_queue_init(void) {
 
 static
 inline
-dtc_reply_queue_entry_t *
+struct dtc_reply_queue_entry *
 dtc_queue_enqueue_reply(
 	enum scan_type	type,
 	uint8_t				*buffer,
@@ -640,9 +639,9 @@ dtc_queue_enqueue_reply(
 	int				length,
 	jtag_command_t	*cmd
 ) {
-	dtc_reply_queue_entry_t	*rq_entry;
+	struct dtc_reply_queue_entry	*rq_entry;
 
-	rq_entry = malloc(sizeof(dtc_reply_queue_entry_t));
+	rq_entry = malloc(sizeof(struct dtc_reply_queue_entry));
 	if (rq_entry != NULL) {
 		rq_entry-&gt;scan.type = type;
 		rq_entry-&gt;scan.buffer = buffer;
@@ -672,7 +671,7 @@ dtc_queue_enqueue_reply(
 static
 int
 dtc_queue_run(void) {
-	dtc_reply_queue_entry_t	*rq_p, *rq_next;
+	struct dtc_reply_queue_entry	*rq_p, *rq_next;
 	int			retval;
 	int			usb_err;
 	int			bit_cnt;
diff --git a/src/jtag/rlink/rlink.h b/src/jtag/rlink/rlink.h
index 6bab26e..b53be5c 100644
--- a/src/jtag/rlink/rlink.h
+++ b/src/jtag/rlink/rlink.h
@@ -20,13 +20,12 @@
 
 #include &quot;types.h&quot;
 
-typedef
-struct rlink_speed_table_s {
-	uint8_t const	*dtc;
-	uint16_t			dtc_size;
-	uint16_t			khz;
-	uint8_t			prescaler;
-} rlink_speed_table_t;
+struct rlink_speed_table {
+	uint8_t const *dtc;
+	uint16_t dtc_size;
+	uint16_t khz;
+	uint8_t prescaler;
+};
 
-extern const rlink_speed_table_t	rlink_speed_table[];
-extern const size_t					rlink_speed_table_size;
+extern const struct rlink_speed_table rlink_speed_table[];
+extern const size_t rlink_speed_table_size;
diff --git a/src/jtag/rlink/rlink_speed_table.c b/src/jtag/rlink/rlink_speed_table.c
index 1f3e973..5c40ab4 100644
--- a/src/jtag/rlink/rlink_speed_table.c
+++ b/src/jtag/rlink/rlink_speed_table.c
@@ -87,7 +87,7 @@ static const uint8_t dtc_2[] = {
 	36, 139, 112, 193, 151, 96
 };
 
-const rlink_speed_table_t rlink_speed_table[] = {{
+const struct rlink_speed_table rlink_speed_table[] = {{
 	dtc_64, sizeof(dtc_64), (ST7_FOSC * 2) / (1000 * 64), 64
 }, {
 	dtc_11, sizeof(dtc_11), (ST7_FOSC * 2) / (1000 * 11), 11

commit 96b62996d2d81b09a48bf253bc9e60e637f687bd
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 11:32:28 2009 -0800

    flash_bank_t -&gt; struct flash_bank
    
    Remove misleading typedef and redundant suffix from struct flash_bank.

diff --git a/src/flash/aduc702x.c b/src/flash/aduc702x.c
index 76f38b5..c2a1884 100644
--- a/src/flash/aduc702x.c
+++ b/src/flash/aduc702x.c
@@ -29,7 +29,7 @@
 #include &quot;time_support.h&quot;
 
 
-static int aduc702x_build_sector_list(struct flash_bank_s *bank);
+static int aduc702x_build_sector_list(struct flash_bank *bank);
 static int aduc702x_check_flash_completion(struct target* target, unsigned int timeout_ms);
 static int aduc702x_set_write_enable(struct target *target, int enable);
 
@@ -64,9 +64,9 @@ FLASH_BANK_COMMAND_HANDLER(aduc702x_flash_bank_command)
         return ERROR_OK;
 }
 
-static int aduc702x_build_sector_list(struct flash_bank_s *bank)
+static int aduc702x_build_sector_list(struct flash_bank *bank)
 {
-	//aduc7026_flash_bank_t *aduc7026_info = bank-&gt;driver_priv;
+	//aduc7026_struct flash_bank *aduc7026_info = bank-&gt;driver_priv;
 
         int i = 0;
         uint32_t offset = 0;
@@ -86,13 +86,13 @@ static int aduc702x_build_sector_list(struct flash_bank_s *bank)
 	return ERROR_OK;
 }
 
-static int aduc702x_protect_check(struct flash_bank_s *bank)
+static int aduc702x_protect_check(struct flash_bank *bank)
 {
 	printf(&quot;aduc702x_protect_check not implemented yet.\n&quot;);
 	return ERROR_OK;
 }
 
-static int aduc702x_erase(struct flash_bank_s *bank, int first, int last)
+static int aduc702x_erase(struct flash_bank *bank, int first, int last)
 {
         //int res;
 	int x;
@@ -145,7 +145,7 @@ static int aduc702x_erase(struct flash_bank_s *bank, int first, int last)
 	return ERROR_OK;
 }
 
-static int aduc702x_protect(struct flash_bank_s *bank, int set, int first, int last)
+static int aduc702x_protect(struct flash_bank *bank, int set, int first, int last)
 {
 	printf(&quot;aduc702x_protect not implemented yet.\n&quot;);
 	return ERROR_FLASH_OPERATION_FAILED;
@@ -156,7 +156,7 @@ static int aduc702x_protect(struct flash_bank_s *bank, int set, int first, int l
  *
  * Caller should not check for other return values specifically
  */
-static int aduc702x_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
+static int aduc702x_write_block(struct flash_bank *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
 	struct aduc702x_flash_bank *aduc702x_info = bank-&gt;driver_priv;
 	struct target *target = bank-&gt;target;
@@ -301,7 +301,7 @@ static int aduc702x_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint
 
 /* All-JTAG, single-access method.  Very slow.  Used only if there is no
  * working area available. */
-static int aduc702x_write_single(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
+static int aduc702x_write_single(struct flash_bank *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
 	uint32_t x;
         uint8_t b;
@@ -342,7 +342,7 @@ static int aduc702x_write_single(struct flash_bank_s *bank, uint8_t *buffer, uin
 	return ERROR_OK;
 }
 
-int aduc702x_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
+int aduc702x_write(struct flash_bank *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
 	int retval;
 
@@ -366,12 +366,12 @@ int aduc702x_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset,
         return retval;
 }
 
-static int aduc702x_probe(struct flash_bank_s *bank)
+static int aduc702x_probe(struct flash_bank *bank)
 {
 	return ERROR_OK;
 }
 
-static int aduc702x_info(struct flash_bank_s *bank, char *buf, int buf_size)
+static int aduc702x_info(struct flash_bank *bank, char *buf, int buf_size)
 {
 	snprintf(buf, buf_size, &quot;aduc702x flash driver info&quot;);
 	return ERROR_OK;
diff --git a/src/flash/at91sam3.c b/src/flash/at91sam3.c
index 3caf96c..b756e48 100644
--- a/src/flash/at91sam3.c
+++ b/src/flash/at91sam3.c
@@ -175,7 +175,7 @@ struct sam3_bank_private {
 	// so we can find the chip we belong to
 	struct sam3_chip *pChip;
 	// so we can find the orginal bank pointer
-	flash_bank_t *pBank;
+	struct flash_bank *pBank;
 	unsigned bank_number;
 	uint32_t controller_address;
 	uint32_t base_address;
@@ -1456,7 +1456,7 @@ static const struct sam3_reg_list sam3_all_regs[] = {
 
 
 static struct sam3_bank_private *
-get_sam3_bank_private(flash_bank_t *bank)
+get_sam3_bank_private(struct flash_bank *bank)
 {
 	return (struct sam3_bank_private *)(bank-&gt;driver_priv);
 }
@@ -1582,7 +1582,7 @@ sam3_GetInfo(struct sam3_chip *pChip)
 
 
 static int
-sam3_erase_check(struct flash_bank_s *bank)
+sam3_erase_check(struct flash_bank *bank)
 {
 	int x;
 
@@ -1606,7 +1606,7 @@ sam3_erase_check(struct flash_bank_s *bank)
 }
 
 static int
-sam3_protect_check(struct flash_bank_s *bank)
+sam3_protect_check(struct flash_bank *bank)
 {
 	int r;
 	uint32_t v=0;
@@ -1709,7 +1709,7 @@ sam3_GetDetails(struct sam3_bank_private *pPrivate)
 	const struct sam3_chip_details *pDetails;
 	struct sam3_chip *pChip;
 	void *vp;
-	flash_bank_t *saved_banks[SAM3_MAX_FLASH_BANKS];
+	struct flash_bank *saved_banks[SAM3_MAX_FLASH_BANKS];
 
 	unsigned x;
 	const char *cp;
@@ -1777,7 +1777,7 @@ sam3_GetDetails(struct sam3_bank_private *pPrivate)
 
 
 static int
-_sam3_probe(struct flash_bank_s *bank, int noise)
+_sam3_probe(struct flash_bank *bank, int noise)
 {
 	unsigned x;
 	int r;
@@ -1861,13 +1861,13 @@ _sam3_probe(struct flash_bank_s *bank, int noise)
 }
 
 static int
-sam3_probe(struct flash_bank_s *bank)
+sam3_probe(struct flash_bank *bank)
 {
 	return _sam3_probe(bank, 1);
 }
 
 static int
-sam3_auto_probe(struct flash_bank_s *bank)
+sam3_auto_probe(struct flash_bank *bank)
 {
 	return _sam3_probe(bank, 0);
 }
@@ -1875,7 +1875,7 @@ sam3_auto_probe(struct flash_bank_s *bank)
 
 
 static int
-sam3_erase(struct flash_bank_s *bank, int first, int last)
+sam3_erase(struct flash_bank *bank, int first, int last)
 {
 	struct sam3_bank_private *pPrivate;
 	int r;
@@ -1907,7 +1907,7 @@ sam3_erase(struct flash_bank_s *bank, int first, int last)
 }
 
 static int
-sam3_protect(struct flash_bank_s *bank, int set, int first, int last)
+sam3_protect(struct flash_bank *bank, int set, int first, int last)
 {
 	struct sam3_bank_private *pPrivate;
 	int r;
@@ -1936,7 +1936,7 @@ sam3_protect(struct flash_bank_s *bank, int set, int first, int last)
 
 
 static int
-sam3_info(flash_bank_t *bank, char *buf, int buf_size)
+sam3_info(struct flash_bank *bank, char *buf, int buf_size)
 {
 	if (bank-&gt;target-&gt;state != TARGET_HALTED) {
 		LOG_ERROR(&quot;Target not halted&quot;);
@@ -2104,7 +2104,7 @@ sam3_page_write(struct sam3_bank_private *pPrivate, unsigned pagenum, uint8_t *b
 
 
 static int
-sam3_write(struct flash_bank_s *bank,
+sam3_write(struct flash_bank *bank,
 		   uint8_t *buffer,
 		   uint32_t offset,
 		   uint32_t count)
diff --git a/src/flash/at91sam7.c b/src/flash/at91sam7.c
index 6c98953..8f870bc 100644
--- a/src/flash/at91sam7.c
+++ b/src/flash/at91sam7.c
@@ -52,13 +52,13 @@
 #include &quot;at91sam7.h&quot;
 #include &quot;binarybuffer.h&quot;
 
-static int at91sam7_protect_check(struct flash_bank_s *bank);
-static int at91sam7_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count);
+static int at91sam7_protect_check(struct flash_bank *bank);
+static int at91sam7_write(struct flash_bank *bank, uint8_t *buffer, uint32_t offset, uint32_t count);
 
 static uint32_t at91sam7_get_flash_status(struct target *target, int bank_number);
-static void at91sam7_set_flash_mode(struct flash_bank_s *bank, int mode);
-static uint32_t at91sam7_wait_status_busy(struct flash_bank_s *bank, uint32_t waitbits, int timeout);
-static int at91sam7_flash_command(struct flash_bank_s *bank, uint8_t cmd, uint16_t pagen);
+static void at91sam7_set_flash_mode(struct flash_bank *bank, int mode);
+static uint32_t at91sam7_wait_status_busy(struct flash_bank *bank, uint32_t waitbits, int timeout);
+static int at91sam7_flash_command(struct flash_bank *bank, uint8_t cmd, uint16_t pagen);
 
 static uint32_t MC_FMR[4] = { 0xFFFFFF60, 0xFFFFFF70, 0xFFFFFF80, 0xFFFFFF90 };
 static uint32_t MC_FCR[4] = { 0xFFFFFF64, 0xFFFFFF74, 0xFFFFFF84, 0xFFFFFF94 };
@@ -97,7 +97,7 @@ static uint32_t at91sam7_get_flash_status(struct target *target, int bank_number
 }
 
 /* Read clock configuration and set at91sam7_info-&gt;mck_freq */
-static void at91sam7_read_clock_info(flash_bank_t *bank)
+static void at91sam7_read_clock_info(struct flash_bank *bank)
 {
 	struct at91sam7_flash_bank *at91sam7_info = bank-&gt;driver_priv;
 	struct target *target = bank-&gt;target;
@@ -176,7 +176,7 @@ static void at91sam7_read_clock_info(flash_bank_t *bank)
 }
 
 /* Setup the timimg registers for nvbits or normal flash */
-static void at91sam7_set_flash_mode(flash_bank_t *bank, int mode)
+static void at91sam7_set_flash_mode(struct flash_bank *bank, int mode)
 {
 	uint32_t fmr, fmcn = 0, fws = 0;
 	struct at91sam7_flash_bank *at91sam7_info = bank-&gt;driver_priv;
@@ -224,7 +224,7 @@ static void at91sam7_set_flash_mode(flash_bank_t *bank, int mode)
 	at91sam7_info-&gt;flashmode = mode;
 }
 
-static uint32_t at91sam7_wait_status_busy(flash_bank_t *bank, uint32_t waitbits, int timeout)
+static uint32_t at91sam7_wait_status_busy(struct flash_bank *bank, uint32_t waitbits, int timeout)
 {
 	uint32_t status;
 
@@ -251,7 +251,7 @@ static uint32_t at91sam7_wait_status_busy(flash_bank_t *bank, uint32_t waitbits,
 }
 
 /* Send one command to the AT91SAM flash controller */
-static int at91sam7_flash_command(struct flash_bank_s *bank, uint8_t cmd, uint16_t pagen)
+static int at91sam7_flash_command(struct flash_bank *bank, uint8_t cmd, uint16_t pagen)
 {
 	uint32_t fcr;
 	struct at91sam7_flash_bank *at91sam7_info = bank-&gt;driver_priv;
@@ -280,9 +280,9 @@ static int at91sam7_flash_command(struct flash_bank_s *bank, uint8_t cmd, uint16
 }
 
 /* Read device id register, main clock frequency register and fill in driver info structure */
-static int at91sam7_read_part_info(struct flash_bank_s *bank)
+static int at91sam7_read_part_info(struct flash_bank *bank)
 {
-	flash_bank_t *t_bank = bank;
+	struct flash_bank *t_bank = bank;
 	struct at91sam7_flash_bank *at91sam7_info;
 	struct target *target = t_bank-&gt;target;
 
@@ -304,7 +304,7 @@ static int at91sam7_read_part_info(struct flash_bank_s *bank)
 	if (at91sam7_info-&gt;cidr != 0)
 	{
 		/* flash already configured, update clock and check for protected sectors */
-		flash_bank_t *fb = bank;
+		struct flash_bank *fb = bank;
 		t_bank = fb;
 
 		while (t_bank)
@@ -336,7 +336,7 @@ static int at91sam7_read_part_info(struct flash_bank_s *bank)
 	if (at91sam7_info-&gt;flash_autodetection == 0)
 	{
 		/* banks and sectors are already created, based on data from input file */
-		flash_bank_t *fb = bank;
+		struct flash_bank *fb = bank;
 		t_bank = fb;
 		while (t_bank)
 		{
@@ -532,7 +532,7 @@ static int at91sam7_read_part_info(struct flash_bank_s *bank)
 		if (bnk &gt; 0)
 		{
 			/* create a new flash bank element */
-			flash_bank_t *fb = malloc(sizeof(flash_bank_t));
+			struct flash_bank *fb = malloc(sizeof(struct flash_bank));
 			fb-&gt;target = target;
 			fb-&gt;driver = bank-&gt;driver;
 			fb-&gt;driver_priv = malloc(sizeof(struct at91sam7_flash_bank));
@@ -595,7 +595,7 @@ static int at91sam7_read_part_info(struct flash_bank_s *bank)
 	return ERROR_OK;
 }
 
-static int at91sam7_erase_check(struct flash_bank_s *bank)
+static int at91sam7_erase_check(struct flash_bank *bank)
 {
 	struct target *target = bank-&gt;target;
 	uint16_t retval;
@@ -661,7 +661,7 @@ static int at91sam7_erase_check(struct flash_bank_s *bank)
 	return ERROR_OK;
 }
 
-static int at91sam7_protect_check(struct flash_bank_s *bank)
+static int at91sam7_protect_check(struct flash_bank *bank)
 {
 	uint8_t lock_pos, gpnvm_pos;
 	uint32_t status;
@@ -713,7 +713,7 @@ static int at91sam7_protect_check(struct flash_bank_s *bank)
 
 FLASH_BANK_COMMAND_HANDLER(at91sam7_flash_bank_command)
 {
-	flash_bank_t *t_bank = bank;
+	struct flash_bank *t_bank = bank;
 	struct at91sam7_flash_bank *at91sam7_info;
 	struct target *target = t_bank-&gt;target;
 
@@ -785,7 +785,7 @@ FLASH_BANK_COMMAND_HANDLER(at91sam7_flash_bank_command)
 		if (bnk &gt; 0)
 		{
 			/* create a new bank element */
-			flash_bank_t *fb = malloc(sizeof(flash_bank_t));
+			struct flash_bank *fb = malloc(sizeof(struct flash_bank));
 			fb-&gt;target = target;
 			fb-&gt;driver = bank-&gt;driver;
 			fb-&gt;driver_priv = malloc(sizeof(struct at91sam7_flash_bank));
@@ -827,7 +827,7 @@ FLASH_BANK_COMMAND_HANDLER(at91sam7_flash_bank_command)
 	return ERROR_OK;
 }
 
-static int at91sam7_erase(struct flash_bank_s *bank, int first, int last)
+static int at91sam7_erase(struct flash_bank *bank, int first, int last)
 {
 	struct at91sam7_flash_bank *at91sam7_info = bank-&gt;driver_priv;
 	int sec;
@@ -895,7 +895,7 @@ static int at91sam7_erase(struct flash_bank_s *bank, int first, int last)
 	return ERROR_OK;
 }
 
-static int at91sam7_protect(struct flash_bank_s *bank, int set, int first, int last)
+static int at91sam7_protect(struct flash_bank *bank, int set, int first, int last)
 {
 	uint32_t cmd;
 	int sector;
@@ -945,7 +945,7 @@ static int at91sam7_protect(struct flash_bank_s *bank, int set, int first, int l
 	return ERROR_OK;
 }
 
-static int at91sam7_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
+static int at91sam7_write(struct flash_bank *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
 	int retval;
 	struct at91sam7_flash_bank *at91sam7_info = bank-&gt;driver_priv;
@@ -1014,7 +1014,7 @@ static int at91sam7_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t o
 	return ERROR_OK;
 }
 
-static int at91sam7_probe(struct flash_bank_s *bank)
+static int at91sam7_probe(struct flash_bank *bank)
 {
 	/* we can't probe on an at91sam7
 	 * if this is an at91sam7, it has the configured flash */
@@ -1033,7 +1033,7 @@ static int at91sam7_probe(struct flash_bank_s *bank)
 	return ERROR_OK;
 }
 
-static int at91sam7_info(struct flash_bank_s *bank, char *buf, int buf_size)
+static int at91sam7_info(struct flash_bank *bank, char *buf, int buf_size)
 {
 	int printed;
 	struct at91sam7_flash_bank *at91sam7_info = bank-&gt;driver_priv;
@@ -1100,7 +1100,7 @@ static int at91sam7_info(struct flash_bank_s *bank, char *buf, int buf_size)
 */
 COMMAND_HANDLER(at91sam7_handle_gpnvm_command)
 {
-	flash_bank_t *bank;
+	struct flash_bank *bank;
 	int bit;
 	uint8_t  flashcmd;
 	uint32_t status;
diff --git a/src/flash/avrf.c b/src/flash/avrf.c
index f4a7d72..9df254e 100644
--- a/src/flash/avrf.c
+++ b/src/flash/avrf.c
@@ -198,19 +198,19 @@ FLASH_BANK_COMMAND_HANDLER(avrf_flash_bank_command)
 	return ERROR_OK;
 }
 
-static int avrf_erase(struct flash_bank_s *bank, int first, int last)
+static int avrf_erase(struct flash_bank *bank, int first, int last)
 {
 	LOG_INFO(&quot;%s&quot;, __FUNCTION__);
 	return ERROR_OK;
 }
 
-static int avrf_protect(struct flash_bank_s *bank, int set, int first, int last)
+static int avrf_protect(struct flash_bank *bank, int set, int first, int last)
 {
 	LOG_INFO(&quot;%s&quot;, __FUNCTION__);
 	return ERROR_OK;
 }
 
-static int avrf_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
+static int avrf_write(struct flash_bank *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
 	struct target *target = bank-&gt;target;
 	struct avr_common *avr = target-&gt;arch_info;
@@ -261,7 +261,7 @@ static int avrf_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offse
 #define EXTRACT_MFG(X)  (((X) &amp; 0xffe) &gt;&gt; 1)
 #define EXTRACT_PART(X) (((X) &amp; 0xffff000) &gt;&gt; 12)
 #define EXTRACT_VER(X)  (((X) &amp; 0xf0000000) &gt;&gt; 28)
-static int avrf_probe(struct flash_bank_s *bank)
+static int avrf_probe(struct flash_bank *bank)
 {
 	struct target *target = bank-&gt;target;
 	struct avrf_flash_bank *avrf_info = bank-&gt;driver_priv;
@@ -329,7 +329,7 @@ static int avrf_probe(struct flash_bank_s *bank)
 	}
 }
 
-static int avrf_auto_probe(struct flash_bank_s *bank)
+static int avrf_auto_probe(struct flash_bank *bank)
 {
 	struct avrf_flash_bank *avrf_info = bank-&gt;driver_priv;
 	if (avrf_info-&gt;probed)
@@ -337,13 +337,13 @@ static int avrf_auto_probe(struct flash_bank_s *bank)
 	return avrf_probe(bank);
 }
 
-static int avrf_protect_check(struct flash_bank_s *bank)
+static int avrf_protect_check(struct flash_bank *bank)
 {
 	LOG_INFO(&quot;%s&quot;, __FUNCTION__);
 	return ERROR_OK;
 }
 
-static int avrf_info(struct flash_bank_s *bank, char *buf, int buf_size)
+static int avrf_info(struct flash_bank *bank, char *buf, int buf_size)
 {
 	struct target *target = bank-&gt;target;
 	struct avr_common *avr = target-&gt;arch_info;
@@ -394,7 +394,7 @@ static int avrf_info(struct flash_bank_s *bank, char *buf, int buf_size)
 	}
 }
 
-static int avrf_mass_erase(struct flash_bank_s *bank)
+static int avrf_mass_erase(struct flash_bank *bank)
 {
 	struct target *target = bank-&gt;target;
 	struct avr_common *avr = target-&gt;arch_info;
@@ -425,7 +425,7 @@ COMMAND_HANDLER(avrf_handle_mass_erase_command)
 		return ERROR_OK;
 	}
 
-	flash_bank_t *bank;
+	struct flash_bank *bank;
 	int retval = flash_command_get_bank_by_num(cmd_ctx, args[0], &amp;bank);
 	if (ERROR_OK != retval)
 		return retval;
diff --git a/src/flash/cfi.c b/src/flash/cfi.c
index 6ab84f1..dd393de 100644
--- a/src/flash/cfi.c
+++ b/src/flash/cfi.c
@@ -42,9 +42,9 @@ static struct cfi_unlock_addresses cfi_unlock_addresses[] =
 };
 
 /* CFI fixups foward declarations */
-static void cfi_fixup_0002_erase_regions(flash_bank_t *flash, void *param);
-static void cfi_fixup_0002_unlock_addresses(flash_bank_t *flash, void *param);
-static void cfi_fixup_atmel_reversed_erase_regions(flash_bank_t *flash, void *param);
+static void cfi_fixup_0002_erase_regions(struct flash_bank *flash, void *param);
+static void cfi_fixup_0002_unlock_addresses(struct flash_bank *flash, void *param);
+static void cfi_fixup_atmel_reversed_erase_regions(struct flash_bank *flash, void *param);
 
 /* fixup after reading cmdset 0002 primary query table */
 static const struct cfi_fixup cfi_0002_fixups[] = {
@@ -67,7 +67,7 @@ static const struct cfi_fixup cfi_0001_fixups[] = {
 	{0, 0, NULL, NULL}
 };
 
-static void cfi_fixup(flash_bank_t *bank, const struct cfi_fixup *fixups)
+static void cfi_fixup(struct flash_bank *bank, const struct cfi_fixup *fixups)
 {
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	const struct cfi_fixup *f;
@@ -82,8 +82,8 @@ static void cfi_fixup(flash_bank_t *bank, const struct cfi_fixup *fixups)
 	}
 }
 
-/* inline uint32_t flash_address(flash_bank_t *bank, int sector, uint32_t offset) */
-static __inline__ uint32_t flash_address(flash_bank_t *bank, int sector, uint32_t offset)
+/* inline uint32_t flash_address(struct flash_bank *bank, int sector, uint32_t offset) */
+static __inline__ uint32_t flash_address(struct flash_bank *bank, int sector, uint32_t offset)
 {
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 
@@ -104,7 +104,7 @@ static __inline__ uint32_t flash_address(flash_bank_t *bank, int sector, uint32_
 
 }
 
-static void cfi_command(flash_bank_t *bank, uint8_t cmd, uint8_t *cmd_buf)
+static void cfi_command(struct flash_bank *bank, uint8_t cmd, uint8_t *cmd_buf)
 {
 	int i;
 
@@ -134,7 +134,7 @@ static void cfi_command(flash_bank_t *bank, uint8_t cmd, uint8_t *cmd_buf)
  * flash banks are expected to be made of similar chips
  * the query result should be the same for all
  */
-static uint8_t cfi_query_u8(flash_bank_t *bank, int sector, uint32_t offset)
+static uint8_t cfi_query_u8(struct flash_bank *bank, int sector, uint32_t offset)
 {
 	struct target *target = bank-&gt;target;
 	uint8_t data[CFI_MAX_BUS_WIDTH];
@@ -151,7 +151,7 @@ static uint8_t cfi_query_u8(flash_bank_t *bank, int sector, uint32_t offset)
  * in case of a bank made of multiple chips,
  * the individual values are ORed
  */
-static uint8_t cfi_get_u8(flash_bank_t *bank, int sector, uint32_t offset)
+static uint8_t cfi_get_u8(struct flash_bank *bank, int sector, uint32_t offset)
 {
 	struct target *target = bank-&gt;target;
 	uint8_t data[CFI_MAX_BUS_WIDTH];
@@ -176,7 +176,7 @@ static uint8_t cfi_get_u8(flash_bank_t *bank, int sector, uint32_t offset)
 	}
 }
 
-static uint16_t cfi_query_u16(flash_bank_t *bank, int sector, uint32_t offset)
+static uint16_t cfi_query_u16(struct flash_bank *bank, int sector, uint32_t offset)
 {
 	struct target *target = bank-&gt;target;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
@@ -198,7 +198,7 @@ static uint16_t cfi_query_u16(flash_bank_t *bank, int sector, uint32_t offset)
 		return data[bank-&gt;bus_width - 1] | data[(2 * bank-&gt;bus_width) - 1] &lt;&lt; 8;
 }
 
-static uint32_t cfi_query_u32(flash_bank_t *bank, int sector, uint32_t offset)
+static uint32_t cfi_query_u32(struct flash_bank *bank, int sector, uint32_t offset)
 {
 	struct target *target = bank-&gt;target;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
@@ -221,7 +221,7 @@ static uint32_t cfi_query_u32(flash_bank_t *bank, int sector, uint32_t offset)
 				data[(3 * bank-&gt;bus_width) - 1] &lt;&lt; 16 | data[(4 * bank-&gt;bus_width) - 1] &lt;&lt; 24;
 }
 
-static void cfi_intel_clear_status_register(flash_bank_t *bank)
+static void cfi_intel_clear_status_register(struct flash_bank *bank)
 {
 	struct target *target = bank-&gt;target;
 	uint8_t command[8];
@@ -236,7 +236,7 @@ static void cfi_intel_clear_status_register(flash_bank_t *bank)
 	target_write_memory(target, flash_address(bank, 0, 0x0), bank-&gt;bus_width, 1, command);
 }
 
-uint8_t cfi_intel_wait_status_busy(flash_bank_t *bank, int timeout)
+uint8_t cfi_intel_wait_status_busy(struct flash_bank *bank, int timeout)
 {
 	uint8_t status;
 
@@ -277,7 +277,7 @@ uint8_t cfi_intel_wait_status_busy(flash_bank_t *bank, int timeout)
 	return status;
 }
 
-int cfi_spansion_wait_status_busy(flash_bank_t *bank, int timeout)
+int cfi_spansion_wait_status_busy(struct flash_bank *bank, int timeout)
 {
 	uint8_t status, oldstatus;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
@@ -312,7 +312,7 @@ int cfi_spansion_wait_status_busy(flash_bank_t *bank, int timeout)
 	return(ERROR_FLASH_BUSY);
 }
 
-static int cfi_read_intel_pri_ext(flash_bank_t *bank)
+static int cfi_read_intel_pri_ext(struct flash_bank *bank)
 {
 	int retval;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
@@ -378,7 +378,7 @@ static int cfi_read_intel_pri_ext(flash_bank_t *bank)
 	return ERROR_OK;
 }
 
-static int cfi_read_spansion_pri_ext(flash_bank_t *bank)
+static int cfi_read_spansion_pri_ext(struct flash_bank *bank)
 {
 	int retval;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
@@ -443,7 +443,7 @@ static int cfi_read_spansion_pri_ext(flash_bank_t *bank)
 	return ERROR_OK;
 }
 
-static int cfi_read_atmel_pri_ext(flash_bank_t *bank)
+static int cfi_read_atmel_pri_ext(struct flash_bank *bank)
 {
 	int retval;
 	struct cfi_atmel_pri_ext atmel_pri_ext;
@@ -510,7 +510,7 @@ static int cfi_read_atmel_pri_ext(flash_bank_t *bank)
 	return ERROR_OK;
 }
 
-static int cfi_read_0002_pri_ext(flash_bank_t *bank)
+static int cfi_read_0002_pri_ext(struct flash_bank *bank)
 {
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 
@@ -524,7 +524,7 @@ static int cfi_read_0002_pri_ext(flash_bank_t *bank)
 	}
 }
 
-static int cfi_spansion_info(struct flash_bank_s *bank, char *buf, int buf_size)
+static int cfi_spansion_info(struct flash_bank *bank, char *buf, int buf_size)
 {
 	int printed;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
@@ -559,7 +559,7 @@ static int cfi_spansion_info(struct flash_bank_s *bank, char *buf, int buf_size)
 	return ERROR_OK;
 }
 
-static int cfi_intel_info(struct flash_bank_s *bank, char *buf, int buf_size)
+static int cfi_intel_info(struct flash_bank *bank, char *buf, int buf_size)
 {
 	int printed;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
@@ -652,7 +652,7 @@ FLASH_BANK_COMMAND_HANDLER(cfi_flash_bank_command)
 	return ERROR_OK;
 }
 
-static int cfi_intel_erase(struct flash_bank_s *bank, int first, int last)
+static int cfi_intel_erase(struct flash_bank *bank, int first, int last)
 {
 	int retval;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
@@ -696,7 +696,7 @@ static int cfi_intel_erase(struct flash_bank_s *bank, int first, int last)
 
 }
 
-static int cfi_spansion_erase(struct flash_bank_s *bank, int first, int last)
+static int cfi_spansion_erase(struct flash_bank *bank, int first, int last)
 {
 	int retval;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
@@ -762,7 +762,7 @@ static int cfi_spansion_erase(struct flash_bank_s *bank, int first, int last)
 	return target_write_memory(target, flash_address(bank, 0, 0x0), bank-&gt;bus_width, 1, command);
 }
 
-static int cfi_erase(struct flash_bank_s *bank, int first, int last)
+static int cfi_erase(struct flash_bank *bank, int first, int last)
 {
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 
@@ -797,7 +797,7 @@ static int cfi_erase(struct flash_bank_s *bank, int first, int last)
 	return ERROR_OK;
 }
 
-static int cfi_intel_protect(struct flash_bank_s *bank, int set, int first, int last)
+static int cfi_intel_protect(struct flash_bank *bank, int set, int first, int last)
 {
 	int retval;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
@@ -914,7 +914,7 @@ static int cfi_intel_protect(struct flash_bank_s *bank, int set, int first, int
 	return target_write_memory(target, flash_address(bank, 0, 0x0), bank-&gt;bus_width, 1, command);
 }
 
-static int cfi_protect(struct flash_bank_s *bank, int set, int first, int last)
+static int cfi_protect(struct flash_bank *bank, int set, int first, int last)
 {
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 
@@ -947,7 +947,7 @@ static int cfi_protect(struct flash_bank_s *bank, int set, int first, int last)
 }
 
 /* FIXME Replace this by a simple memcpy() - still unsure about sideeffects */
-static void cfi_add_byte(struct flash_bank_s *bank, uint8_t *word, uint8_t byte)
+static void cfi_add_byte(struct flash_bank *bank, uint8_t *word, uint8_t byte)
 {
 	/* struct target *target = bank-&gt;target; */
 
@@ -993,7 +993,7 @@ static void cfi_fix_code_endian(struct target *target, uint8_t *dest, const uint
 	}
 }
 
-static uint32_t cfi_command_val(flash_bank_t *bank, uint8_t cmd)
+static uint32_t cfi_command_val(struct flash_bank *bank, uint8_t cmd)
 {
 	struct target *target = bank-&gt;target;
 
@@ -1016,7 +1016,7 @@ static uint32_t cfi_command_val(flash_bank_t *bank, uint8_t cmd)
 	}
 }
 
-static int cfi_intel_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint32_t address, uint32_t count)
+static int cfi_intel_write_block(struct flash_bank *bank, uint8_t *buffer, uint32_t address, uint32_t count)
 {
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	struct target *target = bank-&gt;target;
@@ -1260,7 +1260,7 @@ cleanup:
 	return retval;
 }
 
-static int cfi_spansion_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint32_t address, uint32_t count)
+static int cfi_spansion_write_block(struct flash_bank *bank, uint8_t *buffer, uint32_t address, uint32_t count)
 {
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	struct cfi_spansion_pri_ext *pri_ext = cfi_info-&gt;pri_ext;
@@ -1559,7 +1559,7 @@ static int cfi_spansion_write_block(struct flash_bank_s *bank, uint8_t *buffer,
 	return exit_code;
 }
 
-static int cfi_intel_write_word(struct flash_bank_s *bank, uint8_t *word, uint32_t address)
+static int cfi_intel_write_word(struct flash_bank *bank, uint8_t *word, uint32_t address)
 {
 	int retval;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
@@ -1593,7 +1593,7 @@ static int cfi_intel_write_word(struct flash_bank_s *bank, uint8_t *word, uint32
 	return ERROR_OK;
 }
 
-static int cfi_intel_write_words(struct flash_bank_s *bank, uint8_t *word, uint32_t wordcount, uint32_t address)
+static int cfi_intel_write_words(struct flash_bank *bank, uint8_t *word, uint32_t wordcount, uint32_t address)
 {
 	int retval;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
@@ -1686,7 +1686,7 @@ static int cfi_intel_write_words(struct flash_bank_s *bank, uint8_t *word, uint3
 	return ERROR_OK;
 }
 
-static int cfi_spansion_write_word(struct flash_bank_s *bank, uint8_t *word, uint32_t address)
+static int cfi_spansion_write_word(struct flash_bank *bank, uint8_t *word, uint32_t address)
 {
 	int retval;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
@@ -1732,7 +1732,7 @@ static int cfi_spansion_write_word(struct flash_bank_s *bank, uint8_t *word, uin
 	return ERROR_OK;
 }
 
-static int cfi_spansion_write_words(struct flash_bank_s *bank, uint8_t *word, uint32_t wordcount, uint32_t address)
+static int cfi_spansion_write_words(struct flash_bank *bank, uint8_t *word, uint32_t wordcount, uint32_t address)
 {
 	int retval;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
@@ -1824,7 +1824,7 @@ static int cfi_spansion_write_words(struct flash_bank_s *bank, uint8_t *word, ui
 	return ERROR_OK;
 }
 
-static int cfi_write_word(struct flash_bank_s *bank, uint8_t *word, uint32_t address)
+static int cfi_write_word(struct flash_bank *bank, uint8_t *word, uint32_t address)
 {
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 
@@ -1845,7 +1845,7 @@ static int cfi_write_word(struct flash_bank_s *bank, uint8_t *word, uint32_t add
 	return ERROR_FLASH_OPERATION_FAILED;
 }
 
-static int cfi_write_words(struct flash_bank_s *bank, uint8_t *word, uint32_t wordcount, uint32_t address)
+static int cfi_write_words(struct flash_bank *bank, uint8_t *word, uint32_t wordcount, uint32_t address)
 {
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 
@@ -1866,7 +1866,7 @@ static int cfi_write_words(struct flash_bank_s *bank, uint8_t *word, uint32_t wo
 	return ERROR_FLASH_OPERATION_FAILED;
 }
 
-int cfi_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
+int cfi_write(struct flash_bank *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	struct target *target = bank-&gt;target;
@@ -2075,7 +2075,7 @@ int cfi_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint3
 	return target_write_memory(target, flash_address(bank, 0, 0x0), bank-&gt;bus_width, 1, current_word);
 }
 
-static void cfi_fixup_atmel_reversed_erase_regions(flash_bank_t *bank, void *param)
+static void cfi_fixup_atmel_reversed_erase_regions(struct flash_bank *bank, void *param)
 {
 	(void) param;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
@@ -2084,7 +2084,7 @@ static void cfi_fixup_atmel_reversed_erase_regions(flash_bank_t *bank, void *par
 	pri_ext-&gt;_reversed_geometry = 1;
 }
 
-static void cfi_fixup_0002_erase_regions(flash_bank_t *bank, void *param)
+static void cfi_fixup_0002_erase_regions(struct flash_bank *bank, void *param)
 {
 	int i;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
@@ -2107,7 +2107,7 @@ static void cfi_fixup_0002_erase_regions(flash_bank_t *bank, void *param)
 	}
 }
 
-static void cfi_fixup_0002_unlock_addresses(flash_bank_t *bank, void *param)
+static void cfi_fixup_0002_unlock_addresses(struct flash_bank *bank, void *param)
 {
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	struct cfi_spansion_pri_ext *pri_ext = cfi_info-&gt;pri_ext;
@@ -2118,7 +2118,7 @@ static void cfi_fixup_0002_unlock_addresses(flash_bank_t *bank, void *param)
 }
 
 
-static int cfi_query_string(struct flash_bank_s *bank, int address)
+static int cfi_query_string(struct flash_bank *bank, int address)
 {
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	struct target *target = bank-&gt;target;
@@ -2156,7 +2156,7 @@ static int cfi_query_string(struct flash_bank_s *bank, int address)
 	return ERROR_OK;
 }
 
-static int cfi_probe(struct flash_bank_s *bank)
+static int cfi_probe(struct flash_bank *bank)
 {
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	struct target *target = bank-&gt;target;
@@ -2435,7 +2435,7 @@ static int cfi_probe(struct flash_bank_s *bank)
 	return ERROR_OK;
 }
 
-static int cfi_auto_probe(struct flash_bank_s *bank)
+static int cfi_auto_probe(struct flash_bank *bank)
 {
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	if (cfi_info-&gt;probed)
@@ -2444,7 +2444,7 @@ static int cfi_auto_probe(struct flash_bank_s *bank)
 }
 
 
-static int cfi_intel_protect_check(struct flash_bank_s *bank)
+static int cfi_intel_protect_check(struct flash_bank *bank)
 {
 	int retval;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
@@ -2477,7 +2477,7 @@ static int cfi_intel_protect_check(struct flash_bank_s *bank)
 	return target_write_memory(target, flash_address(bank, 0, 0x0), bank-&gt;bus_width, 1, command);
 }
 
-static int cfi_spansion_protect_check(struct flash_bank_s *bank)
+static int cfi_spansion_protect_check(struct flash_bank *bank)
 {
 	int retval;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
@@ -2518,7 +2518,7 @@ static int cfi_spansion_protect_check(struct flash_bank_s *bank)
 	return target_write_memory(target, flash_address(bank, 0, 0x0), bank-&gt;bus_width, 1, command);
 }
 
-static int cfi_protect_check(struct flash_bank_s *bank)
+static int cfi_protect_check(struct flash_bank *bank)
 {
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 
@@ -2548,7 +2548,7 @@ static int cfi_protect_check(struct flash_bank_s *bank)
 	return ERROR_OK;
 }
 
-static int cfi_info(struct flash_bank_s *bank, char *buf, int buf_size)
+static int cfi_info(struct flash_bank *bank, char *buf, int buf_size)
 {
 	int printed;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
diff --git a/src/flash/cfi.h b/src/flash/cfi.h
index deca916..d55fd34 100644
--- a/src/flash/cfi.h
+++ b/src/flash/cfi.h
@@ -146,7 +146,7 @@ struct cfi_fixup
 {
 	uint16_t mfr;
 	uint16_t id;
-	void (*fixup)(flash_bank_t *flash, void *param);
+	void (*fixup)(struct flash_bank *flash, void *param);
 	void *param;
 };
 
diff --git a/src/flash/ecos.c b/src/flash/ecos.c
index ad27a45..da35407 100644
--- a/src/flash/ecos.c
+++ b/src/flash/ecos.c
@@ -27,9 +27,9 @@
 
 
 #if 0
-static uint32_t ecosflash_get_flash_status(flash_bank_t *bank);
-static void ecosflash_set_flash_mode(flash_bank_t *bank,int mode);
-static uint32_t ecosflash_wait_status_busy(flash_bank_t *bank, uint32_t waitbits, int timeout);
+static uint32_t ecosflash_get_flash_status(struct flash_bank *bank);
+static void ecosflash_set_flash_mode(struct flash_bank *bank,int mode);
+static uint32_t ecosflash_wait_status_busy(struct flash_bank *bank, uint32_t waitbits, int timeout);
 static int ecosflash_handle_gpnvm_command(struct command_context_s *cmd_ctx, char *cmd, char **args, int argc);
 #endif
 
@@ -329,7 +329,7 @@ static int eCosBoard_flash(struct ecosflash_flash_bank *info, void *data, uint32
 	return ERROR_OK;
 }
 
-static int ecosflash_probe(struct flash_bank_s *bank)
+static int ecosflash_probe(struct flash_bank *bank)
 {
 	return ERROR_OK;
 }
@@ -342,7 +342,7 @@ static int ecosflash_register_commands(struct command_context_s *cmd_ctx)
 }
 
 #if 0
-static void command(flash_bank_t *bank, uint8_t cmd, uint8_t *cmd_buf)
+static void command(struct flash_bank *bank, uint8_t cmd, uint8_t *cmd_buf)
 {
 	struct ecosflash_flash_bank *info = bank-&gt;driver_priv;
 	int i;
@@ -365,7 +365,7 @@ static void command(flash_bank_t *bank, uint8_t cmd, uint8_t *cmd_buf)
 #endif
 
 #if 0
-static uint32_t ecosflash_address(struct flash_bank_s *bank, uint32_t address)
+static uint32_t ecosflash_address(struct flash_bank *bank, uint32_t address)
 {
 	uint32_t retval = 0;
 	switch (bank-&gt;bus_width)
@@ -382,31 +382,31 @@ static uint32_t ecosflash_address(struct flash_bank_s *bank, uint32_t address)
 }
 #endif
 
-static int ecosflash_erase(struct flash_bank_s *bank, int first, int last)
+static int ecosflash_erase(struct flash_bank *bank, int first, int last)
 {
-	struct flash_bank_s *c = bank;
+	struct flash_bank *c = bank;
 	struct ecosflash_flash_bank *info = bank-&gt;driver_priv;
 	return eCosBoard_erase(info, c-&gt;base + first*sectorSize, sectorSize*(last-first + 1));
 }
 
-static int ecosflash_protect(struct flash_bank_s *bank, int set, int first, int last)
+static int ecosflash_protect(struct flash_bank *bank, int set, int first, int last)
 {
 	return ERROR_OK;
 }
 
-static int ecosflash_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
+static int ecosflash_write(struct flash_bank *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
 	struct ecosflash_flash_bank *info = bank-&gt;driver_priv;
-	struct flash_bank_s *c = bank;
+	struct flash_bank *c = bank;
 	return eCosBoard_flash(info, buffer, c-&gt;base + offset, count);
 }
 
-static int ecosflash_protect_check(struct flash_bank_s *bank)
+static int ecosflash_protect_check(struct flash_bank *bank)
 {
 	return ERROR_OK;
 }
 
-static int ecosflash_info(struct flash_bank_s *bank, char *buf, int buf_size)
+static int ecosflash_info(struct flash_bank *bank, char *buf, int buf_size)
 {
 	struct ecosflash_flash_bank *info = bank-&gt;driver_priv;
 	snprintf(buf, buf_size, &quot;eCos flash driver: %s&quot;, info-&gt;driverPath);
@@ -414,17 +414,17 @@ static int ecosflash_info(struct flash_bank_s *bank, char *buf, int buf_size)
 }
 
 #if 0
-static uint32_t ecosflash_get_flash_status(flash_bank_t *bank)
+static uint32_t ecosflash_get_flash_status(struct flash_bank *bank)
 {
 	return ERROR_OK;
 }
 
-static void ecosflash_set_flash_mode(flash_bank_t *bank,int mode)
+static void ecosflash_set_flash_mode(struct flash_bank *bank,int mode)
 {
 
 }
 
-static uint32_t ecosflash_wait_status_busy(flash_bank_t *bank, uint32_t waitbits, int timeout)
+static uint32_t ecosflash_wait_status_busy(struct flash_bank *bank, uint32_t waitbits, int timeout)
 {
 	return ERROR_OK;
 }
diff --git a/src/flash/faux.c b/src/flash/faux.c
index 0a52f5f..55e9892 100644
--- a/src/flash/faux.c
+++ b/src/flash/faux.c
@@ -92,38 +92,38 @@ static int faux_register_commands(struct command_context_s *cmd_ctx)
 	return ERROR_OK;
 }
 
-static int faux_erase(struct flash_bank_s *bank, int first, int last)
+static int faux_erase(struct flash_bank *bank, int first, int last)
 {
 	struct faux_flash_bank *info = bank-&gt;driver_priv;
 	memset(info-&gt;memory + first*sectorSize, 0xff, sectorSize*(last-first + 1));
 	return ERROR_OK;
 }
 
-static int faux_protect(struct flash_bank_s *bank, int set, int first, int last)
+static int faux_protect(struct flash_bank *bank, int set, int first, int last)
 {
 	LOG_USER(&quot;set protection sector %d to %d to %s&quot;, first, last, set?&quot;on&quot;:&quot;off&quot;);
 	return ERROR_OK;
 }
 
-static int faux_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
+static int faux_write(struct flash_bank *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
 	struct faux_flash_bank *info = bank-&gt;driver_priv;
 	memcpy(info-&gt;memory + offset, buffer, count);
 	return ERROR_OK;
 }
 
-static int faux_protect_check(struct flash_bank_s *bank)
+static int faux_protect_check(struct flash_bank *bank)
 {
 	return ERROR_OK;
 }
 
-static int faux_info(struct flash_bank_s *bank, char *buf, int buf_size)
+static int faux_info(struct flash_bank *bank, char *buf, int buf_size)
 {
 	snprintf(buf, buf_size, &quot;faux flash driver&quot;);
 	return ERROR_OK;
 }
 
-static int faux_probe(struct flash_bank_s *bank)
+static int faux_probe(struct flash_bank *bank)
 {
 	return ERROR_OK;
 }
diff --git a/src/flash/flash.c b/src/flash/flash.c
index 5374532..96c63d5 100644
--- a/src/flash/flash.c
+++ b/src/flash/flash.c
@@ -76,11 +76,11 @@ struct flash_driver *flash_drivers[] = {
 	NULL,
 };
 
-flash_bank_t *flash_banks;
+struct flash_bank *flash_banks;
 static 	command_t *flash_cmd;
 
 /* wafer thin wrapper for invoking the flash driver */
-static int flash_driver_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
+static int flash_driver_write(struct flash_bank *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
 	int retval;
 
@@ -94,7 +94,7 @@ static int flash_driver_write(struct flash_bank_s *bank, uint8_t *buffer, uint32
 	return retval;
 }
 
-static int flash_driver_erase(struct flash_bank_s *bank, int first, int last)
+static int flash_driver_erase(struct flash_bank *bank, int first, int last)
 {
 	int retval;
 
@@ -107,7 +107,7 @@ static int flash_driver_erase(struct flash_bank_s *bank, int first, int last)
 	return retval;
 }
 
-int flash_driver_protect(struct flash_bank_s *bank, int set, int first, int last)
+int flash_driver_protect(struct flash_bank *bank, int set, int first, int last)
 {
 	int retval;
 
@@ -122,7 +122,7 @@ int flash_driver_protect(struct flash_bank_s *bank, int set, int first, int last
 
 static int jim_flash_banks(Jim_Interp *interp, int argc, Jim_Obj *const *argv)
 {
-	flash_bank_t *p;
+	struct flash_bank *p;
 
 	if (argc != 1) {
 		Jim_WrongNumArgs(interp, 1, argv, &quot;no arguments to flash_banks command&quot;);
@@ -153,9 +153,9 @@ static int jim_flash_banks(Jim_Interp *interp, int argc, Jim_Obj *const *argv)
 	return JIM_OK;
 }
 
-flash_bank_t *get_flash_bank_by_num_noprobe(int num)
+struct flash_bank *get_flash_bank_by_num_noprobe(int num)
 {
-	flash_bank_t *p;
+	struct flash_bank *p;
 	int i = 0;
 
 	for (p = flash_banks; p; p = p-&gt;next)
@@ -171,7 +171,7 @@ flash_bank_t *get_flash_bank_by_num_noprobe(int num)
 
 int flash_get_bank_count(void)
 {
-	flash_bank_t *p;
+	struct flash_bank *p;
 	int i = 0;
 	for (p = flash_banks; p; p = p-&gt;next)
 	{
@@ -180,9 +180,9 @@ int flash_get_bank_count(void)
 	return i;
 }
 
-flash_bank_t *get_flash_bank_by_num(int num)
+struct flash_bank *get_flash_bank_by_num(int num)
 {
-	flash_bank_t *p = get_flash_bank_by_num_noprobe(num);
+	struct flash_bank *p = get_flash_bank_by_num_noprobe(num);
 	int retval;
 
 	if (p == NULL)
@@ -199,7 +199,7 @@ flash_bank_t *get_flash_bank_by_num(int num)
 }
 
 int flash_command_get_bank_by_num(
-	struct command_context_s *cmd_ctx, const char *str, flash_bank_t **bank)
+	struct command_context_s *cmd_ctx, const char *str, struct flash_bank **bank)
 {
 	unsigned bank_num;
 	COMMAND_PARSE_NUMBER(uint, str, bank_num);
@@ -238,7 +238,7 @@ COMMAND_HANDLER(handle_flash_bank_command)
 		if (strcmp(args[0], flash_drivers[i]-&gt;name) != 0)
 			continue;
 
-		flash_bank_t *p, *c;
+		struct flash_bank *p, *c;
 
 		/* register flash specific commands */
 		if (flash_drivers[i]-&gt;register_commands(cmd_ctx) != ERROR_OK)
@@ -247,7 +247,7 @@ COMMAND_HANDLER(handle_flash_bank_command)
 			return ERROR_FAIL;
 		}
 
-		c = malloc(sizeof(flash_bank_t));
+		c = malloc(sizeof(struct flash_bank));
 		c-&gt;target = target;
 		c-&gt;driver = flash_drivers[i];
 		c-&gt;driver_priv = NULL;
@@ -298,7 +298,7 @@ COMMAND_HANDLER(handle_flash_bank_command)
 
 COMMAND_HANDLER(handle_flash_info_command)
 {
-	flash_bank_t *p;
+	struct flash_bank *p;
 	uint32_t i = 0;
 	int j = 0;
 	int retval;
@@ -369,7 +369,7 @@ COMMAND_HANDLER(handle_flash_probe_command)
 
 	unsigned bank_nr;
 	COMMAND_PARSE_NUMBER(uint, args[0], bank_nr);
-	flash_bank_t *p = get_flash_bank_by_num_noprobe(bank_nr);
+	struct flash_bank *p = get_flash_bank_by_num_noprobe(bank_nr);
 	if (p)
 	{
 		if ((retval = p-&gt;driver-&gt;probe(p)) == ERROR_OK)
@@ -402,7 +402,7 @@ COMMAND_HANDLER(handle_flash_erase_check_command)
 		return ERROR_COMMAND_SYNTAX_ERROR;
 	}
 
-	flash_bank_t *p;
+	struct flash_bank *p;
 	int retval = flash_command_get_bank_by_num(cmd_ctx, args[0], &amp;p);
 	if (ERROR_OK != retval)
 		return retval;
@@ -443,7 +443,7 @@ COMMAND_HANDLER(handle_flash_erase_check_command)
 
 COMMAND_HANDLER(handle_flash_erase_address_command)
 {
-	flash_bank_t *p;
+	struct flash_bank *p;
 	int retval;
 	int address;
 	int length;
@@ -490,7 +490,7 @@ COMMAND_HANDLER(handle_flash_protect_check_command)
 	if (argc != 1)
 		return ERROR_COMMAND_SYNTAX_ERROR;
 
-	flash_bank_t *p;
+	struct flash_bank *p;
 	int retval = flash_command_get_bank_by_num(cmd_ctx, args[0], &amp;p);
 	if (ERROR_OK != retval)
 		return retval;
@@ -539,7 +539,7 @@ COMMAND_HANDLER(handle_flash_erase_command)
 	uint32_t last;
 
 	COMMAND_PARSE_NUMBER(u32, args[0], bank_nr);
-	flash_bank_t *p = get_flash_bank_by_num(bank_nr);
+	struct flash_bank *p = get_flash_bank_by_num(bank_nr);
 	if (!p)
 		return ERROR_OK;
 
@@ -580,7 +580,7 @@ COMMAND_HANDLER(handle_flash_protect_command)
 	int set;
 
 	COMMAND_PARSE_NUMBER(u32, args[0], bank_nr);
-	flash_bank_t *p = get_flash_bank_by_num(bank_nr);
+	struct flash_bank *p = get_flash_bank_by_num(bank_nr);
 	if (!p)
 		return ERROR_OK;
 
@@ -772,7 +772,7 @@ COMMAND_HANDLER(handle_flash_fill_command)
 	for (wrote = 0; wrote &lt; (count*wordsize); wrote += cur_size)
 	{
 		cur_size = MIN((count*wordsize - wrote), sizeof(chunk));
-		flash_bank_t *bank;
+		struct flash_bank *bank;
 		bank = get_flash_bank_by_addr(target, address);
 		if (bank == NULL)
 		{
@@ -820,7 +820,7 @@ COMMAND_HANDLER(handle_flash_write_bank_command)
 	struct duration bench;
 	duration_start(&amp;bench);
 
-	flash_bank_t *p;
+	struct flash_bank *p;
 	int retval = flash_command_get_bank_by_num(cmd_ctx, args[0], &amp;p);
 	if (ERROR_OK != retval)
 		return retval;
@@ -860,7 +860,7 @@ COMMAND_HANDLER(handle_flash_write_bank_command)
 
 void flash_set_dirty(void)
 {
-	flash_bank_t *c;
+	struct flash_bank *c;
 	int i;
 
 	/* set all flash to require erasing */
@@ -874,9 +874,9 @@ void flash_set_dirty(void)
 }
 
 /* lookup flash bank by address */
-struct flash_bank_s *get_flash_bank_by_addr(struct target *target, uint32_t addr)
+struct flash_bank *get_flash_bank_by_addr(struct target *target, uint32_t addr)
 {
-	flash_bank_t *c;
+	struct flash_bank *c;
 
 	/* cycle through bank list */
 	for (c = flash_banks; c; c = c-&gt;next)
@@ -899,9 +899,9 @@ struct flash_bank_s *get_flash_bank_by_addr(struct target *target, uint32_t addr
 
 /* erase given flash region, selects proper bank according to target and address */
 static int flash_iterate_address_range(struct target *target, uint32_t addr, uint32_t length,
-		int (*callback)(struct flash_bank_s *bank, int first, int last))
+		int (*callback)(struct flash_bank *bank, int first, int last))
 {
-	flash_bank_t *c;
+	struct flash_bank *c;
 	int first = -1;
 	int last = -1;
 	int i;
@@ -954,7 +954,7 @@ int flash_erase_address_range(struct target *target, uint32_t addr, uint32_t len
 	return flash_iterate_address_range(target, addr, length, &amp;flash_driver_erase);
 }
 
-static int flash_driver_unprotect(struct flash_bank_s *bank, int first, int last)
+static int flash_driver_unprotect(struct flash_bank *bank, int first, int last)
 {
 	return flash_driver_protect(bank, 0, first, last);
 }
@@ -972,7 +972,7 @@ static int flash_write_unlock(struct target *target, struct image *image, uint32
 
 	int section;
 	uint32_t section_offset;
-	flash_bank_t *c;
+	struct flash_bank *c;
 	int *padding;
 
 	section = 0;
@@ -1130,7 +1130,7 @@ int flash_write(struct target *target, struct image *image, uint32_t *written, i
 	return flash_write_unlock(target, image, written, erase, false);
 }
 
-int default_flash_mem_blank_check(struct flash_bank_s *bank)
+int default_flash_mem_blank_check(struct flash_bank *bank)
 {
 	struct target *target = bank-&gt;target;
 	uint8_t buffer[1024];
@@ -1177,7 +1177,7 @@ int default_flash_mem_blank_check(struct flash_bank_s *bank)
 	return ERROR_OK;
 }
 
-int default_flash_blank_check(struct flash_bank_s *bank)
+int default_flash_blank_check(struct flash_bank *bank)
 {
 	struct target *target = bank-&gt;target;
 	int i;
diff --git a/src/flash/flash.h b/src/flash/flash.h
index b5af717..202a5e5 100644
--- a/src/flash/flash.h
+++ b/src/flash/flash.h
@@ -57,10 +57,10 @@ struct flash_sector
 	int is_protected;
 };
 
-struct flash_bank_s;
+struct flash_bank;
 
 #define __FLASH_BANK_COMMAND(name) \
-		COMMAND_HELPER(name, struct flash_bank_s *bank)
+		COMMAND_HELPER(name, struct flash_bank *bank)
 
 /**
  * @brief Provides the implementation-independent structure that defines
@@ -103,7 +103,7 @@ struct flash_driver
 	 * Finish the &quot;flash bank&quot; command for @a bank.  The
 	 * @a bank parameter will have been filled in by the core flash
 	 * layer when this routine is called, and the driver can store
-	 * additional information in its flash_bank_t::driver_priv field.
+	 * additional information in its struct flash_bank::driver_priv field.
 	 *
 	 * The args are: @par
 	 * @code
@@ -136,7 +136,7 @@ struct flash_driver
 	 * @param last The number of the last sector to erase, typically N-1.
 	 * @returns ERROR_OK if successful; otherwise, an error code.
 	 */
-	int (*erase)(struct flash_bank_s *bank, int first, int last);
+	int (*erase)(struct flash_bank *bank, int first, int last);
 
 	/**
 	 * Bank/sector protection routine (target-specific).
@@ -150,7 +150,7 @@ struct flash_driver
 	 * @param last The last sector to (un)project, typically N-1.
 	 * @returns ERROR_OK if successful; otherwise, an error code.
 	 */
-	int (*protect)(struct flash_bank_s *bank, int set, int first, int last);
+	int (*protect)(struct flash_bank *bank, int set, int first, int last);
 
 	/**
 	 * Program data into the flash.  Note CPU address will be
@@ -163,7 +163,7 @@ struct flash_driver
 	 * @param count The number of bytes to write.
 	 * @returns ERROR_OK if successful; otherwise, an error code.
 	 */
-	int (*write)(struct flash_bank_s *bank,
+	int (*write)(struct flash_bank *bank,
 			uint8_t *buffer, uint32_t offset, uint32_t count);
 
 	/**
@@ -173,7 +173,7 @@ struct flash_driver
 	 * @param bank The bank to probe
 	 * @returns ERROR_OK if successful; otherwise, an error code.
 	 */
-	int (*probe)(struct flash_bank_s *bank);
+	int (*probe)(struct flash_bank *bank);
 
 	/**
 	 * Check the erasure status of a flash bank.
@@ -184,7 +184,7 @@ struct flash_driver
 	 * @param bank The bank to check
 	 * @returns ERROR_OK if successful; otherwise, an error code.
 	 */
-	int (*erase_check)(struct flash_bank_s *bank);
+	int (*erase_check)(struct flash_bank *bank);
 
 	/**
 	 * Determine if the specific bank is &quot;protected&quot; or not.
@@ -196,7 +196,7 @@ struct flash_driver
 	 * @param bank - the bank to check
 	 * @returns ERROR_OK if successful; otherwise, an error code.
 	 */
-	int (*protect_check)(struct flash_bank_s *bank);
+	int (*protect_check)(struct flash_bank *bank);
 
 	/**
 	 * Display human-readable information about the flash
@@ -208,7 +208,7 @@ struct flash_driver
 	 * @param buf_size - the size of the human buffer.
 	 * @returns ERROR_OK if successful; otherwise, an error code.
 	 */
-	int (*info)(struct flash_bank_s *bank, char *buf, int buf_size);
+	int (*info)(struct flash_bank *bank, char *buf, int buf_size);
 
 	/**
 	 * A more gentle flavor of filash_driver_s::probe, performing
@@ -223,7 +223,7 @@ struct flash_driver
 	 * @param bank - the bank to probe
 	 * @returns ERROR_OK if successful; otherwise, an error code.
 	 */
-	int (*auto_probe)(struct flash_bank_s *bank);
+	int (*auto_probe)(struct flash_bank *bank);
 };
 
 #define FLASH_BANK_COMMAND_HANDLER(name) static __FLASH_BANK_COMMAND(name)
@@ -238,7 +238,7 @@ struct flash_driver
  * may use the @c driver_priv member to store additional data on a
  * per-bank basis, if required.
  */
-typedef struct flash_bank_s
+struct flash_bank
 {
 	struct target *target; /**&lt; Target to which this bank belongs. */
 
@@ -261,8 +261,8 @@ typedef struct flash_bank_s
 	/// Array of sectors, allocated and initilized by the flash driver
 	struct flash_sector *sectors;
 
-	struct flash_bank_s *next; /**&lt; The next flash bank on this chip */
-} flash_bank_t;
+	struct flash_bank *next; /**&lt; The next flash bank on this chip */
+};
 
 /// Registers the 'flash' subsystem commands
 int flash_register_commands(struct command_context_s *cmd_ctx);
@@ -300,21 +300,21 @@ int flash_get_bank_count(void);
  * this routine will call default_flash_mem_blank_check() to confirm.
  * @returns ERROR_OK if successful; otherwise, an error code.
  */
-int default_flash_blank_check(struct flash_bank_s *bank);
+int default_flash_blank_check(struct flash_bank *bank);
 /**
  * Provides a default blank flash memory check.  Ensures the contents
  * of the given bank have truly been erased.
  * @param bank The flash bank.
  * @returns ERROR_OK if successful; otherwise, an error code.
  */
-int default_flash_mem_blank_check(struct flash_bank_s *bank);
+int default_flash_mem_blank_check(struct flash_bank *bank);
 
 /**
  * Returns a flash bank by the specified flash_bank_s bank_number, @a num.
  * @param num The flash bank number.
- * @returns A flash_bank_t for flash bank @a num, or NULL
+ * @returns A struct flash_bank for flash bank @a num, or NULL
  */
-flash_bank_t *get_flash_bank_by_num(int num);
+struct flash_bank *get_flash_bank_by_num(int num);
 /**
  * Retreives @a bank from a command argument, reporting errors parsing
  * the bank identifier or retreiving the specified bank.
@@ -324,20 +324,20 @@ flash_bank_t *get_flash_bank_by_num(int num);
  * @returns ERROR_OK on success, or an error indicating the problem.
  */
 int flash_command_get_bank_by_num(struct command_context_s *cmd_ctx,
-		const char *str, flash_bank_t **bank);
+		const char *str, struct flash_bank **bank);
 /**
  * Returns the flash bank like get_flash_bank_by_num(), without probing.
  * @param num The flash bank number.
- * @returns A flash_bank_t for flash bank @a num, or NULL.
+ * @returns A struct flash_bank for flash bank @a num, or NULL.
  */
-flash_bank_t *get_flash_bank_by_num_noprobe(int num);
+struct flash_bank *get_flash_bank_by_num_noprobe(int num);
 /**
  * Returns the flash bank located at a specified address.
  * @param target The target, presumed to contain one or more banks.
  * @param addr An address that is within the range of the bank.
- * @returns The flash_bank_t located at @a addr, or NULL.
+ * @returns The struct flash_bank located at @a addr, or NULL.
  */
-struct flash_bank_s *get_flash_bank_by_addr(struct target *target, uint32_t addr);
+struct flash_bank *get_flash_bank_by_addr(struct target *target, uint32_t addr);
 
 #define ERROR_FLASH_BANK_INVALID			(-900)
 #define ERROR_FLASH_SECTOR_INVALID			(-901)
diff --git a/src/flash/lpc2000.c b/src/flash/lpc2000.c
index 2061726..36ebc0e 100644
--- a/src/flash/lpc2000.c
+++ b/src/flash/lpc2000.c
@@ -53,7 +53,7 @@
  * - 176x (tested with LPC1768)
  */
 
-static int lpc2000_build_sector_list(struct flash_bank_s *bank)
+static int lpc2000_build_sector_list(struct flash_bank *bank)
 {
 	struct lpc2000_flash_bank *lpc2000_info = bank-&gt;driver_priv;
 	int i;
@@ -234,7 +234,7 @@ static int lpc2000_build_sector_list(struct flash_bank_s *bank)
  * 0x20 to 0x33: command result table (1+4 words)
  * 0x34 to 0xb3: stack (only 128b needed)
  */
-static int lpc2000_iap_call(flash_bank_t *bank, int code, uint32_t param_table[5], uint32_t result_table[4])
+static int lpc2000_iap_call(struct flash_bank *bank, int code, uint32_t param_table[5], uint32_t result_table[4])
 {
 	int retval;
 	struct lpc2000_flash_bank *lpc2000_info = bank-&gt;driver_priv;
@@ -375,7 +375,7 @@ static int lpc2000_iap_call(flash_bank_t *bank, int code, uint32_t param_table[5
 	return status_code;
 }
 
-static int lpc2000_iap_blank_check(struct flash_bank_s *bank, int first, int last)
+static int lpc2000_iap_blank_check(struct flash_bank *bank, int first, int last)
 {
 	uint32_t param_table[5];
 	uint32_t result_table[4];
@@ -477,7 +477,7 @@ FLASH_BANK_COMMAND_HANDLER(lpc2000_flash_bank_command)
 	return ERROR_OK;
 }
 
-static int lpc2000_erase(struct flash_bank_s *bank, int first, int last)
+static int lpc2000_erase(struct flash_bank *bank, int first, int last)
 {
 	struct lpc2000_flash_bank *lpc2000_info = bank-&gt;driver_priv;
 	uint32_t param_table[5];
@@ -529,13 +529,13 @@ static int lpc2000_erase(struct flash_bank_s *bank, int first, int last)
 	return ERROR_OK;
 }
 
-static int lpc2000_protect(struct flash_bank_s *bank, int set, int first, int last)
+static int lpc2000_protect(struct flash_bank *bank, int set, int first, int last)
 {
 	/* can't protect/unprotect on the lpc2000 */
 	return ERROR_OK;
 }
 
-static int lpc2000_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
+static int lpc2000_write(struct flash_bank *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
 	struct lpc2000_flash_bank *lpc2000_info = bank-&gt;driver_priv;
 	struct target *target = bank-&gt;target;
@@ -703,7 +703,7 @@ static int lpc2000_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t of
 	return retval;
 }
 
-static int lpc2000_probe(struct flash_bank_s *bank)
+static int lpc2000_probe(struct flash_bank *bank)
 {
 	/* we can't probe on an lpc2000
 	 * if this is an lpc2xxx, it has the configured flash
@@ -711,7 +711,7 @@ static int lpc2000_probe(struct flash_bank_s *bank)
 	return ERROR_OK;
 }
 
-static int lpc2000_erase_check(struct flash_bank_s *bank)
+static int lpc2000_erase_check(struct flash_bank *bank)
 {
 	if (bank-&gt;target-&gt;state != TARGET_HALTED)
 	{
@@ -722,13 +722,13 @@ static int lpc2000_erase_check(struct flash_bank_s *bank)
 	return lpc2000_iap_blank_check(bank, 0, bank-&gt;num_sectors - 1);
 }
 
-static int lpc2000_protect_check(struct flash_bank_s *bank)
+static int lpc2000_protect_check(struct flash_bank *bank)
 {
 	/* sectors are always protected	*/
 	return ERROR_OK;
 }
 
-static int lpc2000_info(struct flash_bank_s *bank, char *buf, int buf_size)
+static int lpc2000_info(struct flash_bank *bank, char *buf, int buf_size)
 {
 	struct lpc2000_flash_bank *lpc2000_info = bank-&gt;driver_priv;
 
@@ -748,7 +748,7 @@ COMMAND_HANDLER(lpc2000_handle_part_id_command)
 		return ERROR_COMMAND_SYNTAX_ERROR;
 	}
 
-	flash_bank_t *bank;
+	struct flash_bank *bank;
 	int retval = flash_command_get_bank_by_num(cmd_ctx, args[0], &amp;bank);
 	if (ERROR_OK != retval)
 		return retval;
diff --git a/src/flash/lpc288x.c b/src/flash/lpc288x.c
index dbd0dab..eb95b66 100644
--- a/src/flash/lpc288x.c
+++ b/src/flash/lpc288x.c
@@ -84,12 +84,12 @@
 /* F_CLK_TIME */
 #define FCT_CLK_DIV_MASK    0x0FFF
 
-static uint32_t lpc288x_wait_status_busy(struct flash_bank_s *bank, int timeout);
+static uint32_t lpc288x_wait_status_busy(struct flash_bank *bank, int timeout);
 static void lpc288x_load_timer(int erase, struct target *target);
-static void lpc288x_set_flash_clk(struct flash_bank_s *bank);
-static uint32_t lpc288x_system_ready(struct flash_bank_s *bank);
+static void lpc288x_set_flash_clk(struct flash_bank *bank);
+static uint32_t lpc288x_system_ready(struct flash_bank *bank);
 
-static uint32_t lpc288x_wait_status_busy(flash_bank_t *bank, int timeout)
+static uint32_t lpc288x_wait_status_busy(struct flash_bank *bank, int timeout)
 {
 	uint32_t status;
 	struct target *target = bank-&gt;target;
@@ -109,7 +109,7 @@ static uint32_t lpc288x_wait_status_busy(flash_bank_t *bank, int timeout)
 }
 
 /* Read device id register and fill in driver info structure */
-static int lpc288x_read_part_info(struct flash_bank_s *bank)
+static int lpc288x_read_part_info(struct flash_bank *bank)
 {
 	struct lpc288x_flash_bank *lpc288x_info = bank-&gt;driver_priv;
 	struct target *target = bank-&gt;target;
@@ -159,7 +159,7 @@ static int lpc288x_read_part_info(struct flash_bank_s *bank)
 	return ERROR_OK;
 }
 
-static int lpc288x_protect_check(struct flash_bank_s *bank)
+static int lpc288x_protect_check(struct flash_bank *bank)
 {
 	return ERROR_OK;
 }
@@ -190,7 +190,7 @@ FLASH_BANK_COMMAND_HANDLER(lpc288x_flash_bank_command)
  * AHB = 12 MHz ?
  * 12000000/66000 = 182
  * CLK_DIV = 60 ? */
-static void lpc288x_set_flash_clk(struct flash_bank_s *bank)
+static void lpc288x_set_flash_clk(struct flash_bank *bank)
 {
 	uint32_t clk_time;
 	struct lpc288x_flash_bank *lpc288x_info = bank-&gt;driver_priv;
@@ -217,7 +217,7 @@ static void lpc288x_load_timer(int erase, struct target *target)
 	}
 }
 
-static uint32_t lpc288x_system_ready(struct flash_bank_s *bank)
+static uint32_t lpc288x_system_ready(struct flash_bank *bank)
 {
 	struct lpc288x_flash_bank *lpc288x_info = bank-&gt;driver_priv;
 	if (lpc288x_info-&gt;cidr == 0)
@@ -233,7 +233,7 @@ static uint32_t lpc288x_system_ready(struct flash_bank_s *bank)
 	return ERROR_OK;
 }
 
-static int lpc288x_erase_check(struct flash_bank_s *bank)
+static int lpc288x_erase_check(struct flash_bank *bank)
 {
 	uint32_t status = lpc288x_system_ready(bank);	/* probed? halted? */
 	if (status != ERROR_OK)
@@ -245,7 +245,7 @@ static int lpc288x_erase_check(struct flash_bank_s *bank)
 	return ERROR_OK;
 }
 
-static int lpc288x_erase(struct flash_bank_s *bank, int first, int last)
+static int lpc288x_erase(struct flash_bank *bank, int first, int last)
 {
 	uint32_t status;
 	int sector;
@@ -286,7 +286,7 @@ static int lpc288x_erase(struct flash_bank_s *bank, int first, int last)
 	return ERROR_OK;
 }
 
-static int lpc288x_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
+static int lpc288x_write(struct flash_bank *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
 	uint8_t page_buffer[FLASH_PAGE_SIZE];
 	uint32_t status, source_offset,dest_offset;
@@ -402,7 +402,7 @@ static int lpc288x_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t of
 	return ERROR_OK;
 }
 
-static int lpc288x_probe(struct flash_bank_s *bank)
+static int lpc288x_probe(struct flash_bank *bank)
 {
 	/* we only deal with LPC2888 so flash config is fixed */
 	struct lpc288x_flash_bank *lpc288x_info = bank-&gt;driver_priv;
@@ -425,13 +425,13 @@ static int lpc288x_probe(struct flash_bank_s *bank)
 	return ERROR_OK;
 }
 
-static int lpc288x_info(struct flash_bank_s *bank, char *buf, int buf_size)
+static int lpc288x_info(struct flash_bank *bank, char *buf, int buf_size)
 {
 	snprintf(buf, buf_size, &quot;lpc288x flash driver&quot;);
 	return ERROR_OK;
 }
 
-static int lpc288x_protect(struct flash_bank_s *bank, int set, int first, int last)
+static int lpc288x_protect(struct flash_bank *bank, int set, int first, int last)
 {
 	int lockregion, status;
 	uint32_t value;
diff --git a/src/flash/lpc2900.c b/src/flash/lpc2900.c
index 49d0259..d385a30 100644
--- a/src/flash/lpc2900.c
+++ b/src/flash/lpc2900.c
@@ -171,14 +171,14 @@ struct lpc2900_flash_bank
 };
 
 
-static uint32_t lpc2900_wait_status(flash_bank_t *bank, uint32_t mask, int timeout);
-static void lpc2900_setup(struct flash_bank_s *bank);
-static uint32_t lpc2900_is_ready(struct flash_bank_s *bank);
-static uint32_t lpc2900_read_security_status(struct flash_bank_s *bank);
-static uint32_t lpc2900_run_bist128(struct flash_bank_s *bank,
+static uint32_t lpc2900_wait_status(struct flash_bank *bank, uint32_t mask, int timeout);
+static void lpc2900_setup(struct flash_bank *bank);
+static uint32_t lpc2900_is_ready(struct flash_bank *bank);
+static uint32_t lpc2900_read_security_status(struct flash_bank *bank);
+static uint32_t lpc2900_run_bist128(struct flash_bank *bank,
                                     uint32_t addr_from, uint32_t addr_to,
                                     uint32_t (*signature)[4] );
-static uint32_t lpc2900_address2sector(struct flash_bank_s *bank, uint32_t offset);
+static uint32_t lpc2900_address2sector(struct flash_bank *bank, uint32_t offset);
 static uint32_t lpc2900_calc_tr( uint32_t clock, uint32_t time );
 
 
@@ -194,7 +194,7 @@ static uint32_t lpc2900_calc_tr( uint32_t clock, uint32_t time );
  * @param[in] mask Mask to be used for INT_STATUS
  * @param[in] timeout Timeout in ms
  */
-static uint32_t lpc2900_wait_status( flash_bank_t *bank,
+static uint32_t lpc2900_wait_status( struct flash_bank *bank,
                                      uint32_t mask,
                                      int timeout )
 {
@@ -228,7 +228,7 @@ static uint32_t lpc2900_wait_status( flash_bank_t *bank,
  *
  * @param bank Pointer to the flash bank descriptor
  */
-static void lpc2900_setup( struct flash_bank_s *bank )
+static void lpc2900_setup( struct flash_bank *bank )
 {
 	uint32_t fcra;
 	struct lpc2900_flash_bank *lpc2900_info = bank-&gt;driver_priv;
@@ -251,7 +251,7 @@ static void lpc2900_setup( struct flash_bank_s *bank )
  * Must have been successfully probed.
  * Must be halted.
  */
-static uint32_t lpc2900_is_ready( struct flash_bank_s *bank )
+static uint32_t lpc2900_is_ready( struct flash_bank *bank )
 {
 	struct lpc2900_flash_bank *lpc2900_info = bank-&gt;driver_priv;
 
@@ -275,7 +275,7 @@ static uint32_t lpc2900_is_ready( struct flash_bank_s *bank )
  *
  * @param bank Pointer to the flash bank descriptor
  */
-static uint32_t lpc2900_read_security_status( struct flash_bank_s *bank )
+static uint32_t lpc2900_read_security_status( struct flash_bank *bank )
 {
 	uint32_t status;
 	if( (status = lpc2900_is_ready( bank )) != ERROR_OK )
@@ -356,7 +356,7 @@ static uint32_t lpc2900_read_security_status( struct flash_bank_s *bank )
  * @param addr_to
  * @param signature
  */
-static uint32_t lpc2900_run_bist128(struct flash_bank_s *bank,
+static uint32_t lpc2900_run_bist128(struct flash_bank *bank,
                                     uint32_t addr_from,
                                     uint32_t addr_to,
                                     uint32_t (*signature)[4] )
@@ -393,7 +393,7 @@ static uint32_t lpc2900_run_bist128(struct flash_bank_s *bank,
  * @param bank Pointer to the flash bank descriptor
  * @param offset Offset address relative to bank start
  */
-static uint32_t lpc2900_address2sector( struct flash_bank_s *bank,
+static uint32_t lpc2900_address2sector( struct flash_bank *bank,
                                         uint32_t offset )
 {
 	uint32_t address = bank-&gt;base + offset;
@@ -424,7 +424,7 @@ static uint32_t lpc2900_address2sector( struct flash_bank_s *bank,
  * @param pagenum Page number (0...7)
  * @param page Page array (FLASH_PAGE_SIZE bytes)
  */
-static int lpc2900_write_index_page( struct flash_bank_s *bank,
+static int lpc2900_write_index_page( struct flash_bank *bank,
                                      int pagenum,
                                      uint8_t (*page)[FLASH_PAGE_SIZE] )
 {
@@ -543,7 +543,7 @@ COMMAND_HANDLER(lpc2900_handle_signature_command)
 		return ERROR_FLASH_BANK_INVALID;
 	}
 
-	flash_bank_t *bank;
+	struct flash_bank *bank;
 	int retval = flash_command_get_bank_by_num(cmd_ctx, args[0], &amp;bank);
 	if (ERROR_OK != retval)
 		return retval;
@@ -588,7 +588,7 @@ COMMAND_HANDLER(lpc2900_handle_read_custom_command)
 		return ERROR_COMMAND_SYNTAX_ERROR;
 	}
 
-	flash_bank_t *bank;
+	struct flash_bank *bank;
 	int retval = flash_command_get_bank_by_num(cmd_ctx, args[0], &amp;bank);
 	if (ERROR_OK != retval)
 		return retval;
@@ -659,7 +659,7 @@ COMMAND_HANDLER(lpc2900_handle_password_command)
 		return ERROR_COMMAND_SYNTAX_ERROR;
 	}
 
-	flash_bank_t *bank;
+	struct flash_bank *bank;
 	int retval = flash_command_get_bank_by_num(cmd_ctx, args[0], &amp;bank);
 	if (ERROR_OK != retval)
 		return retval;
@@ -694,7 +694,7 @@ COMMAND_HANDLER(lpc2900_handle_write_custom_command)
 		return ERROR_COMMAND_SYNTAX_ERROR;
 	}
 
-	flash_bank_t *bank;
+	struct flash_bank *bank;
 	int retval = flash_command_get_bank_by_num(cmd_ctx, args[0], &amp;bank);
 	if (ERROR_OK != retval)
 		return retval;
@@ -805,7 +805,7 @@ COMMAND_HANDLER(lpc2900_handle_secure_sector_command)
 	}
 
 	/* Get the bank descriptor */
-	flash_bank_t *bank;
+	struct flash_bank *bank;
 	int retval = flash_command_get_bank_by_num(cmd_ctx, args[0], &amp;bank);
 	if (ERROR_OK != retval)
 		return retval;
@@ -904,7 +904,7 @@ COMMAND_HANDLER(lpc2900_handle_secure_jtag_command)
 	}
 
 	/* Get the bank descriptor */
-	flash_bank_t *bank;
+	struct flash_bank *bank;
 	int retval = flash_command_get_bank_by_num(cmd_ctx, args[0], &amp;bank);
 	if (ERROR_OK != retval)
 		return retval;
@@ -1070,7 +1070,7 @@ FLASH_BANK_COMMAND_HANDLER(lpc2900_flash_bank_command)
  * @param first First sector to be erased
  * @param last Last sector (including) to be erased
  */
-static int lpc2900_erase(struct flash_bank_s *bank, int first, int last)
+static int lpc2900_erase(struct flash_bank *bank, int first, int last)
 {
 	uint32_t status;
 	int sector;
@@ -1177,7 +1177,7 @@ static int lpc2900_erase(struct flash_bank_s *bank, int first, int last)
 
 
 
-static int lpc2900_protect(struct flash_bank_s *bank, int set, int first, int last)
+static int lpc2900_protect(struct flash_bank *bank, int set, int first, int last)
 {
 	/* This command is not supported.
      * &quot;Protection&quot; in LPC2900 terms is handled transparently. Sectors will
@@ -1199,7 +1199,7 @@ static int lpc2900_protect(struct flash_bank_s *bank, int set, int first, int la
  * @param offset Start address (relative to bank start)
  * @param count Number of bytes to be programmed
  */
-static int lpc2900_write(struct flash_bank_s *bank, uint8_t *buffer,
+static int lpc2900_write(struct flash_bank *bank, uint8_t *buffer,
                          uint32_t offset, uint32_t count)
 {
 	uint8_t page[FLASH_PAGE_SIZE];
@@ -1548,7 +1548,7 @@ static int lpc2900_write(struct flash_bank_s *bank, uint8_t *buffer,
  *
  * @param bank Pointer to the flash bank descriptor
  */
-static int lpc2900_probe(struct flash_bank_s *bank)
+static int lpc2900_probe(struct flash_bank *bank)
 {
 	struct lpc2900_flash_bank *lpc2900_info = bank-&gt;driver_priv;
 	struct target *target = bank-&gt;target;
@@ -1751,7 +1751,7 @@ static int lpc2900_probe(struct flash_bank_s *bank)
  *
  * @param bank Pointer to the flash bank descriptor
  */
-static int lpc2900_erase_check(struct flash_bank_s *bank)
+static int lpc2900_erase_check(struct flash_bank *bank)
 {
 	uint32_t status = lpc2900_is_ready(bank);
 	if (status != ERROR_OK)
@@ -1809,7 +1809,7 @@ static int lpc2900_erase_check(struct flash_bank_s *bank)
  *
  * @param bank Pointer to the flash bank descriptor
  */
-static int lpc2900_protect_check(struct flash_bank_s *bank)
+static int lpc2900_protect_check(struct flash_bank *bank)
 {
 	return lpc2900_read_security_status(bank);
 }
@@ -1822,7 +1822,7 @@ static int lpc2900_protect_check(struct flash_bank_s *bank)
  * @param buf Buffer to take the string
  * @param buf_size Maximum number of characters that the buffer can take
  */
-static int lpc2900_info(struct flash_bank_s *bank, char *buf, int buf_size)
+static int lpc2900_info(struct flash_bank *bank, char *buf, int buf_size)
 {
 	snprintf(buf, buf_size, &quot;lpc2900 flash driver&quot;);
 
diff --git a/src/flash/non_cfi.c b/src/flash/non_cfi.c
index 808e642..f98b108 100644
--- a/src/flash/non_cfi.c
+++ b/src/flash/non_cfi.c
@@ -403,7 +403,7 @@ static struct non_cfi non_cfi_flashes[] = {
 	}
 };
 
-void cfi_fixup_non_cfi(flash_bank_t *bank)
+void cfi_fixup_non_cfi(struct flash_bank *bank)
 {
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	struct non_cfi *non_cfi = non_cfi_flashes;
diff --git a/src/flash/non_cfi.h b/src/flash/non_cfi.h
index ef50ae5..44c92db 100644
--- a/src/flash/non_cfi.h
+++ b/src/flash/non_cfi.h
@@ -35,6 +35,6 @@ struct non_cfi
 	uint8_t  status_poll_mask;
 };
 
-void cfi_fixup_non_cfi(flash_bank_t *bank);
+void cfi_fixup_non_cfi(struct flash_bank *bank);
 
 #endif /* NON_CFI_H */
diff --git a/src/flash/ocl.c b/src/flash/ocl.c
index 0a2496d..26d2830 100644
--- a/src/flash/ocl.c
+++ b/src/flash/ocl.c
@@ -33,12 +33,12 @@ struct ocl_priv
 	unsigned int bufalign;
 };
 
-static int ocl_erase_check(struct flash_bank_s *bank)
+static int ocl_erase_check(struct flash_bank *bank)
 {
 	return ERROR_OK;
 }
 
-static int ocl_protect_check(struct flash_bank_s *bank)
+static int ocl_protect_check(struct flash_bank *bank)
 {
 	return ERROR_OK;
 }
@@ -68,7 +68,7 @@ FLASH_BANK_COMMAND_HANDLER(ocl_flash_bank_command)
 	return ERROR_OK;
 }
 
-static int ocl_erase(struct flash_bank_s *bank, int first, int last)
+static int ocl_erase(struct flash_bank *bank, int first, int last)
 {
 	struct ocl_priv *ocl = bank-&gt;driver_priv;
 	int retval;
@@ -123,12 +123,12 @@ static int ocl_erase(struct flash_bank_s *bank, int first, int last)
 	return ERROR_OK;
 }
 
-static int ocl_protect(struct flash_bank_s *bank, int set, int first, int last)
+static int ocl_protect(struct flash_bank *bank, int set, int first, int last)
 {
 	return ERROR_OK;
 }
 
-static int ocl_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
+static int ocl_write(struct flash_bank *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
 	struct ocl_priv *ocl = bank-&gt;driver_priv;
 	int retval;
@@ -235,7 +235,7 @@ static int ocl_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset
 	return ERROR_OK;
 }
 
-static int ocl_probe(struct flash_bank_s *bank)
+static int ocl_probe(struct flash_bank *bank)
 {
 	struct ocl_priv *ocl = bank-&gt;driver_priv;
 	int retval;
@@ -333,12 +333,12 @@ static int ocl_probe(struct flash_bank_s *bank)
 	return ERROR_OK;
 }
 
-static int ocl_info(struct flash_bank_s *bank, char *buf, int buf_size)
+static int ocl_info(struct flash_bank *bank, char *buf, int buf_size)
 {
 	return ERROR_OK;
 }
 
-static int ocl_auto_probe(struct flash_bank_s *bank)
+static int ocl_auto_probe(struct flash_bank *bank)
 {
 	struct ocl_priv *ocl = bank-&gt;driver_priv;
 
diff --git a/src/flash/pic32mx.c b/src/flash/pic32mx.c
index 25f90fd..e19ee95 100644
--- a/src/flash/pic32mx.c
+++ b/src/flash/pic32mx.c
@@ -57,8 +57,8 @@ struct pic32mx_devs_s {
 	{ 0x00, NULL, 0 }
 };
 
-static int pic32mx_write_row(struct flash_bank_s *bank, uint32_t address, uint32_t srcaddr);
-static int pic32mx_write_word(struct flash_bank_s *bank, uint32_t address, uint32_t word);
+static int pic32mx_write_row(struct flash_bank *bank, uint32_t address, uint32_t srcaddr);
+static int pic32mx_write_word(struct flash_bank *bank, uint32_t address, uint32_t word);
 
 /* flash bank pic32mx &lt;base&gt; &lt;size&gt; 0 0 &lt;target#&gt;
  */
@@ -81,7 +81,7 @@ FLASH_BANK_COMMAND_HANDLER(pic32mx_flash_bank_command)
 	return ERROR_OK;
 }
 
-static uint32_t pic32mx_get_flash_status(flash_bank_t *bank)
+static uint32_t pic32mx_get_flash_status(struct flash_bank *bank)
 {
 	struct target *target = bank-&gt;target;
 	uint32_t status;
@@ -91,7 +91,7 @@ static uint32_t pic32mx_get_flash_status(flash_bank_t *bank)
 	return status;
 }
 
-static uint32_t pic32mx_wait_status_busy(flash_bank_t *bank, int timeout)
+static uint32_t pic32mx_wait_status_busy(struct flash_bank *bank, int timeout)
 {
 	uint32_t status;
 
@@ -107,7 +107,7 @@ static uint32_t pic32mx_wait_status_busy(flash_bank_t *bank, int timeout)
 	return status;
 }
 
-static int pic32mx_nvm_exec(struct flash_bank_s *bank, uint32_t op, uint32_t timeout)
+static int pic32mx_nvm_exec(struct flash_bank *bank, uint32_t op, uint32_t timeout)
 {
 	struct target *target = bank-&gt;target;
 	uint32_t status;
@@ -129,7 +129,7 @@ static int pic32mx_nvm_exec(struct flash_bank_s *bank, uint32_t op, uint32_t tim
 	return status;
 }
 
-static int pic32mx_protect_check(struct flash_bank_s *bank)
+static int pic32mx_protect_check(struct flash_bank *bank)
 {
 	struct target *target = bank-&gt;target;
 
@@ -163,7 +163,7 @@ static int pic32mx_protect_check(struct flash_bank_s *bank)
 	return ERROR_OK;
 }
 
-static int pic32mx_erase(struct flash_bank_s *bank, int first, int last)
+static int pic32mx_erase(struct flash_bank *bank, int first, int last)
 {
 	struct target *target = bank-&gt;target;
 	int i;
@@ -205,7 +205,7 @@ static int pic32mx_erase(struct flash_bank_s *bank, int first, int last)
 	return ERROR_OK;
 }
 
-static int pic32mx_protect(struct flash_bank_s *bank, int set, int first, int last)
+static int pic32mx_protect(struct flash_bank *bank, int set, int first, int last)
 {
 	struct pic32mx_flash_bank *pic32mx_info = NULL;
 	struct target *target = bank-&gt;target;
@@ -298,7 +298,7 @@ static int pic32mx_protect(struct flash_bank_s *bank, int set, int first, int la
 #endif
 }
 
-static int pic32mx_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
+static int pic32mx_write_block(struct flash_bank *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
 	struct target *target = bank-&gt;target;
 	uint32_t buffer_size = 512;
@@ -427,7 +427,7 @@ static int pic32mx_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint3
 	return retval;
 }
 
-static int pic32mx_write_word(struct flash_bank_s *bank, uint32_t address, uint32_t word)
+static int pic32mx_write_word(struct flash_bank *bank, uint32_t address, uint32_t word)
 {
 	struct target *target = bank-&gt;target;
 
@@ -443,7 +443,7 @@ static int pic32mx_write_word(struct flash_bank_s *bank, uint32_t address, uint3
 /*
  * Write a 128 word (512 byte) row to flash address from RAM srcaddr.
  */
-static int pic32mx_write_row(struct flash_bank_s *bank, uint32_t address, uint32_t srcaddr)
+static int pic32mx_write_row(struct flash_bank *bank, uint32_t address, uint32_t srcaddr)
 {
 	struct target *target = bank-&gt;target;
 
@@ -461,7 +461,7 @@ static int pic32mx_write_row(struct flash_bank_s *bank, uint32_t address, uint32
 	return pic32mx_nvm_exec(bank, NVMCON_OP_ROW_PROG, 100);
 }
 
-static int pic32mx_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
+static int pic32mx_write(struct flash_bank *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
 	uint32_t words_remaining = (count / 4);
 	uint32_t bytes_remaining = (count &amp; 0x00000003);
@@ -539,7 +539,7 @@ static int pic32mx_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t of
 	return ERROR_OK;
 }
 
-static int pic32mx_probe(struct flash_bank_s *bank)
+static int pic32mx_probe(struct flash_bank *bank)
 {
 	struct target *target = bank-&gt;target;
 	struct pic32mx_flash_bank *pic32mx_info = bank-&gt;driver_priv;
@@ -622,7 +622,7 @@ static int pic32mx_probe(struct flash_bank_s *bank)
 	return ERROR_OK;
 }
 
-static int pic32mx_auto_probe(struct flash_bank_s *bank)
+static int pic32mx_auto_probe(struct flash_bank *bank)
 {
 	struct pic32mx_flash_bank *pic32mx_info = bank-&gt;driver_priv;
 	if (pic32mx_info-&gt;probed)
@@ -637,7 +637,7 @@ COMMAND_HANDLER(pic32mx_handle_part_id_command)
 }
 #endif
 
-static int pic32mx_info(struct flash_bank_s *bank, char *buf, int buf_size)
+static int pic32mx_info(struct flash_bank *bank, char *buf, int buf_size)
 {
 	struct target *target = bank-&gt;target;
 	struct mips32_common *mips32 = target-&gt;arch_info;
@@ -683,7 +683,7 @@ COMMAND_HANDLER(pic32mx_handle_lock_command)
 		return ERROR_OK;
 	}
 
-	flash_bank_t *bank;
+	struct flash_bank *bank;
 	int retval = flash_command_get_bank_by_num(cmd_ctx, args[0], &amp;bank);
 	if (ERROR_OK != retval)
 		return retval;
@@ -729,7 +729,7 @@ COMMAND_HANDLER(pic32mx_handle_unlock_command)
 		return ERROR_OK;
 	}
 
-	flash_bank_t *bank;
+	struct flash_bank *bank;
 	int retval = flash_command_get_bank_by_num(cmd_ctx, args[0], &amp;bank);
 	if (ERROR_OK != retval)
 		return retval;
@@ -763,7 +763,7 @@ COMMAND_HANDLER(pic32mx_handle_unlock_command)
 #endif
 
 #if 0
-static int pic32mx_chip_erase(struct flash_bank_s *bank)
+static int pic32mx_chip_erase(struct flash_bank *bank)
 {
 	struct target *target = bank-&gt;target;
 #if 0
@@ -819,7 +819,7 @@ COMMAND_HANDLER(pic32mx_handle_chip_erase_command)
 		return ERROR_OK;
 	}
 
-	flash_bank_t *bank;
+	struct flash_bank *bank;
 	int retval = flash_command_get_bank_by_num(cmd_ctx, args[0], &amp;bank);
 	if (ERROR_OK != retval)
 		return retval;
@@ -857,7 +857,7 @@ COMMAND_HANDLER(pic32mx_handle_pgm_word_command)
 	COMMAND_PARSE_NUMBER(u32, args[0], address);
 	COMMAND_PARSE_NUMBER(u32, args[1], value);
 
-	flash_bank_t *bank;
+	struct flash_bank *bank;
 	int retval = flash_command_get_bank_by_num(cmd_ctx, args[2], &amp;bank);
 	if (ERROR_OK != retval)
 		return retval;
diff --git a/src/flash/stellaris.c b/src/flash/stellaris.c
index 748b231..efda859 100644
--- a/src/flash/stellaris.c
+++ b/src/flash/stellaris.c
@@ -35,12 +35,12 @@
 
 #define DID0_VER(did0) ((did0 &gt;&gt; 28)&amp;0x07)
 
-static int stellaris_read_part_info(struct flash_bank_s *bank);
-static uint32_t stellaris_get_flash_status(flash_bank_t *bank);
-static void stellaris_set_flash_mode(flash_bank_t *bank,int mode);
-//static uint32_t stellaris_wait_status_busy(flash_bank_t *bank, uint32_t waitbits, int timeout);
+static int stellaris_read_part_info(struct flash_bank *bank);
+static uint32_t stellaris_get_flash_status(struct flash_bank *bank);
+static void stellaris_set_flash_mode(struct flash_bank *bank,int mode);
+//static uint32_t stellaris_wait_status_busy(struct flash_bank *bank, uint32_t waitbits, int timeout);
 
-static int stellaris_mass_erase(struct flash_bank_s *bank);
+static int stellaris_mass_erase(struct flash_bank *bank);
 
 static struct {
 	uint32_t partno;
@@ -239,7 +239,7 @@ FLASH_BANK_COMMAND_HANDLER(stellaris_flash_bank_command)
 	return ERROR_OK;
 }
 
-static int stellaris_info(struct flash_bank_s *bank, char *buf, int buf_size)
+static int stellaris_info(struct flash_bank *bank, char *buf, int buf_size)
 {
 	int printed, device_class;
 	struct stellaris_flash_bank *stellaris_info = bank-&gt;driver_priv;
@@ -316,7 +316,7 @@ static int stellaris_info(struct flash_bank_s *bank, char *buf, int buf_size)
 *	chip identification and status                                         *
 ***************************************************************************/
 
-static uint32_t stellaris_get_flash_status(flash_bank_t *bank)
+static uint32_t stellaris_get_flash_status(struct flash_bank *bank)
 {
 	struct target *target = bank-&gt;target;
 	uint32_t fmc;
@@ -361,7 +361,7 @@ static const unsigned rcc_xtal[32] = {
 	[0x16] = 16384000,
 };
 
-static void stellaris_read_clock_info(flash_bank_t *bank)
+static void stellaris_read_clock_info(struct flash_bank *bank)
 {
 	struct stellaris_flash_bank *stellaris_info = bank-&gt;driver_priv;
 	struct target *target = bank-&gt;target;
@@ -448,7 +448,7 @@ static void stellaris_read_clock_info(flash_bank_t *bank)
 }
 
 /* Setup the timimg registers */
-static void stellaris_set_flash_mode(flash_bank_t *bank,int mode)
+static void stellaris_set_flash_mode(struct flash_bank *bank,int mode)
 {
 	struct stellaris_flash_bank *stellaris_info = bank-&gt;driver_priv;
 	struct target *target = bank-&gt;target;
@@ -459,7 +459,7 @@ static void stellaris_set_flash_mode(flash_bank_t *bank,int mode)
 }
 
 #if 0
-static uint32_t stellaris_wait_status_busy(flash_bank_t *bank, uint32_t waitbits, int timeout)
+static uint32_t stellaris_wait_status_busy(struct flash_bank *bank, uint32_t waitbits, int timeout)
 {
 	uint32_t status;
 
@@ -476,7 +476,7 @@ static uint32_t stellaris_wait_status_busy(flash_bank_t *bank, uint32_t waitbits
 }
 
 /* Send one command to the flash controller */
-static int stellaris_flash_command(struct flash_bank_s *bank,uint8_t cmd,uint16_t pagen)
+static int stellaris_flash_command(struct flash_bank *bank,uint8_t cmd,uint16_t pagen)
 {
 	uint32_t fmc;
 	struct target *target = bank-&gt;target;
@@ -495,7 +495,7 @@ static int stellaris_flash_command(struct flash_bank_s *bank,uint8_t cmd,uint16_
 #endif
 
 /* Read device id register, main clock frequency register and fill in driver info structure */
-static int stellaris_read_part_info(struct flash_bank_s *bank)
+static int stellaris_read_part_info(struct flash_bank *bank)
 {
 	struct stellaris_flash_bank *stellaris_info = bank-&gt;driver_priv;
 	struct target *target = bank-&gt;target;
@@ -613,7 +613,7 @@ static int stellaris_read_part_info(struct flash_bank_s *bank)
 *	flash operations                                                       *
 ***************************************************************************/
 
-static int stellaris_protect_check(struct flash_bank_s *bank)
+static int stellaris_protect_check(struct flash_bank *bank)
 {
 	uint32_t status;
 
@@ -642,7 +642,7 @@ static int stellaris_protect_check(struct flash_bank_s *bank)
 	return ERROR_OK;
 }
 
-static int stellaris_erase(struct flash_bank_s *bank, int first, int last)
+static int stellaris_erase(struct flash_bank *bank, int first, int last)
 {
 	int banknr;
 	uint32_t flash_fmc, flash_cris;
@@ -712,7 +712,7 @@ static int stellaris_erase(struct flash_bank_s *bank, int first, int last)
 	return ERROR_OK;
 }
 
-static int stellaris_protect(struct flash_bank_s *bank, int set, int first, int last)
+static int stellaris_protect(struct flash_bank *bank, int set, int first, int last)
 {
 	uint32_t fmppe, flash_fmc, flash_cris;
 	int lockregion;
@@ -828,7 +828,7 @@ static uint8_t stellaris_write_code[] =
 	0x01,0x00,0x42,0xA4 	/* .word	0xA4420001 */
 };
 
-static int stellaris_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t wcount)
+static int stellaris_write_block(struct flash_bank *bank, uint8_t *buffer, uint32_t offset, uint32_t wcount)
 {
 	struct target *target = bank-&gt;target;
 	uint32_t buffer_size = 8192;
@@ -908,7 +908,7 @@ static int stellaris_write_block(struct flash_bank_s *bank, uint8_t *buffer, uin
 	return retval;
 }
 
-static int stellaris_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
+static int stellaris_write(struct flash_bank *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
 	struct stellaris_flash_bank *stellaris_info = bank-&gt;driver_priv;
 	struct target *target = bank-&gt;target;
@@ -1043,7 +1043,7 @@ static int stellaris_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t
 	return ERROR_OK;
 }
 
-static int stellaris_probe(struct flash_bank_s *bank)
+static int stellaris_probe(struct flash_bank *bank)
 {
 	/* we can't probe on an stellaris
 	 * if this is an stellaris, it has the configured flash
@@ -1059,7 +1059,7 @@ static int stellaris_probe(struct flash_bank_s *bank)
 	return stellaris_read_part_info(bank);
 }
 
-static int stellaris_auto_probe(struct flash_bank_s *bank)
+static int stellaris_auto_probe(struct flash_bank *bank)
 {
 	struct stellaris_flash_bank *stellaris_info = bank-&gt;driver_priv;
 	if (stellaris_info-&gt;did1)
@@ -1067,7 +1067,7 @@ static int stellaris_auto_probe(struct flash_bank_s *bank)
 	return stellaris_probe(bank);
 }
 
-static int stellaris_mass_erase(struct flash_bank_s *bank)
+static int stellaris_mass_erase(struct flash_bank *bank)
 {
 	struct target *target = NULL;
 	struct stellaris_flash_bank *stellaris_info = NULL;
@@ -1137,7 +1137,7 @@ COMMAND_HANDLER(stellaris_handle_mass_erase_command)
 		return ERROR_OK;
 	}
 
-	flash_bank_t *bank;
+	struct flash_bank *bank;
 	int retval = flash_command_get_bank_by_num(cmd_ctx, args[0], &amp;bank);
 	if (ERROR_OK != retval)
 		return retval;
diff --git a/src/flash/stm32x.c b/src/flash/stm32x.c
index a9b4fb3..cf842fc 100644
--- a/src/flash/stm32x.c
+++ b/src/flash/stm32x.c
@@ -29,7 +29,7 @@
 #include &quot;binarybuffer.h&quot;
 
 
-static int stm32x_mass_erase(struct flash_bank_s *bank);
+static int stm32x_mass_erase(struct flash_bank *bank);
 
 /* flash bank stm32x &lt;base&gt; &lt;size&gt; 0 0 &lt;target#&gt;
  */
@@ -52,7 +52,7 @@ FLASH_BANK_COMMAND_HANDLER(stm32x_flash_bank_command)
 	return ERROR_OK;
 }
 
-static uint32_t stm32x_get_flash_status(flash_bank_t *bank)
+static uint32_t stm32x_get_flash_status(struct flash_bank *bank)
 {
 	struct target *target = bank-&gt;target;
 	uint32_t status;
@@ -62,7 +62,7 @@ static uint32_t stm32x_get_flash_status(flash_bank_t *bank)
 	return status;
 }
 
-static uint32_t stm32x_wait_status_busy(flash_bank_t *bank, int timeout)
+static uint32_t stm32x_wait_status_busy(struct flash_bank *bank, int timeout)
 {
 	struct target *target = bank-&gt;target;
 	uint32_t status;
@@ -81,7 +81,7 @@ static uint32_t stm32x_wait_status_busy(flash_bank_t *bank, int timeout)
 	return status;
 }
 
-static int stm32x_read_options(struct flash_bank_s *bank)
+static int stm32x_read_options(struct flash_bank *bank)
 {
 	uint32_t optiondata;
 	struct stm32x_flash_bank *stm32x_info = NULL;
@@ -109,7 +109,7 @@ static int stm32x_read_options(struct flash_bank_s *bank)
 	return ERROR_OK;
 }
 
-static int stm32x_erase_options(struct flash_bank_s *bank)
+static int stm32x_erase_options(struct flash_bank *bank)
 {
 	struct stm32x_flash_bank *stm32x_info = NULL;
 	struct target *target = bank-&gt;target;
@@ -146,7 +146,7 @@ static int stm32x_erase_options(struct flash_bank_s *bank)
 	return ERROR_OK;
 }
 
-static int stm32x_write_options(struct flash_bank_s *bank)
+static int stm32x_write_options(struct flash_bank *bank)
 {
 	struct stm32x_flash_bank *stm32x_info = NULL;
 	struct target *target = bank-&gt;target;
@@ -230,7 +230,7 @@ static int stm32x_write_options(struct flash_bank_s *bank)
 	return ERROR_OK;
 }
 
-static int stm32x_protect_check(struct flash_bank_s *bank)
+static int stm32x_protect_check(struct flash_bank *bank)
 {
 	struct target *target = bank-&gt;target;
 	struct stm32x_flash_bank *stm32x_info = bank-&gt;driver_priv;
@@ -302,7 +302,7 @@ static int stm32x_protect_check(struct flash_bank_s *bank)
 	return ERROR_OK;
 }
 
-static int stm32x_erase(struct flash_bank_s *bank, int first, int last)
+static int stm32x_erase(struct flash_bank *bank, int first, int last)
 {
 	struct target *target = bank-&gt;target;
 	int i;
@@ -343,7 +343,7 @@ static int stm32x_erase(struct flash_bank_s *bank, int first, int last)
 	return ERROR_OK;
 }
 
-static int stm32x_protect(struct flash_bank_s *bank, int set, int first, int last)
+static int stm32x_protect(struct flash_bank *bank, int set, int first, int last)
 {
 	struct stm32x_flash_bank *stm32x_info = NULL;
 	struct target *target = bank-&gt;target;
@@ -430,7 +430,7 @@ static int stm32x_protect(struct flash_bank_s *bank, int set, int first, int las
 	return stm32x_write_options(bank);
 }
 
-static int stm32x_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
+static int stm32x_write_block(struct flash_bank *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
 	struct stm32x_flash_bank *stm32x_info = bank-&gt;driver_priv;
 	struct target *target = bank-&gt;target;
@@ -549,7 +549,7 @@ static int stm32x_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint32
 	return retval;
 }
 
-static int stm32x_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
+static int stm32x_write(struct flash_bank *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
 	struct target *target = bank-&gt;target;
 	uint32_t words_remaining = (count / 2);
@@ -654,7 +654,7 @@ static int stm32x_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t off
 	return ERROR_OK;
 }
 
-static int stm32x_probe(struct flash_bank_s *bank)
+static int stm32x_probe(struct flash_bank *bank)
 {
 	struct target *target = bank-&gt;target;
 	struct stm32x_flash_bank *stm32x_info = bank-&gt;driver_priv;
@@ -771,7 +771,7 @@ static int stm32x_probe(struct flash_bank_s *bank)
 	return ERROR_OK;
 }
 
-static int stm32x_auto_probe(struct flash_bank_s *bank)
+static int stm32x_auto_probe(struct flash_bank *bank)
 {
 	struct stm32x_flash_bank *stm32x_info = bank-&gt;driver_priv;
 	if (stm32x_info-&gt;probed)
@@ -786,7 +786,7 @@ COMMAND_HANDLER(stm32x_handle_part_id_command)
 }
 #endif
 
-static int stm32x_info(struct flash_bank_s *bank, char *buf, int buf_size)
+static int stm32x_info(struct flash_bank *bank, char *buf, int buf_size)
 {
 	struct target *target = bank-&gt;target;
 	uint32_t device_id;
@@ -903,7 +903,7 @@ COMMAND_HANDLER(stm32x_handle_lock_command)
 		return ERROR_OK;
 	}
 
-	flash_bank_t *bank;
+	struct flash_bank *bank;
 	int retval = flash_command_get_bank_by_num(cmd_ctx, args[0], &amp;bank);
 	if (ERROR_OK != retval)
 		return retval;
@@ -949,7 +949,7 @@ COMMAND_HANDLER(stm32x_handle_unlock_command)
 		return ERROR_OK;
 	}
 
-	flash_bank_t *bank;
+	struct flash_bank *bank;
 	int retval = flash_command_get_bank_by_num(cmd_ctx, args[0], &amp;bank);
 	if (ERROR_OK != retval)
 		return retval;
@@ -993,7 +993,7 @@ COMMAND_HANDLER(stm32x_handle_options_read_command)
 		return ERROR_OK;
 	}
 
-	flash_bank_t *bank;
+	struct flash_bank *bank;
 	int retval = flash_command_get_bank_by_num(cmd_ctx, args[0], &amp;bank);
 	if (ERROR_OK != retval)
 		return retval;
@@ -1049,7 +1049,7 @@ COMMAND_HANDLER(stm32x_handle_options_write_command)
 		return ERROR_OK;
 	}
 
-	flash_bank_t *bank;
+	struct flash_bank *bank;
 	int retval = flash_command_get_bank_by_num(cmd_ctx, args[0], &amp;bank);
 	if (ERROR_OK != retval)
 		return retval;
@@ -1110,7 +1110,7 @@ COMMAND_HANDLER(stm32x_handle_options_write_command)
 	return ERROR_OK;
 }
 
-static int stm32x_mass_erase(struct flash_bank_s *bank)
+static int stm32x_mass_erase(struct flash_bank *bank)
 {
 	struct target *target = bank-&gt;target;
 	uint32_t status;
@@ -1158,7 +1158,7 @@ COMMAND_HANDLER(stm32x_handle_mass_erase_command)
 		return ERROR_OK;
 	}
 
-	flash_bank_t *bank;
+	struct flash_bank *bank;
 	int retval = flash_command_get_bank_by_num(cmd_ctx, args[0], &amp;bank);
 	if (ERROR_OK != retval)
 		return retval;
diff --git a/src/flash/str7x.c b/src/flash/str7x.c
index d22886f..fa23550 100644
--- a/src/flash/str7x.c
+++ b/src/flash/str7x.c
@@ -45,13 +45,13 @@ struct str7x_mem_layout mem_layout_str7bank1[] = {
 	{0x00002000, 0x02000, 0x20000}
 };
 
-static int str7x_get_flash_adr(struct flash_bank_s *bank, uint32_t reg)
+static int str7x_get_flash_adr(struct flash_bank *bank, uint32_t reg)
 {
 	struct str7x_flash_bank *str7x_info = bank-&gt;driver_priv;
 	return (str7x_info-&gt;register_base | reg);
 }
 
-static int str7x_build_block_list(struct flash_bank_s *bank)
+static int str7x_build_block_list(struct flash_bank *bank)
 {
 	struct str7x_flash_bank *str7x_info = bank-&gt;driver_priv;
 
@@ -154,7 +154,7 @@ FLASH_BANK_COMMAND_HANDLER(str7x_flash_bank_command)
 	return ERROR_OK;
 }
 
-static uint32_t str7x_status(struct flash_bank_s *bank)
+static uint32_t str7x_status(struct flash_bank *bank)
 {
 	struct target *target = bank-&gt;target;
 	uint32_t retval;
@@ -164,7 +164,7 @@ static uint32_t str7x_status(struct flash_bank_s *bank)
 	return retval;
 }
 
-static uint32_t str7x_result(struct flash_bank_s *bank)
+static uint32_t str7x_result(struct flash_bank *bank)
 {
 	struct target *target = bank-&gt;target;
 	uint32_t retval;
@@ -174,7 +174,7 @@ static uint32_t str7x_result(struct flash_bank_s *bank)
 	return retval;
 }
 
-static int str7x_protect_check(struct flash_bank_s *bank)
+static int str7x_protect_check(struct flash_bank *bank)
 {
 	struct str7x_flash_bank *str7x_info = bank-&gt;driver_priv;
 	struct target *target = bank-&gt;target;
@@ -201,7 +201,7 @@ static int str7x_protect_check(struct flash_bank_s *bank)
 	return ERROR_OK;
 }
 
-static int str7x_erase(struct flash_bank_s *bank, int first, int last)
+static int str7x_erase(struct flash_bank *bank, int first, int last)
 {
 	struct str7x_flash_bank *str7x_info = bank-&gt;driver_priv;
 	struct target *target = bank-&gt;target;
@@ -254,7 +254,7 @@ static int str7x_erase(struct flash_bank_s *bank, int first, int last)
 	return ERROR_OK;
 }
 
-static int str7x_protect(struct flash_bank_s *bank, int set, int first, int last)
+static int str7x_protect(struct flash_bank *bank, int set, int first, int last)
 {
 	struct str7x_flash_bank *str7x_info = bank-&gt;driver_priv;
 	struct target *target = bank-&gt;target;
@@ -308,7 +308,7 @@ static int str7x_protect(struct flash_bank_s *bank, int set, int first, int last
 	return ERROR_OK;
 }
 
-static int str7x_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
+static int str7x_write_block(struct flash_bank *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
 	struct str7x_flash_bank *str7x_info = bank-&gt;driver_priv;
 	struct target *target = bank-&gt;target;
@@ -423,7 +423,7 @@ static int str7x_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint32_
 	return retval;
 }
 
-static int str7x_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
+static int str7x_write(struct flash_bank *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
 	struct target *target = bank-&gt;target;
 	struct str7x_flash_bank *str7x_info = bank-&gt;driver_priv;
@@ -583,7 +583,7 @@ static int str7x_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offs
 	return ERROR_OK;
 }
 
-static int str7x_probe(struct flash_bank_s *bank)
+static int str7x_probe(struct flash_bank *bank)
 {
 	return ERROR_OK;
 }
@@ -595,7 +595,7 @@ COMMAND_HANDLER(str7x_handle_part_id_command)
 }
 #endif
 
-static int str7x_info(struct flash_bank_s *bank, char *buf, int buf_size)
+static int str7x_info(struct flash_bank *bank, char *buf, int buf_size)
 {
 	snprintf(buf, buf_size, &quot;str7x flash driver info&quot;);
 	return ERROR_OK;
@@ -616,7 +616,7 @@ COMMAND_HANDLER(str7x_handle_disable_jtag_command)
 		return ERROR_OK;
 	}
 
-	flash_bank_t *bank;
+	struct flash_bank *bank;
 	int retval = flash_command_get_bank_by_num(cmd_ctx, args[0], &amp;bank);
 	if (ERROR_OK != retval)
 		return retval;
diff --git a/src/flash/str9x.c b/src/flash/str9x.c
index f7bc3c6..b3e8dff 100644
--- a/src/flash/str9x.c
+++ b/src/flash/str9x.c
@@ -33,7 +33,7 @@
 
 static uint32_t bank1start = 0x00080000;
 
-static int str9x_build_block_list(struct flash_bank_s *bank)
+static int str9x_build_block_list(struct flash_bank *bank)
 {
 	struct str9x_flash_bank *str9x_info = bank-&gt;driver_priv;
 
@@ -136,7 +136,7 @@ FLASH_BANK_COMMAND_HANDLER(str9x_flash_bank_command)
 	return ERROR_OK;
 }
 
-static int str9x_protect_check(struct flash_bank_s *bank)
+static int str9x_protect_check(struct flash_bank *bank)
 {
 	int retval;
 	struct str9x_flash_bank *str9x_info = bank-&gt;driver_priv;
@@ -214,7 +214,7 @@ static int str9x_protect_check(struct flash_bank_s *bank)
 	return ERROR_OK;
 }
 
-static int str9x_erase(struct flash_bank_s *bank, int first, int last)
+static int str9x_erase(struct flash_bank *bank, int first, int last)
 {
 	struct target *target = bank-&gt;target;
 	int i;
@@ -306,7 +306,7 @@ static int str9x_erase(struct flash_bank_s *bank, int first, int last)
 	return ERROR_OK;
 }
 
-static int str9x_protect(struct flash_bank_s *bank,
+static int str9x_protect(struct flash_bank *bank,
 		int set, int first, int last)
 {
 	struct target *target = bank-&gt;target;
@@ -345,7 +345,7 @@ static int str9x_protect(struct flash_bank_s *bank,
 	return ERROR_OK;
 }
 
-static int str9x_write_block(struct flash_bank_s *bank,
+static int str9x_write_block(struct flash_bank *bank,
 		uint8_t *buffer, uint32_t offset, uint32_t count)
 {
 	struct str9x_flash_bank *str9x_info = bank-&gt;driver_priv;
@@ -454,7 +454,7 @@ static int str9x_write_block(struct flash_bank_s *bank,
 	return retval;
 }
 
-static int str9x_write(struct flash_bank_s *bank,
+static int str9x_write(struct flash_bank *bank,
 		uint8_t *buffer, uint32_t offset, uint32_t count)
 {
 	struct target *target = bank-&gt;target;
@@ -612,7 +612,7 @@ static int str9x_write(struct flash_bank_s *bank,
 	return ERROR_OK;
 }
 
-static int str9x_probe(struct flash_bank_s *bank)
+static int str9x_probe(struct flash_bank *bank)
 {
 	return ERROR_OK;
 }
@@ -624,7 +624,7 @@ COMMAND_HANDLER(str9x_handle_part_id_command)
 }
 #endif
 
-static int str9x_info(struct flash_bank_s *bank, char *buf, int buf_size)
+static int str9x_info(struct flash_bank *bank, char *buf, int buf_size)
 {
 	snprintf(buf, buf_size, &quot;str9x flash driver info&quot;);
 	return ERROR_OK;
@@ -640,7 +640,7 @@ COMMAND_HANDLER(str9x_handle_flash_config_command)
 		return ERROR_COMMAND_SYNTAX_ERROR;
 	}
 
-	flash_bank_t *bank;
+	struct flash_bank *bank;
 	int retval = flash_command_get_bank_by_num(cmd_ctx, args[0], &amp;bank);
 	if (ERROR_OK != retval)
 		return retval;
diff --git a/src/flash/str9xpec.c b/src/flash/str9xpec.c
index ec5d031..6c42ce3 100644
--- a/src/flash/str9xpec.c
+++ b/src/flash/str9xpec.c
@@ -28,9 +28,9 @@
 #include &quot;arm7_9_common.h&quot;
 
 
-static int str9xpec_erase_area(struct flash_bank_s *bank, int first, int last);
-static int str9xpec_set_address(struct flash_bank_s *bank, uint8_t sector);
-static int str9xpec_write_options(struct flash_bank_s *bank);
+static int str9xpec_erase_area(struct flash_bank *bank, int first, int last);
+static int str9xpec_set_address(struct flash_bank *bank, uint8_t sector);
+static int str9xpec_write_options(struct flash_bank *bank);
 
 int str9xpec_set_instr(struct jtag_tap *tap, uint32_t new_instr, tap_state_t end_state)
 {
@@ -81,7 +81,7 @@ static uint8_t str9xpec_isc_status(struct jtag_tap *tap)
 	return status;
 }
 
-static int str9xpec_isc_enable(struct flash_bank_s *bank)
+static int str9xpec_isc_enable(struct flash_bank *bank)
 {
 	uint8_t status;
 	struct jtag_tap *tap;
@@ -108,7 +108,7 @@ static int str9xpec_isc_enable(struct flash_bank_s *bank)
 	return ERROR_OK;
 }
 
-static int str9xpec_isc_disable(struct flash_bank_s *bank)
+static int str9xpec_isc_disable(struct flash_bank *bank)
 {
 	uint8_t status;
 	struct jtag_tap *tap;
@@ -137,7 +137,7 @@ static int str9xpec_isc_disable(struct flash_bank_s *bank)
 	return ERROR_OK;
 }
 
-static int str9xpec_read_config(struct flash_bank_s *bank)
+static int str9xpec_read_config(struct flash_bank *bank)
 {
 	struct scan_field field;
 	uint8_t status;
@@ -166,7 +166,7 @@ static int str9xpec_read_config(struct flash_bank_s *bank)
 	return status;
 }
 
-static int str9xpec_build_block_list(struct flash_bank_s *bank)
+static int str9xpec_build_block_list(struct flash_bank *bank)
 {
 	struct str9xpec_flash_controller *str9xpec_info = bank-&gt;driver_priv;
 
@@ -269,7 +269,7 @@ FLASH_BANK_COMMAND_HANDLER(str9xpec_flash_bank_command)
 	return ERROR_OK;
 }
 
-static int str9xpec_blank_check(struct flash_bank_s *bank, int first, int last)
+static int str9xpec_blank_check(struct flash_bank *bank, int first, int last)
 {
 	struct scan_field field;
 	uint8_t status;
@@ -336,7 +336,7 @@ static int str9xpec_blank_check(struct flash_bank_s *bank, int first, int last)
 	return ERROR_OK;
 }
 
-static int str9xpec_protect_check(struct flash_bank_s *bank)
+static int str9xpec_protect_check(struct flash_bank *bank)
 {
 	uint8_t status;
 	int i;
@@ -358,7 +358,7 @@ static int str9xpec_protect_check(struct flash_bank_s *bank)
 	return ERROR_OK;
 }
 
-static int str9xpec_erase_area(struct flash_bank_s *bank, int first, int last)
+static int str9xpec_erase_area(struct flash_bank *bank, int first, int last)
 {
 	struct scan_field field;
 	uint8_t status;
@@ -428,7 +428,7 @@ static int str9xpec_erase_area(struct flash_bank_s *bank, int first, int last)
 	return status;
 }
 
-static int str9xpec_erase(struct flash_bank_s *bank, int first, int last)
+static int str9xpec_erase(struct flash_bank *bank, int first, int last)
 {
 	int status;
 
@@ -440,7 +440,7 @@ static int str9xpec_erase(struct flash_bank_s *bank, int first, int last)
 	return ERROR_OK;
 }
 
-static int str9xpec_lock_device(struct flash_bank_s *bank)
+static int str9xpec_lock_device(struct flash_bank *bank)
 {
 	struct scan_field field;
 	uint8_t status;
@@ -482,7 +482,7 @@ static int str9xpec_lock_device(struct flash_bank_s *bank)
 	return status;
 }
 
-static int str9xpec_unlock_device(struct flash_bank_s *bank)
+static int str9xpec_unlock_device(struct flash_bank *bank)
 {
 	uint8_t status;
 
@@ -491,7 +491,7 @@ static int str9xpec_unlock_device(struct flash_bank_s *bank)
 	return status;
 }
 
-static int str9xpec_protect(struct flash_bank_s *bank, int set, int first, int last)
+static int str9xpec_protect(struct flash_bank *bank, int set, int first, int last)
 {
 	uint8_t status;
 	int i;
@@ -537,7 +537,7 @@ static int str9xpec_protect(struct flash_bank_s *bank, int set, int first, int l
 	return ERROR_OK;
 }
 
-static int str9xpec_set_address(struct flash_bank_s *bank, uint8_t sector)
+static int str9xpec_set_address(struct flash_bank *bank, uint8_t sector)
 {
 	struct jtag_tap *tap;
 	struct scan_field field;
@@ -558,7 +558,7 @@ static int str9xpec_set_address(struct flash_bank_s *bank, uint8_t sector)
 	return ERROR_OK;
 }
 
-static int str9xpec_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
+static int str9xpec_write(struct flash_bank *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
 	struct str9xpec_flash_controller *str9xpec_info = bank-&gt;driver_priv;
 	uint32_t dwords_remaining = (count / 8);
@@ -721,7 +721,7 @@ static int str9xpec_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t o
 	return ERROR_OK;
 }
 
-static int str9xpec_probe(struct flash_bank_s *bank)
+static int str9xpec_probe(struct flash_bank *bank)
 {
 	return ERROR_OK;
 }
@@ -737,7 +737,7 @@ COMMAND_HANDLER(str9xpec_handle_part_id_command)
 	if (argc &lt; 1)
 		return ERROR_COMMAND_SYNTAX_ERROR;
 
-	flash_bank_t *bank;
+	struct flash_bank *bank;
 	int retval = flash_command_get_bank_by_num(cmd_ctx, args[0], &amp;bank);
 	if (ERROR_OK != retval)
 		return retval;
@@ -766,12 +766,12 @@ COMMAND_HANDLER(str9xpec_handle_part_id_command)
 	return ERROR_OK;
 }
 
-static int str9xpec_erase_check(struct flash_bank_s *bank)
+static int str9xpec_erase_check(struct flash_bank *bank)
 {
 	return str9xpec_blank_check(bank, 0, bank-&gt;num_sectors - 1);
 }
 
-static int str9xpec_info(struct flash_bank_s *bank, char *buf, int buf_size)
+static int str9xpec_info(struct flash_bank *bank, char *buf, int buf_size)
 {
 	snprintf(buf, buf_size, &quot;str9xpec flash driver info&quot;);
 	return ERROR_OK;
@@ -788,7 +788,7 @@ COMMAND_HANDLER(str9xpec_handle_flash_options_read_command)
 		return ERROR_OK;
 	}
 
-	flash_bank_t *bank;
+	struct flash_bank *bank;
 	int retval = flash_command_get_bank_by_num(cmd_ctx, args[0], &amp;bank);
 	if (ERROR_OK != retval)
 		return retval;
@@ -833,7 +833,7 @@ COMMAND_HANDLER(str9xpec_handle_flash_options_read_command)
 	return ERROR_OK;
 }
 
-static int str9xpec_write_options(struct flash_bank_s *bank)
+static int str9xpec_write_options(struct flash_bank *bank)
 {
 	struct scan_field field;
 	uint8_t status;
@@ -904,7 +904,7 @@ COMMAND_HANDLER(str9xpec_handle_flash_options_write_command)
 		return ERROR_OK;
 	}
 
-	flash_bank_t *bank;
+	struct flash_bank *bank;
 	int retval = flash_command_get_bank_by_num(cmd_ctx, args[0], &amp;bank);
 	if (ERROR_OK != retval)
 		return retval;
@@ -927,7 +927,7 @@ COMMAND_HANDLER(str9xpec_handle_flash_options_cmap_command)
 		return ERROR_OK;
 	}
 
-	flash_bank_t *bank;
+	struct flash_bank *bank;
 	int retval = flash_command_get_bank_by_num(cmd_ctx, args[0], &amp;bank);
 	if (ERROR_OK != retval)
 		return retval;
@@ -956,7 +956,7 @@ COMMAND_HANDLER(str9xpec_handle_flash_options_lvdthd_command)
 		return ERROR_OK;
 	}
 
-	flash_bank_t *bank;
+	struct flash_bank *bank;
 	int retval = flash_command_get_bank_by_num(cmd_ctx, args[0], &amp;bank);
 	if (ERROR_OK != retval)
 		return retval;
@@ -985,7 +985,7 @@ COMMAND_HANDLER(str9xpec_handle_flash_options_lvdsel_command)
 		return ERROR_OK;
 	}
 
-	flash_bank_t *bank;
+	struct flash_bank *bank;
 	int retval = flash_command_get_bank_by_num(cmd_ctx, args[0], &amp;bank);
 	if (ERROR_OK != retval)
 		return retval;
@@ -1014,7 +1014,7 @@ COMMAND_HANDLER(str9xpec_handle_flash_options_lvdwarn_command)
 		return ERROR_OK;
 	}
 
-	flash_bank_t *bank;
+	struct flash_bank *bank;
 	int retval = flash_command_get_bank_by_num(cmd_ctx, args[0], &amp;bank);
 	if (ERROR_OK != retval)
 		return retval;
@@ -1043,7 +1043,7 @@ COMMAND_HANDLER(str9xpec_handle_flash_lock_command)
 		return ERROR_OK;
 	}
 
-	flash_bank_t *bank;
+	struct flash_bank *bank;
 	int retval = flash_command_get_bank_by_num(cmd_ctx, args[0], &amp;bank);
 	if (ERROR_OK != retval)
 		return retval;
@@ -1066,7 +1066,7 @@ COMMAND_HANDLER(str9xpec_handle_flash_unlock_command)
 		return ERROR_OK;
 	}
 
-	flash_bank_t *bank;
+	struct flash_bank *bank;
 	int retval = flash_command_get_bank_by_num(cmd_ctx, args[0], &amp;bank);
 	if (ERROR_OK != retval)
 		return retval;
@@ -1092,7 +1092,7 @@ COMMAND_HANDLER(str9xpec_handle_flash_enable_turbo_command)
 		return ERROR_OK;
 	}
 
-	flash_bank_t *bank;
+	struct flash_bank *bank;
 	int retval = flash_command_get_bank_by_num(cmd_ctx, args[0], &amp;bank);
 	if (ERROR_OK != retval)
 		return retval;
@@ -1139,7 +1139,7 @@ COMMAND_HANDLER(str9xpec_handle_flash_disable_turbo_command)
 		return ERROR_OK;
 	}
 
-	flash_bank_t *bank;
+	struct flash_bank *bank;
 	int retval = flash_command_get_bank_by_num(cmd_ctx, args[0], &amp;bank);
 	if (ERROR_OK != retval)
 		return retval;
diff --git a/src/flash/tms470.c b/src/flash/tms470.c
index a23e042..6e1516f 100644
--- a/src/flash/tms470.c
+++ b/src/flash/tms470.c
@@ -106,7 +106,7 @@ const struct flash_sector TMS470R1A384_BANK2_SECTORS[] = {
 
 /* ---------------------------------------------------------------------- */
 
-static int tms470_read_part_info(struct flash_bank_s *bank)
+static int tms470_read_part_info(struct flash_bank *bank)
 {
 	struct tms470_flash_bank *tms470_info = bank-&gt;driver_priv;
 	struct target *target = bank-&gt;target;
@@ -491,7 +491,7 @@ static int tms470_try_flash_keys(struct target * target, const uint32_t * key_se
 
 /* ---------------------------------------------------------------------- */
 
-static int tms470_unlock_flash(struct flash_bank_s *bank)
+static int tms470_unlock_flash(struct flash_bank *bank)
 {
 	struct target *target = bank-&gt;target;
 	const uint32_t *p_key_sets[5];
@@ -530,7 +530,7 @@ static int tms470_unlock_flash(struct flash_bank_s *bank)
 
 /* ---------------------------------------------------------------------- */
 
-static int tms470_flash_initialize_internal_state_machine(struct flash_bank_s *bank)
+static int tms470_flash_initialize_internal_state_machine(struct flash_bank *bank)
 {
 	uint32_t fmmac2, fmmac1, fmmaxep, k, delay, glbctrl, sysclk;
 	struct target *target = bank-&gt;target;
@@ -666,7 +666,7 @@ static int tms470_flash_initialize_internal_state_machine(struct flash_bank_s *b
 
 /* ---------------------------------------------------------------------- */
 
-int tms470_flash_status(struct flash_bank_s *bank)
+int tms470_flash_status(struct flash_bank *bank)
 {
 	struct target *target = bank-&gt;target;
 	int result = ERROR_OK;
@@ -722,7 +722,7 @@ int tms470_flash_status(struct flash_bank_s *bank)
 
 /* ---------------------------------------------------------------------- */
 
-static int tms470_erase_sector(struct flash_bank_s *bank, int sector)
+static int tms470_erase_sector(struct flash_bank *bank, int sector)
 {
 	uint32_t glbctrl, orig_fmregopt, fmbsea, fmbseb, fmmstat;
 	struct target *target = bank-&gt;target;
@@ -830,7 +830,7 @@ static int tms470_register_commands(struct command_context_s *cmd_ctx)
 
 /* ---------------------------------------------------------------------- */
 
-static int tms470_erase(struct flash_bank_s *bank, int first, int last)
+static int tms470_erase(struct flash_bank *bank, int first, int last)
 {
 	struct tms470_flash_bank *tms470_info = bank-&gt;driver_priv;
 	int sector, result = ERROR_OK;
@@ -877,7 +877,7 @@ static int tms470_erase(struct flash_bank_s *bank, int first, int last)
 
 /* ---------------------------------------------------------------------- */
 
-static int tms470_protect(struct flash_bank_s *bank, int set, int first, int last)
+static int tms470_protect(struct flash_bank *bank, int set, int first, int last)
 {
 	struct tms470_flash_bank *tms470_info = bank-&gt;driver_priv;
 	struct target *target = bank-&gt;target;
@@ -929,7 +929,7 @@ static int tms470_protect(struct flash_bank_s *bank, int set, int first, int las
 
 /* ---------------------------------------------------------------------- */
 
-static int tms470_write(struct flash_bank_s *bank, uint8_t * buffer, uint32_t offset, uint32_t count)
+static int tms470_write(struct flash_bank *bank, uint8_t * buffer, uint32_t offset, uint32_t count)
 {
 	struct target *target = bank-&gt;target;
 	uint32_t glbctrl, fmbac2, orig_fmregopt, fmbsea, fmbseb, fmmaxpp, fmmstat;
@@ -1027,7 +1027,7 @@ static int tms470_write(struct flash_bank_s *bank, uint8_t * buffer, uint32_t of
 
 /* ---------------------------------------------------------------------- */
 
-static int tms470_probe(struct flash_bank_s *bank)
+static int tms470_probe(struct flash_bank *bank)
 {
 	if (bank-&gt;target-&gt;state != TARGET_HALTED)
 	{
@@ -1038,7 +1038,7 @@ static int tms470_probe(struct flash_bank_s *bank)
 	return tms470_read_part_info(bank);
 }
 
-static int tms470_auto_probe(struct flash_bank_s *bank)
+static int tms470_auto_probe(struct flash_bank *bank)
 {
 	struct tms470_flash_bank *tms470_info = bank-&gt;driver_priv;
 
@@ -1049,7 +1049,7 @@ static int tms470_auto_probe(struct flash_bank_s *bank)
 
 /* ---------------------------------------------------------------------- */
 
-static int tms470_erase_check(struct flash_bank_s *bank)
+static int tms470_erase_check(struct flash_bank *bank)
 {
 	struct target *target = bank-&gt;target;
 	struct tms470_flash_bank *tms470_info = bank-&gt;driver_priv;
@@ -1140,7 +1140,7 @@ static int tms470_erase_check(struct flash_bank_s *bank)
 
 /* ---------------------------------------------------------------------- */
 
-static int tms470_protect_check(struct flash_bank_s *bank)
+static int tms470_protect_check(struct flash_bank *bank)
 {
 	struct target *target = bank-&gt;target;
 	struct tms470_flash_bank *tms470_info = bank-&gt;driver_priv;
@@ -1188,7 +1188,7 @@ static int tms470_protect_check(struct flash_bank_s *bank)
 
 /* ---------------------------------------------------------------------- */
 
-static int tms470_info(struct flash_bank_s *bank, char *buf, int buf_size)
+static int tms470_info(struct flash_bank *bank, char *buf, int buf_size)
 {
 	int used = 0;
 	struct tms470_flash_bank *tms470_info = bank-&gt;driver_priv;
diff --git a/src/server/gdb_server.c b/src/server/gdb_server.c
index 84ad76c..f49f352 100644
--- a/src/server/gdb_server.c
+++ b/src/server/gdb_server.c
@@ -1520,7 +1520,7 @@ static int decode_xfer_read(char *buf, char **annex, int *ofs, unsigned int *len
 	return 0;
 }
 
-int gdb_calc_blocksize(flash_bank_t *bank)
+int gdb_calc_blocksize(struct flash_bank *bank)
 {
 	uint32_t i;
 	uint32_t block_size = 0xffffffff;
@@ -1538,9 +1538,9 @@ int gdb_calc_blocksize(flash_bank_t *bank)
 
 static int compare_bank (const void * a, const void * b)
 {
-	flash_bank_t *b1, *b2;
-	b1=*((flash_bank_t **)a);
-	b2=*((flash_bank_t **)b);
+	struct flash_bank *b1, *b2;
+	b1=*((struct flash_bank **)a);
+	b2=*((struct flash_bank **)b);
 
 	if (b1-&gt;base == b2-&gt;base)
 	{
@@ -1661,7 +1661,7 @@ int gdb_query_packet(struct connection *connection, struct target *target, char
 		 * Normally we only execute this code once, but no big deal if we
 		 * have to regenerate it a couple of times. */
 
-		flash_bank_t *p;
+		struct flash_bank *p;
 		char *xml = NULL;
 		int size = 0;
 		int pos = 0;
@@ -1685,7 +1685,7 @@ int gdb_query_packet(struct connection *connection, struct target *target, char
 		read/write) by default for GDB.
 		GDB does not have a concept of non-cacheable read/write memory.
 		 */
-		flash_bank_t **banks = malloc(sizeof(flash_bank_t *)*flash_get_bank_count());
+		struct flash_bank **banks = malloc(sizeof(struct flash_bank *)*flash_get_bank_count());
 		int i;
 
 		for (i = 0; i &lt; flash_get_bank_count(); i++)
@@ -1701,7 +1701,7 @@ int gdb_query_packet(struct connection *connection, struct target *target, char
 			banks[i]=p;
 		}
 
-		qsort(banks, flash_get_bank_count(), sizeof(flash_bank_t *), compare_bank);
+		qsort(banks, flash_get_bank_count(), sizeof(struct flash_bank *), compare_bank);
 
 		uint32_t ram_start = 0;
 		for (i = 0; i &lt; flash_get_bank_count(); i++)

commit 2f6e56e38320350bb300b363d0b3737fa8d1f3ea
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 11:32:17 2009 -0800

    nand_device_t -&gt; struct nand_device
    
    Remove misleading typedef and redundant suffix from struct nand_device.

diff --git a/src/flash/davinci_nand.c b/src/flash/davinci_nand.c
index cc14420..4cef408 100644
--- a/src/flash/davinci_nand.c
+++ b/src/flash/davinci_nand.c
@@ -55,9 +55,9 @@ struct davinci_nand {
 	struct arm_nand_data	io;
 
 	/* page i/o for the relevant flavor of hardware ECC */
-	int (*read_page)(struct nand_device_s *nand, uint32_t page,
+	int (*read_page)(struct nand_device *nand, uint32_t page,
 			uint8_t *data, uint32_t data_size, uint8_t *oob, uint32_t oob_size);
-	int (*write_page)(struct nand_device_s *nand, uint32_t page,
+	int (*write_page)(struct nand_device *nand, uint32_t page,
 			uint8_t *data, uint32_t data_size, uint8_t *oob, uint32_t oob_size);
 };
 
@@ -83,7 +83,7 @@ static int davinci_register_commands(struct command_context_s *cmd_ctx)
 	return ERROR_OK;
 }
 
-static int davinci_init(struct nand_device_s *nand)
+static int davinci_init(struct nand_device *nand)
 {
 	struct davinci_nand *info = nand-&gt;controller_priv;
 	struct target *target = info-&gt;target;
@@ -108,12 +108,12 @@ static int davinci_init(struct nand_device_s *nand)
 	return ERROR_OK;
 }
 
-static int davinci_reset(struct nand_device_s *nand)
+static int davinci_reset(struct nand_device *nand)
 {
 	return ERROR_OK;
 }
 
-static int davinci_nand_ready(struct nand_device_s *nand, int timeout)
+static int davinci_nand_ready(struct nand_device *nand, int timeout)
 {
 	struct davinci_nand *info = nand-&gt;controller_priv;
 	struct target *target = info-&gt;target;
@@ -136,7 +136,7 @@ static int davinci_nand_ready(struct nand_device_s *nand, int timeout)
 	return 0;
 }
 
-static int davinci_command(struct nand_device_s *nand, uint8_t command)
+static int davinci_command(struct nand_device *nand, uint8_t command)
 {
 	struct davinci_nand *info = nand-&gt;controller_priv;
 	struct target *target = info-&gt;target;
@@ -148,7 +148,7 @@ static int davinci_command(struct nand_device_s *nand, uint8_t command)
 	return ERROR_OK;
 }
 
-static int davinci_address(struct nand_device_s *nand, uint8_t address)
+static int davinci_address(struct nand_device *nand, uint8_t address)
 {
 	struct davinci_nand *info = nand-&gt;controller_priv;
 	struct target *target = info-&gt;target;
@@ -160,7 +160,7 @@ static int davinci_address(struct nand_device_s *nand, uint8_t address)
 	return ERROR_OK;
 }
 
-static int davinci_write_data(struct nand_device_s *nand, uint16_t data)
+static int davinci_write_data(struct nand_device *nand, uint16_t data)
 {
 	struct davinci_nand *info = nand-&gt;controller_priv;
 	struct target *target = info-&gt;target;
@@ -172,7 +172,7 @@ static int davinci_write_data(struct nand_device_s *nand, uint16_t data)
 	return ERROR_OK;
 }
 
-static int davinci_read_data(struct nand_device_s *nand, void *data)
+static int davinci_read_data(struct nand_device *nand, void *data)
 {
 	struct davinci_nand *info = nand-&gt;controller_priv;
 	struct target *target = info-&gt;target;
@@ -186,7 +186,7 @@ static int davinci_read_data(struct nand_device_s *nand, void *data)
 
 /* REVISIT a bit of native code should let block reads be MUCH faster */
 
-static int davinci_read_block_data(struct nand_device_s *nand,
+static int davinci_read_block_data(struct nand_device *nand,
 		uint8_t *data, int data_size)
 {
 	struct davinci_nand *info = nand-&gt;controller_priv;
@@ -219,7 +219,7 @@ static int davinci_read_block_data(struct nand_device_s *nand,
 	return ERROR_OK;
 }
 
-static int davinci_write_block_data(struct nand_device_s *nand,
+static int davinci_write_block_data(struct nand_device *nand,
 		uint8_t *data, int data_size)
 {
 	struct davinci_nand *info = nand-&gt;controller_priv;
@@ -255,7 +255,7 @@ static int davinci_write_block_data(struct nand_device_s *nand,
 	return ERROR_OK;
 }
 
-static int davinci_write_page(struct nand_device_s *nand, uint32_t page,
+static int davinci_write_page(struct nand_device *nand, uint32_t page,
 		uint8_t *data, uint32_t data_size, uint8_t *oob, uint32_t oob_size)
 {
 	struct davinci_nand *info = nand-&gt;controller_priv;
@@ -306,7 +306,7 @@ static int davinci_write_page(struct nand_device_s *nand, uint32_t page,
 	return status;
 }
 
-static int davinci_read_page(struct nand_device_s *nand, uint32_t page,
+static int davinci_read_page(struct nand_device *nand, uint32_t page,
 		uint8_t *data, uint32_t data_size, uint8_t *oob, uint32_t oob_size)
 {
 	struct davinci_nand *info = nand-&gt;controller_priv;
@@ -319,7 +319,7 @@ static int davinci_read_page(struct nand_device_s *nand, uint32_t page,
 	return info-&gt;read_page(nand, page, data, data_size, oob, oob_size);
 }
 
-static void davinci_write_pagecmd(struct nand_device_s *nand, uint8_t cmd, uint32_t page)
+static void davinci_write_pagecmd(struct nand_device *nand, uint8_t cmd, uint32_t page)
 {
 	struct davinci_nand *info = nand-&gt;controller_priv;
 	struct target *target = info-&gt;target;
@@ -342,7 +342,7 @@ static void davinci_write_pagecmd(struct nand_device_s *nand, uint8_t cmd, uint3
 		target_write_u8(target, info-&gt;addr, page &gt;&gt; 24);
 }
 
-static int davinci_writepage_tail(struct nand_device_s *nand,
+static int davinci_writepage_tail(struct nand_device *nand,
 		uint8_t *oob, uint32_t oob_size)
 {
 	struct davinci_nand *info = nand-&gt;controller_priv;
@@ -374,7 +374,7 @@ static int davinci_writepage_tail(struct nand_device_s *nand,
 /*
  * All DaVinci family chips support 1-bit ECC on a per-chipselect basis.
  */
-static int davinci_write_page_ecc1(struct nand_device_s *nand, uint32_t page,
+static int davinci_write_page_ecc1(struct nand_device *nand, uint32_t page,
 		uint8_t *data, uint32_t data_size, uint8_t *oob, uint32_t oob_size)
 {
 	unsigned oob_offset;
@@ -441,7 +441,7 @@ static int davinci_write_page_ecc1(struct nand_device_s *nand, uint32_t page,
  * is read first, so its ECC data can be used incrementally), but the
  * manufacturer bad block markers are safe.  Contrast:  old &quot;infix&quot; style.
  */
-static int davinci_write_page_ecc4(struct nand_device_s *nand, uint32_t page,
+static int davinci_write_page_ecc4(struct nand_device *nand, uint32_t page,
 		uint8_t *data, uint32_t data_size, uint8_t *oob, uint32_t oob_size)
 {
 	static const uint8_t ecc512[] = {
@@ -543,7 +543,7 @@ static int davinci_write_page_ecc4(struct nand_device_s *nand, uint32_t page,
  * older second stage loaders (ABL/U-Boot, etc) or other system software
  * (MVL 4.x/5.x kernels, filesystems, etc) may need it more generally.
  */
-static int davinci_write_page_ecc4infix(struct nand_device_s *nand, uint32_t page,
+static int davinci_write_page_ecc4infix(struct nand_device *nand, uint32_t page,
 		uint8_t *data, uint32_t data_size, uint8_t *oob, uint32_t oob_size)
 {
 	struct davinci_nand *info = nand-&gt;controller_priv;
@@ -600,7 +600,7 @@ static int davinci_write_page_ecc4infix(struct nand_device_s *nand, uint32_t pag
 	return davinci_writepage_tail(nand, NULL, 0);
 }
 
-static int davinci_read_page_ecc4infix(struct nand_device_s *nand, uint32_t page,
+static int davinci_read_page_ecc4infix(struct nand_device *nand, uint32_t page,
 		uint8_t *data, uint32_t data_size, uint8_t *oob, uint32_t oob_size)
 {
 	davinci_write_pagecmd(nand, NAND_CMD_READ0, page);
diff --git a/src/flash/lpc3180_nand_controller.c b/src/flash/lpc3180_nand_controller.c
index e4b0475..4a15e36 100644
--- a/src/flash/lpc3180_nand_controller.c
+++ b/src/flash/lpc3180_nand_controller.c
@@ -24,8 +24,8 @@
 #include &quot;lpc3180_nand_controller.h&quot;
 #include &quot;nand.h&quot;
 
-static int lpc3180_reset(struct nand_device_s *nand);
-static int lpc3180_controller_ready(struct nand_device_s *nand, int timeout);
+static int lpc3180_reset(struct nand_device *nand);
+static int lpc3180_controller_ready(struct nand_device *nand, int timeout);
 
 /* nand device lpc3180 &lt;target#&gt; &lt;oscillator_frequency&gt;
  */
@@ -144,7 +144,7 @@ static float lpc3180_cycle_time(struct lpc3180_nand_controller *lpc3180_info)
 	return cycle;
 }
 
-static int lpc3180_init(struct nand_device_s *nand)
+static int lpc3180_init(struct nand_device *nand)
 {
 	struct lpc3180_nand_controller *lpc3180_info = nand-&gt;controller_priv;
 	struct target *target = lpc3180_info-&gt;target;
@@ -274,7 +274,7 @@ static int lpc3180_init(struct nand_device_s *nand)
 	return ERROR_OK;
 }
 
-static int lpc3180_reset(struct nand_device_s *nand)
+static int lpc3180_reset(struct nand_device *nand)
 {
 	struct lpc3180_nand_controller *lpc3180_info = nand-&gt;controller_priv;
 	struct target *target = lpc3180_info-&gt;target;
@@ -316,7 +316,7 @@ static int lpc3180_reset(struct nand_device_s *nand)
 	return ERROR_OK;
 }
 
-static int lpc3180_command(struct nand_device_s *nand, uint8_t command)
+static int lpc3180_command(struct nand_device *nand, uint8_t command)
 {
 	struct lpc3180_nand_controller *lpc3180_info = nand-&gt;controller_priv;
 	struct target *target = lpc3180_info-&gt;target;
@@ -346,7 +346,7 @@ static int lpc3180_command(struct nand_device_s *nand, uint8_t command)
 	return ERROR_OK;
 }
 
-static int lpc3180_address(struct nand_device_s *nand, uint8_t address)
+static int lpc3180_address(struct nand_device *nand, uint8_t address)
 {
 	struct lpc3180_nand_controller *lpc3180_info = nand-&gt;controller_priv;
 	struct target *target = lpc3180_info-&gt;target;
@@ -376,7 +376,7 @@ static int lpc3180_address(struct nand_device_s *nand, uint8_t address)
 	return ERROR_OK;
 }
 
-static int lpc3180_write_data(struct nand_device_s *nand, uint16_t data)
+static int lpc3180_write_data(struct nand_device *nand, uint16_t data)
 {
 	struct lpc3180_nand_controller *lpc3180_info = nand-&gt;controller_priv;
 	struct target *target = lpc3180_info-&gt;target;
@@ -406,7 +406,7 @@ static int lpc3180_write_data(struct nand_device_s *nand, uint16_t data)
 	return ERROR_OK;
 }
 
-static int lpc3180_read_data(struct nand_device_s *nand, void *data)
+static int lpc3180_read_data(struct nand_device *nand, void *data)
 {
 	struct lpc3180_nand_controller *lpc3180_info = nand-&gt;controller_priv;
 	struct target *target = lpc3180_info-&gt;target;
@@ -468,7 +468,7 @@ static int lpc3180_read_data(struct nand_device_s *nand, void *data)
 	return ERROR_OK;
 }
 
-static int lpc3180_write_page(struct nand_device_s *nand, uint32_t page, uint8_t *data, uint32_t data_size, uint8_t *oob, uint32_t oob_size)
+static int lpc3180_write_page(struct nand_device *nand, uint32_t page, uint8_t *data, uint32_t data_size, uint8_t *oob, uint32_t oob_size)
 {
 	struct lpc3180_nand_controller *lpc3180_info = nand-&gt;controller_priv;
 	struct target *target = lpc3180_info-&gt;target;
@@ -607,7 +607,7 @@ static int lpc3180_write_page(struct nand_device_s *nand, uint32_t page, uint8_t
 	return ERROR_OK;
 }
 
-static int lpc3180_read_page(struct nand_device_s *nand, uint32_t page, uint8_t *data, uint32_t data_size, uint8_t *oob, uint32_t oob_size)
+static int lpc3180_read_page(struct nand_device *nand, uint32_t page, uint8_t *data, uint32_t data_size, uint8_t *oob, uint32_t oob_size)
 {
 	struct lpc3180_nand_controller *lpc3180_info = nand-&gt;controller_priv;
 	struct target *target = lpc3180_info-&gt;target;
@@ -754,7 +754,7 @@ static int lpc3180_read_page(struct nand_device_s *nand, uint32_t page, uint8_t
 	return ERROR_OK;
 }
 
-static int lpc3180_controller_ready(struct nand_device_s *nand, int timeout)
+static int lpc3180_controller_ready(struct nand_device *nand, int timeout)
 {
 	struct lpc3180_nand_controller *lpc3180_info = nand-&gt;controller_priv;
 	struct target *target = lpc3180_info-&gt;target;
@@ -788,7 +788,7 @@ static int lpc3180_controller_ready(struct nand_device_s *nand, int timeout)
 	return 0;
 }
 
-static int lpc3180_nand_ready(struct nand_device_s *nand, int timeout)
+static int lpc3180_nand_ready(struct nand_device *nand, int timeout)
 {
 	struct lpc3180_nand_controller *lpc3180_info = nand-&gt;controller_priv;
 	struct target *target = lpc3180_info-&gt;target;
@@ -843,7 +843,7 @@ COMMAND_HANDLER(handle_lpc3180_select_command)
 
 	unsigned num;
 	COMMAND_PARSE_NUMBER(uint, args[1], num);
-	nand_device_t *nand = get_nand_device_by_num(num);
+	struct nand_device *nand = get_nand_device_by_num(num);
 	if (!nand)
 	{
 		command_print(cmd_ctx, &quot;nand device '#%s' is out of bounds&quot;, args[0]);
diff --git a/src/flash/mx3_nand.c b/src/flash/mx3_nand.c
index 07a360f..6c69917 100644
--- a/src/flash/mx3_nand.c
+++ b/src/flash/mx3_nand.c
@@ -49,17 +49,17 @@ unsigned char sign_of_sequental_byte_read;
 
 static int test_iomux_settings (struct target * target, uint32_t value,
 				uint32_t mask, const char *text);
-static int initialize_nf_controller (struct nand_device_s *nand);
+static int initialize_nf_controller (struct nand_device *nand);
 static int get_next_byte_from_sram_buffer (struct target * target, uint8_t * value);
 static int get_next_halfword_from_sram_buffer (struct target * target,
 					       uint16_t * value);
 static int poll_for_complete_op (struct target * target, const char *text);
-static int validate_target_state (struct nand_device_s *nand);
-static int do_data_output (struct nand_device_s *nand);
+static int validate_target_state (struct nand_device *nand);
+static int do_data_output (struct nand_device *nand);
 
-static int imx31_command (struct nand_device_s *nand, uint8_t command);
-static int imx31_address (struct nand_device_s *nand, uint8_t address);
-static int imx31_controller_ready (struct nand_device_s *nand, int tout);
+static int imx31_command (struct nand_device *nand, uint8_t command);
+static int imx31_address (struct nand_device *nand, uint8_t address);
+static int imx31_controller_ready (struct nand_device *nand, int tout);
 
 NAND_DEVICE_COMMAND_HANDLER(imx31_nand_device_command)
 {
@@ -121,7 +121,7 @@ NAND_DEVICE_COMMAND_HANDLER(imx31_nand_device_command)
 	return ERROR_OK;
 }
 
-static int imx31_init (struct nand_device_s *nand)
+static int imx31_init (struct nand_device *nand)
 {
 	struct mx3_nf_controller *mx3_nf_info = nand-&gt;controller_priv;
 	struct target *target = mx3_nf_info-&gt;target;
@@ -264,7 +264,7 @@ static int imx31_init (struct nand_device_s *nand)
 	return ERROR_OK;
 }
 
-static int imx31_read_data (struct nand_device_s *nand, void *data)
+static int imx31_read_data (struct nand_device *nand, void *data)
 {
 	struct mx3_nf_controller *mx3_nf_info = nand-&gt;controller_priv;
 	struct target *target = mx3_nf_info-&gt;target;
@@ -304,13 +304,13 @@ static int imx31_read_data (struct nand_device_s *nand, void *data)
 	return ERROR_OK;
 }
 
-static int imx31_write_data (struct nand_device_s *nand, uint16_t data)
+static int imx31_write_data (struct nand_device *nand, uint16_t data)
 {
 	LOG_ERROR (&quot;write_data() not implemented&quot;);
 	return ERROR_NAND_OPERATION_FAILED;
 }
 
-static int imx31_nand_ready (struct nand_device_s *nand, int timeout)
+static int imx31_nand_ready (struct nand_device *nand, int timeout)
 {
 	return imx31_controller_ready (nand, timeout);
 }
@@ -320,7 +320,7 @@ static int imx31_register_commands (struct command_context_s *cmd_ctx)
 	return ERROR_OK;
 }
 
-static int imx31_reset (struct nand_device_s *nand)
+static int imx31_reset (struct nand_device *nand)
 {
 	/*
 	* validate target state
@@ -335,7 +335,7 @@ static int imx31_reset (struct nand_device_s *nand)
 	return ERROR_OK;
 }
 
-static int imx31_command (struct nand_device_s *nand, uint8_t command)
+static int imx31_command (struct nand_device *nand, uint8_t command)
 {
 	struct mx3_nf_controller *mx3_nf_info = nand-&gt;controller_priv;
 	struct target *target = mx3_nf_info-&gt;target;
@@ -409,7 +409,7 @@ static int imx31_command (struct nand_device_s *nand, uint8_t command)
 	return ERROR_OK;
 }
 
-static int imx31_address (struct nand_device_s *nand, uint8_t address)
+static int imx31_address (struct nand_device *nand, uint8_t address)
 {
 	struct mx3_nf_controller *mx3_nf_info = nand-&gt;controller_priv;
 	struct target *target = mx3_nf_info-&gt;target;
@@ -441,7 +441,7 @@ static int imx31_address (struct nand_device_s *nand, uint8_t address)
 	return ERROR_OK;
 }
 
-static int imx31_controller_ready (struct nand_device_s *nand, int tout)
+static int imx31_controller_ready (struct nand_device *nand, int tout)
 {
 	uint16_t poll_complete_status;
 	struct mx3_nf_controller *mx3_nf_info = nand-&gt;controller_priv;
@@ -472,7 +472,7 @@ static int imx31_controller_ready (struct nand_device_s *nand, int tout)
 	return tout;
 }
 
-static int imx31_write_page (struct nand_device_s *nand, uint32_t page,
+static int imx31_write_page (struct nand_device *nand, uint32_t page,
 			     uint8_t * data, uint32_t data_size, uint8_t * oob,
 			     uint32_t oob_size)
 {
@@ -579,7 +579,7 @@ static int imx31_write_page (struct nand_device_s *nand, uint32_t page,
 	return ERROR_OK;
 }
 
-static int imx31_read_page (struct nand_device_s *nand, uint32_t page,
+static int imx31_read_page (struct nand_device *nand, uint32_t page,
 			    uint8_t * data, uint32_t data_size, uint8_t * oob,
 			    uint32_t oob_size)
 {
@@ -656,7 +656,7 @@ static int test_iomux_settings (struct target * target, uint32_t address,
 	return ERROR_OK;
 }
 
-static int initialize_nf_controller (struct nand_device_s *nand)
+static int initialize_nf_controller (struct nand_device *nand)
 {
 	struct mx3_nf_controller *mx3_nf_info = nand-&gt;controller_priv;
 	struct target *target = mx3_nf_info-&gt;target;
@@ -784,7 +784,7 @@ static int poll_for_complete_op (struct target * target, const char *text)
 	return ERROR_OK;
 }
 
-static int validate_target_state (struct nand_device_s *nand)
+static int validate_target_state (struct nand_device *nand)
 {
 	struct mx3_nf_controller *mx3_nf_info = nand-&gt;controller_priv;
 	struct target *target = mx3_nf_info-&gt;target;
@@ -806,7 +806,7 @@ static int validate_target_state (struct nand_device_s *nand)
 	return ERROR_OK;
 }
 
-static int do_data_output (struct nand_device_s *nand)
+static int do_data_output (struct nand_device *nand)
 {
 	struct mx3_nf_controller *mx3_nf_info = nand-&gt;controller_priv;
 	struct target *target = mx3_nf_info-&gt;target;
diff --git a/src/flash/nand.c b/src/flash/nand.c
index 1100205..48f6520 100644
--- a/src/flash/nand.c
+++ b/src/flash/nand.c
@@ -28,10 +28,10 @@
 #include &quot;time_support.h&quot;
 #include &quot;fileio.h&quot;
 
-static int nand_read_page(struct nand_device_s *nand, uint32_t page, uint8_t *data, uint32_t data_size, uint8_t *oob, uint32_t oob_size);
-//static int nand_read_plain(struct nand_device_s *nand, uint32_t address, uint8_t *data, uint32_t data_size);
+static int nand_read_page(struct nand_device *nand, uint32_t page, uint8_t *data, uint32_t data_size, uint8_t *oob, uint32_t oob_size);
+//static int nand_read_plain(struct nand_device *nand, uint32_t address, uint8_t *data, uint32_t data_size);
 
-static int nand_write_page(struct nand_device_s *nand, uint32_t page, uint8_t *data, uint32_t data_size, uint8_t *oob, uint32_t oob_size);
+static int nand_write_page(struct nand_device *nand, uint32_t page, uint8_t *data, uint32_t data_size, uint8_t *oob, uint32_t oob_size);
 
 /* NAND flash controller
  */
@@ -61,7 +61,7 @@ static struct nand_flash_controller *nand_flash_controllers[] =
 };
 
 /* configured NAND devices and NAND Flash command handler */
-static nand_device_t *nand_devices = NULL;
+static struct nand_device *nand_devices = NULL;
 static command_t *nand_cmd;
 
 /*	Chip ID list
@@ -218,7 +218,7 @@ COMMAND_HANDLER(handle_nand_device_command)
 
 	for (i = 0; nand_flash_controllers[i]; i++)
 	{
-		nand_device_t *p, *c;
+		struct nand_device *p, *c;
 
 		if (strcmp(args[0], nand_flash_controllers[i]-&gt;name) == 0)
 		{
@@ -229,7 +229,7 @@ COMMAND_HANDLER(handle_nand_device_command)
 				return retval;
 			}
 
-			c = malloc(sizeof(nand_device_t));
+			c = malloc(sizeof(struct nand_device));
 
 			c-&gt;controller = nand_flash_controllers[i];
 			c-&gt;controller_priv = NULL;
@@ -288,9 +288,9 @@ int nand_register_commands(struct command_context_s *cmd_ctx)
 	return ERROR_OK;
 }
 
-nand_device_t *get_nand_device_by_num(int num)
+struct nand_device *get_nand_device_by_num(int num)
 {
-	nand_device_t *p;
+	struct nand_device *p;
 	int i = 0;
 
 	for (p = nand_devices; p; p = p-&gt;next)
@@ -305,7 +305,7 @@ nand_device_t *get_nand_device_by_num(int num)
 }
 
 int nand_command_get_device_by_num(struct command_context_s *cmd_ctx,
-		const char *str, nand_device_t **nand)
+		const char *str, struct nand_device **nand)
 {
 	unsigned num;
 	COMMAND_PARSE_NUMBER(uint, str, num);
@@ -317,7 +317,7 @@ int nand_command_get_device_by_num(struct command_context_s *cmd_ctx,
 	return ERROR_OK;
 }
 
-static int nand_build_bbt(struct nand_device_s *nand, int first, int last)
+static int nand_build_bbt(struct nand_device *nand, int first, int last)
 {
 	uint32_t page = 0x0;
 	int i;
@@ -351,7 +351,7 @@ static int nand_build_bbt(struct nand_device_s *nand, int first, int last)
 	return ERROR_OK;
 }
 
-int nand_read_status(struct nand_device_s *nand, uint8_t *status)
+int nand_read_status(struct nand_device *nand, uint8_t *status)
 {
 	if (!nand-&gt;device)
 		return ERROR_NAND_DEVICE_NOT_PROBED;
@@ -376,7 +376,7 @@ int nand_read_status(struct nand_device_s *nand, uint8_t *status)
 	return ERROR_OK;
 }
 
-static int nand_poll_ready(struct nand_device_s *nand, int timeout)
+static int nand_poll_ready(struct nand_device *nand, int timeout)
 {
 	uint8_t status;
 
@@ -397,7 +397,7 @@ static int nand_poll_ready(struct nand_device_s *nand, int timeout)
 	return (status &amp; NAND_STATUS_READY) != 0;
 }
 
-int nand_probe(struct nand_device_s *nand)
+int nand_probe(struct nand_device *nand)
 {
 	uint8_t manufacturer_id, device_id;
 	uint8_t id_buff[6];
@@ -615,7 +615,7 @@ int nand_probe(struct nand_device_s *nand)
 	return ERROR_OK;
 }
 
-static int nand_erase(struct nand_device_s *nand, int first_block, int last_block)
+static int nand_erase(struct nand_device *nand, int first_block, int last_block)
 {
 	int i;
 	uint32_t page;
@@ -704,7 +704,7 @@ static int nand_erase(struct nand_device_s *nand, int first_block, int last_bloc
 }
 
 #if 0
-static int nand_read_plain(struct nand_device_s *nand, uint32_t address, uint8_t *data, uint32_t data_size)
+static int nand_read_plain(struct nand_device *nand, uint32_t address, uint8_t *data, uint32_t data_size)
 {
 	uint8_t *page;
 
@@ -741,7 +741,7 @@ static int nand_read_plain(struct nand_device_s *nand, uint32_t address, uint8_t
 	return ERROR_OK;
 }
 
-static int nand_write_plain(struct nand_device_s *nand, uint32_t address, uint8_t *data, uint32_t data_size)
+static int nand_write_plain(struct nand_device *nand, uint32_t address, uint8_t *data, uint32_t data_size)
 {
 	uint8_t *page;
 
@@ -779,7 +779,7 @@ static int nand_write_plain(struct nand_device_s *nand, uint32_t address, uint8_
 }
 #endif
 
-int nand_write_page(struct nand_device_s *nand, uint32_t page, uint8_t *data, uint32_t data_size, uint8_t *oob, uint32_t oob_size)
+int nand_write_page(struct nand_device *nand, uint32_t page, uint8_t *data, uint32_t data_size, uint8_t *oob, uint32_t oob_size)
 {
 	uint32_t block;
 
@@ -796,7 +796,7 @@ int nand_write_page(struct nand_device_s *nand, uint32_t page, uint8_t *data, ui
 		return nand-&gt;controller-&gt;write_page(nand, page, data, data_size, oob, oob_size);
 }
 
-static int nand_read_page(struct nand_device_s *nand, uint32_t page, uint8_t *data, uint32_t data_size, uint8_t *oob, uint32_t oob_size)
+static int nand_read_page(struct nand_device *nand, uint32_t page, uint8_t *data, uint32_t data_size, uint8_t *oob, uint32_t oob_size)
 {
 	if (!nand-&gt;device)
 		return ERROR_NAND_DEVICE_NOT_PROBED;
@@ -807,7 +807,7 @@ static int nand_read_page(struct nand_device_s *nand, uint32_t page, uint8_t *da
 		return nand-&gt;controller-&gt;read_page(nand, page, data, data_size, oob, oob_size);
 }
 
-int nand_read_page_raw(struct nand_device_s *nand, uint32_t page, uint8_t *data, uint32_t data_size, uint8_t *oob, uint32_t oob_size)
+int nand_read_page_raw(struct nand_device *nand, uint32_t page, uint8_t *data, uint32_t data_size, uint8_t *oob, uint32_t oob_size)
 {
 	uint32_t i;
 
@@ -921,7 +921,7 @@ int nand_read_page_raw(struct nand_device_s *nand, uint32_t page, uint8_t *data,
 	return ERROR_OK;
 }
 
-int nand_write_page_raw(struct nand_device_s *nand, uint32_t page, uint8_t *data, uint32_t data_size, uint8_t *oob, uint32_t oob_size)
+int nand_write_page_raw(struct nand_device *nand, uint32_t page, uint8_t *data, uint32_t data_size, uint8_t *oob, uint32_t oob_size)
 {
 	uint32_t i;
 	int retval;
@@ -1044,7 +1044,7 @@ int nand_write_page_raw(struct nand_device_s *nand, uint32_t page, uint8_t *data
 
 COMMAND_HANDLER(handle_nand_list_command)
 {
-	nand_device_t *p;
+	struct nand_device *p;
 	int i;
 
 	if (!nand_devices)
@@ -1076,7 +1076,7 @@ COMMAND_HANDLER(handle_nand_info_command)
 	int first = -1;
 	int last = -1;
 
-	nand_device_t *p;
+	struct nand_device *p;
 	int retval = nand_command_get_device_by_num(cmd_ctx, args[0], &amp;p);
 	if (ERROR_OK != retval)
 		return retval;
@@ -1151,7 +1151,7 @@ COMMAND_HANDLER(handle_nand_probe_command)
 		return ERROR_COMMAND_SYNTAX_ERROR;
 	}
 
-	nand_device_t *p;
+	struct nand_device *p;
 	int retval = nand_command_get_device_by_num(cmd_ctx, args[0], &amp;p);
 	if (ERROR_OK != retval)
 		return retval;
@@ -1180,7 +1180,7 @@ COMMAND_HANDLER(handle_nand_erase_command)
 
 	}
 
-	nand_device_t *p;
+	struct nand_device *p;
 	int retval = nand_command_get_device_by_num(cmd_ctx, args[0], &amp;p);
 	if (ERROR_OK != retval)
 		return retval;
@@ -1239,7 +1239,7 @@ COMMAND_HANDLER(handle_nand_check_bad_blocks_command)
 
 	}
 
-	nand_device_t *p;
+	struct nand_device *p;
 	int retval = nand_command_get_device_by_num(cmd_ctx, args[0], &amp;p);
 	if (ERROR_OK != retval)
 		return retval;
@@ -1300,7 +1300,7 @@ COMMAND_HANDLER(handle_nand_write_command)
 		return ERROR_COMMAND_SYNTAX_ERROR;
 	}
 
-	nand_device_t *p;
+	struct nand_device *p;
 	int retval = nand_command_get_device_by_num(cmd_ctx, args[0], &amp;p);
 	if (ERROR_OK != retval)
 		return retval;
@@ -1458,7 +1458,7 @@ COMMAND_HANDLER(handle_nand_dump_command)
 		return ERROR_COMMAND_SYNTAX_ERROR;
 	}
 
-	nand_device_t *p;
+	struct nand_device *p;
 	int retval = nand_command_get_device_by_num(cmd_ctx, args[0], &amp;p);
 	if (ERROR_OK != retval)
 		return retval;
@@ -1575,7 +1575,7 @@ COMMAND_HANDLER(handle_nand_raw_access_command)
 		return ERROR_COMMAND_SYNTAX_ERROR;
 	}
 
-	nand_device_t *p;
+	struct nand_device *p;
 	int retval = nand_command_get_device_by_num(cmd_ctx, args[0], &amp;p);
 	if (ERROR_OK != retval)
 		return retval;
diff --git a/src/flash/nand.h b/src/flash/nand.h
index c6d4075..8096309 100644
--- a/src/flash/nand.h
+++ b/src/flash/nand.h
@@ -27,28 +27,28 @@
 
 #include &quot;flash.h&quot;
 
-struct nand_device_s;
+struct nand_device;
 
 #define __NAND_DEVICE_COMMAND(name) \
-		COMMAND_HELPER(name, struct nand_device_s *nand)
+		COMMAND_HELPER(name, struct nand_device *nand)
 
 struct nand_flash_controller
 {
 	char *name;
 	__NAND_DEVICE_COMMAND((*nand_device_command));
 	int (*register_commands)(struct command_context_s *cmd_ctx);
-	int (*init)(struct nand_device_s *nand);
-	int (*reset)(struct nand_device_s *nand);
-	int (*command)(struct nand_device_s *nand, uint8_t command);
-	int (*address)(struct nand_device_s *nand, uint8_t address);
-	int (*write_data)(struct nand_device_s *nand, uint16_t data);
-	int (*read_data)(struct nand_device_s *nand, void *data);
-	int (*write_block_data)(struct nand_device_s *nand, uint8_t *data, int size);
-	int (*read_block_data)(struct nand_device_s *nand, uint8_t *data, int size);
-	int (*write_page)(struct nand_device_s *nand, uint32_t page, uint8_t *data, uint32_t data_size, uint8_t *oob, uint32_t oob_size);
-	int (*read_page)(struct nand_device_s *nand, uint32_t page, uint8_t *data, uint32_t data_size, uint8_t *oob, uint32_t oob_size);
-	int (*controller_ready)(struct nand_device_s *nand, int timeout);
-	int (*nand_ready)(struct nand_device_s *nand, int timeout);
+	int (*init)(struct nand_device *nand);
+	int (*reset)(struct nand_device *nand);
+	int (*command)(struct nand_device *nand, uint8_t command);
+	int (*address)(struct nand_device *nand, uint8_t address);
+	int (*write_data)(struct nand_device *nand, uint16_t data);
+	int (*read_data)(struct nand_device *nand, void *data);
+	int (*write_block_data)(struct nand_device *nand, uint8_t *data, int size);
+	int (*read_block_data)(struct nand_device *nand, uint8_t *data, int size);
+	int (*write_page)(struct nand_device *nand, uint32_t page, uint8_t *data, uint32_t data_size, uint8_t *oob, uint32_t oob_size);
+	int (*read_page)(struct nand_device *nand, uint32_t page, uint8_t *data, uint32_t data_size, uint8_t *oob, uint32_t oob_size);
+	int (*controller_ready)(struct nand_device *nand, int timeout);
+	int (*nand_ready)(struct nand_device *nand, int timeout);
 };
 
 #define NAND_DEVICE_COMMAND_HANDLER(name) static __NAND_DEVICE_COMMAND(name)
@@ -73,7 +73,7 @@ struct nand_ecclayout {
 	struct nand_oobfree oobfree[2];
 };
 
-typedef struct nand_device_s
+struct nand_device
 {
 	struct nand_flash_controller *controller;
 	void *controller_priv;
@@ -86,8 +86,8 @@ typedef struct nand_device_s
 	int use_raw;
 	int num_blocks;
 	struct nand_block *blocks;
-	struct nand_device_s *next;
-} nand_device_t;
+	struct nand_device *next;
+};
 
 /* NAND Flash Manufacturer ID Codes
  */
@@ -212,18 +212,18 @@ enum oob_formats
 };
 
 
-nand_device_t *get_nand_device_by_num(int num);
+struct nand_device *get_nand_device_by_num(int num);
 
-int nand_read_page_raw(struct nand_device_s *nand, uint32_t page,
+int nand_read_page_raw(struct nand_device *nand, uint32_t page,
 		uint8_t *data, uint32_t data_size, uint8_t *oob, uint32_t oob_size);
-int nand_write_page_raw(struct nand_device_s *nand, uint32_t page,
+int nand_write_page_raw(struct nand_device *nand, uint32_t page,
 		uint8_t *data, uint32_t data_size, uint8_t *oob, uint32_t oob_size);
 
-int nand_read_status(struct nand_device_s *nand, uint8_t *status);
+int nand_read_status(struct nand_device *nand, uint8_t *status);
 
-int nand_calculate_ecc(struct nand_device_s *nand,
+int nand_calculate_ecc(struct nand_device *nand,
 		const uint8_t *dat, uint8_t *ecc_code);
-int nand_calculate_ecc_kw(struct nand_device_s *nand,
+int nand_calculate_ecc_kw(struct nand_device *nand,
 		const uint8_t *dat, uint8_t *ecc_code);
 
 int nand_register_commands(struct command_context_s *cmd_ctx);
@@ -231,7 +231,7 @@ int nand_init(struct command_context_s *cmd_ctx);
 
 /// helper for parsing a nand device command argument string
 int nand_command_get_device_by_num(struct command_context_s *cmd_ctx,
-		const char *str, nand_device_t **nand);
+		const char *str, struct nand_device **nand);
 
 
 #define		ERROR_NAND_DEVICE_INVALID		(-1100)
diff --git a/src/flash/nand_ecc.c b/src/flash/nand_ecc.c
index 81d2beb..7aa1519 100644
--- a/src/flash/nand_ecc.c
+++ b/src/flash/nand_ecc.c
@@ -68,7 +68,7 @@ static const uint8_t nand_ecc_precalc_table[] = {
 /*
  * nand_calculate_ecc - Calculate 3-byte ECC for 256-byte block
  */
-int nand_calculate_ecc(struct nand_device_s *nand, const uint8_t *dat, uint8_t *ecc_code)
+int nand_calculate_ecc(struct nand_device *nand, const uint8_t *dat, uint8_t *ecc_code)
 {
 	uint8_t idx, reg1, reg2, reg3, tmp1, tmp2;
 	int i;
diff --git a/src/flash/nand_ecc_kw.c b/src/flash/nand_ecc_kw.c
index 2f6fc4a..a809b32 100644
--- a/src/flash/nand_ecc_kw.c
+++ b/src/flash/nand_ecc_kw.c
@@ -100,7 +100,7 @@ static void gf_build_log_exp_table(void)
  * expects the ECC to be computed backward, i.e. from the last byte down
  * to the first one.
  */
-int nand_calculate_ecc_kw(struct nand_device_s *nand, const uint8_t *data, uint8_t *ecc)
+int nand_calculate_ecc_kw(struct nand_device *nand, const uint8_t *data, uint8_t *ecc)
 {
 	unsigned int r7, r6, r5, r4, r3, r2, r1, r0;
 	int i;
diff --git a/src/flash/orion_nand.c b/src/flash/orion_nand.c
index d6519f2..0d4e1ea 100644
--- a/src/flash/orion_nand.c
+++ b/src/flash/orion_nand.c
@@ -49,7 +49,7 @@ struct orion_nand_controller
 		} \
 	} while (0)
 
-static int orion_nand_command(struct nand_device_s *nand, uint8_t command)
+static int orion_nand_command(struct nand_device *nand, uint8_t command)
 {
 	struct orion_nand_controller *hw = nand-&gt;controller_priv;
 	struct target *target = hw-&gt;target;
@@ -59,7 +59,7 @@ static int orion_nand_command(struct nand_device_s *nand, uint8_t command)
 	return ERROR_OK;
 }
 
-static int orion_nand_address(struct nand_device_s *nand, uint8_t address)
+static int orion_nand_address(struct nand_device *nand, uint8_t address)
 {
 	struct orion_nand_controller *hw = nand-&gt;controller_priv;
 	struct target *target = hw-&gt;target;
@@ -69,7 +69,7 @@ static int orion_nand_address(struct nand_device_s *nand, uint8_t address)
 	return ERROR_OK;
 }
 
-static int orion_nand_read(struct nand_device_s *nand, void *data)
+static int orion_nand_read(struct nand_device *nand, void *data)
 {
 	struct orion_nand_controller *hw = nand-&gt;controller_priv;
 	struct target *target = hw-&gt;target;
@@ -79,7 +79,7 @@ static int orion_nand_read(struct nand_device_s *nand, void *data)
 	return ERROR_OK;
 }
 
-static int orion_nand_write(struct nand_device_s *nand, uint16_t data)
+static int orion_nand_write(struct nand_device *nand, uint16_t data)
 {
 	struct orion_nand_controller *hw = nand-&gt;controller_priv;
 	struct target *target = hw-&gt;target;
@@ -89,14 +89,14 @@ static int orion_nand_write(struct nand_device_s *nand, uint16_t data)
 	return ERROR_OK;
 }
 
-static int orion_nand_slow_block_write(struct nand_device_s *nand, uint8_t *data, int size)
+static int orion_nand_slow_block_write(struct nand_device *nand, uint8_t *data, int size)
 {
 	while (size--)
 		orion_nand_write(nand, *data++);
 	return ERROR_OK;
 }
 
-static int orion_nand_fast_block_write(struct nand_device_s *nand, uint8_t *data, int size)
+static int orion_nand_fast_block_write(struct nand_device *nand, uint8_t *data, int size)
 {
 	struct orion_nand_controller *hw = nand-&gt;controller_priv;
 	int retval;
@@ -110,12 +110,12 @@ static int orion_nand_fast_block_write(struct nand_device_s *nand, uint8_t *data
 	return retval;
 }
 
-static int orion_nand_reset(struct nand_device_s *nand)
+static int orion_nand_reset(struct nand_device *nand)
 {
 	return orion_nand_command(nand, NAND_CMD_RESET);
 }
 
-static int orion_nand_controller_ready(struct nand_device_s *nand, int timeout)
+static int orion_nand_controller_ready(struct nand_device *nand, int timeout)
 {
 	return 1;
 }
@@ -164,7 +164,7 @@ NAND_DEVICE_COMMAND_HANDLER(orion_nand_device_command)
 	return ERROR_OK;
 }
 
-static int orion_nand_init(struct nand_device_s *nand)
+static int orion_nand_init(struct nand_device *nand)
 {
 	return ERROR_OK;
 }
diff --git a/src/flash/s3c2410_nand.c b/src/flash/s3c2410_nand.c
index 23795fb..6fe8bae 100644
--- a/src/flash/s3c2410_nand.c
+++ b/src/flash/s3c2410_nand.c
@@ -44,7 +44,7 @@ NAND_DEVICE_COMMAND_HANDLER(s3c2410_nand_device_command)
 	return ERROR_OK;
 }
 
-static int s3c2410_init(struct nand_device_s *nand)
+static int s3c2410_init(struct nand_device *nand)
 {
 	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
 	struct target *target = s3c24xx_info-&gt;target;
@@ -56,7 +56,7 @@ static int s3c2410_init(struct nand_device_s *nand)
 	return ERROR_OK;
 }
 
-static int s3c2410_write_data(struct nand_device_s *nand, uint16_t data)
+static int s3c2410_write_data(struct nand_device *nand, uint16_t data)
 {
 	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
 	struct target *target = s3c24xx_info-&gt;target;
@@ -70,7 +70,7 @@ static int s3c2410_write_data(struct nand_device_s *nand, uint16_t data)
 	return ERROR_OK;
 }
 
-static int s3c2410_read_data(struct nand_device_s *nand, void *data)
+static int s3c2410_read_data(struct nand_device *nand, void *data)
 {
 	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
 	struct target *target = s3c24xx_info-&gt;target;
@@ -84,7 +84,7 @@ static int s3c2410_read_data(struct nand_device_s *nand, void *data)
 	return ERROR_OK;
 }
 
-static int s3c2410_nand_ready(struct nand_device_s *nand, int timeout)
+static int s3c2410_nand_ready(struct nand_device *nand, int timeout)
 {
 	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
 	struct target *target = s3c24xx_info-&gt;target;
diff --git a/src/flash/s3c2412_nand.c b/src/flash/s3c2412_nand.c
index 8521932..2ca4cd3 100644
--- a/src/flash/s3c2412_nand.c
+++ b/src/flash/s3c2412_nand.c
@@ -44,7 +44,7 @@ NAND_DEVICE_COMMAND_HANDLER(s3c2412_nand_device_command)
 	return ERROR_OK;
 }
 
-static int s3c2412_init(struct nand_device_s *nand)
+static int s3c2412_init(struct nand_device *nand)
 {
 	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
 	struct target *target = s3c24xx_info-&gt;target;
diff --git a/src/flash/s3c2440_nand.c b/src/flash/s3c2440_nand.c
index 44ac3c2..65e5a51 100644
--- a/src/flash/s3c2440_nand.c
+++ b/src/flash/s3c2440_nand.c
@@ -45,7 +45,7 @@ NAND_DEVICE_COMMAND_HANDLER(s3c2440_nand_device_command)
 	return ERROR_OK;
 }
 
-static int s3c2440_init(struct nand_device_s *nand)
+static int s3c2440_init(struct nand_device *nand)
 {
 	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
 	struct target *target = s3c24xx_info-&gt;target;
@@ -61,7 +61,7 @@ static int s3c2440_init(struct nand_device_s *nand)
 	return ERROR_OK;
 }
 
-int s3c2440_nand_ready(struct nand_device_s *nand, int timeout)
+int s3c2440_nand_ready(struct nand_device *nand, int timeout)
 {
 	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
 	struct target *target = s3c24xx_info-&gt;target;
@@ -87,7 +87,7 @@ int s3c2440_nand_ready(struct nand_device_s *nand, int timeout)
 
 /* use the fact we can read/write 4 bytes in one go via a single 32bit op */
 
-int s3c2440_read_block_data(struct nand_device_s *nand, uint8_t *data, int data_size)
+int s3c2440_read_block_data(struct nand_device *nand, uint8_t *data, int data_size)
 {
 	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
 	struct target *target = s3c24xx_info-&gt;target;
@@ -123,7 +123,7 @@ int s3c2440_read_block_data(struct nand_device_s *nand, uint8_t *data, int data_
 	return ERROR_OK;
 }
 
-int s3c2440_write_block_data(struct nand_device_s *nand, uint8_t *data, int data_size)
+int s3c2440_write_block_data(struct nand_device *nand, uint8_t *data, int data_size)
 {
 	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
 	struct target *target = s3c24xx_info-&gt;target;
diff --git a/src/flash/s3c2443_nand.c b/src/flash/s3c2443_nand.c
index c144164..5afb26f 100644
--- a/src/flash/s3c2443_nand.c
+++ b/src/flash/s3c2443_nand.c
@@ -45,7 +45,7 @@ NAND_DEVICE_COMMAND_HANDLER(s3c2443_nand_device_command)
 	return ERROR_OK;
 }
 
-static int s3c2443_init(struct nand_device_s *nand)
+static int s3c2443_init(struct nand_device *nand)
 {
 	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
 	struct target *target = s3c24xx_info-&gt;target;
diff --git a/src/flash/s3c24xx_nand.c b/src/flash/s3c24xx_nand.c
index 5125fd2..5b2d191 100644
--- a/src/flash/s3c24xx_nand.c
+++ b/src/flash/s3c24xx_nand.c
@@ -57,7 +57,7 @@ int s3c24xx_register_commands(struct command_context_s *cmd_ctx)
 	return ERROR_OK;
 }
 
-int s3c24xx_reset(struct nand_device_s *nand)
+int s3c24xx_reset(struct nand_device *nand)
 {
 	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
 	struct target *target = s3c24xx_info-&gt;target;
@@ -72,7 +72,7 @@ int s3c24xx_reset(struct nand_device_s *nand)
 	return ERROR_OK;
 }
 
-int s3c24xx_command(struct nand_device_s *nand, uint8_t command)
+int s3c24xx_command(struct nand_device *nand, uint8_t command)
 {
 	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
 	struct target *target = s3c24xx_info-&gt;target;
@@ -87,7 +87,7 @@ int s3c24xx_command(struct nand_device_s *nand, uint8_t command)
 }
 
 
-int s3c24xx_address(struct nand_device_s *nand, uint8_t address)
+int s3c24xx_address(struct nand_device *nand, uint8_t address)
 {
 	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
 	struct target *target = s3c24xx_info-&gt;target;
@@ -101,7 +101,7 @@ int s3c24xx_address(struct nand_device_s *nand, uint8_t address)
 	return ERROR_OK;
 }
 
-int s3c24xx_write_data(struct nand_device_s *nand, uint16_t data)
+int s3c24xx_write_data(struct nand_device *nand, uint16_t data)
 {
 	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
 	struct target *target = s3c24xx_info-&gt;target;
@@ -115,7 +115,7 @@ int s3c24xx_write_data(struct nand_device_s *nand, uint16_t data)
 	return ERROR_OK;
 }
 
-int s3c24xx_read_data(struct nand_device_s *nand, void *data)
+int s3c24xx_read_data(struct nand_device *nand, void *data)
 {
 	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
 	struct target *target = s3c24xx_info-&gt;target;
@@ -129,7 +129,7 @@ int s3c24xx_read_data(struct nand_device_s *nand, void *data)
 	return ERROR_OK;
 }
 
-int s3c24xx_controller_ready(struct nand_device_s *nand, int timeout)
+int s3c24xx_controller_ready(struct nand_device *nand, int timeout)
 {
 	return 1;
 }
diff --git a/src/flash/s3c24xx_nand.h b/src/flash/s3c24xx_nand.h
index ed88591..41c95f5 100644
--- a/src/flash/s3c24xx_nand.h
+++ b/src/flash/s3c24xx_nand.h
@@ -47,7 +47,7 @@ struct s3c24xx_nand_controller
 
 #define S3C24XX_DEVICE_COMMAND() \
 		COMMAND_HELPER(s3c24xx_nand_device_command, \
-				struct nand_device_s *nand, \
+				struct nand_device *nand, \
 				struct s3c24xx_nand_controller **info)
 
 S3C24XX_DEVICE_COMMAND();
@@ -61,26 +61,26 @@ S3C24XX_DEVICE_COMMAND();
 
 int s3c24xx_register_commands(struct command_context_s *cmd_ctx);
 
-int s3c24xx_reset(struct nand_device_s *nand);
+int s3c24xx_reset(struct nand_device *nand);
 
-int s3c24xx_command(struct nand_device_s *nand, uint8_t command);
-int s3c24xx_address(struct nand_device_s *nand, uint8_t address);
+int s3c24xx_command(struct nand_device *nand, uint8_t command);
+int s3c24xx_address(struct nand_device *nand, uint8_t address);
 
-int s3c24xx_write_data(struct nand_device_s *nand, uint16_t data);
-int s3c24xx_read_data(struct nand_device_s *nand, void *data);
+int s3c24xx_write_data(struct nand_device *nand, uint16_t data);
+int s3c24xx_read_data(struct nand_device *nand, void *data);
 
-int s3c24xx_controller_ready(struct nand_device_s *nand, int tout);
+int s3c24xx_controller_ready(struct nand_device *nand, int tout);
 
 #define s3c24xx_write_page NULL
 #define s3c24xx_read_page NULL
 
 /* code shared between different controllers */
 
-int s3c2440_nand_ready(struct nand_device_s *nand, int timeout);
+int s3c2440_nand_ready(struct nand_device *nand, int timeout);
 
-int s3c2440_read_block_data(struct nand_device_s *nand,
+int s3c2440_read_block_data(struct nand_device *nand,
 		uint8_t *data, int data_size);
-int s3c2440_write_block_data(struct nand_device_s *nand,
+int s3c2440_write_block_data(struct nand_device *nand,
 		uint8_t *data, int data_size);
 
 #endif // S3C24xx_NAND_H

commit 0f1163e823c6ca3c2a81fa296157f5dde0635fea
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 10:11:13 2009 -0800

    target_t -&gt; struct target
    
    Remove misleading typedef and redundant suffix from struct target.

diff --git a/src/flash/aduc702x.c b/src/flash/aduc702x.c
index 8011e93..76f38b5 100644
--- a/src/flash/aduc702x.c
+++ b/src/flash/aduc702x.c
@@ -30,8 +30,8 @@
 
 
 static int aduc702x_build_sector_list(struct flash_bank_s *bank);
-static int aduc702x_check_flash_completion(target_t* target, unsigned int timeout_ms);
-static int aduc702x_set_write_enable(target_t *target, int enable);
+static int aduc702x_check_flash_completion(struct target* target, unsigned int timeout_ms);
+static int aduc702x_set_write_enable(struct target *target, int enable);
 
 #define ADUC702x_FLASH				0xfffff800
 #define ADUC702x_FLASH_FEESTA		(0*4)
@@ -98,7 +98,7 @@ static int aduc702x_erase(struct flash_bank_s *bank, int first, int last)
 	int x;
 	int count;
 	//uint32_t v;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 
         aduc702x_set_write_enable(target, 1);
 
@@ -159,7 +159,7 @@ static int aduc702x_protect(struct flash_bank_s *bank, int set, int first, int l
 static int aduc702x_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
 	struct aduc702x_flash_bank *aduc702x_info = bank-&gt;driver_priv;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint32_t buffer_size = 7000;
 	struct working_area *source;
 	uint32_t address = bank-&gt;base + offset;
@@ -305,7 +305,7 @@ static int aduc702x_write_single(struct flash_bank_s *bank, uint8_t *buffer, uin
 {
 	uint32_t x;
         uint8_t b;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 
         aduc702x_set_write_enable(target, 1);
 
@@ -379,7 +379,7 @@ static int aduc702x_info(struct flash_bank_s *bank, char *buf, int buf_size)
 
 /* sets FEEMOD bit 3
  * enable = 1 enables writes &amp; erases, 0 disables them */
-static int aduc702x_set_write_enable(target_t *target, int enable)
+static int aduc702x_set_write_enable(struct target *target, int enable)
 {
         // don't bother to preserve int enable bit here
         target_write_u16(target, ADUC702x_FLASH + ADUC702x_FLASH_FEEMOD, enable ? 8 : 0);
@@ -392,7 +392,7 @@ static int aduc702x_set_write_enable(target_t *target, int enable)
  *
  * this function sleeps 1ms between checks (after the first one),
  * so in some cases may slow things down without a usleep after the first read */
-static int aduc702x_check_flash_completion(target_t* target, unsigned int timeout_ms)
+static int aduc702x_check_flash_completion(struct target* target, unsigned int timeout_ms)
 {
         uint8_t v = 4;
 
diff --git a/src/flash/arm_nandio.c b/src/flash/arm_nandio.c
index 4f04831..63eb041 100644
--- a/src/flash/arm_nandio.c
+++ b/src/flash/arm_nandio.c
@@ -41,7 +41,7 @@
  */
 int arm_nandwrite(struct arm_nand_data *nand, uint8_t *data, int size)
 {
-	target_t		*target = nand-&gt;target;
+	struct target		*target = nand-&gt;target;
 	struct armv4_5_algorithm	algo;
 	struct arm	*armv4_5 = target-&gt;arch_info;
 	struct reg_param		reg_params[3];
diff --git a/src/flash/arm_nandio.h b/src/flash/arm_nandio.h
index cb8df42..a1bed32 100644
--- a/src/flash/arm_nandio.h
+++ b/src/flash/arm_nandio.h
@@ -6,7 +6,7 @@
 
 struct arm_nand_data {
 	/* target is proxy for some ARM core */
-	struct target_s		*target;
+	struct target		*target;
 
 	/* copy_area holds write-to-NAND loop and data to write */
 	struct working_area	*copy_area;
diff --git a/src/flash/at91sam3.c b/src/flash/at91sam3.c
index 335f8ab..3caf96c 100644
--- a/src/flash/at91sam3.c
+++ b/src/flash/at91sam3.c
@@ -215,7 +215,7 @@ struct sam3_chip {
 
 	// this is &quot;initialized&quot; from the global const structure
 	struct sam3_chip_details details;
-	target_t *target;
+	struct target *target;
 	struct sam3_cfg cfg;
 
 	struct membuf *mbuf;
@@ -233,7 +233,7 @@ static struct sam3_chip *all_sam3_chips;
 static struct sam3_chip *
 get_current_sam3(struct command_context_s *cmd_ctx)
 {
-	target_t *t;
+	struct target *t;
 	static struct sam3_chip *p;
 
 	t = get_current_target(cmd_ctx);
@@ -1393,7 +1393,7 @@ sam3_explain_mckr(struct sam3_chip *pChip)
 
 #if 0
 static struct sam3_chip *
-target2sam3(target_t *pTarget)
+target2sam3(struct target *pTarget)
 {
 	struct sam3_chip *pChip;
 
diff --git a/src/flash/at91sam7.c b/src/flash/at91sam7.c
index c0b516c..6c98953 100644
--- a/src/flash/at91sam7.c
+++ b/src/flash/at91sam7.c
@@ -55,9 +55,9 @@
 static int at91sam7_protect_check(struct flash_bank_s *bank);
 static int at91sam7_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count);
 
-static uint32_t at91sam7_get_flash_status(target_t *target, int bank_number);
-static void at91sam7_set_flash_mode(flash_bank_t *bank, int mode);
-static uint32_t at91sam7_wait_status_busy(flash_bank_t *bank, uint32_t waitbits, int timeout);
+static uint32_t at91sam7_get_flash_status(struct target *target, int bank_number);
+static void at91sam7_set_flash_mode(struct flash_bank_s *bank, int mode);
+static uint32_t at91sam7_wait_status_busy(struct flash_bank_s *bank, uint32_t waitbits, int timeout);
 static int at91sam7_flash_command(struct flash_bank_s *bank, uint8_t cmd, uint16_t pagen);
 
 static uint32_t MC_FMR[4] = { 0xFFFFFF60, 0xFFFFFF70, 0xFFFFFF80, 0xFFFFFF90 };
@@ -88,7 +88,7 @@ static long SRAMSIZ[16] = {
 #endif
 
 
-static uint32_t at91sam7_get_flash_status(target_t *target, int bank_number)
+static uint32_t at91sam7_get_flash_status(struct target *target, int bank_number)
 {
 	uint32_t fsr;
 	target_read_u32(target, MC_FSR[bank_number], &amp;fsr);
@@ -100,7 +100,7 @@ static uint32_t at91sam7_get_flash_status(target_t *target, int bank_number)
 static void at91sam7_read_clock_info(flash_bank_t *bank)
 {
 	struct at91sam7_flash_bank *at91sam7_info = bank-&gt;driver_priv;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint32_t mckr, mcfr, pllr, mor;
 	unsigned long tmp = 0, mainfreq;
 
@@ -180,7 +180,7 @@ static void at91sam7_set_flash_mode(flash_bank_t *bank, int mode)
 {
 	uint32_t fmr, fmcn = 0, fws = 0;
 	struct at91sam7_flash_bank *at91sam7_info = bank-&gt;driver_priv;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 
 	if (mode &amp;&amp; (mode != at91sam7_info-&gt;flashmode))
 	{
@@ -255,7 +255,7 @@ static int at91sam7_flash_command(struct flash_bank_s *bank, uint8_t cmd, uint16
 {
 	uint32_t fcr;
 	struct at91sam7_flash_bank *at91sam7_info = bank-&gt;driver_priv;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 
 	fcr = (0x5A &lt;&lt; 24) | ((pagen&amp;0x3FF) &lt;&lt; 8) | cmd;
 	target_write_u32(target, MC_FCR[bank-&gt;bank_number], fcr);
@@ -284,7 +284,7 @@ static int at91sam7_read_part_info(struct flash_bank_s *bank)
 {
 	flash_bank_t *t_bank = bank;
 	struct at91sam7_flash_bank *at91sam7_info;
-	target_t *target = t_bank-&gt;target;
+	struct target *target = t_bank-&gt;target;
 
 	uint16_t bnk, sec;
 	uint16_t arch;
@@ -597,7 +597,7 @@ static int at91sam7_read_part_info(struct flash_bank_s *bank)
 
 static int at91sam7_erase_check(struct flash_bank_s *bank)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint16_t retval;
 	uint32_t blank;
 	uint16_t fast_check;
@@ -715,7 +715,7 @@ FLASH_BANK_COMMAND_HANDLER(at91sam7_flash_bank_command)
 {
 	flash_bank_t *t_bank = bank;
 	struct at91sam7_flash_bank *at91sam7_info;
-	target_t *target = t_bank-&gt;target;
+	struct target *target = t_bank-&gt;target;
 
 	uint32_t base_address;
 	uint32_t bank_size;
@@ -949,7 +949,7 @@ static int at91sam7_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t o
 {
 	int retval;
 	struct at91sam7_flash_bank *at91sam7_info = bank-&gt;driver_priv;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint32_t dst_min_alignment, wcount, bytes_remaining = count;
 	uint32_t first_page, last_page, pagen, buffer_pos;
 
diff --git a/src/flash/avrf.c b/src/flash/avrf.c
index 91aedb8..f4a7d72 100644
--- a/src/flash/avrf.c
+++ b/src/flash/avrf.c
@@ -212,7 +212,7 @@ static int avrf_protect(struct flash_bank_s *bank, int set, int first, int last)
 
 static int avrf_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	struct avr_common *avr = target-&gt;arch_info;
 	uint32_t cur_size, cur_buffer_size, page_size;
 
@@ -263,7 +263,7 @@ static int avrf_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offse
 #define EXTRACT_VER(X)  (((X) &amp; 0xf0000000) &gt;&gt; 28)
 static int avrf_probe(struct flash_bank_s *bank)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	struct avrf_flash_bank *avrf_info = bank-&gt;driver_priv;
 	struct avr_common *avr = target-&gt;arch_info;
 	struct avrf_type *avr_info = NULL;
@@ -345,7 +345,7 @@ static int avrf_protect_check(struct flash_bank_s *bank)
 
 static int avrf_info(struct flash_bank_s *bank, char *buf, int buf_size)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	struct avr_common *avr = target-&gt;arch_info;
 	struct avrf_type *avr_info = NULL;
 	int i;
@@ -396,7 +396,7 @@ static int avrf_info(struct flash_bank_s *bank, char *buf, int buf_size)
 
 static int avrf_mass_erase(struct flash_bank_s *bank)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	struct avr_common *avr = target-&gt;arch_info;
 
 	if (target-&gt;state != TARGET_HALTED)
diff --git a/src/flash/cfi.c b/src/flash/cfi.c
index 6a193e2..6ab84f1 100644
--- a/src/flash/cfi.c
+++ b/src/flash/cfi.c
@@ -136,7 +136,7 @@ static void cfi_command(flash_bank_t *bank, uint8_t cmd, uint8_t *cmd_buf)
  */
 static uint8_t cfi_query_u8(flash_bank_t *bank, int sector, uint32_t offset)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint8_t data[CFI_MAX_BUS_WIDTH];
 
 	target_read_memory(target, flash_address(bank, sector, offset), bank-&gt;bus_width, 1, data);
@@ -153,7 +153,7 @@ static uint8_t cfi_query_u8(flash_bank_t *bank, int sector, uint32_t offset)
  */
 static uint8_t cfi_get_u8(flash_bank_t *bank, int sector, uint32_t offset)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint8_t data[CFI_MAX_BUS_WIDTH];
 	int i;
 
@@ -178,7 +178,7 @@ static uint8_t cfi_get_u8(flash_bank_t *bank, int sector, uint32_t offset)
 
 static uint16_t cfi_query_u16(flash_bank_t *bank, int sector, uint32_t offset)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	uint8_t data[CFI_MAX_BUS_WIDTH * 2];
 
@@ -200,7 +200,7 @@ static uint16_t cfi_query_u16(flash_bank_t *bank, int sector, uint32_t offset)
 
 static uint32_t cfi_query_u32(flash_bank_t *bank, int sector, uint32_t offset)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	uint8_t data[CFI_MAX_BUS_WIDTH * 4];
 
@@ -223,7 +223,7 @@ static uint32_t cfi_query_u32(flash_bank_t *bank, int sector, uint32_t offset)
 
 static void cfi_intel_clear_status_register(flash_bank_t *bank)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint8_t command[8];
 
 	if (target-&gt;state != TARGET_HALTED)
@@ -317,7 +317,7 @@ static int cfi_read_intel_pri_ext(flash_bank_t *bank)
 	int retval;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	struct cfi_intel_pri_ext *pri_ext = malloc(sizeof(struct cfi_intel_pri_ext));
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint8_t command[8];
 
 	cfi_info-&gt;pri_ext = pri_ext;
@@ -383,7 +383,7 @@ static int cfi_read_spansion_pri_ext(flash_bank_t *bank)
 	int retval;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	struct cfi_spansion_pri_ext *pri_ext = malloc(sizeof(struct cfi_spansion_pri_ext));
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint8_t command[8];
 
 	cfi_info-&gt;pri_ext = pri_ext;
@@ -449,7 +449,7 @@ static int cfi_read_atmel_pri_ext(flash_bank_t *bank)
 	struct cfi_atmel_pri_ext atmel_pri_ext;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	struct cfi_spansion_pri_ext *pri_ext = malloc(sizeof(struct cfi_spansion_pri_ext));
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint8_t command[8];
 
 	/* ATMEL devices use the same CFI primary command set (0x2) as AMD/Spansion,
@@ -656,7 +656,7 @@ static int cfi_intel_erase(struct flash_bank_s *bank, int first, int last)
 {
 	int retval;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint8_t command[8];
 	int i;
 
@@ -701,7 +701,7 @@ static int cfi_spansion_erase(struct flash_bank_s *bank, int first, int last)
 	int retval;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	struct cfi_spansion_pri_ext *pri_ext = cfi_info-&gt;pri_ext;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint8_t command[8];
 	int i;
 
@@ -802,7 +802,7 @@ static int cfi_intel_protect(struct flash_bank_s *bank, int set, int first, int
 	int retval;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	struct cfi_intel_pri_ext *pri_ext = cfi_info-&gt;pri_ext;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint8_t command[8];
 	int retry = 0;
 	int i;
@@ -949,7 +949,7 @@ static int cfi_protect(struct flash_bank_s *bank, int set, int first, int last)
 /* FIXME Replace this by a simple memcpy() - still unsure about sideeffects */
 static void cfi_add_byte(struct flash_bank_s *bank, uint8_t *word, uint8_t byte)
 {
-	/* target_t *target = bank-&gt;target; */
+	/* struct target *target = bank-&gt;target; */
 
 	int i;
 
@@ -982,7 +982,7 @@ static void cfi_add_byte(struct flash_bank_s *bank, uint8_t *word, uint8_t byte)
 
 /* Convert code image to target endian */
 /* FIXME create general block conversion fcts in target.c?) */
-static void cfi_fix_code_endian(target_t *target, uint8_t *dest, const uint32_t *src, uint32_t count)
+static void cfi_fix_code_endian(struct target *target, uint8_t *dest, const uint32_t *src, uint32_t count)
 {
 	uint32_t i;
 	for (i = 0; i&lt; count; i++)
@@ -995,7 +995,7 @@ static void cfi_fix_code_endian(target_t *target, uint8_t *dest, const uint32_t
 
 static uint32_t cfi_command_val(flash_bank_t *bank, uint8_t cmd)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 
 	uint8_t buf[CFI_MAX_BUS_WIDTH];
 	cfi_command(bank, cmd, buf);
@@ -1019,7 +1019,7 @@ static uint32_t cfi_command_val(flash_bank_t *bank, uint8_t cmd)
 static int cfi_intel_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint32_t address, uint32_t count)
 {
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	struct reg_param reg_params[7];
 	struct armv4_5_algorithm armv4_5_info;
 	struct working_area *source;
@@ -1264,7 +1264,7 @@ static int cfi_spansion_write_block(struct flash_bank_s *bank, uint8_t *buffer,
 {
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	struct cfi_spansion_pri_ext *pri_ext = cfi_info-&gt;pri_ext;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	struct reg_param reg_params[10];
 	struct armv4_5_algorithm armv4_5_info;
 	struct working_area *source;
@@ -1563,7 +1563,7 @@ static int cfi_intel_write_word(struct flash_bank_s *bank, uint8_t *word, uint32
 {
 	int retval;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint8_t command[8];
 
 	cfi_intel_clear_status_register(bank);
@@ -1597,7 +1597,7 @@ static int cfi_intel_write_words(struct flash_bank_s *bank, uint8_t *word, uint3
 {
 	int retval;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint8_t command[8];
 
 	/* Calculate buffer size and boundary mask */
@@ -1691,7 +1691,7 @@ static int cfi_spansion_write_word(struct flash_bank_s *bank, uint8_t *word, uin
 	int retval;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	struct cfi_spansion_pri_ext *pri_ext = cfi_info-&gt;pri_ext;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint8_t command[8];
 
 	cfi_command(bank, 0xaa, command);
@@ -1736,7 +1736,7 @@ static int cfi_spansion_write_words(struct flash_bank_s *bank, uint8_t *word, ui
 {
 	int retval;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint8_t command[8];
 	struct cfi_spansion_pri_ext *pri_ext = cfi_info-&gt;pri_ext;
 
@@ -1869,7 +1869,7 @@ static int cfi_write_words(struct flash_bank_s *bank, uint8_t *word, uint32_t wo
 int cfi_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint32_t address = bank-&gt;base + offset;	/* address of first byte to be programmed */
 	uint32_t write_p, copy_p;
 	int align;	/* number of unaligned bytes */
@@ -2121,7 +2121,7 @@ static void cfi_fixup_0002_unlock_addresses(flash_bank_t *bank, void *param)
 static int cfi_query_string(struct flash_bank_s *bank, int address)
 {
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	int retval;
 	uint8_t command[8];
 
@@ -2159,7 +2159,7 @@ static int cfi_query_string(struct flash_bank_s *bank, int address)
 static int cfi_probe(struct flash_bank_s *bank)
 {
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint8_t command[8];
 	int num_sectors = 0;
 	int i;
@@ -2449,7 +2449,7 @@ static int cfi_intel_protect_check(struct flash_bank_s *bank)
 	int retval;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	struct cfi_intel_pri_ext *pri_ext = cfi_info-&gt;pri_ext;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint8_t command[CFI_MAX_BUS_WIDTH];
 	int i;
 
@@ -2482,7 +2482,7 @@ static int cfi_spansion_protect_check(struct flash_bank_s *bank)
 	int retval;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	struct cfi_spansion_pri_ext *pri_ext = cfi_info-&gt;pri_ext;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint8_t command[8];
 	int i;
 
diff --git a/src/flash/davinci_nand.c b/src/flash/davinci_nand.c
index d4c1619..cc14420 100644
--- a/src/flash/davinci_nand.c
+++ b/src/flash/davinci_nand.c
@@ -38,7 +38,7 @@ enum ecc {
 };
 
 struct davinci_nand {
-	target_t	*target;
+	struct target	*target;
 
 	uint8_t		chipsel;	/* chipselect 0..3 == CS2..CS5 */
 	uint8_t		eccmode;
@@ -69,7 +69,7 @@ struct davinci_nand {
 #define NANDERRADDR	0xd0		/* 4-bit ECC err addr, 1st of 2 */
 #define NANDERRVAL	0xd8		/* 4-bit ECC err value, 1st of 2 */
 
-static int halted(target_t *target, const char *label)
+static int halted(struct target *target, const char *label)
 {
 	if (target-&gt;state == TARGET_HALTED)
 		return true;
@@ -86,7 +86,7 @@ static int davinci_register_commands(struct command_context_s *cmd_ctx)
 static int davinci_init(struct nand_device_s *nand)
 {
 	struct davinci_nand *info = nand-&gt;controller_priv;
-	target_t *target = info-&gt;target;
+	struct target *target = info-&gt;target;
 	uint32_t nandfcr;
 
 	if (!halted(target, &quot;init&quot;))
@@ -116,7 +116,7 @@ static int davinci_reset(struct nand_device_s *nand)
 static int davinci_nand_ready(struct nand_device_s *nand, int timeout)
 {
 	struct davinci_nand *info = nand-&gt;controller_priv;
-	target_t *target = info-&gt;target;
+	struct target *target = info-&gt;target;
 	uint32_t nandfsr;
 
 	/* NOTE: return code is zero/error, else success; not ERROR_* */
@@ -139,7 +139,7 @@ static int davinci_nand_ready(struct nand_device_s *nand, int timeout)
 static int davinci_command(struct nand_device_s *nand, uint8_t command)
 {
 	struct davinci_nand *info = nand-&gt;controller_priv;
-	target_t *target = info-&gt;target;
+	struct target *target = info-&gt;target;
 
 	if (!halted(target, &quot;command&quot;))
 		return ERROR_NAND_OPERATION_FAILED;
@@ -151,7 +151,7 @@ static int davinci_command(struct nand_device_s *nand, uint8_t command)
 static int davinci_address(struct nand_device_s *nand, uint8_t address)
 {
 	struct davinci_nand *info = nand-&gt;controller_priv;
-	target_t *target = info-&gt;target;
+	struct target *target = info-&gt;target;
 
 	if (!halted(target, &quot;address&quot;))
 		return ERROR_NAND_OPERATION_FAILED;
@@ -163,7 +163,7 @@ static int davinci_address(struct nand_device_s *nand, uint8_t address)
 static int davinci_write_data(struct nand_device_s *nand, uint16_t data)
 {
 	struct davinci_nand *info = nand-&gt;controller_priv;
-	target_t *target = info-&gt;target;
+	struct target *target = info-&gt;target;
 
 	if (!halted(target, &quot;write_data&quot;))
 		return ERROR_NAND_OPERATION_FAILED;
@@ -175,7 +175,7 @@ static int davinci_write_data(struct nand_device_s *nand, uint16_t data)
 static int davinci_read_data(struct nand_device_s *nand, void *data)
 {
 	struct davinci_nand *info = nand-&gt;controller_priv;
-	target_t *target = info-&gt;target;
+	struct target *target = info-&gt;target;
 
 	if (!halted(target, &quot;read_data&quot;))
 		return ERROR_NAND_OPERATION_FAILED;
@@ -190,7 +190,7 @@ static int davinci_read_block_data(struct nand_device_s *nand,
 		uint8_t *data, int data_size)
 {
 	struct davinci_nand *info = nand-&gt;controller_priv;
-	target_t *target = info-&gt;target;
+	struct target *target = info-&gt;target;
 	uint32_t nfdata = info-&gt;data;
 	uint32_t tmp;
 
@@ -223,7 +223,7 @@ static int davinci_write_block_data(struct nand_device_s *nand,
 		uint8_t *data, int data_size)
 {
 	struct davinci_nand *info = nand-&gt;controller_priv;
-	target_t *target = info-&gt;target;
+	struct target *target = info-&gt;target;
 	uint32_t nfdata = info-&gt;data;
 	uint32_t tmp;
 	int status;
@@ -322,7 +322,7 @@ static int davinci_read_page(struct nand_device_s *nand, uint32_t page,
 static void davinci_write_pagecmd(struct nand_device_s *nand, uint8_t cmd, uint32_t page)
 {
 	struct davinci_nand *info = nand-&gt;controller_priv;
-	target_t *target = info-&gt;target;
+	struct target *target = info-&gt;target;
 	int page3 = nand-&gt;address_cycles - (nand-&gt;page_size == 512);
 
 	/* write command ({page,otp}x{read,program} */
@@ -346,7 +346,7 @@ static int davinci_writepage_tail(struct nand_device_s *nand,
 		uint8_t *oob, uint32_t oob_size)
 {
 	struct davinci_nand *info = nand-&gt;controller_priv;
-	target_t *target = info-&gt;target;
+	struct target *target = info-&gt;target;
 	uint8_t status;
 
 	if (oob_size)
@@ -379,7 +379,7 @@ static int davinci_write_page_ecc1(struct nand_device_s *nand, uint32_t page,
 {
 	unsigned oob_offset;
 	struct davinci_nand *info = nand-&gt;controller_priv;
-	target_t *target = info-&gt;target;
+	struct target *target = info-&gt;target;
 	const uint32_t fcr_addr = info-&gt;aemif + NANDFCR;
 	const uint32_t ecc1_addr = info-&gt;aemif + NANDFECC + (4 * info-&gt;chipsel);
 	uint32_t fcr, ecc1;
@@ -467,7 +467,7 @@ static int davinci_write_page_ecc4(struct nand_device_s *nand, uint32_t page,
 
 	struct davinci_nand *info = nand-&gt;controller_priv;
 	const uint8_t *l;
-	target_t *target = info-&gt;target;
+	struct target *target = info-&gt;target;
 	const uint32_t fcr_addr = info-&gt;aemif + NANDFCR;
 	const uint32_t ecc4_addr = info-&gt;aemif + NAND4BITECC;
 	uint32_t fcr, ecc4;
@@ -547,7 +547,7 @@ static int davinci_write_page_ecc4infix(struct nand_device_s *nand, uint32_t pag
 		uint8_t *data, uint32_t data_size, uint8_t *oob, uint32_t oob_size)
 {
 	struct davinci_nand *info = nand-&gt;controller_priv;
-	target_t *target = info-&gt;target;
+	struct target *target = info-&gt;target;
 	const uint32_t fcr_addr = info-&gt;aemif + NANDFCR;
 	const uint32_t ecc4_addr = info-&gt;aemif + NAND4BITECC;
 	uint32_t fcr, ecc4;
@@ -632,7 +632,7 @@ static int davinci_read_page_ecc4infix(struct nand_device_s *nand, uint32_t page
 NAND_DEVICE_COMMAND_HANDLER(davinci_nand_device_command)
 {
 	struct davinci_nand *info;
-	target_t *target;
+	struct target *target;
 	unsigned long chip, aemif;
 	enum ecc eccmode;
 	int chipsel;
diff --git a/src/flash/ecos.c b/src/flash/ecos.c
index 57df1e7..ad27a45 100644
--- a/src/flash/ecos.c
+++ b/src/flash/ecos.c
@@ -35,7 +35,7 @@ static int ecosflash_handle_gpnvm_command(struct command_context_s *cmd_ctx, cha
 
 struct ecosflash_flash_bank
 {
-	struct target_s *target;
+	struct target *target;
 	struct working_area *write_algorithm;
 	struct working_area *erase_check_algorithm;
 	char *driverPath;
@@ -157,7 +157,7 @@ static int loadDriver(struct ecosflash_flash_bank *info)
 
 	image.base_address_set = 0;
 	image.start_address_set = 0;
-	target_t *target = info-&gt;target;
+	struct target *target = info-&gt;target;
 	int retval;
 
 	if ((retval = image_open(&amp;image, info-&gt;driverPath, NULL)) != ERROR_OK)
@@ -204,7 +204,7 @@ static int runCode(struct ecosflash_flash_bank *info,
 		/* timeout in ms */
 		int timeout)
 {
-	target_t *target = info-&gt;target;
+	struct target *target = info-&gt;target;
 
 	struct reg_param reg_params[3];
 	struct armv4_5_algorithm armv4_5_info;
@@ -272,7 +272,7 @@ static int eCosBoard_erase(struct ecosflash_flash_bank *info, uint32_t address,
 
 static int eCosBoard_flash(struct ecosflash_flash_bank *info, void *data, uint32_t address, uint32_t len)
 {
-	target_t *target = info-&gt;target;
+	struct target *target = info-&gt;target;
 	const int chunk = 8192;
 	int retval = ERROR_OK;
 	int timeout = (chunk / 20480 + 1) * 1000; /*asume 20 KB/s + 1 second*/
diff --git a/src/flash/faux.c b/src/flash/faux.c
index 52d3728..0a52f5f 100644
--- a/src/flash/faux.c
+++ b/src/flash/faux.c
@@ -27,7 +27,7 @@
 
 struct faux_flash_bank
 {
-	struct target_s *target;
+	struct target *target;
 	uint8_t *memory;
 	uint32_t start_address;
 };
diff --git a/src/flash/flash.c b/src/flash/flash.c
index a8da556..5374532 100644
--- a/src/flash/flash.c
+++ b/src/flash/flash.c
@@ -31,7 +31,7 @@
 #include &quot;image.h&quot;
 #include &quot;time_support.h&quot;
 
-static int flash_write_unlock(target_t *target, struct image *image, uint32_t *written, int erase, bool unlock);
+static int flash_write_unlock(struct target *target, struct image *image, uint32_t *written, int erase, bool unlock);
 
 /* flash drivers
  */
@@ -220,7 +220,7 @@ COMMAND_HANDLER(handle_flash_bank_command)
 	int retval;
 	int i;
 	int found = 0;
-	target_t *target;
+	struct target *target;
 
 	if (argc &lt; 6)
 	{
@@ -448,7 +448,7 @@ COMMAND_HANDLER(handle_flash_erase_address_command)
 	int address;
 	int length;
 
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 
 	if (argc != 2)
 		return ERROR_COMMAND_SYNTAX_ERROR;
@@ -615,7 +615,7 @@ COMMAND_HANDLER(handle_flash_protect_command)
 
 COMMAND_HANDLER(handle_flash_write_image_command)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 
 	struct image image;
 	uint32_t written;
@@ -714,7 +714,7 @@ COMMAND_HANDLER(handle_flash_fill_command)
 	uint32_t wrote = 0;
 	uint32_t cur_size = 0;
 	uint32_t chunk_count;
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	uint32_t i;
 	uint32_t wordsize;
 
@@ -874,7 +874,7 @@ void flash_set_dirty(void)
 }
 
 /* lookup flash bank by address */
-flash_bank_t *get_flash_bank_by_addr(target_t *target, uint32_t addr)
+struct flash_bank_s *get_flash_bank_by_addr(struct target *target, uint32_t addr)
 {
 	flash_bank_t *c;
 
@@ -898,7 +898,7 @@ flash_bank_t *get_flash_bank_by_addr(target_t *target, uint32_t addr)
 }
 
 /* erase given flash region, selects proper bank according to target and address */
-static int flash_iterate_address_range(target_t *target, uint32_t addr, uint32_t length,
+static int flash_iterate_address_range(struct target *target, uint32_t addr, uint32_t length,
 		int (*callback)(struct flash_bank_s *bank, int first, int last))
 {
 	flash_bank_t *c;
@@ -949,7 +949,7 @@ static int flash_iterate_address_range(target_t *target, uint32_t addr, uint32_t
 
 
 
-int flash_erase_address_range(target_t *target, uint32_t addr, uint32_t length)
+int flash_erase_address_range(struct target *target, uint32_t addr, uint32_t length)
 {
 	return flash_iterate_address_range(target, addr, length, &amp;flash_driver_erase);
 }
@@ -959,14 +959,14 @@ static int flash_driver_unprotect(struct flash_bank_s *bank, int first, int last
 	return flash_driver_protect(bank, 0, first, last);
 }
 
-static int flash_unlock_address_range(target_t *target, uint32_t addr, uint32_t length)
+static int flash_unlock_address_range(struct target *target, uint32_t addr, uint32_t length)
 {
 	return flash_iterate_address_range(target, addr, length, &amp;flash_driver_unprotect);
 }
 
 
 /* write (optional verify) an image to flash memory of the given target */
-static int flash_write_unlock(target_t *target, struct image *image, uint32_t *written, int erase, bool unlock)
+static int flash_write_unlock(struct target *target, struct image *image, uint32_t *written, int erase, bool unlock)
 {
 	int retval = ERROR_OK;
 
@@ -1125,14 +1125,14 @@ static int flash_write_unlock(target_t *target, struct image *image, uint32_t *w
 	return retval;
 }
 
-int flash_write(target_t *target, struct image *image, uint32_t *written, int erase)
+int flash_write(struct target *target, struct image *image, uint32_t *written, int erase)
 {
 	return flash_write_unlock(target, image, written, erase, false);
 }
 
 int default_flash_mem_blank_check(struct flash_bank_s *bank)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint8_t buffer[1024];
 	int buffer_size = sizeof(buffer);
 	int i;
@@ -1179,7 +1179,7 @@ int default_flash_mem_blank_check(struct flash_bank_s *bank)
 
 int default_flash_blank_check(struct flash_bank_s *bank)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	int i;
 	int retval;
 	int fast_check = 0;
diff --git a/src/flash/flash.h b/src/flash/flash.h
index eeacc75..b5af717 100644
--- a/src/flash/flash.h
+++ b/src/flash/flash.h
@@ -240,7 +240,7 @@ struct flash_driver
  */
 typedef struct flash_bank_s
 {
-	struct target_s *target; /**&lt; Target to which this bank belongs. */
+	struct target *target; /**&lt; Target to which this bank belongs. */
 
 	struct flash_driver *driver; /**&lt; Driver for this bank. */
 	void *driver_priv; /**&lt; Private driver storage pointer */
@@ -273,7 +273,7 @@ int flash_init_drivers(struct command_context_s *cmd_ctx);
  * Erases @a length bytes in the @a target flash, starting at @a addr.
  * @returns ERROR_OK if successful; otherwise, an error code.
  */
-int flash_erase_address_range(struct target_s *target,
+int flash_erase_address_range(struct target *target,
 		uint32_t addr, uint32_t length);
 /**
  * Writes @a image into the @a target flash.  The @a written parameter
@@ -285,7 +285,7 @@ int flash_erase_address_range(struct target_s *target,
  * erase the corresponding banks or sectors before programming.
  * @returns ERROR_OK if successful; otherwise, an error code.
  */
-int flash_write(struct target_s *target,
+int flash_write(struct target *target,
 		struct image *image, uint32_t *written, int erase);
 /**
  * Forces targets to re-examine their erase/protection state.
@@ -337,7 +337,7 @@ flash_bank_t *get_flash_bank_by_num_noprobe(int num);
  * @param addr An address that is within the range of the bank.
  * @returns The flash_bank_t located at @a addr, or NULL.
  */
-flash_bank_t *get_flash_bank_by_addr(struct target_s *target, uint32_t addr);
+struct flash_bank_s *get_flash_bank_by_addr(struct target *target, uint32_t addr);
 
 #define ERROR_FLASH_BANK_INVALID			(-900)
 #define ERROR_FLASH_SECTOR_INVALID			(-901)
diff --git a/src/flash/lpc2000.c b/src/flash/lpc2000.c
index 4ad3e0e..2061726 100644
--- a/src/flash/lpc2000.c
+++ b/src/flash/lpc2000.c
@@ -238,7 +238,7 @@ static int lpc2000_iap_call(flash_bank_t *bank, int code, uint32_t param_table[5
 {
 	int retval;
 	struct lpc2000_flash_bank *lpc2000_info = bank-&gt;driver_priv;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	struct mem_param mem_params[2];
 	struct reg_param reg_params[5];
 	struct armv4_5_algorithm armv4_5_info; /* for LPC2000 */
@@ -538,7 +538,7 @@ static int lpc2000_protect(struct flash_bank_s *bank, int set, int first, int la
 static int lpc2000_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
 	struct lpc2000_flash_bank *lpc2000_info = bank-&gt;driver_priv;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint32_t dst_min_alignment;
 	uint32_t bytes_remaining = count;
 	uint32_t bytes_written = 0;
diff --git a/src/flash/lpc288x.c b/src/flash/lpc288x.c
index fd89600..dbd0dab 100644
--- a/src/flash/lpc288x.c
+++ b/src/flash/lpc288x.c
@@ -84,15 +84,15 @@
 /* F_CLK_TIME */
 #define FCT_CLK_DIV_MASK    0x0FFF
 
-static uint32_t lpc288x_wait_status_busy(flash_bank_t *bank, int timeout);
-static void lpc288x_load_timer(int erase, struct target_s *target);
+static uint32_t lpc288x_wait_status_busy(struct flash_bank_s *bank, int timeout);
+static void lpc288x_load_timer(int erase, struct target *target);
 static void lpc288x_set_flash_clk(struct flash_bank_s *bank);
 static uint32_t lpc288x_system_ready(struct flash_bank_s *bank);
 
 static uint32_t lpc288x_wait_status_busy(flash_bank_t *bank, int timeout)
 {
 	uint32_t status;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	do
 	{
 		alive_sleep(1);
@@ -112,7 +112,7 @@ static uint32_t lpc288x_wait_status_busy(flash_bank_t *bank, int timeout)
 static int lpc288x_read_part_info(struct flash_bank_s *bank)
 {
 	struct lpc288x_flash_bank *lpc288x_info = bank-&gt;driver_priv;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint32_t cidr;
 
 	int i = 0;
@@ -205,7 +205,7 @@ static void lpc288x_set_flash_clk(struct flash_bank_s *bank)
  * LOAD_TIMER_WRITE		FPT_TIME	= ((1,000,000 / AHB tcyc (in ns)) - 2) / 512
  *									= 23 (75) (AN10548 72 - is this wrong?)
  * TODO: Sort out timing calcs ;) */
-static void lpc288x_load_timer(int erase, struct target_s *target)
+static void lpc288x_load_timer(int erase, struct target *target)
 {
 	if (erase == LOAD_TIMER_ERASE)
 	{
@@ -249,7 +249,7 @@ static int lpc288x_erase(struct flash_bank_s *bank, int first, int last)
 {
 	uint32_t status;
 	int sector;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 
 	status = lpc288x_system_ready(bank);    /* probed? halted? */
 	if (status != ERROR_OK)
@@ -290,7 +290,7 @@ static int lpc288x_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t of
 {
 	uint8_t page_buffer[FLASH_PAGE_SIZE];
 	uint32_t status, source_offset,dest_offset;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint32_t bytes_remaining = count;
 	uint32_t first_sector, last_sector, sector, page;
 	int i;
@@ -435,7 +435,7 @@ static int lpc288x_protect(struct flash_bank_s *bank, int set, int first, int la
 {
 	int lockregion, status;
 	uint32_t value;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 
 	/* probed? halted? */
 	status = lpc288x_system_ready(bank);
diff --git a/src/flash/lpc2900.c b/src/flash/lpc2900.c
index 5b6a5be..49d0259 100644
--- a/src/flash/lpc2900.c
+++ b/src/flash/lpc2900.c
@@ -199,7 +199,7 @@ static uint32_t lpc2900_wait_status( flash_bank_t *bank,
                                      int timeout )
 {
 	uint32_t int_status;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 
 
 	do
@@ -283,7 +283,7 @@ static uint32_t lpc2900_read_security_status( struct flash_bank_s *bank )
 		return status;
 	}
 
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 
 	/* Enable ISS access */
 	target_write_u32(target, FCTR, FCTR_FS_CS | FCTR_FS_WEB | FCTR_FS_ISS);
@@ -361,7 +361,7 @@ static uint32_t lpc2900_run_bist128(struct flash_bank_s *bank,
                                     uint32_t addr_to,
                                     uint32_t (*signature)[4] )
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 
 	/* Clear END_OF_MISR interrupt status */
 	target_write_u32( target, INT_CLR_STATUS, INTSRC_END_OF_MISR );
@@ -436,7 +436,7 @@ static int lpc2900_write_index_page( struct flash_bank_s *bank,
 	}
 
 	/* Get target, and check if it's halted */
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	if( target-&gt;state != TARGET_HALTED )
 	{
 		LOG_ERROR( &quot;Target not halted&quot; );
@@ -597,7 +597,7 @@ COMMAND_HANDLER(lpc2900_handle_read_custom_command)
 	lpc2900_info-&gt;risky = 0;
 
 	/* Get target, and check if it's halted */
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	if( target-&gt;state != TARGET_HALTED )
 	{
 		LOG_ERROR( &quot;Target not halted&quot; );
@@ -710,7 +710,7 @@ COMMAND_HANDLER(lpc2900_handle_write_custom_command)
 	lpc2900_info-&gt;risky = 0;
 
 	/* Get target, and check if it's halted */
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	if (target-&gt;state != TARGET_HALTED)
 	{
 		LOG_ERROR(&quot;Target not halted&quot;);
@@ -1075,7 +1075,7 @@ static int lpc2900_erase(struct flash_bank_s *bank, int first, int last)
 	uint32_t status;
 	int sector;
 	int last_unsecured_sector;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	struct lpc2900_flash_bank *lpc2900_info = bank-&gt;driver_priv;
 
 
@@ -1205,7 +1205,7 @@ static int lpc2900_write(struct flash_bank_s *bank, uint8_t *buffer,
 	uint8_t page[FLASH_PAGE_SIZE];
 	uint32_t status;
 	uint32_t num_bytes;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	struct lpc2900_flash_bank *lpc2900_info = bank-&gt;driver_priv;
 	int sector;
 	int retval;
@@ -1551,7 +1551,7 @@ static int lpc2900_write(struct flash_bank_s *bank, uint8_t *buffer,
 static int lpc2900_probe(struct flash_bank_s *bank)
 {
 	struct lpc2900_flash_bank *lpc2900_info = bank-&gt;driver_priv;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	int i = 0;
 	uint32_t offset;
 
diff --git a/src/flash/lpc3180_nand_controller.c b/src/flash/lpc3180_nand_controller.c
index 016fa70..e4b0475 100644
--- a/src/flash/lpc3180_nand_controller.c
+++ b/src/flash/lpc3180_nand_controller.c
@@ -37,7 +37,7 @@ NAND_DEVICE_COMMAND_HANDLER(lpc3180_nand_device_command)
 		return ERROR_FLASH_BANK_INVALID;
 	}
 
-	target_t *target = get_target(args[1]);
+	struct target *target = get_target(args[1]);
 	if (NULL == target)
 	{
 		LOG_ERROR(&quot;target '%s' not defined&quot;, args[1]);
@@ -96,7 +96,7 @@ static int lpc3180_pll(int fclkin, uint32_t pll_ctrl)
 
 static float lpc3180_cycle_time(struct lpc3180_nand_controller *lpc3180_info)
 {
-	target_t *target = lpc3180_info-&gt;target;
+	struct target *target = lpc3180_info-&gt;target;
 	uint32_t sysclk_ctrl, pwr_ctrl, hclkdiv_ctrl, hclkpll_ctrl;
 	int sysclk;
 	int hclk;
@@ -147,7 +147,7 @@ static float lpc3180_cycle_time(struct lpc3180_nand_controller *lpc3180_info)
 static int lpc3180_init(struct nand_device_s *nand)
 {
 	struct lpc3180_nand_controller *lpc3180_info = nand-&gt;controller_priv;
-	target_t *target = lpc3180_info-&gt;target;
+	struct target *target = lpc3180_info-&gt;target;
 	int bus_width = nand-&gt;bus_width ? : 8;
 	int address_cycles = nand-&gt;address_cycles ? : 3;
 	int page_size = nand-&gt;page_size ? : 512;
@@ -277,7 +277,7 @@ static int lpc3180_init(struct nand_device_s *nand)
 static int lpc3180_reset(struct nand_device_s *nand)
 {
 	struct lpc3180_nand_controller *lpc3180_info = nand-&gt;controller_priv;
-	target_t *target = lpc3180_info-&gt;target;
+	struct target *target = lpc3180_info-&gt;target;
 
 	if (target-&gt;state != TARGET_HALTED)
 	{
@@ -319,7 +319,7 @@ static int lpc3180_reset(struct nand_device_s *nand)
 static int lpc3180_command(struct nand_device_s *nand, uint8_t command)
 {
 	struct lpc3180_nand_controller *lpc3180_info = nand-&gt;controller_priv;
-	target_t *target = lpc3180_info-&gt;target;
+	struct target *target = lpc3180_info-&gt;target;
 
 	if (target-&gt;state != TARGET_HALTED)
 	{
@@ -349,7 +349,7 @@ static int lpc3180_command(struct nand_device_s *nand, uint8_t command)
 static int lpc3180_address(struct nand_device_s *nand, uint8_t address)
 {
 	struct lpc3180_nand_controller *lpc3180_info = nand-&gt;controller_priv;
-	target_t *target = lpc3180_info-&gt;target;
+	struct target *target = lpc3180_info-&gt;target;
 
 	if (target-&gt;state != TARGET_HALTED)
 	{
@@ -379,7 +379,7 @@ static int lpc3180_address(struct nand_device_s *nand, uint8_t address)
 static int lpc3180_write_data(struct nand_device_s *nand, uint16_t data)
 {
 	struct lpc3180_nand_controller *lpc3180_info = nand-&gt;controller_priv;
-	target_t *target = lpc3180_info-&gt;target;
+	struct target *target = lpc3180_info-&gt;target;
 
 	if (target-&gt;state != TARGET_HALTED)
 	{
@@ -409,7 +409,7 @@ static int lpc3180_write_data(struct nand_device_s *nand, uint16_t data)
 static int lpc3180_read_data(struct nand_device_s *nand, void *data)
 {
 	struct lpc3180_nand_controller *lpc3180_info = nand-&gt;controller_priv;
-	target_t *target = lpc3180_info-&gt;target;
+	struct target *target = lpc3180_info-&gt;target;
 
 	if (target-&gt;state != TARGET_HALTED)
 	{
@@ -471,7 +471,7 @@ static int lpc3180_read_data(struct nand_device_s *nand, void *data)
 static int lpc3180_write_page(struct nand_device_s *nand, uint32_t page, uint8_t *data, uint32_t data_size, uint8_t *oob, uint32_t oob_size)
 {
 	struct lpc3180_nand_controller *lpc3180_info = nand-&gt;controller_priv;
-	target_t *target = lpc3180_info-&gt;target;
+	struct target *target = lpc3180_info-&gt;target;
 	int retval;
 	uint8_t status;
 
@@ -610,7 +610,7 @@ static int lpc3180_write_page(struct nand_device_s *nand, uint32_t page, uint8_t
 static int lpc3180_read_page(struct nand_device_s *nand, uint32_t page, uint8_t *data, uint32_t data_size, uint8_t *oob, uint32_t oob_size)
 {
 	struct lpc3180_nand_controller *lpc3180_info = nand-&gt;controller_priv;
-	target_t *target = lpc3180_info-&gt;target;
+	struct target *target = lpc3180_info-&gt;target;
 
 	if (target-&gt;state != TARGET_HALTED)
 	{
@@ -757,7 +757,7 @@ static int lpc3180_read_page(struct nand_device_s *nand, uint32_t page, uint8_t
 static int lpc3180_controller_ready(struct nand_device_s *nand, int timeout)
 {
 	struct lpc3180_nand_controller *lpc3180_info = nand-&gt;controller_priv;
-	target_t *target = lpc3180_info-&gt;target;
+	struct target *target = lpc3180_info-&gt;target;
 	uint8_t status = 0x0;
 
 	if (target-&gt;state != TARGET_HALTED)
@@ -791,7 +791,7 @@ static int lpc3180_controller_ready(struct nand_device_s *nand, int timeout)
 static int lpc3180_nand_ready(struct nand_device_s *nand, int timeout)
 {
 	struct lpc3180_nand_controller *lpc3180_info = nand-&gt;controller_priv;
-	target_t *target = lpc3180_info-&gt;target;
+	struct target *target = lpc3180_info-&gt;target;
 
 	if (target-&gt;state != TARGET_HALTED)
 	{
diff --git a/src/flash/lpc3180_nand_controller.h b/src/flash/lpc3180_nand_controller.h
index 6f5d284..b965be9 100644
--- a/src/flash/lpc3180_nand_controller.h
+++ b/src/flash/lpc3180_nand_controller.h
@@ -31,7 +31,7 @@ enum lpc3180_selected_controller
 
 struct lpc3180_nand_controller
 {
-	struct target_s *target;
+	struct target *target;
 	int osc_freq;
 	enum lpc3180_selected_controller selected_controller;
 	int sw_write_protection;
diff --git a/src/flash/mflash.c b/src/flash/mflash.c
index 5790a95..698cd16 100644
--- a/src/flash/mflash.c
+++ b/src/flash/mflash.c
@@ -67,7 +67,7 @@ static struct mflash_gpio_drv *mflash_gpio[] =
 static int pxa270_set_gpio_to_output (struct mflash_gpio_num gpio)
 {
 	uint32_t addr, value, mask;
-	target_t *target = mflash_bank-&gt;target;
+	struct target *target = mflash_bank-&gt;target;
 	int ret;
 
 	/* remove alternate function. */
@@ -104,7 +104,7 @@ static int pxa270_set_gpio_to_output (struct mflash_gpio_num gpio)
 static int pxa270_set_gpio_output_val (struct mflash_gpio_num gpio, uint8_t val)
 {
 	uint32_t addr, value, mask;
-	target_t *target = mflash_bank-&gt;target;
+	struct target *target = mflash_bank-&gt;target;
 	int ret;
 
 	mask = 0x1u &lt;&lt; (gpio.num &amp; 0x1F);
@@ -133,7 +133,7 @@ static int pxa270_set_gpio_output_val (struct mflash_gpio_num gpio, uint8_t val)
 static int s3c2440_set_gpio_to_output (struct mflash_gpio_num gpio)
 {
 	uint32_t data, mask, gpio_con;
-	target_t *target = mflash_bank-&gt;target;
+	struct target *target = mflash_bank-&gt;target;
 	int ret;
 
 	if (gpio.port[0] &gt;= 'a' &amp;&amp; gpio.port[0] &lt;= 'h') {
@@ -165,7 +165,7 @@ static int s3c2440_set_gpio_to_output (struct mflash_gpio_num gpio)
 static int s3c2440_set_gpio_output_val (struct mflash_gpio_num gpio, uint8_t val)
 {
 	uint32_t data, mask, gpio_dat;
-	target_t *target = mflash_bank-&gt;target;
+	struct target *target = mflash_bank-&gt;target;
 	int ret;
 
 	if (gpio.port[0] &gt;= 'a' &amp;&amp; gpio.port[0] &lt;= 'h') {
@@ -213,7 +213,7 @@ static int mg_init_gpio (void)
 static int mg_dsk_wait(mg_io_type_wait wait, uint32_t time)
 {
 	uint8_t status, error;
-	target_t *target = mflash_bank-&gt;target;
+	struct target *target = mflash_bank-&gt;target;
 	uint32_t mg_task_reg = mflash_bank-&gt;base + MG_REG_OFFSET;
 	int ret;
 	long long t = 0;
@@ -291,7 +291,7 @@ static int mg_dsk_wait(mg_io_type_wait wait, uint32_t time)
 
 static int mg_dsk_srst(uint8_t on)
 {
-	target_t *target = mflash_bank-&gt;target;
+	struct target *target = mflash_bank-&gt;target;
 	uint32_t mg_task_reg = mflash_bank-&gt;base + MG_REG_OFFSET;
 	uint8_t value;
 	int ret;
@@ -311,7 +311,7 @@ static int mg_dsk_srst(uint8_t on)
 
 static int mg_dsk_io_cmd(uint32_t sect_num, uint32_t cnt, uint8_t cmd)
 {
-	target_t *target = mflash_bank-&gt;target;
+	struct target *target = mflash_bank-&gt;target;
 	uint32_t mg_task_reg = mflash_bank-&gt;base + MG_REG_OFFSET;
 	uint8_t value;
 	int ret;
@@ -336,7 +336,7 @@ static int mg_dsk_io_cmd(uint32_t sect_num, uint32_t cnt, uint8_t cmd)
 
 static int mg_dsk_drv_info(void)
 {
-	target_t *target = mflash_bank-&gt;target;
+	struct target *target = mflash_bank-&gt;target;
 	uint32_t mg_buff = mflash_bank-&gt;base + MG_BUFFER_OFFSET;
 	int ret;
 
@@ -426,7 +426,7 @@ static int mg_mflash_do_read_sects(void *buff, uint32_t sect_num, uint32_t sect_
 {
 	uint32_t i, address;
 	int ret;
-	target_t *target = mflash_bank-&gt;target;
+	struct target *target = mflash_bank-&gt;target;
 	uint8_t *buff_ptr = buff;
 
 	if ((ret = mg_dsk_io_cmd(sect_num, sect_cnt, mg_io_cmd_read)) != ERROR_OK)
@@ -498,7 +498,7 @@ static int mg_mflash_do_write_sects(void *buff, uint32_t sect_num, uint32_t sect
 {
 	uint32_t i, address;
 	int ret;
-	target_t *target = mflash_bank-&gt;target;
+	struct target *target = mflash_bank-&gt;target;
 	uint8_t *buff_ptr = buff;
 
 	if ((ret = mg_dsk_io_cmd(sect_num, sect_cnt, cmd)) != ERROR_OK)
@@ -834,7 +834,7 @@ mg_dump_cmd_err:
 
 static int mg_set_feature(mg_feature_id feature, mg_feature_val config)
 {
-	target_t *target = mflash_bank-&gt;target;
+	struct target *target = mflash_bank-&gt;target;
 	uint32_t mg_task_reg = mflash_bank-&gt;base + MG_REG_OFFSET;
 	int ret;
 
@@ -953,7 +953,7 @@ static int mg_verify_interface(void)
 	uint16_t buff[MG_MFLASH_SECTOR_SIZE &gt;&gt; 1];
 	uint16_t i, j;
 	uint32_t address = mflash_bank-&gt;base + MG_BUFFER_OFFSET;
-	target_t *target = mflash_bank-&gt;target;
+	struct target *target = mflash_bank-&gt;target;
 	int ret;
 
 	for (j = 0; j &lt; 10; j++) {
@@ -1282,7 +1282,7 @@ int mflash_init_drivers(struct command_context_s *cmd_ctx)
 
 COMMAND_HANDLER(mg_bank_cmd)
 {
-	target_t *target;
+	struct target *target;
 	int i;
 
 	if (argc &lt; 4)
diff --git a/src/flash/mflash.h b/src/flash/mflash.h
index 59bd1b0..a2bd5b3 100644
--- a/src/flash/mflash.h
+++ b/src/flash/mflash.h
@@ -137,7 +137,7 @@ struct mflash_bank
 	struct mflash_gpio_num rst_pin;
 
 	struct mflash_gpio_drv *gpio_drv;
-	target_t *target;
+	struct target *target;
 	struct mg_drv_info *drv_info;
 };
 
diff --git a/src/flash/mx3_nand.c b/src/flash/mx3_nand.c
index 5311116..07a360f 100644
--- a/src/flash/mx3_nand.c
+++ b/src/flash/mx3_nand.c
@@ -47,13 +47,13 @@ static const char get_status_register_err_msg[] = &quot;can't get NAND status&quot;;
 static uint32_t in_sram_address;
 unsigned char sign_of_sequental_byte_read;
 
-static int test_iomux_settings (target_t * target, uint32_t value,
+static int test_iomux_settings (struct target * target, uint32_t value,
 				uint32_t mask, const char *text);
 static int initialize_nf_controller (struct nand_device_s *nand);
-static int get_next_byte_from_sram_buffer (target_t * target, uint8_t * value);
-static int get_next_halfword_from_sram_buffer (target_t * target,
+static int get_next_byte_from_sram_buffer (struct target * target, uint8_t * value);
+static int get_next_halfword_from_sram_buffer (struct target * target,
 					       uint16_t * value);
-static int poll_for_complete_op (target_t * target, const char *text);
+static int poll_for_complete_op (struct target * target, const char *text);
 static int validate_target_state (struct nand_device_s *nand);
 static int do_data_output (struct nand_device_s *nand);
 
@@ -124,7 +124,7 @@ NAND_DEVICE_COMMAND_HANDLER(imx31_nand_device_command)
 static int imx31_init (struct nand_device_s *nand)
 {
 	struct mx3_nf_controller *mx3_nf_info = nand-&gt;controller_priv;
-	target_t *target = mx3_nf_info-&gt;target;
+	struct target *target = mx3_nf_info-&gt;target;
 
 	{
 	/*
@@ -267,7 +267,7 @@ static int imx31_init (struct nand_device_s *nand)
 static int imx31_read_data (struct nand_device_s *nand, void *data)
 {
 	struct mx3_nf_controller *mx3_nf_info = nand-&gt;controller_priv;
-	target_t *target = mx3_nf_info-&gt;target;
+	struct target *target = mx3_nf_info-&gt;target;
 	{
 	/*
 	 * validate target state
@@ -338,7 +338,7 @@ static int imx31_reset (struct nand_device_s *nand)
 static int imx31_command (struct nand_device_s *nand, uint8_t command)
 {
 	struct mx3_nf_controller *mx3_nf_info = nand-&gt;controller_priv;
-	target_t *target = mx3_nf_info-&gt;target;
+	struct target *target = mx3_nf_info-&gt;target;
 	{
 	/*
 	 * validate target state
@@ -412,7 +412,7 @@ static int imx31_command (struct nand_device_s *nand, uint8_t command)
 static int imx31_address (struct nand_device_s *nand, uint8_t address)
 {
 	struct mx3_nf_controller *mx3_nf_info = nand-&gt;controller_priv;
-	target_t *target = mx3_nf_info-&gt;target;
+	struct target *target = mx3_nf_info-&gt;target;
 	{
 	/*
 	 * validate target state
@@ -445,7 +445,7 @@ static int imx31_controller_ready (struct nand_device_s *nand, int tout)
 {
 	uint16_t poll_complete_status;
 	struct mx3_nf_controller *mx3_nf_info = nand-&gt;controller_priv;
-	target_t *target = mx3_nf_info-&gt;target;
+	struct target *target = mx3_nf_info-&gt;target;
 
 	{
 	/*
@@ -477,7 +477,7 @@ static int imx31_write_page (struct nand_device_s *nand, uint32_t page,
 			     uint32_t oob_size)
 {
 	struct mx3_nf_controller *mx3_nf_info = nand-&gt;controller_priv;
-	target_t *target = mx3_nf_info-&gt;target;
+	struct target *target = mx3_nf_info-&gt;target;
 
 	if (data_size % 2)
 	{
@@ -584,7 +584,7 @@ static int imx31_read_page (struct nand_device_s *nand, uint32_t page,
 			    uint32_t oob_size)
 {
 	struct mx3_nf_controller *mx3_nf_info = nand-&gt;controller_priv;
-	target_t *target = mx3_nf_info-&gt;target;
+	struct target *target = mx3_nf_info-&gt;target;
 
 	if (data_size % 2)
 	{
@@ -643,7 +643,7 @@ static int imx31_read_page (struct nand_device_s *nand, uint32_t page,
 	return ERROR_OK;
 }
 
-static int test_iomux_settings (target_t * target, uint32_t address,
+static int test_iomux_settings (struct target * target, uint32_t address,
 				uint32_t mask, const char *text)
 {
 	uint32_t register_content;
@@ -659,7 +659,7 @@ static int test_iomux_settings (target_t * target, uint32_t address,
 static int initialize_nf_controller (struct nand_device_s *nand)
 {
 	struct mx3_nf_controller *mx3_nf_info = nand-&gt;controller_priv;
-	target_t *target = mx3_nf_info-&gt;target;
+	struct target *target = mx3_nf_info-&gt;target;
 	/*
 	* resets NAND flash controller in zero time ? I dont know.
 	*/
@@ -709,7 +709,7 @@ static int initialize_nf_controller (struct nand_device_s *nand)
 	return ERROR_OK;
 }
 
-static int get_next_byte_from_sram_buffer (target_t * target, uint8_t * value)
+static int get_next_byte_from_sram_buffer (struct target * target, uint8_t * value)
 {
 	static uint8_t even_byte = 0;
 	/*
@@ -747,7 +747,7 @@ static int get_next_byte_from_sram_buffer (target_t * target, uint8_t * value)
 	return ERROR_OK;
 }
 
-static int get_next_halfword_from_sram_buffer (target_t * target,
+static int get_next_halfword_from_sram_buffer (struct target * target,
 					       uint16_t * value)
 {
 	if (in_sram_address &gt; MX3_NF_LAST_BUFFER_ADDR)
@@ -764,7 +764,7 @@ static int get_next_halfword_from_sram_buffer (target_t * target,
 	return ERROR_OK;
 }
 
-static int poll_for_complete_op (target_t * target, const char *text)
+static int poll_for_complete_op (struct target * target, const char *text)
 {
 	uint16_t poll_complete_status;
 	for (int poll_cycle_count = 0; poll_cycle_count &lt; 100; poll_cycle_count++)
@@ -787,7 +787,7 @@ static int poll_for_complete_op (target_t * target, const char *text)
 static int validate_target_state (struct nand_device_s *nand)
 {
 	struct mx3_nf_controller *mx3_nf_info = nand-&gt;controller_priv;
-	target_t *target = mx3_nf_info-&gt;target;
+	struct target *target = mx3_nf_info-&gt;target;
 
 	if (target-&gt;state != TARGET_HALTED)
 	{
@@ -809,7 +809,7 @@ static int validate_target_state (struct nand_device_s *nand)
 static int do_data_output (struct nand_device_s *nand)
 {
 	struct mx3_nf_controller *mx3_nf_info = nand-&gt;controller_priv;
-	target_t *target = mx3_nf_info-&gt;target;
+	struct target *target = mx3_nf_info-&gt;target;
 	switch (mx3_nf_info-&gt;fin)
 	{
 	    case MX3_NF_FIN_DATAOUT:
diff --git a/src/flash/mx3_nand.h b/src/flash/mx3_nand.h
index 1f3529a..ddec92c 100644
--- a/src/flash/mx3_nand.h
+++ b/src/flash/mx3_nand.h
@@ -110,7 +110,7 @@ struct mx3_nf_flags
 
 struct mx3_nf_controller
 {
-	struct target_s *target;
+	struct target *target;
 	enum mx_dataout_type optype;
 	enum mx_nf_finalize_action fin;
 	struct mx3_nf_flags flags;
diff --git a/src/flash/orion_nand.c b/src/flash/orion_nand.c
index 82c717a..d6519f2 100644
--- a/src/flash/orion_nand.c
+++ b/src/flash/orion_nand.c
@@ -32,7 +32,7 @@
 
 struct orion_nand_controller
 {
-	struct target_s	*target;
+	struct target	*target;
 
 	struct arm_nand_data	io;
 
@@ -52,7 +52,7 @@ struct orion_nand_controller
 static int orion_nand_command(struct nand_device_s *nand, uint8_t command)
 {
 	struct orion_nand_controller *hw = nand-&gt;controller_priv;
-	target_t *target = hw-&gt;target;
+	struct target *target = hw-&gt;target;
 
 	CHECK_HALTED;
 	target_write_u8(target, hw-&gt;cmd, command);
@@ -62,7 +62,7 @@ static int orion_nand_command(struct nand_device_s *nand, uint8_t command)
 static int orion_nand_address(struct nand_device_s *nand, uint8_t address)
 {
 	struct orion_nand_controller *hw = nand-&gt;controller_priv;
-	target_t *target = hw-&gt;target;
+	struct target *target = hw-&gt;target;
 
 	CHECK_HALTED;
 	target_write_u8(target, hw-&gt;addr, address);
@@ -72,7 +72,7 @@ static int orion_nand_address(struct nand_device_s *nand, uint8_t address)
 static int orion_nand_read(struct nand_device_s *nand, void *data)
 {
 	struct orion_nand_controller *hw = nand-&gt;controller_priv;
-	target_t *target = hw-&gt;target;
+	struct target *target = hw-&gt;target;
 
 	CHECK_HALTED;
 	target_read_u8(target, hw-&gt;data, data);
@@ -82,7 +82,7 @@ static int orion_nand_read(struct nand_device_s *nand, void *data)
 static int orion_nand_write(struct nand_device_s *nand, uint16_t data)
 {
 	struct orion_nand_controller *hw = nand-&gt;controller_priv;
-	target_t *target = hw-&gt;target;
+	struct target *target = hw-&gt;target;
 
 	CHECK_HALTED;
 	target_write_u8(target, hw-&gt;data, data);
diff --git a/src/flash/pic32mx.c b/src/flash/pic32mx.c
index d29950c..25f90fd 100644
--- a/src/flash/pic32mx.c
+++ b/src/flash/pic32mx.c
@@ -83,7 +83,7 @@ FLASH_BANK_COMMAND_HANDLER(pic32mx_flash_bank_command)
 
 static uint32_t pic32mx_get_flash_status(flash_bank_t *bank)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint32_t status;
 
 	target_read_u32(target, PIC32MX_NVMCON, &amp;status);
@@ -109,7 +109,7 @@ static uint32_t pic32mx_wait_status_busy(flash_bank_t *bank, int timeout)
 
 static int pic32mx_nvm_exec(struct flash_bank_s *bank, uint32_t op, uint32_t timeout)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint32_t status;
 
 	target_write_u32(target, PIC32MX_NVMCON, NVMCON_NVMWREN | op);
@@ -131,7 +131,7 @@ static int pic32mx_nvm_exec(struct flash_bank_s *bank, uint32_t op, uint32_t tim
 
 static int pic32mx_protect_check(struct flash_bank_s *bank)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 
 	uint32_t devcfg0;
 	int s;
@@ -165,7 +165,7 @@ static int pic32mx_protect_check(struct flash_bank_s *bank)
 
 static int pic32mx_erase(struct flash_bank_s *bank, int first, int last)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	int i;
 	uint32_t status;
 
@@ -208,7 +208,7 @@ static int pic32mx_erase(struct flash_bank_s *bank, int first, int last)
 static int pic32mx_protect(struct flash_bank_s *bank, int set, int first, int last)
 {
 	struct pic32mx_flash_bank *pic32mx_info = NULL;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 #if 0
 	uint16_t prot_reg[4] = {0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF};
 	int i, reg, bit;
@@ -300,7 +300,7 @@ static int pic32mx_protect(struct flash_bank_s *bank, int set, int first, int la
 
 static int pic32mx_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint32_t buffer_size = 512;
 	struct working_area *source;
 	uint32_t address = bank-&gt;base + offset;
@@ -429,7 +429,7 @@ static int pic32mx_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint3
 
 static int pic32mx_write_word(struct flash_bank_s *bank, uint32_t address, uint32_t word)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 
 	if (bank-&gt;base &gt;= PIC32MX_KSEG1_PGM_FLASH)
 		target_write_u32(target, PIC32MX_NVMADDR, KS1Virt2Phys(address));
@@ -445,7 +445,7 @@ static int pic32mx_write_word(struct flash_bank_s *bank, uint32_t address, uint3
  */
 static int pic32mx_write_row(struct flash_bank_s *bank, uint32_t address, uint32_t srcaddr)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 
 	LOG_DEBUG(&quot;addr: 0x%08&quot; PRIx32 &quot; srcaddr: 0x%08&quot; PRIx32 &quot;&quot;, address, srcaddr);
 
@@ -541,7 +541,7 @@ static int pic32mx_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t of
 
 static int pic32mx_probe(struct flash_bank_s *bank)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	struct pic32mx_flash_bank *pic32mx_info = bank-&gt;driver_priv;
 	struct mips32_common *mips32 = target-&gt;arch_info;
 	struct mips_ejtag *ejtag_info = &amp;mips32-&gt;ejtag_info;
@@ -639,7 +639,7 @@ COMMAND_HANDLER(pic32mx_handle_part_id_command)
 
 static int pic32mx_info(struct flash_bank_s *bank, char *buf, int buf_size)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	struct mips32_common *mips32 = target-&gt;arch_info;
 	struct mips_ejtag *ejtag_info = &amp;mips32-&gt;ejtag_info;
 	uint32_t device_id;
@@ -674,7 +674,7 @@ static int pic32mx_info(struct flash_bank_s *bank, char *buf, int buf_size)
 #if 0
 COMMAND_HANDLER(pic32mx_handle_lock_command)
 {
-	target_t *target = NULL;
+	struct target *target = NULL;
 	struct pic32mx_flash_bank *pic32mx_info = NULL;
 
 	if (argc &lt; 1)
@@ -720,7 +720,7 @@ COMMAND_HANDLER(pic32mx_handle_lock_command)
 
 COMMAND_HANDLER(pic32mx_handle_unlock_command)
 {
-	target_t *target = NULL;
+	struct target *target = NULL;
 	struct pic32mx_flash_bank *pic32mx_info = NULL;
 
 	if (argc &lt; 1)
@@ -765,7 +765,7 @@ COMMAND_HANDLER(pic32mx_handle_unlock_command)
 #if 0
 static int pic32mx_chip_erase(struct flash_bank_s *bank)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 #if 0
 	uint32_t status;
 #endif
diff --git a/src/flash/s3c2410_nand.c b/src/flash/s3c2410_nand.c
index 4d08440..23795fb 100644
--- a/src/flash/s3c2410_nand.c
+++ b/src/flash/s3c2410_nand.c
@@ -47,7 +47,7 @@ NAND_DEVICE_COMMAND_HANDLER(s3c2410_nand_device_command)
 static int s3c2410_init(struct nand_device_s *nand)
 {
 	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
-	target_t *target = s3c24xx_info-&gt;target;
+	struct target *target = s3c24xx_info-&gt;target;
 
 	target_write_u32(target, S3C2410_NFCONF,
 			 S3C2410_NFCONF_EN | S3C2410_NFCONF_TACLS(3) |
@@ -59,7 +59,7 @@ static int s3c2410_init(struct nand_device_s *nand)
 static int s3c2410_write_data(struct nand_device_s *nand, uint16_t data)
 {
 	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
-	target_t *target = s3c24xx_info-&gt;target;
+	struct target *target = s3c24xx_info-&gt;target;
 
 	if (target-&gt;state != TARGET_HALTED) {
 		LOG_ERROR(&quot;target must be halted to use S3C24XX NAND flash controller&quot;);
@@ -73,7 +73,7 @@ static int s3c2410_write_data(struct nand_device_s *nand, uint16_t data)
 static int s3c2410_read_data(struct nand_device_s *nand, void *data)
 {
 	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
-	target_t *target = s3c24xx_info-&gt;target;
+	struct target *target = s3c24xx_info-&gt;target;
 
 	if (target-&gt;state != TARGET_HALTED) {
 		LOG_ERROR(&quot;target must be halted to use S3C24XX NAND flash controller&quot;);
@@ -87,7 +87,7 @@ static int s3c2410_read_data(struct nand_device_s *nand, void *data)
 static int s3c2410_nand_ready(struct nand_device_s *nand, int timeout)
 {
 	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
-	target_t *target = s3c24xx_info-&gt;target;
+	struct target *target = s3c24xx_info-&gt;target;
 	uint8_t status;
 
 	if (target-&gt;state != TARGET_HALTED) {
diff --git a/src/flash/s3c2412_nand.c b/src/flash/s3c2412_nand.c
index 9f456fe..8521932 100644
--- a/src/flash/s3c2412_nand.c
+++ b/src/flash/s3c2412_nand.c
@@ -47,7 +47,7 @@ NAND_DEVICE_COMMAND_HANDLER(s3c2412_nand_device_command)
 static int s3c2412_init(struct nand_device_s *nand)
 {
 	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
-	target_t *target = s3c24xx_info-&gt;target;
+	struct target *target = s3c24xx_info-&gt;target;
 
 	target_write_u32(target, S3C2410_NFCONF,
 			 S3C2440_NFCONF_TACLS(3) |
diff --git a/src/flash/s3c2440_nand.c b/src/flash/s3c2440_nand.c
index 40037c7..44ac3c2 100644
--- a/src/flash/s3c2440_nand.c
+++ b/src/flash/s3c2440_nand.c
@@ -48,7 +48,7 @@ NAND_DEVICE_COMMAND_HANDLER(s3c2440_nand_device_command)
 static int s3c2440_init(struct nand_device_s *nand)
 {
 	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
-	target_t *target = s3c24xx_info-&gt;target;
+	struct target *target = s3c24xx_info-&gt;target;
 
 	target_write_u32(target, S3C2410_NFCONF,
 			 S3C2440_NFCONF_TACLS(3) |
@@ -64,7 +64,7 @@ static int s3c2440_init(struct nand_device_s *nand)
 int s3c2440_nand_ready(struct nand_device_s *nand, int timeout)
 {
 	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
-	target_t *target = s3c24xx_info-&gt;target;
+	struct target *target = s3c24xx_info-&gt;target;
 	uint8_t status;
 
 	if (target-&gt;state != TARGET_HALTED) {
@@ -90,7 +90,7 @@ int s3c2440_nand_ready(struct nand_device_s *nand, int timeout)
 int s3c2440_read_block_data(struct nand_device_s *nand, uint8_t *data, int data_size)
 {
 	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
-	target_t *target = s3c24xx_info-&gt;target;
+	struct target *target = s3c24xx_info-&gt;target;
 	uint32_t nfdata = s3c24xx_info-&gt;data;
 	uint32_t tmp;
 
@@ -126,7 +126,7 @@ int s3c2440_read_block_data(struct nand_device_s *nand, uint8_t *data, int data_
 int s3c2440_write_block_data(struct nand_device_s *nand, uint8_t *data, int data_size)
 {
 	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
-	target_t *target = s3c24xx_info-&gt;target;
+	struct target *target = s3c24xx_info-&gt;target;
 	uint32_t nfdata = s3c24xx_info-&gt;data;
 	uint32_t tmp;
 
diff --git a/src/flash/s3c2443_nand.c b/src/flash/s3c2443_nand.c
index 0f08644..c144164 100644
--- a/src/flash/s3c2443_nand.c
+++ b/src/flash/s3c2443_nand.c
@@ -48,7 +48,7 @@ NAND_DEVICE_COMMAND_HANDLER(s3c2443_nand_device_command)
 static int s3c2443_init(struct nand_device_s *nand)
 {
 	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
-	target_t *target = s3c24xx_info-&gt;target;
+	struct target *target = s3c24xx_info-&gt;target;
 
 	target_write_u32(target, S3C2410_NFCONF,
 			 S3C2440_NFCONF_TACLS(3) |
diff --git a/src/flash/s3c24xx_nand.c b/src/flash/s3c24xx_nand.c
index 17de5d4..5125fd2 100644
--- a/src/flash/s3c24xx_nand.c
+++ b/src/flash/s3c24xx_nand.c
@@ -60,7 +60,7 @@ int s3c24xx_register_commands(struct command_context_s *cmd_ctx)
 int s3c24xx_reset(struct nand_device_s *nand)
 {
 	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
-	target_t *target = s3c24xx_info-&gt;target;
+	struct target *target = s3c24xx_info-&gt;target;
 
 	if (target-&gt;state != TARGET_HALTED) {
 		LOG_ERROR(&quot;target must be halted to use S3C24XX NAND flash controller&quot;);
@@ -75,7 +75,7 @@ int s3c24xx_reset(struct nand_device_s *nand)
 int s3c24xx_command(struct nand_device_s *nand, uint8_t command)
 {
 	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
-	target_t *target = s3c24xx_info-&gt;target;
+	struct target *target = s3c24xx_info-&gt;target;
 
 	if (target-&gt;state != TARGET_HALTED) {
 		LOG_ERROR(&quot;target must be halted to use S3C24XX NAND flash controller&quot;);
@@ -90,7 +90,7 @@ int s3c24xx_command(struct nand_device_s *nand, uint8_t command)
 int s3c24xx_address(struct nand_device_s *nand, uint8_t address)
 {
 	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
-	target_t *target = s3c24xx_info-&gt;target;
+	struct target *target = s3c24xx_info-&gt;target;
 
 	if (target-&gt;state != TARGET_HALTED) {
 		LOG_ERROR(&quot;target must be halted to use S3C24XX NAND flash controller&quot;);
@@ -104,7 +104,7 @@ int s3c24xx_address(struct nand_device_s *nand, uint8_t address)
 int s3c24xx_write_data(struct nand_device_s *nand, uint16_t data)
 {
 	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
-	target_t *target = s3c24xx_info-&gt;target;
+	struct target *target = s3c24xx_info-&gt;target;
 
 	if (target-&gt;state != TARGET_HALTED) {
 		LOG_ERROR(&quot;target must be halted to use S3C24XX NAND flash controller&quot;);
@@ -118,7 +118,7 @@ int s3c24xx_write_data(struct nand_device_s *nand, uint16_t data)
 int s3c24xx_read_data(struct nand_device_s *nand, void *data)
 {
 	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
-	target_t *target = s3c24xx_info-&gt;target;
+	struct target *target = s3c24xx_info-&gt;target;
 
 	if (target-&gt;state != TARGET_HALTED) {
 		LOG_ERROR(&quot;target must be halted to use S3C24XX NAND flash controller&quot;);
diff --git a/src/flash/s3c24xx_nand.h b/src/flash/s3c24xx_nand.h
index 6cfad3d..ed88591 100644
--- a/src/flash/s3c24xx_nand.h
+++ b/src/flash/s3c24xx_nand.h
@@ -32,7 +32,7 @@
 
 struct s3c24xx_nand_controller
 {
-	struct target_s *target;
+	struct target *target;
 
 	/* register addresses */
 	uint32_t		 cmd;
diff --git a/src/flash/stellaris.c b/src/flash/stellaris.c
index 6ec036c..748b231 100644
--- a/src/flash/stellaris.c
+++ b/src/flash/stellaris.c
@@ -318,7 +318,7 @@ static int stellaris_info(struct flash_bank_s *bank, char *buf, int buf_size)
 
 static uint32_t stellaris_get_flash_status(flash_bank_t *bank)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint32_t fmc;
 
 	target_read_u32(target, FLASH_CONTROL_BASE | FLASH_FMC, &amp;fmc);
@@ -364,7 +364,7 @@ static const unsigned rcc_xtal[32] = {
 static void stellaris_read_clock_info(flash_bank_t *bank)
 {
 	struct stellaris_flash_bank *stellaris_info = bank-&gt;driver_priv;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint32_t rcc, rcc2, pllcfg, sysdiv, usesysdiv, bypass, oscsrc;
 	unsigned xtal;
 	unsigned long mainfreq;
@@ -451,7 +451,7 @@ static void stellaris_read_clock_info(flash_bank_t *bank)
 static void stellaris_set_flash_mode(flash_bank_t *bank,int mode)
 {
 	struct stellaris_flash_bank *stellaris_info = bank-&gt;driver_priv;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 
 	uint32_t usecrl = (stellaris_info-&gt;mck_freq/1000000ul-1);
 	LOG_DEBUG(&quot;usecrl = %i&quot;,(int)(usecrl));
@@ -479,7 +479,7 @@ static uint32_t stellaris_wait_status_busy(flash_bank_t *bank, uint32_t waitbits
 static int stellaris_flash_command(struct flash_bank_s *bank,uint8_t cmd,uint16_t pagen)
 {
 	uint32_t fmc;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 
 	fmc = FMC_WRKEY | cmd;
 	target_write_u32(target, FLASH_CONTROL_BASE | FLASH_FMC, fmc);
@@ -498,7 +498,7 @@ static int stellaris_flash_command(struct flash_bank_s *bank,uint8_t cmd,uint16_
 static int stellaris_read_part_info(struct flash_bank_s *bank)
 {
 	struct stellaris_flash_bank *stellaris_info = bank-&gt;driver_priv;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint32_t did0, did1, ver, fam, status;
 	int i;
 
@@ -647,7 +647,7 @@ static int stellaris_erase(struct flash_bank_s *bank, int first, int last)
 	int banknr;
 	uint32_t flash_fmc, flash_cris;
 	struct stellaris_flash_bank *stellaris_info = bank-&gt;driver_priv;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 
 	if (bank-&gt;target-&gt;state != TARGET_HALTED)
 	{
@@ -718,7 +718,7 @@ static int stellaris_protect(struct flash_bank_s *bank, int set, int first, int
 	int lockregion;
 
 	struct stellaris_flash_bank *stellaris_info = bank-&gt;driver_priv;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 
 	if (bank-&gt;target-&gt;state != TARGET_HALTED)
 	{
@@ -830,7 +830,7 @@ static uint8_t stellaris_write_code[] =
 
 static int stellaris_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t wcount)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint32_t buffer_size = 8192;
 	struct working_area *source;
 	struct working_area *write_algorithm;
@@ -911,7 +911,7 @@ static int stellaris_write_block(struct flash_bank_s *bank, uint8_t *buffer, uin
 static int stellaris_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
 	struct stellaris_flash_bank *stellaris_info = bank-&gt;driver_priv;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint32_t address = offset;
 	uint32_t flash_cris, flash_fmc;
 	uint32_t words_remaining = (count / 4);
@@ -1069,7 +1069,7 @@ static int stellaris_auto_probe(struct flash_bank_s *bank)
 
 static int stellaris_mass_erase(struct flash_bank_s *bank)
 {
-	target_t *target = NULL;
+	struct target *target = NULL;
 	struct stellaris_flash_bank *stellaris_info = NULL;
 	uint32_t flash_fmc;
 
diff --git a/src/flash/stm32x.c b/src/flash/stm32x.c
index 35da209..a9b4fb3 100644
--- a/src/flash/stm32x.c
+++ b/src/flash/stm32x.c
@@ -54,7 +54,7 @@ FLASH_BANK_COMMAND_HANDLER(stm32x_flash_bank_command)
 
 static uint32_t stm32x_get_flash_status(flash_bank_t *bank)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint32_t status;
 
 	target_read_u32(target, STM32_FLASH_SR, &amp;status);
@@ -64,7 +64,7 @@ static uint32_t stm32x_get_flash_status(flash_bank_t *bank)
 
 static uint32_t stm32x_wait_status_busy(flash_bank_t *bank, int timeout)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint32_t status;
 
 	/* wait for busy to clear */
@@ -85,7 +85,7 @@ static int stm32x_read_options(struct flash_bank_s *bank)
 {
 	uint32_t optiondata;
 	struct stm32x_flash_bank *stm32x_info = NULL;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 
 	stm32x_info = bank-&gt;driver_priv;
 
@@ -112,7 +112,7 @@ static int stm32x_read_options(struct flash_bank_s *bank)
 static int stm32x_erase_options(struct flash_bank_s *bank)
 {
 	struct stm32x_flash_bank *stm32x_info = NULL;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint32_t status;
 
 	stm32x_info = bank-&gt;driver_priv;
@@ -149,7 +149,7 @@ static int stm32x_erase_options(struct flash_bank_s *bank)
 static int stm32x_write_options(struct flash_bank_s *bank)
 {
 	struct stm32x_flash_bank *stm32x_info = NULL;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint32_t status;
 
 	stm32x_info = bank-&gt;driver_priv;
@@ -232,7 +232,7 @@ static int stm32x_write_options(struct flash_bank_s *bank)
 
 static int stm32x_protect_check(struct flash_bank_s *bank)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	struct stm32x_flash_bank *stm32x_info = bank-&gt;driver_priv;
 
 	uint32_t protection;
@@ -304,7 +304,7 @@ static int stm32x_protect_check(struct flash_bank_s *bank)
 
 static int stm32x_erase(struct flash_bank_s *bank, int first, int last)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	int i;
 	uint32_t status;
 
@@ -346,7 +346,7 @@ static int stm32x_erase(struct flash_bank_s *bank, int first, int last)
 static int stm32x_protect(struct flash_bank_s *bank, int set, int first, int last)
 {
 	struct stm32x_flash_bank *stm32x_info = NULL;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint16_t prot_reg[4] = {0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF};
 	int i, reg, bit;
 	int status;
@@ -433,7 +433,7 @@ static int stm32x_protect(struct flash_bank_s *bank, int set, int first, int las
 static int stm32x_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
 	struct stm32x_flash_bank *stm32x_info = bank-&gt;driver_priv;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint32_t buffer_size = 16384;
 	struct working_area *source;
 	uint32_t address = bank-&gt;base + offset;
@@ -551,7 +551,7 @@ static int stm32x_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint32
 
 static int stm32x_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint32_t words_remaining = (count / 2);
 	uint32_t bytes_remaining = (count &amp; 0x00000001);
 	uint32_t address = bank-&gt;base + offset;
@@ -656,7 +656,7 @@ static int stm32x_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t off
 
 static int stm32x_probe(struct flash_bank_s *bank)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	struct stm32x_flash_bank *stm32x_info = bank-&gt;driver_priv;
 	int i;
 	uint16_t num_pages;
@@ -788,7 +788,7 @@ COMMAND_HANDLER(stm32x_handle_part_id_command)
 
 static int stm32x_info(struct flash_bank_s *bank, char *buf, int buf_size)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint32_t device_id;
 	int printed;
 
@@ -894,7 +894,7 @@ static int stm32x_info(struct flash_bank_s *bank, char *buf, int buf_size)
 
 COMMAND_HANDLER(stm32x_handle_lock_command)
 {
-	target_t *target = NULL;
+	struct target *target = NULL;
 	struct stm32x_flash_bank *stm32x_info = NULL;
 
 	if (argc &lt; 1)
@@ -940,7 +940,7 @@ COMMAND_HANDLER(stm32x_handle_lock_command)
 
 COMMAND_HANDLER(stm32x_handle_unlock_command)
 {
-	target_t *target = NULL;
+	struct target *target = NULL;
 	struct stm32x_flash_bank *stm32x_info = NULL;
 
 	if (argc &lt; 1)
@@ -984,7 +984,7 @@ COMMAND_HANDLER(stm32x_handle_unlock_command)
 COMMAND_HANDLER(stm32x_handle_options_read_command)
 {
 	uint32_t optionbyte;
-	target_t *target = NULL;
+	struct target *target = NULL;
 	struct stm32x_flash_bank *stm32x_info = NULL;
 
 	if (argc &lt; 1)
@@ -1039,7 +1039,7 @@ COMMAND_HANDLER(stm32x_handle_options_read_command)
 
 COMMAND_HANDLER(stm32x_handle_options_write_command)
 {
-	target_t *target = NULL;
+	struct target *target = NULL;
 	struct stm32x_flash_bank *stm32x_info = NULL;
 	uint16_t optionbyte = 0xF8;
 
@@ -1112,7 +1112,7 @@ COMMAND_HANDLER(stm32x_handle_options_write_command)
 
 static int stm32x_mass_erase(struct flash_bank_s *bank)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint32_t status;
 
 	if (target-&gt;state != TARGET_HALTED)
diff --git a/src/flash/str7x.c b/src/flash/str7x.c
index d5defe5..d22886f 100644
--- a/src/flash/str7x.c
+++ b/src/flash/str7x.c
@@ -156,7 +156,7 @@ FLASH_BANK_COMMAND_HANDLER(str7x_flash_bank_command)
 
 static uint32_t str7x_status(struct flash_bank_s *bank)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint32_t retval;
 
 	target_read_u32(target, str7x_get_flash_adr(bank, FLASH_CR0), &amp;retval);
@@ -166,7 +166,7 @@ static uint32_t str7x_status(struct flash_bank_s *bank)
 
 static uint32_t str7x_result(struct flash_bank_s *bank)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint32_t retval;
 
 	target_read_u32(target, str7x_get_flash_adr(bank, FLASH_ER), &amp;retval);
@@ -177,7 +177,7 @@ static uint32_t str7x_result(struct flash_bank_s *bank)
 static int str7x_protect_check(struct flash_bank_s *bank)
 {
 	struct str7x_flash_bank *str7x_info = bank-&gt;driver_priv;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 
 	int i;
 	uint32_t retval;
@@ -204,7 +204,7 @@ static int str7x_protect_check(struct flash_bank_s *bank)
 static int str7x_erase(struct flash_bank_s *bank, int first, int last)
 {
 	struct str7x_flash_bank *str7x_info = bank-&gt;driver_priv;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 
 	int i;
 	uint32_t cmd;
@@ -257,7 +257,7 @@ static int str7x_erase(struct flash_bank_s *bank, int first, int last)
 static int str7x_protect(struct flash_bank_s *bank, int set, int first, int last)
 {
 	struct str7x_flash_bank *str7x_info = bank-&gt;driver_priv;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	int i;
 	uint32_t cmd;
 	uint32_t retval;
@@ -311,7 +311,7 @@ static int str7x_protect(struct flash_bank_s *bank, int set, int first, int last
 static int str7x_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
 	struct str7x_flash_bank *str7x_info = bank-&gt;driver_priv;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint32_t buffer_size = 8192;
 	struct working_area *source;
 	uint32_t address = bank-&gt;base + offset;
@@ -425,7 +425,7 @@ static int str7x_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint32_
 
 static int str7x_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	struct str7x_flash_bank *str7x_info = bank-&gt;driver_priv;
 	uint32_t dwords_remaining = (count / 8);
 	uint32_t bytes_remaining = (count &amp; 0x00000007);
@@ -603,7 +603,7 @@ static int str7x_info(struct flash_bank_s *bank, char *buf, int buf_size)
 
 COMMAND_HANDLER(str7x_handle_disable_jtag_command)
 {
-	target_t *target = NULL;
+	struct target *target = NULL;
 	struct str7x_flash_bank *str7x_info = NULL;
 
 	uint32_t flash_cmd;
diff --git a/src/flash/str9x.c b/src/flash/str9x.c
index 09e5a08..f7bc3c6 100644
--- a/src/flash/str9x.c
+++ b/src/flash/str9x.c
@@ -140,7 +140,7 @@ static int str9x_protect_check(struct flash_bank_s *bank)
 {
 	int retval;
 	struct str9x_flash_bank *str9x_info = bank-&gt;driver_priv;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 
 	int i;
 	uint32_t adr;
@@ -216,7 +216,7 @@ static int str9x_protect_check(struct flash_bank_s *bank)
 
 static int str9x_erase(struct flash_bank_s *bank, int first, int last)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	int i;
 	uint32_t adr;
 	uint8_t status;
@@ -309,7 +309,7 @@ static int str9x_erase(struct flash_bank_s *bank, int first, int last)
 static int str9x_protect(struct flash_bank_s *bank,
 		int set, int first, int last)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	int i;
 	uint32_t adr;
 	uint8_t status;
@@ -349,7 +349,7 @@ static int str9x_write_block(struct flash_bank_s *bank,
 		uint8_t *buffer, uint32_t offset, uint32_t count)
 {
 	struct str9x_flash_bank *str9x_info = bank-&gt;driver_priv;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint32_t buffer_size = 8192;
 	struct working_area *source;
 	uint32_t address = bank-&gt;base + offset;
@@ -457,7 +457,7 @@ static int str9x_write_block(struct flash_bank_s *bank,
 static int str9x_write(struct flash_bank_s *bank,
 		uint8_t *buffer, uint32_t offset, uint32_t count)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint32_t words_remaining = (count / 2);
 	uint32_t bytes_remaining = (count &amp; 0x00000001);
 	uint32_t address = bank-&gt;base + offset;
@@ -633,7 +633,7 @@ static int str9x_info(struct flash_bank_s *bank, char *buf, int buf_size)
 COMMAND_HANDLER(str9x_handle_flash_config_command)
 {
 	struct str9x_flash_bank *str9x_info;
-	target_t *target = NULL;
+	struct target *target = NULL;
 
 	if (argc &lt; 5)
 	{
diff --git a/src/flash/tms470.c b/src/flash/tms470.c
index 9f45b47..a23e042 100644
--- a/src/flash/tms470.c
+++ b/src/flash/tms470.c
@@ -109,7 +109,7 @@ const struct flash_sector TMS470R1A384_BANK2_SECTORS[] = {
 static int tms470_read_part_info(struct flash_bank_s *bank)
 {
 	struct tms470_flash_bank *tms470_info = bank-&gt;driver_priv;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint32_t device_ident_reg;
 	uint32_t silicon_version;
 	uint32_t technology_family;
@@ -402,7 +402,7 @@ COMMAND_HANDLER(tms470_handle_plldis_command)
 
 /* ---------------------------------------------------------------------- */
 
-static int tms470_check_flash_unlocked(target_t * target)
+static int tms470_check_flash_unlocked(struct target * target)
 {
 	uint32_t fmbbusy;
 
@@ -413,7 +413,7 @@ static int tms470_check_flash_unlocked(target_t * target)
 
 /* ---------------------------------------------------------------------- */
 
-static int tms470_try_flash_keys(target_t * target, const uint32_t * key_set)
+static int tms470_try_flash_keys(struct target * target, const uint32_t * key_set)
 {
 	uint32_t glbctrl, fmmstat;
 	int retval = ERROR_FLASH_OPERATION_FAILED;
@@ -493,7 +493,7 @@ static int tms470_try_flash_keys(target_t * target, const uint32_t * key_set)
 
 static int tms470_unlock_flash(struct flash_bank_s *bank)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	const uint32_t *p_key_sets[5];
 	unsigned i, key_set_count;
 
@@ -533,7 +533,7 @@ static int tms470_unlock_flash(struct flash_bank_s *bank)
 static int tms470_flash_initialize_internal_state_machine(struct flash_bank_s *bank)
 {
 	uint32_t fmmac2, fmmac1, fmmaxep, k, delay, glbctrl, sysclk;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	struct tms470_flash_bank *tms470_info = bank-&gt;driver_priv;
 	int result = ERROR_OK;
 
@@ -668,7 +668,7 @@ static int tms470_flash_initialize_internal_state_machine(struct flash_bank_s *b
 
 int tms470_flash_status(struct flash_bank_s *bank)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	int result = ERROR_OK;
 	uint32_t fmmstat;
 
@@ -725,7 +725,7 @@ int tms470_flash_status(struct flash_bank_s *bank)
 static int tms470_erase_sector(struct flash_bank_s *bank, int sector)
 {
 	uint32_t glbctrl, orig_fmregopt, fmbsea, fmbseb, fmmstat;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint32_t flashAddr = bank-&gt;base + bank-&gt;sectors[sector].offset;
 	int result = ERROR_OK;
 
@@ -880,7 +880,7 @@ static int tms470_erase(struct flash_bank_s *bank, int first, int last)
 static int tms470_protect(struct flash_bank_s *bank, int set, int first, int last)
 {
 	struct tms470_flash_bank *tms470_info = bank-&gt;driver_priv;
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint32_t fmmac2, fmbsea, fmbseb;
 	int sector;
 
@@ -931,7 +931,7 @@ static int tms470_protect(struct flash_bank_s *bank, int set, int first, int las
 
 static int tms470_write(struct flash_bank_s *bank, uint8_t * buffer, uint32_t offset, uint32_t count)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	uint32_t glbctrl, fmbac2, orig_fmregopt, fmbsea, fmbseb, fmmaxpp, fmmstat;
 	int result = ERROR_OK;
 	uint32_t i;
@@ -1051,7 +1051,7 @@ static int tms470_auto_probe(struct flash_bank_s *bank)
 
 static int tms470_erase_check(struct flash_bank_s *bank)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	struct tms470_flash_bank *tms470_info = bank-&gt;driver_priv;
 	int sector, result = ERROR_OK;
 	uint32_t fmmac2, fmbac2, glbctrl, orig_fmregopt;
@@ -1142,7 +1142,7 @@ static int tms470_erase_check(struct flash_bank_s *bank)
 
 static int tms470_protect_check(struct flash_bank_s *bank)
 {
-	target_t *target = bank-&gt;target;
+	struct target *target = bank-&gt;target;
 	struct tms470_flash_bank *tms470_info = bank-&gt;driver_priv;
 	int sector, result = ERROR_OK;
 	uint32_t fmmac2, fmbsea, fmbseb;
diff --git a/src/jtag/minidummy/jtag_minidriver.h b/src/jtag/minidummy/jtag_minidriver.h
index 0435737..baf4ada 100644
--- a/src/jtag/minidummy/jtag_minidriver.h
+++ b/src/jtag/minidummy/jtag_minidriver.h
@@ -20,7 +20,7 @@
 
 
 
-static __inline__ void interface_jtag_add_dr_out_core(struct jtag_tap *target_tap,
+static __inline__ void interface_jtag_add_dr_out_core(struct jtag_tap *struct targetap,
 		int num_fields,
 		const int *num_bits,
 		const uint32_t *value,
@@ -29,7 +29,7 @@ static __inline__ void interface_jtag_add_dr_out_core(struct jtag_tap *target_ta
 	/* synchronously do the operation here */
 }
 
-static __inline__ void interface_jtag_add_dr_out(struct jtag_tap *target_tap,
+static __inline__ void interface_jtag_add_dr_out(struct jtag_tap *struct targetap,
 		int num_fields,
 		const int *num_bits,
 		const uint32_t *value,
diff --git a/src/jtag/zy1000/jtag_minidriver.h b/src/jtag/zy1000/jtag_minidriver.h
index 0e97913..9d093ca 100644
--- a/src/jtag/zy1000/jtag_minidriver.h
+++ b/src/jtag/zy1000/jtag_minidriver.h
@@ -148,7 +148,7 @@ static __inline__ void shiftValueInner(const enum tap_state state, const enum ta
 
 
 
-static __inline__ void interface_jtag_add_dr_out_core(struct jtag_tap *target_tap,
+static __inline__ void interface_jtag_add_dr_out_core(struct jtag_tap *struct targetap,
 		int num_fields,
 		const int *num_bits,
 		const uint32_t *value,
@@ -164,7 +164,7 @@ static __inline__ void interface_jtag_add_dr_out_core(struct jtag_tap *target_ta
 		{
 			pause_state = end_state;
 		}
-		if (tap == target_tap)
+		if (tap == struct targetap)
 		{
 			int j;
 			for (j = 0; j &lt; (num_fields-1); j++)
@@ -180,7 +180,7 @@ static __inline__ void interface_jtag_add_dr_out_core(struct jtag_tap *target_ta
 	}
 }
 
-static __inline__ void interface_jtag_add_dr_out(struct jtag_tap *target_tap,
+static __inline__ void interface_jtag_add_dr_out(struct jtag_tap *struct targetap,
 		int num_fields,
 		const int *num_bits,
 		const uint32_t *value,
@@ -201,7 +201,7 @@ static __inline__ void interface_jtag_add_dr_out(struct jtag_tap *target_tap,
 		shiftValueInner(TAP_DRSHIFT, end_state, num_bits[1], value[1]);
 	} else
 	{
-		interface_jtag_add_dr_out_core(target_tap, num_fields, num_bits, value, end_state);
+		interface_jtag_add_dr_out_core(struct targetap, num_fields, num_bits, value, end_state);
 	}
 }
 
diff --git a/src/openocd.c b/src/openocd.c
index d67ebd5..8c99af0 100644
--- a/src/openocd.c
+++ b/src/openocd.c
@@ -82,7 +82,7 @@ static void exit_handler(void)
 	jtag_interface_quit();
 }
 
-static int log_target_callback_event_handler(struct target_s *target, enum target_event event, void *priv)
+static int log_target_callback_event_handler(struct target *target, enum target_event event, void *priv)
 {
 	switch (event)
 	{
diff --git a/src/server/gdb_server.c b/src/server/gdb_server.c
index 85855d9..84ad76c 100644
--- a/src/server/gdb_server.c
+++ b/src/server/gdb_server.c
@@ -67,7 +67,7 @@ int gdb_flash_program = 1;
  * see the code in gdb_read_memory_packet() for further explanations */
 int gdb_report_data_abort = 0;
 
-int gdb_last_signal(target_t *target)
+int gdb_last_signal(struct target *target)
 {
 	switch (target-&gt;debug_reason)
 	{
@@ -658,7 +658,7 @@ int gdb_output(struct command_context_s *context, const char* line)
 }
 
 
-static void gdb_frontend_halted(struct target_s *target, struct connection *connection)
+static void gdb_frontend_halted(struct target *target, struct connection *connection)
 {
 	struct gdb_connection *gdb_connection = connection-&gt;priv;
 
@@ -695,7 +695,7 @@ static void gdb_frontend_halted(struct target_s *target, struct connection *conn
 	}
 }
 
-int gdb_target_callback_event_handler(struct target_s *target, enum target_event event, void *priv)
+int gdb_target_callback_event_handler(struct target *target, enum target_event event, void *priv)
 {
 	int retval;
 	struct connection *connection = priv;
@@ -833,7 +833,7 @@ void gdb_send_error(struct connection *connection, uint8_t the_error)
 	gdb_put_packet(connection, err, 3);
 }
 
-int gdb_last_signal_packet(struct connection *connection, target_t *target, char* packet, int packet_size)
+int gdb_last_signal_packet(struct connection *connection, struct target *target, char* packet, int packet_size)
 {
 	char sig_reply[4];
 	int signal;
@@ -846,7 +846,7 @@ int gdb_last_signal_packet(struct connection *connection, target_t *target, char
 	return ERROR_OK;
 }
 
-static int gdb_reg_pos(target_t *target, int pos, int len)
+static int gdb_reg_pos(struct target *target, int pos, int len)
 {
 	if (target-&gt;endianness == TARGET_LITTLE_ENDIAN)
 		return pos;
@@ -863,7 +863,7 @@ static int gdb_reg_pos(target_t *target, int pos, int len)
  * The format of reg-&gt;value is little endian
  *
  */
-void gdb_str_to_target(target_t *target, char *tstr, struct reg *reg)
+void gdb_str_to_target(struct target *target, char *tstr, struct reg *reg)
 {
 	int i;
 
@@ -896,7 +896,7 @@ static int hextoint(char c)
 }
 
 /* copy over in register buffer */
-void gdb_target_to_reg(target_t *target, char *tstr, int str_len, uint8_t *bin)
+void gdb_target_to_reg(struct target *target, char *tstr, int str_len, uint8_t *bin)
 {
 	if (str_len % 2)
 	{
@@ -915,7 +915,7 @@ void gdb_target_to_reg(target_t *target, char *tstr, int str_len, uint8_t *bin)
 	}
 }
 
-int gdb_get_registers_packet(struct connection *connection, target_t *target, char* packet, int packet_size)
+int gdb_get_registers_packet(struct connection *connection, struct target *target, char* packet, int packet_size)
 {
 	struct reg **reg_list;
 	int reg_list_size;
@@ -965,7 +965,7 @@ int gdb_get_registers_packet(struct connection *connection, target_t *target, ch
 	return ERROR_OK;
 }
 
-int gdb_set_registers_packet(struct connection *connection, target_t *target, char *packet, int packet_size)
+int gdb_set_registers_packet(struct connection *connection, struct target *target, char *packet, int packet_size)
 {
 	int i;
 	struct reg **reg_list;
@@ -1027,7 +1027,7 @@ int gdb_set_registers_packet(struct connection *connection, target_t *target, ch
 	return ERROR_OK;
 }
 
-int gdb_get_register_packet(struct connection *connection, target_t *target, char *packet, int packet_size)
+int gdb_get_register_packet(struct connection *connection, struct target *target, char *packet, int packet_size)
 {
 	char *reg_packet;
 	int reg_num = strtoul(packet + 1, NULL, 16);
@@ -1062,7 +1062,7 @@ int gdb_get_register_packet(struct connection *connection, target_t *target, cha
 	return ERROR_OK;
 }
 
-int gdb_set_register_packet(struct connection *connection, target_t *target, char *packet, int packet_size)
+int gdb_set_register_packet(struct connection *connection, struct target *target, char *packet, int packet_size)
 {
 	char *separator;
 	uint8_t *bin_buf;
@@ -1142,7 +1142,7 @@ int gdb_error(struct connection *connection, int retval)
  *
  * 8191 bytes by the looks of it. Why 8191 bytes instead of 8192?????
  */
-int gdb_read_memory_packet(struct connection *connection, target_t *target, char *packet, int packet_size)
+int gdb_read_memory_packet(struct connection *connection, struct target *target, char *packet, int packet_size)
 {
 	char *separator;
 	uint32_t addr = 0;
@@ -1216,7 +1216,7 @@ int gdb_read_memory_packet(struct connection *connection, target_t *target, char
 	return retval;
 }
 
-int gdb_write_memory_packet(struct connection *connection, target_t *target, char *packet, int packet_size)
+int gdb_write_memory_packet(struct connection *connection, struct target *target, char *packet, int packet_size)
 {
 	char *separator;
 	uint32_t addr = 0;
@@ -1273,7 +1273,7 @@ int gdb_write_memory_packet(struct connection *connection, target_t *target, cha
 	return retval;
 }
 
-int gdb_write_memory_binary_packet(struct connection *connection, target_t *target, char *packet, int packet_size)
+int gdb_write_memory_binary_packet(struct connection *connection, struct target *target, char *packet, int packet_size)
 {
 	char *separator;
 	uint32_t addr = 0;
@@ -1321,7 +1321,7 @@ int gdb_write_memory_binary_packet(struct connection *connection, target_t *targ
 	return ERROR_OK;
 }
 
-int gdb_step_continue_packet(struct connection *connection, target_t *target, char *packet, int packet_size)
+int gdb_step_continue_packet(struct connection *connection, struct target *target, char *packet, int packet_size)
 {
 	int current = 0;
 	uint32_t address = 0x0;
@@ -1354,7 +1354,7 @@ int gdb_step_continue_packet(struct connection *connection, target_t *target, ch
 	return retval;
 }
 
-int gdb_breakpoint_watchpoint_packet(struct connection *connection, target_t *target, char *packet, int packet_size)
+int gdb_breakpoint_watchpoint_packet(struct connection *connection, struct target *target, char *packet, int packet_size)
 {
 	int type;
 	enum breakpoint_type bp_type = BKPT_SOFT /* dummy init to avoid warning */;
@@ -1554,7 +1554,7 @@ static int compare_bank (const void * a, const void * b)
 	}
 }
 
-int gdb_query_packet(struct connection *connection, target_t *target, char *packet, int packet_size)
+int gdb_query_packet(struct connection *connection, struct target *target, char *packet, int packet_size)
 {
 	command_context_t *cmd_ctx = connection-&gt;cmd_ctx;
 	struct gdb_connection *gdb_connection = connection-&gt;priv;
@@ -1810,7 +1810,7 @@ int gdb_query_packet(struct connection *connection, target_t *target, char *pack
 	return ERROR_OK;
 }
 
-int gdb_v_packet(struct connection *connection, target_t *target, char *packet, int packet_size)
+int gdb_v_packet(struct connection *connection, struct target *target, char *packet, int packet_size)
 {
 	struct gdb_connection *gdb_connection = connection-&gt;priv;
 	struct gdb_service *gdb_service = connection-&gt;service-&gt;priv;
@@ -1947,7 +1947,7 @@ int gdb_v_packet(struct connection *connection, target_t *target, char *packet,
 	return ERROR_OK;
 }
 
-int gdb_detach(struct connection *connection, target_t *target)
+int gdb_detach(struct connection *connection, struct target *target)
 {
 	struct gdb_service *gdb_service = connection-&gt;service-&gt;priv;
 
@@ -1985,7 +1985,7 @@ static void gdb_sig_halted(struct connection *connection)
 int gdb_input_inner(struct connection *connection)
 {
 	struct gdb_service *gdb_service = connection-&gt;service-&gt;priv;
-	target_t *target = gdb_service-&gt;target;
+	struct target *target = gdb_service-&gt;target;
 	char *packet = gdb_packet_buffer;
 	int packet_size;
 	int retval;
@@ -2198,7 +2198,7 @@ int gdb_input(struct connection *connection)
 int gdb_init(void)
 {
 	struct gdb_service *gdb_service;
-	target_t *target = all_targets;
+	struct target *target = all_targets;
 
 	if (!target)
 	{
diff --git a/src/server/gdb_server.h b/src/server/gdb_server.h
index d3c5f67..de84e20 100644
--- a/src/server/gdb_server.h
+++ b/src/server/gdb_server.h
@@ -51,7 +51,7 @@ struct gdb_connection
 
 struct gdb_service
 {
-	struct target_s *target;
+	struct target *target;
 };
 
 int gdb_init(void);
diff --git a/src/target/arm11.c b/src/target/arm11.c
index 0b1b9c0..970ffa2 100644
--- a/src/target/arm11.c
+++ b/src/target/arm11.c
@@ -262,10 +262,10 @@ static struct reg arm11_gdb_dummy_fps_reg =
 
 
 static int arm11_on_enter_debug_state(struct arm11_common *arm11);
-static int arm11_step(struct target_s *target, int current,
+static int arm11_step(struct target *target, int current,
 		uint32_t address, int handle_breakpoints);
 /* helpers */
-static int arm11_build_reg_cache(target_t *target);
+static int arm11_build_reg_cache(struct target *target);
 static int arm11_set_reg(struct reg *reg, uint8_t *buf);
 static int arm11_get_reg(struct reg *reg);
 
@@ -668,7 +668,7 @@ static void arm11_record_register_history(struct arm11_common *arm11)
 
 
 /* poll current target status */
-static int arm11_poll(struct target_s *target)
+static int arm11_poll(struct target *target)
 {
 	FNC_INFO;
 	int retval;
@@ -713,7 +713,7 @@ static int arm11_poll(struct target_s *target)
 	return ERROR_OK;
 }
 /* architecture specific status reply */
-static int arm11_arch_state(struct target_s *target)
+static int arm11_arch_state(struct target *target)
 {
 	struct arm11_common * arm11 = target-&gt;arch_info;
 
@@ -726,7 +726,7 @@ static int arm11_arch_state(struct target_s *target)
 }
 
 /* target request support */
-static int arm11_target_request_data(struct target_s *target,
+static int arm11_target_request_data(struct target *target,
 		uint32_t size, uint8_t *buffer)
 {
 	FNC_INFO_NOTIMPLEMENTED;
@@ -735,7 +735,7 @@ static int arm11_target_request_data(struct target_s *target,
 }
 
 /* target execution control */
-static int arm11_halt(struct target_s *target)
+static int arm11_halt(struct target *target)
 {
 	FNC_INFO;
 
@@ -800,7 +800,7 @@ static int arm11_halt(struct target_s *target)
 	return ERROR_OK;
 }
 
-static int arm11_resume(struct target_s *target, int current,
+static int arm11_resume(struct target *target, int current,
 		uint32_t address, int handle_breakpoints, int debug_execution)
 {
 	FNC_INFO;
@@ -995,7 +995,7 @@ static enum armv4_5_mode arm11_sim_get_mode(struct arm_sim_interface *sim)
 	return ARMV4_5_MODE_USR;
 }
 
-static int arm11_simulate_step(target_t *target, uint32_t *dry_run_pc)
+static int arm11_simulate_step(struct target *target, uint32_t *dry_run_pc)
 {
 	struct arm_sim_interface sim;
 
@@ -1013,7 +1013,7 @@ static int arm11_simulate_step(target_t *target, uint32_t *dry_run_pc)
 
 }
 
-static int arm11_step(struct target_s *target, int current,
+static int arm11_step(struct target *target, int current,
 		uint32_t address, int handle_breakpoints)
 {
 	FNC_INFO;
@@ -1169,7 +1169,7 @@ static int arm11_step(struct target_s *target, int current,
 	return ERROR_OK;
 }
 
-static int arm11_assert_reset(target_t *target)
+static int arm11_assert_reset(struct target *target)
 {
 	FNC_INFO;
 	int retval;
@@ -1231,12 +1231,12 @@ static int arm11_assert_reset(target_t *target)
 	return ERROR_OK;
 }
 
-static int arm11_deassert_reset(target_t *target)
+static int arm11_deassert_reset(struct target *target)
 {
 	return ERROR_OK;
 }
 
-static int arm11_soft_reset_halt(struct target_s *target)
+static int arm11_soft_reset_halt(struct target *target)
 {
 	FNC_INFO_NOTIMPLEMENTED;
 
@@ -1244,7 +1244,7 @@ static int arm11_soft_reset_halt(struct target_s *target)
 }
 
 /* target register access for gdb */
-static int arm11_get_gdb_reg_list(struct target_s *target,
+static int arm11_get_gdb_reg_list(struct target *target,
 		struct reg **reg_list[], int *reg_list_size)
 {
 	FNC_INFO;
@@ -1280,7 +1280,7 @@ static int arm11_get_gdb_reg_list(struct target_s *target,
  * to read/write a range of data to a &quot;port&quot;. a &quot;port&quot; is an action on
  * read memory address for some peripheral.
  */
-static int arm11_read_memory_inner(struct target_s *target,
+static int arm11_read_memory_inner(struct target *target,
 		uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer,
 		bool arm11_config_memrw_no_increment)
 {
@@ -1368,7 +1368,7 @@ static int arm11_read_memory_inner(struct target_s *target,
 	return arm11_run_instr_data_finish(arm11);
 }
 
-static int arm11_read_memory(struct target_s *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
+static int arm11_read_memory(struct target *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	return arm11_read_memory_inner(target, address, size, count, buffer, false);
 }
@@ -1378,7 +1378,7 @@ static int arm11_read_memory(struct target_s *target, uint32_t address, uint32_t
 * to read/write a range of data to a &quot;port&quot;. a &quot;port&quot; is an action on
 * read memory address for some peripheral.
 */
-static int arm11_write_memory_inner(struct target_s *target,
+static int arm11_write_memory_inner(struct target *target,
 		uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer,
 		bool arm11_config_memrw_no_increment)
 {
@@ -1517,14 +1517,14 @@ static int arm11_write_memory_inner(struct target_s *target,
 	return arm11_run_instr_data_finish(arm11);
 }
 
-static int arm11_write_memory(struct target_s *target,
+static int arm11_write_memory(struct target *target,
 		uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	return arm11_write_memory_inner(target, address, size, count, buffer, false);
 }
 
 /* write target memory in multiples of 4 byte, optimized for writing large quantities of data */
-static int arm11_bulk_write_memory(struct target_s *target,
+static int arm11_bulk_write_memory(struct target *target,
 		uint32_t address, uint32_t count, uint8_t *buffer)
 {
 	FNC_INFO;
@@ -1542,7 +1542,7 @@ static int arm11_bulk_write_memory(struct target_s *target,
  * fallback code will read data from the target and calculate the CRC on the
  * host.
  */
-static int arm11_checksum_memory(struct target_s *target,
+static int arm11_checksum_memory(struct target *target,
 		uint32_t address, uint32_t count, uint32_t* checksum)
 {
 	return ERROR_FAIL;
@@ -1551,7 +1551,7 @@ static int arm11_checksum_memory(struct target_s *target,
 /* target break-/watchpoint control
 * rw: 0 = write, 1 = read, 2 = access
 */
-static int arm11_add_breakpoint(struct target_s *target,
+static int arm11_add_breakpoint(struct target *target,
 		struct breakpoint *breakpoint)
 {
 	FNC_INFO;
@@ -1583,7 +1583,7 @@ static int arm11_add_breakpoint(struct target_s *target,
 	return ERROR_OK;
 }
 
-static int arm11_remove_breakpoint(struct target_s *target,
+static int arm11_remove_breakpoint(struct target *target,
 		struct breakpoint *breakpoint)
 {
 	FNC_INFO;
@@ -1595,7 +1595,7 @@ static int arm11_remove_breakpoint(struct target_s *target,
 	return ERROR_OK;
 }
 
-static int arm11_add_watchpoint(struct target_s *target,
+static int arm11_add_watchpoint(struct target *target,
 		struct watchpoint *watchpoint)
 {
 	FNC_INFO_NOTIMPLEMENTED;
@@ -1603,7 +1603,7 @@ static int arm11_add_watchpoint(struct target_s *target,
 	return ERROR_OK;
 }
 
-static int arm11_remove_watchpoint(struct target_s *target,
+static int arm11_remove_watchpoint(struct target *target,
 		struct watchpoint *watchpoint)
 {
 	FNC_INFO_NOTIMPLEMENTED;
@@ -1613,7 +1613,7 @@ static int arm11_remove_watchpoint(struct target_s *target,
 
 // HACKHACKHACK - FIXME mode/state
 /* target algorithm support */
-static int arm11_run_algorithm(struct target_s *target,
+static int arm11_run_algorithm(struct target *target,
 		int num_mem_params, struct mem_param *mem_params,
 		int num_reg_params, struct reg_param *reg_params,
 		uint32_t entry_point, uint32_t exit_point,
@@ -1779,7 +1779,7 @@ restore:
 	return retval;
 }
 
-static int arm11_target_create(struct target_s *target, Jim_Interp *interp)
+static int arm11_target_create(struct target *target, Jim_Interp *interp)
 {
 	FNC_INFO;
 
@@ -1802,14 +1802,14 @@ static int arm11_target_create(struct target_s *target, Jim_Interp *interp)
 }
 
 static int arm11_init_target(struct command_context_s *cmd_ctx,
-		struct target_s *target)
+		struct target *target)
 {
 	/* Initialize anything we can set up without talking to the target */
 	return arm11_build_reg_cache(target);
 }
 
 /* talk to the target and set things up */
-static int arm11_examine(struct target_s *target)
+static int arm11_examine(struct target *target)
 {
 	int retval;
 
@@ -1895,7 +1895,7 @@ static int arm11_get_reg(struct reg *reg)
 {
 	FNC_INFO;
 
-	target_t * target = ((struct arm11_reg_state *)reg-&gt;arch_info)-&gt;target;
+	struct target * target = ((struct arm11_reg_state *)reg-&gt;arch_info)-&gt;target;
 
 	if (target-&gt;state != TARGET_HALTED)
 	{
@@ -1918,7 +1918,7 @@ static int arm11_set_reg(struct reg *reg, uint8_t *buf)
 {
 	FNC_INFO;
 
-	target_t * target = ((struct arm11_reg_state *)reg-&gt;arch_info)-&gt;target;
+	struct target * target = ((struct arm11_reg_state *)reg-&gt;arch_info)-&gt;target;
 	struct arm11_common *arm11 = target-&gt;arch_info;
 //	  const struct arm11_reg_defs * arm11_reg_info = arm11_reg_defs + ((struct arm11_reg_state *)reg-&gt;arch_info)-&gt;def_index;
 
@@ -1929,7 +1929,7 @@ static int arm11_set_reg(struct reg *reg, uint8_t *buf)
 	return ERROR_OK;
 }
 
-static int arm11_build_reg_cache(target_t *target)
+static int arm11_build_reg_cache(struct target *target)
 {
 	struct arm11_common *arm11 = target-&gt;arch_info;
 
@@ -2067,7 +2067,7 @@ static const uint32_t arm11_coproc_instruction_limits[] =
 static struct arm11_common * arm11_find_target(const char * arg)
 {
 	struct jtag_tap *	tap;
-	target_t *		t;
+	struct target *		t;
 
 	tap = jtag_tap_by_string(arg);
 
@@ -2087,7 +2087,7 @@ static struct arm11_common * arm11_find_target(const char * arg)
 	return 0;
 }
 
-static int arm11_mrc_inner(target_t *target, int cpnum,
+static int arm11_mrc_inner(struct target *target, int cpnum,
 		uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm,
 		uint32_t *value, bool read)
 {
@@ -2131,13 +2131,13 @@ static int arm11_mrc_inner(target_t *target, int cpnum,
 	return arm11_run_instr_data_finish(arm11);
 }
 
-static int arm11_mrc(target_t *target, int cpnum,
+static int arm11_mrc(struct target *target, int cpnum,
 		uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t *value)
 {
 	return arm11_mrc_inner(target, cpnum, op1, op2, CRn, CRm, value, true);
 }
 
-static int arm11_mcr(target_t *target, int cpnum,
+static int arm11_mcr(struct target *target, int cpnum,
 		uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t value)
 {
 	return arm11_mrc_inner(target, cpnum, op1, op2, CRn, CRm, &amp;value, false);
diff --git a/src/target/arm11.h b/src/target/arm11.h
index 6bc1a25..ae6a93c 100644
--- a/src/target/arm11.h
+++ b/src/target/arm11.h
@@ -80,7 +80,7 @@ enum arm11_debug_version
 
 struct arm11_common
 {
-	target_t *	target;		/**&lt; Reference back to the owner */
+	struct target *	target;		/**&lt; Reference back to the owner */
 
 	/** \name Processor type detection */
 	/*@{*/
@@ -179,7 +179,7 @@ enum arm11_sc7
 struct arm11_reg_state
 {
 	uint32_t				def_index;
-	target_t *			target;
+	struct target *			target;
 };
 
 int arm11_register_commands(struct command_context_s *cmd_ctx);
diff --git a/src/target/arm720t.c b/src/target/arm720t.c
index 7f2b403..ad4b12e 100644
--- a/src/target/arm720t.c
+++ b/src/target/arm720t.c
@@ -38,7 +38,7 @@
 #define _DEBUG_INSTRUCTION_EXECUTION_
 #endif
 
-static int arm720t_scan_cp15(target_t *target,
+static int arm720t_scan_cp15(struct target *target,
 		uint32_t out, uint32_t *in, int instruction, int clock)
 {
 	int retval;
@@ -102,7 +102,7 @@ static int arm720t_scan_cp15(target_t *target,
 	return ERROR_OK;
 }
 
-static int arm720t_read_cp15(target_t *target, uint32_t opcode, uint32_t *value)
+static int arm720t_read_cp15(struct target *target, uint32_t opcode, uint32_t *value)
 {
 	/* fetch CP15 opcode */
 	arm720t_scan_cp15(target, opcode, NULL, 1, 1);
@@ -119,7 +119,7 @@ static int arm720t_read_cp15(target_t *target, uint32_t opcode, uint32_t *value)
 	return ERROR_OK;
 }
 
-static int arm720t_write_cp15(target_t *target, uint32_t opcode, uint32_t value)
+static int arm720t_write_cp15(struct target *target, uint32_t opcode, uint32_t value)
 {
 	/* fetch CP15 opcode */
 	arm720t_scan_cp15(target, opcode, NULL, 1, 1);
@@ -135,7 +135,7 @@ static int arm720t_write_cp15(target_t *target, uint32_t opcode, uint32_t value)
 	return ERROR_OK;
 }
 
-static uint32_t arm720t_get_ttb(target_t *target)
+static uint32_t arm720t_get_ttb(struct target *target)
 {
 	uint32_t ttb = 0x0;
 
@@ -147,7 +147,7 @@ static uint32_t arm720t_get_ttb(target_t *target)
 	return ttb;
 }
 
-static void arm720t_disable_mmu_caches(target_t *target,
+static void arm720t_disable_mmu_caches(struct target *target,
 		int mmu, int d_u_cache, int i_cache)
 {
 	uint32_t cp15_control;
@@ -165,7 +165,7 @@ static void arm720t_disable_mmu_caches(target_t *target,
 	arm720t_write_cp15(target, 0xee010f10, cp15_control);
 }
 
-static void arm720t_enable_mmu_caches(target_t *target,
+static void arm720t_enable_mmu_caches(struct target *target,
 		int mmu, int d_u_cache, int i_cache)
 {
 	uint32_t cp15_control;
@@ -183,7 +183,7 @@ static void arm720t_enable_mmu_caches(target_t *target,
 	arm720t_write_cp15(target, 0xee010f10, cp15_control);
 }
 
-static void arm720t_post_debug_entry(target_t *target)
+static void arm720t_post_debug_entry(struct target *target)
 {
 	struct arm720t_common *arm720t = target_to_arm720(target);
 
@@ -202,7 +202,7 @@ static void arm720t_post_debug_entry(target_t *target)
 	jtag_execute_queue();
 }
 
-static void arm720t_pre_restore_context(target_t *target)
+static void arm720t_pre_restore_context(struct target *target)
 {
 	struct arm720t_common *arm720t = target_to_arm720(target);
 
@@ -221,7 +221,7 @@ static int arm720t_verify_pointer(struct command_context_s *cmd_ctx,
 	return ERROR_OK;
 }
 
-static int arm720t_arch_state(struct target_s *target)
+static int arm720t_arch_state(struct target *target)
 {
 	struct arm720t_common *arm720t = target_to_arm720(target);
 	struct armv4_5_common_s *armv4_5;
@@ -247,7 +247,7 @@ static int arm720t_arch_state(struct target_s *target)
 	return ERROR_OK;
 }
 
-static int arm720_mmu(struct target_s *target, int *enabled)
+static int arm720_mmu(struct target *target, int *enabled)
 {
 	if (target-&gt;state != TARGET_HALTED) {
 		LOG_ERROR(&quot;%s: target not halted&quot;, __func__);
@@ -258,7 +258,7 @@ static int arm720_mmu(struct target_s *target, int *enabled)
 	return ERROR_OK;
 }
 
-static int arm720_virt2phys(struct target_s *target,
+static int arm720_virt2phys(struct target *target,
 		uint32_t virt, uint32_t *phys)
 {
 	/** @todo Implement this!  */
@@ -266,7 +266,7 @@ static int arm720_virt2phys(struct target_s *target,
 	return ERROR_FAIL;
 }
 
-static int arm720t_read_memory(struct target_s *target,
+static int arm720t_read_memory(struct target *target,
 		uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	int retval;
@@ -284,7 +284,7 @@ static int arm720t_read_memory(struct target_s *target,
 	return retval;
 }
 
-static int arm720t_read_phys_memory(struct target_s *target,
+static int arm720t_read_phys_memory(struct target *target,
 		uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	struct arm720t_common *arm720t = target_to_arm720(target);
@@ -292,7 +292,7 @@ static int arm720t_read_phys_memory(struct target_s *target,
 	return armv4_5_mmu_read_physical(target, &amp;arm720t-&gt;armv4_5_mmu, address, size, count, buffer);
 }
 
-static int arm720t_write_phys_memory(struct target_s *target,
+static int arm720t_write_phys_memory(struct target *target,
 		uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	struct arm720t_common *arm720t = target_to_arm720(target);
@@ -300,7 +300,7 @@ static int arm720t_write_phys_memory(struct target_s *target,
 	return armv4_5_mmu_write_physical(target, &amp;arm720t-&gt;armv4_5_mmu, address, size, count, buffer);
 }
 
-static int arm720t_soft_reset_halt(struct target_s *target)
+static int arm720t_soft_reset_halt(struct target *target)
 {
 	int retval = ERROR_OK;
 	struct arm720t_common *arm720t = target_to_arm720(target);
@@ -371,12 +371,12 @@ static int arm720t_soft_reset_halt(struct target_s *target)
 	return ERROR_OK;
 }
 
-static int arm720t_init_target(struct command_context_s *cmd_ctx, struct target_s *target)
+static int arm720t_init_target(struct command_context_s *cmd_ctx, struct target *target)
 {
 	return arm7tdmi_init_target(cmd_ctx, target);
 }
 
-static int arm720t_init_arch_info(target_t *target,
+static int arm720t_init_arch_info(struct target *target,
 		struct arm720t_common *arm720t, struct jtag_tap *tap)
 {
 	struct arm7tdmi_common *arm7tdmi = &amp;arm720t-&gt;arm7tdmi_common;
@@ -401,7 +401,7 @@ static int arm720t_init_arch_info(target_t *target,
 	return ERROR_OK;
 }
 
-static int arm720t_target_create(struct target_s *target, Jim_Interp *interp)
+static int arm720t_target_create(struct target *target, Jim_Interp *interp)
 {
 	struct arm720t_common *arm720t = calloc(1, sizeof(*arm720t));
 
@@ -412,7 +412,7 @@ static int arm720t_target_create(struct target_s *target, Jim_Interp *interp)
 COMMAND_HANDLER(arm720t_handle_cp15_command)
 {
 	int retval;
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct arm720t_common *arm720t = target_to_arm720(target);
 	struct arm_jtag *jtag_info;
 
@@ -467,7 +467,7 @@ COMMAND_HANDLER(arm720t_handle_cp15_command)
 	return ERROR_OK;
 }
 
-static int arm720t_mrc(target_t *target, int cpnum, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t *value)
+static int arm720t_mrc(struct target *target, int cpnum, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t *value)
 {
 	if (cpnum!=15)
 	{
@@ -479,7 +479,7 @@ static int arm720t_mrc(target_t *target, int cpnum, uint32_t op1, uint32_t op2,
 
 }
 
-static int arm720t_mcr(target_t *target, int cpnum, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t value)
+static int arm720t_mcr(struct target *target, int cpnum, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t value)
 {
 	if (cpnum!=15)
 	{
diff --git a/src/target/arm720t.h b/src/target/arm720t.h
index ab9aef6..6bbac24 100644
--- a/src/target/arm720t.h
+++ b/src/target/arm720t.h
@@ -36,7 +36,7 @@ struct arm720t_common
 };
 
 static inline struct arm720t_common *
-target_to_arm720(struct target_s *target)
+target_to_arm720(struct target *target)
 {
 	return container_of(target-&gt;arch_info, struct arm720t_common,
 			arm7tdmi_common.arm7_9_common.armv4_5_common);
diff --git a/src/target/arm7_9_common.c b/src/target/arm7_9_common.c
index 0523d82..2d3fe15 100644
--- a/src/target/arm7_9_common.c
+++ b/src/target/arm7_9_common.c
@@ -37,7 +37,7 @@
 #include &quot;arm_simulator.h&quot;
 
 
-int arm7_9_debug_entry(target_t *target);
+int arm7_9_debug_entry(struct target *target);
 
 /**
  * Clear watchpoints for an ARM7/9 target.
@@ -159,7 +159,7 @@ static int arm7_9_set_software_breakpoints(struct arm7_9_common *arm7_9)
  * @param target Pointer to an ARM7/9 target to setup
  * @return Result of clearing the watchpoints on the target
  */
-int arm7_9_setup(target_t *target)
+int arm7_9_setup(struct target *target)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 
@@ -178,7 +178,7 @@ int arm7_9_setup(target_t *target)
  *                 targets
  * @return ERROR_OK if successful
  */
-int arm7_9_get_arch_pointers(target_t *target, struct arm **armv4_5_p, struct arm7_9_common **arm7_9_p)
+int arm7_9_get_arch_pointers(struct target *target, struct arm **armv4_5_p, struct arm7_9_common **arm7_9_p)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
@@ -210,7 +210,7 @@ int arm7_9_get_arch_pointers(target_t *target, struct arm **armv4_5_p, struct ar
  *         queue.  For software breakpoints, this will be the status of the
  *         required memory reads and writes
  */
-int arm7_9_set_breakpoint(struct target_s *target, struct breakpoint *breakpoint)
+int arm7_9_set_breakpoint(struct target *target, struct breakpoint *breakpoint)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	int retval = ERROR_OK;
@@ -339,7 +339,7 @@ int arm7_9_set_breakpoint(struct target_s *target, struct breakpoint *breakpoint
  *         queue.  For software breakpoints, this will be the status of the
  *         required memory reads and writes
  */
-int arm7_9_unset_breakpoint(struct target_s *target, struct breakpoint *breakpoint)
+int arm7_9_unset_breakpoint(struct target *target, struct breakpoint *breakpoint)
 {
 	int retval = ERROR_OK;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
@@ -434,7 +434,7 @@ int arm7_9_unset_breakpoint(struct target_s *target, struct breakpoint *breakpoi
  * @return An error status if there is a problem adding the breakpoint or the
  *         result of setting the breakpoint
  */
-int arm7_9_add_breakpoint(struct target_s *target, struct breakpoint *breakpoint)
+int arm7_9_add_breakpoint(struct target *target, struct breakpoint *breakpoint)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 
@@ -484,7 +484,7 @@ int arm7_9_add_breakpoint(struct target_s *target, struct breakpoint *breakpoint
  * @return Error status if there was a problem unsetting the breakpoint or the
  *         watchpoints could not be cleared
  */
-int arm7_9_remove_breakpoint(struct target_s *target, struct breakpoint *breakpoint)
+int arm7_9_remove_breakpoint(struct target *target, struct breakpoint *breakpoint)
 {
 	int retval = ERROR_OK;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
@@ -520,7 +520,7 @@ int arm7_9_remove_breakpoint(struct target_s *target, struct breakpoint *breakpo
  * @return Error status if watchpoint set fails or the result of executing the
  *         JTAG queue
  */
-int arm7_9_set_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
+int arm7_9_set_watchpoint(struct target *target, struct watchpoint *watchpoint)
 {
 	int retval = ERROR_OK;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
@@ -591,7 +591,7 @@ int arm7_9_set_watchpoint(struct target_s *target, struct watchpoint *watchpoint
  * @return Error status while trying to unset the watchpoint or the result of
  *         executing the JTAG queue
  */
-int arm7_9_unset_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
+int arm7_9_unset_watchpoint(struct target *target, struct watchpoint *watchpoint)
 {
 	int retval = ERROR_OK;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
@@ -639,7 +639,7 @@ int arm7_9_unset_watchpoint(struct target_s *target, struct watchpoint *watchpoi
  * @param watchpoint Pointer to the watchpoint to be added
  * @return Error status while trying to add the watchpoint
  */
-int arm7_9_add_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
+int arm7_9_add_watchpoint(struct target *target, struct watchpoint *watchpoint)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 
@@ -672,7 +672,7 @@ int arm7_9_add_watchpoint(struct target_s *target, struct watchpoint *watchpoint
  * @param watchpoint Pointer to the watchpoint to be removed
  * @return Result of trying to unset the watchpoint
  */
-int arm7_9_remove_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
+int arm7_9_remove_watchpoint(struct target *target, struct watchpoint *watchpoint)
 {
 	int retval = ERROR_OK;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
@@ -699,7 +699,7 @@ int arm7_9_remove_watchpoint(struct target_s *target, struct watchpoint *watchpo
  * @return Error status if there is a timeout or a problem while executing the
  *         JTAG queue
  */
-int arm7_9_execute_sys_speed(struct target_s *target)
+int arm7_9_execute_sys_speed(struct target *target)
 {
 	int retval;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
@@ -750,7 +750,7 @@ int arm7_9_execute_sys_speed(struct target_s *target)
  * @param target Pointer to the target to issue commands to
  * @return Always ERROR_OK
  */
-int arm7_9_execute_fast_sys_speed(struct target_s *target)
+int arm7_9_execute_fast_sys_speed(struct target *target)
 {
 	static int set = 0;
 	static uint8_t check_value[4], check_mask[4];
@@ -794,7 +794,7 @@ int arm7_9_execute_fast_sys_speed(struct target_s *target)
  * @param buffer Pointer to the buffer that will hold the data
  * @return The result of receiving data from the Embedded ICE unit
  */
-int arm7_9_target_request_data(target_t *target, uint32_t size, uint8_t *buffer)
+int arm7_9_target_request_data(struct target *target, uint32_t size, uint8_t *buffer)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
@@ -822,14 +822,14 @@ int arm7_9_target_request_data(target_t *target, uint32_t size, uint8_t *buffer)
  * target is running and the DCC control register has the W bit high, this will
  * execute the request on the target.
  *
- * @param priv Void pointer expected to be a target_t pointer
+ * @param priv Void pointer expected to be a struct target pointer
  * @return ERROR_OK unless there are issues with the JTAG queue or when reading
  *                  from the Embedded ICE unit
  */
 int arm7_9_handle_target_request(void *priv)
 {
 	int retval = ERROR_OK;
-	target_t *target = priv;
+	struct target *target = priv;
 	if (!target_was_examined(target))
 		return ERROR_OK;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
@@ -887,7 +887,7 @@ int arm7_9_handle_target_request(void *priv)
  * @param target Pointer to the ARM7/9 target to poll
  * @return ERROR_OK or an error status if a command fails
  */
-int arm7_9_poll(target_t *target)
+int arm7_9_poll(struct target *target)
 {
 	int retval;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
@@ -980,7 +980,7 @@ int arm7_9_poll(target_t *target)
  * @param target Pointer to an ARM7/9 target to assert reset on
  * @return ERROR_FAIL if the JTAG device does not have SRST, otherwise ERROR_OK
  */
-int arm7_9_assert_reset(target_t *target)
+int arm7_9_assert_reset(struct target *target)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 
@@ -1072,7 +1072,7 @@ int arm7_9_assert_reset(target_t *target)
  * @param target Pointer to the target to have the reset deasserted
  * @return ERROR_OK or an error from polling or halting the target
  */
-int arm7_9_deassert_reset(target_t *target)
+int arm7_9_deassert_reset(struct target *target)
 {
 	int retval = ERROR_OK;
 	LOG_DEBUG(&quot;target-&gt;state: %s&quot;,
@@ -1112,7 +1112,7 @@ int arm7_9_deassert_reset(target_t *target)
  * @param target Pointer to the ARM7/9 target to have halt cleared
  * @return Always ERROR_OK
  */
-int arm7_9_clear_halt(target_t *target)
+int arm7_9_clear_halt(struct target *target)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct reg *dbg_ctrl = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_CTRL];
@@ -1169,7 +1169,7 @@ int arm7_9_clear_halt(target_t *target)
  * @param target Pointer to the ARM7/9 target to be reset and halted by software
  * @return Error status if any of the commands fail, otherwise ERROR_OK
  */
-int arm7_9_soft_reset_halt(struct target_s *target)
+int arm7_9_soft_reset_halt(struct target *target)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
@@ -1282,7 +1282,7 @@ int arm7_9_soft_reset_halt(struct target_s *target)
  * @param target Pointer to the ARM7/9 target to be halted
  * @return Always ERROR_OK
  */
-int arm7_9_halt(target_t *target)
+int arm7_9_halt(struct target *target)
 {
 	if (target-&gt;state == TARGET_RESET)
 	{
@@ -1344,7 +1344,7 @@ int arm7_9_halt(target_t *target)
  * @param target Pointer to target that is entering debug mode
  * @return Error code if anything fails, otherwise ERROR_OK
  */
-int arm7_9_debug_entry(target_t *target)
+int arm7_9_debug_entry(struct target *target)
 {
 	int i;
 	uint32_t context[16];
@@ -1502,7 +1502,7 @@ int arm7_9_debug_entry(target_t *target)
  * @return Error if the target is not halted, has an invalid core mode, or if
  *         the JTAG queue fails to execute
  */
-int arm7_9_full_context(target_t *target)
+int arm7_9_full_context(struct target *target)
 {
 	int i;
 	int retval;
@@ -1595,7 +1595,7 @@ int arm7_9_full_context(target_t *target)
  * @return Error status if the target is not halted or the core mode in the
  *         armv4_5 struct is invalid.
  */
-int arm7_9_restore_context(target_t *target)
+int arm7_9_restore_context(struct target *target)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
@@ -1745,7 +1745,7 @@ int arm7_9_restore_context(target_t *target)
  * @param target Pointer to the ARM7/9 target to be restarted
  * @return Result of executing the JTAG queue
  */
-int arm7_9_restart_core(struct target_s *target)
+int arm7_9_restart_core(struct target *target)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
@@ -1768,7 +1768,7 @@ int arm7_9_restart_core(struct target_s *target)
  *
  * @param target Pointer to the ARM7/9 target to enable watchpoints on
  */
-void arm7_9_enable_watchpoints(struct target_s *target)
+void arm7_9_enable_watchpoints(struct target *target)
 {
 	struct watchpoint *watchpoint = target-&gt;watchpoints;
 
@@ -1786,7 +1786,7 @@ void arm7_9_enable_watchpoints(struct target_s *target)
  *
  * @param target Pointer to the ARM7/9 target to enable breakpoints on
  */
-void arm7_9_enable_breakpoints(struct target_s *target)
+void arm7_9_enable_breakpoints(struct target *target)
 {
 	struct breakpoint *breakpoint = target-&gt;breakpoints;
 
@@ -1798,7 +1798,7 @@ void arm7_9_enable_breakpoints(struct target_s *target)
 	}
 }
 
-int arm7_9_resume(struct target_s *target, int current, uint32_t address, int handle_breakpoints, int debug_execution)
+int arm7_9_resume(struct target *target, int current, uint32_t address, int handle_breakpoints, int debug_execution)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
@@ -1958,7 +1958,7 @@ int arm7_9_resume(struct target_s *target, int current, uint32_t address, int ha
 	return ERROR_OK;
 }
 
-void arm7_9_enable_eice_step(target_t *target, uint32_t next_pc)
+void arm7_9_enable_eice_step(struct target *target, uint32_t next_pc)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
@@ -1995,7 +1995,7 @@ void arm7_9_enable_eice_step(target_t *target, uint32_t next_pc)
 	}
 }
 
-void arm7_9_disable_eice_step(target_t *target)
+void arm7_9_disable_eice_step(struct target *target)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 
@@ -2010,7 +2010,7 @@ void arm7_9_disable_eice_step(target_t *target)
 	embeddedice_store_reg(&amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_W1_CONTROL_VALUE]);
 }
 
-int arm7_9_step(struct target_s *target, int current, uint32_t address, int handle_breakpoints)
+int arm7_9_step(struct target *target, int current, uint32_t address, int handle_breakpoints)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
@@ -2103,7 +2103,7 @@ int arm7_9_step(struct target_s *target, int current, uint32_t address, int hand
 	return err;
 }
 
-int arm7_9_read_core_reg(struct target_s *target, int num, enum armv4_5_mode mode)
+int arm7_9_read_core_reg(struct target *target, int num, enum armv4_5_mode mode)
 {
 	uint32_t* reg_p[16];
 	uint32_t value;
@@ -2169,7 +2169,7 @@ int arm7_9_read_core_reg(struct target_s *target, int num, enum armv4_5_mode mod
 	return ERROR_OK;
 }
 
-int arm7_9_write_core_reg(struct target_s *target, int num, enum armv4_5_mode mode, uint32_t value)
+int arm7_9_write_core_reg(struct target *target, int num, enum armv4_5_mode mode, uint32_t value)
 {
 	uint32_t reg[16];
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
@@ -2230,7 +2230,7 @@ int arm7_9_write_core_reg(struct target_s *target, int num, enum armv4_5_mode mo
 	return jtag_execute_queue();
 }
 
-int arm7_9_read_memory(struct target_s *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
+int arm7_9_read_memory(struct target *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
@@ -2405,7 +2405,7 @@ int arm7_9_read_memory(struct target_s *target, uint32_t address, uint32_t size,
 	return ERROR_OK;
 }
 
-int arm7_9_write_memory(struct target_s *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
+int arm7_9_write_memory(struct target *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
@@ -2591,7 +2591,7 @@ int arm7_9_write_memory(struct target_s *target, uint32_t address, uint32_t size
 static int dcc_count;
 static uint8_t *dcc_buffer;
 
-static int arm7_9_dcc_completion(struct target_s *target, uint32_t exit_point, int timeout_ms, void *arch_info)
+static int arm7_9_dcc_completion(struct target *target, uint32_t exit_point, int timeout_ms, void *arch_info)
 {
 	int retval = ERROR_OK;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
@@ -2654,9 +2654,9 @@ static const uint32_t dcc_code[] =
 	0xeafffff9	/*    b   w                   */
 };
 
-int armv4_5_run_algorithm_inner(struct target_s *target, int num_mem_params, struct mem_param *mem_params, int num_reg_params, struct reg_param *reg_params, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info, int (*run_it)(struct target_s *target, uint32_t exit_point, int timeout_ms, void *arch_info));
+int armv4_5_run_algorithm_inner(struct target *target, int num_mem_params, struct mem_param *mem_params, int num_reg_params, struct reg_param *reg_params, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info, int (*run_it)(struct target *target, uint32_t exit_point, int timeout_ms, void *arch_info));
 
-int arm7_9_bulk_write_memory(target_t *target, uint32_t address, uint32_t count, uint8_t *buffer)
+int arm7_9_bulk_write_memory(struct target *target, uint32_t address, uint32_t count, uint8_t *buffer)
 {
 	int retval;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
@@ -2721,7 +2721,7 @@ int arm7_9_bulk_write_memory(target_t *target, uint32_t address, uint32_t count,
 	return retval;
 }
 
-int arm7_9_checksum_memory(struct target_s *target, uint32_t address, uint32_t count, uint32_t* checksum)
+int arm7_9_checksum_memory(struct target *target, uint32_t address, uint32_t count, uint32_t* checksum)
 {
 	struct working_area *crc_algorithm;
 	struct armv4_5_algorithm armv4_5_info;
@@ -2805,7 +2805,7 @@ int arm7_9_checksum_memory(struct target_s *target, uint32_t address, uint32_t c
 	return ERROR_OK;
 }
 
-int arm7_9_blank_check_memory(struct target_s *target, uint32_t address, uint32_t count, uint32_t* blank)
+int arm7_9_blank_check_memory(struct target *target, uint32_t address, uint32_t count, uint32_t* blank)
 {
 	struct working_area *erase_check_algorithm;
 	struct reg_param reg_params[3];
@@ -2876,7 +2876,7 @@ COMMAND_HANDLER(handle_arm7_9_write_xpsr_command)
 	uint32_t value;
 	int spsr;
 	int retval;
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct arm *armv4_5;
 	struct arm7_9_common *arm7_9;
 
@@ -2921,7 +2921,7 @@ COMMAND_HANDLER(handle_arm7_9_write_xpsr_im8_command)
 	int rotate;
 	int spsr;
 	int retval;
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct arm *armv4_5;
 	struct arm7_9_common *arm7_9;
 
@@ -2962,7 +2962,7 @@ COMMAND_HANDLER(handle_arm7_9_write_core_reg_command)
 	uint32_t value;
 	uint32_t mode;
 	int num;
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct arm *armv4_5;
 	struct arm7_9_common *arm7_9;
 
@@ -2993,7 +2993,7 @@ COMMAND_HANDLER(handle_arm7_9_write_core_reg_command)
 
 COMMAND_HANDLER(handle_arm7_9_dbgrq_command)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct arm *armv4_5;
 	struct arm7_9_common *arm7_9;
 
@@ -3026,7 +3026,7 @@ COMMAND_HANDLER(handle_arm7_9_dbgrq_command)
 
 COMMAND_HANDLER(handle_arm7_9_fast_memory_access_command)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct arm *armv4_5;
 	struct arm7_9_common *arm7_9;
 
@@ -3059,7 +3059,7 @@ COMMAND_HANDLER(handle_arm7_9_fast_memory_access_command)
 
 COMMAND_HANDLER(handle_arm7_9_dcc_downloads_command)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct arm *armv4_5;
 	struct arm7_9_common *arm7_9;
 
@@ -3090,7 +3090,7 @@ COMMAND_HANDLER(handle_arm7_9_dcc_downloads_command)
 	return ERROR_OK;
 }
 
-int arm7_9_init_arch_info(target_t *target, struct arm7_9_common *arm7_9)
+int arm7_9_init_arch_info(struct target *target, struct arm7_9_common *arm7_9)
 {
 	int retval = ERROR_OK;
 	struct arm *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
diff --git a/src/target/arm7_9_common.h b/src/target/arm7_9_common.h
index 41858c6..2c50b71 100644
--- a/src/target/arm7_9_common.h
+++ b/src/target/arm7_9_common.h
@@ -71,45 +71,45 @@ struct arm7_9_common
 
 	struct working_area *dcc_working_area;
 
-	int (*examine_debug_reason)(target_t *target); /**&lt; Function for determining why debug state was entered */
+	int (*examine_debug_reason)(struct target *target); /**&lt; Function for determining why debug state was entered */
 
-	void (*change_to_arm)(target_t *target, uint32_t *r0, uint32_t *pc); /**&lt; Function for changing from Thumb to ARM mode */
+	void (*change_to_arm)(struct target *target, uint32_t *r0, uint32_t *pc); /**&lt; Function for changing from Thumb to ARM mode */
 
-	void (*read_core_regs)(target_t *target, uint32_t mask, uint32_t *core_regs[16]); /**&lt; Function for reading the core registers */
-	void (*read_core_regs_target_buffer)(target_t *target, uint32_t mask, void *buffer, int size);
-	void (*read_xpsr)(target_t *target, uint32_t *xpsr, int spsr); /**&lt; Function for reading CPSR or SPSR */
+	void (*read_core_regs)(struct target *target, uint32_t mask, uint32_t *core_regs[16]); /**&lt; Function for reading the core registers */
+	void (*read_core_regs_target_buffer)(struct target *target, uint32_t mask, void *buffer, int size);
+	void (*read_xpsr)(struct target *target, uint32_t *xpsr, int spsr); /**&lt; Function for reading CPSR or SPSR */
 
-	void (*write_xpsr)(target_t *target, uint32_t xpsr, int spsr); /**&lt; Function for writing to CPSR or SPSR */
-	void (*write_xpsr_im8)(target_t *target, uint8_t xpsr_im, int rot, int spsr); /**&lt; Function for writing an immediate value to CPSR or SPSR */
-	void (*write_core_regs)(target_t *target, uint32_t mask, uint32_t core_regs[16]);
+	void (*write_xpsr)(struct target *target, uint32_t xpsr, int spsr); /**&lt; Function for writing to CPSR or SPSR */
+	void (*write_xpsr_im8)(struct target *target, uint8_t xpsr_im, int rot, int spsr); /**&lt; Function for writing an immediate value to CPSR or SPSR */
+	void (*write_core_regs)(struct target *target, uint32_t mask, uint32_t core_regs[16]);
 
-	void (*load_word_regs)(target_t *target, uint32_t mask);
-	void (*load_hword_reg)(target_t *target, int num);
-	void (*load_byte_reg)(target_t *target, int num);
+	void (*load_word_regs)(struct target *target, uint32_t mask);
+	void (*load_hword_reg)(struct target *target, int num);
+	void (*load_byte_reg)(struct target *target, int num);
 
-	void (*store_word_regs)(target_t *target, uint32_t mask);
-	void (*store_hword_reg)(target_t *target, int num);
-	void (*store_byte_reg)(target_t *target, int num);
+	void (*store_word_regs)(struct target *target, uint32_t mask);
+	void (*store_hword_reg)(struct target *target, int num);
+	void (*store_byte_reg)(struct target *target, int num);
 
-	void (*write_pc)(target_t *target, uint32_t pc); /**&lt; Function for writing to the program counter */
-	void (*branch_resume)(target_t *target);
-	void (*branch_resume_thumb)(target_t *target);
+	void (*write_pc)(struct target *target, uint32_t pc); /**&lt; Function for writing to the program counter */
+	void (*branch_resume)(struct target *target);
+	void (*branch_resume_thumb)(struct target *target);
 
-	void (*enable_single_step)(target_t *target, uint32_t next_pc);
-	void (*disable_single_step)(target_t *target);
+	void (*enable_single_step)(struct target *target, uint32_t next_pc);
+	void (*disable_single_step)(struct target *target);
 
-	void (*set_special_dbgrq)(target_t *target); /**&lt; Function for setting DBGRQ if the normal way won't work */
+	void (*set_special_dbgrq)(struct target *target); /**&lt; Function for setting DBGRQ if the normal way won't work */
 
-	void (*post_debug_entry)(target_t *target); /**&lt; Callback function called after entering debug mode */
+	void (*post_debug_entry)(struct target *target); /**&lt; Callback function called after entering debug mode */
 
-	void (*pre_restore_context)(target_t *target); /**&lt; Callback function called before restoring the processor context */
-	void (*post_restore_context)(target_t *target); /**&lt; Callback function called after restoring the processor context */
+	void (*pre_restore_context)(struct target *target); /**&lt; Callback function called before restoring the processor context */
+	void (*post_restore_context)(struct target *target); /**&lt; Callback function called after restoring the processor context */
 
 
 };
 
 static inline struct arm7_9_common *
-target_to_arm7_9(struct target_s *target)
+target_to_arm7_9(struct target *target)
 {
 	return container_of(target-&gt;arch_info, struct arm7_9_common,
 			armv4_5_common);
@@ -117,43 +117,43 @@ target_to_arm7_9(struct target_s *target)
 
 int arm7_9_register_commands(struct command_context_s *cmd_ctx);
 
-int arm7_9_poll(target_t *target);
+int arm7_9_poll(struct target *target);
 
-int arm7_9_target_request_data(target_t *target, uint32_t size, uint8_t *buffer);
+int arm7_9_target_request_data(struct target *target, uint32_t size, uint8_t *buffer);
 
-int arm7_9_setup(target_t *target);
-int arm7_9_assert_reset(target_t *target);
-int arm7_9_deassert_reset(target_t *target);
-int arm7_9_reset_request_halt(target_t *target);
-int arm7_9_early_halt(target_t *target);
-int arm7_9_soft_reset_halt(struct target_s *target);
-int arm7_9_prepare_reset_halt(struct target_s *target);
+int arm7_9_setup(struct target *target);
+int arm7_9_assert_reset(struct target *target);
+int arm7_9_deassert_reset(struct target *target);
+int arm7_9_reset_request_halt(struct target *target);
+int arm7_9_early_halt(struct target *target);
+int arm7_9_soft_reset_halt(struct target *target);
+int arm7_9_prepare_reset_halt(struct target *target);
 
-int arm7_9_halt(target_t *target);
-int arm7_9_full_context(target_t *target);
-int arm7_9_restore_context(target_t *target);
-int arm7_9_resume(struct target_s *target, int current, uint32_t address, int handle_breakpoints, int debug_execution);
-int arm7_9_step(struct target_s *target, int current, uint32_t address, int handle_breakpoints);
-int arm7_9_read_core_reg(struct target_s *target, int num, enum armv4_5_mode mode);
-int arm7_9_read_memory(struct target_s *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer);
-int arm7_9_write_memory(struct target_s *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer);
-int arm7_9_bulk_write_memory(target_t *target, uint32_t address, uint32_t count, uint8_t *buffer);
-int arm7_9_checksum_memory(struct target_s *target, uint32_t address, uint32_t count, uint32_t* checksum);
-int arm7_9_blank_check_memory(struct target_s *target, uint32_t address, uint32_t count, uint32_t* blank);
+int arm7_9_halt(struct target *target);
+int arm7_9_full_context(struct target *target);
+int arm7_9_restore_context(struct target *target);
+int arm7_9_resume(struct target *target, int current, uint32_t address, int handle_breakpoints, int debug_execution);
+int arm7_9_step(struct target *target, int current, uint32_t address, int handle_breakpoints);
+int arm7_9_read_core_reg(struct target *target, int num, enum armv4_5_mode mode);
+int arm7_9_read_memory(struct target *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer);
+int arm7_9_write_memory(struct target *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer);
+int arm7_9_bulk_write_memory(struct target *target, uint32_t address, uint32_t count, uint8_t *buffer);
+int arm7_9_checksum_memory(struct target *target, uint32_t address, uint32_t count, uint32_t* checksum);
+int arm7_9_blank_check_memory(struct target *target, uint32_t address, uint32_t count, uint32_t* blank);
 
-int arm7_9_run_algorithm(struct target_s *target, int num_mem_params, struct mem_param *mem_params, int num_reg_prams, struct reg_param *reg_param, uint32_t entry_point, void *arch_info);
+int arm7_9_run_algorithm(struct target *target, int num_mem_params, struct mem_param *mem_params, int num_reg_prams, struct reg_param *reg_param, uint32_t entry_point, void *arch_info);
 
-int arm7_9_add_breakpoint(struct target_s *target, struct breakpoint *breakpoint);
-int arm7_9_remove_breakpoint(struct target_s *target, struct breakpoint *breakpoint);
-int arm7_9_add_watchpoint(struct target_s *target, struct watchpoint *watchpoint);
-int arm7_9_remove_watchpoint(struct target_s *target, struct watchpoint *watchpoint);
+int arm7_9_add_breakpoint(struct target *target, struct breakpoint *breakpoint);
+int arm7_9_remove_breakpoint(struct target *target, struct breakpoint *breakpoint);
+int arm7_9_add_watchpoint(struct target *target, struct watchpoint *watchpoint);
+int arm7_9_remove_watchpoint(struct target *target, struct watchpoint *watchpoint);
 
-void arm7_9_enable_eice_step(target_t *target, uint32_t next_pc);
-void arm7_9_disable_eice_step(target_t *target);
+void arm7_9_enable_eice_step(struct target *target, uint32_t next_pc);
+void arm7_9_disable_eice_step(struct target *target);
 
-int arm7_9_execute_sys_speed(struct target_s *target);
+int arm7_9_execute_sys_speed(struct target *target);
 
-int arm7_9_init_arch_info(target_t *target, struct arm7_9_common *arm7_9);
-int arm7_9_get_arch_pointers(target_t *target, struct arm **armv4_5_p, struct arm7_9_common **arm7_9_p);
+int arm7_9_init_arch_info(struct target *target, struct arm7_9_common *arm7_9);
+int arm7_9_get_arch_pointers(struct target *target, struct arm **armv4_5_p, struct arm7_9_common **arm7_9_p);
 
 #endif /* ARM7_9_COMMON_H */
diff --git a/src/target/arm7tdmi.c b/src/target/arm7tdmi.c
index 1beae89..c4cda7d 100644
--- a/src/target/arm7tdmi.c
+++ b/src/target/arm7tdmi.c
@@ -41,7 +41,7 @@
 #define _DEBUG_INSTRUCTION_EXECUTION_
 #endif
 
-static int arm7tdmi_examine_debug_reason(target_t *target)
+static int arm7tdmi_examine_debug_reason(struct target *target)
 {
 	int retval = ERROR_OK;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
@@ -263,7 +263,7 @@ static int arm7tdmi_clock_data_in_endianness(struct arm_jtag *jtag_info,
 	return ERROR_OK;
 }
 
-static void arm7tdmi_change_to_arm(target_t *target,
+static void arm7tdmi_change_to_arm(struct target *target,
 		uint32_t *r0, uint32_t *pc)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
@@ -319,7 +319,7 @@ static void arm7tdmi_change_to_arm(target_t *target,
  * The solution is to arrange for a large out/in scan in this loop and
  * and convert data afterwards.
  */
-static void arm7tdmi_read_core_regs(target_t *target,
+static void arm7tdmi_read_core_regs(struct target *target,
 		uint32_t mask, uint32_t* core_regs[16])
 {
 	int i;
@@ -344,7 +344,7 @@ static void arm7tdmi_read_core_regs(target_t *target,
 	}
 }
 
-static void arm7tdmi_read_core_regs_target_buffer(target_t *target,
+static void arm7tdmi_read_core_regs_target_buffer(struct target *target,
 		uint32_t mask, void* buffer, int size)
 {
 	int i;
@@ -386,7 +386,7 @@ static void arm7tdmi_read_core_regs_target_buffer(target_t *target,
 	}
 }
 
-static void arm7tdmi_read_xpsr(target_t *target, uint32_t *xpsr, int spsr)
+static void arm7tdmi_read_xpsr(struct target *target, uint32_t *xpsr, int spsr)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
@@ -404,7 +404,7 @@ static void arm7tdmi_read_xpsr(target_t *target, uint32_t *xpsr, int spsr)
 	arm7tdmi_clock_data_in(jtag_info, xpsr);
 }
 
-static void arm7tdmi_write_xpsr(target_t *target, uint32_t xpsr, int spsr)
+static void arm7tdmi_write_xpsr(struct target *target, uint32_t xpsr, int spsr)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
@@ -433,7 +433,7 @@ static void arm7tdmi_write_xpsr(target_t *target, uint32_t xpsr, int spsr)
 	arm7tdmi_clock_out(jtag_info, ARMV4_5_NOP, NULL, 0);
 }
 
-static void arm7tdmi_write_xpsr_im8(target_t *target,
+static void arm7tdmi_write_xpsr_im8(struct target *target,
 		uint8_t xpsr_im, int rot, int spsr)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
@@ -451,7 +451,7 @@ static void arm7tdmi_write_xpsr_im8(target_t *target,
 	arm7tdmi_clock_out(jtag_info, ARMV4_5_NOP, NULL, 0);
 }
 
-static void arm7tdmi_write_core_regs(target_t *target,
+static void arm7tdmi_write_core_regs(struct target *target,
 		uint32_t mask, uint32_t core_regs[16])
 {
 	int i;
@@ -477,7 +477,7 @@ static void arm7tdmi_write_core_regs(target_t *target,
 	arm7tdmi_clock_out_inner(jtag_info, ARMV4_5_NOP, 0);
 }
 
-static void arm7tdmi_load_word_regs(target_t *target, uint32_t mask)
+static void arm7tdmi_load_word_regs(struct target *target, uint32_t mask)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
@@ -488,7 +488,7 @@ static void arm7tdmi_load_word_regs(target_t *target, uint32_t mask)
 	arm7tdmi_clock_out(jtag_info, ARMV4_5_LDMIA(0, mask &amp; 0xffff, 0, 1), NULL, 0);
 }
 
-static void arm7tdmi_load_hword_reg(target_t *target, int num)
+static void arm7tdmi_load_hword_reg(struct target *target, int num)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
@@ -499,7 +499,7 @@ static void arm7tdmi_load_hword_reg(target_t *target, int num)
 	arm7tdmi_clock_out(jtag_info, ARMV4_5_LDRH_IP(num, 0), NULL, 0);
 }
 
-static void arm7tdmi_load_byte_reg(target_t *target, int num)
+static void arm7tdmi_load_byte_reg(struct target *target, int num)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
@@ -510,7 +510,7 @@ static void arm7tdmi_load_byte_reg(target_t *target, int num)
 	arm7tdmi_clock_out(jtag_info, ARMV4_5_LDRB_IP(num, 0), NULL, 0);
 }
 
-static void arm7tdmi_store_word_regs(target_t *target, uint32_t mask)
+static void arm7tdmi_store_word_regs(struct target *target, uint32_t mask)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
@@ -521,7 +521,7 @@ static void arm7tdmi_store_word_regs(target_t *target, uint32_t mask)
 	arm7tdmi_clock_out(jtag_info, ARMV4_5_STMIA(0, mask, 0, 1), NULL, 0);
 }
 
-static void arm7tdmi_store_hword_reg(target_t *target, int num)
+static void arm7tdmi_store_hword_reg(struct target *target, int num)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
@@ -532,7 +532,7 @@ static void arm7tdmi_store_hword_reg(target_t *target, int num)
 	arm7tdmi_clock_out(jtag_info, ARMV4_5_STRH_IP(num, 0), NULL, 0);
 }
 
-static void arm7tdmi_store_byte_reg(target_t *target, int num)
+static void arm7tdmi_store_byte_reg(struct target *target, int num)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
@@ -543,7 +543,7 @@ static void arm7tdmi_store_byte_reg(target_t *target, int num)
 	arm7tdmi_clock_out(jtag_info, ARMV4_5_STRB_IP(num, 0), NULL, 0);
 }
 
-static void arm7tdmi_write_pc(target_t *target, uint32_t pc)
+static void arm7tdmi_write_pc(struct target *target, uint32_t pc)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
@@ -568,7 +568,7 @@ static void arm7tdmi_write_pc(target_t *target, uint32_t pc)
 	arm7tdmi_clock_out_inner(jtag_info, ARMV4_5_NOP, 0);
 }
 
-static void arm7tdmi_branch_resume(target_t *target)
+static void arm7tdmi_branch_resume(struct target *target)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
@@ -577,7 +577,7 @@ static void arm7tdmi_branch_resume(target_t *target)
 	arm7tdmi_clock_out_inner(jtag_info, ARMV4_5_B(0xfffffa, 0), 0);
 }
 
-static void arm7tdmi_branch_resume_thumb(target_t *target)
+static void arm7tdmi_branch_resume_thumb(struct target *target)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
@@ -637,7 +637,7 @@ static void arm7tdmi_branch_resume_thumb(target_t *target)
 	arm7tdmi_clock_out(jtag_info, ARMV4_5_T_B(0x7f8), NULL, 0);
 }
 
-static void arm7tdmi_build_reg_cache(target_t *target)
+static void arm7tdmi_build_reg_cache(struct target *target)
 {
 	struct reg_cache **cache_p = register_get_last_cache_p(&amp;target-&gt;reg_cache);
 	struct armv4_5_common_s *armv4_5 = target_to_armv4_5(target);
@@ -646,7 +646,7 @@ static void arm7tdmi_build_reg_cache(target_t *target)
 	armv4_5-&gt;core_cache = (*cache_p);
 }
 
-int arm7tdmi_examine(struct target_s *target)
+int arm7tdmi_examine(struct target *target)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	int retval;
@@ -684,14 +684,14 @@ int arm7tdmi_examine(struct target_s *target)
 	return ERROR_OK;
 }
 
-int arm7tdmi_init_target(struct command_context_s *cmd_ctx, struct target_s *target)
+int arm7tdmi_init_target(struct command_context_s *cmd_ctx, struct target *target)
 {
 	arm7tdmi_build_reg_cache(target);
 
 	return ERROR_OK;
 }
 
-int arm7tdmi_init_arch_info(target_t *target, struct arm7tdmi_common *arm7tdmi, struct jtag_tap *tap)
+int arm7tdmi_init_arch_info(struct target *target, struct arm7tdmi_common *arm7tdmi, struct jtag_tap *tap)
 {
 	struct arm7_9_common *arm7_9 = &amp;arm7tdmi-&gt;arm7_9_common;
 
@@ -741,7 +741,7 @@ int arm7tdmi_init_arch_info(target_t *target, struct arm7tdmi_common *arm7tdmi,
 	return ERROR_OK;
 }
 
-static int arm7tdmi_target_create(struct target_s *target, Jim_Interp *interp)
+static int arm7tdmi_target_create(struct target *target, Jim_Interp *interp)
 {
 	struct arm7tdmi_common *arm7tdmi;
 
diff --git a/src/target/arm7tdmi.h b/src/target/arm7tdmi.h
index 4faec18..4a0a1ed 100644
--- a/src/target/arm7tdmi.h
+++ b/src/target/arm7tdmi.h
@@ -33,8 +33,8 @@ struct arm7tdmi_common
 	struct arm7_9_common arm7_9_common;
 };
 
-int arm7tdmi_init_arch_info(target_t *target, struct arm7tdmi_common *arm7tdmi, struct jtag_tap *tap);
-int arm7tdmi_init_target(struct command_context_s *cmd_ctx, struct target_s *target);
-int arm7tdmi_examine(struct target_s *target);
+int arm7tdmi_init_arch_info(struct target *target, struct arm7tdmi_common *arm7tdmi, struct jtag_tap *tap);
+int arm7tdmi_init_target(struct command_context_s *cmd_ctx, struct target *target);
+int arm7tdmi_examine(struct target *target);
 
 #endif /* ARM7TDMI_H */
diff --git a/src/target/arm920t.c b/src/target/arm920t.c
index 0173550..577bf26 100644
--- a/src/target/arm920t.c
+++ b/src/target/arm920t.c
@@ -51,7 +51,7 @@
 
 #define ARM920T_CP15_PHYS_ADDR(x, y, z) ((x &lt;&lt; 5) | (y &lt;&lt; 1) &lt;&lt; (z))
 
-static int arm920t_read_cp15_physical(target_t *target,
+static int arm920t_read_cp15_physical(struct target *target,
 		int reg_addr, uint32_t *value)
 {
 	struct arm920t_common *arm920t = target_to_arm920(target);
@@ -103,7 +103,7 @@ static int arm920t_read_cp15_physical(target_t *target,
 	return ERROR_OK;
 }
 
-static int arm920t_write_cp15_physical(target_t *target,
+static int arm920t_write_cp15_physical(struct target *target,
 		int reg_addr, uint32_t value)
 {
 	struct arm920t_common *arm920t = target_to_arm920(target);
@@ -151,7 +151,7 @@ static int arm920t_write_cp15_physical(target_t *target,
 	return ERROR_OK;
 }
 
-static int arm920t_execute_cp15(target_t *target, uint32_t cp15_opcode,
+static int arm920t_execute_cp15(struct target *target, uint32_t cp15_opcode,
 		uint32_t arm_opcode)
 {
 	int retval;
@@ -208,7 +208,7 @@ static int arm920t_execute_cp15(target_t *target, uint32_t cp15_opcode,
 	return ERROR_OK;
 }
 
-static int arm920t_read_cp15_interpreted(target_t *target,
+static int arm920t_read_cp15_interpreted(struct target *target,
 		uint32_t cp15_opcode, uint32_t address, uint32_t *value)
 {
 	struct armv4_5_common_s *armv4_5 = target_to_armv4_5(target);
@@ -253,7 +253,7 @@ static int arm920t_read_cp15_interpreted(target_t *target,
 }
 
 static
-int arm920t_write_cp15_interpreted(target_t *target,
+int arm920t_write_cp15_interpreted(struct target *target,
 		uint32_t cp15_opcode, uint32_t value, uint32_t address)
 {
 	uint32_t cp15c15 = 0x0;
@@ -293,7 +293,7 @@ int arm920t_write_cp15_interpreted(target_t *target,
 }
 
 // EXPORTED to FA256
-uint32_t arm920t_get_ttb(target_t *target)
+uint32_t arm920t_get_ttb(struct target *target)
 {
 	int retval;
 	uint32_t ttb = 0x0;
@@ -305,7 +305,7 @@ uint32_t arm920t_get_ttb(target_t *target)
 }
 
 // EXPORTED to FA256
-void arm920t_disable_mmu_caches(target_t *target, int mmu, int d_u_cache, int i_cache)
+void arm920t_disable_mmu_caches(struct target *target, int mmu, int d_u_cache, int i_cache)
 {
 	uint32_t cp15_control;
 
@@ -326,7 +326,7 @@ void arm920t_disable_mmu_caches(target_t *target, int mmu, int d_u_cache, int i_
 }
 
 // EXPORTED to FA256
-void arm920t_enable_mmu_caches(target_t *target, int mmu, int d_u_cache, int i_cache)
+void arm920t_enable_mmu_caches(struct target *target, int mmu, int d_u_cache, int i_cache)
 {
 	uint32_t cp15_control;
 
@@ -347,7 +347,7 @@ void arm920t_enable_mmu_caches(target_t *target, int mmu, int d_u_cache, int i_c
 }
 
 // EXPORTED to FA256
-void arm920t_post_debug_entry(target_t *target)
+void arm920t_post_debug_entry(struct target *target)
 {
 	uint32_t cp15c15;
 	struct arm920t_common *arm920t = target_to_arm920(target);
@@ -391,7 +391,7 @@ void arm920t_post_debug_entry(target_t *target)
 }
 
 // EXPORTED to FA256
-void arm920t_pre_restore_context(target_t *target)
+void arm920t_pre_restore_context(struct target *target)
 {
 	uint32_t cp15c15;
 	struct arm920t_common *arm920t = target_to_arm920(target);
@@ -427,7 +427,7 @@ static int arm920t_verify_pointer(struct command_context_s *cmd_ctx,
 }
 
 /** Logs summary of ARM920 state for a halted target. */
-int arm920t_arch_state(struct target_s *target)
+int arm920t_arch_state(struct target *target)
 {
 	static const char *state[] =
 	{
@@ -460,7 +460,7 @@ int arm920t_arch_state(struct target_s *target)
 	return ERROR_OK;
 }
 
-static int arm920_mmu(struct target_s *target, int *enabled)
+static int arm920_mmu(struct target *target, int *enabled)
 {
 	if (target-&gt;state != TARGET_HALTED) {
 		LOG_ERROR(&quot;%s: target not halted&quot;, __func__);
@@ -471,7 +471,7 @@ static int arm920_mmu(struct target_s *target, int *enabled)
 	return ERROR_OK;
 }
 
-static int arm920_virt2phys(struct target_s *target,
+static int arm920_virt2phys(struct target *target,
 		uint32_t virt, uint32_t *phys)
 {
 	/** @todo Implement this!  */
@@ -480,7 +480,7 @@ static int arm920_virt2phys(struct target_s *target,
 }
 
 /** Reads a buffer, in the specified word size, with current MMU settings. */
-int arm920t_read_memory(struct target_s *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
+int arm920t_read_memory(struct target *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	int retval;
 
@@ -490,7 +490,7 @@ int arm920t_read_memory(struct target_s *target, uint32_t address, uint32_t size
 }
 
 
-static int arm920t_read_phys_memory(struct target_s *target,
+static int arm920t_read_phys_memory(struct target *target,
 		uint32_t address, uint32_t size,
 		uint32_t count, uint8_t *buffer)
 {
@@ -500,7 +500,7 @@ static int arm920t_read_phys_memory(struct target_s *target,
 			address, size, count, buffer);
 }
 
-static int arm920t_write_phys_memory(struct target_s *target,
+static int arm920t_write_phys_memory(struct target *target,
 		uint32_t address, uint32_t size,
 		uint32_t count, uint8_t *buffer)
 {
@@ -512,7 +512,7 @@ static int arm920t_write_phys_memory(struct target_s *target,
 
 
 /** Writes a buffer, in the specified word size, with current MMU settings. */
-int arm920t_write_memory(struct target_s *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
+int arm920t_write_memory(struct target *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	int retval;
 
@@ -549,7 +549,7 @@ int arm920t_write_memory(struct target_s *target, uint32_t address, uint32_t siz
 }
 
 // EXPORTED to FA256
-int arm920t_soft_reset_halt(struct target_s *target)
+int arm920t_soft_reset_halt(struct target *target)
 {
 	int retval = ERROR_OK;
 	struct arm920t_common *arm920t = target_to_arm920(target);
@@ -620,7 +620,7 @@ int arm920t_soft_reset_halt(struct target_s *target)
 	return ERROR_OK;
 }
 
-int arm920t_init_arch_info(target_t *target, struct arm920t_common *arm920t, struct jtag_tap *tap)
+int arm920t_init_arch_info(struct target *target, struct arm920t_common *arm920t, struct jtag_tap *tap)
 {
 	struct arm9tdmi_common *arm9tdmi = &amp;arm920t-&gt;arm9tdmi_common;
 	struct arm7_9_common *arm7_9 = &amp;arm9tdmi-&gt;arm7_9_common;
@@ -655,7 +655,7 @@ int arm920t_init_arch_info(target_t *target, struct arm920t_common *arm920t, str
 	return ERROR_OK;
 }
 
-static int arm920t_target_create(struct target_s *target, Jim_Interp *interp)
+static int arm920t_target_create(struct target *target, Jim_Interp *interp)
 {
 	struct arm920t_common *arm920t = calloc(1,sizeof(struct arm920t_common));
 
@@ -665,7 +665,7 @@ static int arm920t_target_create(struct target_s *target, Jim_Interp *interp)
 COMMAND_HANDLER(arm920t_handle_read_cache_command)
 {
 	int retval = ERROR_OK;
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct arm920t_common *arm920t = target_to_arm920(target);
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
@@ -911,7 +911,7 @@ COMMAND_HANDLER(arm920t_handle_read_cache_command)
 COMMAND_HANDLER(arm920t_handle_read_mmu_command)
 {
 	int retval = ERROR_OK;
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct arm920t_common *arm920t = target_to_arm920(target);
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
@@ -1194,7 +1194,7 @@ COMMAND_HANDLER(arm920t_handle_read_mmu_command)
 COMMAND_HANDLER(arm920t_handle_cp15_command)
 {
 	int retval;
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct arm920t_common *arm920t = target_to_arm920(target);
 
 	retval = arm920t_verify_pointer(cmd_ctx, arm920t);
@@ -1247,7 +1247,7 @@ COMMAND_HANDLER(arm920t_handle_cp15_command)
 COMMAND_HANDLER(arm920t_handle_cp15i_command)
 {
 	int retval;
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct arm920t_common *arm920t = target_to_arm920(target);
 
 	retval = arm920t_verify_pointer(cmd_ctx, arm920t);
@@ -1314,7 +1314,7 @@ COMMAND_HANDLER(arm920t_handle_cp15i_command)
 COMMAND_HANDLER(arm920t_handle_cache_info_command)
 {
 	int retval;
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct arm920t_common *arm920t = target_to_arm920(target);
 
 	retval = arm920t_verify_pointer(cmd_ctx, arm920t);
@@ -1325,7 +1325,7 @@ COMMAND_HANDLER(arm920t_handle_cache_info_command)
 }
 
 
-static int arm920t_mrc(target_t *target, int cpnum, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t *value)
+static int arm920t_mrc(struct target *target, int cpnum, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t *value)
 {
 	if (cpnum!=15)
 	{
@@ -1336,7 +1336,7 @@ static int arm920t_mrc(target_t *target, int cpnum, uint32_t op1, uint32_t op2,
 	return arm920t_read_cp15_interpreted(target, mrc_opcode(cpnum, op1, op2, CRn, CRm), 0, value);
 }
 
-static int arm920t_mcr(target_t *target, int cpnum, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t value)
+static int arm920t_mcr(struct target *target, int cpnum, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t value)
 {
 	if (cpnum!=15)
 	{
diff --git a/src/target/arm920t.h b/src/target/arm920t.h
index 4bd5ceb..02f6da5 100644
--- a/src/target/arm920t.h
+++ b/src/target/arm920t.h
@@ -39,7 +39,7 @@ struct arm920t_common
 };
 
 static inline struct arm920t_common *
-target_to_arm920(struct target_s *target)
+target_to_arm920(struct target *target)
 {
 	return container_of(target-&gt;arch_info, struct arm920t_common,
 			arm9tdmi_common.arm7_9_common.armv4_5_common);
@@ -58,18 +58,18 @@ struct arm920t_tlb_entry
 	uint32_t ram2;
 };
 
-int arm920t_arch_state(struct target_s *target);
-int arm920t_soft_reset_halt(struct target_s *target);
-int arm920t_read_memory(struct target_s *target,
+int arm920t_arch_state(struct target *target);
+int arm920t_soft_reset_halt(struct target *target);
+int arm920t_read_memory(struct target *target,
 	uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer);
-int arm920t_write_memory(struct target_s *target,
+int arm920t_write_memory(struct target *target,
 	uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer);
-void arm920t_post_debug_entry(target_t *target);
-void arm920t_pre_restore_context(target_t *target);
-	uint32_t arm920t_get_ttb(target_t *target);
-void arm920t_disable_mmu_caches(target_t *target,
+void arm920t_post_debug_entry(struct target *target);
+void arm920t_pre_restore_context(struct target *target);
+	uint32_t arm920t_get_ttb(struct target *target);
+void arm920t_disable_mmu_caches(struct target *target,
 	int mmu, int d_u_cache, int i_cache);
-void arm920t_enable_mmu_caches(target_t *target,
+void arm920t_enable_mmu_caches(struct target *target,
 	int mmu, int d_u_cache, int i_cache);
 int arm920t_register_commands(struct command_context_s *cmd_ctx);
 
diff --git a/src/target/arm926ejs.c b/src/target/arm926ejs.c
index 7d37590..b2f246f 100644
--- a/src/target/arm926ejs.c
+++ b/src/target/arm926ejs.c
@@ -47,7 +47,7 @@
 
 #define ARM926EJS_CP15_ADDR(opcode_1, opcode_2, CRn, CRm) ((opcode_1 &lt;&lt; 11) | (opcode_2 &lt;&lt; 8) | (CRn &lt;&lt; 4) | (CRm &lt;&lt; 0))
 
-static int arm926ejs_cp15_read(target_t *target, uint32_t op1, uint32_t op2,
+static int arm926ejs_cp15_read(struct target *target, uint32_t op1, uint32_t op2,
 		uint32_t CRn, uint32_t CRm, uint32_t *value)
 {
 	int retval = ERROR_OK;
@@ -129,7 +129,7 @@ static int arm926ejs_cp15_read(target_t *target, uint32_t op1, uint32_t op2,
 	return ERROR_OK;
 }
 
-static int arm926ejs_mrc(target_t *target, int cpnum, uint32_t op1,
+static int arm926ejs_mrc(struct target *target, int cpnum, uint32_t op1,
 		uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t *value)
 {
 	if (cpnum != 15) {
@@ -139,7 +139,7 @@ static int arm926ejs_mrc(target_t *target, int cpnum, uint32_t op1,
 	return arm926ejs_cp15_read(target, op1, op2, CRn, CRm, value);
 }
 
-static int arm926ejs_cp15_write(target_t *target, uint32_t op1, uint32_t op2,
+static int arm926ejs_cp15_write(struct target *target, uint32_t op1, uint32_t op2,
 		uint32_t CRn, uint32_t CRm, uint32_t value)
 {
 	int retval = ERROR_OK;
@@ -219,7 +219,7 @@ static int arm926ejs_cp15_write(target_t *target, uint32_t op1, uint32_t op2,
 	return ERROR_OK;
 }
 
-static int arm926ejs_mcr(target_t *target, int cpnum, uint32_t op1,
+static int arm926ejs_mcr(struct target *target, int cpnum, uint32_t op1,
 		uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t value)
 {
 	if (cpnum != 15) {
@@ -229,7 +229,7 @@ static int arm926ejs_mcr(target_t *target, int cpnum, uint32_t op1,
 	return arm926ejs_cp15_write(target, op1, op2, CRn, CRm, value);
 }
 
-static int arm926ejs_examine_debug_reason(target_t *target)
+static int arm926ejs_examine_debug_reason(struct target *target)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct reg *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
@@ -332,7 +332,7 @@ static int arm926ejs_examine_debug_reason(target_t *target)
 	return ERROR_OK;
 }
 
-static uint32_t arm926ejs_get_ttb(target_t *target)
+static uint32_t arm926ejs_get_ttb(struct target *target)
 {
 	struct arm926ejs_common *arm926ejs = target_to_arm926(target);
 	int retval;
@@ -344,7 +344,7 @@ static uint32_t arm926ejs_get_ttb(target_t *target)
 	return ttb;
 }
 
-static void arm926ejs_disable_mmu_caches(target_t *target, int mmu,
+static void arm926ejs_disable_mmu_caches(struct target *target, int mmu,
 		int d_u_cache, int i_cache)
 {
 	struct arm926ejs_common *arm926ejs = target_to_arm926(target);
@@ -393,7 +393,7 @@ static void arm926ejs_disable_mmu_caches(target_t *target, int mmu,
 	arm926ejs-&gt;write_cp15(target, 0, 0, 1, 0, cp15_control);
 }
 
-static void arm926ejs_enable_mmu_caches(target_t *target, int mmu,
+static void arm926ejs_enable_mmu_caches(struct target *target, int mmu,
 		int d_u_cache, int i_cache)
 {
 	struct arm926ejs_common *arm926ejs = target_to_arm926(target);
@@ -415,7 +415,7 @@ static void arm926ejs_enable_mmu_caches(target_t *target, int mmu,
 	arm926ejs-&gt;write_cp15(target, 0, 0, 1, 0, cp15_control);
 }
 
-static void arm926ejs_post_debug_entry(target_t *target)
+static void arm926ejs_post_debug_entry(struct target *target)
 {
 	struct arm926ejs_common *arm926ejs = target_to_arm926(target);
 
@@ -454,7 +454,7 @@ static void arm926ejs_post_debug_entry(target_t *target)
 	arm926ejs-&gt;write_cp15(target, 7, 0, 15, 0, cache_dbg_ctrl);
 }
 
-static void arm926ejs_pre_restore_context(target_t *target)
+static void arm926ejs_pre_restore_context(struct target *target)
 {
 	struct arm926ejs_common *arm926ejs = target_to_arm926(target);
 
@@ -485,7 +485,7 @@ static int arm926ejs_verify_pointer(struct command_context_s *cmd_ctx,
 }
 
 /** Logs summary of ARM926 state for a halted target. */
-int arm926ejs_arch_state(struct target_s *target)
+int arm926ejs_arch_state(struct target *target)
 {
 	static const char *state[] =
 	{
@@ -518,7 +518,7 @@ int arm926ejs_arch_state(struct target_s *target)
 	return ERROR_OK;
 }
 
-int arm926ejs_soft_reset_halt(struct target_s *target)
+int arm926ejs_soft_reset_halt(struct target *target)
 {
 	int retval = ERROR_OK;
 	struct arm926ejs_common *arm926ejs = target_to_arm926(target);
@@ -585,7 +585,7 @@ int arm926ejs_soft_reset_halt(struct target_s *target)
 }
 
 /** Writes a buffer, in the specified word size, with current MMU settings. */
-int arm926ejs_write_memory(struct target_s *target, uint32_t address,
+int arm926ejs_write_memory(struct target *target, uint32_t address,
 		uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	int retval;
@@ -646,7 +646,7 @@ int arm926ejs_write_memory(struct target_s *target, uint32_t address,
 	return retval;
 }
 
-static int arm926ejs_write_phys_memory(struct target_s *target,
+static int arm926ejs_write_phys_memory(struct target *target,
 		uint32_t address, uint32_t size,
 		uint32_t count, uint8_t *buffer)
 {
@@ -656,7 +656,7 @@ static int arm926ejs_write_phys_memory(struct target_s *target,
 			address, size, count, buffer);
 }
 
-static int arm926ejs_read_phys_memory(struct target_s *target,
+static int arm926ejs_read_phys_memory(struct target *target,
 		uint32_t address, uint32_t size,
 		uint32_t count, uint8_t *buffer)
 {
@@ -666,7 +666,7 @@ static int arm926ejs_read_phys_memory(struct target_s *target,
 			address, size, count, buffer);
 }
 
-int arm926ejs_init_arch_info(target_t *target, struct arm926ejs_common *arm926ejs,
+int arm926ejs_init_arch_info(struct target *target, struct arm926ejs_common *arm926ejs,
 		struct jtag_tap *tap)
 {
 	struct arm9tdmi_common *arm9tdmi = &amp;arm926ejs-&gt;arm9tdmi_common;
@@ -703,7 +703,7 @@ int arm926ejs_init_arch_info(target_t *target, struct arm926ejs_common *arm926ej
 	return ERROR_OK;
 }
 
-static int arm926ejs_target_create(struct target_s *target, Jim_Interp *interp)
+static int arm926ejs_target_create(struct target *target, Jim_Interp *interp)
 {
 	struct arm926ejs_common *arm926ejs = calloc(1,sizeof(struct arm926ejs_common));
 
@@ -716,7 +716,7 @@ static int arm926ejs_target_create(struct target_s *target, Jim_Interp *interp)
 COMMAND_HANDLER(arm926ejs_handle_cp15_command)
 {
 	int retval;
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct arm926ejs_common *arm926ejs = target_to_arm926(target);
 	int opcode_1;
 	int opcode_2;
@@ -777,7 +777,7 @@ COMMAND_HANDLER(arm926ejs_handle_cp15_command)
 COMMAND_HANDLER(arm926ejs_handle_cache_info_command)
 {
 	int retval;
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct arm926ejs_common *arm926ejs = target_to_arm926(target);
 
 	retval = arm926ejs_verify_pointer(cmd_ctx, arm926ejs);
@@ -787,7 +787,7 @@ COMMAND_HANDLER(arm926ejs_handle_cache_info_command)
 	return armv4_5_handle_cache_info_command(cmd_ctx, &amp;arm926ejs-&gt;armv4_5_mmu.armv4_5_cache);
 }
 
-static int arm926ejs_virt2phys(struct target_s *target, uint32_t virtual, uint32_t *physical)
+static int arm926ejs_virt2phys(struct target *target, uint32_t virtual, uint32_t *physical)
 {
 	int type;
 	uint32_t cb;
@@ -804,7 +804,7 @@ static int arm926ejs_virt2phys(struct target_s *target, uint32_t virtual, uint32
 	return ERROR_OK;
 }
 
-static int arm926ejs_mmu(struct target_s *target, int *enabled)
+static int arm926ejs_mmu(struct target *target, int *enabled)
 {
 	struct arm926ejs_common *arm926ejs = target_to_arm926(target);
 
diff --git a/src/target/arm926ejs.h b/src/target/arm926ejs.h
index 171c589..e6c46dc 100644
--- a/src/target/arm926ejs.h
+++ b/src/target/arm926ejs.h
@@ -30,8 +30,8 @@ struct arm926ejs_common
 	struct arm9tdmi_common arm9tdmi_common;
 	uint32_t common_magic;
 	struct armv4_5_mmu_common armv4_5_mmu;
-	int (*read_cp15)(target_t *target, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t *value);
-	int (*write_cp15)(target_t *target, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t value);
+	int (*read_cp15)(struct target *target, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t *value);
+	int (*write_cp15)(struct target *target, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t value);
 	uint32_t cp15_control_reg;
 	uint32_t d_fsr;
 	uint32_t i_fsr;
@@ -39,19 +39,19 @@ struct arm926ejs_common
 };
 
 static inline struct arm926ejs_common *
-target_to_arm926(struct target_s *target)
+target_to_arm926(struct target *target)
 {
 	return container_of(target-&gt;arch_info, struct arm926ejs_common,
 		arm9tdmi_common.arm7_9_common.armv4_5_common);
 }
 
 
-int arm926ejs_init_arch_info(target_t *target,
+int arm926ejs_init_arch_info(struct target *target,
 		struct arm926ejs_common *arm926ejs, struct jtag_tap *tap);
 int arm926ejs_register_commands(struct command_context_s *cmd_ctx);
-int arm926ejs_arch_state(struct target_s *target);
-int arm926ejs_write_memory(struct target_s *target,
+int arm926ejs_arch_state(struct target *target);
+int arm926ejs_write_memory(struct target *target,
 		uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer);
-int arm926ejs_soft_reset_halt(struct target_s *target);
+int arm926ejs_soft_reset_halt(struct target *target);
 
 #endif /* ARM926EJS_H */
diff --git a/src/target/arm966e.c b/src/target/arm966e.c
index 7c46f0f..b1ae48c 100644
--- a/src/target/arm966e.c
+++ b/src/target/arm966e.c
@@ -32,7 +32,7 @@
 #define _DEBUG_INSTRUCTION_EXECUTION_
 #endif
 
-int arm966e_init_arch_info(target_t *target, struct arm966e_common *arm966e, struct jtag_tap *tap)
+int arm966e_init_arch_info(struct target *target, struct arm966e_common *arm966e, struct jtag_tap *tap)
 {
 	struct arm9tdmi_common *arm9tdmi = &amp;arm966e-&gt;arm9tdmi_common;
 	struct arm7_9_common *arm7_9 = &amp;arm9tdmi-&gt;arm7_9_common;
@@ -50,7 +50,7 @@ int arm966e_init_arch_info(target_t *target, struct arm966e_common *arm966e, str
 	return ERROR_OK;
 }
 
-static int arm966e_target_create(struct target_s *target, Jim_Interp *interp)
+static int arm966e_target_create(struct target *target, Jim_Interp *interp)
 {
 	struct arm966e_common *arm966e = calloc(1,sizeof(struct arm966e_common));
 
@@ -67,7 +67,7 @@ static int arm966e_verify_pointer(struct command_context_s *cmd_ctx,
 	return ERROR_OK;
 }
 
-static int arm966e_read_cp15(target_t *target, int reg_addr, uint32_t *value)
+static int arm966e_read_cp15(struct target *target, int reg_addr, uint32_t *value)
 {
 	int retval = ERROR_OK;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
@@ -119,7 +119,7 @@ static int arm966e_read_cp15(target_t *target, int reg_addr, uint32_t *value)
 }
 
 // EXPORTED to str9x (flash)
-int arm966e_write_cp15(target_t *target, int reg_addr, uint32_t value)
+int arm966e_write_cp15(struct target *target, int reg_addr, uint32_t value)
 {
 	int retval = ERROR_OK;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
@@ -165,7 +165,7 @@ int arm966e_write_cp15(target_t *target, int reg_addr, uint32_t value)
 COMMAND_HANDLER(arm966e_handle_cp15_command)
 {
 	int retval;
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct arm966e_common *arm966e = target_to_arm966(target);
 
 	retval = arm966e_verify_pointer(cmd_ctx, arm966e);
diff --git a/src/target/arm966e.h b/src/target/arm966e.h
index e6155b5..74e1a03 100644
--- a/src/target/arm966e.h
+++ b/src/target/arm966e.h
@@ -35,15 +35,15 @@ struct arm966e_common
 };
 
 static inline struct arm966e_common *
-target_to_arm966(struct target_s *target)
+target_to_arm966(struct target *target)
 {
 	return container_of(target-&gt;arch_info, struct arm966e_common,
 			arm9tdmi_common.arm7_9_common.armv4_5_common);
 }
 
-int arm966e_init_arch_info(target_t *target,
+int arm966e_init_arch_info(struct target *target,
 		struct arm966e_common *arm966e, struct jtag_tap *tap);
 int arm966e_register_commands(struct command_context_s *cmd_ctx);
-int arm966e_write_cp15(target_t *target, int reg_addr, uint32_t value);
+int arm966e_write_cp15(struct target *target, int reg_addr, uint32_t value);
 
 #endif /* ARM966E_H */
diff --git a/src/target/arm9tdmi.c b/src/target/arm9tdmi.c
index 0c390df..5425582 100644
--- a/src/target/arm9tdmi.c
+++ b/src/target/arm9tdmi.c
@@ -57,7 +57,7 @@ static const struct arm9tdmi_vector arm9tdmi_vectors[] =
 	{0, 0},
 };
 
-int arm9tdmi_examine_debug_reason(target_t *target)
+int arm9tdmi_examine_debug_reason(struct target *target)
 {
 	int retval = ERROR_OK;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
@@ -325,7 +325,7 @@ int arm9tdmi_clock_data_in_endianness(struct arm_jtag *jtag_info,
 	return ERROR_OK;
 }
 
-static void arm9tdmi_change_to_arm(target_t *target,
+static void arm9tdmi_change_to_arm(struct target *target,
 		uint32_t *r0, uint32_t *pc)
 {
 	int retval = ERROR_OK;
@@ -379,7 +379,7 @@ static void arm9tdmi_change_to_arm(target_t *target,
 	*pc -= 0xc;
 }
 
-void arm9tdmi_read_core_regs(target_t *target,
+void arm9tdmi_read_core_regs(struct target *target,
 		uint32_t mask, uint32_t* core_regs[16])
 {
 	int i;
@@ -404,7 +404,7 @@ void arm9tdmi_read_core_regs(target_t *target,
 	}
 }
 
-static void arm9tdmi_read_core_regs_target_buffer(target_t *target,
+static void arm9tdmi_read_core_regs_target_buffer(struct target *target,
 		uint32_t mask, void* buffer, int size)
 {
 	int i;
@@ -444,7 +444,7 @@ static void arm9tdmi_read_core_regs_target_buffer(target_t *target,
 	}
 }
 
-static void arm9tdmi_read_xpsr(target_t *target, uint32_t *xpsr, int spsr)
+static void arm9tdmi_read_xpsr(struct target *target, uint32_t *xpsr, int spsr)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
@@ -466,7 +466,7 @@ static void arm9tdmi_read_xpsr(target_t *target, uint32_t *xpsr, int spsr)
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_NOP, 0, xpsr, 0);
 }
 
-static void arm9tdmi_write_xpsr(target_t *target, uint32_t xpsr, int spsr)
+static void arm9tdmi_write_xpsr(struct target *target, uint32_t xpsr, int spsr)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
@@ -500,7 +500,7 @@ static void arm9tdmi_write_xpsr(target_t *target, uint32_t xpsr, int spsr)
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_NOP, 0, NULL, 0);
 }
 
-static void arm9tdmi_write_xpsr_im8(target_t *target,
+static void arm9tdmi_write_xpsr_im8(struct target *target,
 		uint8_t xpsr_im, int rot, int spsr)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
@@ -525,7 +525,7 @@ static void arm9tdmi_write_xpsr_im8(target_t *target,
 	}
 }
 
-void arm9tdmi_write_core_regs(target_t *target,
+void arm9tdmi_write_core_regs(struct target *target,
 		uint32_t mask, uint32_t core_regs[16])
 {
 	int i;
@@ -551,7 +551,7 @@ void arm9tdmi_write_core_regs(target_t *target,
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_NOP, 0, NULL, 0);
 }
 
-void arm9tdmi_load_word_regs(target_t *target, uint32_t mask)
+void arm9tdmi_load_word_regs(struct target *target, uint32_t mask)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
@@ -561,7 +561,7 @@ void arm9tdmi_load_word_regs(target_t *target, uint32_t mask)
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_NOP, 0, NULL, 1);
 }
 
-void arm9tdmi_load_hword_reg(target_t *target, int num)
+void arm9tdmi_load_hword_reg(struct target *target, int num)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
@@ -571,7 +571,7 @@ void arm9tdmi_load_hword_reg(target_t *target, int num)
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_NOP, 0, NULL, 1);
 }
 
-void arm9tdmi_load_byte_reg(target_t *target, int num)
+void arm9tdmi_load_byte_reg(struct target *target, int num)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
@@ -581,7 +581,7 @@ void arm9tdmi_load_byte_reg(target_t *target, int num)
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_NOP, 0, NULL, 1);
 }
 
-void arm9tdmi_store_word_regs(target_t *target, uint32_t mask)
+void arm9tdmi_store_word_regs(struct target *target, uint32_t mask)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
@@ -591,7 +591,7 @@ void arm9tdmi_store_word_regs(target_t *target, uint32_t mask)
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_NOP, 0, NULL, 1);
 }
 
-void arm9tdmi_store_hword_reg(target_t *target, int num)
+void arm9tdmi_store_hword_reg(struct target *target, int num)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
@@ -601,7 +601,7 @@ void arm9tdmi_store_hword_reg(target_t *target, int num)
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_NOP, 0, NULL, 1);
 }
 
-void arm9tdmi_store_byte_reg(target_t *target, int num)
+void arm9tdmi_store_byte_reg(struct target *target, int num)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
@@ -611,7 +611,7 @@ void arm9tdmi_store_byte_reg(target_t *target, int num)
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_NOP, 0, NULL, 1);
 }
 
-static void arm9tdmi_write_pc(target_t *target, uint32_t pc)
+static void arm9tdmi_write_pc(struct target *target, uint32_t pc)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
@@ -635,7 +635,7 @@ static void arm9tdmi_write_pc(target_t *target, uint32_t pc)
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_NOP, 0, NULL, 0);
 }
 
-void arm9tdmi_branch_resume(target_t *target)
+void arm9tdmi_branch_resume(struct target *target)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
@@ -644,7 +644,7 @@ void arm9tdmi_branch_resume(target_t *target)
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_NOP, 0, NULL, 1);
 }
 
-static void arm9tdmi_branch_resume_thumb(target_t *target)
+static void arm9tdmi_branch_resume_thumb(struct target *target)
 {
 	LOG_DEBUG(&quot;-&quot;);
 
@@ -703,7 +703,7 @@ static void arm9tdmi_branch_resume_thumb(target_t *target)
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_T_NOP, 0, NULL, 0);
 }
 
-void arm9tdmi_enable_single_step(target_t *target, uint32_t next_pc)
+void arm9tdmi_enable_single_step(struct target *target, uint32_t next_pc)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 
@@ -718,7 +718,7 @@ void arm9tdmi_enable_single_step(target_t *target, uint32_t next_pc)
 	}
 }
 
-void arm9tdmi_disable_single_step(target_t *target)
+void arm9tdmi_disable_single_step(struct target *target)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 
@@ -733,7 +733,7 @@ void arm9tdmi_disable_single_step(target_t *target)
 	}
 }
 
-static void arm9tdmi_build_reg_cache(target_t *target)
+static void arm9tdmi_build_reg_cache(struct target *target)
 {
 	struct reg_cache **cache_p = register_get_last_cache_p(&amp;target-&gt;reg_cache);
 	struct armv4_5_common_s *armv4_5 = target_to_armv4_5(target);
@@ -742,7 +742,7 @@ static void arm9tdmi_build_reg_cache(target_t *target)
 	armv4_5-&gt;core_cache = (*cache_p);
 }
 
-int arm9tdmi_examine(struct target_s *target)
+int arm9tdmi_examine(struct target *target)
 {
 	int retval;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
@@ -780,13 +780,13 @@ int arm9tdmi_examine(struct target_s *target)
 }
 
 int arm9tdmi_init_target(struct command_context_s *cmd_ctx,
-		struct target_s *target)
+		struct target *target)
 {
 	arm9tdmi_build_reg_cache(target);
 	return ERROR_OK;
 }
 
-int arm9tdmi_init_arch_info(target_t *target, struct arm9tdmi_common *arm9tdmi, struct jtag_tap *tap)
+int arm9tdmi_init_arch_info(struct target *target, struct arm9tdmi_common *arm9tdmi, struct jtag_tap *tap)
 {
 	struct arm *armv4_5;
 	struct arm7_9_common *arm7_9;
@@ -846,7 +846,7 @@ int arm9tdmi_init_arch_info(target_t *target, struct arm9tdmi_common *arm9tdmi,
 	return ERROR_OK;
 }
 
-static int arm9tdmi_target_create(struct target_s *target, Jim_Interp *interp)
+static int arm9tdmi_target_create(struct target *target, Jim_Interp *interp)
 {
 	struct arm9tdmi_common *arm9tdmi = calloc(1,sizeof(struct arm9tdmi_common));
 
@@ -858,7 +858,7 @@ static int arm9tdmi_target_create(struct target_s *target, Jim_Interp *interp)
 
 COMMAND_HANDLER(handle_arm9tdmi_catch_vectors_command)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct reg *vector_catch;
 	uint32_t vector_catch_value;
diff --git a/src/target/arm9tdmi.h b/src/target/arm9tdmi.h
index 2e25b52..5165dc8 100644
--- a/src/target/arm9tdmi.h
+++ b/src/target/arm9tdmi.h
@@ -52,9 +52,9 @@ enum arm9tdmi_vector_bit
 };
 
 int arm9tdmi_init_target(struct command_context_s *cmd_ctx,
-		struct target_s *target);
-int arm9tdmi_examine(struct target_s *target);
-int arm9tdmi_init_arch_info(target_t *target,
+		struct target *target);
+int arm9tdmi_examine(struct target *target);
+int arm9tdmi_init_arch_info(struct target *target,
 		struct arm9tdmi_common *arm9tdmi, struct jtag_tap *tap);
 int arm9tdmi_register_commands(struct command_context_s *cmd_ctx);
 
@@ -63,22 +63,22 @@ int arm9tdmi_clock_out(struct arm_jtag *jtag_info,
 int arm9tdmi_clock_data_in(struct arm_jtag *jtag_info, uint32_t *in);
 int arm9tdmi_clock_data_in_endianness(struct arm_jtag *jtag_info,
 		void *in, int size, int be);
-void arm9tdmi_read_core_regs(target_t *target,
+void arm9tdmi_read_core_regs(struct target *target,
 		uint32_t mask, uint32_t* core_regs[16]);
-void arm9tdmi_write_core_regs(target_t *target,
+void arm9tdmi_write_core_regs(struct target *target,
 		uint32_t mask, uint32_t core_regs[16]);
 
-int arm9tdmi_examine_debug_reason(target_t *target);
+int arm9tdmi_examine_debug_reason(struct target *target);
 
-void arm9tdmi_load_word_regs(target_t *target, uint32_t mask);
-void arm9tdmi_load_hword_reg(target_t *target, int num);
-void arm9tdmi_load_byte_reg(target_t *target, int num);
-void arm9tdmi_store_word_regs(target_t *target, uint32_t mask);
-void arm9tdmi_store_hword_reg(target_t *target, int num);
-void arm9tdmi_store_byte_reg(target_t *target, int num);
+void arm9tdmi_load_word_regs(struct target *target, uint32_t mask);
+void arm9tdmi_load_hword_reg(struct target *target, int num);
+void arm9tdmi_load_byte_reg(struct target *target, int num);
+void arm9tdmi_store_word_regs(struct target *target, uint32_t mask);
+void arm9tdmi_store_hword_reg(struct target *target, int num);
+void arm9tdmi_store_byte_reg(struct target *target, int num);
 
-void arm9tdmi_branch_resume(target_t *target);
-void arm9tdmi_enable_single_step(target_t *target, uint32_t next_pc);
-void arm9tdmi_disable_single_step(target_t *target);
+void arm9tdmi_branch_resume(struct target *target);
+void arm9tdmi_enable_single_step(struct target *target, uint32_t next_pc);
+void arm9tdmi_disable_single_step(struct target *target);
 
 #endif /* ARM9TDMI_H */
diff --git a/src/target/arm_disassembler.c b/src/target/arm_disassembler.c
index ce33885..35c3520 100644
--- a/src/target/arm_disassembler.c
+++ b/src/target/arm_disassembler.c
@@ -4191,7 +4191,7 @@ ldrh_literal:
  * always set.  That means eventual arm_simulate_step() support for Thumb2
  * will need work in this area.
  */
-int thumb2_opcode(target_t *target, uint32_t address, struct arm_instruction *instruction)
+int thumb2_opcode(struct target *target, uint32_t address, struct arm_instruction *instruction)
 {
 	int retval;
 	uint16_t op;
diff --git a/src/target/arm_disassembler.h b/src/target/arm_disassembler.h
index a3d16f5..774dd2c 100644
--- a/src/target/arm_disassembler.h
+++ b/src/target/arm_disassembler.h
@@ -201,7 +201,7 @@ int arm_evaluate_opcode(uint32_t opcode, uint32_t address,
 		struct arm_instruction *instruction);
 int thumb_evaluate_opcode(uint16_t opcode, uint32_t address,
 		struct arm_instruction *instruction);
-int thumb2_opcode(target_t *target, uint32_t address,
+int thumb2_opcode(struct target *target, uint32_t address,
 		struct arm_instruction *instruction);
 int arm_access_size(struct arm_instruction *instruction);
 
diff --git a/src/target/arm_simulator.c b/src/target/arm_simulator.c
index 5252666..46cd558 100644
--- a/src/target/arm_simulator.c
+++ b/src/target/arm_simulator.c
@@ -277,7 +277,7 @@ static int thumb_pass_branch_condition(uint32_t cpsr, uint16_t opcode)
  * if the dry_run_pc argument is provided, no state is changed,
  * but the new pc is stored in the variable pointed at by the argument
  */
-int arm_simulate_step_core(target_t *target,
+int arm_simulate_step_core(struct target *target,
 		uint32_t *dry_run_pc, struct arm_sim_interface *sim)
 {
 	uint32_t current_pc = sim-&gt;get_reg(sim, 15);
@@ -847,7 +847,7 @@ static enum armv4_5_mode armv4_5_get_mode(struct arm_sim_interface *sim)
 
 
 
-int arm_simulate_step(target_t *target, uint32_t *dry_run_pc)
+int arm_simulate_step(struct target *target, uint32_t *dry_run_pc)
 {
 	struct armv4_5_common_s *armv4_5 = target_to_armv4_5(target);
 	struct arm_sim_interface sim;
diff --git a/src/target/arm_simulator.h b/src/target/arm_simulator.h
index 9e7b040..616627a 100644
--- a/src/target/arm_simulator.h
+++ b/src/target/arm_simulator.h
@@ -22,7 +22,7 @@
 
 #include &quot;types.h&quot;
 
-struct target_s;
+struct target;
 
 struct arm_sim_interface
 {
@@ -38,10 +38,10 @@ struct arm_sim_interface
 };
 
 /* armv4_5 version */
-int arm_simulate_step(struct target_s *target, uint32_t *dry_run_pc);
+int arm_simulate_step(struct target *target, uint32_t *dry_run_pc);
 
 /* a generic arm simulator. Caller must implement the sim interface */
-int arm_simulate_step_core(target_t *target,
+int arm_simulate_step_core(struct target *target,
 		uint32_t *dry_run_pc, struct arm_sim_interface *sim);
 
 #endif /* ARM_SIMULATOR_H */
diff --git a/src/target/armv4_5.c b/src/target/armv4_5.c
index 02105e5..097e6e7 100644
--- a/src/target/armv4_5.c
+++ b/src/target/armv4_5.c
@@ -171,7 +171,7 @@ int armv4_5_get_core_reg(struct reg *reg)
 {
 	int retval;
 	struct armv4_5_core_reg *armv4_5 = reg-&gt;arch_info;
-	target_t *target = armv4_5-&gt;target;
+	struct target *target = armv4_5-&gt;target;
 
 	if (target-&gt;state != TARGET_HALTED)
 	{
@@ -188,7 +188,7 @@ int armv4_5_get_core_reg(struct reg *reg)
 int armv4_5_set_core_reg(struct reg *reg, uint8_t *buf)
 {
 	struct armv4_5_core_reg *armv4_5 = reg-&gt;arch_info;
-	target_t *target = armv4_5-&gt;target;
+	struct target *target = armv4_5-&gt;target;
 	struct armv4_5_common_s *armv4_5_target = target_to_armv4_5(target);
 	uint32_t value = buf_get_u32(buf, 0, 32);
 
@@ -235,7 +235,7 @@ int armv4_5_set_core_reg(struct reg *reg, uint8_t *buf)
 	return ERROR_OK;
 }
 
-int armv4_5_invalidate_core_regs(target_t *target)
+int armv4_5_invalidate_core_regs(struct target *target)
 {
 	struct armv4_5_common_s *armv4_5 = target_to_armv4_5(target);
 	int i;
@@ -249,7 +249,7 @@ int armv4_5_invalidate_core_regs(target_t *target)
 	return ERROR_OK;
 }
 
-struct reg_cache* armv4_5_build_reg_cache(target_t *target, struct arm *armv4_5_common)
+struct reg_cache* armv4_5_build_reg_cache(struct target *target, struct arm *armv4_5_common)
 {
 	int num_regs = 37;
 	struct reg_cache *cache = malloc(sizeof(struct reg_cache));
@@ -287,7 +287,7 @@ struct reg_cache* armv4_5_build_reg_cache(target_t *target, struct arm *armv4_5_
 	return cache;
 }
 
-int armv4_5_arch_state(struct target_s *target)
+int armv4_5_arch_state(struct target *target)
 {
 	struct armv4_5_common_s *armv4_5 = target_to_armv4_5(target);
 
@@ -312,7 +312,7 @@ COMMAND_HANDLER(handle_armv4_5_reg_command)
 	char output[128];
 	int output_len;
 	int mode, num;
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct armv4_5_common_s *armv4_5 = target_to_armv4_5(target);
 
 	if (armv4_5-&gt;common_magic != ARMV4_5_COMMON_MAGIC)
@@ -361,7 +361,7 @@ COMMAND_HANDLER(handle_armv4_5_reg_command)
 
 COMMAND_HANDLER(handle_armv4_5_core_state_command)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct armv4_5_common_s *armv4_5 = target_to_armv4_5(target);
 
 	if (armv4_5-&gt;common_magic != ARMV4_5_COMMON_MAGIC)
@@ -390,7 +390,7 @@ COMMAND_HANDLER(handle_armv4_5_core_state_command)
 COMMAND_HANDLER(handle_armv4_5_disassemble_command)
 {
 	int retval = ERROR_OK;
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct armv4_5_common_s *armv4_5 = target_to_armv4_5(target);
 	uint32_t address;
 	int count = 1;
@@ -483,7 +483,7 @@ int armv4_5_register_commands(struct command_context_s *cmd_ctx)
 	return ERROR_OK;
 }
 
-int armv4_5_get_gdb_reg_list(target_t *target, struct reg **reg_list[], int *reg_list_size)
+int armv4_5_get_gdb_reg_list(struct target *target, struct reg **reg_list[], int *reg_list_size)
 {
 	struct armv4_5_common_s *armv4_5 = target_to_armv4_5(target);
 	int i;
@@ -511,7 +511,7 @@ int armv4_5_get_gdb_reg_list(target_t *target, struct reg **reg_list[], int *reg
 }
 
 /* wait for execution to complete and check exit point */
-static int armv4_5_run_algorithm_completion(struct target_s *target, uint32_t exit_point, int timeout_ms, void *arch_info)
+static int armv4_5_run_algorithm_completion(struct target *target, uint32_t exit_point, int timeout_ms, void *arch_info)
 {
 	int retval;
 	struct armv4_5_common_s *armv4_5 = target_to_armv4_5(target);
@@ -543,7 +543,7 @@ static int armv4_5_run_algorithm_completion(struct target_s *target, uint32_t ex
 	return ERROR_OK;
 }
 
-int armv4_5_run_algorithm_inner(struct target_s *target, int num_mem_params, struct mem_param *mem_params, int num_reg_params, struct reg_param *reg_params, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info, int (*run_it)(struct target_s *target, uint32_t exit_point, int timeout_ms, void *arch_info))
+int armv4_5_run_algorithm_inner(struct target *target, int num_mem_params, struct mem_param *mem_params, int num_reg_params, struct reg_param *reg_params, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info, int (*run_it)(struct target *target, uint32_t exit_point, int timeout_ms, void *arch_info))
 {
 	struct armv4_5_common_s *armv4_5 = target_to_armv4_5(target);
 	struct armv4_5_algorithm *armv4_5_algorithm_info = arch_info;
@@ -708,12 +708,12 @@ int armv4_5_run_algorithm_inner(struct target_s *target, int num_mem_params, str
 	return retval;
 }
 
-int armv4_5_run_algorithm(struct target_s *target, int num_mem_params, struct mem_param *mem_params, int num_reg_params, struct reg_param *reg_params, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info)
+int armv4_5_run_algorithm(struct target *target, int num_mem_params, struct mem_param *mem_params, int num_reg_params, struct reg_param *reg_params, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info)
 {
 	return armv4_5_run_algorithm_inner(target, num_mem_params, mem_params, num_reg_params, reg_params, entry_point, exit_point, timeout_ms, arch_info, armv4_5_run_algorithm_completion);
 }
 
-int armv4_5_init_arch_info(target_t *target, struct arm *armv4_5)
+int armv4_5_init_arch_info(struct target *target, struct arm *armv4_5)
 {
 	target-&gt;arch_info = armv4_5;
 
diff --git a/src/target/armv4_5.h b/src/target/armv4_5.h
index 16fb85d..472c2c1 100644
--- a/src/target/armv4_5.h
+++ b/src/target/armv4_5.h
@@ -98,10 +98,10 @@ struct arm
 	/** Handle for the Embedded Trace Module, if one is present. */
 	struct etm_context *etm;
 
-	int (*full_context)(struct target_s *target);
-	int (*read_core_reg)(struct target_s *target,
+	int (*full_context)(struct target *target);
+	int (*read_core_reg)(struct target *target,
 			int num, enum armv4_5_mode mode);
-	int (*write_core_reg)(struct target_s *target,
+	int (*write_core_reg)(struct target *target,
 			int num, enum armv4_5_mode mode, uint32_t value);
 	void *arch_info;
 };
@@ -109,7 +109,7 @@ struct arm
 #define target_to_armv4_5 target_to_arm
 
 /** Convert target handle to generic ARM target state handle. */
-static inline struct arm *target_to_arm(struct target_s *target)
+static inline struct arm *target_to_arm(struct target *target)
 {
 	return target-&gt;arch_info;
 }
@@ -131,11 +131,11 @@ struct armv4_5_core_reg
 {
 	int num;
 	enum armv4_5_mode mode;
-	target_t *target;
+	struct target *target;
 	struct arm *armv4_5_common;
 };
 
-struct reg_cache* armv4_5_build_reg_cache(target_t *target,
+struct reg_cache* armv4_5_build_reg_cache(struct target *target,
 		struct arm *armv4_5_common);
 
 /* map psr mode bits to linear number */
@@ -175,20 +175,20 @@ static __inline enum armv4_5_mode armv4_5_number_to_mode(int number)
 	}
 };
 
-int armv4_5_arch_state(struct target_s *target);
-int armv4_5_get_gdb_reg_list(target_t *target,
+int armv4_5_arch_state(struct target *target);
+int armv4_5_get_gdb_reg_list(struct target *target,
 		struct reg **reg_list[], int *reg_list_size);
 
 int armv4_5_register_commands(struct command_context_s *cmd_ctx);
-int armv4_5_init_arch_info(target_t *target, struct arm *armv4_5);
+int armv4_5_init_arch_info(struct target *target, struct arm *armv4_5);
 
-int armv4_5_run_algorithm(struct target_s *target,
+int armv4_5_run_algorithm(struct target *target,
 		int num_mem_params, struct mem_param *mem_params,
 		int num_reg_params, struct reg_param *reg_params,
 		uint32_t entry_point, uint32_t exit_point,
 		int timeout_ms, void *arch_info);
 
-int armv4_5_invalidate_core_regs(target_t *target);
+int armv4_5_invalidate_core_regs(struct target *target);
 
 /* ARM mode instructions
  */
diff --git a/src/target/armv4_5_mmu.c b/src/target/armv4_5_mmu.c
index 64147e8..d84da48 100644
--- a/src/target/armv4_5_mmu.c
+++ b/src/target/armv4_5_mmu.c
@@ -25,14 +25,14 @@
 #include &quot;armv4_5_mmu.h&quot;
 
 
-uint32_t armv4mmu_translate_va(target_t *target, struct armv4_5_mmu_common *armv4_5_mmu, uint32_t va, int *type, uint32_t *cb, int *domain, uint32_t *ap);
+uint32_t armv4mmu_translate_va(struct target *target, struct armv4_5_mmu_common *armv4_5_mmu, uint32_t va, int *type, uint32_t *cb, int *domain, uint32_t *ap);
 
 char* armv4_5_mmu_page_type_names[] =
 {
 	&quot;section&quot;, &quot;large page&quot;, &quot;small page&quot;, &quot;tiny page&quot;
 };
 
-uint32_t armv4_5_mmu_translate_va(target_t *target, struct armv4_5_mmu_common *armv4_5_mmu, uint32_t va, int *type, uint32_t *cb, int *domain, uint32_t *ap)
+uint32_t armv4_5_mmu_translate_va(struct target *target, struct armv4_5_mmu_common *armv4_5_mmu, uint32_t va, int *type, uint32_t *cb, int *domain, uint32_t *ap)
 {
 	uint32_t first_lvl_descriptor = 0x0;
 	uint32_t second_lvl_descriptor = 0x0;
@@ -130,7 +130,7 @@ uint32_t armv4_5_mmu_translate_va(target_t *target, struct armv4_5_mmu_common *a
 	return ERROR_TARGET_TRANSLATION_FAULT;
 }
 
-int armv4_5_mmu_read_physical(target_t *target, struct armv4_5_mmu_common *armv4_5_mmu, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
+int armv4_5_mmu_read_physical(struct target *target, struct armv4_5_mmu_common *armv4_5_mmu, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	int retval;
 
@@ -150,7 +150,7 @@ int armv4_5_mmu_read_physical(target_t *target, struct armv4_5_mmu_common *armv4
 	return retval;
 }
 
-int armv4_5_mmu_write_physical(target_t *target, struct armv4_5_mmu_common *armv4_5_mmu, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
+int armv4_5_mmu_write_physical(struct target *target, struct armv4_5_mmu_common *armv4_5_mmu, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	int retval;
 
diff --git a/src/target/armv4_5_mmu.h b/src/target/armv4_5_mmu.h
index 4357c92..bbe50c6 100644
--- a/src/target/armv4_5_mmu.h
+++ b/src/target/armv4_5_mmu.h
@@ -25,11 +25,11 @@
 
 struct armv4_5_mmu_common
 {
-	uint32_t (*get_ttb)(target_t *target);
-	int (*read_memory)(target_t *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer);
-	int (*write_memory)(target_t *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer);
-	void (*disable_mmu_caches)(target_t *target, int mmu, int d_u_cache, int i_cache);
-	void (*enable_mmu_caches)(target_t *target, int mmu, int d_u_cache, int i_cache);
+	uint32_t (*get_ttb)(struct target *target);
+	int (*read_memory)(struct target *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer);
+	int (*write_memory)(struct target *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer);
+	void (*disable_mmu_caches)(struct target *target, int mmu, int d_u_cache, int i_cache);
+	void (*enable_mmu_caches)(struct target *target, int mmu, int d_u_cache, int i_cache);
 	struct armv4_5_cache_common armv4_5_cache;
 	int has_tiny_pages;
 	int mmu_enabled;
@@ -42,15 +42,15 @@ enum
 
 extern char* armv4_5_page_type_names[];
 
-uint32_t armv4_5_mmu_translate_va(target_t *target,
+uint32_t armv4_5_mmu_translate_va(struct target *target,
 		struct armv4_5_mmu_common *armv4_5_mmu, uint32_t va, int *type,
 		uint32_t *cb, int *domain, uint32_t *ap);
 
-int armv4_5_mmu_read_physical(target_t *target,
+int armv4_5_mmu_read_physical(struct target *target,
 		struct armv4_5_mmu_common *armv4_5_mmu,
 		uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer);
 
-int armv4_5_mmu_write_physical(target_t *target,
+int armv4_5_mmu_write_physical(struct target *target,
 		struct armv4_5_mmu_common *armv4_5_mmu,
 		uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer);
 
diff --git a/src/target/armv7a.c b/src/target/armv7a.c
index ead5b9c..9227219 100644
--- a/src/target/armv7a.c
+++ b/src/target/armv7a.c
@@ -173,7 +173,7 @@ struct reg armv7a_gdb_dummy_fp_reg =
 			0, 1, 96, NULL, 0, NULL, 0
 };
 
-void armv7a_show_fault_registers(target_t *target)
+void armv7a_show_fault_registers(struct target *target)
 {
 	uint32_t dfsr, ifsr, dfar, ifar;
 	struct armv7a_common *armv7a = target_to_armv7a(target);
@@ -190,7 +190,7 @@ void armv7a_show_fault_registers(target_t *target)
 
 }
 
-int armv7a_arch_state(struct target_s *target)
+int armv7a_arch_state(struct target *target)
 {
 	static const char *state[] =
 	{
@@ -232,7 +232,7 @@ int armv7a_arch_state(struct target_s *target)
 
 COMMAND_HANDLER(handle_dap_baseaddr_command)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct armv7a_common *armv7a = target_to_armv7a(target);
 	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
@@ -241,7 +241,7 @@ COMMAND_HANDLER(handle_dap_baseaddr_command)
 
 COMMAND_HANDLER(handle_dap_memaccess_command)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct armv7a_common *armv7a = target_to_armv7a(target);
 	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
@@ -250,7 +250,7 @@ COMMAND_HANDLER(handle_dap_memaccess_command)
 
 COMMAND_HANDLER(handle_dap_apsel_command)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct armv7a_common *armv7a = target_to_armv7a(target);
 	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
@@ -259,7 +259,7 @@ COMMAND_HANDLER(handle_dap_apsel_command)
 
 COMMAND_HANDLER(handle_dap_apid_command)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct armv7a_common *armv7a = target_to_armv7a(target);
 	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
@@ -268,7 +268,7 @@ COMMAND_HANDLER(handle_dap_apid_command)
 
 COMMAND_HANDLER(handle_dap_info_command)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct armv7a_common *armv7a = target_to_armv7a(target);
 	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 	uint32_t apsel;
@@ -289,7 +289,7 @@ COMMAND_HANDLER(handle_dap_info_command)
 
 COMMAND_HANDLER(handle_armv7a_disassemble_command)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct armv4_5_common_s *armv4_5 = target_to_armv4_5(target);
 	int thumb = 0;
 	int count = 1;
diff --git a/src/target/armv7a.h b/src/target/armv7a.h
index c775d0c..1b4884c 100644
--- a/src/target/armv7a.h
+++ b/src/target/armv7a.h
@@ -108,26 +108,26 @@ struct armv7a_common
 	struct armv4_5_mmu_common armv4_5_mmu;
 	struct arm armv4_5_common;
 
-//	int (*full_context)(struct target_s *target);
-//	int (*read_core_reg)(struct target_s *target, int num, enum armv7a_mode mode);
-//	int (*write_core_reg)(struct target_s *target, int num, enum armv7a_mode mode, u32 value);
-	int (*read_cp15)(struct target_s *target,
+//	int (*full_context)(struct target *target);
+//	int (*read_core_reg)(struct target *target, int num, enum armv7a_mode mode);
+//	int (*write_core_reg)(struct target *target, int num, enum armv7a_mode mode, u32 value);
+	int (*read_cp15)(struct target *target,
 			uint32_t op1, uint32_t op2,
 			uint32_t CRn, uint32_t CRm, uint32_t *value);
-	int (*write_cp15)(struct target_s *target,
+	int (*write_cp15)(struct target *target,
 			uint32_t op1, uint32_t op2,
 			uint32_t CRn, uint32_t CRm, uint32_t value);
 
-	int (*examine_debug_reason)(target_t *target);
-	void (*post_debug_entry)(target_t *target);
+	int (*examine_debug_reason)(struct target *target);
+	void (*post_debug_entry)(struct target *target);
 
-	void (*pre_restore_context)(target_t *target);
-	void (*post_restore_context)(target_t *target);
+	void (*pre_restore_context)(struct target *target);
+	void (*post_restore_context)(struct target *target);
 
 };
 
 static inline struct armv7a_common *
-target_to_armv7a(struct target_s *target)
+target_to_armv7a(struct target *target)
 {
 	return container_of(target
-&gt;arch_info, struct armv7a_common,
 			armv4_5_common);
@@ -145,15 +145,15 @@ struct armv7a_core_reg
 {
 	int num;
 	enum armv7a_mode mode;
-	target_t *target;
+	struct target *target;
 	struct armv7a_common *armv7a_common;
 };
 
-int armv7a_arch_state(struct target_s *target);
-struct reg_cache *armv7a_build_reg_cache(target_t *target,
+int armv7a_arch_state(struct target *target);
+struct reg_cache *armv7a_build_reg_cache(struct target *target,
 		struct armv7a_common *armv7a_common);
 int armv7a_register_commands(struct command_context_s *cmd_ctx);
-int armv7a_init_arch_info(target_t *target, struct armv7a_common *armv7a);
+int armv7a_init_arch_info(struct target *target, struct armv7a_common *armv7a);
 
 /* map psr mode bits to linear number */
 static inline int armv7a_mode_to_number(enum armv7a_mode mode)
diff --git a/src/target/armv7m.c b/src/target/armv7m.c
index 2969803..9c2e95c 100644
--- a/src/target/armv7m.c
+++ b/src/target/armv7m.c
@@ -133,7 +133,7 @@ static int armv7m_core_reg_arch_type = -1;
  * Restores target context using the cache of core registers set up
  * by armv7m_build_reg_cache(), calling optional core-specific hooks.
  */
-int armv7m_restore_context(target_t *target)
+int armv7m_restore_context(struct target *target)
 {
 	int i;
 	struct armv7m_common *armv7m = target_to_armv7m(target);
@@ -182,7 +182,7 @@ static int armv7m_get_core_reg(struct reg *reg)
 {
 	int retval;
 	struct armv7m_core_reg *armv7m_reg = reg-&gt;arch_info;
-	target_t *target = armv7m_reg-&gt;target;
+	struct target *target = armv7m_reg-&gt;target;
 	struct armv7m_common *armv7m = target_to_armv7m(target);
 
 	if (target-&gt;state != TARGET_HALTED)
@@ -198,7 +198,7 @@ static int armv7m_get_core_reg(struct reg *reg)
 static int armv7m_set_core_reg(struct reg *reg, uint8_t *buf)
 {
 	struct armv7m_core_reg *armv7m_reg = reg-&gt;arch_info;
-	target_t *target = armv7m_reg-&gt;target;
+	struct target *target = armv7m_reg-&gt;target;
 	uint32_t value = buf_get_u32(buf, 0, 32);
 
 	if (target-&gt;state != TARGET_HALTED)
@@ -213,7 +213,7 @@ static int armv7m_set_core_reg(struct reg *reg, uint8_t *buf)
 	return ERROR_OK;
 }
 
-static int armv7m_read_core_reg(struct target_s *target, int num)
+static int armv7m_read_core_reg(struct target *target, int num)
 {
 	uint32_t reg_value;
 	int retval;
@@ -232,7 +232,7 @@ static int armv7m_read_core_reg(struct target_s *target, int num)
 	return retval;
 }
 
-static int armv7m_write_core_reg(struct target_s *target, int num)
+static int armv7m_write_core_reg(struct target *target, int num)
 {
 	int retval;
 	uint32_t reg_value;
@@ -259,7 +259,7 @@ static int armv7m_write_core_reg(struct target_s *target, int num)
 }
 
 /** Invalidates cache of core registers set up by armv7m_build_reg_cache(). */
-int armv7m_invalidate_core_regs(target_t *target)
+int armv7m_invalidate_core_regs(struct target *target)
 {
 	struct armv7m_common *armv7m = target_to_armv7m(target);
 	int i;
@@ -279,7 +279,7 @@ int armv7m_invalidate_core_regs(target_t *target)
  * hardware, so this also fakes a set of long-obsolete FPA registers that
  * are not used in EABI based software stacks.
  */
-int armv7m_get_gdb_reg_list(target_t *target, struct reg **reg_list[], int *reg_list_size)
+int armv7m_get_gdb_reg_list(struct target *target, struct reg **reg_list[], int *reg_list_size)
 {
 	struct armv7m_common *armv7m = target_to_armv7m(target);
 	int i;
@@ -321,7 +321,7 @@ int armv7m_get_gdb_reg_list(target_t *target, struct reg **reg_list[], int *reg_
 }
 
 /* run to exit point. return error if exit point was not reached. */
-static int armv7m_run_and_wait(struct target_s *target, uint32_t entry_point, int timeout_ms, uint32_t exit_point, struct armv7m_common *armv7m)
+static int armv7m_run_and_wait(struct target *target, uint32_t entry_point, int timeout_ms, uint32_t exit_point, struct armv7m_common *armv7m)
 {
 	uint32_t pc;
 	int retval;
@@ -356,7 +356,7 @@ static int armv7m_run_and_wait(struct target_s *target, uint32_t entry_point, in
 }
 
 /** Runs a Thumb algorithm in the target. */
-int armv7m_run_algorithm(struct target_s *target,
+int armv7m_run_algorithm(struct target *target,
 	int num_mem_params, struct mem_param *mem_params,
 	int num_reg_params, struct reg_param *reg_params,
 	uint32_t entry_point, uint32_t exit_point,
@@ -501,7 +501,7 @@ int armv7m_run_algorithm(struct target_s *target,
 }
 
 /** Logs summary of ARMv7-M state for a halted target. */
-int armv7m_arch_state(struct target_s *target)
+int armv7m_arch_state(struct target *target)
 {
 	struct armv7m_common *armv7m = target_to_armv7m(target);
 	uint32_t ctrl, sp;
@@ -524,7 +524,7 @@ int armv7m_arch_state(struct target_s *target)
 }
 
 /** Builds cache of architecturally defined registers.  */
-struct reg_cache *armv7m_build_reg_cache(target_t *target)
+struct reg_cache *armv7m_build_reg_cache(struct target *target)
 {
 	struct armv7m_common *armv7m = target_to_armv7m(target);
 	int num_regs = ARMV7M_NUM_REGS;
@@ -573,7 +573,7 @@ struct reg_cache *armv7m_build_reg_cache(target_t *target)
 }
 
 /** Sets up target as a generic ARMv7-M core */
-int armv7m_init_arch_info(target_t *target, struct armv7m_common *armv7m)
+int armv7m_init_arch_info(struct target *target, struct armv7m_common *armv7m)
 {
 	/* register arch-specific functions */
 
@@ -585,7 +585,7 @@ int armv7m_init_arch_info(target_t *target, struct armv7m_common *armv7m)
 }
 
 /** Generates a CRC32 checksum of a memory region. */
-int armv7m_checksum_memory(struct target_s *target,
+int armv7m_checksum_memory(struct target *target,
 		uint32_t address, uint32_t count, uint32_t* checksum)
 {
 	struct working_area *crc_algorithm;
@@ -668,7 +668,7 @@ int armv7m_checksum_memory(struct target_s *target,
 }
 
 /** Checks whether a memory region is zeroed. */
-int armv7m_blank_check_memory(struct target_s *target,
+int armv7m_blank_check_memory(struct target *target,
 		uint32_t address, uint32_t count, uint32_t* blank)
 {
 	struct working_area *erase_check_algorithm;
@@ -747,7 +747,7 @@ int armv7m_blank_check_memory(struct target_s *target,
  */
 COMMAND_HANDLER(handle_dap_baseaddr_command)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct armv7m_common *armv7m = target_to_armv7m(target);
 	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
 	uint32_t apsel, apselsave, baseaddr;
@@ -784,7 +784,7 @@ COMMAND_HANDLER(handle_dap_baseaddr_command)
  */
 COMMAND_HANDLER(handle_dap_apid_command)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct armv7m_common *armv7m = target_to_armv7m(target);
 	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
 
@@ -793,7 +793,7 @@ COMMAND_HANDLER(handle_dap_apid_command)
 
 COMMAND_HANDLER(handle_dap_apsel_command)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct armv7m_common *armv7m = target_to_armv7m(target);
 	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
 
@@ -802,7 +802,7 @@ COMMAND_HANDLER(handle_dap_apsel_command)
 
 COMMAND_HANDLER(handle_dap_memaccess_command)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct armv7m_common *armv7m = target_to_armv7m(target);
 	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
 
@@ -812,7 +812,7 @@ COMMAND_HANDLER(handle_dap_memaccess_command)
 
 COMMAND_HANDLER(handle_dap_info_command)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct armv7m_common *armv7m = target_to_armv7m(target);
 	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
 	uint32_t apsel;
diff --git a/src/target/armv7m.h b/src/target/armv7m.h
index 60f4cba..7debd35 100644
--- a/src/target/armv7m.h
+++ b/src/target/armv7m.h
@@ -100,21 +100,21 @@ struct armv7m_common
 	struct swjdp_common swjdp_info;
 
 	/* Direct processor core register read and writes */
-	int (*load_core_reg_u32)(struct target_s *target, enum armv7m_regtype type, uint32_t num, uint32_t *value);
-	int (*store_core_reg_u32)(struct target_s *target, enum armv7m_regtype type, uint32_t num, uint32_t value);
+	int (*load_core_reg_u32)(struct target *target, enum armv7m_regtype type, uint32_t num, uint32_t *value);
+	int (*store_core_reg_u32)(struct target *target, enum armv7m_regtype type, uint32_t num, uint32_t value);
 	/* register cache to processor synchronization */
-	int (*read_core_reg)(struct target_s *target, int num);
-	int (*write_core_reg)(struct target_s *target, int num);
+	int (*read_core_reg)(struct target *target, int num);
+	int (*write_core_reg)(struct target *target, int num);
 
-	int (*examine_debug_reason)(target_t *target);
-	void (*post_debug_entry)(target_t *target);
+	int (*examine_debug_reason)(struct target *target);
+	void (*post_debug_entry)(struct target *target);
 
-	void (*pre_restore_context)(target_t *target);
-	void (*post_restore_context)(target_t *target);
+	void (*pre_restore_context)(struct target *target);
+	void (*post_restore_context)(struct target *target);
 };
 
 static inline struct armv7m_common *
-target_to_armv7m(struct target_s *target)
+target_to_armv7m(struct target *target)
 {
 	return target-&gt;arch_info;
 }
@@ -130,34 +130,34 @@ struct armv7m_core_reg
 {
 	uint32_t num;
 	enum armv7m_regtype type;
-	target_t *target;
+	struct target *target;
 	struct armv7m_common *armv7m_common;
 };
 
-struct reg_cache *armv7m_build_reg_cache(target_t *target);
+struct reg_cache *armv7m_build_reg_cache(struct target *target);
 enum armv7m_mode armv7m_number_to_mode(int number);
 int armv7m_mode_to_number(enum armv7m_mode mode);
 
-int armv7m_arch_state(struct target_s *target);
-int armv7m_get_gdb_reg_list(target_t *target,
+int armv7m_arch_state(struct target *target);
+int armv7m_get_gdb_reg_list(struct target *target,
 		struct reg **reg_list[], int *reg_list_size);
 
 int armv7m_register_commands(struct command_context_s *cmd_ctx);
-int armv7m_init_arch_info(target_t *target, struct armv7m_common *armv7m);
+int armv7m_init_arch_info(struct target *target, struct armv7m_common *armv7m);
 
-int armv7m_run_algorithm(struct target_s *target,
+int armv7m_run_algorithm(struct target *target,
 		int num_mem_params, struct mem_param *mem_params,
 		int num_reg_params, struct reg_param *reg_params,
 		uint32_t entry_point, uint32_t exit_point,
 		int timeout_ms, void *arch_info);
 
-int armv7m_invalidate_core_regs(target_t *target);
+int armv7m_invalidate_core_regs(struct target *target);
 
-int armv7m_restore_context(target_t *target);
+int armv7m_restore_context(struct target *target);
 
-int armv7m_checksum_memory(struct target_s *target,
+int armv7m_checksum_memory(struct target *target,
 		uint32_t address, uint32_t count, uint32_t* checksum);
-int armv7m_blank_check_memory(struct target_s *target,
+int armv7m_blank_check_memory(struct target *target,
 		uint32_t address, uint32_t count, uint32_t* blank);
 
 /* Thumb mode instructions
diff --git a/src/target/avrt.c b/src/target/avrt.c
index ad22c99..4371561 100644
--- a/src/target/avrt.c
+++ b/src/target/avrt.c
@@ -32,18 +32,18 @@
 int avr_register_commands(struct command_context_s *cmd_ctx);
 
 /* forward declarations */
-int avr_target_create(struct target_s *target, Jim_Interp *interp);
-int avr_init_target(struct command_context_s *cmd_ctx, struct target_s *target);
+int avr_target_create(struct target *target, Jim_Interp *interp);
+int avr_init_target(struct command_context_s *cmd_ctx, struct target *target);
 
-int avr_arch_state(struct target_s *target);
-int avr_poll(target_t *target);
-int avr_halt(target_t *target);
-int avr_resume(struct target_s *target, int current, uint32_t address, int handle_breakpoints, int debug_execution);
-int avr_step(struct target_s *target, int current, uint32_t address, int handle_breakpoints);
+int avr_arch_state(struct target *target);
+int avr_poll(struct target *target);
+int avr_halt(struct target *target);
+int avr_resume(struct target *target, int current, uint32_t address, int handle_breakpoints, int debug_execution);
+int avr_step(struct target *target, int current, uint32_t address, int handle_breakpoints);
 
-int avr_assert_reset(target_t *target);
-int avr_deassert_reset(target_t *target);
-int avr_soft_reset_halt(struct target_s *target);
+int avr_assert_reset(struct target *target);
+int avr_deassert_reset(struct target *target);
+int avr_soft_reset_halt(struct target *target);
 
 /* IR and DR functions */
 int avr_jtag_sendinstr(struct jtag_tap *tap, uint8_t *ir_in, uint8_t ir_out);
@@ -102,7 +102,7 @@ int avr_register_commands(struct command_context_s *cmd_ctx)
 	return ERROR_OK;
 }
 
-int avr_target_create(struct target_s *target, Jim_Interp *interp)
+int avr_target_create(struct target *target, Jim_Interp *interp)
 {
 	struct avr_common *avr = calloc(1, sizeof(struct avr_common));
 
@@ -112,19 +112,19 @@ int avr_target_create(struct target_s *target, Jim_Interp *interp)
 	return ERROR_OK;
 }
 
-int avr_init_target(struct command_context_s *cmd_ctx, struct target_s *target)
+int avr_init_target(struct command_context_s *cmd_ctx, struct target *target)
 {
 	LOG_DEBUG(&quot;%s&quot;, __FUNCTION__);
 	return ERROR_OK;
 }
 
-int avr_arch_state(struct target_s *target)
+int avr_arch_state(struct target *target)
 {
 	LOG_DEBUG(&quot;%s&quot;, __FUNCTION__);
 	return ERROR_OK;
 }
 
-int avr_poll(target_t *target)
+int avr_poll(struct target *target)
 {
 	if ((target-&gt;state == TARGET_RUNNING) || (target-&gt;state == TARGET_DEBUG_RUNNING))
 	{
@@ -135,25 +135,25 @@ int avr_poll(target_t *target)
 	return ERROR_OK;
 }
 
-int avr_halt(target_t *target)
+int avr_halt(struct target *target)
 {
 	LOG_DEBUG(&quot;%s&quot;, __FUNCTION__);
 	return ERROR_OK;
 }
 
-int avr_resume(struct target_s *target, int current, uint32_t address, int handle_breakpoints, int debug_execution)
+int avr_resume(struct target *target, int current, uint32_t address, int handle_breakpoints, int debug_execution)
 {
 	LOG_DEBUG(&quot;%s&quot;, __FUNCTION__);
 	return ERROR_OK;
 }
 
-int avr_step(struct target_s *target, int current, uint32_t address, int handle_breakpoints)
+int avr_step(struct target *target, int current, uint32_t address, int handle_breakpoints)
 {
 	LOG_DEBUG(&quot;%s&quot;, __FUNCTION__);
 	return ERROR_OK;
 }
 
-int avr_assert_reset(target_t *target)
+int avr_assert_reset(struct target *target)
 {
 	target-&gt;state = TARGET_RESET;
 
@@ -161,7 +161,7 @@ int avr_assert_reset(target_t *target)
 	return ERROR_OK;
 }
 
-int avr_deassert_reset(target_t *target)
+int avr_deassert_reset(struct target *target)
 {
 	target-&gt;state = TARGET_RUNNING;
 
@@ -169,7 +169,7 @@ int avr_deassert_reset(target_t *target)
 	return ERROR_OK;
 }
 
-int avr_soft_reset_halt(struct target_s *target)
+int avr_soft_reset_halt(struct target *target)
 {
 	LOG_DEBUG(&quot;%s&quot;, __FUNCTION__);
 	return ERROR_OK;
diff --git a/src/target/breakpoints.c b/src/target/breakpoints.c
index a65ca82..f2b6ff7 100644
--- a/src/target/breakpoints.c
+++ b/src/target/breakpoints.c
@@ -42,7 +42,7 @@ static char *watchpoint_rw_strings[] =
 // monotonic counter/id-number for breakpoints and watch points
 static int bpwp_unique_id;
 
-int breakpoint_add(target_t *target, uint32_t address, uint32_t length, enum breakpoint_type type)
+int breakpoint_add(struct target *target, uint32_t address, uint32_t length, enum breakpoint_type type)
 {
 	struct breakpoint *breakpoint = target-&gt;breakpoints;
 	struct breakpoint **breakpoint_p = &amp;target-&gt;breakpoints;
@@ -107,7 +107,7 @@ int breakpoint_add(target_t *target, uint32_t address, uint32_t length, enum bre
 }
 
 /* free up a breakpoint */
-static void breakpoint_free(target_t *target, struct breakpoint *breakpoint_remove)
+static void breakpoint_free(struct target *target, struct breakpoint *breakpoint_remove)
 {
 	struct breakpoint *breakpoint = target-&gt;breakpoints;
 	struct breakpoint **breakpoint_p = &amp;target-&gt;breakpoints;
@@ -131,7 +131,7 @@ static void breakpoint_free(target_t *target, struct breakpoint *breakpoint_remo
 	free(breakpoint);
 }
 
-void breakpoint_remove(target_t *target, uint32_t address)
+void breakpoint_remove(struct target *target, uint32_t address)
 {
 	struct breakpoint *breakpoint = target-&gt;breakpoints;
 	struct breakpoint **breakpoint_p = &amp;target-&gt;breakpoints;
@@ -154,7 +154,7 @@ void breakpoint_remove(target_t *target, uint32_t address)
 	}
 }
 
-void breakpoint_clear_target(target_t *target)
+void breakpoint_clear_target(struct target *target)
 {
 	struct breakpoint *breakpoint;
 	LOG_DEBUG(&quot;Delete all breakpoints for target: %s&quot;, target_get_name( target ));
@@ -164,7 +164,7 @@ void breakpoint_clear_target(target_t *target)
 	}
 }
 
-struct breakpoint* breakpoint_find(target_t *target, uint32_t address)
+struct breakpoint* breakpoint_find(struct target *target, uint32_t address)
 {
 	struct breakpoint *breakpoint = target-&gt;breakpoints;
 
@@ -178,7 +178,7 @@ struct breakpoint* breakpoint_find(target_t *target, uint32_t address)
 	return NULL;
 }
 
-int watchpoint_add(target_t *target, uint32_t address, uint32_t length,
+int watchpoint_add(struct target *target, uint32_t address, uint32_t length,
 		enum watchpoint_rw rw, uint32_t value, uint32_t mask)
 {
 	struct watchpoint *watchpoint = target-&gt;watchpoints;
@@ -244,7 +244,7 @@ bye:
 	return ERROR_OK;
 }
 
-static void watchpoint_free(target_t *target, struct watchpoint *watchpoint_remove)
+static void watchpoint_free(struct target *target, struct watchpoint *watchpoint_remove)
 {
 	struct watchpoint *watchpoint = target-&gt;watchpoints;
 	struct watchpoint **watchpoint_p = &amp;target-&gt;watchpoints;
@@ -265,7 +265,7 @@ static void watchpoint_free(target_t *target, struct watchpoint *watchpoint_remo
 	free(watchpoint);
 }
 
-void watchpoint_remove(target_t *target, uint32_t address)
+void watchpoint_remove(struct target *target, uint32_t address)
 {
 	struct watchpoint *watchpoint = target-&gt;watchpoints;
 	struct watchpoint **watchpoint_p = &amp;target-&gt;watchpoints;
@@ -288,7 +288,7 @@ void watchpoint_remove(target_t *target, uint32_t address)
 	}
 }
 
-void watchpoint_clear_target(target_t *target)
+void watchpoint_clear_target(struct target *target)
 {
 	struct watchpoint *watchpoint;
 	LOG_DEBUG(&quot;Delete all watchpoints for target: %s&quot;, target_get_name( target ));
diff --git a/src/target/breakpoints.h b/src/target/breakpoints.h
index 2a79a9a..a65f20e 100644
--- a/src/target/breakpoints.h
+++ b/src/target/breakpoints.h
@@ -22,7 +22,7 @@
 
 #include &quot;types.h&quot;
 
-struct target_s;
+struct target;
 
 enum breakpoint_type
 {
@@ -58,17 +58,17 @@ struct watchpoint
 	int unique_id;
 };
 
-void breakpoint_clear_target(struct target_s *target);
-int breakpoint_add(struct target_s *target,
+void breakpoint_clear_target(struct target *target);
+int breakpoint_add(struct target *target,
 		uint32_t address, uint32_t length, enum breakpoint_type type);
-void breakpoint_remove(struct target_s *target, uint32_t address);
+void breakpoint_remove(struct target *target, uint32_t address);
 
-struct breakpoint* breakpoint_find(struct target_s *target, uint32_t address);
+struct breakpoint* breakpoint_find(struct target *target, uint32_t address);
 
-void watchpoint_clear_target(struct target_s *target);
-int watchpoint_add(struct target_s *target,
+void watchpoint_clear_target(struct target *target);
+int watchpoint_add(struct target *target,
 		uint32_t address, uint32_t length,
 		enum watchpoint_rw rw, uint32_t value, uint32_t mask);
-void watchpoint_remove(struct target_s *target, uint32_t address);
+void watchpoint_remove(struct target *target, uint32_t address);
 
 #endif /* BREAKPOINTS_H */
diff --git a/src/target/cortex_a8.c b/src/target/cortex_a8.c
index f925311..586b9ea 100644
--- a/src/target/cortex_a8.c
+++ b/src/target/cortex_a8.c
@@ -40,16 +40,16 @@
 #include &quot;target_request.h&quot;
 #include &quot;target_type.h&quot;
 
-static int cortex_a8_poll(target_t *target);
-static int cortex_a8_debug_entry(target_t *target);
-static int cortex_a8_restore_context(target_t *target);
-static int cortex_a8_set_breakpoint(struct target_s *target,
+static int cortex_a8_poll(struct target *target);
+static int cortex_a8_debug_entry(struct target *target);
+static int cortex_a8_restore_context(struct target *target);
+static int cortex_a8_set_breakpoint(struct target *target,
 		struct breakpoint *breakpoint, uint8_t matchmode);
-static int cortex_a8_unset_breakpoint(struct target_s *target,
+static int cortex_a8_unset_breakpoint(struct target *target,
 		struct breakpoint *breakpoint);
-static int cortex_a8_dap_read_coreregister_u32(target_t *target,
+static int cortex_a8_dap_read_coreregister_u32(struct target *target,
 		uint32_t *value, int regnum);
-static int cortex_a8_dap_write_coreregister_u32(target_t *target,
+static int cortex_a8_dap_write_coreregister_u32(struct target *target,
 		uint32_t value, int regnum);
 /*
  * FIXME do topology discovery using the ROM; don't
@@ -62,7 +62,7 @@ static int cortex_a8_dap_write_coreregister_u32(target_t *target,
 /*
  * Cortex-A8 Basic debug access, very low level assumes state is saved
  */
-static int cortex_a8_init_debug_access(target_t *target)
+static int cortex_a8_init_debug_access(struct target *target)
 {
 	struct armv7a_common *armv7a = target_to_armv7a(target);
 	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
@@ -90,7 +90,7 @@ static int cortex_a8_init_debug_access(target_t *target)
 	return retval;
 }
 
-int cortex_a8_exec_opcode(target_t *target, uint32_t opcode)
+int cortex_a8_exec_opcode(struct target *target, uint32_t opcode)
 {
 	uint32_t dscr;
 	int retval;
@@ -131,7 +131,7 @@ int cortex_a8_exec_opcode(target_t *target, uint32_t opcode)
 Read core register with very few exec_opcode, fast but needs work_area.
 This can cause problems with MMU active.
 **************************************************************************/
-static int cortex_a8_read_regs_through_mem(target_t *target, uint32_t address,
+static int cortex_a8_read_regs_through_mem(struct target *target, uint32_t address,
 		uint32_t * regfile)
 {
 	int retval = ERROR_OK;
@@ -148,7 +148,7 @@ static int cortex_a8_read_regs_through_mem(target_t *target, uint32_t address,
 	return retval;
 }
 
-static int cortex_a8_read_cp(target_t *target, uint32_t *value, uint8_t CP,
+static int cortex_a8_read_cp(struct target *target, uint32_t *value, uint8_t CP,
 		uint8_t op1, uint8_t CRn, uint8_t CRm, uint8_t op2)
 {
 	int retval;
@@ -166,7 +166,7 @@ static int cortex_a8_read_cp(target_t *target, uint32_t *value, uint8_t CP,
 	return retval;
 }
 
-static int cortex_a8_write_cp(target_t *target, uint32_t value,
+static int cortex_a8_write_cp(struct target *target, uint32_t value,
 	uint8_t CP, uint8_t op1, uint8_t CRn, uint8_t CRm, uint8_t op2)
 {
 	int retval;
@@ -195,19 +195,19 @@ static int cortex_a8_write_cp(target_t *target, uint32_t value,
 	return retval;
 }
 
-static int cortex_a8_read_cp15(target_t *target, uint32_t op1, uint32_t op2,
+static int cortex_a8_read_cp15(struct target *target, uint32_t op1, uint32_t op2,
 		uint32_t CRn, uint32_t CRm, uint32_t *value)
 {
 	return cortex_a8_read_cp(target, value, 15, op1, CRn, CRm, op2);
 }
 
-static int cortex_a8_write_cp15(target_t *target, uint32_t op1, uint32_t op2,
+static int cortex_a8_write_cp15(struct target *target, uint32_t op1, uint32_t op2,
 		uint32_t CRn, uint32_t CRm, uint32_t value)
 {
 	return cortex_a8_write_cp(target, value, 15, op1, CRn, CRm, op2);
 }
 
-static int cortex_a8_mrc(target_t *target, int cpnum, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t *value)
+static int cortex_a8_mrc(struct target *target, int cpnum, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t *value)
 {
 	if (cpnum!=15)
 	{
@@ -217,7 +217,7 @@ static int cortex_a8_mrc(target_t *target, int cpnum, uint32_t op1, uint32_t op2
 	return cortex_a8_read_cp15(target, op1, op2, CRn, CRm, value);
 }
 
-static int cortex_a8_mcr(target_t *target, int cpnum, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t value)
+static int cortex_a8_mcr(struct target *target, int cpnum, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t value)
 {
 	if (cpnum!=15)
 	{
@@ -229,7 +229,7 @@ static int cortex_a8_mcr(target_t *target, int cpnum, uint32_t op1, uint32_t op2
 
 
 
-static int cortex_a8_dap_read_coreregister_u32(target_t *target,
+static int cortex_a8_dap_read_coreregister_u32(struct target *target,
 		uint32_t *value, int regnum)
 {
 	int retval = ERROR_OK;
@@ -271,7 +271,7 @@ static int cortex_a8_dap_read_coreregister_u32(target_t *target,
 	return retval;
 }
 
-static int cortex_a8_dap_write_coreregister_u32(target_t *target, uint32_t value, int regnum)
+static int cortex_a8_dap_write_coreregister_u32(struct target *target, uint32_t value, int regnum)
 {
 	int retval = ERROR_OK;
 	uint8_t Rd = regnum&amp;0xFF;
@@ -320,7 +320,7 @@ static int cortex_a8_dap_write_coreregister_u32(target_t *target, uint32_t value
 }
 
 /* Write to memory mapped registers directly with no cache or mmu handling */
-static int cortex_a8_dap_write_memap_register_u32(target_t *target, uint32_t address, uint32_t value)
+static int cortex_a8_dap_write_memap_register_u32(struct target *target, uint32_t address, uint32_t value)
 {
 	int retval;
 	struct armv7a_common *armv7a = target_to_armv7a(target);
@@ -335,7 +335,7 @@ static int cortex_a8_dap_write_memap_register_u32(target_t *target, uint32_t add
  * Cortex-A8 Run control
  */
 
-static int cortex_a8_poll(target_t *target)
+static int cortex_a8_poll(struct target *target)
 {
 	int retval = ERROR_OK;
 	uint32_t dscr;
@@ -400,7 +400,7 @@ static int cortex_a8_poll(target_t *target)
 	return retval;
 }
 
-static int cortex_a8_halt(target_t *target)
+static int cortex_a8_halt(struct target *target)
 {
 	int retval = ERROR_OK;
 	uint32_t dscr;
@@ -438,7 +438,7 @@ out:
 	return retval;
 }
 
-static int cortex_a8_resume(struct target_s *target, int current,
+static int cortex_a8_resume(struct target *target, int current,
 		uint32_t address, int handle_breakpoints, int debug_execution)
 {
 	struct armv7a_common *armv7a = target_to_armv7a(target);
@@ -559,7 +559,7 @@ static int cortex_a8_resume(struct target_s *target, int current,
 	return ERROR_OK;
 }
 
-static int cortex_a8_debug_entry(target_t *target)
+static int cortex_a8_debug_entry(struct target *target)
 {
 	int i;
 	uint32_t regfile[16], pc, cpsr, dscr;
@@ -688,7 +688,7 @@ static int cortex_a8_debug_entry(target_t *target)
 
 }
 
-static void cortex_a8_post_debug_entry(target_t *target)
+static void cortex_a8_post_debug_entry(struct target *target)
 {
 	struct cortex_a8_common *cortex_a8 = target_to_cortex_a8(target);
 	struct armv7a_common *armv7a = &amp;cortex_a8-&gt;armv7a_common;
@@ -720,7 +720,7 @@ static void cortex_a8_post_debug_entry(target_t *target)
 
 }
 
-static int cortex_a8_step(struct target_s *target, int current, uint32_t address,
+static int cortex_a8_step(struct target *target, int current, uint32_t address,
 		int handle_breakpoints)
 {
 	struct armv7a_common *armv7a = target_to_armv7a(target);
@@ -799,7 +799,7 @@ static int cortex_a8_step(struct target_s *target, int current, uint32_t address
 	return ERROR_OK;
 }
 
-static int cortex_a8_restore_context(target_t *target)
+static int cortex_a8_restore_context(struct target *target)
 {
 	int i;
 	uint32_t value;
@@ -835,7 +835,7 @@ static int cortex_a8_restore_context(target_t *target)
 /*
  * Cortex-A8 Core register functions
  */
-static int cortex_a8_load_core_reg_u32(struct target_s *target, int num,
+static int cortex_a8_load_core_reg_u32(struct target *target, int num,
 		armv4_5_mode_t mode, uint32_t * value)
 {
 	int retval;
@@ -872,7 +872,7 @@ static int cortex_a8_load_core_reg_u32(struct target_s *target, int num,
 	return ERROR_OK;
 }
 
-static int cortex_a8_store_core_reg_u32(struct target_s *target, int num,
+static int cortex_a8_store_core_reg_u32(struct target *target, int num,
 		armv4_5_mode_t mode, uint32_t value)
 {
 	int retval;
@@ -914,7 +914,7 @@ static int cortex_a8_store_core_reg_u32(struct target_s *target, int num,
 #endif
 
 
-static int cortex_a8_read_core_reg(struct target_s *target, int num,
+static int cortex_a8_read_core_reg(struct target *target, int num,
 		enum armv4_5_mode mode)
 {
 	uint32_t value;
@@ -936,7 +936,7 @@ static int cortex_a8_read_core_reg(struct target_s *target, int num,
 	return ERROR_OK;
 }
 
-int cortex_a8_write_core_reg(struct target_s *target, int num,
+int cortex_a8_write_core_reg(struct target *target, int num,
 		enum armv4_5_mode mode, uint32_t value)
 {
 	int retval;
@@ -960,7 +960,7 @@ int cortex_a8_write_core_reg(struct target_s *target, int num,
  */
 
 /* Setup hardware Breakpoint Register Pair */
-static int cortex_a8_set_breakpoint(struct target_s *target,
+static int cortex_a8_set_breakpoint(struct target *target,
 		struct breakpoint *breakpoint, uint8_t matchmode)
 {
 	int retval;
@@ -1035,7 +1035,7 @@ static int cortex_a8_set_breakpoint(struct target_s *target,
 	return ERROR_OK;
 }
 
-static int cortex_a8_unset_breakpoint(struct target_s *target, struct breakpoint *breakpoint)
+static int cortex_a8_unset_breakpoint(struct target *target, struct breakpoint *breakpoint)
 {
 	int retval;
 	struct cortex_a8_common *cortex_a8 = target_to_cortex_a8(target);
@@ -1093,7 +1093,7 @@ static int cortex_a8_unset_breakpoint(struct target_s *target, struct breakpoint
 	return ERROR_OK;
 }
 
-int cortex_a8_add_breakpoint(struct target_s *target, struct breakpoint *breakpoint)
+int cortex_a8_add_breakpoint(struct target *target, struct breakpoint *breakpoint)
 {
 	struct cortex_a8_common *cortex_a8 = target_to_cortex_a8(target);
 
@@ -1110,7 +1110,7 @@ int cortex_a8_add_breakpoint(struct target_s *target, struct breakpoint *breakpo
 	return ERROR_OK;
 }
 
-static int cortex_a8_remove_breakpoint(struct target_s *target, struct breakpoint *breakpoint)
+static int cortex_a8_remove_breakpoint(struct target *target, struct breakpoint *breakpoint)
 {
 	struct cortex_a8_common *cortex_a8 = target_to_cortex_a8(target);
 
@@ -1140,7 +1140,7 @@ static int cortex_a8_remove_breakpoint(struct target_s *target, struct breakpoin
  * Cortex-A8 Reset fuctions
  */
 
-static int cortex_a8_assert_reset(target_t *target)
+static int cortex_a8_assert_reset(struct target *target)
 {
 
 	LOG_DEBUG(&quot; &quot;);
@@ -1153,7 +1153,7 @@ static int cortex_a8_assert_reset(target_t *target)
 	return ERROR_OK;
 }
 
-static int cortex_a8_deassert_reset(target_t *target)
+static int cortex_a8_deassert_reset(struct target *target)
 {
 
 	LOG_DEBUG(&quot; &quot;);
@@ -1175,7 +1175,7 @@ static int cortex_a8_deassert_reset(target_t *target)
  * ap number for every access.
  */
 
-static int cortex_a8_read_memory(struct target_s *target, uint32_t address,
+static int cortex_a8_read_memory(struct target *target, uint32_t address,
 		uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	struct armv7a_common *armv7a = target_to_armv7a(target);
@@ -1210,7 +1210,7 @@ static int cortex_a8_read_memory(struct target_s *target, uint32_t address,
 	return retval;
 }
 
-int cortex_a8_write_memory(struct target_s *target, uint32_t address,
+int cortex_a8_write_memory(struct target *target, uint32_t address,
 		uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	struct armv7a_common *armv7a = target_to_armv7a(target);
@@ -1264,7 +1264,7 @@ int cortex_a8_write_memory(struct target_s *target, uint32_t address,
 	return retval;
 }
 
-static int cortex_a8_bulk_write_memory(target_t *target, uint32_t address,
+static int cortex_a8_bulk_write_memory(struct target *target, uint32_t address,
 		uint32_t count, uint8_t *buffer)
 {
 	return cortex_a8_write_memory(target, address, 4, count, buffer);
@@ -1296,7 +1296,7 @@ static int cortex_a8_dcc_read(struct swjdp_common *swjdp, uint8_t *value, uint8_
 
 static int cortex_a8_handle_target_request(void *priv)
 {
-	target_t *target = priv;
+	struct target *target = priv;
 	if (!target-&gt;type-&gt;examined)
 		return ERROR_OK;
 	struct armv7a_common *armv7a = target_to_armv7a(target);
@@ -1336,7 +1336,7 @@ static int cortex_a8_handle_target_request(void *priv)
  * Cortex-A8 target information and configuration
  */
 
-static int cortex_a8_examine(struct target_s *target)
+static int cortex_a8_examine(struct target *target)
 {
 	struct cortex_a8_common *cortex_a8 = target_to_cortex_a8(target);
 	struct armv7a_common *armv7a = &amp;cortex_a8-&gt;armv7a_common;
@@ -1433,7 +1433,7 @@ static int cortex_a8_examine(struct target_s *target)
  *	Cortex-A8 target creation and initialization
  */
 
-static void cortex_a8_build_reg_cache(target_t *target)
+static void cortex_a8_build_reg_cache(struct target *target)
 {
 	struct reg_cache **cache_p = register_get_last_cache_p(&amp;target-&gt;reg_cache);
 	struct armv4_5_common_s *armv4_5 = target_to_armv4_5(target);
@@ -1444,13 +1444,13 @@ static void cortex_a8_build_reg_cache(target_t *target)
 
 
 static int cortex_a8_init_target(struct command_context_s *cmd_ctx,
-		struct target_s *target)
+		struct target *target)
 {
 	cortex_a8_build_reg_cache(target);
 	return ERROR_OK;
 }
 
-int cortex_a8_init_arch_info(target_t *target,
+int cortex_a8_init_arch_info(struct target *target,
 		struct cortex_a8_common *cortex_a8, struct jtag_tap *tap)
 {
 	struct arm *armv4_5;
@@ -1517,7 +1517,7 @@ LOG_DEBUG(&quot; &quot;);
 	return ERROR_OK;
 }
 
-static int cortex_a8_target_create(struct target_s *target, Jim_Interp *interp)
+static int cortex_a8_target_create(struct target *target, Jim_Interp *interp)
 {
 	struct cortex_a8_common *cortex_a8 = calloc(1, sizeof(struct cortex_a8_common));
 
@@ -1528,7 +1528,7 @@ static int cortex_a8_target_create(struct target_s *target, Jim_Interp *interp)
 
 COMMAND_HANDLER(cortex_a8_handle_cache_info_command)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct armv7a_common *armv7a = target_to_armv7a(target);
 
 	return armv4_5_handle_cache_info_command(cmd_ctx,
@@ -1538,7 +1538,7 @@ COMMAND_HANDLER(cortex_a8_handle_cache_info_command)
 
 COMMAND_HANDLER(cortex_a8_handle_dbginit_command)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 
 	cortex_a8_init_debug_access(target);
 
diff --git a/src/target/cortex_a8.h b/src/target/cortex_a8.h
index e3b99ee..e7ea6c7 100644
--- a/src/target/cortex_a8.h
+++ b/src/target/cortex_a8.h
@@ -137,13 +137,13 @@ struct cortex_a8_common
 };
 
 static inline struct cortex_a8_common *
-target_to_cortex_a8(struct target_s *target)
+target_to_cortex_a8(struct target *target)
 {
 	return container_of(target-&gt;arch_info, struct cortex_a8_common,
 			armv7a_common.armv4_5_common);
 }
 
-int cortex_a8_init_arch_info(target_t *target,
+int cortex_a8_init_arch_info(struct target *target,
 		struct cortex_a8_common *cortex_a8, struct jtag_tap *tap);
 
 #endif /* CORTEX_A8_H */
diff --git a/src/target/cortex_m3.c b/src/target/cortex_m3.c
index 58c3d8f..eea9c88 100644
--- a/src/target/cortex_m3.c
+++ b/src/target/cortex_m3.c
@@ -45,10 +45,10 @@
 
 
 /* forward declarations */
-static int cortex_m3_set_breakpoint(struct target_s *target, struct breakpoint *breakpoint);
-static int cortex_m3_unset_breakpoint(struct target_s *target, struct breakpoint *breakpoint);
-static void cortex_m3_enable_watchpoints(struct target_s *target);
-static int cortex_m3_store_core_reg_u32(target_t *target,
+static int cortex_m3_set_breakpoint(struct target *target, struct breakpoint *breakpoint);
+static int cortex_m3_unset_breakpoint(struct target *target, struct breakpoint *breakpoint);
+static void cortex_m3_enable_watchpoints(struct target *target);
+static int cortex_m3_store_core_reg_u32(struct target *target,
 		enum armv7m_regtype type, uint32_t num, uint32_t value);
 
 #ifdef ARMV7_GDB_HACKS
@@ -118,7 +118,7 @@ static int cortexm3_dap_write_coreregister_u32(struct swjdp_common *swjdp,
 	return retval;
 }
 
-static int cortex_m3_write_debug_halt_mask(target_t *target,
+static int cortex_m3_write_debug_halt_mask(struct target *target,
 		uint32_t mask_on, uint32_t mask_off)
 {
 	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
@@ -132,7 +132,7 @@ static int cortex_m3_write_debug_halt_mask(target_t *target,
 	return mem_ap_write_atomic_u32(swjdp, DCB_DHCSR, cortex_m3-&gt;dcb_dhcsr);
 }
 
-static int cortex_m3_clear_halt(target_t *target)
+static int cortex_m3_clear_halt(struct target *target)
 {
 	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 	struct swjdp_common *swjdp = &amp;cortex_m3-&gt;armv7m.swjdp_info;
@@ -149,7 +149,7 @@ static int cortex_m3_clear_halt(target_t *target)
 	return ERROR_OK;
 }
 
-static int cortex_m3_single_step_core(target_t *target)
+static int cortex_m3_single_step_core(struct target *target)
 {
 	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 	struct swjdp_common *swjdp = &amp;cortex_m3-&gt;armv7m.swjdp_info;
@@ -171,7 +171,7 @@ static int cortex_m3_single_step_core(target_t *target)
 	return ERROR_OK;
 }
 
-static int cortex_m3_endreset_event(target_t *target)
+static int cortex_m3_endreset_event(struct target *target)
 {
 	int i;
 	uint32_t dcb_demcr;
@@ -229,7 +229,7 @@ static int cortex_m3_endreset_event(target_t *target)
 	return ERROR_OK;
 }
 
-static int cortex_m3_examine_debug_reason(target_t *target)
+static int cortex_m3_examine_debug_reason(struct target *target)
 {
 	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 
@@ -256,7 +256,7 @@ static int cortex_m3_examine_debug_reason(target_t *target)
 	return ERROR_OK;
 }
 
-static int cortex_m3_examine_exception_reason(target_t *target)
+static int cortex_m3_examine_exception_reason(struct target *target)
 {
 	uint32_t shcsr, except_sr, cfsr = -1, except_ar = -1;
 	struct armv7m_common *armv7m = target_to_armv7m(target);
@@ -304,7 +304,7 @@ static int cortex_m3_examine_exception_reason(target_t *target)
 	return ERROR_OK;
 }
 
-static int cortex_m3_debug_entry(target_t *target)
+static int cortex_m3_debug_entry(struct target *target)
 {
 	int i;
 	uint32_t xPSR;
@@ -376,7 +376,7 @@ static int cortex_m3_debug_entry(target_t *target)
 	return ERROR_OK;
 }
 
-static int cortex_m3_poll(target_t *target)
+static int cortex_m3_poll(struct target *target)
 {
 	int retval;
 	enum target_state prev_target_state = target-&gt;state;
@@ -450,7 +450,7 @@ static int cortex_m3_poll(target_t *target)
 	return ERROR_OK;
 }
 
-static int cortex_m3_halt(target_t *target)
+static int cortex_m3_halt(struct target *target)
 {
 	LOG_DEBUG(&quot;target-&gt;state: %s&quot;,
 		target_state_name(target));
@@ -492,7 +492,7 @@ static int cortex_m3_halt(target_t *target)
 	return ERROR_OK;
 }
 
-static int cortex_m3_soft_reset_halt(struct target_s *target)
+static int cortex_m3_soft_reset_halt(struct target *target)
 {
 	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 	struct swjdp_common *swjdp = &amp;cortex_m3-&gt;armv7m.swjdp_info;
@@ -531,7 +531,7 @@ static int cortex_m3_soft_reset_halt(struct target_s *target)
 	return ERROR_OK;
 }
 
-static void cortex_m3_enable_breakpoints(struct target_s *target)
+static void cortex_m3_enable_breakpoints(struct target *target)
 {
 	struct breakpoint *breakpoint = target-&gt;breakpoints;
 
@@ -544,7 +544,7 @@ static void cortex_m3_enable_breakpoints(struct target_s *target)
 	}
 }
 
-static int cortex_m3_resume(struct target_s *target, int current,
+static int cortex_m3_resume(struct target *target, int current,
 		uint32_t address, int handle_breakpoints, int debug_execution)
 {
 	struct armv7m_common *armv7m = target_to_armv7m(target);
@@ -632,7 +632,7 @@ static int cortex_m3_resume(struct target_s *target, int current,
 }
 
 /* int irqstepcount = 0; */
-static int cortex_m3_step(struct target_s *target, int current,
+static int cortex_m3_step(struct target *target, int current,
 		uint32_t address, int handle_breakpoints)
 {
 	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
@@ -684,7 +684,7 @@ static int cortex_m3_step(struct target_s *target, int current,
 	return ERROR_OK;
 }
 
-static int cortex_m3_assert_reset(target_t *target)
+static int cortex_m3_assert_reset(struct target *target)
 {
 	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 	struct swjdp_common *swjdp = &amp;cortex_m3-&gt;armv7m.swjdp_info;
@@ -821,7 +821,7 @@ static int cortex_m3_assert_reset(target_t *target)
 	return ERROR_OK;
 }
 
-static int cortex_m3_deassert_reset(target_t *target)
+static int cortex_m3_deassert_reset(struct target *target)
 {
 	LOG_DEBUG(&quot;target-&gt;state: %s&quot;,
 		target_state_name(target));
@@ -833,7 +833,7 @@ static int cortex_m3_deassert_reset(target_t *target)
 }
 
 static int
-cortex_m3_set_breakpoint(struct target_s *target, struct breakpoint *breakpoint)
+cortex_m3_set_breakpoint(struct target *target, struct breakpoint *breakpoint)
 {
 	int retval;
 	int fp_num = 0;
@@ -900,7 +900,7 @@ cortex_m3_set_breakpoint(struct target_s *target, struct breakpoint *breakpoint)
 }
 
 static int
-cortex_m3_unset_breakpoint(struct target_s *target, struct breakpoint *breakpoint)
+cortex_m3_unset_breakpoint(struct target *target, struct breakpoint *breakpoint)
 {
 	int retval;
 	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
@@ -955,7 +955,7 @@ cortex_m3_unset_breakpoint(struct target_s *target, struct breakpoint *breakpoin
 }
 
 static int
-cortex_m3_add_breakpoint(struct target_s *target, struct breakpoint *breakpoint)
+cortex_m3_add_breakpoint(struct target *target, struct breakpoint *breakpoint)
 {
 	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 
@@ -1004,7 +1004,7 @@ cortex_m3_add_breakpoint(struct target_s *target, struct breakpoint *breakpoint)
 }
 
 static int
-cortex_m3_remove_breakpoint(struct target_s *target, struct breakpoint *breakpoint)
+cortex_m3_remove_breakpoint(struct target *target, struct breakpoint *breakpoint)
 {
 	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 
@@ -1032,7 +1032,7 @@ cortex_m3_remove_breakpoint(struct target_s *target, struct breakpoint *breakpoi
 }
 
 static int
-cortex_m3_set_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
+cortex_m3_set_watchpoint(struct target *target, struct watchpoint *watchpoint)
 {
 	int dwt_num = 0;
 	uint32_t mask, temp;
@@ -1097,7 +1097,7 @@ cortex_m3_set_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
 }
 
 static int
-cortex_m3_unset_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
+cortex_m3_unset_watchpoint(struct target *target, struct watchpoint *watchpoint)
 {
 	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 	struct cortex_m3_dwt_comparator *comparator;
@@ -1134,7 +1134,7 @@ cortex_m3_unset_watchpoint(struct target_s *target, struct watchpoint *watchpoin
 }
 
 static int
-cortex_m3_add_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
+cortex_m3_add_watchpoint(struct target *target, struct watchpoint *watchpoint)
 {
 	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 
@@ -1192,7 +1192,7 @@ cortex_m3_add_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
 }
 
 static int
-cortex_m3_remove_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
+cortex_m3_remove_watchpoint(struct target *target, struct watchpoint *watchpoint)
 {
 	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 
@@ -1214,7 +1214,7 @@ cortex_m3_remove_watchpoint(struct target_s *target, struct watchpoint *watchpoi
 	return ERROR_OK;
 }
 
-static void cortex_m3_enable_watchpoints(struct target_s *target)
+static void cortex_m3_enable_watchpoints(struct target *target)
 {
 	struct watchpoint *watchpoint = target-&gt;watchpoints;
 
@@ -1227,7 +1227,7 @@ static void cortex_m3_enable_watchpoints(struct target_s *target)
 	}
 }
 
-static int cortex_m3_load_core_reg_u32(struct target_s *target,
+static int cortex_m3_load_core_reg_u32(struct target *target,
 		enum armv7m_regtype type, uint32_t num, uint32_t * value)
 {
 	int retval;
@@ -1290,7 +1290,7 @@ static int cortex_m3_load_core_reg_u32(struct target_s *target,
 	return ERROR_OK;
 }
 
-static int cortex_m3_store_core_reg_u32(struct target_s *target,
+static int cortex_m3_store_core_reg_u32(struct target *target,
 		enum armv7m_regtype type, uint32_t num, uint32_t value)
 {
 	int retval;
@@ -1367,7 +1367,7 @@ static int cortex_m3_store_core_reg_u32(struct target_s *target,
 	return ERROR_OK;
 }
 
-static int cortex_m3_read_memory(struct target_s *target, uint32_t address,
+static int cortex_m3_read_memory(struct target *target, uint32_t address,
 		uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	struct armv7m_common *armv7m = target_to_armv7m(target);
@@ -1399,7 +1399,7 @@ static int cortex_m3_read_memory(struct target_s *target, uint32_t address,
 	return retval;
 }
 
-static int cortex_m3_write_memory(struct target_s *target, uint32_t address,
+static int cortex_m3_write_memory(struct target *target, uint32_t address,
 		uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	struct armv7m_common *armv7m = target_to_armv7m(target);
@@ -1429,14 +1429,14 @@ static int cortex_m3_write_memory(struct target_s *target, uint32_t address,
 	return retval;
 }
 
-static int cortex_m3_bulk_write_memory(target_t *target, uint32_t address,
+static int cortex_m3_bulk_write_memory(struct target *target, uint32_t address,
 		uint32_t count, uint8_t *buffer)
 {
 	return cortex_m3_write_memory(target, address, 4, count, buffer);
 }
 
 static int cortex_m3_init_target(struct command_context_s *cmd_ctx,
-		struct target_s *target)
+		struct target *target)
 {
 	armv7m_build_reg_cache(target);
 	return ERROR_OK;
@@ -1448,7 +1448,7 @@ static int cortex_m3_init_target(struct command_context_s *cmd_ctx,
  */
 
 struct dwt_reg_state {
-	struct target_s	*target;
+	struct target	*target;
 	uint32_t	addr;
 	uint32_t	value;	/* scratch/cache */
 };
@@ -1495,7 +1495,7 @@ static struct dwt_reg dwt_comp[] = {
 static int dwt_reg_type = -1;
 
 static void
-cortex_m3_dwt_addreg(struct target_s *t, struct reg *r, struct dwt_reg *d)
+cortex_m3_dwt_addreg(struct target *t, struct reg *r, struct dwt_reg *d)
 {
 	struct dwt_reg_state *state;
 
@@ -1513,7 +1513,7 @@ cortex_m3_dwt_addreg(struct target_s *t, struct reg *r, struct dwt_reg *d)
 }
 
 static void
-cortex_m3_dwt_setup(struct cortex_m3_common *cm3, struct target_s *target)
+cortex_m3_dwt_setup(struct cortex_m3_common *cm3, struct target *target)
 {
 	uint32_t dwtcr;
 	struct reg_cache *cache;
@@ -1582,7 +1582,7 @@ fail1:
 	 */
 }
 
-static int cortex_m3_examine(struct target_s *target)
+static int cortex_m3_examine(struct target *target)
 {
 	int retval;
 	uint32_t cpuid, fpcr;
@@ -1651,7 +1651,7 @@ static int cortex_m3_dcc_read(struct swjdp_common *swjdp, uint8_t *value, uint8_
 	return ERROR_OK;
 }
 
-static int cortex_m3_target_request_data(target_t *target,
+static int cortex_m3_target_request_data(struct target *target,
 		uint32_t size, uint8_t *buffer)
 {
 	struct armv7m_common *armv7m = target_to_armv7m(target);
@@ -1671,7 +1671,7 @@ static int cortex_m3_target_request_data(target_t *target,
 
 static int cortex_m3_handle_target_request(void *priv)
 {
-	target_t *target = priv;
+	struct target *target = priv;
 	if (!target_was_examined(target))
 		return ERROR_OK;
 	struct armv7m_common *armv7m = target_to_armv7m(target);
@@ -1707,7 +1707,7 @@ static int cortex_m3_handle_target_request(void *priv)
 	return ERROR_OK;
 }
 
-static int cortex_m3_init_arch_info(target_t *target,
+static int cortex_m3_init_arch_info(struct target *target,
 		struct cortex_m3_common *cortex_m3, struct jtag_tap *tap)
 {
 	int retval;
@@ -1747,7 +1747,7 @@ static int cortex_m3_init_arch_info(target_t *target,
 	return ERROR_OK;
 }
 
-static int cortex_m3_target_create(struct target_s *target, Jim_Interp *interp)
+static int cortex_m3_target_create(struct target *target, Jim_Interp *interp)
 {
 	struct cortex_m3_common *cortex_m3 = calloc(1,sizeof(struct cortex_m3_common));
 
@@ -1784,7 +1784,7 @@ static int cortex_m3_verify_pointer(struct command_context_s *cmd_ctx,
 COMMAND_HANDLER(handle_cortex_m3_disassemble_command)
 {
 	int retval;
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 	uint32_t address;
 	unsigned long count = 1;
@@ -1835,7 +1835,7 @@ static const struct {
 
 COMMAND_HANDLER(handle_cortex_m3_vector_catch_command)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 	struct armv7m_common *armv7m = &amp;cortex_m3-&gt;armv7m;
 	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
@@ -1892,7 +1892,7 @@ write:
 
 COMMAND_HANDLER(handle_cortex_m3_mask_interrupts_command)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 	int retval;
 
diff --git a/src/target/cortex_m3.h b/src/target/cortex_m3.h
index f5dde5b..ed08323 100644
--- a/src/target/cortex_m3.h
+++ b/src/target/cortex_m3.h
@@ -164,7 +164,7 @@ struct cortex_m3_common
 };
 
 static inline struct cortex_m3_common *
-target_to_cm3(struct target_s *target)
+target_to_cm3(struct target *target)
 {
 	return container_of(target-&gt;arch_info,
 			struct cortex_m3_common, armv7m);
diff --git a/src/target/embeddedice.c b/src/target/embeddedice.c
index 21195f7..e73cb7f 100644
--- a/src/target/embeddedice.c
+++ b/src/target/embeddedice.c
@@ -164,7 +164,7 @@ static int embeddedice_get_reg(struct reg *reg)
  * hardware support for vector_catch, single stepping, and monitor mode.
  */
 struct reg_cache *
-embeddedice_build_reg_cache(target_t *target, struct arm7_9_common *arm7_9)
+embeddedice_build_reg_cache(struct target *target, struct arm7_9_common *arm7_9)
 {
 	int retval;
 	struct reg_cache *reg_cache = malloc(sizeof(struct reg_cache));
@@ -300,7 +300,7 @@ embeddedice_build_reg_cache(target_t *target, struct arm7_9_common *arm7_9)
 /**
  * Initialize EmbeddedICE module, if needed.
  */
-int embeddedice_setup(target_t *target)
+int embeddedice_setup(struct target *target)
 {
 	int retval;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
diff --git a/src/target/embeddedice.h b/src/target/embeddedice.h
index 23673f9..3254ed2 100644
--- a/src/target/embeddedice.h
+++ b/src/target/embeddedice.h
@@ -93,10 +93,10 @@ struct embeddedice_reg
 	struct arm_jtag *jtag_info;
 };
 
-struct reg_cache* embeddedice_build_reg_cache(target_t *target,
+struct reg_cache* embeddedice_build_reg_cache(struct target *target,
 		struct arm7_9_common *arm7_9);
 
-int embeddedice_setup(target_t *target);
+int embeddedice_setup(struct target *target);
 
 int embeddedice_read_reg(struct reg *reg);
 int embeddedice_read_reg_w_check(struct reg *reg,
diff --git a/src/target/etb.c b/src/target/etb.c
index c1c7f4b..b698151 100644
--- a/src/target/etb.c
+++ b/src/target/etb.c
@@ -351,7 +351,7 @@ static int etb_write_reg(struct reg *reg, uint32_t value)
 
 COMMAND_HANDLER(handle_etb_config_command)
 {
-	target_t *target;
+	struct target *target;
 	struct jtag_tap *tap;
 	struct arm *arm;
 
diff --git a/src/target/etm.c b/src/target/etm.c
index 0aa1a73..cc92098 100644
--- a/src/target/etm.c
+++ b/src/target/etm.c
@@ -279,7 +279,7 @@ static void etm_reg_add(unsigned bcd_vers, struct arm_jtag *jtag_info,
 	}
 }
 
-struct reg_cache *etm_build_reg_cache(target_t *target,
+struct reg_cache *etm_build_reg_cache(struct target *target,
 		struct arm_jtag *jtag_info, struct etm_context *etm_ctx)
 {
 	struct reg_cache *reg_cache = malloc(sizeof(struct reg_cache));
@@ -421,7 +421,7 @@ static int etm_store_reg(struct reg *reg)
 	return etm_write_reg(reg, buf_get_u32(reg-&gt;value, 0, reg-&gt;size));
 }
 
-int etm_setup(target_t *target)
+int etm_setup(struct target *target)
 {
 	int retval;
 	uint32_t etm_ctrl_value;
@@ -1249,7 +1249,7 @@ static COMMAND_HELPER(handle_etm_tracemode_command_update,
 
 COMMAND_HANDLER(handle_etm_tracemode_command)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct arm *arm = target_to_arm(target);
 	struct etm_context *etm;
 
@@ -1371,7 +1371,7 @@ COMMAND_HANDLER(handle_etm_tracemode_command)
 
 COMMAND_HANDLER(handle_etm_config_command)
 {
-	target_t *target;
+	struct target *target;
 	struct arm *arm;
 	etm_portmode_t portmode = 0x0;
 	struct etm_context *etm_ctx;
@@ -1521,7 +1521,7 @@ COMMAND_HANDLER(handle_etm_config_command)
 
 COMMAND_HANDLER(handle_etm_info_command)
 {
-	target_t *target;
+	struct target *target;
 	struct arm *arm;
 	struct etm_context *etm;
 	struct reg *etm_sys_config_reg;
@@ -1653,7 +1653,7 @@ COMMAND_HANDLER(handle_etm_info_command)
 
 COMMAND_HANDLER(handle_etm_status_command)
 {
-	target_t *target;
+	struct target *target;
 	struct arm *arm;
 	struct etm_context *etm;
 	trace_status_t trace_status;
@@ -1729,7 +1729,7 @@ COMMAND_HANDLER(handle_etm_status_command)
 
 COMMAND_HANDLER(handle_etm_image_command)
 {
-	target_t *target;
+	struct target *target;
 	struct arm *arm;
 	struct etm_context *etm_ctx;
 
@@ -1789,7 +1789,7 @@ COMMAND_HANDLER(handle_etm_image_command)
 COMMAND_HANDLER(handle_etm_dump_command)
 {
 	struct fileio file;
-	target_t *target;
+	struct target *target;
 	struct arm *arm;
 	struct etm_context *etm_ctx;
 	uint32_t i;
@@ -1857,7 +1857,7 @@ COMMAND_HANDLER(handle_etm_dump_command)
 COMMAND_HANDLER(handle_etm_load_command)
 {
 	struct fileio file;
-	target_t *target;
+	struct target *target;
 	struct arm *arm;
 	struct etm_context *etm_ctx;
 	uint32_t i;
@@ -1940,7 +1940,7 @@ COMMAND_HANDLER(handle_etm_load_command)
 
 COMMAND_HANDLER(handle_etm_trigger_percent_command)
 {
-	target_t *target;
+	struct target *target;
 	struct arm *arm;
 	struct etm_context *etm_ctx;
 
@@ -1981,7 +1981,7 @@ COMMAND_HANDLER(handle_etm_trigger_percent_command)
 
 COMMAND_HANDLER(handle_etm_start_command)
 {
-	target_t *target;
+	struct target *target;
 	struct arm *arm;
 	struct etm_context *etm_ctx;
 	struct reg *etm_ctrl_reg;
@@ -2029,7 +2029,7 @@ COMMAND_HANDLER(handle_etm_start_command)
 
 COMMAND_HANDLER(handle_etm_stop_command)
 {
-	target_t *target;
+	struct target *target;
 	struct arm *arm;
 	struct etm_context *etm_ctx;
 	struct reg *etm_ctrl_reg;
@@ -2068,7 +2068,7 @@ COMMAND_HANDLER(handle_etm_stop_command)
 
 COMMAND_HANDLER(handle_etm_analyze_command)
 {
-	target_t *target;
+	struct target *target;
 	struct arm *arm;
 	struct etm_context *etm_ctx;
 	int retval;
diff --git a/src/target/etm.h b/src/target/etm.h
index 531206c..1ca9b93 100644
--- a/src/target/etm.h
+++ b/src/target/etm.h
@@ -154,7 +154,7 @@ struct etmv1_trace_data
  */
 struct etm_context
 {
-	target_t *target;		/* target this ETM is connected to */
+	struct target *target;		/* target this ETM is connected to */
 	struct reg_cache *reg_cache;		/* ETM register cache */
 	struct etm_capture_driver *capture_driver;	/* driver used to access ETM data */
 	void *capture_driver_priv;	/* capture driver private data */
@@ -207,10 +207,10 @@ typedef enum
 	BR_RSVD7   = 0x7, /* reserved */
 } etmv1_branch_reason_t;
 
-struct reg_cache* etm_build_reg_cache(target_t *target,
+struct reg_cache* etm_build_reg_cache(struct target *target,
 		struct arm_jtag *jtag_info, struct etm_context *etm_ctx);
 
-int etm_setup(target_t *target);
+int etm_setup(struct target *target);
 
 int etm_register_commands(struct command_context_s *cmd_ctx);
 
diff --git a/src/target/etm_dummy.c b/src/target/etm_dummy.c
index eb8377b..598c799 100644
--- a/src/target/etm_dummy.c
+++ b/src/target/etm_dummy.c
@@ -27,7 +27,7 @@
 
 COMMAND_HANDLER(handle_etm_dummy_config_command)
 {
-	target_t *target;
+	struct target *target;
 	struct arm *arm;
 
 	target = get_target(args[0]);
diff --git a/src/target/fa526.c b/src/target/fa526.c
index d9b89f2..f3df24f 100644
--- a/src/target/fa526.c
+++ b/src/target/fa526.c
@@ -34,12 +34,12 @@
 #include &quot;arm920t.h&quot;
 #include &quot;target_type.h&quot;
 
-static void fa526_change_to_arm(target_t *target, uint32_t *r0, uint32_t *pc)
+static void fa526_change_to_arm(struct target *target, uint32_t *r0, uint32_t *pc)
 {
 	LOG_ERROR(&quot;%s: there is no Thumb state on FA526&quot;, __func__);
 }
 
-static void fa526_read_core_regs(target_t *target,
+static void fa526_read_core_regs(struct target *target,
 		uint32_t mask, uint32_t* core_regs[16])
 {
 	int i;
@@ -66,7 +66,7 @@ static void fa526_read_core_regs(target_t *target,
 	}
 }
 
-static void fa526_read_core_regs_target_buffer(target_t *target,
+static void fa526_read_core_regs_target_buffer(struct target *target,
 		uint32_t mask, void* buffer, int size)
 {
 	int i;
@@ -108,7 +108,7 @@ static void fa526_read_core_regs_target_buffer(target_t *target,
 	}
 }
 
-static void fa526_read_xpsr(target_t *target, uint32_t *xpsr, int spsr)
+static void fa526_read_xpsr(struct target *target, uint32_t *xpsr, int spsr)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
@@ -133,7 +133,7 @@ static void fa526_read_xpsr(target_t *target, uint32_t *xpsr, int spsr)
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_NOP, 0, xpsr, 0);
 }
 
-static void fa526_write_xpsr(target_t *target, uint32_t xpsr, int spsr)
+static void fa526_write_xpsr(struct target *target, uint32_t xpsr, int spsr)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
@@ -169,7 +169,7 @@ static void fa526_write_xpsr(target_t *target, uint32_t xpsr, int spsr)
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_NOP, 0, NULL, 0);
 }
 
-static void fa526_write_xpsr_im8(target_t *target,
+static void fa526_write_xpsr_im8(struct target *target,
 		uint8_t xpsr_im, int rot, int spsr)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
@@ -196,7 +196,7 @@ static void fa526_write_xpsr_im8(target_t *target,
 	}
 }
 
-static void fa526_write_core_regs(target_t *target,
+static void fa526_write_core_regs(struct target *target,
 		uint32_t mask, uint32_t core_regs[16])
 {
 	int i;
@@ -224,7 +224,7 @@ static void fa526_write_core_regs(target_t *target,
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_NOP, 0, NULL, 0);
 }
 
-static void fa526_write_pc(target_t *target, uint32_t pc)
+static void fa526_write_pc(struct target *target, uint32_t pc)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
@@ -250,12 +250,12 @@ static void fa526_write_pc(target_t *target, uint32_t pc)
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_NOP, 0, NULL, 0);
 }
 
-static void fa526_branch_resume_thumb(target_t *target)
+static void fa526_branch_resume_thumb(struct target *target)
 {
 	LOG_ERROR(&quot;%s: there is no Thumb state on FA526&quot;, __func__);
 }
 
-static int fa526_init_arch_info_2(target_t *target,
+static int fa526_init_arch_info_2(struct target *target,
 		struct arm9tdmi_common *arm9tdmi, struct jtag_tap *tap)
 {
 	struct arm7_9_common *arm7_9;
@@ -314,7 +314,7 @@ static int fa526_init_arch_info_2(target_t *target,
 	return ERROR_OK;
 }
 
-static int fa526_init_arch_info(target_t *target,
+static int fa526_init_arch_info(struct target *target,
 		struct arm920t_common *arm920t, struct jtag_tap *tap)
 {
 	struct arm9tdmi_common *arm9tdmi = &amp;arm920t-&gt;arm9tdmi_common;
@@ -350,7 +350,7 @@ static int fa526_init_arch_info(target_t *target,
 	return ERROR_OK;
 }
 
-static int fa526_target_create(struct target_s *target, Jim_Interp *interp)
+static int fa526_target_create(struct target *target, Jim_Interp *interp)
 {
 	struct arm920t_common *arm920t = calloc(1,sizeof(struct arm920t_common));
 
diff --git a/src/target/feroceon.c b/src/target/feroceon.c
index 41769d6..d64b53f 100644
--- a/src/target/feroceon.c
+++ b/src/target/feroceon.c
@@ -56,7 +56,7 @@
 #include &quot;arm966e.h&quot;
 #include &quot;target_type.h&quot;
 
-int feroceon_assert_reset(target_t *target)
+int feroceon_assert_reset(struct target *target)
 {
 	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
@@ -108,7 +108,7 @@ int feroceon_dummy_clock_out(struct arm_jtag *jtag_info, uint32_t instr)
 	return ERROR_OK;
 }
 
-void feroceon_change_to_arm(target_t *target, uint32_t *r0, uint32_t *pc)
+void feroceon_change_to_arm(struct target *target, uint32_t *r0, uint32_t *pc)
 {
 	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
@@ -154,7 +154,7 @@ void feroceon_change_to_arm(target_t *target, uint32_t *r0, uint32_t *pc)
 	*pc -= (12 + 4);
 }
 
-void feroceon_read_core_regs(target_t *target, uint32_t mask, uint32_t* core_regs[16])
+void feroceon_read_core_regs(struct target *target, uint32_t mask, uint32_t* core_regs[16])
 {
 	int i;
 	struct arm *armv4_5 = target-&gt;arch_info;
@@ -173,7 +173,7 @@ void feroceon_read_core_regs(target_t *target, uint32_t mask, uint32_t* core_reg
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_NOP, 0, NULL, 0);
 }
 
-void feroceon_read_core_regs_target_buffer(target_t *target, uint32_t mask, void* buffer, int size)
+void feroceon_read_core_regs_target_buffer(struct target *target, uint32_t mask, void* buffer, int size)
 {
 	int i;
 	struct arm *armv4_5 = target-&gt;arch_info;
@@ -210,7 +210,7 @@ void feroceon_read_core_regs_target_buffer(target_t *target, uint32_t mask, void
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_NOP, 0, NULL, 0);
 }
 
-void feroceon_read_xpsr(target_t *target, uint32_t *xpsr, int spsr)
+void feroceon_read_xpsr(struct target *target, uint32_t *xpsr, int spsr)
 {
 	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
@@ -233,7 +233,7 @@ void feroceon_read_xpsr(target_t *target, uint32_t *xpsr, int spsr)
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_NOP, 0, NULL, 0);
 }
 
-void feroceon_write_xpsr(target_t *target, uint32_t xpsr, int spsr)
+void feroceon_write_xpsr(struct target *target, uint32_t xpsr, int spsr)
 {
 	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
@@ -274,7 +274,7 @@ void feroceon_write_xpsr(target_t *target, uint32_t xpsr, int spsr)
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_NOP, 0, NULL, 0);
 }
 
-void feroceon_write_xpsr_im8(target_t *target, uint8_t xpsr_im, int rot, int spsr)
+void feroceon_write_xpsr_im8(struct target *target, uint8_t xpsr_im, int rot, int spsr)
 {
 	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
@@ -291,7 +291,7 @@ void feroceon_write_xpsr_im8(target_t *target, uint8_t xpsr_im, int rot, int sps
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_NOP, 0, NULL, 0);
 }
 
-void feroceon_write_core_regs(target_t *target, uint32_t mask, uint32_t core_regs[16])
+void feroceon_write_core_regs(struct target *target, uint32_t mask, uint32_t core_regs[16])
 {
 	int i;
 	struct arm *armv4_5 = target-&gt;arch_info;
@@ -311,7 +311,7 @@ void feroceon_write_core_regs(target_t *target, uint32_t mask, uint32_t core_reg
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_NOP, 0, NULL, 0);
 }
 
-void feroceon_branch_resume(target_t *target)
+void feroceon_branch_resume(struct target *target)
 {
 	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
@@ -326,7 +326,7 @@ void feroceon_branch_resume(target_t *target)
 	arm7_9-&gt;need_bypass_before_restart = 1;
 }
 
-void feroceon_branch_resume_thumb(target_t *target)
+void feroceon_branch_resume_thumb(struct target *target)
 {
 	LOG_DEBUG(&quot;-&quot;);
 
@@ -361,7 +361,7 @@ void feroceon_branch_resume_thumb(target_t *target)
 	arm7_9-&gt;need_bypass_before_restart = 1;
 }
 
-int feroceon_read_cp15(target_t *target, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t *value)
+int feroceon_read_cp15(struct target *target, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t *value)
 {
 	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
@@ -383,7 +383,7 @@ int feroceon_read_cp15(target_t *target, uint32_t op1, uint32_t op2, uint32_t CR
 	return jtag_execute_queue();
 }
 
-int feroceon_write_cp15(target_t *target, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t value)
+int feroceon_write_cp15(struct target *target, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t value)
 {
 	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
@@ -402,7 +402,7 @@ int feroceon_write_cp15(target_t *target, uint32_t op1, uint32_t op2, uint32_t C
 	return arm7_9_execute_sys_speed(target);
 }
 
-void feroceon_set_dbgrq(target_t *target)
+void feroceon_set_dbgrq(struct target *target)
 {
 	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
@@ -412,7 +412,7 @@ void feroceon_set_dbgrq(target_t *target)
 	embeddedice_store_reg(dbg_ctrl);
 }
 
-void feroceon_enable_single_step(target_t *target, uint32_t next_pc)
+void feroceon_enable_single_step(struct target *target, uint32_t next_pc)
 {
 	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
@@ -425,7 +425,7 @@ void feroceon_enable_single_step(target_t *target, uint32_t next_pc)
 	embeddedice_write_reg(&amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_W0_CONTROL_MASK], 0xf7);
 }
 
-void feroceon_disable_single_step(target_t *target)
+void feroceon_disable_single_step(struct target *target)
 {
 	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
@@ -437,7 +437,7 @@ void feroceon_disable_single_step(target_t *target)
 	embeddedice_store_reg(&amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_W0_CONTROL_VALUE]);
 }
 
-int feroceon_examine_debug_reason(target_t *target)
+int feroceon_examine_debug_reason(struct target *target)
 {
 	/* the MOE is not implemented */
 	if (target-&gt;debug_reason != DBG_REASON_SINGLESTEP)
@@ -448,7 +448,7 @@ int feroceon_examine_debug_reason(target_t *target)
 	return ERROR_OK;
 }
 
-int feroceon_bulk_write_memory(target_t *target, uint32_t address, uint32_t count, uint8_t *buffer)
+int feroceon_bulk_write_memory(struct target *target, uint32_t address, uint32_t count, uint8_t *buffer)
 {
 	int retval;
 	struct arm *armv4_5 = target-&gt;arch_info;
@@ -577,13 +577,13 @@ int feroceon_bulk_write_memory(target_t *target, uint32_t address, uint32_t coun
 	return retval;
 }
 
-int feroceon_init_target(struct command_context_s *cmd_ctx, struct target_s *target)
+int feroceon_init_target(struct command_context_s *cmd_ctx, struct target *target)
 {
 	arm9tdmi_init_target(cmd_ctx, target);
 	return ERROR_OK;
 }
 
-void feroceon_common_setup(struct target_s *target)
+void feroceon_common_setup(struct target *target)
 {
 	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
@@ -616,7 +616,7 @@ void feroceon_common_setup(struct target_s *target)
 	arm7_9-&gt;wp1_used_default = -1;
 }
 
-int feroceon_target_create(struct target_s *target, Jim_Interp *interp)
+int feroceon_target_create(struct target *target, Jim_Interp *interp)
 {
 	struct arm926ejs_common *arm926ejs = calloc(1,sizeof(struct arm926ejs_common));
 
@@ -630,7 +630,7 @@ int feroceon_target_create(struct target_s *target, Jim_Interp *interp)
 	return ERROR_OK;
 }
 
-int dragonite_target_create(struct target_s *target, Jim_Interp *interp)
+int dragonite_target_create(struct target *target, Jim_Interp *interp)
 {
 	struct arm966e_common *arm966e = calloc(1,sizeof(struct arm966e_common));
 
@@ -640,7 +640,7 @@ int dragonite_target_create(struct target_s *target, Jim_Interp *interp)
 	return ERROR_OK;
 }
 
-int feroceon_examine(struct target_s *target)
+int feroceon_examine(struct target *target)
 {
 	struct arm *armv4_5;
 	struct arm7_9_common *arm7_9;
diff --git a/src/target/image.c b/src/target/image.c
index 55237f8..bba4675 100644
--- a/src/target/image.c
+++ b/src/target/image.c
@@ -732,7 +732,7 @@ int image_open(struct image *image, const char *url, const char *type_string)
 	}
 	else if (image-&gt;type == IMAGE_MEMORY)
 	{
-		target_t *target = get_target(url);
+		struct target *target = get_target(url);
 
 		if (target == NULL)
 		{
diff --git a/src/target/image.h b/src/target/image.h
index 55f0ea2..06d47bf 100644
--- a/src/target/image.h
+++ b/src/target/image.h
@@ -80,7 +80,7 @@ struct image_ihex
 
 struct image_memory
 {
-	struct target_s *target;
+	struct target *target;
 	uint8_t *cache;
 	uint32_t cache_address;
 };
diff --git a/src/target/mips32.c b/src/target/mips32.c
index c9ef138..c6ea66f 100644
--- a/src/target/mips32.c
+++ b/src/target/mips32.c
@@ -99,7 +99,7 @@ int mips32_get_core_reg(struct reg *reg)
 {
 	int retval;
 	struct mips32_core_reg *mips32_reg = reg-&gt;arch_info;
-	target_t *target = mips32_reg-&gt;target;
+	struct target *target = mips32_reg-&gt;target;
 	struct mips32_common *mips32_target = target-&gt;arch_info;
 
 	if (target-&gt;state != TARGET_HALTED)
@@ -115,7 +115,7 @@ int mips32_get_core_reg(struct reg *reg)
 int mips32_set_core_reg(struct reg *reg, uint8_t *buf)
 {
 	struct mips32_core_reg *mips32_reg = reg-&gt;arch_info;
-	target_t *target = mips32_reg-&gt;target;
+	struct target *target = mips32_reg-&gt;target;
 	uint32_t value = buf_get_u32(buf, 0, 32);
 
 	if (target-&gt;state != TARGET_HALTED)
@@ -130,7 +130,7 @@ int mips32_set_core_reg(struct reg *reg, uint8_t *buf)
 	return ERROR_OK;
 }
 
-int mips32_read_core_reg(struct target_s *target, int num)
+int mips32_read_core_reg(struct target *target, int num)
 {
 	uint32_t reg_value;
 	struct mips32_core_reg *mips_core_reg;
@@ -150,7 +150,7 @@ int mips32_read_core_reg(struct target_s *target, int num)
 	return ERROR_OK;
 }
 
-int mips32_write_core_reg(struct target_s *target, int num)
+int mips32_write_core_reg(struct target *target, int num)
 {
 	uint32_t reg_value;
 	struct mips32_core_reg *mips_core_reg;
@@ -171,7 +171,7 @@ int mips32_write_core_reg(struct target_s *target, int num)
 	return ERROR_OK;
 }
 
-int mips32_invalidate_core_regs(target_t *target)
+int mips32_invalidate_core_regs(struct target *target)
 {
 	/* get pointers to arch-specific information */
 	struct mips32_common *mips32 = target-&gt;arch_info;
@@ -186,7 +186,7 @@ int mips32_invalidate_core_regs(target_t *target)
 	return ERROR_OK;
 }
 
-int mips32_get_gdb_reg_list(target_t *target, struct reg **reg_list[], int *reg_list_size)
+int mips32_get_gdb_reg_list(struct target *target, struct reg **reg_list[], int *reg_list_size)
 {
 	/* get pointers to arch-specific information */
 	struct mips32_common *mips32 = target-&gt;arch_info;
@@ -210,7 +210,7 @@ int mips32_get_gdb_reg_list(target_t *target, struct reg **reg_list[], int *reg_
 	return ERROR_OK;
 }
 
-int mips32_save_context(target_t *target)
+int mips32_save_context(struct target *target)
 {
 	int i;
 
@@ -232,7 +232,7 @@ int mips32_save_context(target_t *target)
 	return ERROR_OK;
 }
 
-int mips32_restore_context(target_t *target)
+int mips32_restore_context(struct target *target)
 {
 	int i;
 
@@ -254,7 +254,7 @@ int mips32_restore_context(target_t *target)
 	return ERROR_OK;
 }
 
-int mips32_arch_state(struct target_s *target)
+int mips32_arch_state(struct target *target)
 {
 	struct mips32_common *mips32 = target-&gt;arch_info;
 
@@ -271,7 +271,7 @@ int mips32_arch_state(struct target_s *target)
 	return ERROR_OK;
 }
 
-struct reg_cache *mips32_build_reg_cache(target_t *target)
+struct reg_cache *mips32_build_reg_cache(struct target *target)
 {
 	/* get pointers to arch-specific information */
 	struct mips32_common *mips32 = target-&gt;arch_info;
@@ -315,7 +315,7 @@ struct reg_cache *mips32_build_reg_cache(target_t *target)
 	return cache;
 }
 
-int mips32_init_arch_info(target_t *target, struct mips32_common *mips32, struct jtag_tap *tap)
+int mips32_init_arch_info(struct target *target, struct mips32_common *mips32, struct jtag_tap *tap)
 {
 	target-&gt;arch_info = mips32;
 	mips32-&gt;common_magic = MIPS32_COMMON_MAGIC;
@@ -336,13 +336,13 @@ int mips32_register_commands(struct command_context_s *cmd_ctx)
 	return ERROR_OK;
 }
 
-int mips32_run_algorithm(struct target_s *target, int num_mem_params, struct mem_param *mem_params, int num_reg_params, struct reg_param *reg_params, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info)
+int mips32_run_algorithm(struct target *target, int num_mem_params, struct mem_param *mem_params, int num_reg_params, struct reg_param *reg_params, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info)
 {
 	/*TODO*/
 	return ERROR_OK;
 }
 
-int mips32_examine(struct target_s *target)
+int mips32_examine(struct target *target)
 {
 	struct mips32_common *mips32 = target-&gt;arch_info;
 
@@ -361,7 +361,7 @@ int mips32_examine(struct target_s *target)
 	return ERROR_OK;
 }
 
-int mips32_configure_break_unit(struct target_s *target)
+int mips32_configure_break_unit(struct target *target)
 {
 	/* get pointers to arch-specific information */
 	struct mips32_common *mips32 = target-&gt;arch_info;
@@ -421,7 +421,7 @@ int mips32_configure_break_unit(struct target_s *target)
 	return ERROR_OK;
 }
 
-int mips32_enable_interrupts(struct target_s *target, int enable)
+int mips32_enable_interrupts(struct target *target, int enable)
 {
 	int retval;
 	int update = 0;
diff --git a/src/target/mips32.h b/src/target/mips32.h
index 3b4f642..b3e0bc4 100644
--- a/src/target/mips32.h
+++ b/src/target/mips32.h
@@ -62,14 +62,14 @@ struct mips32_common
 	struct mips32_comparator *data_break_list;
 
 	/* register cache to processor synchronization */
-	int (*read_core_reg)(struct target_s *target, int num);
-	int (*write_core_reg)(struct target_s *target, int num);
+	int (*read_core_reg)(struct target *target, int num);
+	int (*write_core_reg)(struct target *target, int num);
 };
 
 struct mips32_core_reg
 {
 	uint32_t num;
-	struct target_s *target;
+	struct target *target;
 	struct mips32_common *mips32_common;
 };
 
@@ -124,32 +124,32 @@ struct mips32_core_reg
 #define MIPS32_SDBBP				0x7000003F
 #define MIPS16_SDBBP 				0xE801
 
-int mips32_arch_state(struct target_s *target);
+int mips32_arch_state(struct target *target);
 
-int mips32_init_arch_info(target_t *target,
+int mips32_init_arch_info(struct target *target,
 		struct mips32_common *mips32, struct jtag_tap *tap);
 
-int mips32_restore_context(target_t *target);
-int mips32_save_context(target_t *target);
+int mips32_restore_context(struct target *target);
+int mips32_save_context(struct target *target);
 
-struct reg_cache *mips32_build_reg_cache(target_t *target);
+struct reg_cache *mips32_build_reg_cache(struct target *target);
 
-int mips32_run_algorithm(struct target_s *target,
+int mips32_run_algorithm(struct target *target,
 		int num_mem_params, struct mem_param *mem_params,
 		int num_reg_params, struct reg_param *reg_params,
 		uint32_t entry_point, uint32_t exit_point,
 		int timeout_ms, void *arch_info);
 
-int mips32_configure_break_unit(struct target_s *target);
+int mips32_configure_break_unit(struct target *target);
 
-int mips32_enable_interrupts(struct target_s *target, int enable);
+int mips32_enable_interrupts(struct target *target, int enable);
 
-int mips32_examine(struct target_s *target);
+int mips32_examine(struct target *target);
 
 int mips32_register_commands(struct command_context_s *cmd_ctx);
 
-int mips32_invalidate_core_regs(target_t *target);
-int mips32_get_gdb_reg_list(target_t *target,
+int mips32_invalidate_core_regs(struct target *target);
+int mips32_get_gdb_reg_list(struct target *target,
 		struct reg **reg_list[], int *reg_list_size);
 
 #endif	/*MIPS32_H*/
diff --git a/src/target/mips_m4k.c b/src/target/mips_m4k.c
index 9213ae0..94a7328 100644
--- a/src/target/mips_m4k.c
+++ b/src/target/mips_m4k.c
@@ -32,21 +32,21 @@
 /* cli handling */
 
 /* forward declarations */
-int mips_m4k_poll(target_t *target);
-int mips_m4k_halt(struct target_s *target);
-int mips_m4k_soft_reset_halt(struct target_s *target);
-int mips_m4k_resume(struct target_s *target, int current, uint32_t address, int handle_breakpoints, int debug_execution);
-int mips_m4k_step(struct target_s *target, int current, uint32_t address, int handle_breakpoints);
-int mips_m4k_read_memory(struct target_s *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer);
-int mips_m4k_write_memory(struct target_s *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer);
+int mips_m4k_poll(struct target *target);
+int mips_m4k_halt(struct target *target);
+int mips_m4k_soft_reset_halt(struct target *target);
+int mips_m4k_resume(struct target *target, int current, uint32_t address, int handle_breakpoints, int debug_execution);
+int mips_m4k_step(struct target *target, int current, uint32_t address, int handle_breakpoints);
+int mips_m4k_read_memory(struct target *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer);
+int mips_m4k_write_memory(struct target *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer);
 int mips_m4k_register_commands(struct command_context_s *cmd_ctx);
-int mips_m4k_init_target(struct command_context_s *cmd_ctx, struct target_s *target);
-int mips_m4k_target_create(struct target_s *target, Jim_Interp *interp);
+int mips_m4k_init_target(struct command_context_s *cmd_ctx, struct target *target);
+int mips_m4k_target_create(struct target *target, Jim_Interp *interp);
 
-int mips_m4k_examine(struct target_s *target);
-int mips_m4k_assert_reset(target_t *target);
-int mips_m4k_deassert_reset(target_t *target);
-int mips_m4k_checksum_memory(target_t *target, uint32_t address, uint32_t size, uint32_t *checksum);
+int mips_m4k_examine(struct target *target);
+int mips_m4k_assert_reset(struct target *target);
+int mips_m4k_deassert_reset(struct target *target);
+int mips_m4k_checksum_memory(struct target *target, uint32_t address, uint32_t size, uint32_t *checksum);
 
 struct target_type mips_m4k_target =
 {
@@ -86,7 +86,7 @@ struct target_type mips_m4k_target =
 	.examine = mips_m4k_examine,
 };
 
-int mips_m4k_examine_debug_reason(target_t *target)
+int mips_m4k_examine_debug_reason(struct target *target)
 {
 	uint32_t break_status;
 	int retval;
@@ -120,7 +120,7 @@ int mips_m4k_examine_debug_reason(target_t *target)
 	return ERROR_OK;
 }
 
-int mips_m4k_debug_entry(target_t *target)
+int mips_m4k_debug_entry(struct target *target)
 {
 	struct mips32_common *mips32 = target-&gt;arch_info;
 	struct mips_ejtag *ejtag_info = &amp;mips32-&gt;ejtag_info;
@@ -151,7 +151,7 @@ int mips_m4k_debug_entry(target_t *target)
 	return ERROR_OK;
 }
 
-int mips_m4k_poll(target_t *target)
+int mips_m4k_poll(struct target *target)
 {
 	int retval;
 	struct mips32_common *mips32 = target-&gt;arch_info;
@@ -212,7 +212,7 @@ int mips_m4k_poll(target_t *target)
 	return ERROR_OK;
 }
 
-int mips_m4k_halt(struct target_s *target)
+int mips_m4k_halt(struct target *target)
 {
 	struct mips32_common *mips32 = target-&gt;arch_info;
 	struct mips_ejtag *ejtag_info = &amp;mips32-&gt;ejtag_info;
@@ -257,7 +257,7 @@ int mips_m4k_halt(struct target_s *target)
 	return ERROR_OK;
 }
 
-int mips_m4k_assert_reset(target_t *target)
+int mips_m4k_assert_reset(struct target *target)
 {
 	struct mips32_common *mips32 = target-&gt;arch_info;
 	struct mips_ejtag *ejtag_info = &amp;mips32-&gt;ejtag_info;
@@ -319,7 +319,7 @@ int mips_m4k_assert_reset(target_t *target)
 	return ERROR_OK;
 }
 
-int mips_m4k_deassert_reset(target_t *target)
+int mips_m4k_deassert_reset(struct target *target)
 {
 	LOG_DEBUG(&quot;target-&gt;state: %s&quot;,
 		target_state_name(target));
@@ -330,13 +330,13 @@ int mips_m4k_deassert_reset(target_t *target)
 	return ERROR_OK;
 }
 
-int mips_m4k_soft_reset_halt(struct target_s *target)
+int mips_m4k_soft_reset_halt(struct target *target)
 {
 	/* TODO */
 	return ERROR_OK;
 }
 
-int mips_m4k_single_step_core(target_t *target)
+int mips_m4k_single_step_core(struct target *target)
 {
 	struct mips32_common *mips32 = target-&gt;arch_info;
 	struct mips_ejtag *ejtag_info = &amp;mips32-&gt;ejtag_info;
@@ -355,7 +355,7 @@ int mips_m4k_single_step_core(target_t *target)
 	return ERROR_OK;
 }
 
-int mips_m4k_resume(struct target_s *target, int current, uint32_t address, int handle_breakpoints, int debug_execution)
+int mips_m4k_resume(struct target *target, int current, uint32_t address, int handle_breakpoints, int debug_execution)
 {
 	struct mips32_common *mips32 = target-&gt;arch_info;
 	struct mips_ejtag *ejtag_info = &amp;mips32-&gt;ejtag_info;
@@ -426,7 +426,7 @@ int mips_m4k_resume(struct target_s *target, int current, uint32_t address, int
 	return ERROR_OK;
 }
 
-int mips_m4k_step(struct target_s *target, int current, uint32_t address, int handle_breakpoints)
+int mips_m4k_step(struct target *target, int current, uint32_t address, int handle_breakpoints)
 {
 	/* get pointers to arch-specific information */
 	struct mips32_common *mips32 = target-&gt;arch_info;
@@ -478,7 +478,7 @@ int mips_m4k_step(struct target_s *target, int current, uint32_t address, int ha
 	return ERROR_OK;
 }
 
-void mips_m4k_enable_breakpoints(struct target_s *target)
+void mips_m4k_enable_breakpoints(struct target *target)
 {
 	struct breakpoint *breakpoint = target-&gt;breakpoints;
 
@@ -491,7 +491,7 @@ void mips_m4k_enable_breakpoints(struct target_s *target)
 	}
 }
 
-int mips_m4k_set_breakpoint(struct target_s *target, struct breakpoint *breakpoint)
+int mips_m4k_set_breakpoint(struct target *target, struct breakpoint *breakpoint)
 {
 	struct mips32_common *mips32 = target-&gt;arch_info;
 	struct mips32_comparator * comparator_list = mips32-&gt;inst_break_list;
@@ -582,7 +582,7 @@ int mips_m4k_set_breakpoint(struct target_s *target, struct breakpoint *breakpoi
 	return ERROR_OK;
 }
 
-int mips_m4k_unset_breakpoint(struct target_s *target, struct breakpoint *breakpoint)
+int mips_m4k_unset_breakpoint(struct target *target, struct breakpoint *breakpoint)
 {
 	/* get pointers to arch-specific information */
 	struct mips32_common *mips32 = target-&gt;arch_info;
@@ -657,7 +657,7 @@ int mips_m4k_unset_breakpoint(struct target_s *target, struct breakpoint *breakp
 	return ERROR_OK;
 }
 
-int mips_m4k_add_breakpoint(struct target_s *target, struct breakpoint *breakpoint)
+int mips_m4k_add_breakpoint(struct target *target, struct breakpoint *breakpoint)
 {
 	struct mips32_common *mips32 = target-&gt;arch_info;
 
@@ -677,7 +677,7 @@ int mips_m4k_add_breakpoint(struct target_s *target, struct breakpoint *breakpoi
 	return ERROR_OK;
 }
 
-int mips_m4k_remove_breakpoint(struct target_s *target, struct breakpoint *breakpoint)
+int mips_m4k_remove_breakpoint(struct target *target, struct breakpoint *breakpoint)
 {
 	/* get pointers to arch-specific information */
 	struct mips32_common *mips32 = target-&gt;arch_info;
@@ -699,7 +699,7 @@ int mips_m4k_remove_breakpoint(struct target_s *target, struct breakpoint *break
 	return ERROR_OK;
 }
 
-int mips_m4k_set_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
+int mips_m4k_set_watchpoint(struct target *target, struct watchpoint *watchpoint)
 {
 	struct mips32_common *mips32 = target-&gt;arch_info;
 	struct mips32_comparator * comparator_list = mips32-&gt;data_break_list;
@@ -767,7 +767,7 @@ int mips_m4k_set_watchpoint(struct target_s *target, struct watchpoint *watchpoi
 	return ERROR_OK;
 }
 
-int mips_m4k_unset_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
+int mips_m4k_unset_watchpoint(struct target *target, struct watchpoint *watchpoint)
 {
 	/* get pointers to arch-specific information */
 	struct mips32_common *mips32 = target-&gt;arch_info;
@@ -793,7 +793,7 @@ int mips_m4k_unset_watchpoint(struct target_s *target, struct watchpoint *watchp
 	return ERROR_OK;
 }
 
-int mips_m4k_add_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
+int mips_m4k_add_watchpoint(struct target *target, struct watchpoint *watchpoint)
 {
 	struct mips32_common *mips32 = target-&gt;arch_info;
 
@@ -809,7 +809,7 @@ int mips_m4k_add_watchpoint(struct target_s *target, struct watchpoint *watchpoi
 	return ERROR_OK;
 }
 
-int mips_m4k_remove_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
+int mips_m4k_remove_watchpoint(struct target *target, struct watchpoint *watchpoint)
 {
 	/* get pointers to arch-specific information */
 	struct mips32_common *mips32 = target-&gt;arch_info;
@@ -830,7 +830,7 @@ int mips_m4k_remove_watchpoint(struct target_s *target, struct watchpoint *watch
 	return ERROR_OK;
 }
 
-void mips_m4k_enable_watchpoints(struct target_s *target)
+void mips_m4k_enable_watchpoints(struct target *target)
 {
 	struct watchpoint *watchpoint = target-&gt;watchpoints;
 
@@ -843,7 +843,7 @@ void mips_m4k_enable_watchpoints(struct target_s *target)
 	}
 }
 
-int mips_m4k_read_memory(struct target_s *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
+int mips_m4k_read_memory(struct target *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	struct mips32_common *mips32 = target-&gt;arch_info;
 	struct mips_ejtag *ejtag_info = &amp;mips32-&gt;ejtag_info;
@@ -875,7 +875,7 @@ int mips_m4k_read_memory(struct target_s *target, uint32_t address, uint32_t siz
 	return ERROR_OK;
 }
 
-int mips_m4k_write_memory(struct target_s *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
+int mips_m4k_write_memory(struct target *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	struct mips32_common *mips32 = target-&gt;arch_info;
 	struct mips_ejtag *ejtag_info = &amp;mips32-&gt;ejtag_info;
@@ -910,14 +910,14 @@ int mips_m4k_register_commands(struct command_context_s *cmd_ctx)
 	return retval;
 }
 
-int mips_m4k_init_target(struct command_context_s *cmd_ctx, struct target_s *target)
+int mips_m4k_init_target(struct command_context_s *cmd_ctx, struct target *target)
 {
 	mips32_build_reg_cache(target);
 
 	return ERROR_OK;
 }
 
-int mips_m4k_init_arch_info(target_t *target, struct mips_m4k_common *mips_m4k, struct jtag_tap *tap)
+int mips_m4k_init_arch_info(struct target *target, struct mips_m4k_common *mips_m4k, struct jtag_tap *tap)
 {
 	struct mips32_common *mips32 = &amp;mips_m4k-&gt;mips32_common;
 
@@ -930,7 +930,7 @@ int mips_m4k_init_arch_info(target_t *target, struct mips_m4k_common *mips_m4k,
 	return ERROR_OK;
 }
 
-int mips_m4k_target_create(struct target_s *target, Jim_Interp *interp)
+int mips_m4k_target_create(struct target *target, Jim_Interp *interp)
 {
 	struct mips_m4k_common *mips_m4k = calloc(1,sizeof(struct mips_m4k_common));
 
@@ -939,7 +939,7 @@ int mips_m4k_target_create(struct target_s *target, Jim_Interp *interp)
 	return ERROR_OK;
 }
 
-int mips_m4k_examine(struct target_s *target)
+int mips_m4k_examine(struct target *target)
 {
 	int retval;
 	struct mips32_common *mips32 = target-&gt;arch_info;
@@ -970,12 +970,12 @@ int mips_m4k_examine(struct target_s *target)
 	return ERROR_OK;
 }
 
-int mips_m4k_bulk_write_memory(target_t *target, uint32_t address, uint32_t count, uint8_t *buffer)
+int mips_m4k_bulk_write_memory(struct target *target, uint32_t address, uint32_t count, uint8_t *buffer)
 {
 	return mips_m4k_write_memory(target, address, 4, count, buffer);
 }
 
-int mips_m4k_checksum_memory(target_t *target, uint32_t address, uint32_t size, uint32_t *checksum)
+int mips_m4k_checksum_memory(struct target *target, uint32_t address, uint32_t size, uint32_t *checksum)
 {
 	return ERROR_FAIL; /* use bulk read method */
 }
diff --git a/src/target/mips_m4k.h b/src/target/mips_m4k.h
index b13dee2..a7c5bb3 100644
--- a/src/target/mips_m4k.h
+++ b/src/target/mips_m4k.h
@@ -25,7 +25,7 @@
 
 #include &quot;types.h&quot;
 
-struct target_s;
+struct target;
 
 #define MIPSM4K_COMMON_MAGIC	0xB321B321
 
@@ -35,19 +35,19 @@ struct mips_m4k_common
 	struct mips32_common mips32_common;
 };
 
-int mips_m4k_bulk_write_memory(struct target_s *target,
+int mips_m4k_bulk_write_memory(struct target *target,
 		uint32_t address, uint32_t count, uint8_t *buffer);
 
-void mips_m4k_enable_breakpoints(struct target_s *target);
-int mips_m4k_set_breakpoint(struct target_s *target, struct breakpoint *bp);
-int mips_m4k_unset_breakpoint(struct target_s *target, struct breakpoint *bp);
-int mips_m4k_add_breakpoint(struct target_s *target, struct breakpoint *bp);
-int mips_m4k_remove_breakpoint(struct target_s *target, struct breakpoint *bp);
-
-void mips_m4k_enable_watchpoints(struct target_s *target);
-int mips_m4k_set_watchpoint(struct target_s *target, struct watchpoint *wp);
-int mips_m4k_unset_watchpoint(struct target_s *target, struct watchpoint *wp);
-int mips_m4k_add_watchpoint(struct target_s *target, struct watchpoint *wp);
-int mips_m4k_remove_watchpoint(struct target_s *target, struct watchpoint *wp);
+void mips_m4k_enable_breakpoints(struct target *target);
+int mips_m4k_set_breakpoint(struct target *target, struct breakpoint *bp);
+int mips_m4k_unset_breakpoint(struct target *target, struct breakpoint *bp);
+int mips_m4k_add_breakpoint(struct target *target, struct breakpoint *bp);
+int mips_m4k_remove_breakpoint(struct target *target, struct breakpoint *bp);
+
+void mips_m4k_enable_watchpoints(struct target *target);
+int mips_m4k_set_watchpoint(struct target *target, struct watchpoint *wp);
+int mips_m4k_unset_watchpoint(struct target *target, struct watchpoint *wp);
+int mips_m4k_add_watchpoint(struct target *target, struct watchpoint *wp);
+int mips_m4k_remove_watchpoint(struct target *target, struct watchpoint *wp);
 
 #endif	/*MIPS_M4K_H*/
diff --git a/src/target/oocd_trace.c b/src/target/oocd_trace.c
index 6011b68..390c75d 100644
--- a/src/target/oocd_trace.c
+++ b/src/target/oocd_trace.c
@@ -291,7 +291,7 @@ struct etm_capture_driver oocd_trace_capture_driver =
 
 COMMAND_HANDLER(handle_oocd_trace_config_command)
 {
-	target_t *target;
+	struct target *target;
 	struct arm *arm;
 
 	if (argc != 2)
@@ -328,7 +328,7 @@ COMMAND_HANDLER(handle_oocd_trace_config_command)
 
 COMMAND_HANDLER(handle_oocd_trace_status_command)
 {
-	target_t *target;
+	struct target *target;
 	struct arm *arm;
 	struct oocd_trace *oocd_trace;
 	uint32_t status;
@@ -368,7 +368,7 @@ COMMAND_HANDLER(handle_oocd_trace_status_command)
 
 COMMAND_HANDLER(handle_oocd_trace_resync_command)
 {
-	target_t *target;
+	struct target *target;
 	struct arm *arm;
 	struct oocd_trace *oocd_trace;
 	size_t bytes_written;
diff --git a/src/target/register.h b/src/target/register.h
index ca8866b..a907dc2 100644
--- a/src/target/register.h
+++ b/src/target/register.h
@@ -25,7 +25,7 @@
 
 #include &quot;types.h&quot;
 
-struct target_s;
+struct target;
 
 struct bitfield_desc
 {
diff --git a/src/target/target.c b/src/target/target.c
index 0cba285..ca440a7 100644
--- a/src/target/target.c
+++ b/src/target/target.c
@@ -45,8 +45,8 @@
 
 static int jim_mcrmrc(Jim_Interp *interp, int argc, Jim_Obj *const *argv);
 
-static int target_array2mem(Jim_Interp *interp, target_t *target, int argc, Jim_Obj *const *argv);
-static int target_mem2array(Jim_Interp *interp, target_t *target, int argc, Jim_Obj *const *argv);
+static int target_array2mem(Jim_Interp *interp, struct target *target, int argc, Jim_Obj *const *argv);
+static int target_mem2array(Jim_Interp *interp, struct target *target, int argc, Jim_Obj *const *argv);
 
 /* targets */
 extern struct target_type arm7tdmi_target;
@@ -85,7 +85,7 @@ struct target_type *target_types[] =
 	NULL,
 };
 
-target_t *all_targets = NULL;
+struct target *all_targets = NULL;
 struct target_event_callback *target_event_callbacks = NULL;
 struct target_timer_callback *target_timer_callbacks = NULL;
 
@@ -213,7 +213,7 @@ const Jim_Nvp nvp_reset_modes[] = {
 };
 
 const char *
-target_state_name( target_t *t )
+target_state_name( struct target *t )
 {
 	const char *cp;
 	cp = Jim_Nvp_value2name_simple(nvp_target_state, t-&gt;state)-&gt;name;
@@ -227,7 +227,7 @@ target_state_name( target_t *t )
 /* determine the number of the new target */
 static int new_target_number(void)
 {
-	target_t *t;
+	struct target *t;
 	int x;
 
 	/* number is 0 based */
@@ -243,7 +243,7 @@ static int new_target_number(void)
 }
 
 /* read a uint32_t from a buffer in target memory endianness */
-uint32_t target_buffer_get_u32(target_t *target, const uint8_t *buffer)
+uint32_t target_buffer_get_u32(struct target *target, const uint8_t *buffer)
 {
 	if (target-&gt;endianness == TARGET_LITTLE_ENDIAN)
 		return le_to_h_u32(buffer);
@@ -252,7 +252,7 @@ uint32_t target_buffer_get_u32(target_t *target, const uint8_t *buffer)
 }
 
 /* read a uint16_t from a buffer in target memory endianness */
-uint16_t target_buffer_get_u16(target_t *target, const uint8_t *buffer)
+uint16_t target_buffer_get_u16(struct target *target, const uint8_t *buffer)
 {
 	if (target-&gt;endianness == TARGET_LITTLE_ENDIAN)
 		return le_to_h_u16(buffer);
@@ -261,13 +261,13 @@ uint16_t target_buffer_get_u16(target_t *target, const uint8_t *buffer)
 }
 
 /* read a uint8_t from a buffer in target memory endianness */
-uint8_t target_buffer_get_u8(target_t *target, const uint8_t *buffer)
+uint8_t target_buffer_get_u8(struct target *target, const uint8_t *buffer)
 {
 	return *buffer &amp; 0x0ff;
 }
 
 /* write a uint32_t to a buffer in target memory endianness */
-void target_buffer_set_u32(target_t *target, uint8_t *buffer, uint32_t value)
+void target_buffer_set_u32(struct target *target, uint8_t *buffer, uint32_t value)
 {
 	if (target-&gt;endianness == TARGET_LITTLE_ENDIAN)
 		h_u32_to_le(buffer, value);
@@ -276,7 +276,7 @@ void target_buffer_set_u32(target_t *target, uint8_t *buffer, uint32_t value)
 }
 
 /* write a uint16_t to a buffer in target memory endianness */
-void target_buffer_set_u16(target_t *target, uint8_t *buffer, uint16_t value)
+void target_buffer_set_u16(struct target *target, uint8_t *buffer, uint16_t value)
 {
 	if (target-&gt;endianness == TARGET_LITTLE_ENDIAN)
 		h_u16_to_le(buffer, value);
@@ -285,15 +285,15 @@ void target_buffer_set_u16(target_t *target, uint8_t *buffer, uint16_t value)
 }
 
 /* write a uint8_t to a buffer in target memory endianness */
-void target_buffer_set_u8(target_t *target, uint8_t *buffer, uint8_t value)
+void target_buffer_set_u8(struct target *target, uint8_t *buffer, uint8_t value)
 {
 	*buffer = value;
 }
 
 /* return a pointer to a configured target; id is name or number */
-target_t *get_target(const char *id)
+struct target *get_target(const char *id)
 {
-	target_t *target;
+	struct target *target;
 
 	/* try as tcltarget name */
 	for (target = all_targets; target; target = target-&gt;next) {
@@ -322,9 +322,9 @@ target_t *get_target(const char *id)
 }
 
 /* returns a pointer to the n-th configured target */
-static target_t *get_target_by_num(int num)
+static struct target *get_target_by_num(int num)
 {
-	target_t *target = all_targets;
+	struct target *target = all_targets;
 
 	while (target) {
 		if (target-&gt;target_number == num) {
@@ -336,9 +336,9 @@ static target_t *get_target_by_num(int num)
 	return NULL;
 }
 
-target_t* get_current_target(command_context_t *cmd_ctx)
+struct target* get_current_target(command_context_t *cmd_ctx)
 {
-	target_t *target = get_target_by_num(cmd_ctx-&gt;current_target);
+	struct target *target = get_target_by_num(cmd_ctx-&gt;current_target);
 
 	if (target == NULL)
 	{
@@ -349,7 +349,7 @@ target_t* get_current_target(command_context_t *cmd_ctx)
 	return target;
 }
 
-int target_poll(struct target_s *target)
+int target_poll(struct target *target)
 {
 	int retval;
 
@@ -384,7 +384,7 @@ int target_poll(struct target_s *target)
 	return ERROR_OK;
 }
 
-int target_halt(struct target_s *target)
+int target_halt(struct target *target)
 {
 	int retval;
 	/* We can't poll until after examine */
@@ -404,7 +404,7 @@ int target_halt(struct target_s *target)
 	return ERROR_OK;
 }
 
-int target_resume(struct target_s *target, int current, uint32_t address, int handle_breakpoints, int debug_execution)
+int target_resume(struct target *target, int current, uint32_t address, int handle_breakpoints, int debug_execution)
 {
 	int retval;
 
@@ -460,33 +460,33 @@ int target_process_reset(struct command_context_s *cmd_ctx, enum target_reset_mo
 	return retval;
 }
 
-static int identity_virt2phys(struct target_s *target,
+static int identity_virt2phys(struct target *target,
 		uint32_t virtual, uint32_t *physical)
 {
 	*physical = virtual;
 	return ERROR_OK;
 }
 
-static int no_mmu(struct target_s *target, int *enabled)
+static int no_mmu(struct target *target, int *enabled)
 {
 	*enabled = 0;
 	return ERROR_OK;
 }
 
-static int default_examine(struct target_s *target)
+static int default_examine(struct target *target)
 {
 	target_set_examined(target);
 	return ERROR_OK;
 }
 
-int target_examine_one(struct target_s *target)
+int target_examine_one(struct target *target)
 {
 	return target-&gt;type-&gt;examine(target);
 }
 
 static int jtag_enable_callback(enum jtag_event event, void *priv)
 {
-	target_t *target = priv;
+	struct target *target = priv;
 
 	if (event != JTAG_TAP_EVENT_ENABLE || !target-&gt;tap-&gt;enabled)
 		return ERROR_OK;
@@ -504,7 +504,7 @@ static int jtag_enable_callback(enum jtag_event event, void *priv)
 int target_examine(void)
 {
 	int retval = ERROR_OK;
-	target_t *target;
+	struct target *target;
 
 	for (target = all_targets; target; target = target-&gt;next)
 	{
@@ -519,12 +519,12 @@ int target_examine(void)
 	}
 	return retval;
 }
-const char *target_get_name(struct target_s *target)
+const char *target_get_name(struct target *target)
 {
 	return target-&gt;type-&gt;name;
 }
 
-static int target_write_memory_imp(struct target_s *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
+static int target_write_memory_imp(struct target *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	if (!target_was_examined(target))
 	{
@@ -534,7 +534,7 @@ static int target_write_memory_imp(struct target_s *target, uint32_t address, ui
 	return target-&gt;type-&gt;write_memory_imp(target, address, size, count, buffer);
 }
 
-static int target_read_memory_imp(struct target_s *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
+static int target_read_memory_imp(struct target *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	if (!target_was_examined(target))
 	{
@@ -544,7 +544,7 @@ static int target_read_memory_imp(struct target_s *target, uint32_t address, uin
 	return target-&gt;type-&gt;read_memory_imp(target, address, size, count, buffer);
 }
 
-static int target_soft_reset_halt_imp(struct target_s *target)
+static int target_soft_reset_halt_imp(struct target *target)
 {
 	if (!target_was_examined(target))
 	{
@@ -559,7 +559,7 @@ static int target_soft_reset_halt_imp(struct target_s *target)
 	return target-&gt;type-&gt;soft_reset_halt_imp(target);
 }
 
-static int target_run_algorithm_imp(struct target_s *target, int num_mem_params, struct mem_param *mem_params, int num_reg_params, struct reg_param *reg_param, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info)
+static int target_run_algorithm_imp(struct target *target, int num_mem_params, struct mem_param *mem_params, int num_reg_params, struct reg_param *reg_param, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info)
 {
 	if (!target_was_examined(target))
 	{
@@ -569,71 +569,71 @@ static int target_run_algorithm_imp(struct target_s *target, int num_mem_params,
 	return target-&gt;type-&gt;run_algorithm_imp(target, num_mem_params, mem_params, num_reg_params, reg_param, entry_point, exit_point, timeout_ms, arch_info);
 }
 
-int target_read_memory(struct target_s *target,
+int target_read_memory(struct target *target,
 		uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	return target-&gt;type-&gt;read_memory(target, address, size, count, buffer);
 }
 
-int target_read_phys_memory(struct target_s *target,
+int target_read_phys_memory(struct target *target,
 		uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	return target-&gt;type-&gt;read_phys_memory(target, address, size, count, buffer);
 }
 
-int target_write_memory(struct target_s *target,
+int target_write_memory(struct target *target,
 		uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	return target-&gt;type-&gt;write_memory(target, address, size, count, buffer);
 }
 
-int target_write_phys_memory(struct target_s *target,
+int target_write_phys_memory(struct target *target,
 		uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	return target-&gt;type-&gt;write_phys_memory(target, address, size, count, buffer);
 }
 
-int target_bulk_write_memory(struct target_s *target,
+int target_bulk_write_memory(struct target *target,
 		uint32_t address, uint32_t count, uint8_t *buffer)
 {
 	return target-&gt;type-&gt;bulk_write_memory(target, address, count, buffer);
 }
 
-int target_add_breakpoint(struct target_s *target,
+int target_add_breakpoint(struct target *target,
 		struct breakpoint *breakpoint)
 {
 	return target-&gt;type-&gt;add_breakpoint(target, breakpoint);
 }
-int target_remove_breakpoint(struct target_s *target,
+int target_remove_breakpoint(struct target *target,
 		struct breakpoint *breakpoint)
 {
 	return target-&gt;type-&gt;remove_breakpoint(target, breakpoint);
 }
 
-int target_add_watchpoint(struct target_s *target,
+int target_add_watchpoint(struct target *target,
 		struct watchpoint *watchpoint)
 {
 	return target-&gt;type-&gt;add_watchpoint(target, watchpoint);
 }
-int target_remove_watchpoint(struct target_s *target,
+int target_remove_watchpoint(struct target *target,
 		struct watchpoint *watchpoint)
 {
 	return target-&gt;type-&gt;remove_watchpoint(target, watchpoint);
 }
 
-int target_get_gdb_reg_list(struct target_s *target,
+int target_get_gdb_reg_list(struct target *target,
 		struct reg **reg_list[], int *reg_list_size)
 {
 	return target-&gt;type-&gt;get_gdb_reg_list(target, reg_list, reg_list_size);
 }
-int target_step(struct target_s *target,
+int target_step(struct target *target,
 		int current, uint32_t address, int handle_breakpoints)
 {
 	return target-&gt;type-&gt;step(target, current, address, handle_breakpoints);
 }
 
 
-int target_run_algorithm(struct target_s *target,
+int target_run_algorithm(struct target *target,
 		int num_mem_params, struct mem_param *mem_params,
 		int num_reg_params, struct reg_param *reg_param,
 		uint32_t entry_point, uint32_t exit_point,
@@ -645,36 +645,36 @@ int target_run_algorithm(struct target_s *target,
 }
 
 /// @returns @c true if the target has been examined.
-bool target_was_examined(struct target_s *target)
+bool target_was_examined(struct target *target)
 {
 	return target-&gt;type-&gt;examined;
 }
 /// Sets the @c examined flag for the given target.
-void target_set_examined(struct target_s *target)
+void target_set_examined(struct target *target)
 {
 	target-&gt;type-&gt;examined = true;
 }
 // Reset the @c examined flag for the given target.
-void target_reset_examined(struct target_s *target)
+void target_reset_examined(struct target *target)
 {
 	target-&gt;type-&gt;examined = false;
 }
 
 
 
-static int default_mrc(struct target_s *target, int cpnum, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t *value)
+static int default_mrc(struct target *target, int cpnum, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t *value)
 {
 	LOG_ERROR(&quot;Not implemented: %s&quot;, __func__);
 	return ERROR_FAIL;
 }
 
-static int default_mcr(struct target_s *target, int cpnum, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t value)
+static int default_mcr(struct target *target, int cpnum, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t value)
 {
 	LOG_ERROR(&quot;Not implemented: %s&quot;, __func__);
 	return ERROR_FAIL;
 }
 
-static int arm_cp_check(struct target_s *target, int cpnum, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm)
+static int arm_cp_check(struct target *target, int cpnum, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm)
 {
 	/* basic check */
 	if (!target_was_examined(target))
@@ -716,7 +716,7 @@ static int arm_cp_check(struct target_s *target, int cpnum, uint32_t op1, uint32
 	return ERROR_OK;
 }
 
-int target_mrc(struct target_s *target, int cpnum, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t *value)
+int target_mrc(struct target *target, int cpnum, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t *value)
 {
 	int retval;
 
@@ -727,7 +727,7 @@ int target_mrc(struct target_s *target, int cpnum, uint32_t op1, uint32_t op2, u
 	return target-&gt;type-&gt;mrc(target, cpnum, op1, op2, CRn, CRm, value);
 }
 
-int target_mcr(struct target_s *target, int cpnum, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t value)
+int target_mcr(struct target *target, int cpnum, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t value)
 {
 	int retval;
 
@@ -739,7 +739,7 @@ int target_mcr(struct target_s *target, int cpnum, uint32_t op1, uint32_t op2, u
 }
 
 static int
-err_read_phys_memory(struct target_s *target, uint32_t address,
+err_read_phys_memory(struct target *target, uint32_t address,
 		uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	LOG_ERROR(&quot;Not implemented: %s&quot;, __func__);
@@ -747,7 +747,7 @@ err_read_phys_memory(struct target_s *target, uint32_t address,
 }
 
 static int
-err_write_phys_memory(struct target_s *target, uint32_t address,
+err_write_phys_memory(struct target *target, uint32_t address,
 		uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	LOG_ERROR(&quot;Not implemented: %s&quot;, __func__);
@@ -756,7 +756,7 @@ err_write_phys_memory(struct target_s *target, uint32_t address,
 
 int target_init(struct command_context_s *cmd_ctx)
 {
-	struct target_s *target;
+	struct target *target;
 	int retval;
 
 	for (target = all_targets; target; target = target-&gt;next) {
@@ -870,7 +870,7 @@ int target_init(struct command_context_s *cmd_ctx)
 	return ERROR_OK;
 }
 
-int target_register_event_callback(int (*callback)(struct target_s *target, enum target_event event, void *priv), void *priv)
+int target_register_event_callback(int (*callback)(struct target *target, enum target_event event, void *priv), void *priv)
 {
 	struct target_event_callback **callbacks_p = &amp;target_event_callbacks;
 
@@ -932,7 +932,7 @@ int target_register_timer_callback(int (*callback)(void *priv), int time_ms, int
 	return ERROR_OK;
 }
 
-int target_unregister_event_callback(int (*callback)(struct target_s *target, enum target_event event, void *priv), void *priv)
+int target_unregister_event_callback(int (*callback)(struct target *target, enum target_event event, void *priv), void *priv)
 {
 	struct target_event_callback **p = &amp;target_event_callbacks;
 	struct target_event_callback *c = target_event_callbacks;
@@ -986,7 +986,7 @@ int target_unregister_timer_callback(int (*callback)(void *priv), void *priv)
 	return ERROR_OK;
 }
 
-int target_call_event_callbacks(target_t *target, enum target_event event)
+int target_call_event_callbacks(struct target *target, enum target_event event)
 {
 	struct target_event_callback *callback = target_event_callbacks;
 	struct target_event_callback *next_callback;
@@ -1082,7 +1082,7 @@ int target_call_timer_callbacks_now(void)
 	return target_call_timer_callbacks_check_time(0);
 }
 
-int target_alloc_working_area(struct target_s *target, uint32_t size, struct working_area **area)
+int target_alloc_working_area(struct target *target, uint32_t size, struct working_area **area)
 {
 	struct working_area *c = target-&gt;working_areas;
 	struct working_area *new_wa = NULL;
@@ -1202,7 +1202,7 @@ int target_alloc_working_area(struct target_s *target, uint32_t size, struct wor
 	return ERROR_OK;
 }
 
-int target_free_working_area_restore(struct target_s *target, struct working_area *area, int restore)
+int target_free_working_area_restore(struct target *target, struct working_area *area, int restore)
 {
 	if (area-&gt;free)
 		return ERROR_OK;
@@ -1223,7 +1223,7 @@ int target_free_working_area_restore(struct target_s *target, struct working_are
 	return ERROR_OK;
 }
 
-int target_free_working_area(struct target_s *target, struct working_area *area)
+int target_free_working_area(struct target *target, struct working_area *area)
 {
 	return target_free_working_area_restore(target, area, 1);
 }
@@ -1231,7 +1231,7 @@ int target_free_working_area(struct target_s *target, struct working_area *area)
 /* free resources and restore memory, if restoring memory fails,
  * free up resources anyway
  */
-void target_free_all_working_areas_restore(struct target_s *target, int restore)
+void target_free_all_working_areas_restore(struct target *target, int restore)
 {
 	struct working_area *c = target-&gt;working_areas;
 
@@ -1251,12 +1251,12 @@ void target_free_all_working_areas_restore(struct target_s *target, int restore)
 	target-&gt;working_areas = NULL;
 }
 
-void target_free_all_working_areas(struct target_s *target)
+void target_free_all_working_areas(struct target *target)
 {
 	target_free_all_working_areas_restore(target, 1);
 }
 
-int target_arch_state(struct target_s *target)
+int target_arch_state(struct target *target)
 {
 	int retval;
 	if (target == NULL)
@@ -1278,7 +1278,7 @@ int target_arch_state(struct target_s *target)
  * mode respectively, otherwise data is handled as quickly as
  * possible
  */
-int target_write_buffer(struct target_s *target, uint32_t address, uint32_t size, uint8_t *buffer)
+int target_write_buffer(struct target *target, uint32_t address, uint32_t size, uint8_t *buffer)
 {
 	int retval;
 	LOG_DEBUG(&quot;writing buffer of %i byte at 0x%8.8x&quot;,
@@ -1360,7 +1360,7 @@ int target_write_buffer(struct target_s *target, uint32_t address, uint32_t size
  * mode respectively, otherwise data is handled as quickly as
  * possible
  */
-int target_read_buffer(struct target_s *target, uint32_t address, uint32_t size, uint8_t *buffer)
+int target_read_buffer(struct target *target, uint32_t address, uint32_t size, uint8_t *buffer)
 {
 	int retval;
 	LOG_DEBUG(&quot;reading buffer of %i byte at 0x%8.8x&quot;,
@@ -1441,7 +1441,7 @@ int target_read_buffer(struct target_s *target, uint32_t address, uint32_t size,
 	return ERROR_OK;
 }
 
-int target_checksum_memory(struct target_s *target, uint32_t address, uint32_t size, uint32_t* crc)
+int target_checksum_memory(struct target *target, uint32_t address, uint32_t size, uint32_t* crc)
 {
 	uint8_t *buffer;
 	int retval;
@@ -1486,7 +1486,7 @@ int target_checksum_memory(struct target_s *target, uint32_t address, uint32_t s
 	return retval;
 }
 
-int target_blank_check_memory(struct target_s *target, uint32_t address, uint32_t size, uint32_t* blank)
+int target_blank_check_memory(struct target *target, uint32_t address, uint32_t size, uint32_t* blank)
 {
 	int retval;
 	if (!target_was_examined(target))
@@ -1503,7 +1503,7 @@ int target_blank_check_memory(struct target_s *target, uint32_t address, uint32_
 	return retval;
 }
 
-int target_read_u32(struct target_s *target, uint32_t address, uint32_t *value)
+int target_read_u32(struct target *target, uint32_t address, uint32_t *value)
 {
 	uint8_t value_buf[4];
 	if (!target_was_examined(target))
@@ -1531,7 +1531,7 @@ int target_read_u32(struct target_s *target, uint32_t address, uint32_t *value)
 	return retval;
 }
 
-int target_read_u16(struct target_s *target, uint32_t address, uint16_t *value)
+int target_read_u16(struct target *target, uint32_t address, uint16_t *value)
 {
 	uint8_t value_buf[2];
 	if (!target_was_examined(target))
@@ -1559,7 +1559,7 @@ int target_read_u16(struct target_s *target, uint32_t address, uint16_t *value)
 	return retval;
 }
 
-int target_read_u8(struct target_s *target, uint32_t address, uint8_t *value)
+int target_read_u8(struct target *target, uint32_t address, uint8_t *value)
 {
 	int retval = target_read_memory(target, address, 1, 1, value);
 	if (!target_was_examined(target))
@@ -1584,7 +1584,7 @@ int target_read_u8(struct target_s *target, uint32_t address, uint8_t *value)
 	return retval;
 }
 
-int target_write_u32(struct target_s *target, uint32_t address, uint32_t value)
+int target_write_u32(struct target *target, uint32_t address, uint32_t value)
 {
 	int retval;
 	uint8_t value_buf[4];
@@ -1607,7 +1607,7 @@ int target_write_u32(struct target_s *target, uint32_t address, uint32_t value)
 	return retval;
 }
 
-int target_write_u16(struct target_s *target, uint32_t address, uint16_t value)
+int target_write_u16(struct target *target, uint32_t address, uint16_t value)
 {
 	int retval;
 	uint8_t value_buf[2];
@@ -1630,7 +1630,7 @@ int target_write_u16(struct target_s *target, uint32_t address, uint16_t value)
 	return retval;
 }
 
-int target_write_u8(struct target_s *target, uint32_t address, uint8_t value)
+int target_write_u8(struct target *target, uint32_t address, uint8_t value)
 {
 	int retval;
 	if (!target_was_examined(target))
@@ -1652,7 +1652,7 @@ int target_write_u8(struct target_s *target, uint32_t address, uint8_t value)
 
 COMMAND_HANDLER(handle_targets_command)
 {
-	target_t *target = all_targets;
+	struct target *target = all_targets;
 
 	if (argc == 1)
 	{
@@ -1774,7 +1774,7 @@ static int sense_handler(void)
 }
 
 static void target_call_event_callbacks_all(enum target_event e) {
-	target_t *target;
+	struct target *target;
 	target = all_targets;
 	while (target) {
 		target_call_event_callbacks(target, e);
@@ -1840,7 +1840,7 @@ int handle_target(void *priv)
 	/* Poll targets for state changes unless that's globally disabled.
 	 * Skip targets that are currently disabled.
 	 */
-	for (target_t *target = all_targets;
+	for (struct target *target = all_targets;
 			is_jtag_poll_safe() &amp;&amp; target;
 			target = target-&gt;next)
 	{
@@ -1864,7 +1864,7 @@ int handle_target(void *priv)
 
 COMMAND_HANDLER(handle_reg_command)
 {
-	target_t *target;
+	struct target *target;
 	struct reg *reg = NULL;
 	int count = 0;
 	char *value;
@@ -1996,7 +1996,7 @@ COMMAND_HANDLER(handle_reg_command)
 COMMAND_HANDLER(handle_poll_command)
 {
 	int retval = ERROR_OK;
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 
 	if (argc == 0)
 	{
@@ -2053,7 +2053,7 @@ COMMAND_HANDLER(handle_wait_halt_command)
 		ms *= 1000;
 	}
 
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	return target_wait_state(target, TARGET_HALTED, ms);
 }
 
@@ -2063,7 +2063,7 @@ COMMAND_HANDLER(handle_wait_halt_command)
  *
  * After 500ms, keep_alive() is invoked
  */
-int target_wait_state(target_t *target, enum target_state state, int ms)
+int target_wait_state(struct target *target, enum target_state state, int ms)
 {
 	int retval;
 	long long then = 0, cur;
@@ -2106,7 +2106,7 @@ COMMAND_HANDLER(handle_halt_command)
 {
 	LOG_DEBUG(&quot;-&quot;);
 
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	int retval = target_halt(target);
 	if (ERROR_OK != retval)
 		return retval;
@@ -2126,7 +2126,7 @@ COMMAND_HANDLER(handle_halt_command)
 
 COMMAND_HANDLER(handle_soft_reset_halt_command)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 
 	LOG_USER(&quot;requesting target halt and executing a soft reset&quot;);
 
@@ -2162,7 +2162,7 @@ COMMAND_HANDLER(handle_resume_command)
 	if (argc &gt; 1)
 		return ERROR_COMMAND_SYNTAX_ERROR;
 
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	target_handle_event(target, TARGET_EVENT_OLD_pre_resume);
 
 	/* with no args, resume from current pc, addr = 0,
@@ -2196,13 +2196,13 @@ COMMAND_HANDLER(handle_step_command)
 		current_pc = 0;
 	}
 
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 
 	return target-&gt;type-&gt;step(target, current_pc, addr, 1);
 }
 
 static void handle_md_output(struct command_context_s *cmd_ctx,
-		struct target_s *target, uint32_t address, unsigned size,
+		struct target *target, uint32_t address, unsigned size,
 		unsigned count, const uint8_t *buffer)
 {
 	const unsigned line_bytecnt = 32;
@@ -2264,7 +2264,7 @@ COMMAND_HANDLER(handle_md_command)
 	}
 
 	bool physical=strcmp(args[0], &quot;phys&quot;)==0;
-	int (*fn)(struct target_s *target,
+	int (*fn)(struct target *target,
 			uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer);
 	if (physical)
 	{
@@ -2289,7 +2289,7 @@ COMMAND_HANDLER(handle_md_command)
 
 	uint8_t *buffer = calloc(count, size);
 
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	int retval = fn(target, address, size, count, buffer);
 	if (ERROR_OK == retval)
 		handle_md_output(cmd_ctx, target, address, size, count, buffer);
@@ -2306,7 +2306,7 @@ COMMAND_HANDLER(handle_mw_command)
 		return ERROR_COMMAND_SYNTAX_ERROR;
 	}
 	bool physical=strcmp(args[0], &quot;phys&quot;)==0;
-	int (*fn)(struct target_s *target,
+	int (*fn)(struct target *target,
 			uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer);
 	if (physical)
 	{
@@ -2330,7 +2330,7 @@ COMMAND_HANDLER(handle_mw_command)
 	if (argc == 3)
 		COMMAND_PARSE_NUMBER(uint, args[2], count);
 
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	unsigned wordsize;
 	uint8_t value_buf[4];
 	switch (CMD_NAME[2])
@@ -2415,7 +2415,7 @@ COMMAND_HANDLER(handle_load_image_command)
 	if (ERROR_OK != retval)
 		return retval;
 
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 
 	struct duration bench;
 	duration_start(&amp;bench);
@@ -2499,7 +2499,7 @@ COMMAND_HANDLER(handle_dump_image_command)
 	int retvaltemp;
 
 
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 
 	if (argc != 3)
 	{
@@ -2566,7 +2566,7 @@ static COMMAND_HELPER(handle_verify_image_command_internal, int verify)
 
 	struct image image;
 
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 
 	if (argc &lt; 1)
 	{
@@ -2711,7 +2711,7 @@ COMMAND_HANDLER(handle_test_image_command)
 
 static int handle_bp_command_list(struct command_context_s *cmd_ctx)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct breakpoint *breakpoint = target-&gt;breakpoints;
 	while (breakpoint)
 	{
@@ -2740,7 +2740,7 @@ static int handle_bp_command_list(struct command_context_s *cmd_ctx)
 static int handle_bp_command_set(struct command_context_s *cmd_ctx,
 		uint32_t addr, uint32_t length, int hw)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	int retval = breakpoint_add(target, addr, length, hw);
 	if (ERROR_OK == retval)
 		command_print(cmd_ctx, &quot;breakpoint set at 0x%8.8&quot; PRIx32 &quot;&quot;, addr);
@@ -2785,7 +2785,7 @@ COMMAND_HANDLER(handle_rbp_command)
 	uint32_t addr;
 	COMMAND_PARSE_NUMBER(u32, args[0], addr);
 
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	breakpoint_remove(target, addr);
 
 	return ERROR_OK;
@@ -2793,7 +2793,7 @@ COMMAND_HANDLER(handle_rbp_command)
 
 COMMAND_HANDLER(handle_wp_command)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 
 	if (argc == 0)
 	{
@@ -2871,7 +2871,7 @@ COMMAND_HANDLER(handle_rwp_command)
 	uint32_t addr;
 	COMMAND_PARSE_NUMBER(u32, args[0], addr);
 
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	watchpoint_remove(target, addr);
 
 	return ERROR_OK;
@@ -2893,7 +2893,7 @@ COMMAND_HANDLER(handle_virt2phys_command)
 	COMMAND_PARSE_NUMBER(u32, args[0], va);
 	uint32_t pa;
 
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	int retval = target-&gt;type-&gt;virt2phys(target, va, &amp;pa);
 	if (retval == ERROR_OK)
 		command_print(cmd_ctx, &quot;Physical address 0x%08&quot; PRIx32 &quot;&quot;, pa);
@@ -3020,7 +3020,7 @@ static void writeGmon(uint32_t *samples, uint32_t sampleNum, const char *filenam
 /* profiling samples the CPU PC as quickly as OpenOCD is able, which will be used as a random sampling of PC */
 COMMAND_HANDLER(handle_profile_command)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct timeval timeout, now;
 
 	gettimeofday(&amp;timeout, NULL);
@@ -3133,7 +3133,7 @@ static int new_int_array_element(Jim_Interp * interp, const char *varname, int i
 static int jim_mem2array(Jim_Interp *interp, int argc, Jim_Obj *const *argv)
 {
 	command_context_t *context;
-	target_t *target;
+	struct target *target;
 
 	context = Jim_GetAssocData(interp, &quot;context&quot;);
 	if (context == NULL)
@@ -3151,7 +3151,7 @@ static int jim_mem2array(Jim_Interp *interp, int argc, Jim_Obj *const *argv)
 	return 	target_mem2array(interp, target, argc-1, argv + 1);
 }
 
-static int target_mem2array(Jim_Interp *interp, target_t *target, int argc, Jim_Obj *const *argv)
+static int target_mem2array(Jim_Interp *interp, struct target *target, int argc, Jim_Obj *const *argv)
 {
 	long l;
 	uint32_t width;
@@ -3322,7 +3322,7 @@ static int get_int_array_element(Jim_Interp * interp, const char *varname, int i
 static int jim_array2mem(Jim_Interp *interp, int argc, Jim_Obj *const *argv)
 {
 	command_context_t *context;
-	target_t *target;
+	struct target *target;
 
 	context = Jim_GetAssocData(interp, &quot;context&quot;);
 	if (context == NULL) {
@@ -3337,7 +3337,7 @@ static int jim_array2mem(Jim_Interp *interp, int argc, Jim_Obj *const *argv)
 
 	return target_array2mem(interp,target, argc-1, argv + 1);
 }
-static int target_array2mem(Jim_Interp *interp, target_t *target, int argc, Jim_Obj *const *argv)
+static int target_array2mem(Jim_Interp *interp, struct target *target, int argc, Jim_Obj *const *argv)
 {
 	long l;
 	uint32_t width;
@@ -3476,7 +3476,7 @@ static int target_array2mem(Jim_Interp *interp, target_t *target, int argc, Jim_
 
 void target_all_handle_event(enum target_event e)
 {
-	target_t *target;
+	struct target *target;
 
 	LOG_DEBUG(&quot;**all*targets: event: %d, %s&quot;,
 			   (int)e,
@@ -3493,7 +3493,7 @@ void target_all_handle_event(enum target_event e)
 /* FIX? should we propagate errors here rather than printing them
  * and continuing?
  */
-void target_handle_event(target_t *target, enum target_event e)
+void target_handle_event(struct target *target, enum target_event e)
 {
 	struct target_event_action *teap;
 
@@ -3540,7 +3540,7 @@ static Jim_Nvp nvp_config_opts[] = {
 	{ .name = NULL, .value = -1 }
 };
 
-static int target_configure(Jim_GetOptInfo *goi, target_t *target)
+static int target_configure(Jim_GetOptInfo *goi, struct target *target)
 {
 	Jim_Nvp *n;
 	Jim_Obj *o;
@@ -3821,7 +3821,7 @@ static int tcl_target_func(Jim_Interp *interp, int argc, Jim_Obj *const *argv)
 	int x,y,z;
 	uint8_t  target_buf[32];
 	Jim_Nvp *n;
-	target_t *target;
+	struct target *target;
 	struct command_context_s *cmd_ctx;
 	int e;
 
@@ -4237,7 +4237,7 @@ static int target_create(Jim_GetOptInfo *goi)
 	char *cp2;
 	int e;
 	int x;
-	target_t *target;
+	struct target *target;
 	struct command_context_s *cmd_ctx;
 
 	cmd_ctx = Jim_GetAssocData(goi-&gt;interp, &quot;context&quot;);
@@ -4285,7 +4285,7 @@ static int target_create(Jim_GetOptInfo *goi)
 	}
 
 	/* Create it */
-	target = calloc(1,sizeof(target_t));
+	target = calloc(1,sizeof(struct target));
 	/* set target number */
 	target-&gt;target_number = new_target_number();
 
@@ -4364,7 +4364,7 @@ static int target_create(Jim_GetOptInfo *goi)
 
 	/* append to end of list */
 	{
-		target_t **tpp;
+		struct target **tpp;
 		tpp = &amp;(all_targets);
 		while (*tpp) {
 			tpp = &amp;((*tpp)-&gt;next);
@@ -4391,7 +4391,7 @@ static int jim_target(Jim_Interp *interp, int argc, Jim_Obj *const *argv)
 	int x,r,e;
 	jim_wide w;
 	struct command_context_s *cmd_ctx;
-	target_t *target;
+	struct target *target;
 	Jim_GetOptInfo goi;
 	enum tcmd {
 		/* TG = target generic */
@@ -4662,7 +4662,7 @@ COMMAND_HANDLER(handle_fast_load_command)
 	int retval = ERROR_OK;
 	for (i = 0; i &lt; fastload_num;i++)
 	{
-		target_t *target = get_current_target(cmd_ctx);
+		struct target *target = get_current_target(cmd_ctx);
 		command_print(cmd_ctx, &quot;Write to 0x%08x, length 0x%08x&quot;,
 					  (unsigned int)(fastload[i].address),
 					  (unsigned int)(fastload[i].length));
@@ -4680,7 +4680,7 @@ COMMAND_HANDLER(handle_fast_load_command)
 static int jim_mcrmrc(Jim_Interp *interp, int argc, Jim_Obj *const *argv)
 {
 	command_context_t *context;
-	target_t *target;
+	struct target *target;
 	int retval;
 
 	context = Jim_GetAssocData(interp, &quot;context&quot;);
diff --git a/src/target/target.h b/src/target/target.h
index b2c908a..5f29e7f 100644
--- a/src/target/target.h
+++ b/src/target/target.h
@@ -112,8 +112,6 @@ enum target_endianess
 
 extern const Jim_Nvp nvp_target_endian[];
 
-struct target_s;
-
 struct working_area
 {
 	uint32_t address;
@@ -124,8 +122,8 @@ struct working_area
 	struct working_area *next;
 };
 
-// target_type.h contains the full definitionof struct target_type
-typedef struct target_s
+// target_type.h contains the full definitionof struct targe_type
+struct target
 {
 	struct target_type *type;				/* target type definition (name, access functions) */
 	const char *cmd_name;				/* tcl Name of target */
@@ -155,13 +153,13 @@ typedef struct target_s
 	struct debug_msg_receiver *dbgmsg;/* list of debug message receivers */
 	uint32_t dbg_msg_enabled;				/* debug message status */
 	void *arch_info;					/* architecture specific information */
-	struct target_s *next;				/* next target in list */
+	struct target *next;				/* next target in list */
 
 	int display;						/* display async info in telnet session. Do not display
 										 * lots of halted/resumed info when stepping in debugger. */
 	bool halt_issued;					/* did we transition to halted state? */
 	long long halt_issued_time;			/* Note time when halt was issued */
-} target_t;
+};
 
 enum target_event
 {
@@ -228,7 +226,7 @@ struct target_event_action {
 
 struct target_event_callback
 {
-	int (*callback)(struct target_s *target, enum target_event event, void *priv);
+	int (*callback)(struct target *target, enum target_event event, void *priv);
 	void *priv;
 	struct target_event_callback *next;
 };
@@ -252,18 +250,18 @@ int target_process_reset(struct command_context_s *cmd_ctx,
 		enum target_reset_mode reset_mode);
 
 int target_register_event_callback(
-		int (*callback)(struct target_s *target,
+		int (*callback)(struct target *target,
 				enum target_event event, void *priv),
 		void *priv);
 int target_unregister_event_callback(
-		int (*callback)(struct target_s *target,
+		int (*callback)(struct target *target,
 				enum target_event event, void *priv),
 		void *priv);
-int target_poll(target_t *target);
-int target_resume(target_t *target, int current, uint32_t address,
+int target_poll(struct target *target);
+int target_resume(struct target *target, int current, uint32_t address,
 		int handle_breakpoints, int debug_execution);
-int target_halt(target_t *target);
-int target_call_event_callbacks(target_t *target, enum target_event event);
+int target_halt(struct target *target);
+int target_call_event_callbacks(struct target *target, enum target_event event);
 
 /**
  * The period is very approximate, the callback can happen much more often
@@ -280,28 +278,28 @@ int target_call_timer_callbacks(void);
  */
 int target_call_timer_callbacks_now(void);
 
-target_t* get_current_target(struct command_context_s *cmd_ctx);
-target_t *get_target(const char *id);
+struct target* get_current_target(struct command_context_s *cmd_ctx);
+struct target *get_target(const char *id);
 
 /**
  * Get the target name.
  *
  * This routine is a wrapper for the target-&gt;type-&gt;name field.
  */
-const char *target_get_name(struct target_s *target);
+const char *target_get_name(struct target *target);
 
 /**
  * Examine the specified @a target.
  *
  * This routine is a wrapper for target-&gt;type-&gt;examine.
  */
-int target_examine_one(struct target_s *target);
+int target_examine_one(struct target *target);
 /// @returns @c true if the target has been examined.
-bool target_was_examined(struct target_s *target);
+bool target_was_examined(struct target *target);
 /// Sets the @c examined flag for the given target.
-void target_set_examined(struct target_s *target);
+void target_set_examined(struct target *target);
 /// Reset the @c examined flag for the given target.
-void target_reset_examined(struct target_s *target);
+void target_reset_examined(struct target *target);
 
 
 /**
@@ -309,28 +307,28 @@ void target_reset_examined(struct target_s *target);
  *
  * This routine is a wrapper for target-&gt;type-&gt;add_breakpoint.
  */
-int target_add_breakpoint(struct target_s *target,
+int target_add_breakpoint(struct target *target,
 		struct breakpoint *breakpoint);
 /**
  * Remove the @a breakpoint for @a target.
  *
  * This routine is a wrapper for target-&gt;type-&gt;remove_breakpoint.
  */
-int target_remove_breakpoint(struct target_s *target,
+int target_remove_breakpoint(struct target *target,
 		struct breakpoint *breakpoint);
 /**
  * Add the @a watchpoint for @a target.
  *
  * This routine is a wrapper for target-&gt;type-&gt;add_watchpoint.
  */
-int target_add_watchpoint(struct target_s *target,
+int target_add_watchpoint(struct target *target,
 		struct watchpoint *watchpoint);
 /**
  * Remove the @a watchpoint for @a target.
  *
  * This routine is a wrapper for target-&gt;type-&gt;remove_watchpoint.
  */
-int target_remove_watchpoint(struct target_s *target,
+int target_remove_watchpoint(struct target *target,
 		struct watchpoint *watchpoint);
 
 /**
@@ -338,7 +336,7 @@ int target_remove_watchpoint(struct target_s *target,
  *
  * This routine is a wrapper for target-&gt;type-&gt;get_gdb_reg_list.
  */
-int target_get_gdb_reg_list(struct target_s *target,
+int target_get_gdb_reg_list(struct target *target,
 		struct reg **reg_list[], int *reg_list_size);
 
 /**
@@ -346,14 +344,14 @@ int target_get_gdb_reg_list(struct target_s *target,
  *
  * This routine is a wrapper for target-&gt;type-&gt;step.
  */
-int target_step(struct target_s *target,
+int target_step(struct target *target,
 		int current, uint32_t address, int handle_breakpoints);
 /**
  * Run an algorithm on the @a target given.
  *
  * This routine is a wrapper for target-&gt;type-&gt;run_algorithm.
  */
-int target_run_algorithm(struct target_s *target,
+int target_run_algorithm(struct target *target,
 		int num_mem_params, struct mem_param *mem_params,
 		int num_reg_params, struct reg_param *reg_param,
 		uint32_t entry_point, uint32_t exit_point,
@@ -365,7 +363,7 @@ int target_run_algorithm(struct target_s *target,
  *
  * This routine is a wrapper for target-&gt;type-&gt;read_memory.
  */
-int target_read_memory(struct target_s *target,
+int target_read_memory(struct target *target,
 		uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer);
 /**
  * Write @a count items of @a size bytes to the memory of @a target at
@@ -373,7 +371,7 @@ int target_read_memory(struct target_s *target,
  *
  * This routine is wrapper for target-&gt;type-&gt;write_memory.
  */
-int target_write_memory(struct target_s *target,
+int target_write_memory(struct target *target,
 		uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer);
 
 /**
@@ -383,7 +381,7 @@ int target_write_memory(struct target_s *target,
  *
  * This routine is wrapper for target-&gt;type-&gt;bulk_write_memory.
  */
-int target_bulk_write_memory(struct target_s *target,
+int target_bulk_write_memory(struct target *target,
 		uint32_t address, uint32_t count, uint8_t *buffer);
 
 /*
@@ -410,18 +408,18 @@ int target_bulk_write_memory(struct target_s *target,
  * write operation, thus making this fn suitable to e.g. write to special
  * peripheral registers which do not support byte operations.
  */
-int target_write_buffer(struct target_s *target,
+int target_write_buffer(struct target *target,
 		uint32_t address, uint32_t size, uint8_t *buffer);
-int target_read_buffer(struct target_s *target,
+int target_read_buffer(struct target *target,
 		uint32_t address, uint32_t size, uint8_t *buffer);
-int target_checksum_memory(struct target_s *target,
+int target_checksum_memory(struct target *target,
 		uint32_t address, uint32_t size, uint32_t* crc);
-int target_blank_check_memory(struct target_s *target,
+int target_blank_check_memory(struct target *target,
 		uint32_t address, uint32_t size, uint32_t* blank);
-int target_wait_state(target_t *target, enum target_state state, int ms);
+int target_wait_state(struct target *target, enum target_state state, int ms);
 
 /** Return the *name* of this targets current state */
-const char *target_state_name( target_t *target );
+const char *target_state_name( struct target *target );
 
 /* DANGER!!!!!
  *
@@ -434,37 +432,37 @@ const char *target_state_name( target_t *target );
  * upon resuming or resetting the CPU.
  *
  */
-int target_alloc_working_area(struct target_s *target,
+int target_alloc_working_area(struct target *target,
 		uint32_t size, struct working_area **area);
-int target_free_working_area(struct target_s *target, struct working_area *area);
-int target_free_working_area_restore(struct target_s *target,
+int target_free_working_area(struct target *target, struct working_area *area);
+int target_free_working_area_restore(struct target *target,
 		struct working_area *area, int restore);
-void target_free_all_working_areas(struct target_s *target);
-void target_free_all_working_areas_restore(struct target_s *target, int restore);
+void target_free_all_working_areas(struct target *target);
+void target_free_all_working_areas_restore(struct target *target, int restore);
 
-extern target_t *all_targets;
+extern struct target *all_targets;
 
 extern struct target_event_callback *target_event_callbacks;
 extern struct target_timer_callback *target_timer_callbacks;
 
-uint32_t target_buffer_get_u32(target_t *target, const uint8_t *buffer);
-uint16_t target_buffer_get_u16(target_t *target, const uint8_t *buffer);
-uint8_t  target_buffer_get_u8 (target_t *target, const uint8_t *buffer);
-void target_buffer_set_u32(target_t *target, uint8_t *buffer, uint32_t value);
-void target_buffer_set_u16(target_t *target, uint8_t *buffer, uint16_t value);
-void target_buffer_set_u8 (target_t *target, uint8_t *buffer, uint8_t  value);
+uint32_t target_buffer_get_u32(struct target *target, const uint8_t *buffer);
+uint16_t target_buffer_get_u16(struct target *target, const uint8_t *buffer);
+uint8_t  target_buffer_get_u8 (struct target *target, const uint8_t *buffer);
+void target_buffer_set_u32(struct target *target, uint8_t *buffer, uint32_t value);
+void target_buffer_set_u16(struct target *target, uint8_t *buffer, uint16_t value);
+void target_buffer_set_u8 (struct target *target, uint8_t *buffer, uint8_t  value);
 
-int target_read_u32(struct target_s *target, uint32_t address, uint32_t *value);
-int target_read_u16(struct target_s *target, uint32_t address, uint16_t *value);
-int target_read_u8(struct target_s *target, uint32_t address, uint8_t *value);
-int target_write_u32(struct target_s *target, uint32_t address, uint32_t value);
-int target_write_u16(struct target_s *target, uint32_t address, uint16_t value);
-int target_write_u8(struct target_s *target, uint32_t address, uint8_t value);
+int target_read_u32(struct target *target, uint32_t address, uint32_t *value);
+int target_read_u16(struct target *target, uint32_t address, uint16_t *value);
+int target_read_u8(struct target *target, uint32_t address, uint8_t *value);
+int target_write_u32(struct target *target, uint32_t address, uint32_t value);
+int target_write_u16(struct target *target, uint32_t address, uint16_t value);
+int target_write_u8(struct target *target, uint32_t address, uint8_t value);
 
 /* Issues USER() statements with target state information */
-int target_arch_state(struct target_s *target);
+int target_arch_state(struct target *target);
 
-void target_handle_event(target_t *t, enum target_event e);
+void target_handle_event(struct target *t, enum target_event e);
 void target_all_handle_event(enum target_event e);
 
 #define ERROR_TARGET_INVALID	(-300)
diff --git a/src/target/target_request.c b/src/target/target_request.c
index 32da272..f1bb243 100644
--- a/src/target/target_request.c
+++ b/src/target/target_request.c
@@ -37,7 +37,7 @@
 static command_t *target_request_cmd = NULL;
 static int charmsg_mode = 0;
 
-static int target_asciimsg(target_t *target, uint32_t length)
+static int target_asciimsg(struct target *target, uint32_t length)
 {
 	char *msg = malloc(CEIL(length + 1, 4) * 4);
 	struct debug_msg_receiver *c = target-&gt;dbgmsg;
@@ -56,14 +56,14 @@ static int target_asciimsg(target_t *target, uint32_t length)
 	return ERROR_OK;
 }
 
-static int target_charmsg(target_t *target, uint8_t msg)
+static int target_charmsg(struct target *target, uint8_t msg)
 {
 	LOG_USER_N(&quot;%c&quot;, msg);
 
 	return ERROR_OK;
 }
 
-static int target_hexmsg(target_t *target, int size, uint32_t length)
+static int target_hexmsg(struct target *target, int size, uint32_t length)
 {
 	uint8_t *data = malloc(CEIL(length * size, 4) * 4);
 	char line[128];
@@ -113,7 +113,7 @@ static int target_hexmsg(target_t *target, int size, uint32_t length)
 /* handle requests from the target received by a target specific
  * side-band channel (e.g. ARM7/9 DCC)
  */
-int target_request(target_t *target, uint32_t request)
+int target_request(struct target *target, uint32_t request)
 {
 	target_req_cmd_t target_req_cmd = request &amp; 0xff;
 
@@ -150,7 +150,7 @@ int target_request(target_t *target, uint32_t request)
 	return ERROR_OK;
 }
 
-static int add_debug_msg_receiver(struct command_context_s *cmd_ctx, target_t *target)
+static int add_debug_msg_receiver(struct command_context_s *cmd_ctx, struct target *target)
 {
 	struct debug_msg_receiver **p = &amp;target-&gt;dbgmsg;
 
@@ -178,7 +178,7 @@ static int add_debug_msg_receiver(struct command_context_s *cmd_ctx, target_t *t
 	return ERROR_OK;
 }
 
-static struct debug_msg_receiver* find_debug_msg_receiver(struct command_context_s *cmd_ctx, target_t *target)
+static struct debug_msg_receiver* find_debug_msg_receiver(struct command_context_s *cmd_ctx, struct target *target)
 {
 	int do_all_targets = 0;
 	struct debug_msg_receiver **p = &amp;target-&gt;dbgmsg;
@@ -211,7 +211,7 @@ static struct debug_msg_receiver* find_debug_msg_receiver(struct command_context
 	return NULL;
 }
 
-int delete_debug_msg_receiver(struct command_context_s *cmd_ctx, target_t *target)
+int delete_debug_msg_receiver(struct command_context_s *cmd_ctx, struct target *target)
 {
 	struct debug_msg_receiver **p;
 	struct debug_msg_receiver *c;
@@ -259,7 +259,7 @@ int delete_debug_msg_receiver(struct command_context_s *cmd_ctx, target_t *targe
 
 COMMAND_HANDLER(handle_target_request_debugmsgs_command)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 
 	int receiving = 0;
 
diff --git a/src/target/target_request.h b/src/target/target_request.h
index 669a8c6..1fa7e8b 100644
--- a/src/target/target_request.h
+++ b/src/target/target_request.h
@@ -42,9 +42,9 @@ struct debug_msg_receiver
 	struct debug_msg_receiver *next;
 };
 
-int target_request(target_t *target, uint32_t request);
+int target_request(struct target *target, uint32_t request);
 int delete_debug_msg_receiver(struct command_context_s *cmd_ctx,
-		target_t *target);
+		struct target *target);
 int target_request_register_commands(struct command_context_s *cmd_ctx);
 
 #endif /* TARGET_REQUEST_H */
diff --git a/src/target/target_type.h b/src/target/target_type.h
index 37e438d..32c58ab 100644
--- a/src/target/target_type.h
+++ b/src/target/target_type.h
@@ -28,7 +28,7 @@
 
 #include &quot;types.h&quot;
 
-struct target_s;
+struct target;
 
 struct target_type
 {
@@ -47,18 +47,18 @@ struct target_type
 	int examined;
 
 	/* poll current target status */
-	int (*poll)(struct target_s *target);
+	int (*poll)(struct target *target);
 	/* Invoked only from target_arch_state().
 	 * Issue USER() w/architecture specific status.  */
-	int (*arch_state)(struct target_s *target);
+	int (*arch_state)(struct target *target);
 
 	/* target request support */
-	int (*target_request_data)(struct target_s *target, uint32_t size, uint8_t *buffer);
+	int (*target_request_data)(struct target *target, uint32_t size, uint8_t *buffer);
 
 	/* halt will log a warning, but return ERROR_OK if the target is already halted. */
-	int (*halt)(struct target_s *target);
-	int (*resume)(struct target_s *target, int current, uint32_t address, int handle_breakpoints, int debug_execution);
-	int (*step)(struct target_s *target, int current, uint32_t address, int handle_breakpoints);
+	int (*halt)(struct target *target);
+	int (*resume)(struct target *target, int current, uint32_t address, int handle_breakpoints, int debug_execution);
+	int (*step)(struct target *target, int current, uint32_t address, int handle_breakpoints);
 
 	/* target reset control. assert reset can be invoked when OpenOCD and
 	 * the target is out of sync.
@@ -75,10 +75,10 @@ struct target_type
 	 * the way reset's are configured.
 	 *
 	 */
-	int (*assert_reset)(struct target_s *target);
-	int (*deassert_reset)(struct target_s *target);
-	int (*soft_reset_halt_imp)(struct target_s *target);
-	int (*soft_reset_halt)(struct target_s *target);
+	int (*assert_reset)(struct target *target);
+	int (*deassert_reset)(struct target *target);
+	int (*soft_reset_halt_imp)(struct target *target);
+	int (*soft_reset_halt)(struct target *target);
 
 	/**
 	 * Target register access for GDB.  Do @b not call this function
@@ -91,34 +91,34 @@ struct target_type
 	 * list, however it is after GDB is connected that monitor commands can
 	 * be run to properly initialize the target
 	 */
-	int (*get_gdb_reg_list)(struct target_s *target, struct reg **reg_list[], int *reg_list_size);
+	int (*get_gdb_reg_list)(struct target *target, struct reg **reg_list[], int *reg_list_size);
 
 	/* target memory access
 	* size: 1 = byte (8bit), 2 = half-word (16bit), 4 = word (32bit)
 	* count: number of items of &lt;size&gt;
 	*/
-	int (*read_memory_imp)(struct target_s *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer);
+	int (*read_memory_imp)(struct target *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer);
 	/**
 	 * Target memory read callback.  Do @b not call this function
 	 * directly, use target_read_memory() instead.
 	 */
-	int (*read_memory)(struct target_s *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer);
-	int (*write_memory_imp)(struct target_s *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer);
+	int (*read_memory)(struct target *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer);
+	int (*write_memory_imp)(struct target *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer);
 	/**
 	 * Target memory write callback.  Do @b not call this function
 	 * directly, use target_write_memory() instead.
 	 */
-	int (*write_memory)(struct target_s *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer);
+	int (*write_memory)(struct target *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer);
 
 	/**
 	 * Write target memory in multiples of 4 bytes, optimized for
 	 * writing large quantities of data.  Do @b not call this
 	 * function directly, use target_bulk_write_memory() instead.
 	 */
-	int (*bulk_write_memory)(struct target_s *target, uint32_t address, uint32_t count, uint8_t *buffer);
+	int (*bulk_write_memory)(struct target *target, uint32_t address, uint32_t count, uint8_t *buffer);
 
-	int (*checksum_memory)(struct target_s *target, uint32_t address, uint32_t count, uint32_t* checksum);
-	int (*blank_check_memory)(struct target_s *target, uint32_t address, uint32_t count, uint32_t* blank);
+	int (*checksum_memory)(struct target *target, uint32_t address, uint32_t count, uint32_t* checksum);
+	int (*blank_check_memory)(struct target *target, uint32_t address, uint32_t count, uint32_t* blank);
 
 	/*
 	 * target break-/watchpoint control
@@ -131,39 +131,39 @@ struct target_type
 	 *
 	 * Upon GDB connection all breakpoints/watchpoints are cleared.
 	 */
-	int (*add_breakpoint)(struct target_s *target, struct breakpoint *breakpoint);
+	int (*add_breakpoint)(struct target *target, struct breakpoint *breakpoint);
 
 	/* remove breakpoint. hw will only be updated if the target is currently halted.
 	 * However, this method can be invoked on unresponsive targets.
 	 */
-	int (*remove_breakpoint)(struct target_s *target, struct breakpoint *breakpoint);
-	int (*add_watchpoint)(struct target_s *target, struct watchpoint *watchpoint);
+	int (*remove_breakpoint)(struct target *target, struct breakpoint *breakpoint);
+	int (*add_watchpoint)(struct target *target, struct watchpoint *watchpoint);
 	/* remove watchpoint. hw will only be updated if the target is currently halted.
 	 * However, this method can be invoked on unresponsive targets.
 	 */
-	int (*remove_watchpoint)(struct target_s *target, struct watchpoint *watchpoint);
+	int (*remove_watchpoint)(struct target *target, struct watchpoint *watchpoint);
 
 	/* target algorithm support */
-	int (*run_algorithm_imp)(struct target_s *target, int num_mem_params, struct mem_param *mem_params, int num_reg_params, struct reg_param *reg_param, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info);
+	int (*run_algorithm_imp)(struct target *target, int num_mem_params, struct mem_param *mem_params, int num_reg_params, struct reg_param *reg_param, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info);
 	/**
 	 * Target algorithm support.  Do @b not call this method directly,
 	 * use target_run_algorithm() instead.
 	 */
-	int (*run_algorithm)(struct target_s *target, int num_mem_params, struct mem_param *mem_params, int num_reg_params, struct reg_param *reg_param, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info);
+	int (*run_algorithm)(struct target *target, int num_mem_params, struct mem_param *mem_params, int num_reg_params, struct reg_param *reg_param, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info);
 
 	int (*register_commands)(struct command_context_s *cmd_ctx);
 
 	/* called when target is created */
-	int (*target_create)(struct target_s *target, Jim_Interp *interp);
+	int (*target_create)(struct target *target, Jim_Interp *interp);
 
 	/* called for various config parameters */
 	/* returns JIM_CONTINUE - if option not understood */
 	/* otherwise: JIM_OK, or JIM_ERR, */
-	int (*target_jim_configure)(struct target_s *target, Jim_GetOptInfo *goi);
+	int (*target_jim_configure)(struct target *target, Jim_GetOptInfo *goi);
 
 	/* target commands specifically handled by the target */
 	/* returns JIM_OK, or JIM_ERR, or JIM_CONTINUE - if option not understood */
-	int (*target_jim_commands)(struct target_s *target, Jim_GetOptInfo *goi);
+	int (*target_jim_commands)(struct target *target, Jim_GetOptInfo *goi);
 
 	/* invoked after JTAG chain has been examined &amp; validated. During
 	 * this stage the target is examined and any additional setup is
@@ -171,18 +171,18 @@ struct target_type
 	 *
 	 * invoked every time after the jtag chain has been validated/examined
 	 */
-	int (*examine)(struct target_s *target);
+	int (*examine)(struct target *target);
 	/* Set up structures for target.
 	 *
 	 * It is illegal to talk to the target at this stage as this fn is invoked
 	 * before the JTAG chain has been examined/verified
 	 * */
-	int (*init_target)(struct command_context_s *cmd_ctx, struct target_s *target);
+	int (*init_target)(struct command_context_s *cmd_ctx, struct target *target);
 
 	/* translate from virtual to physical address. Default implementation is successful
 	 * no-op(i.e. virtual==physical).
 	 */
-	int (*virt2phys)(struct target_s *target, uint32_t address, uint32_t *physical);
+	int (*virt2phys)(struct target *target, uint32_t address, uint32_t *physical);
 
 	/* read directly from physical memory. caches are bypassed and untouched.
 	 *
@@ -192,20 +192,20 @@ struct target_type
 	 *
 	 * Default implementation is to call read_memory.
 	 */
-	int (*read_phys_memory)(struct target_s *target, uint32_t phys_address, uint32_t size, uint32_t count, uint8_t *buffer);
+	int (*read_phys_memory)(struct target *target, uint32_t phys_address, uint32_t size, uint32_t count, uint8_t *buffer);
 
 	/*
 	 * same as read_phys_memory, except that it writes...
 	 */
-	int (*write_phys_memory)(struct target_s *target, uint32_t phys_address, uint32_t size, uint32_t count, uint8_t *buffer);
+	int (*write_phys_memory)(struct target *target, uint32_t phys_address, uint32_t size, uint32_t count, uint8_t *buffer);
 
-	int (*mmu)(struct target_s *target, int *enabled);
+	int (*mmu)(struct target *target, int *enabled);
 
 	/* Read coprocessor - arm specific. Default implementation returns error. */
-	int (*mrc)(struct target_s *target, int cpnum, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t *value);
+	int (*mrc)(struct target *target, int cpnum, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t *value);
 
 	/* Write coprocessor. Default implementation returns error.  */
-	int (*mcr)(struct target_s *target, int cpnum, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t value);
+	int (*mcr)(struct target *target, int cpnum, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t value);
 };
 
 #endif // TARGET_TYPE_H
diff --git a/src/target/trace.c b/src/target/trace.c
index bc6eec7..bb57978 100644
--- a/src/target/trace.c
+++ b/src/target/trace.c
@@ -25,7 +25,7 @@
 #include &quot;trace.h&quot;
 #include &quot;target.h&quot;
 
-int trace_point(target_t *target, uint32_t number)
+int trace_point(struct target *target, uint32_t number)
 {
 	struct trace *trace = target-&gt;trace_info;
 
@@ -49,7 +49,7 @@ int trace_point(target_t *target, uint32_t number)
 
 COMMAND_HANDLER(handle_trace_point_command)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct trace *trace = target-&gt;trace_info;
 
 	if (argc == 0)
@@ -97,7 +97,7 @@ COMMAND_HANDLER(handle_trace_point_command)
 
 COMMAND_HANDLER(handle_trace_history_command)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct trace *trace = target-&gt;trace_info;
 
 	if (argc &gt; 0)
diff --git a/src/target/trace.h b/src/target/trace.h
index cca84d7..483f942 100644
--- a/src/target/trace.h
+++ b/src/target/trace.h
@@ -22,7 +22,7 @@
 
 #include &quot;types.h&quot;
 
-struct target_s;
+struct target;
 struct command_context_s;
 
 struct trace_point
@@ -51,7 +51,7 @@ typedef enum trace_status
 	TRACE_OVERFLOWED = 0x8,
 } trace_status_t;
 
-int trace_point(struct target_s *target, uint32_t number);
+int trace_point(struct target *target, uint32_t number);
 int trace_register_commands(struct command_context_s *cmd_ctx);
 
 #define ERROR_TRACE_IMAGE_UNAVAILABLE		-(1500)
diff --git a/src/target/xscale.c b/src/target/xscale.c
index e757271..ccf23b4 100644
--- a/src/target/xscale.c
+++ b/src/target/xscale.c
@@ -57,16 +57,16 @@
 
 
 /* forward declarations */
-static int xscale_resume(struct target_s *, int current,
+static int xscale_resume(struct target *, int current,
 	uint32_t address, int handle_breakpoints, int debug_execution);
-static int xscale_debug_entry(target_t *);
-static int xscale_restore_context(target_t *);
+static int xscale_debug_entry(struct target *);
+static int xscale_restore_context(struct target *);
 static int xscale_get_reg(struct reg *reg);
 static int xscale_set_reg(struct reg *reg, uint8_t *buf);
-static int xscale_set_breakpoint(struct target_s *, struct breakpoint *);
-static int xscale_set_watchpoint(struct target_s *, struct watchpoint *);
-static int xscale_unset_breakpoint(struct target_s *, struct breakpoint *);
-static int xscale_read_trace(target_t *);
+static int xscale_set_breakpoint(struct target *, struct breakpoint *);
+static int xscale_set_watchpoint(struct target *, struct watchpoint *);
+static int xscale_unset_breakpoint(struct target *, struct breakpoint *);
+static int xscale_read_trace(struct target *);
 
 
 /* This XScale &quot;debug handler&quot; is loaded into the processor's
@@ -178,7 +178,7 @@ static int xscale_jtag_set_instr(struct jtag_tap *tap, uint32_t new_instr)
 	return ERROR_OK;
 }
 
-static int xscale_read_dcsr(target_t *target)
+static int xscale_read_dcsr(struct target *target)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
 	int retval;
@@ -251,7 +251,7 @@ static void xscale_getbuf(jtag_callback_data_t arg)
 	*((uint32_t *)in) = buf_get_u32(in, 0, 32);
 }
 
-static int xscale_receive(target_t *target, uint32_t *buffer, int num_words)
+static int xscale_receive(struct target *target, uint32_t *buffer, int num_words)
 {
 	if (num_words == 0)
 		return ERROR_INVALID_ARGUMENTS;
@@ -355,7 +355,7 @@ static int xscale_receive(target_t *target, uint32_t *buffer, int num_words)
 	return retval;
 }
 
-static int xscale_read_tx(target_t *target, int consume)
+static int xscale_read_tx(struct target *target, int consume)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
 	tap_state_t path[3];
@@ -453,7 +453,7 @@ static int xscale_read_tx(target_t *target, int consume)
 	return ERROR_OK;
 }
 
-static int xscale_write_rx(target_t *target)
+static int xscale_write_rx(struct target *target)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
 	int retval;
@@ -539,7 +539,7 @@ static int xscale_write_rx(target_t *target)
 }
 
 /* send count elements of size byte to the debug handler */
-static int xscale_send(target_t *target, uint8_t *buffer, int count, int size)
+static int xscale_send(struct target *target, uint8_t *buffer, int count, int size)
 {
 	uint32_t t[3];
 	int bits[3];
@@ -602,7 +602,7 @@ static int xscale_send(target_t *target, uint8_t *buffer, int count, int size)
 	return ERROR_OK;
 }
 
-static int xscale_send_u32(target_t *target, uint32_t value)
+static int xscale_send_u32(struct target *target, uint32_t value)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
 
@@ -610,7 +610,7 @@ static int xscale_send_u32(target_t *target, uint32_t value)
 	return xscale_write_rx(target);
 }
 
-static int xscale_write_dcsr(target_t *target, int hold_rst, int ext_dbg_brk)
+static int xscale_write_dcsr(struct target *target, int hold_rst, int ext_dbg_brk)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
 	int retval;
@@ -681,7 +681,7 @@ static unsigned int parity (unsigned int v)
 	return (0x6996 &gt;&gt; v) &amp; 1;
 }
 
-static int xscale_load_ic(target_t *target, uint32_t va, uint32_t buffer[8])
+static int xscale_load_ic(struct target *target, uint32_t va, uint32_t buffer[8])
 {
 	uint8_t packet[4];
 	uint8_t cmd;
@@ -736,7 +736,7 @@ static int xscale_load_ic(target_t *target, uint32_t va, uint32_t buffer[8])
 	return jtag_execute_queue();
 }
 
-static int xscale_invalidate_ic_line(target_t *target, uint32_t va)
+static int xscale_invalidate_ic_line(struct target *target, uint32_t va)
 {
 	uint8_t packet[4];
 	uint8_t cmd;
@@ -766,7 +766,7 @@ static int xscale_invalidate_ic_line(target_t *target, uint32_t va)
 	return ERROR_OK;
 }
 
-static int xscale_update_vectors(target_t *target)
+static int xscale_update_vectors(struct target *target)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
 	int i;
@@ -830,7 +830,7 @@ static int xscale_update_vectors(target_t *target)
 	return ERROR_OK;
 }
 
-static int xscale_arch_state(struct target_s *target)
+static int xscale_arch_state(struct target *target)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
 	struct armv4_5_common_s *armv4_5 = &amp;xscale-&gt;armv4_5_common;
@@ -868,7 +868,7 @@ static int xscale_arch_state(struct target_s *target)
 	return ERROR_OK;
 }
 
-static int xscale_poll(target_t *target)
+static int xscale_poll(struct target *target)
 {
 	int retval = ERROR_OK;
 
@@ -908,7 +908,7 @@ static int xscale_poll(target_t *target)
 	return retval;
 }
 
-static int xscale_debug_entry(target_t *target)
+static int xscale_debug_entry(struct target *target)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
 	struct armv4_5_common_s *armv4_5 = &amp;xscale-&gt;armv4_5_common;
@@ -1088,7 +1088,7 @@ static int xscale_debug_entry(target_t *target)
 	return ERROR_OK;
 }
 
-static int xscale_halt(target_t *target)
+static int xscale_halt(struct target *target)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
 
@@ -1122,7 +1122,7 @@ static int xscale_halt(target_t *target)
 	return ERROR_OK;
 }
 
-static int xscale_enable_single_step(struct target_s *target, uint32_t next_pc)
+static int xscale_enable_single_step(struct target *target, uint32_t next_pc)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
 	struct reg *ibcr0 = &amp;xscale-&gt;reg_cache-&gt;reg_list[XSCALE_IBCR0];
@@ -1149,7 +1149,7 @@ static int xscale_enable_single_step(struct target_s *target, uint32_t next_pc)
 	return ERROR_OK;
 }
 
-static int xscale_disable_single_step(struct target_s *target)
+static int xscale_disable_single_step(struct target *target)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
 	struct reg *ibcr0 = &amp;xscale-&gt;reg_cache-&gt;reg_list[XSCALE_IBCR0];
@@ -1161,7 +1161,7 @@ static int xscale_disable_single_step(struct target_s *target)
 	return ERROR_OK;
 }
 
-static void xscale_enable_watchpoints(struct target_s *target)
+static void xscale_enable_watchpoints(struct target *target)
 {
 	struct watchpoint *watchpoint = target-&gt;watchpoints;
 
@@ -1173,7 +1173,7 @@ static void xscale_enable_watchpoints(struct target_s *target)
 	}
 }
 
-static void xscale_enable_breakpoints(struct target_s *target)
+static void xscale_enable_breakpoints(struct target *target)
 {
 	struct breakpoint *breakpoint = target-&gt;breakpoints;
 
@@ -1186,7 +1186,7 @@ static void xscale_enable_breakpoints(struct target_s *target)
 	}
 }
 
-static int xscale_resume(struct target_s *target, int current,
+static int xscale_resume(struct target *target, int current,
 		uint32_t address, int handle_breakpoints, int debug_execution)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
@@ -1339,7 +1339,7 @@ static int xscale_resume(struct target_s *target, int current,
 	return ERROR_OK;
 }
 
-static int xscale_step_inner(struct target_s *target, int current,
+static int xscale_step_inner(struct target *target, int current,
 		uint32_t address, int handle_breakpoints)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
@@ -1419,7 +1419,7 @@ static int xscale_step_inner(struct target_s *target, int current,
 	return ERROR_OK;
 }
 
-static int xscale_step(struct target_s *target, int current,
+static int xscale_step(struct target *target, int current,
 		uint32_t address, int handle_breakpoints)
 {
 	struct armv4_5_common_s *armv4_5 = target_to_armv4_5(target);
@@ -1474,7 +1474,7 @@ static int xscale_step(struct target_s *target, int current,
 
 }
 
-static int xscale_assert_reset(target_t *target)
+static int xscale_assert_reset(struct target *target)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
 
@@ -1515,7 +1515,7 @@ static int xscale_assert_reset(target_t *target)
 	return ERROR_OK;
 }
 
-static int xscale_deassert_reset(target_t *target)
+static int xscale_deassert_reset(struct target *target)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
 	struct breakpoint *breakpoint = target-&gt;breakpoints;
@@ -1649,21 +1649,21 @@ static int xscale_deassert_reset(target_t *target)
 	return ERROR_OK;
 }
 
-static int xscale_read_core_reg(struct target_s *target, int num,
+static int xscale_read_core_reg(struct target *target, int num,
 		enum armv4_5_mode mode)
 {
 	LOG_ERROR(&quot;not implemented&quot;);
 	return ERROR_OK;
 }
 
-static int xscale_write_core_reg(struct target_s *target, int num,
+static int xscale_write_core_reg(struct target *target, int num,
 		enum armv4_5_mode mode, uint32_t value)
 {
 	LOG_ERROR(&quot;not implemented&quot;);
 	return ERROR_OK;
 }
 
-static int xscale_full_context(target_t *target)
+static int xscale_full_context(struct target *target)
 {
 	struct armv4_5_common_s *armv4_5 = target_to_armv4_5(target);
 
@@ -1739,7 +1739,7 @@ static int xscale_full_context(target_t *target)
 	return ERROR_OK;
 }
 
-static int xscale_restore_context(target_t *target)
+static int xscale_restore_context(struct target *target)
 {
 	struct armv4_5_common_s *armv4_5 = target_to_armv4_5(target);
 
@@ -1806,7 +1806,7 @@ static int xscale_restore_context(target_t *target)
 	return ERROR_OK;
 }
 
-static int xscale_read_memory(struct target_s *target, uint32_t address,
+static int xscale_read_memory(struct target *target, uint32_t address,
 		uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
@@ -1885,7 +1885,7 @@ static int xscale_read_memory(struct target_s *target, uint32_t address,
 	return ERROR_OK;
 }
 
-static int xscale_write_memory(struct target_s *target, uint32_t address,
+static int xscale_write_memory(struct target *target, uint32_t address,
 		uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
@@ -1963,13 +1963,13 @@ static int xscale_write_memory(struct target_s *target, uint32_t address,
 	return ERROR_OK;
 }
 
-static int xscale_bulk_write_memory(target_t *target, uint32_t address,
+static int xscale_bulk_write_memory(struct target *target, uint32_t address,
 		uint32_t count, uint8_t *buffer)
 {
 	return xscale_write_memory(target, address, 4, count, buffer);
 }
 
-static uint32_t xscale_get_ttb(target_t *target)
+static uint32_t xscale_get_ttb(struct target *target)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
 	uint32_t ttb;
@@ -1980,7 +1980,7 @@ static uint32_t xscale_get_ttb(target_t *target)
 	return ttb;
 }
 
-static void xscale_disable_mmu_caches(target_t *target, int mmu,
+static void xscale_disable_mmu_caches(struct target *target, int mmu,
 		int d_u_cache, int i_cache)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
@@ -2019,7 +2019,7 @@ static void xscale_disable_mmu_caches(target_t *target, int mmu,
 	xscale_send_u32(target, 0x53);
 }
 
-static void xscale_enable_mmu_caches(target_t *target, int mmu,
+static void xscale_enable_mmu_caches(struct target *target, int mmu,
 		int d_u_cache, int i_cache)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
@@ -2045,7 +2045,7 @@ static void xscale_enable_mmu_caches(target_t *target, int mmu,
 	xscale_send_u32(target, 0x53);
 }
 
-static int xscale_set_breakpoint(struct target_s *target,
+static int xscale_set_breakpoint(struct target *target,
 		struct breakpoint *breakpoint)
 {
 	int retval;
@@ -2118,7 +2118,7 @@ static int xscale_set_breakpoint(struct target_s *target,
 	return ERROR_OK;
 }
 
-static int xscale_add_breakpoint(struct target_s *target,
+static int xscale_add_breakpoint(struct target *target,
 		struct breakpoint *breakpoint)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
@@ -2149,7 +2149,7 @@ static int xscale_add_breakpoint(struct target_s *target,
 	return ERROR_OK;
 }
 
-static int xscale_unset_breakpoint(struct target_s *target,
+static int xscale_unset_breakpoint(struct target *target,
 		struct breakpoint *breakpoint)
 {
 	int retval;
@@ -2204,7 +2204,7 @@ static int xscale_unset_breakpoint(struct target_s *target,
 	return ERROR_OK;
 }
 
-static int xscale_remove_breakpoint(struct target_s *target, struct breakpoint *breakpoint)
+static int xscale_remove_breakpoint(struct target *target, struct breakpoint *breakpoint)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
 
@@ -2225,7 +2225,7 @@ static int xscale_remove_breakpoint(struct target_s *target, struct breakpoint *
 	return ERROR_OK;
 }
 
-static int xscale_set_watchpoint(struct target_s *target,
+static int xscale_set_watchpoint(struct target *target,
 		struct watchpoint *watchpoint)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
@@ -2281,7 +2281,7 @@ static int xscale_set_watchpoint(struct target_s *target,
 	return ERROR_OK;
 }
 
-static int xscale_add_watchpoint(struct target_s *target,
+static int xscale_add_watchpoint(struct target *target,
 		struct watchpoint *watchpoint)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
@@ -2307,7 +2307,7 @@ static int xscale_add_watchpoint(struct target_s *target,
 	return ERROR_OK;
 }
 
-static int xscale_unset_watchpoint(struct target_s *target,
+static int xscale_unset_watchpoint(struct target *target,
 		struct watchpoint *watchpoint)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
@@ -2343,7 +2343,7 @@ static int xscale_unset_watchpoint(struct target_s *target,
 	return ERROR_OK;
 }
 
-static int xscale_remove_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
+static int xscale_remove_watchpoint(struct target *target, struct watchpoint *watchpoint)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
 
@@ -2366,7 +2366,7 @@ static int xscale_remove_watchpoint(struct target_s *target, struct watchpoint *
 static int xscale_get_reg(struct reg *reg)
 {
 	struct xscale_reg *arch_info = reg-&gt;arch_info;
-	target_t *target = arch_info-&gt;target;
+	struct target *target = arch_info-&gt;target;
 	struct xscale_common *xscale = target_to_xscale(target);
 
 	/* DCSR, TX and RX are accessible via JTAG */
@@ -2411,7 +2411,7 @@ static int xscale_get_reg(struct reg *reg)
 static int xscale_set_reg(struct reg *reg, uint8_t* buf)
 {
 	struct xscale_reg *arch_info = reg-&gt;arch_info;
-	target_t *target = arch_info-&gt;target;
+	struct target *target = arch_info-&gt;target;
 	struct xscale_common *xscale = target_to_xscale(target);
 	uint32_t value = buf_get_u32(buf, 0, 32);
 
@@ -2452,7 +2452,7 @@ static int xscale_set_reg(struct reg *reg, uint8_t* buf)
 	return ERROR_OK;
 }
 
-static int xscale_write_dcsr_sw(target_t *target, uint32_t value)
+static int xscale_write_dcsr_sw(struct target *target, uint32_t value)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
 	struct reg *dcsr = &amp;xscale-&gt;reg_cache-&gt;reg_list[XSCALE_DCSR];
@@ -2471,7 +2471,7 @@ static int xscale_write_dcsr_sw(target_t *target, uint32_t value)
 	return ERROR_OK;
 }
 
-static int xscale_read_trace(target_t *target)
+static int xscale_read_trace(struct target *target)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
 	struct armv4_5_common_s *armv4_5 = &amp;xscale-&gt;armv4_5_common;
@@ -2549,7 +2549,7 @@ static int xscale_read_trace(target_t *target)
 	return ERROR_OK;
 }
 
-static int xscale_read_instruction(target_t *target,
+static int xscale_read_instruction(struct target *target,
 		struct arm_instruction *instruction)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
@@ -2630,7 +2630,7 @@ static int xscale_branch_address(struct xscale_trace_data *trace_data,
 	return 0;
 }
 
-static int xscale_analyze_trace(target_t *target, command_context_t *cmd_ctx)
+static int xscale_analyze_trace(struct target *target, command_context_t *cmd_ctx)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
 	int next_pc_ok = 0;
@@ -2817,7 +2817,7 @@ static int xscale_analyze_trace(target_t *target, command_context_t *cmd_ctx)
 	return ERROR_OK;
 }
 
-static void xscale_build_reg_cache(target_t *target)
+static void xscale_build_reg_cache(struct target *target)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
 	struct armv4_5_common_s *armv4_5 = &amp;xscale-&gt;armv4_5_common;
@@ -2861,13 +2861,13 @@ static void xscale_build_reg_cache(target_t *target)
 }
 
 static int xscale_init_target(struct command_context_s *cmd_ctx,
-		struct target_s *target)
+		struct target *target)
 {
 	xscale_build_reg_cache(target);
 	return ERROR_OK;
 }
 
-static int xscale_init_arch_info(target_t *target,
+static int xscale_init_arch_info(struct target *target,
 		struct xscale_common *xscale, struct jtag_tap *tap, const char *variant)
 {
 	struct arm *armv4_5;
@@ -2972,7 +2972,7 @@ static int xscale_init_arch_info(target_t *target,
 	return ERROR_OK;
 }
 
-static int xscale_target_create(struct target_s *target, Jim_Interp *interp)
+static int xscale_target_create(struct target *target, Jim_Interp *interp)
 {
 	struct xscale_common *xscale;
 
@@ -2991,7 +2991,7 @@ static int xscale_target_create(struct target_s *target, Jim_Interp *interp)
 
 COMMAND_HANDLER(xscale_handle_debug_handler_command)
 {
-	target_t *target = NULL;
+	struct target *target = NULL;
 	struct xscale_common *xscale;
 	int retval;
 	uint32_t handler_address;
@@ -3031,7 +3031,7 @@ COMMAND_HANDLER(xscale_handle_debug_handler_command)
 
 COMMAND_HANDLER(xscale_handle_cache_clean_address_command)
 {
-	target_t *target = NULL;
+	struct target *target = NULL;
 	struct xscale_common *xscale;
 	int retval;
 	uint32_t cache_clean_address;
@@ -3068,7 +3068,7 @@ COMMAND_HANDLER(xscale_handle_cache_clean_address_command)
 
 COMMAND_HANDLER(xscale_handle_cache_info_command)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct xscale_common *xscale = target_to_xscale(target);
 	int retval;
 
@@ -3079,7 +3079,7 @@ COMMAND_HANDLER(xscale_handle_cache_info_command)
 	return armv4_5_handle_cache_info_command(cmd_ctx, &amp;xscale-&gt;armv4_5_mmu.armv4_5_cache);
 }
 
-static int xscale_virt2phys(struct target_s *target,
+static int xscale_virt2phys(struct target *target,
 		uint32_t virtual, uint32_t *physical)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
@@ -3102,7 +3102,7 @@ static int xscale_virt2phys(struct target_s *target,
 	return ERROR_OK;
 }
 
-static int xscale_mmu(struct target_s *target, int *enabled)
+static int xscale_mmu(struct target *target, int *enabled)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
 
@@ -3117,7 +3117,7 @@ static int xscale_mmu(struct target_s *target, int *enabled)
 
 COMMAND_HANDLER(xscale_handle_mmu_command)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct xscale_common *xscale = target_to_xscale(target);
 	int retval;
 
@@ -3152,7 +3152,7 @@ COMMAND_HANDLER(xscale_handle_mmu_command)
 
 COMMAND_HANDLER(xscale_handle_idcache_command)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct xscale_common *xscale = target_to_xscale(target);
 	int icache = 0, dcache = 0;
 	int retval;
@@ -3205,7 +3205,7 @@ COMMAND_HANDLER(xscale_handle_idcache_command)
 
 COMMAND_HANDLER(xscale_handle_vector_catch_command)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct xscale_common *xscale = target_to_xscale(target);
 	int retval;
 
@@ -3232,7 +3232,7 @@ COMMAND_HANDLER(xscale_handle_vector_catch_command)
 
 COMMAND_HANDLER(xscale_handle_vector_table_command)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct xscale_common *xscale = target_to_xscale(target);
 	int err = 0;
 	int retval;
@@ -3290,7 +3290,7 @@ COMMAND_HANDLER(xscale_handle_vector_table_command)
 
 COMMAND_HANDLER(xscale_handle_trace_buffer_command)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct xscale_common *xscale = target_to_xscale(target);
 	struct armv4_5_common_s *armv4_5 = &amp;xscale-&gt;armv4_5_common;
 	uint32_t dcsr_value;
@@ -3369,7 +3369,7 @@ COMMAND_HANDLER(xscale_handle_trace_buffer_command)
 
 COMMAND_HANDLER(xscale_handle_trace_image_command)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct xscale_common *xscale = target_to_xscale(target);
 	int retval;
 
@@ -3417,7 +3417,7 @@ COMMAND_HANDLER(xscale_handle_trace_image_command)
 
 COMMAND_HANDLER(xscale_handle_dump_trace_command)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct xscale_common *xscale = target_to_xscale(target);
 	struct xscale_trace_data *trace_data;
 	struct fileio file;
@@ -3474,7 +3474,7 @@ COMMAND_HANDLER(xscale_handle_dump_trace_command)
 
 COMMAND_HANDLER(xscale_handle_analyze_trace_buffer_command)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct xscale_common *xscale = target_to_xscale(target);
 	int retval;
 
@@ -3489,7 +3489,7 @@ COMMAND_HANDLER(xscale_handle_analyze_trace_buffer_command)
 
 COMMAND_HANDLER(xscale_handle_cp15)
 {
-	target_t *target = get_current_target(cmd_ctx);
+	struct target *target = get_current_target(cmd_ctx);
 	struct xscale_common *xscale = target_to_xscale(target);
 	int retval;
 
diff --git a/src/target/xscale.h b/src/target/xscale.h
index 9f25327..4f1b54d 100644
--- a/src/target/xscale.h
+++ b/src/target/xscale.h
@@ -132,7 +132,7 @@ struct xscale_common
 };
 
 static inline struct xscale_common *
-target_to_xscale(struct target_s *target)
+target_to_xscale(struct target *target)
 {
 	return container_of(target-&gt;arch_info, struct xscale_common,
 			armv4_5_common);
@@ -141,7 +141,7 @@ target_to_xscale(struct target_s *target)
 struct xscale_reg
 {
 	int dbg_handler_number;
-	target_t *target;
+	struct target *target;
 };
 
 enum

commit d0dee7ccafcf87259fadf6c5de43df8583b0e885
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 09:55:49 2009 -0800

    reg_t -&gt; struct reg
    
    Remove misleading typedef and redundant suffix from struct reg.

diff --git a/src/server/gdb_server.c b/src/server/gdb_server.c
index 732f68b..85855d9 100644
--- a/src/server/gdb_server.c
+++ b/src/server/gdb_server.c
@@ -863,7 +863,7 @@ static int gdb_reg_pos(target_t *target, int pos, int len)
  * The format of reg-&gt;value is little endian
  *
  */
-void gdb_str_to_target(target_t *target, char *tstr, reg_t *reg)
+void gdb_str_to_target(target_t *target, char *tstr, struct reg *reg)
 {
 	int i;
 
@@ -917,7 +917,7 @@ void gdb_target_to_reg(target_t *target, char *tstr, int str_len, uint8_t *bin)
 
 int gdb_get_registers_packet(struct connection *connection, target_t *target, char* packet, int packet_size)
 {
-	reg_t **reg_list;
+	struct reg **reg_list;
 	int reg_list_size;
 	int retval;
 	int reg_packet_size = 0;
@@ -968,7 +968,7 @@ int gdb_get_registers_packet(struct connection *connection, target_t *target, ch
 int gdb_set_registers_packet(struct connection *connection, target_t *target, char *packet, int packet_size)
 {
 	int i;
-	reg_t **reg_list;
+	struct reg **reg_list;
 	int reg_list_size;
 	int retval;
 	char *packet_p;
@@ -1019,7 +1019,7 @@ int gdb_set_registers_packet(struct connection *connection, target_t *target, ch
 		free(bin_buf);
 	}
 
-	/* free reg_t *reg_list[] array allocated by get_gdb_reg_list */
+	/* free struct reg *reg_list[] array allocated by get_gdb_reg_list */
 	free(reg_list);
 
 	gdb_put_packet(connection, &quot;OK&quot;, 2);
@@ -1031,7 +1031,7 @@ int gdb_get_register_packet(struct connection *connection, target_t *target, cha
 {
 	char *reg_packet;
 	int reg_num = strtoul(packet + 1, NULL, 16);
-	reg_t **reg_list;
+	struct reg **reg_list;
 	int reg_list_size;
 	int retval;
 
@@ -1067,7 +1067,7 @@ int gdb_set_register_packet(struct connection *connection, target_t *target, cha
 	char *separator;
 	uint8_t *bin_buf;
 	int reg_num = strtoul(packet + 1, &amp;separator, 16);
-	reg_t **reg_list;
+	struct reg **reg_list;
 	int reg_list_size;
 	int retval;
 	struct reg_arch_type *arch_type;
diff --git a/src/target/arm11.c b/src/target/arm11.c
index 22925c8..0b1b9c0 100644
--- a/src/target/arm11.c
+++ b/src/target/arm11.c
@@ -248,14 +248,14 @@ enum arm11_regcache_ids
 
 static uint8_t arm11_gdb_dummy_fp_value[] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0};
 
-static reg_t arm11_gdb_dummy_fp_reg =
+static struct reg arm11_gdb_dummy_fp_reg =
 {
 	&quot;GDB dummy floating-point register&quot;, arm11_gdb_dummy_fp_value, 0, 1, 96, NULL, 0, NULL, 0
 };
 
 static uint8_t arm11_gdb_dummy_fps_value[] = {0, 0, 0, 0};
 
-static reg_t arm11_gdb_dummy_fps_reg =
+static struct reg arm11_gdb_dummy_fps_reg =
 {
 	&quot;GDB dummy floating-point status register&quot;, arm11_gdb_dummy_fps_value, 0, 1, 32, NULL, 0, NULL, 0
 };
@@ -266,8 +266,8 @@ static int arm11_step(struct target_s *target, int current,
 		uint32_t address, int handle_breakpoints);
 /* helpers */
 static int arm11_build_reg_cache(target_t *target);
-static int arm11_set_reg(reg_t *reg, uint8_t *buf);
-static int arm11_get_reg(reg_t *reg);
+static int arm11_set_reg(struct reg *reg, uint8_t *buf);
+static int arm11_get_reg(struct reg *reg);
 
 static void arm11_record_register_history(struct arm11_common * arm11);
 static void arm11_dump_reg_changes(struct arm11_common * arm11);
@@ -1245,14 +1245,14 @@ static int arm11_soft_reset_halt(struct target_s *target)
 
 /* target register access for gdb */
 static int arm11_get_gdb_reg_list(struct target_s *target,
-		struct reg_s **reg_list[], int *reg_list_size)
+		struct reg **reg_list[], int *reg_list_size)
 {
 	FNC_INFO;
 
 	struct arm11_common * arm11 = target-&gt;arch_info;
 
 	*reg_list_size	= ARM11_GDB_REGISTER_COUNT;
-	*reg_list		= malloc(sizeof(reg_t*) * ARM11_GDB_REGISTER_COUNT);
+	*reg_list		= malloc(sizeof(struct reg*) * ARM11_GDB_REGISTER_COUNT);
 
 	for (size_t i = 16; i &lt; 24; i++)
 	{
@@ -1657,7 +1657,7 @@ static int arm11_run_algorithm(struct target_s *target,
 	// Set register parameters
 	for (int i = 0; i &lt; num_reg_params; i++)
 	{
-		reg_t *reg = register_get_by_name(arm11-&gt;core_cache, reg_params[i].reg_name, 0);
+		struct reg *reg = register_get_by_name(arm11-&gt;core_cache, reg_params[i].reg_name, 0);
 		if (!reg)
 		{
 			LOG_ERROR(&quot;BUG: register '%s' not found&quot;, reg_params[i].reg_name);
@@ -1742,7 +1742,7 @@ static int arm11_run_algorithm(struct target_s *target,
 	{
 		if (reg_params[i].direction != PARAM_OUT)
 		{
-			reg_t *reg = register_get_by_name(arm11-&gt;core_cache, reg_params[i].reg_name, 0);
+			struct reg *reg = register_get_by_name(arm11-&gt;core_cache, reg_params[i].reg_name, 0);
 			if (!reg)
 			{
 				LOG_ERROR(&quot;BUG: register '%s' not found&quot;, reg_params[i].reg_name);
@@ -1891,7 +1891,7 @@ static int arm11_examine(struct target_s *target)
 
 
 /** Load a register that is marked !valid in the register cache */
-static int arm11_get_reg(reg_t *reg)
+static int arm11_get_reg(struct reg *reg)
 {
 	FNC_INFO;
 
@@ -1914,7 +1914,7 @@ static int arm11_get_reg(reg_t *reg)
 }
 
 /** Change a value in the register cache */
-static int arm11_set_reg(reg_t *reg, uint8_t *buf)
+static int arm11_set_reg(struct reg *reg, uint8_t *buf)
 {
 	FNC_INFO;
 
@@ -1934,7 +1934,7 @@ static int arm11_build_reg_cache(target_t *target)
 	struct arm11_common *arm11 = target-&gt;arch_info;
 
 	NEW(struct reg_cache,		cache,				1);
-	NEW(reg_t,				reg_list,			ARM11_REGCACHE_COUNT);
+	NEW(struct reg,				reg_list,			ARM11_REGCACHE_COUNT);
 	NEW(struct arm11_reg_state,	arm11_reg_states,	ARM11_REGCACHE_COUNT);
 
 	if (arm11_regs_arch_type == -1)
@@ -1970,7 +1970,7 @@ static int arm11_build_reg_cache(target_t *target)
 
 	for (i = 0; i &lt; ARM11_REGCACHE_COUNT; i++)
 	{
-		reg_t *						r	= reg_list			+ i;
+		struct reg *						r	= reg_list			+ i;
 		const struct arm11_reg_defs *	rd	= arm11_reg_defs	+ i;
 		struct arm11_reg_state *			rs	= arm11_reg_states	+ i;
 
diff --git a/src/target/arm11.h b/src/target/arm11.h
index b397709..6bc1a25 100644
--- a/src/target/arm11.h
+++ b/src/target/arm11.h
@@ -104,7 +104,7 @@ struct arm11_common
 	/** \name Shadow registers to save processor state */
 	/*@{*/
 
-	reg_t *	reg_list;							/**&lt; target register list */
+	struct reg *	reg_list;							/**&lt; target register list */
 	uint32_t		reg_values[ARM11_REGCACHE_COUNT];	/**&lt; data for registers */
 
 	/*@}*/
diff --git a/src/target/arm720t.c b/src/target/arm720t.c
index b258e2f..7f2b403 100644
--- a/src/target/arm720t.c
+++ b/src/target/arm720t.c
@@ -304,7 +304,7 @@ static int arm720t_soft_reset_halt(struct target_s *target)
 {
 	int retval = ERROR_OK;
 	struct arm720t_common *arm720t = target_to_arm720(target);
-	reg_t *dbg_stat = &amp;arm720t-&gt;arm7tdmi_common.arm7_9_common
+	struct reg *dbg_stat = &amp;arm720t-&gt;arm7tdmi_common.arm7_9_common
 			.eice_cache-&gt;reg_list[EICE_DBG_STAT];
 	struct armv4_5_common_s *armv4_5 = &amp;arm720t-&gt;arm7tdmi_common
 			.arm7_9_common.armv4_5_common;
diff --git a/src/target/arm7_9_common.c b/src/target/arm7_9_common.c
index 9bb7567..0523d82 100644
--- a/src/target/arm7_9_common.c
+++ b/src/target/arm7_9_common.c
@@ -704,7 +704,7 @@ int arm7_9_execute_sys_speed(struct target_s *target)
 	int retval;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
-	reg_t *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
+	struct reg *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
 
 	/* set RESTART instruction */
 	jtag_set_end_state(TAP_IDLE);
@@ -757,7 +757,7 @@ int arm7_9_execute_fast_sys_speed(struct target_s *target)
 
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
-	reg_t *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
+	struct reg *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
 
 	/* set RESTART instruction */
 	jtag_set_end_state(TAP_IDLE);
@@ -834,7 +834,7 @@ int arm7_9_handle_target_request(void *priv)
 		return ERROR_OK;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
-	reg_t *dcc_control = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_COMMS_CTRL];
+	struct reg *dcc_control = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_COMMS_CTRL];
 
 	if (!target-&gt;dbg_msg_enabled)
 		return ERROR_OK;
@@ -891,7 +891,7 @@ int arm7_9_poll(target_t *target)
 {
 	int retval;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	reg_t *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
+	struct reg *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
 
 	/* read debug status register */
 	embeddedice_read_reg(dbg_stat);
@@ -931,7 +931,7 @@ int arm7_9_poll(target_t *target)
 
 			if (check_pc)
 			{
-				reg_t *reg = register_get_by_name(target-&gt;reg_cache, &quot;pc&quot;, 1);
+				struct reg *reg = register_get_by_name(target-&gt;reg_cache, &quot;pc&quot;, 1);
 				uint32_t t=*((uint32_t *)reg-&gt;value);
 				if (t != 0)
 				{
@@ -1115,7 +1115,7 @@ int arm7_9_deassert_reset(target_t *target)
 int arm7_9_clear_halt(target_t *target)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	reg_t *dbg_ctrl = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_CTRL];
+	struct reg *dbg_ctrl = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_CTRL];
 
 	/* we used DBGRQ only if we didn't come out of reset */
 	if (!arm7_9-&gt;debug_entry_from_reset &amp;&amp; arm7_9-&gt;use_dbgrq)
@@ -1173,8 +1173,8 @@ int arm7_9_soft_reset_halt(struct target_s *target)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
-	reg_t *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
-	reg_t *dbg_ctrl = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_CTRL];
+	struct reg *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
+	struct reg *dbg_ctrl = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_CTRL];
 	int i;
 	int retval;
 
@@ -1291,7 +1291,7 @@ int arm7_9_halt(target_t *target)
 	}
 
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	reg_t *dbg_ctrl = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_CTRL];
+	struct reg *dbg_ctrl = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_CTRL];
 
 	LOG_DEBUG(&quot;target-&gt;state: %s&quot;,
 		  target_state_name(target));
@@ -1354,8 +1354,8 @@ int arm7_9_debug_entry(target_t *target)
 	int retval;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
-	reg_t *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
-	reg_t *dbg_ctrl = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_CTRL];
+	struct reg *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
+	struct reg *dbg_ctrl = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_CTRL];
 
 #ifdef _DEBUG_ARM7_9_
 	LOG_DEBUG(&quot;-&quot;);
@@ -1599,7 +1599,7 @@ int arm7_9_restore_context(target_t *target)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
-	reg_t *reg;
+	struct reg *reg;
 	struct armv4_5_core_reg *reg_arch_info;
 	enum armv4_5_mode current_mode = armv4_5-&gt;core_mode;
 	int i, j;
@@ -1803,7 +1803,7 @@ int arm7_9_resume(struct target_s *target, int current, uint32_t address, int ha
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
 	struct breakpoint *breakpoint = target-&gt;breakpoints;
-	reg_t *dbg_ctrl = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_CTRL];
+	struct reg *dbg_ctrl = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_CTRL];
 	int err, retval = ERROR_OK;
 
 	LOG_DEBUG(&quot;-&quot;);
@@ -2409,7 +2409,7 @@ int arm7_9_write_memory(struct target_s *target, uint32_t address, uint32_t size
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
-	reg_t *dbg_ctrl = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_CTRL];
+	struct reg *dbg_ctrl = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_CTRL];
 
 	uint32_t reg[16];
 	uint32_t num_accesses = 0;
diff --git a/src/target/arm7tdmi.c b/src/target/arm7tdmi.c
index aea012d..1beae89 100644
--- a/src/target/arm7tdmi.c
+++ b/src/target/arm7tdmi.c
@@ -582,7 +582,7 @@ static void arm7tdmi_branch_resume_thumb(target_t *target)
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
-	reg_t *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
+	struct reg *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
 
 	LOG_DEBUG(&quot;-&quot;);
 
diff --git a/src/target/arm920t.c b/src/target/arm920t.c
index 32f4a2f..0173550 100644
--- a/src/target/arm920t.c
+++ b/src/target/arm920t.c
@@ -555,7 +555,7 @@ int arm920t_soft_reset_halt(struct target_s *target)
 	struct arm920t_common *arm920t = target_to_arm920(target);
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
-	reg_t *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
+	struct reg *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
 
 	if ((retval = target_halt(target)) != ERROR_OK)
 	{
diff --git a/src/target/arm926ejs.c b/src/target/arm926ejs.c
index fd8e0b6..7d37590 100644
--- a/src/target/arm926ejs.c
+++ b/src/target/arm926ejs.c
@@ -232,7 +232,7 @@ static int arm926ejs_mcr(target_t *target, int cpnum, uint32_t op1,
 static int arm926ejs_examine_debug_reason(target_t *target)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	reg_t *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
+	struct reg *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
 	int debug_reason;
 	int retval;
 
@@ -524,7 +524,7 @@ int arm926ejs_soft_reset_halt(struct target_s *target)
 	struct arm926ejs_common *arm926ejs = target_to_arm926(target);
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
-	reg_t *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
+	struct reg *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
 
 	if ((retval = target_halt(target)) != ERROR_OK)
 	{
diff --git a/src/target/arm9tdmi.c b/src/target/arm9tdmi.c
index 1edb626..0c390df 100644
--- a/src/target/arm9tdmi.c
+++ b/src/target/arm9tdmi.c
@@ -651,7 +651,7 @@ static void arm9tdmi_branch_resume_thumb(target_t *target)
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
-	reg_t *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
+	struct reg *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
 
 	/* LDMIA r0-15, [r0] at debug speed
 	* register values will start to appear on 4th DCLK
@@ -860,7 +860,7 @@ COMMAND_HANDLER(handle_arm9tdmi_catch_vectors_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	reg_t *vector_catch;
+	struct reg *vector_catch;
 	uint32_t vector_catch_value;
 
 	/* it's uncommon, but some ARM7 chips can support this */
diff --git a/src/target/armv4_5.c b/src/target/armv4_5.c
index 4040623..02105e5 100644
--- a/src/target/armv4_5.c
+++ b/src/target/armv4_5.c
@@ -155,19 +155,19 @@ int armv4_5_core_reg_map[7][17] =
 
 uint8_t armv4_5_gdb_dummy_fp_value[] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0};
 
-reg_t armv4_5_gdb_dummy_fp_reg =
+struct reg armv4_5_gdb_dummy_fp_reg =
 {
 	&quot;GDB dummy floating-point register&quot;, armv4_5_gdb_dummy_fp_value, 0, 1, 96, NULL, 0, NULL, 0
 };
 
 uint8_t armv4_5_gdb_dummy_fps_value[] = {0, 0, 0, 0};
 
-reg_t armv4_5_gdb_dummy_fps_reg =
+struct reg armv4_5_gdb_dummy_fps_reg =
 {
 	&quot;GDB dummy floating-point status register&quot;, armv4_5_gdb_dummy_fps_value, 0, 1, 32, NULL, 0, NULL, 0
 };
 
-int armv4_5_get_core_reg(reg_t *reg)
+int armv4_5_get_core_reg(struct reg *reg)
 {
 	int retval;
 	struct armv4_5_core_reg *armv4_5 = reg-&gt;arch_info;
@@ -185,7 +185,7 @@ int armv4_5_get_core_reg(reg_t *reg)
 	return retval;
 }
 
-int armv4_5_set_core_reg(reg_t *reg, uint8_t *buf)
+int armv4_5_set_core_reg(struct reg *reg, uint8_t *buf)
 {
 	struct armv4_5_core_reg *armv4_5 = reg-&gt;arch_info;
 	target_t *target = armv4_5-&gt;target;
@@ -253,7 +253,7 @@ struct reg_cache* armv4_5_build_reg_cache(target_t *target, struct arm *armv4_5_
 {
 	int num_regs = 37;
 	struct reg_cache *cache = malloc(sizeof(struct reg_cache));
-	reg_t *reg_list = malloc(sizeof(reg_t) * num_regs);
+	struct reg *reg_list = malloc(sizeof(struct reg) * num_regs);
 	struct armv4_5_core_reg *arch_info = malloc(sizeof(struct armv4_5_core_reg) * num_regs);
 	int i;
 
@@ -483,7 +483,7 @@ int armv4_5_register_commands(struct command_context_s *cmd_ctx)
 	return ERROR_OK;
 }
 
-int armv4_5_get_gdb_reg_list(target_t *target, reg_t **reg_list[], int *reg_list_size)
+int armv4_5_get_gdb_reg_list(target_t *target, struct reg **reg_list[], int *reg_list_size)
 {
 	struct armv4_5_common_s *armv4_5 = target_to_armv4_5(target);
 	int i;
@@ -492,7 +492,7 @@ int armv4_5_get_gdb_reg_list(target_t *target, reg_t **reg_list[], int *reg_list
 		return ERROR_FAIL;
 
 	*reg_list_size = 26;
-	*reg_list = malloc(sizeof(reg_t*) * (*reg_list_size));
+	*reg_list = malloc(sizeof(struct reg*) * (*reg_list_size));
 
 	for (i = 0; i &lt; 16; i++)
 	{
@@ -596,7 +596,7 @@ int armv4_5_run_algorithm_inner(struct target_s *target, int num_mem_params, str
 
 	for (i = 0; i &lt; num_reg_params; i++)
 	{
-		reg_t *reg = register_get_by_name(armv4_5-&gt;core_cache, reg_params[i].reg_name, 0);
+		struct reg *reg = register_get_by_name(armv4_5-&gt;core_cache, reg_params[i].reg_name, 0);
 		if (!reg)
 		{
 			LOG_ERROR(&quot;BUG: register '%s' not found&quot;, reg_params[i].reg_name);
@@ -669,7 +669,7 @@ int armv4_5_run_algorithm_inner(struct target_s *target, int num_mem_params, str
 		if (reg_params[i].direction != PARAM_OUT)
 		{
 
-			reg_t *reg = register_get_by_name(armv4_5-&gt;core_cache, reg_params[i].reg_name, 0);
+			struct reg *reg = register_get_by_name(armv4_5-&gt;core_cache, reg_params[i].reg_name, 0);
 			if (!reg)
 			{
 				LOG_ERROR(&quot;BUG: register '%s' not found&quot;, reg_params[i].reg_name);
diff --git a/src/target/armv4_5.h b/src/target/armv4_5.h
index 9823f4e..16fb85d 100644
--- a/src/target/armv4_5.h
+++ b/src/target/armv4_5.h
@@ -177,7 +177,7 @@ static __inline enum armv4_5_mode armv4_5_number_to_mode(int number)
 
 int armv4_5_arch_state(struct target_s *target);
 int armv4_5_get_gdb_reg_list(target_t *target,
-		reg_t **reg_list[], int *reg_list_size);
+		struct reg **reg_list[], int *reg_list_size);
 
 int armv4_5_register_commands(struct command_context_s *cmd_ctx);
 int armv4_5_init_arch_info(target_t *target, struct arm *armv4_5);
diff --git a/src/target/armv7a.c b/src/target/armv7a.c
index efe3d36..ead5b9c 100644
--- a/src/target/armv7a.c
+++ b/src/target/armv7a.c
@@ -167,7 +167,7 @@ int armv7a_core_reg_map[8][17] =
 
 uint8_t armv7a_gdb_dummy_fp_value[] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0};
 
-reg_t armv7a_gdb_dummy_fp_reg =
+struct reg armv7a_gdb_dummy_fp_reg =
 {
 	&quot;GDB dummy floating-point register&quot;, armv7a_gdb_dummy_fp_value,
 			0, 1, 96, NULL, 0, NULL, 0
diff --git a/src/target/armv7m.c b/src/target/armv7m.c
index 4a6869f..2969803 100644
--- a/src/target/armv7m.c
+++ b/src/target/armv7m.c
@@ -61,14 +61,14 @@ static uint8_t armv7m_gdb_dummy_fp_value[12] = {
 	0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
 };
 
-static reg_t armv7m_gdb_dummy_fp_reg =
+static struct reg armv7m_gdb_dummy_fp_reg =
 {
 	&quot;GDB dummy floating-point register&quot;, armv7m_gdb_dummy_fp_value, 0, 1, 96, NULL, 0, NULL, 0
 };
 
 static uint8_t armv7m_gdb_dummy_fps_value[] = {0, 0, 0, 0};
 
-static reg_t armv7m_gdb_dummy_fps_reg =
+static struct reg armv7m_gdb_dummy_fps_reg =
 {
 	&quot;GDB dummy floating-point status register&quot;, armv7m_gdb_dummy_fps_value, 0, 1, 32, NULL, 0, NULL, 0
 };
@@ -76,7 +76,7 @@ static reg_t armv7m_gdb_dummy_fps_reg =
 #ifdef ARMV7_GDB_HACKS
 uint8_t armv7m_gdb_dummy_cpsr_value[] = {0, 0, 0, 0};
 
-reg_t armv7m_gdb_dummy_cpsr_reg =
+struct reg armv7m_gdb_dummy_cpsr_reg =
 {
 	&quot;GDB dummy cpsr register&quot;, armv7m_gdb_dummy_cpsr_value, 0, 1, 32, NULL, 0, NULL, 0
 };
@@ -178,7 +178,7 @@ char *armv7m_exception_string(int number)
 	return enamebuf;
 }
 
-static int armv7m_get_core_reg(reg_t *reg)
+static int armv7m_get_core_reg(struct reg *reg)
 {
 	int retval;
 	struct armv7m_core_reg *armv7m_reg = reg-&gt;arch_info;
@@ -195,7 +195,7 @@ static int armv7m_get_core_reg(reg_t *reg)
 	return retval;
 }
 
-static int armv7m_set_core_reg(reg_t *reg, uint8_t *buf)
+static int armv7m_set_core_reg(struct reg *reg, uint8_t *buf)
 {
 	struct armv7m_core_reg *armv7m_reg = reg-&gt;arch_info;
 	target_t *target = armv7m_reg-&gt;target;
@@ -279,13 +279,13 @@ int armv7m_invalidate_core_regs(target_t *target)
  * hardware, so this also fakes a set of long-obsolete FPA registers that
  * are not used in EABI based software stacks.
  */
-int armv7m_get_gdb_reg_list(target_t *target, reg_t **reg_list[], int *reg_list_size)
+int armv7m_get_gdb_reg_list(target_t *target, struct reg **reg_list[], int *reg_list_size)
 {
 	struct armv7m_common *armv7m = target_to_armv7m(target);
 	int i;
 
 	*reg_list_size = 26;
-	*reg_list = malloc(sizeof(reg_t*) * (*reg_list_size));
+	*reg_list = malloc(sizeof(struct reg*) * (*reg_list_size));
 
 	/*
 	 * GDB register packet format for ARM:
@@ -398,7 +398,7 @@ int armv7m_run_algorithm(struct target_s *target,
 
 	for (i = 0; i &lt; num_reg_params; i++)
 	{
-		reg_t *reg = register_get_by_name(armv7m-&gt;core_cache, reg_params[i].reg_name, 0);
+		struct reg *reg = register_get_by_name(armv7m-&gt;core_cache, reg_params[i].reg_name, 0);
 //		uint32_t regvalue;
 
 		if (!reg)
@@ -462,7 +462,7 @@ int armv7m_run_algorithm(struct target_s *target,
 	{
 		if (reg_params[i].direction != PARAM_OUT)
 		{
-			reg_t *reg = register_get_by_name(armv7m-&gt;core_cache, reg_params[i].reg_name, 0);
+			struct reg *reg = register_get_by_name(armv7m-&gt;core_cache, reg_params[i].reg_name, 0);
 
 			if (!reg)
 			{
@@ -530,7 +530,7 @@ struct reg_cache *armv7m_build_reg_cache(target_t *target)
 	int num_regs = ARMV7M_NUM_REGS;
 	struct reg_cache **cache_p = register_get_last_cache_p(&amp;target-&gt;reg_cache);
 	struct reg_cache *cache = malloc(sizeof(struct reg_cache));
-	reg_t *reg_list = calloc(num_regs, sizeof(reg_t));
+	struct reg *reg_list = calloc(num_regs, sizeof(struct reg));
 	struct armv7m_core_reg *arch_info = calloc(num_regs, sizeof(struct armv7m_core_reg));
 	int i;
 
diff --git a/src/target/armv7m.h b/src/target/armv7m.h
index 2f4fbdb..60f4cba 100644
--- a/src/target/armv7m.h
+++ b/src/target/armv7m.h
@@ -140,7 +140,7 @@ int armv7m_mode_to_number(enum armv7m_mode mode);
 
 int armv7m_arch_state(struct target_s *target);
 int armv7m_get_gdb_reg_list(target_t *target,
-		reg_t **reg_list[], int *reg_list_size);
+		struct reg **reg_list[], int *reg_list_size);
 
 int armv7m_register_commands(struct command_context_s *cmd_ctx);
 int armv7m_init_arch_info(target_t *target, struct armv7m_common *armv7m);
diff --git a/src/target/cortex_m3.c b/src/target/cortex_m3.c
index 9f9016d..58c3d8f 100644
--- a/src/target/cortex_m3.c
+++ b/src/target/cortex_m3.c
@@ -53,7 +53,7 @@ static int cortex_m3_store_core_reg_u32(target_t *target,
 
 #ifdef ARMV7_GDB_HACKS
 extern uint8_t armv7m_gdb_dummy_cpsr_value[];
-extern reg_t armv7m_gdb_dummy_cpsr_reg;
+extern struct reg armv7m_gdb_dummy_cpsr_reg;
 #endif
 
 static int cortexm3_dap_read_coreregister_u32(struct swjdp_common *swjdp,
@@ -1453,14 +1453,14 @@ struct dwt_reg_state {
 	uint32_t	value;	/* scratch/cache */
 };
 
-static int cortex_m3_dwt_get_reg(struct reg_s *reg)
+static int cortex_m3_dwt_get_reg(struct reg *reg)
 {
 	struct dwt_reg_state *state = reg-&gt;arch_info;
 
 	return target_read_u32(state-&gt;target, state-&gt;addr, &amp;state-&gt;value);
 }
 
-static int cortex_m3_dwt_set_reg(struct reg_s *reg, uint8_t *buf)
+static int cortex_m3_dwt_set_reg(struct reg *reg, uint8_t *buf)
 {
 	struct dwt_reg_state *state = reg-&gt;arch_info;
 
@@ -1495,7 +1495,7 @@ static struct dwt_reg dwt_comp[] = {
 static int dwt_reg_type = -1;
 
 static void
-cortex_m3_dwt_addreg(struct target_s *t, struct reg_s *r, struct dwt_reg *d)
+cortex_m3_dwt_addreg(struct target_s *t, struct reg *r, struct dwt_reg *d)
 {
 	struct dwt_reg_state *state;
 
diff --git a/src/target/embeddedice.c b/src/target/embeddedice.c
index 4d93981..21195f7 100644
--- a/src/target/embeddedice.c
+++ b/src/target/embeddedice.c
@@ -146,7 +146,7 @@ static const struct {
 
 static int embeddedice_reg_arch_type = -1;
 
-static int embeddedice_get_reg(reg_t *reg)
+static int embeddedice_get_reg(struct reg *reg)
 {
 	int retval;
 
@@ -168,7 +168,7 @@ embeddedice_build_reg_cache(target_t *target, struct arm7_9_common *arm7_9)
 {
 	int retval;
 	struct reg_cache *reg_cache = malloc(sizeof(struct reg_cache));
-	reg_t *reg_list = NULL;
+	struct reg *reg_list = NULL;
 	struct embeddedice_reg *arch_info = NULL;
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	int num_regs = ARRAY_SIZE(eice_regs);
@@ -185,7 +185,7 @@ embeddedice_build_reg_cache(target_t *target, struct arm7_9_common *arm7_9)
 		num_regs--;
 
 	/* the actual registers are kept in two arrays */
-	reg_list = calloc(num_regs, sizeof(reg_t));
+	reg_list = calloc(num_regs, sizeof(struct reg));
 	arch_info = calloc(num_regs, sizeof(struct embeddedice_reg));
 
 	/* fill in values for the reg cache */
@@ -312,7 +312,7 @@ int embeddedice_setup(target_t *target)
 	 */
 	if (arm7_9-&gt;has_monitor_mode)
 	{
-		reg_t *dbg_ctrl = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_CTRL];
+		struct reg *dbg_ctrl = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_CTRL];
 
 		embeddedice_read_reg(dbg_ctrl);
 		if ((retval = jtag_execute_queue()) != ERROR_OK)
@@ -328,7 +328,7 @@ int embeddedice_setup(target_t *target)
  * optionally checking the value read.
  * Note that at this level, all registers are 32 bits wide.
  */
-int embeddedice_read_reg_w_check(reg_t *reg,
+int embeddedice_read_reg_w_check(struct reg *reg,
 		uint8_t *check_value, uint8_t *check_mask)
 {
 	struct embeddedice_reg *ice_reg = reg-&gt;arch_info;
@@ -449,7 +449,7 @@ int embeddedice_receive(struct arm_jtag *jtag_info, uint32_t *data, uint32_t siz
  * Queue a read for an EmbeddedICE register into the register cache,
  * not checking the value read.
  */
-int embeddedice_read_reg(reg_t *reg)
+int embeddedice_read_reg(struct reg *reg)
 {
 	return embeddedice_read_reg_w_check(reg, NULL, NULL);
 }
@@ -458,7 +458,7 @@ int embeddedice_read_reg(reg_t *reg)
  * Queue a write for an EmbeddedICE register, updating the register cache.
  * Uses embeddedice_write_reg().
  */
-void embeddedice_set_reg(reg_t *reg, uint32_t value)
+void embeddedice_set_reg(struct reg *reg, uint32_t value)
 {
 	embeddedice_write_reg(reg, value);
 
@@ -472,7 +472,7 @@ void embeddedice_set_reg(reg_t *reg, uint32_t value)
  * Write an EmbeddedICE register, updating the register cache.
  * Uses embeddedice_set_reg(); not queued.
  */
-int embeddedice_set_reg_w_exec(reg_t *reg, uint8_t *buf)
+int embeddedice_set_reg_w_exec(struct reg *reg, uint8_t *buf)
 {
 	int retval;
 
@@ -485,7 +485,7 @@ int embeddedice_set_reg_w_exec(reg_t *reg, uint8_t *buf)
 /**
  * Queue a write for an EmbeddedICE register, bypassing the register cache.
  */
-void embeddedice_write_reg(reg_t *reg, uint32_t value)
+void embeddedice_write_reg(struct reg *reg, uint32_t value)
 {
 	struct embeddedice_reg *ice_reg = reg-&gt;arch_info;
 
@@ -504,7 +504,7 @@ void embeddedice_write_reg(reg_t *reg, uint32_t value)
  * Queue a write for an EmbeddedICE register, using cached value.
  * Uses embeddedice_write_reg().
  */
-void embeddedice_store_reg(reg_t *reg)
+void embeddedice_store_reg(struct reg *reg)
 {
 	embeddedice_write_reg(reg, buf_get_u32(reg-&gt;value, 0, reg-&gt;size));
 }
diff --git a/src/target/embeddedice.h b/src/target/embeddedice.h
index 47ef3d9..23673f9 100644
--- a/src/target/embeddedice.h
+++ b/src/target/embeddedice.h
@@ -98,15 +98,15 @@ struct reg_cache* embeddedice_build_reg_cache(target_t *target,
 
 int embeddedice_setup(target_t *target);
 
-int embeddedice_read_reg(reg_t *reg);
-int embeddedice_read_reg_w_check(reg_t *reg,
+int embeddedice_read_reg(struct reg *reg);
+int embeddedice_read_reg_w_check(struct reg *reg,
 		uint8_t* check_value, uint8_t* check_mask);
 
-void embeddedice_write_reg(reg_t *reg, uint32_t value);
-void embeddedice_store_reg(reg_t *reg);
+void embeddedice_write_reg(struct reg *reg, uint32_t value);
+void embeddedice_store_reg(struct reg *reg);
 
-void embeddedice_set_reg(reg_t *reg, uint32_t value);
-int embeddedice_set_reg_w_exec(reg_t *reg, uint8_t *buf);
+void embeddedice_set_reg(struct reg *reg, uint32_t value);
+int embeddedice_set_reg_w_exec(struct reg *reg, uint8_t *buf);
 
 int embeddedice_receive(struct arm_jtag *jtag_info, uint32_t *data, uint32_t size);
 int embeddedice_send(struct arm_jtag *jtag_info, uint32_t *data, uint32_t size);
diff --git a/src/target/etb.c b/src/target/etb.c
index 6f9562a..c1c7f4b 100644
--- a/src/target/etb.c
+++ b/src/target/etb.c
@@ -40,7 +40,7 @@ static char* etb_reg_list[] =
 
 static int etb_reg_arch_type = -1;
 
-static int etb_get_reg(reg_t *reg);
+static int etb_get_reg(struct reg *reg);
 
 static int etb_set_instr(struct etb *etb, uint32_t new_instr)
 {
@@ -94,15 +94,15 @@ static int etb_scann(struct etb *etb, uint32_t new_scan_chain)
 	return ERROR_OK;
 }
 
-static int etb_read_reg_w_check(reg_t *, uint8_t *, uint8_t *);
-static int etb_set_reg_w_exec(reg_t *, uint8_t *);
+static int etb_read_reg_w_check(struct reg *, uint8_t *, uint8_t *);
+static int etb_set_reg_w_exec(struct reg *, uint8_t *);
 
-static int etb_read_reg(reg_t *reg)
+static int etb_read_reg(struct reg *reg)
 {
 	return etb_read_reg_w_check(reg, NULL, NULL);
 }
 
-static int etb_get_reg(reg_t *reg)
+static int etb_get_reg(struct reg *reg)
 {
 	int retval;
 
@@ -124,7 +124,7 @@ static int etb_get_reg(reg_t *reg)
 struct reg_cache* etb_build_reg_cache(struct etb *etb)
 {
 	struct reg_cache *reg_cache = malloc(sizeof(struct reg_cache));
-	reg_t *reg_list = NULL;
+	struct reg *reg_list = NULL;
 	struct etb_reg *arch_info = NULL;
 	int num_regs = 9;
 	int i;
@@ -134,7 +134,7 @@ struct reg_cache* etb_build_reg_cache(struct etb *etb)
 		etb_reg_arch_type = register_reg_arch_type(etb_get_reg, etb_set_reg_w_exec);
 
 	/* the actual registers are kept in two arrays */
-	reg_list = calloc(num_regs, sizeof(reg_t));
+	reg_list = calloc(num_regs, sizeof(struct reg));
 	arch_info = calloc(num_regs, sizeof(struct etb_reg));
 
 	/* fill in values for the reg cache */
@@ -224,7 +224,7 @@ static int etb_read_ram(struct etb *etb, uint32_t *data, int num_frames)
 	return ERROR_OK;
 }
 
-static int etb_read_reg_w_check(reg_t *reg,
+static int etb_read_reg_w_check(struct reg *reg,
 		uint8_t* check_value, uint8_t* check_mask)
 {
 	struct etb_reg *etb_reg = reg-&gt;arch_info;
@@ -278,9 +278,9 @@ static int etb_read_reg_w_check(reg_t *reg,
 	return ERROR_OK;
 }
 
-static int etb_write_reg(reg_t *, uint32_t);
+static int etb_write_reg(struct reg *, uint32_t);
 
-static int etb_set_reg(reg_t *reg, uint32_t value)
+static int etb_set_reg(struct reg *reg, uint32_t value)
 {
 	int retval;
 
@@ -297,7 +297,7 @@ static int etb_set_reg(reg_t *reg, uint32_t value)
 	return ERROR_OK;
 }
 
-static int etb_set_reg_w_exec(reg_t *reg, uint8_t *buf)
+static int etb_set_reg_w_exec(struct reg *reg, uint8_t *buf)
 {
 	int retval;
 
@@ -311,7 +311,7 @@ static int etb_set_reg_w_exec(reg_t *reg, uint8_t *buf)
 	return ERROR_OK;
 }
 
-static int etb_write_reg(reg_t *reg, uint32_t value)
+static int etb_write_reg(struct reg *reg, uint32_t value)
 {
 	struct etb_reg *etb_reg = reg-&gt;arch_info;
 	uint8_t reg_addr = etb_reg-&gt;addr &amp; 0x7f;
@@ -435,8 +435,8 @@ static int etb_init(struct etm_context *etm_ctx)
 static trace_status_t etb_status(struct etm_context *etm_ctx)
 {
 	struct etb *etb = etm_ctx-&gt;capture_driver_priv;
-	reg_t *control = &amp;etb-&gt;reg_cache-&gt;reg_list[ETB_CTRL];
-	reg_t *status = &amp;etb-&gt;reg_cache-&gt;reg_list[ETB_STATUS];
+	struct reg *control = &amp;etb-&gt;reg_cache-&gt;reg_list[ETB_CTRL];
+	struct reg *status = &amp;etb-&gt;reg_cache-&gt;reg_list[ETB_STATUS];
 	trace_status_t retval = 0;
 	int etb_timeout = 100;
 
@@ -671,7 +671,7 @@ static int etb_start_capture(struct etm_context *etm_ctx)
 static int etb_stop_capture(struct etm_context *etm_ctx)
 {
 	struct etb *etb = etm_ctx-&gt;capture_driver_priv;
-	reg_t *etb_ctrl_reg = &amp;etb-&gt;reg_cache-&gt;reg_list[ETB_CTRL];
+	struct reg *etb_ctrl_reg = &amp;etb-&gt;reg_cache-&gt;reg_list[ETB_CTRL];
 
 	etb_write_reg(etb_ctrl_reg, 0x0);
 	jtag_execute_queue();
diff --git a/src/target/etm.c b/src/target/etm.c
index 667eb5b..0aa1a73 100644
--- a/src/target/etm.c
+++ b/src/target/etm.c
@@ -216,12 +216,12 @@ static const struct etm_reg_info etm_outputs[] = {
 
 static int etm_reg_arch_type = -1;
 
-static int etm_get_reg(reg_t *reg);
-static int etm_read_reg_w_check(reg_t *reg,
+static int etm_get_reg(struct reg *reg);
+static int etm_read_reg_w_check(struct reg *reg,
 		uint8_t* check_value, uint8_t* check_mask);
 static int etm_register_user_commands(struct command_context_s *cmd_ctx);
-static int etm_set_reg_w_exec(reg_t *reg, uint8_t *buf);
-static int etm_write_reg(reg_t *reg, uint32_t value);
+static int etm_set_reg_w_exec(struct reg *reg, uint8_t *buf);
+static int etm_write_reg(struct reg *reg, uint32_t value);
 
 static command_t *etm_cmd;
 
@@ -229,7 +229,7 @@ static command_t *etm_cmd;
 /* Look up register by ID ... most ETM instances only
  * support a subset of the possible registers.
  */
-static reg_t *etm_reg_lookup(struct etm_context *etm_ctx, unsigned id)
+static struct reg *etm_reg_lookup(struct etm_context *etm_ctx, unsigned id)
 {
 	struct reg_cache *cache = etm_ctx-&gt;reg_cache;
 	int i;
@@ -251,7 +251,7 @@ static void etm_reg_add(unsigned bcd_vers, struct arm_jtag *jtag_info,
 		struct reg_cache *cache, struct etm_reg *ereg,
 		const struct etm_reg_info *r, unsigned nreg)
 {
-	reg_t *reg = cache-&gt;reg_list;
+	struct reg *reg = cache-&gt;reg_list;
 
 	reg += cache-&gt;num_regs;
 	ereg += cache-&gt;num_regs;
@@ -283,7 +283,7 @@ struct reg_cache *etm_build_reg_cache(target_t *target,
 		struct arm_jtag *jtag_info, struct etm_context *etm_ctx)
 {
 	struct reg_cache *reg_cache = malloc(sizeof(struct reg_cache));
-	reg_t *reg_list = NULL;
+	struct reg *reg_list = NULL;
 	struct etm_reg *arch_info = NULL;
 	unsigned bcd_vers, config;
 
@@ -293,7 +293,7 @@ struct reg_cache *etm_build_reg_cache(target_t *target,
 				etm_set_reg_w_exec);
 
 	/* the actual registers are kept in two arrays */
-	reg_list = calloc(128, sizeof(reg_t));
+	reg_list = calloc(128, sizeof(struct reg));
 	arch_info = calloc(128, sizeof(struct etm_reg));
 
 	/* fill in values for the reg cache */
@@ -411,12 +411,12 @@ struct reg_cache *etm_build_reg_cache(target_t *target,
 	return reg_cache;
 }
 
-static int etm_read_reg(reg_t *reg)
+static int etm_read_reg(struct reg *reg)
 {
 	return etm_read_reg_w_check(reg, NULL, NULL);
 }
 
-static int etm_store_reg(reg_t *reg)
+static int etm_store_reg(struct reg *reg)
 {
 	return etm_write_reg(reg, buf_get_u32(reg-&gt;value, 0, reg-&gt;size));
 }
@@ -427,7 +427,7 @@ int etm_setup(target_t *target)
 	uint32_t etm_ctrl_value;
 	struct arm *arm = target_to_arm(target);
 	struct etm_context *etm_ctx = arm-&gt;etm;
-	reg_t *etm_ctrl_reg;
+	struct reg *etm_ctrl_reg;
 
 	etm_ctrl_reg = etm_reg_lookup(etm_ctx, ETM_CTRL);
 	if (!etm_ctrl_reg)
@@ -467,7 +467,7 @@ int etm_setup(target_t *target)
 	return ERROR_OK;
 }
 
-static int etm_get_reg(reg_t *reg)
+static int etm_get_reg(struct reg *reg)
 {
 	int retval;
 
@@ -486,7 +486,7 @@ static int etm_get_reg(reg_t *reg)
 	return ERROR_OK;
 }
 
-static int etm_read_reg_w_check(reg_t *reg,
+static int etm_read_reg_w_check(struct reg *reg,
 		uint8_t* check_value, uint8_t* check_mask)
 {
 	struct etm_reg *etm_reg = reg-&gt;arch_info;
@@ -542,7 +542,7 @@ static int etm_read_reg_w_check(reg_t *reg,
 	return ERROR_OK;
 }
 
-static int etm_set_reg(reg_t *reg, uint32_t value)
+static int etm_set_reg(struct reg *reg, uint32_t value)
 {
 	int retval;
 
@@ -559,7 +559,7 @@ static int etm_set_reg(reg_t *reg, uint32_t value)
 	return ERROR_OK;
 }
 
-static int etm_set_reg_w_exec(reg_t *reg, uint8_t *buf)
+static int etm_set_reg_w_exec(struct reg *reg, uint8_t *buf)
 {
 	int retval;
 
@@ -573,7 +573,7 @@ static int etm_set_reg_w_exec(reg_t *reg, uint8_t *buf)
 	return ERROR_OK;
 }
 
-static int etm_write_reg(reg_t *reg, uint32_t value)
+static int etm_write_reg(struct reg *reg, uint32_t value)
 {
 	struct etm_reg *etm_reg = reg-&gt;arch_info;
 	const struct etm_reg_info *r = etm_reg-&gt;reg_info;
@@ -1340,7 +1340,7 @@ COMMAND_HANDLER(handle_etm_tracemode_command)
 	/* only update ETM_CTRL register if tracemode changed */
 	if (etm-&gt;tracemode != tracemode)
 	{
-		reg_t *etm_ctrl_reg;
+		struct reg *etm_ctrl_reg;
 
 		etm_ctrl_reg = etm_reg_lookup(etm, ETM_CTRL);
 		if (!etm_ctrl_reg)
@@ -1524,7 +1524,7 @@ COMMAND_HANDLER(handle_etm_info_command)
 	target_t *target;
 	struct arm *arm;
 	struct etm_context *etm;
-	reg_t *etm_sys_config_reg;
+	struct reg *etm_sys_config_reg;
 	int max_port_size;
 	uint32_t config;
 
@@ -1675,7 +1675,7 @@ COMMAND_HANDLER(handle_etm_status_command)
 
 	/* ETM status */
 	if (etm-&gt;bcd_vers &gt;= 0x11) {
-		reg_t *reg;
+		struct reg *reg;
 
 		reg = etm_reg_lookup(etm, ETM_STATUS);
 		if (!reg)
@@ -1984,7 +1984,7 @@ COMMAND_HANDLER(handle_etm_start_command)
 	target_t *target;
 	struct arm *arm;
 	struct etm_context *etm_ctx;
-	reg_t *etm_ctrl_reg;
+	struct reg *etm_ctrl_reg;
 
 	target = get_current_target(cmd_ctx);
 	arm = target_to_arm(target);
@@ -2032,7 +2032,7 @@ COMMAND_HANDLER(handle_etm_stop_command)
 	target_t *target;
 	struct arm *arm;
 	struct etm_context *etm_ctx;
-	reg_t *etm_ctrl_reg;
+	struct reg *etm_ctrl_reg;
 
 	target = get_current_target(cmd_ctx);
 	arm = target_to_arm(target);
diff --git a/src/target/feroceon.c b/src/target/feroceon.c
index 73292e1..41769d6 100644
--- a/src/target/feroceon.c
+++ b/src/target/feroceon.c
@@ -406,7 +406,7 @@ void feroceon_set_dbgrq(target_t *target)
 {
 	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
-	reg_t *dbg_ctrl = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_CTRL];
+	struct reg *dbg_ctrl = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_CTRL];
 
 	buf_set_u32(dbg_ctrl-&gt;value, 0, 8, 2);
 	embeddedice_store_reg(dbg_ctrl);
diff --git a/src/target/mips32.c b/src/target/mips32.c
index ddc27a6..c9ef138 100644
--- a/src/target/mips32.c
+++ b/src/target/mips32.c
@@ -88,14 +88,14 @@ struct mips32_core_reg mips32_core_reg_list_arch_info[MIPS32NUMCOREREGS] =
 
 uint8_t mips32_gdb_dummy_fp_value[] = {0, 0, 0, 0};
 
-reg_t mips32_gdb_dummy_fp_reg =
+struct reg mips32_gdb_dummy_fp_reg =
 {
 	&quot;GDB dummy floating-point register&quot;, mips32_gdb_dummy_fp_value, 0, 1, 32, NULL, 0, NULL, 0
 };
 
 int mips32_core_reg_arch_type = -1;
 
-int mips32_get_core_reg(reg_t *reg)
+int mips32_get_core_reg(struct reg *reg)
 {
 	int retval;
 	struct mips32_core_reg *mips32_reg = reg-&gt;arch_info;
@@ -112,7 +112,7 @@ int mips32_get_core_reg(reg_t *reg)
 	return retval;
 }
 
-int mips32_set_core_reg(reg_t *reg, uint8_t *buf)
+int mips32_set_core_reg(struct reg *reg, uint8_t *buf)
 {
 	struct mips32_core_reg *mips32_reg = reg-&gt;arch_info;
 	target_t *target = mips32_reg-&gt;target;
@@ -186,7 +186,7 @@ int mips32_invalidate_core_regs(target_t *target)
 	return ERROR_OK;
 }
 
-int mips32_get_gdb_reg_list(target_t *target, reg_t **reg_list[], int *reg_list_size)
+int mips32_get_gdb_reg_list(target_t *target, struct reg **reg_list[], int *reg_list_size)
 {
 	/* get pointers to arch-specific information */
 	struct mips32_common *mips32 = target-&gt;arch_info;
@@ -194,7 +194,7 @@ int mips32_get_gdb_reg_list(target_t *target, reg_t **reg_list[], int *reg_list_
 
 	/* include floating point registers */
 	*reg_list_size = MIPS32NUMCOREREGS + MIPS32NUMFPREGS;
-	*reg_list = malloc(sizeof(reg_t*) * (*reg_list_size));
+	*reg_list = malloc(sizeof(struct reg*) * (*reg_list_size));
 
 	for (i = 0; i &lt; MIPS32NUMCOREREGS; i++)
 	{
@@ -279,7 +279,7 @@ struct reg_cache *mips32_build_reg_cache(target_t *target)
 	int num_regs = MIPS32NUMCOREREGS;
 	struct reg_cache **cache_p = register_get_last_cache_p(&amp;target-&gt;reg_cache);
 	struct reg_cache *cache = malloc(sizeof(struct reg_cache));
-	reg_t *reg_list = malloc(sizeof(reg_t) * num_regs);
+	struct reg *reg_list = malloc(sizeof(struct reg) * num_regs);
 	struct mips32_core_reg *arch_info = malloc(sizeof(struct mips32_core_reg) * num_regs);
 	int i;
 
diff --git a/src/target/mips32.h b/src/target/mips32.h
index 7cecb75..3b4f642 100644
--- a/src/target/mips32.h
+++ b/src/target/mips32.h
@@ -150,6 +150,6 @@ int mips32_register_commands(struct command_context_s *cmd_ctx);
 
 int mips32_invalidate_core_regs(target_t *target);
 int mips32_get_gdb_reg_list(target_t *target,
-		reg_t **reg_list[], int *reg_list_size);
+		struct reg **reg_list[], int *reg_list_size);
 
 #endif	/*MIPS32_H*/
diff --git a/src/target/register.c b/src/target/register.c
index c3ad830..f26835b 100644
--- a/src/target/register.c
+++ b/src/target/register.c
@@ -30,7 +30,7 @@
 
 struct reg_arch_type *reg_arch_types = NULL;
 
-reg_t* register_get_by_name(struct reg_cache *first,
+struct reg* register_get_by_name(struct reg_cache *first,
 		const char *name, bool search_all)
 {
 	int i;
@@ -66,7 +66,7 @@ struct reg_cache** register_get_last_cache_p(struct reg_cache **first)
 	return cache_p;
 }
 
-int register_reg_arch_type(int (*get)(reg_t *reg), int (*set)(reg_t *reg, uint8_t *buf))
+int register_reg_arch_type(int (*get)(struct reg *reg), int (*set)(struct reg *reg, uint8_t *buf))
 {
 	struct reg_arch_type** arch_type_p = &amp;reg_arch_types;
 	int id = 0;
@@ -104,12 +104,12 @@ struct reg_arch_type* register_get_arch_type(int id)
 	return NULL;
 }
 
-static int register_get_dummy_core_reg(reg_t *reg)
+static int register_get_dummy_core_reg(struct reg *reg)
 {
 	return ERROR_OK;
 }
 
-static int register_set_dummy_core_reg(reg_t *reg, uint8_t *buf)
+static int register_set_dummy_core_reg(struct reg *reg, uint8_t *buf)
 {
 	reg-&gt;dirty = 1;
 	reg-&gt;valid = 1;
@@ -117,7 +117,7 @@ static int register_set_dummy_core_reg(reg_t *reg, uint8_t *buf)
 	return ERROR_OK;
 }
 
-void register_init_dummy(reg_t *reg)
+void register_init_dummy(struct reg *reg)
 {
 	static int dummy_arch_type = -1;
 	if (dummy_arch_type == -1)
diff --git a/src/target/register.h b/src/target/register.h
index 57342ba..ca8866b 100644
--- a/src/target/register.h
+++ b/src/target/register.h
@@ -33,7 +33,7 @@ struct bitfield_desc
 	int num_bits;
 };
 
-typedef struct reg_s
+struct reg
 {
 	char *name;
 	void *value;
@@ -44,32 +44,32 @@ typedef struct reg_s
 	int num_bitfields;
 	void *arch_info;
 	int arch_type;
-} reg_t;
+};
 
 struct reg_cache
 {
 	char *name;
 	struct reg_cache *next;
-	reg_t *reg_list;
+	struct reg *reg_list;
 	int num_regs;
 };
 
 struct reg_arch_type
 {
 	int id;
-	int (*get)(reg_t *reg);
-	int (*set)(reg_t *reg, uint8_t *buf);
+	int (*get)(struct reg *reg);
+	int (*set)(struct reg *reg, uint8_t *buf);
 	struct reg_arch_type *next;
 };
 
-reg_t* register_get_by_name(struct reg_cache *first,
+struct reg* register_get_by_name(struct reg_cache *first,
 		const char *name, bool search_all);
 struct reg_cache** register_get_last_cache_p(struct reg_cache **first);
 
-int register_reg_arch_type(int (*get)(reg_t *reg),
-		int (*set)(reg_t *reg, uint8_t *buf));
+int register_reg_arch_type(int (*get)(struct reg *reg),
+		int (*set)(struct reg *reg, uint8_t *buf));
 struct reg_arch_type* register_get_arch_type(int id);
 
-void register_init_dummy(reg_t *reg);
+void register_init_dummy(struct reg *reg);
 
 #endif /* REGISTER_H */
diff --git a/src/target/target.c b/src/target/target.c
index 16497b4..0cba285 100644
--- a/src/target/target.c
+++ b/src/target/target.c
@@ -622,7 +622,7 @@ int target_remove_watchpoint(struct target_s *target,
 }
 
 int target_get_gdb_reg_list(struct target_s *target,
-		struct reg_s **reg_list[], int *reg_list_size)
+		struct reg **reg_list[], int *reg_list_size)
 {
 	return target-&gt;type-&gt;get_gdb_reg_list(target, reg_list, reg_list_size);
 }
@@ -1865,7 +1865,7 @@ int handle_target(void *priv)
 COMMAND_HANDLER(handle_reg_command)
 {
 	target_t *target;
-	reg_t *reg = NULL;
+	struct reg *reg = NULL;
 	int count = 0;
 	char *value;
 
@@ -3042,7 +3042,7 @@ COMMAND_HANDLER(handle_profile_command)
 
 	int numSamples = 0;
 	/* hopefully it is safe to cache! We want to stop/restart as quickly as possible. */
-	reg_t *reg = register_get_by_name(target-&gt;reg_cache, &quot;pc&quot;, 1);
+	struct reg *reg = register_get_by_name(target-&gt;reg_cache, &quot;pc&quot;, 1);
 
 	for (;;)
 	{
diff --git a/src/target/target.h b/src/target/target.h
index 50e8c62..b2c908a 100644
--- a/src/target/target.h
+++ b/src/target/target.h
@@ -32,7 +32,7 @@
 #include &quot;algorithm.h&quot;
 #include &quot;command.h&quot;
 
-struct reg_s;
+struct reg;
 struct trace;
 struct command_context_s;
 
@@ -339,7 +339,7 @@ int target_remove_watchpoint(struct target_s *target,
  * This routine is a wrapper for target-&gt;type-&gt;get_gdb_reg_list.
  */
 int target_get_gdb_reg_list(struct target_s *target,
-		struct reg_s **reg_list[], int *reg_list_size);
+		struct reg **reg_list[], int *reg_list_size);
 
 /**
  * Step the target.
diff --git a/src/target/target_type.h b/src/target/target_type.h
index 98d8665..37e438d 100644
--- a/src/target/target_type.h
+++ b/src/target/target_type.h
@@ -91,7 +91,7 @@ struct target_type
 	 * list, however it is after GDB is connected that monitor commands can
 	 * be run to properly initialize the target
 	 */
-	int (*get_gdb_reg_list)(struct target_s *target, struct reg_s **reg_list[], int *reg_list_size);
+	int (*get_gdb_reg_list)(struct target_s *target, struct reg **reg_list[], int *reg_list_size);
 
 	/* target memory access
 	* size: 1 = byte (8bit), 2 = half-word (16bit), 4 = word (32bit)
diff --git a/src/target/xscale.c b/src/target/xscale.c
index 33dd356..e757271 100644
--- a/src/target/xscale.c
+++ b/src/target/xscale.c
@@ -61,8 +61,8 @@ static int xscale_resume(struct target_s *, int current,
 	uint32_t address, int handle_breakpoints, int debug_execution);
 static int xscale_debug_entry(target_t *);
 static int xscale_restore_context(target_t *);
-static int xscale_get_reg(reg_t *reg);
-static int xscale_set_reg(reg_t *reg, uint8_t *buf);
+static int xscale_get_reg(struct reg *reg);
+static int xscale_set_reg(struct reg *reg, uint8_t *buf);
 static int xscale_set_breakpoint(struct target_s *, struct breakpoint *);
 static int xscale_set_watchpoint(struct target_s *, struct watchpoint *);
 static int xscale_unset_breakpoint(struct target_s *, struct breakpoint *);
@@ -135,7 +135,7 @@ static const struct xscale_reg xscale_reg_arch_info[] =
 static int xscale_reg_arch_type = -1;
 
 /* convenience wrapper to access XScale specific registers */
-static int xscale_set_reg_u32(reg_t *reg, uint32_t value)
+static int xscale_set_reg_u32(struct reg *reg, uint32_t value)
 {
 	uint8_t buf[4];
 
@@ -1125,7 +1125,7 @@ static int xscale_halt(target_t *target)
 static int xscale_enable_single_step(struct target_s *target, uint32_t next_pc)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
-	reg_t *ibcr0 = &amp;xscale-&gt;reg_cache-&gt;reg_list[XSCALE_IBCR0];
+	struct reg *ibcr0 = &amp;xscale-&gt;reg_cache-&gt;reg_list[XSCALE_IBCR0];
 	int retval;
 
 	if (xscale-&gt;ibcr0_used)
@@ -1152,7 +1152,7 @@ static int xscale_enable_single_step(struct target_s *target, uint32_t next_pc)
 static int xscale_disable_single_step(struct target_s *target)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
-	reg_t *ibcr0 = &amp;xscale-&gt;reg_cache-&gt;reg_list[XSCALE_IBCR0];
+	struct reg *ibcr0 = &amp;xscale-&gt;reg_cache-&gt;reg_list[XSCALE_IBCR0];
 	int retval;
 
 	if ((retval = xscale_set_reg_u32(ibcr0, 0x0)) != ERROR_OK)
@@ -2230,7 +2230,7 @@ static int xscale_set_watchpoint(struct target_s *target,
 {
 	struct xscale_common *xscale = target_to_xscale(target);
 	uint8_t enable = 0;
-	reg_t *dbcon = &amp;xscale-&gt;reg_cache-&gt;reg_list[XSCALE_DBCON];
+	struct reg *dbcon = &amp;xscale-&gt;reg_cache-&gt;reg_list[XSCALE_DBCON];
 	uint32_t dbcon_value = buf_get_u32(dbcon-&gt;value, 0, 32);
 
 	if (target-&gt;state != TARGET_HALTED)
@@ -2311,7 +2311,7 @@ static int xscale_unset_watchpoint(struct target_s *target,
 		struct watchpoint *watchpoint)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
-	reg_t *dbcon = &amp;xscale-&gt;reg_cache-&gt;reg_list[XSCALE_DBCON];
+	struct reg *dbcon = &amp;xscale-&gt;reg_cache-&gt;reg_list[XSCALE_DBCON];
 	uint32_t dbcon_value = buf_get_u32(dbcon-&gt;value, 0, 32);
 
 	if (target-&gt;state != TARGET_HALTED)
@@ -2363,7 +2363,7 @@ static int xscale_remove_watchpoint(struct target_s *target, struct watchpoint *
 	return ERROR_OK;
 }
 
-static int xscale_get_reg(reg_t *reg)
+static int xscale_get_reg(struct reg *reg)
 {
 	struct xscale_reg *arch_info = reg-&gt;arch_info;
 	target_t *target = arch_info-&gt;target;
@@ -2408,7 +2408,7 @@ static int xscale_get_reg(reg_t *reg)
 	return ERROR_OK;
 }
 
-static int xscale_set_reg(reg_t *reg, uint8_t* buf)
+static int xscale_set_reg(struct reg *reg, uint8_t* buf)
 {
 	struct xscale_reg *arch_info = reg-&gt;arch_info;
 	target_t *target = arch_info-&gt;target;
@@ -2455,7 +2455,7 @@ static int xscale_set_reg(reg_t *reg, uint8_t* buf)
 static int xscale_write_dcsr_sw(target_t *target, uint32_t value)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
-	reg_t *dcsr = &amp;xscale-&gt;reg_cache-&gt;reg_list[XSCALE_DCSR];
+	struct reg *dcsr = &amp;xscale-&gt;reg_cache-&gt;reg_list[XSCALE_DCSR];
 	struct xscale_reg *dcsr_arch_info = dcsr-&gt;arch_info;
 
 	/* send CP write request (command 0x41) */
@@ -2839,7 +2839,7 @@ static void xscale_build_reg_cache(target_t *target)
 	/* fill in values for the xscale reg cache */
 	(*cache_p)-&gt;name = &quot;XScale registers&quot;;
 	(*cache_p)-&gt;next = NULL;
-	(*cache_p)-&gt;reg_list = malloc(num_regs * sizeof(reg_t));
+	(*cache_p)-&gt;reg_list = malloc(num_regs * sizeof(struct reg));
 	(*cache_p)-&gt;num_regs = num_regs;
 
 	for (i = 0; i &lt; num_regs; i++)
@@ -3503,7 +3503,7 @@ COMMAND_HANDLER(xscale_handle_cp15)
 		return ERROR_OK;
 	}
 	uint32_t reg_no = 0;
-	reg_t *reg = NULL;
+	struct reg *reg = NULL;
 	if (argc &gt; 0)
 	{
 		COMMAND_PARSE_NUMBER(u32, args[0], reg_no);

commit ac927559c3ce5406adac34b9d4ca4ecb37a48181
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 09:52:20 2009 -0800

    target_type_t -&gt; struct target_type
    
    Remove misleading typedef and redundant suffix from struct target_type.

diff --git a/src/ecosboard.c b/src/ecosboard.c
index 8d85fe6..455c93c 100644
--- a/src/ecosboard.c
+++ b/src/ecosboard.c
@@ -115,7 +115,7 @@ char hwaddr[512];
 
 
 extern struct flash_driver *flash_drivers[];
-extern target_type_t *target_types[];
+extern struct target_type *target_types[];
 
 #ifdef CYGPKG_PROFILE_GPROF
 #include &lt;cyg/profile/profile.h&gt;
diff --git a/src/target/arm11.c b/src/target/arm11.c
index 42c33af..22925c8 100644
--- a/src/target/arm11.c
+++ b/src/target/arm11.c
@@ -2197,7 +2197,7 @@ COMMAND_HANDLER(arm11_handle_etmw)
 
 #define ARM11_HANDLER(x)	.x = arm11_##x
 
-target_type_t arm11_target = {
+struct target_type arm11_target = {
 		.name = &quot;arm11&quot;,
 
 		ARM11_HANDLER(poll),
diff --git a/src/target/arm720t.c b/src/target/arm720t.c
index 8ef7114..b258e2f 100644
--- a/src/target/arm720t.c
+++ b/src/target/arm720t.c
@@ -510,7 +510,7 @@ static int arm720t_register_commands(struct command_context_s *cmd_ctx)
 }
 
 /** Holds methods for ARM720 targets. */
-target_type_t arm720t_target =
+struct target_type arm720t_target =
 {
 	.name = &quot;arm720t&quot;,
 
diff --git a/src/target/arm7tdmi.c b/src/target/arm7tdmi.c
index d1509cb..aea012d 100644
--- a/src/target/arm7tdmi.c
+++ b/src/target/arm7tdmi.c
@@ -753,7 +753,7 @@ static int arm7tdmi_target_create(struct target_s *target, Jim_Interp *interp)
 }
 
 /** Holds methods for ARM7TDMI targets. */
-target_type_t arm7tdmi_target =
+struct target_type arm7tdmi_target =
 {
 	.name = &quot;arm7tdmi&quot;,
 
diff --git a/src/target/arm920t.c b/src/target/arm920t.c
index 2fe50a1..32f4a2f 100644
--- a/src/target/arm920t.c
+++ b/src/target/arm920t.c
@@ -1380,7 +1380,7 @@ int arm920t_register_commands(struct command_context_s *cmd_ctx)
 }
 
 /** Holds methods for ARM920 targets. */
-target_type_t arm920t_target =
+struct target_type arm920t_target =
 {
 	.name = &quot;arm920t&quot;,
 
diff --git a/src/target/arm926ejs.c b/src/target/arm926ejs.c
index 9ae19a8..fd8e0b6 100644
--- a/src/target/arm926ejs.c
+++ b/src/target/arm926ejs.c
@@ -842,7 +842,7 @@ int arm926ejs_register_commands(struct command_context_s *cmd_ctx)
 }
 
 /** Holds methods for ARM926 targets. */
-target_type_t arm926ejs_target =
+struct target_type arm926ejs_target =
 {
 	.name = &quot;arm926ejs&quot;,
 
diff --git a/src/target/arm966e.c b/src/target/arm966e.c
index dee9f61..7c46f0f 100644
--- a/src/target/arm966e.c
+++ b/src/target/arm966e.c
@@ -233,7 +233,7 @@ int arm966e_register_commands(struct command_context_s *cmd_ctx)
 }
 
 /** Holds methods for ARM966 targets. */
-target_type_t arm966e_target =
+struct target_type arm966e_target =
 {
 	.name = &quot;arm966e&quot;,
 
diff --git a/src/target/arm9tdmi.c b/src/target/arm9tdmi.c
index c670c45..1edb626 100644
--- a/src/target/arm9tdmi.c
+++ b/src/target/arm9tdmi.c
@@ -953,7 +953,7 @@ int arm9tdmi_register_commands(struct command_context_s *cmd_ctx)
 }
 
 /** Holds methods for ARM9TDMI targets. */
-target_type_t arm9tdmi_target =
+struct target_type arm9tdmi_target =
 {
 	.name = &quot;arm9tdmi&quot;,
 
diff --git a/src/target/avrt.c b/src/target/avrt.c
index d7c7623..ad22c99 100644
--- a/src/target/avrt.c
+++ b/src/target/avrt.c
@@ -59,7 +59,7 @@ int mcu_write_ir_u32(struct jtag_tap *tap, uint32_t *ir_in, uint32_t ir_out, int
 int mcu_write_dr_u32(struct jtag_tap *tap, uint32_t *ir_in, uint32_t ir_out, int dr_len, int rti);
 int mcu_execute_queue(void);
 
-target_type_t avr_target =
+struct target_type avr_target =
 {
 	.name = &quot;avr&quot;,
 
diff --git a/src/target/cortex_a8.c b/src/target/cortex_a8.c
index e1bd2e3..f925311 100644
--- a/src/target/cortex_a8.c
+++ b/src/target/cortex_a8.c
@@ -1569,7 +1569,7 @@ static int cortex_a8_register_commands(struct command_context_s *cmd_ctx)
 	return retval;
 }
 
-target_type_t cortexa8_target = {
+struct target_type cortexa8_target = {
 	.name = &quot;cortex_a8&quot;,
 
 	.poll = cortex_a8_poll,
diff --git a/src/target/cortex_m3.c b/src/target/cortex_m3.c
index bbdc85a..9f9016d 100644
--- a/src/target/cortex_m3.c
+++ b/src/target/cortex_m3.c
@@ -1951,7 +1951,7 @@ static int cortex_m3_register_commands(struct command_context_s *cmd_ctx)
 	return retval;
 }
 
-target_type_t cortexm3_target =
+struct target_type cortexm3_target =
 {
 	.name = &quot;cortex_m3&quot;,
 
diff --git a/src/target/fa526.c b/src/target/fa526.c
index 3b884c6..d9b89f2 100644
--- a/src/target/fa526.c
+++ b/src/target/fa526.c
@@ -358,7 +358,7 @@ static int fa526_target_create(struct target_s *target, Jim_Interp *interp)
 }
 
 /** Holds methods for FA526 targets. */
-target_type_t fa526_target =
+struct target_type fa526_target =
 {
 	.name = &quot;fa526&quot;,
 
diff --git a/src/target/feroceon.c b/src/target/feroceon.c
index cf034c4..73292e1 100644
--- a/src/target/feroceon.c
+++ b/src/target/feroceon.c
@@ -674,7 +674,7 @@ int feroceon_examine(struct target_s *target)
 	return ERROR_OK;
 }
 
-target_type_t feroceon_target =
+struct target_type feroceon_target =
 {
 	.name = &quot;feroceon&quot;,
 
@@ -712,7 +712,7 @@ target_type_t feroceon_target =
 	.examine = feroceon_examine,
 };
 
-target_type_t dragonite_target =
+struct target_type dragonite_target =
 {
 	.name = &quot;dragonite&quot;,
 
diff --git a/src/target/mips_m4k.c b/src/target/mips_m4k.c
index 095260c..9213ae0 100644
--- a/src/target/mips_m4k.c
+++ b/src/target/mips_m4k.c
@@ -48,7 +48,7 @@ int mips_m4k_assert_reset(target_t *target);
 int mips_m4k_deassert_reset(target_t *target);
 int mips_m4k_checksum_memory(target_t *target, uint32_t address, uint32_t size, uint32_t *checksum);
 
-target_type_t mips_m4k_target =
+struct target_type mips_m4k_target =
 {
 	.name = &quot;mips_m4k&quot;,
 
diff --git a/src/target/target.c b/src/target/target.c
index df8496f..16497b4 100644
--- a/src/target/target.c
+++ b/src/target/target.c
@@ -49,23 +49,23 @@ static int target_array2mem(Jim_Interp *interp, target_t *target, int argc, Jim_
 static int target_mem2array(Jim_Interp *interp, target_t *target, int argc, Jim_Obj *const *argv);
 
 /* targets */
-extern target_type_t arm7tdmi_target;
-extern target_type_t arm720t_target;
-extern target_type_t arm9tdmi_target;
-extern target_type_t arm920t_target;
-extern target_type_t arm966e_target;
-extern target_type_t arm926ejs_target;
-extern target_type_t fa526_target;
-extern target_type_t feroceon_target;
-extern target_type_t dragonite_target;
-extern target_type_t xscale_target;
-extern target_type_t cortexm3_target;
-extern target_type_t cortexa8_target;
-extern target_type_t arm11_target;
-extern target_type_t mips_m4k_target;
-extern target_type_t avr_target;
-
-target_type_t *target_types[] =
+extern struct target_type arm7tdmi_target;
+extern struct target_type arm720t_target;
+extern struct target_type arm9tdmi_target;
+extern struct target_type arm920t_target;
+extern struct target_type arm966e_target;
+extern struct target_type arm926ejs_target;
+extern struct target_type fa526_target;
+extern struct target_type feroceon_target;
+extern struct target_type dragonite_target;
+extern struct target_type xscale_target;
+extern struct target_type cortexm3_target;
+extern struct target_type cortexa8_target;
+extern struct target_type arm11_target;
+extern struct target_type mips_m4k_target;
+extern struct target_type avr_target;
+
+struct target_type *target_types[] =
 {
 	&amp;arm7tdmi_target,
 	&amp;arm9tdmi_target,
@@ -760,7 +760,7 @@ int target_init(struct command_context_s *cmd_ctx)
 	int retval;
 
 	for (target = all_targets; target; target = target-&gt;next) {
-		struct target_type_s *type = target-&gt;type;
+		struct target_type *type = target-&gt;type;
 
 		target_reset_examined(target);
 		if (target-&gt;type-&gt;examine == NULL)
@@ -4290,9 +4290,9 @@ static int target_create(Jim_GetOptInfo *goi)
 	target-&gt;target_number = new_target_number();
 
 	/* allocate memory for each unique target type */
-	target-&gt;type = (target_type_t*)calloc(1,sizeof(target_type_t));
+	target-&gt;type = (struct target_type*)calloc(1,sizeof(struct target_type));
 
-	memcpy(target-&gt;type, target_types[x], sizeof(target_type_t));
+	memcpy(target-&gt;type, target_types[x], sizeof(struct target_type));
 
 	/* will be set by &quot;-endian&quot; */
 	target-&gt;endianness = TARGET_ENDIAN_UNKNOWN;
diff --git a/src/target/target.h b/src/target/target.h
index 3eafc18..50e8c62 100644
--- a/src/target/target.h
+++ b/src/target/target.h
@@ -124,13 +124,10 @@ struct working_area
 	struct working_area *next;
 };
 
-// target_type.h contains the full definitionof struct target_type_s
-struct target_type_s;
-typedef struct target_type_s target_type_t;
-
+// target_type.h contains the full definitionof struct target_type
 typedef struct target_s
 {
-	target_type_t *type;				/* target type definition (name, access functions) */
+	struct target_type *type;				/* target type definition (name, access functions) */
 	const char *cmd_name;				/* tcl Name of target */
 	int target_number;					/* DO NOT USE!  field to be removed in 2010 */
 	struct jtag_tap *tap;					/* where on the jtag chain is this */
diff --git a/src/target/target_type.h b/src/target/target_type.h
index 3328879..98d8665 100644
--- a/src/target/target_type.h
+++ b/src/target/target_type.h
@@ -30,7 +30,7 @@
 
 struct target_s;
 
-struct target_type_s
+struct target_type
 {
 	/**
 	 * Name of the target.  Do @b not access this field directly, use
diff --git a/src/target/xscale.c b/src/target/xscale.c
index fb265ea..33dd356 100644
--- a/src/target/xscale.c
+++ b/src/target/xscale.c
@@ -3606,7 +3606,7 @@ static int xscale_register_commands(struct command_context_s *cmd_ctx)
 	return ERROR_OK;
 }
 
-target_type_t xscale_target =
+struct target_type xscale_target =
 {
 	.name = &quot;xscale&quot;,
 

commit d64a873db44258470b50f370f2c8af71157952d0
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 09:48:18 2009 -0800

    improve mips32_pracc_context
    
    Use struct mips32_pracc_context instead of a typedef.

diff --git a/src/target/mips32_pracc.c b/src/target/mips32_pracc.c
index 4f597a5..abc4a6f 100644
--- a/src/target/mips32_pracc.c
+++ b/src/target/mips32_pracc.c
@@ -77,7 +77,8 @@ Nico Coesel
 #include &quot;mips32.h&quot;
 #include &quot;mips32_pracc.h&quot;
 
-typedef struct {
+struct mips32_pracc_context
+{
 	uint32_t *local_iparam;
 	int num_iparam;
 	uint32_t *local_oparam;
@@ -87,7 +88,7 @@ typedef struct {
 	uint32_t stack[32];
 	int stack_offset;
 	struct mips_ejtag *ejtag_info;
-} mips32_pracc_context;
+};
 
 static int wait_for_pracc_rw(struct mips_ejtag *ejtag_info, uint32_t *ctrl)
 {
@@ -108,7 +109,7 @@ static int wait_for_pracc_rw(struct mips_ejtag *ejtag_info, uint32_t *ctrl)
 	return ERROR_OK;
 }
 
-static int mips32_pracc_exec_read(mips32_pracc_context *ctx, uint32_t address)
+static int mips32_pracc_exec_read(struct mips32_pracc_context *ctx, uint32_t address)
 {
 	struct mips_ejtag *ejtag_info = ctx-&gt;ejtag_info;
 	int offset;
@@ -164,7 +165,7 @@ static int mips32_pracc_exec_read(mips32_pracc_context *ctx, uint32_t address)
 	return ERROR_OK;
 }
 
-static int mips32_pracc_exec_write(mips32_pracc_context *ctx, uint32_t address)
+static int mips32_pracc_exec_write(struct mips32_pracc_context *ctx, uint32_t address)
 {
 	uint32_t ejtag_ctrl,data;
 	int offset;
@@ -211,7 +212,7 @@ int mips32_pracc_exec(struct mips_ejtag *ejtag_info, int code_len, uint32_t *cod
 {
 	uint32_t ejtag_ctrl;
 	uint32_t address, data;
-	mips32_pracc_context ctx;
+	struct mips32_pracc_context ctx;
 	int retval;
 	int pass = 0;
 

commit dfecfd5fd471708ac15af08b52964e8f8da9f4be
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 09:46:21 2009 -0800

    image_t -&gt; struct image
    
    Remove misleading typedef and redundant suffix from struct image.
    
    Also removes the typedef from enum image_type, as it is used in
    image.h only.

diff --git a/src/flash/ecos.c b/src/flash/ecos.c
index 450bd5b..57df1e7 100644
--- a/src/flash/ecos.c
+++ b/src/flash/ecos.c
@@ -153,7 +153,7 @@ static int loadDriver(struct ecosflash_flash_bank *info)
 {
 	uint32_t buf_cnt;
 	uint32_t image_size;
-	image_t image;
+	struct image image;
 
 	image.base_address_set = 0;
 	image.start_address_set = 0;
diff --git a/src/flash/flash.c b/src/flash/flash.c
index 22e2721..a8da556 100644
--- a/src/flash/flash.c
+++ b/src/flash/flash.c
@@ -31,7 +31,7 @@
 #include &quot;image.h&quot;
 #include &quot;time_support.h&quot;
 
-static int flash_write_unlock(target_t *target, image_t *image, uint32_t *written, int erase, bool unlock);
+static int flash_write_unlock(target_t *target, struct image *image, uint32_t *written, int erase, bool unlock);
 
 /* flash drivers
  */
@@ -617,7 +617,7 @@ COMMAND_HANDLER(handle_flash_write_image_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
 
-	image_t image;
+	struct image image;
 	uint32_t written;
 
 	int retval;
@@ -966,7 +966,7 @@ static int flash_unlock_address_range(target_t *target, uint32_t addr, uint32_t
 
 
 /* write (optional verify) an image to flash memory of the given target */
-static int flash_write_unlock(target_t *target, image_t *image, uint32_t *written, int erase, bool unlock)
+static int flash_write_unlock(target_t *target, struct image *image, uint32_t *written, int erase, bool unlock)
 {
 	int retval = ERROR_OK;
 
@@ -1125,7 +1125,7 @@ static int flash_write_unlock(target_t *target, image_t *image, uint32_t *writte
 	return retval;
 }
 
-int flash_write(target_t *target, image_t *image, uint32_t *written, int erase)
+int flash_write(target_t *target, struct image *image, uint32_t *written, int erase)
 {
 	return flash_write_unlock(target, image, written, erase, false);
 }
diff --git a/src/flash/flash.h b/src/flash/flash.h
index 9cd5923..eeacc75 100644
--- a/src/flash/flash.h
+++ b/src/flash/flash.h
@@ -29,7 +29,7 @@
 #include &quot;target.h&quot;
 #include &quot;log.h&quot;
 
-struct image_s;
+struct image;
 
 #define FLASH_MAX_ERROR_STR	(128)
 
@@ -286,7 +286,7 @@ int flash_erase_address_range(struct target_s *target,
  * @returns ERROR_OK if successful; otherwise, an error code.
  */
 int flash_write(struct target_s *target,
-		struct image_s *image, uint32_t *written, int erase);
+		struct image *image, uint32_t *written, int erase);
 /**
  * Forces targets to re-examine their erase/protection state.
  * This routine must be called when the system may modify the status.
diff --git a/src/flash/lpc2900.c b/src/flash/lpc2900.c
index 0887907..5b6a5be 100644
--- a/src/flash/lpc2900.c
+++ b/src/flash/lpc2900.c
@@ -718,7 +718,7 @@ COMMAND_HANDLER(lpc2900_handle_write_custom_command)
 	}
 
 	/* The image will always start at offset 0 */
-	image_t image;
+	struct image image;
 	image.base_address_set = 1;
 	image.base_address = 0;
 	image.start_address_set = 0;
diff --git a/src/server/gdb_server.c b/src/server/gdb_server.c
index 0bdb3a0..732f68b 100644
--- a/src/server/gdb_server.c
+++ b/src/server/gdb_server.c
@@ -1899,7 +1899,7 @@ int gdb_v_packet(struct connection *connection, target_t *target, char *packet,
 		/* create a new image if there isn't already one */
 		if (gdb_connection-&gt;vflash_image == NULL)
 		{
-			gdb_connection-&gt;vflash_image = malloc(sizeof(image_t));
+			gdb_connection-&gt;vflash_image = malloc(sizeof(struct image));
 			image_open(gdb_connection-&gt;vflash_image, &quot;&quot;, &quot;build&quot;);
 		}
 
diff --git a/src/server/gdb_server.h b/src/server/gdb_server.h
index ee9063b..d3c5f67 100644
--- a/src/server/gdb_server.h
+++ b/src/server/gdb_server.h
@@ -28,7 +28,7 @@
 
 #include &quot;target.h&quot;
 
-struct image_s;
+struct image;
 
 #define GDB_BUFFER_SIZE	16384
 
@@ -39,7 +39,7 @@ struct gdb_connection
 	int buf_cnt;
 	int ctrl_c;
 	enum target_state frontend_state;
-	struct image_s *vflash_image;
+	struct image *vflash_image;
 	int closed;
 	int busy;
 	int noack_mode;
diff --git a/src/target/etm.c b/src/target/etm.c
index 751ea42..667eb5b 100644
--- a/src/target/etm.c
+++ b/src/target/etm.c
@@ -1761,7 +1761,7 @@ COMMAND_HANDLER(handle_etm_image_command)
 		command_print(cmd_ctx, &quot;previously loaded image found and closed&quot;);
 	}
 
-	etm_ctx-&gt;image = malloc(sizeof(image_t));
+	etm_ctx-&gt;image = malloc(sizeof(struct image));
 	etm_ctx-&gt;image-&gt;base_address_set = 0;
 	etm_ctx-&gt;image-&gt;start_address_set = 0;
 
diff --git a/src/target/etm.h b/src/target/etm.h
index 3de54ee..531206c 100644
--- a/src/target/etm.h
+++ b/src/target/etm.h
@@ -26,7 +26,7 @@
 #include &quot;trace.h&quot;
 #include &quot;arm_jtag.h&quot;
 
-struct image_s;
+struct image;
 
 /* ETM registers (JTAG protocol) */
 enum
@@ -165,7 +165,7 @@ struct etm_context
 	etm_portmode_t portmode;	/* normal, multiplexed or demultiplexed */
 	etmv1_tracemode_t tracemode;	/* type of info trace contains */
 	int /*armv4_5_state_t*/ core_state;	/* current core state */
-	struct image_s *image;		/* source for target opcodes */
+	struct image *image;		/* source for target opcodes */
 	uint32_t pipe_index;		/* current trace cycle */
 	uint32_t data_index;		/* cycle holding next data packet */
 	bool data_half;			/* port half on a 16 bit port */
diff --git a/src/target/image.c b/src/target/image.c
index 27d8eca..55237f8 100644
--- a/src/target/image.c
+++ b/src/target/image.c
@@ -44,7 +44,7 @@
 	((elf-&gt;endianness == ELFDATA2LSB)? \
 		le_to_h_u32((uint8_t*)&amp;field):be_to_h_u32((uint8_t*)&amp;field))
 
-static int autodetect_image_type(image_t *image, const char *url)
+static int autodetect_image_type(struct image *image, const char *url)
 {
 	int retval;
 	struct fileio fileio;
@@ -106,7 +106,7 @@ static int autodetect_image_type(image_t *image, const char *url)
 	return ERROR_OK;
 }
 
-static int identify_image_type(image_t *image, const char *type_string, const char *url)
+static int identify_image_type(struct image *image, const char *type_string, const char *url)
 {
 	if (type_string)
 	{
@@ -147,7 +147,7 @@ static int identify_image_type(image_t *image, const char *type_string, const ch
 	return ERROR_OK;
 }
 
-static int image_ihex_buffer_complete(image_t *image)
+static int image_ihex_buffer_complete(struct image *image)
 {
 	struct image_ihex *ihex = image-&gt;type_private;
 	struct fileio *fileio = &amp;ihex-&gt;fileio;
@@ -158,7 +158,7 @@ static int image_ihex_buffer_complete(image_t *image)
 
 	/* we can't determine the number of sections that we'll have to create ahead of time,
 	 * so we locally hold them until parsing is finished */
-	struct image_section section[IMAGE_MAX_SECTIONS];
+	struct imageection section[IMAGE_MAX_SECTIONS];
 
 	ihex-&gt;buffer = malloc(fileio-&gt;size &gt;&gt; 1);
 	cooked_bytes = 0x0;
@@ -232,7 +232,7 @@ static int image_ihex_buffer_complete(image_t *image)
 			image-&gt;num_sections++;
 
 			/* copy section information */
-			image-&gt;sections = malloc(sizeof(struct image_section) * image-&gt;num_sections);
+			image-&gt;sections = malloc(sizeof(struct imageection) * image-&gt;num_sections);
 			for (i = 0; i &lt; image-&gt;num_sections; i++)
 			{
 				image-&gt;sections[i].private = section[i].private;
@@ -357,7 +357,7 @@ static int image_ihex_buffer_complete(image_t *image)
 	return ERROR_IMAGE_FORMAT_ERROR;
 }
 
-static int image_elf_read_headers(image_t *image)
+static int image_elf_read_headers(struct image *image)
 {
 	struct image_elf *elf = image-&gt;type_private;
 	uint32_t read_bytes;
@@ -439,7 +439,7 @@ static int image_elf_read_headers(image_t *image)
 		if ((field32(elf, elf-&gt;segments[i].p_type) == PT_LOAD) &amp;&amp; (field32(elf, elf-&gt;segments[i].p_filesz) != 0))
 			image-&gt;num_sections++;
 	/* alloc and fill sections array with loadable segments */
-	image-&gt;sections = malloc(image-&gt;num_sections * sizeof(struct image_section));
+	image-&gt;sections = malloc(image-&gt;num_sections * sizeof(struct imageection));
 	for (i = 0,j = 0;i &lt; elf-&gt;segment_count;i++)
 	{
 		if ((field32(elf, elf-&gt;segments[i].p_type) == PT_LOAD) &amp;&amp; (field32(elf, elf-&gt;segments[i].p_filesz) != 0))
@@ -458,7 +458,7 @@ static int image_elf_read_headers(image_t *image)
 	return ERROR_OK;
 }
 
-static int image_elf_read_section(image_t *image, int section, uint32_t offset, uint32_t size, uint8_t *buffer, uint32_t *size_read)
+static int image_elf_read_section(struct image *image, int section, uint32_t offset, uint32_t size, uint8_t *buffer, uint32_t *size_read)
 {
 	struct image_elf *elf = image-&gt;type_private;
 	Elf32_Phdr *segment = (Elf32_Phdr *)image-&gt;sections[section].private;
@@ -499,7 +499,7 @@ static int image_elf_read_section(image_t *image, int section, uint32_t offset,
 	return ERROR_OK;
 }
 
-static int image_mot_buffer_complete(image_t *image)
+static int image_mot_buffer_complete(struct image *image)
 {
 	struct image_mot *mot = image-&gt;type_private;
 	struct fileio *fileio = &amp;mot-&gt;fileio;
@@ -510,7 +510,7 @@ static int image_mot_buffer_complete(image_t *image)
 
 	/* we can't determine the number of sections that we'll have to create ahead of time,
 	 * so we locally hold them until parsing is finished */
-	struct image_section section[IMAGE_MAX_SECTIONS];
+	struct imageection section[IMAGE_MAX_SECTIONS];
 
 	mot-&gt;buffer = malloc(fileio-&gt;size &gt;&gt; 1);
 	cooked_bytes = 0x0;
@@ -635,7 +635,7 @@ static int image_mot_buffer_complete(image_t *image)
 			image-&gt;num_sections++;
 
 			/* copy section information */
-			image-&gt;sections = malloc(sizeof(struct image_section) * image-&gt;num_sections);
+			image-&gt;sections = malloc(sizeof(struct imageection) * image-&gt;num_sections);
 			for (i = 0; i &lt; image-&gt;num_sections; i++)
 			{
 				image-&gt;sections[i].private = section[i].private;
@@ -669,7 +669,7 @@ static int image_mot_buffer_complete(image_t *image)
 	return ERROR_IMAGE_FORMAT_ERROR;
 }
 
-int image_open(image_t *image, const char *url, const char *type_string)
+int image_open(struct image *image, const char *url, const char *type_string)
 {
 	int retval = ERROR_OK;
 
@@ -690,7 +690,7 @@ int image_open(image_t *image, const char *url, const char *type_string)
 		}
 
 		image-&gt;num_sections = 1;
-		image-&gt;sections = malloc(sizeof(struct image_section));
+		image-&gt;sections = malloc(sizeof(struct imageection));
 		image-&gt;sections[0].base_address = 0x0;
 		image-&gt;sections[0].size = image_binary-&gt;fileio.size;
 		image-&gt;sections[0].flags = 0;
@@ -743,7 +743,7 @@ int image_open(image_t *image, const char *url, const char *type_string)
 		struct image_memory *image_memory;
 
 		image-&gt;num_sections = 1;
-		image-&gt;sections = malloc(sizeof(struct image_section));
+		image-&gt;sections = malloc(sizeof(struct imageection));
 		image-&gt;sections[0].base_address = 0x0;
 		image-&gt;sections[0].size = 0xffffffff;
 		image-&gt;sections[0].flags = 0;
@@ -797,7 +797,7 @@ int image_open(image_t *image, const char *url, const char *type_string)
 	return retval;
 };
 
-int image_read_section(image_t *image, int section, uint32_t offset, uint32_t size, uint8_t *buffer, uint32_t *size_read)
+int image_read_section(struct image *image, int section, uint32_t offset, uint32_t size, uint8_t *buffer, uint32_t *size_read)
 {
 	int retval;
 
@@ -897,9 +897,9 @@ int image_read_section(image_t *image, int section, uint32_t offset, uint32_t si
 	return ERROR_OK;
 }
 
-int image_add_section(image_t *image, uint32_t base, uint32_t size, int flags, uint8_t *data)
+int image_add_section(struct image *image, uint32_t base, uint32_t size, int flags, uint8_t *data)
 {
-	struct image_section *section;
+	struct imageection *section;
 
 	/* only image builder supports adding sections */
 	if (image-&gt;type != IMAGE_BUILDER)
@@ -923,7 +923,7 @@ int image_add_section(image_t *image, uint32_t base, uint32_t size, int flags, u
 
 	/* allocate new section */
 	image-&gt;num_sections++;
-	image-&gt;sections = realloc(image-&gt;sections, sizeof(struct image_section) * image-&gt;num_sections);
+	image-&gt;sections = realloc(image-&gt;sections, sizeof(struct imageection) * image-&gt;num_sections);
 	section = &amp;image-&gt;sections[image-&gt;num_sections - 1];
 	section-&gt;base_address = base;
 	section-&gt;size = size;
@@ -934,7 +934,7 @@ int image_add_section(image_t *image, uint32_t ba
se, uint32_t size, int flags, u
 	return ERROR_OK;
 }
 
-void image_close(image_t *image)
+void image_close(struct image *image)
 {
 	if (image-&gt;type == IMAGE_BINARY)
 	{
diff --git a/src/target/image.h b/src/target/image.h
index 0180420..55f0ea2 100644
--- a/src/target/image.h
+++ b/src/target/image.h
@@ -37,7 +37,7 @@
 
 #define IMAGE_MEMORY_CACHE_SIZE		(2048)
 
-typedef enum image_type
+enum image_type
 {
 	IMAGE_BINARY,	/* plain binary */
 	IMAGE_IHEX,		/* intel hex-record format */
@@ -45,9 +45,9 @@ typedef enum image_type
 	IMAGE_ELF,		/* ELF binary */
 	IMAGE_SRECORD,	/* motorola s19 */
 	IMAGE_BUILDER,	/* when building a new image */
-} image_type_t;
+};
 
-struct image_section
+struct imageection
 {
 	uint32_t base_address;
 	uint32_t size;
@@ -55,17 +55,17 @@ struct image_section
 	void *private;		/* private data */
 };
 
-typedef struct image_s
+struct image
 {
-	image_type_t type;		/* image type (plain, ihex, ...) */
+	enum image_type type;		/* image type (plain, ihex, ...) */
 	void *type_private;		/* type private data */
 	int num_sections;		/* number of sections contained in the image */
-	struct image_section *sections;	/* array of sections */
+	struct imageection *sections;	/* array of sections */
 	int base_address_set;	/* whether the image has a base address set (for relocation purposes) */
 	int base_address;		/* base address, if one is set */
 	int start_address_set;	/* whether the image has a start address (entry point) associated */
 	uint32_t start_address;		/* start address, if one is set */
-} image_t;
+};
 
 struct image_binary
 {
@@ -100,12 +100,12 @@ struct image_mot
 	uint8_t *buffer;
 };
 
-int image_open(image_t *image, const char *url, const char *type_string);
-int image_read_section(image_t *image, int section, uint32_t offset,
+int image_open(struct image *image, const char *url, const char *type_string);
+int image_read_section(struct image *image, int section, uint32_t offset,
 		uint32_t size, uint8_t *buffer, uint32_t *size_read);
-void image_close(image_t *image);
+void image_close(struct image *image);
 
-int image_add_section(image_t *image, uint32_t base, uint32_t size,
+int image_add_section(struct image *image, uint32_t base, uint32_t size,
 		int flags, uint8_t *data);
 
 int image_calculate_checksum(uint8_t* buffer, uint32_t nbytes,
diff --git a/src/target/target.c b/src/target/target.c
index 68172f1..df8496f 100644
--- a/src/target/target.c
+++ b/src/target/target.c
@@ -2363,7 +2363,7 @@ COMMAND_HANDLER(handle_mw_command)
 
 }
 
-static COMMAND_HELPER(parse_load_image_command_args, image_t *image,
+static COMMAND_HELPER(parse_load_image_command_args, struct image *image,
 		uint32_t *min_address, uint32_t *max_address)
 {
 	if (argc &lt; 1 || argc &gt; 5)
@@ -2408,7 +2408,7 @@ COMMAND_HANDLER(handle_load_image_command)
 	uint32_t min_address = 0;
 	uint32_t max_address = 0xffffffff;
 	int i;
-	image_t image;
+	struct image image;
 
 	int retval = CALL_COMMAND_HANDLER(parse_load_image_command_args,
 			&amp;image, &amp;min_address, &amp;max_address);
@@ -2564,7 +2564,7 @@ static COMMAND_HELPER(handle_verify_image_command_internal, int verify)
 	uint32_t checksum = 0;
 	uint32_t mem_checksum = 0;
 
-	image_t image;
+	struct image image;
 
 	target_t *target = get_current_target(cmd_ctx);
 
@@ -4545,7 +4545,7 @@ COMMAND_HANDLER(handle_fast_load_image_command)
 	uint32_t max_address = 0xffffffff;
 	int i;
 
-	image_t image;
+	struct image image;
 
 	int retval = CALL_COMMAND_HANDLER(parse_load_image_command_args,
 			&amp;image, &amp;min_address, &amp;max_address);
diff --git a/src/target/xscale.c b/src/target/xscale.c
index 1e0ea77..fb265ea 100644
--- a/src/target/xscale.c
+++ b/src/target/xscale.c
@@ -3390,7 +3390,7 @@ COMMAND_HANDLER(xscale_handle_trace_image_command)
 		command_print(cmd_ctx, &quot;previously loaded image found and closed&quot;);
 	}
 
-	xscale-&gt;trace.image = malloc(sizeof(image_t));
+	xscale-&gt;trace.image = malloc(sizeof(struct image));
 	xscale-&gt;trace.image-&gt;base_address_set = 0;
 	xscale-&gt;trace.image-&gt;start_address_set = 0;
 
diff --git a/src/target/xscale.h b/src/target/xscale.h
index 53bf472..9f25327 100644
--- a/src/target/xscale.h
+++ b/src/target/xscale.h
@@ -69,7 +69,7 @@ struct xscale_trace_data
 struct xscale_trace
 {
 	trace_status_t capture_status;	/* current state of capture run */
-	struct image_s *image;					/* source for target opcodes */
+	struct image *image;					/* source for target opcodes */
 	struct xscale_trace_data *data;		/* linked list of collected trace data */
 	int buffer_enabled;				/* whether trace buffer is enabled */
 	int buffer_fill;				/* maximum number of trace runs to read (-1 for wrap-around) */

commit af949b2531d2a8863d077025db40cbb170d13a63
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 09:43:03 2009 -0800

    armv4_5_common_t -&gt; struct arm
    
    Remove misleading typedef and just use struct arm.

diff --git a/src/flash/arm_nandio.c b/src/flash/arm_nandio.c
index 63dcaeb..4f04831 100644
--- a/src/flash/arm_nandio.c
+++ b/src/flash/arm_nandio.c
@@ -43,7 +43,7 @@ int arm_nandwrite(struct arm_nand_data *nand, uint8_t *data, int size)
 {
 	target_t		*target = nand-&gt;target;
 	struct armv4_5_algorithm	algo;
-	armv4_5_common_t	*armv4_5 = target-&gt;arch_info;
+	struct arm	*armv4_5 = target-&gt;arch_info;
 	struct reg_param		reg_params[3];
 	uint32_t		target_buf;
 	uint32_t		exit = 0;
diff --git a/src/flash/ocl.c b/src/flash/ocl.c
index 14b3e7c..0a2496d 100644
--- a/src/flash/ocl.c
+++ b/src/flash/ocl.c
@@ -47,7 +47,7 @@ static int ocl_protect_check(struct flash_bank_s *bank)
 FLASH_BANK_COMMAND_HANDLER(ocl_flash_bank_command)
 {
 	int retval;
-	armv4_5_common_t *armv4_5;
+	struct arm *armv4_5;
 	struct arm7_9_common *arm7_9;
 	struct ocl_priv *ocl;
 
diff --git a/src/flash/str9xpec.c b/src/flash/str9xpec.c
index c553cdc..ec5d031 100644
--- a/src/flash/str9xpec.c
+++ b/src/flash/str9xpec.c
@@ -238,7 +238,7 @@ static int str9xpec_build_block_list(struct flash_bank_s *bank)
 FLASH_BANK_COMMAND_HANDLER(str9xpec_flash_bank_command)
 {
 	struct str9xpec_flash_controller *str9xpec_info;
-	armv4_5_common_t *armv4_5 = NULL;
+	struct arm *armv4_5 = NULL;
 	struct arm7_9_common *arm7_9 = NULL;
 	struct arm_jtag *jtag_info = NULL;
 
diff --git a/src/target/arm7_9_common.c b/src/target/arm7_9_common.c
index 26b09c7..9bb7567 100644
--- a/src/target/arm7_9_common.c
+++ b/src/target/arm7_9_common.c
@@ -178,7 +178,7 @@ int arm7_9_setup(target_t *target)
  *                 targets
  * @return ERROR_OK if successful
  */
-int arm7_9_get_arch_pointers(target_t *target, armv4_5_common_t **armv4_5_p, struct arm7_9_common **arm7_9_p)
+int arm7_9_get_arch_pointers(target_t *target, struct arm **armv4_5_p, struct arm7_9_common **arm7_9_p)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
@@ -2877,7 +2877,7 @@ COMMAND_HANDLER(handle_arm7_9_write_xpsr_command)
 	int spsr;
 	int retval;
 	target_t *target = get_current_target(cmd_ctx);
-	armv4_5_common_t *armv4_5;
+	struct arm *armv4_5;
 	struct arm7_9_common *arm7_9;
 
 	if (arm7_9_get_arch_pointers(target, &amp;armv4_5, &amp;arm7_9) != ERROR_OK)
@@ -2922,7 +2922,7 @@ COMMAND_HANDLER(handle_arm7_9_write_xpsr_im8_command)
 	int spsr;
 	int retval;
 	target_t *target = get_current_target(cmd_ctx);
-	armv4_5_common_t *armv4_5;
+	struct arm *armv4_5;
 	struct arm7_9_common *arm7_9;
 
 	if (arm7_9_get_arch_pointers(target, &amp;armv4_5, &amp;arm7_9) != ERROR_OK)
@@ -2963,7 +2963,7 @@ COMMAND_HANDLER(handle_arm7_9_write_core_reg_command)
 	uint32_t mode;
 	int num;
 	target_t *target = get_current_target(cmd_ctx);
-	armv4_5_common_t *armv4_5;
+	struct arm *armv4_5;
 	struct arm7_9_common *arm7_9;
 
 	if (arm7_9_get_arch_pointers(target, &amp;armv4_5, &amp;arm7_9) != ERROR_OK)
@@ -2994,7 +2994,7 @@ COMMAND_HANDLER(handle_arm7_9_write_core_reg_command)
 COMMAND_HANDLER(handle_arm7_9_dbgrq_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
-	armv4_5_common_t *armv4_5;
+	struct arm *armv4_5;
 	struct arm7_9_common *arm7_9;
 
 	if (arm7_9_get_arch_pointers(target, &amp;armv4_5, &amp;arm7_9) != ERROR_OK)
@@ -3027,7 +3027,7 @@ COMMAND_HANDLER(handle_arm7_9_dbgrq_command)
 COMMAND_HANDLER(handle_arm7_9_fast_memory_access_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
-	armv4_5_common_t *armv4_5;
+	struct arm *armv4_5;
 	struct arm7_9_common *arm7_9;
 
 	if (arm7_9_get_arch_pointers(target, &amp;armv4_5, &amp;arm7_9) != ERROR_OK)
@@ -3060,7 +3060,7 @@ COMMAND_HANDLER(handle_arm7_9_fast_memory_access_command)
 COMMAND_HANDLER(handle_arm7_9_dcc_downloads_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
-	armv4_5_common_t *armv4_5;
+	struct arm *armv4_5;
 	struct arm7_9_common *arm7_9;
 
 	if (arm7_9_get_arch_pointers(target, &amp;armv4_5, &amp;arm7_9) != ERROR_OK)
@@ -3093,7 +3093,7 @@ COMMAND_HANDLER(handle_arm7_9_dcc_downloads_command)
 int arm7_9_init_arch_info(target_t *target, struct arm7_9_common *arm7_9)
 {
 	int retval = ERROR_OK;
-	armv4_5_common_t *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
+	struct arm *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
 
 	arm7_9-&gt;common_magic = ARM7_9_COMMON_MAGIC;
 
diff --git a/src/target/arm7_9_common.h b/src/target/arm7_9_common.h
index eb4eb1a..41858c6 100644
--- a/src/target/arm7_9_common.h
+++ b/src/target/arm7_9_common.h
@@ -154,6 +154,6 @@ void arm7_9_disable_eice_step(target_t *target);
 int arm7_9_execute_sys_speed(struct target_s *target);
 
 int arm7_9_init_arch_info(target_t *target, struct arm7_9_common *arm7_9);
-int arm7_9_get_arch_pointers(target_t *target, armv4_5_common_t **armv4_5_p, struct arm7_9_common **arm7_9_p);
+int arm7_9_get_arch_pointers(target_t *target, struct arm **armv4_5_p, struct arm7_9_common **arm7_9_p);
 
 #endif /* ARM7_9_COMMON_H */
diff --git a/src/target/arm9tdmi.c b/src/target/arm9tdmi.c
index fdd395a..c670c45 100644
--- a/src/target/arm9tdmi.c
+++ b/src/target/arm9tdmi.c
@@ -788,7 +788,7 @@ int arm9tdmi_init_target(struct command_context_s *cmd_ctx,
 
 int arm9tdmi_init_arch_info(target_t *target, struct arm9tdmi_common *arm9tdmi, struct jtag_tap *tap)
 {
-	armv4_5_common_t *armv4_5;
+	struct arm *armv4_5;
 	struct arm7_9_common *arm7_9;
 
 	arm7_9 = &amp;arm9tdmi-&gt;arm7_9_common;
diff --git a/src/target/arm_simulator.c b/src/target/arm_simulator.c
index 941e41c..5252666 100644
--- a/src/target/arm_simulator.c
+++ b/src/target/arm_simulator.c
@@ -788,21 +788,21 @@ int arm_simulate_step_core(target_t *target,
 
 static uint32_t armv4_5_get_reg(struct arm_sim_interface *sim, int reg)
 {
-	armv4_5_common_t *armv4_5 = (armv4_5_common_t *)sim-&gt;user_data;
+	struct arm *armv4_5 = (struct arm *)sim-&gt;user_data;
 
 	return buf_get_u32(armv4_5-&gt;core_cache-&gt;reg_list[reg].value, 0, 32);
 }
 
 static void armv4_5_set_reg(struct arm_sim_interface *sim, int reg, uint32_t value)
 {
-	armv4_5_common_t *armv4_5 = (armv4_5_common_t *)sim-&gt;user_data;
+	struct arm *armv4_5 = (struct arm *)sim-&gt;user_data;
 
 	buf_set_u32(armv4_5-&gt;core_cache-&gt;reg_list[reg].value, 0, 32, value);
 }
 
 static uint32_t armv4_5_get_reg_mode(struct arm_sim_interface *sim, int reg)
 {
-	armv4_5_common_t *armv4_5 = (armv4_5_common_t *)sim-&gt;user_data;
+	struct arm *armv4_5 = (struct arm *)sim-&gt;user_data;
 
 	return buf_get_u32(ARMV4_5_CORE_REG_MODE(armv4_5-&gt;core_cache,
 			armv4_5-&gt;core_mode, reg).value, 0, 32);
@@ -810,7 +810,7 @@ static uint32_t armv4_5_get_reg_mode(struct arm_sim_interface *sim, int reg)
 
 static void armv4_5_set_reg_mode(struct arm_sim_interface *sim, int reg, uint32_t value)
 {
-	armv4_5_common_t *armv4_5 = (armv4_5_common_t *)sim-&gt;user_data;
+	struct arm *armv4_5 = (struct arm *)sim-&gt;user_data;
 
 	buf_set_u32(ARMV4_5_CORE_REG_MODE(armv4_5-&gt;core_cache,
 			armv4_5-&gt;core_mode, reg).value, 0, 32, value);
@@ -818,21 +818,21 @@ static void armv4_5_set_reg_mode(struct arm_sim_interface *sim, int reg, uint32_
 
 static uint32_t armv4_5_get_cpsr(struct arm_sim_interface *sim, int pos, int bits)
 {
-	armv4_5_common_t *armv4_5 = (armv4_5_common_t *)sim-&gt;user_data;
+	struct arm *armv4_5 = (struct arm *)sim-&gt;user_data;
 
 	return buf_get_u32(armv4_5-&gt;core_cache-&gt;reg_list[ARMV4_5_CPSR].value, pos, bits);
 }
 
 static enum armv4_5_state armv4_5_get_state(struct arm_sim_interface *sim)
 {
-	armv4_5_common_t *armv4_5 = (armv4_5_common_t *)sim-&gt;user_data;
+	struct arm *armv4_5 = (struct arm *)sim-&gt;user_data;
 
 	return armv4_5-&gt;core_state;
 }
 
 static void armv4_5_set_state(struct arm_sim_interface *sim, enum armv4_5_state mode)
 {
-	armv4_5_common_t *armv4_5 = (armv4_5_common_t *)sim-&gt;user_data;
+	struct arm *armv4_5 = (struct arm *)sim-&gt;user_data;
 
 	armv4_5-&gt;core_state = mode;
 }
@@ -840,7 +840,7 @@ static void armv4_5_set_state(struct arm_sim_interface *sim, enum armv4_5_state
 
 static enum armv4_5_mode armv4_5_get_mode(struct arm_sim_interface *sim)
 {
-	armv4_5_common_t *armv4_5 = (armv4_5_common_t *)sim-&gt;user_data;
+	struct arm *armv4_5 = (struct arm *)sim-&gt;user_data;
 
 	return armv4_5-&gt;core_mode;
 }
diff --git a/src/target/armv4_5.c b/src/target/armv4_5.c
index fb6c93b..4040623 100644
--- a/src/target/armv4_5.c
+++ b/src/target/armv4_5.c
@@ -249,7 +249,7 @@ int armv4_5_invalidate_core_regs(target_t *target)
 	return ERROR_OK;
 }
 
-struct reg_cache* armv4_5_build_reg_cache(target_t *target, armv4_5_common_t *armv4_5_common)
+struct reg_cache* armv4_5_build_reg_cache(target_t *target, struct arm *armv4_5_common)
 {
 	int num_regs = 37;
 	struct reg_cache *cache = malloc(sizeof(struct reg_cache));
@@ -713,7 +713,7 @@ int armv4_5_run_algorithm(struct target_s *target, int num_mem_params, struct me
 	return armv4_5_run_algorithm_inner(target, num_mem_params, mem_params, num_reg_params, reg_params, entry_point, exit_point, timeout_ms, arch_info, armv4_5_run_algorithm_completion);
 }
 
-int armv4_5_init_arch_info(target_t *target, armv4_5_common_t *armv4_5)
+int armv4_5_init_arch_info(target_t *target, struct arm *armv4_5)
 {
 	target-&gt;arch_info = armv4_5;
 
diff --git a/src/target/armv4_5.h b/src/target/armv4_5.h
index 3c65069..9823f4e 100644
--- a/src/target/armv4_5.h
+++ b/src/target/armv4_5.h
@@ -84,7 +84,7 @@ enum
  * Cortex-M series cores do not support as many core states or shadowed
  * registers as traditional ARM cores, and only support Thumb2 instructions.
  */
-typedef struct arm
+struct arm
 {
 	int common_magic;
 	struct reg_cache *core_cache;
@@ -104,7 +104,7 @@ typedef struct arm
 	int (*write_core_reg)(struct target_s *target,
 			int num, enum armv4_5_mode mode, uint32_t value);
 	void *arch_info;
-} armv4_5_common_t;
+};
 
 #define target_to_armv4_5 target_to_arm
 
@@ -132,11 +132,11 @@ struct armv4_5_core_reg
 	int num;
 	enum armv4_5_mode mode;
 	target_t *target;
-	armv4_5_common_t *armv4_5_common;
+	struct arm *armv4_5_common;
 };
 
 struct reg_cache* armv4_5_build_reg_cache(target_t *target,
-		armv4_5_common_t *armv4_5_common);
+		struct arm *armv4_5_common);
 
 /* map psr mode bits to linear number */
 static __inline int armv4_5_mode_to_number(enum armv4_5_mode mode)
@@ -180,7 +180,7 @@ int armv4_5_get_gdb_reg_list(target_t *target,
 		reg_t **reg_list[], int *reg_list_size);
 
 int armv4_5_register_commands(struct command_context_s *cmd_ctx);
-int armv4_5_init_arch_info(target_t *target, armv4_5_common_t *armv4_5);
+int armv4_5_init_arch_info(target_t *target, struct arm *armv4_5);
 
 int armv4_5_run_algorithm(struct target_s *target,
 		int num_mem_params, struct mem_param *mem_params,
diff --git a/src/target/armv7a.h b/src/target/armv7a.h
index 910a884..c775d0c 100644
--- a/src/target/armv7a.h
+++ b/src/target/armv7a.h
@@ -106,7 +106,7 @@ struct armv7a_common
 
 	/* Cache and Memory Management Unit */
 	struct armv4_5_mmu_common armv4_5_mmu;
-	armv4_5_common_t armv4_5_common;
+	struct arm armv4_5_common;
 
 //	int (*full_context)(struct target_s *target);
 //	int (*read_core_reg)(struct target_s *target, int num, enum armv7a_mode mode);
diff --git a/src/target/cortex_a8.c b/src/target/cortex_a8.c
index 82d0b28..e1bd2e3 100644
--- a/src/target/cortex_a8.c
+++ b/src/target/cortex_a8.c
@@ -1453,7 +1453,7 @@ static int cortex_a8_init_target(struct command_context_s *cmd_ctx,
 int cortex_a8_init_arch_info(target_t *target,
 		struct cortex_a8_common *cortex_a8, struct jtag_tap *tap)
 {
-	armv4_5_common_t *armv4_5;
+	struct arm *armv4_5;
 	struct armv7a_common *armv7a;
 
 	armv7a = &amp;cortex_a8-&gt;armv7a_common;
diff --git a/src/target/feroceon.c b/src/target/feroceon.c
index 0439f81..cf034c4 100644
--- a/src/target/feroceon.c
+++ b/src/target/feroceon.c
@@ -58,7 +58,7 @@
 
 int feroceon_assert_reset(target_t *target)
 {
-	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
+	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
 	int ud = arm7_9-&gt;use_dbgrq;
 
@@ -110,7 +110,7 @@ int feroceon_dummy_clock_out(struct arm_jtag *jtag_info, uint32_t instr)
 
 void feroceon_change_to_arm(target_t *target, uint32_t *r0, uint32_t *pc)
 {
-	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
+	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
@@ -157,7 +157,7 @@ void feroceon_change_to_arm(target_t *target, uint32_t *r0, uint32_t *pc)
 void feroceon_read_core_regs(target_t *target, uint32_t mask, uint32_t* core_regs[16])
 {
 	int i;
-	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
+	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
@@ -176,7 +176,7 @@ void feroceon_read_core_regs(target_t *target, uint32_t mask, uint32_t* core_reg
 void feroceon_read_core_regs_target_buffer(target_t *target, uint32_t mask, void* buffer, int size)
 {
 	int i;
-	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
+	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	int be = (target-&gt;endianness == TARGET_BIG_ENDIAN) ? 1 : 0;
@@ -212,7 +212,7 @@ void feroceon_read_core_regs_target_buffer(target_t *target, uint32_t mask, void
 
 void feroceon_read_xpsr(target_t *target, uint32_t *xpsr, int spsr)
 {
-	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
+	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
@@ -235,7 +235,7 @@ void feroceon_read_xpsr(target_t *target, uint32_t *xpsr, int spsr)
 
 void feroceon_write_xpsr(target_t *target, uint32_t xpsr, int spsr)
 {
-	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
+	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
@@ -276,7 +276,7 @@ void feroceon_write_xpsr(target_t *target, uint32_t xpsr, int spsr)
 
 void feroceon_write_xpsr_im8(target_t *target, uint8_t xpsr_im, int rot, int spsr)
 {
-	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
+	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
@@ -294,7 +294,7 @@ void feroceon_write_xpsr_im8(target_t *target, uint8_t xpsr_im, int rot, int sps
 void feroceon_write_core_regs(target_t *target, uint32_t mask, uint32_t core_regs[16])
 {
 	int i;
-	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
+	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
@@ -313,7 +313,7 @@ void feroceon_write_core_regs(target_t *target, uint32_t mask, uint32_t core_reg
 
 void feroceon_branch_resume(target_t *target)
 {
-	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
+	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
@@ -330,7 +330,7 @@ void feroceon_branch_resume_thumb(target_t *target)
 {
 	LOG_DEBUG(&quot;-&quot;);
 
-	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
+	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	uint32_t r0 = buf_get_u32(armv4_5-&gt;core_cache-&gt;reg_list[0].value, 0, 32);
@@ -363,7 +363,7 @@ void feroceon_branch_resume_thumb(target_t *target)
 
 int feroceon_read_cp15(target_t *target, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t *value)
 {
-	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
+	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	int err;
@@ -385,7 +385,7 @@ int feroceon_read_cp15(target_t *target, uint32_t op1, uint32_t op2, uint32_t CR
 
 int feroceon_write_cp15(target_t *target, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t value)
 {
-	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
+	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
@@ -404,7 +404,7 @@ int feroceon_write_cp15(target_t *target, uint32_t op1, uint32_t op2, uint32_t C
 
 void feroceon_set_dbgrq(target_t *target)
 {
-	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
+	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
 	reg_t *dbg_ctrl = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_CTRL];
 
@@ -414,7 +414,7 @@ void feroceon_set_dbgrq(target_t *target)
 
 void feroceon_enable_single_step(target_t *target, uint32_t next_pc)
 {
-	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
+	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
 
 	/* set a breakpoint there */
@@ -427,7 +427,7 @@ void feroceon_enable_single_step(target_t *target, uint32_t next_pc)
 
 void feroceon_disable_single_step(target_t *target)
 {
-	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
+	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
 
 	embeddedice_store_reg(&amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_W0_ADDR_VALUE]);
@@ -451,7 +451,7 @@ int feroceon_examine_debug_reason(target_t *target)
 int feroceon_bulk_write_memory(target_t *target, uint32_t address, uint32_t count, uint8_t *buffer)
 {
 	int retval;
-	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
+	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
 	enum armv4_5_state core_state = armv4_5-&gt;core_state;
 	uint32_t x, flip, shift, save[7];
@@ -585,7 +585,7 @@ int feroceon_init_target(struct command_context_s *cmd_ctx, struct target_s *tar
 
 void feroceon_common_setup(struct target_s *target)
 {
-	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
+	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
 
 	/* override some insn sequence functions */
@@ -642,7 +642,7 @@ int dragonite_target_create(struct target_s *target, Jim_Interp *interp)
 
 int feroceon_examine(struct target_s *target)
 {
-	armv4_5_common_t *armv4_5;
+	struct arm *armv4_5;
 	struct arm7_9_common *arm7_9;
 	int retval;
 
diff --git a/src/target/xscale.c b/src/target/xscale.c
index 04a5f64..1e0ea77 100644
--- a/src/target/xscale.c
+++ b/src/target/xscale.c
@@ -2870,7 +2870,7 @@ static int xscale_init_target(struct command_context_s *cmd_ctx,
 static int xscale_init_arch_info(target_t *target,
 		struct xscale_common *xscale, struct jtag_tap *tap, const char *variant)
 {
-	armv4_5_common_t *armv4_5;
+	struct arm *armv4_5;
 	uint32_t high_reset_branch, low_reset_branch;
 	int i;
 
diff --git a/src/target/xscale.h b/src/target/xscale.h
index 936782c..53bf472 100644
--- a/src/target/xscale.h
+++ b/src/target/xscale.h
@@ -81,7 +81,7 @@ struct xscale_trace
 struct xscale_common
 {
 	/* armv4/5 common stuff */
-	armv4_5_common_t armv4_5_common;
+	struct arm armv4_5_common;
 
 	int common_magic;
 

commit d0c19e0a9d51211953a363026c662d290542fe85
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 09:35:48 2009 -0800

    etm_context_t -&gt; struct etm_context
    
    Remove misleading typedef and redundant suffix from struct etm_context.

diff --git a/src/target/armv4_5.h b/src/target/armv4_5.h
index 8987916..3c65069 100644
--- a/src/target/armv4_5.h
+++ b/src/target/armv4_5.h
@@ -96,7 +96,7 @@ typedef struct arm
 	bool is_armv4;
 
 	/** Handle for the Embedded Trace Module, if one is present. */
-	struct etm *etm;
+	struct etm_context *etm;
 
 	int (*full_context)(struct target_s *target);
 	int (*read_core_reg)(struct target_s *target,
diff --git a/src/target/etb.c b/src/target/etb.c
index eed961b..6f9562a 100644
--- a/src/target/etb.c
+++ b/src/target/etb.c
@@ -415,7 +415,7 @@ static int etb_register_commands(struct command_context_s *cmd_ctx)
 	return ERROR_OK;
 }
 
-static int etb_init(etm_context_t *etm_ctx)
+static int etb_init(struct etm_context *etm_ctx)
 {
 	struct etb *etb = etm_ctx-&gt;capture_driver_priv;
 
@@ -432,7 +432,7 @@ static int etb_init(etm_context_t *etm_ctx)
 	return ERROR_OK;
 }
 
-static trace_status_t etb_status(etm_context_t *etm_ctx)
+static trace_status_t etb_status(struct etm_context *etm_ctx)
 {
 	struct etb *etb = etm_ctx-&gt;capture_driver_priv;
 	reg_t *control = &amp;etb-&gt;reg_cache-&gt;reg_list[ETB_CTRL];
@@ -484,7 +484,7 @@ static trace_status_t etb_status(etm_context_t *etm_ctx)
 	return retval;
 }
 
-static int etb_read_trace(etm_context_t *etm_ctx)
+static int etb_read_trace(struct etm_context *etm_ctx)
 {
 	struct etb *etb = etm_ctx-&gt;capture_driver_priv;
 	int first_frame = 0;
@@ -634,7 +634,7 @@ static int etb_read_trace(etm_context_t *etm_ctx)
 	return ERROR_OK;
 }
 
-static int etb_start_capture(etm_context_t *etm_ctx)
+static int etb_start_capture(struct etm_context *etm_ctx)
 {
 	struct etb *etb = etm_ctx-&gt;capture_driver_priv;
 	uint32_t etb_ctrl_value = 0x1;
@@ -668,7 +668,7 @@ static int etb_start_capture(etm_context_t *etm_ctx)
 	return ERROR_OK;
 }
 
-static int etb_stop_capture(etm_context_t *etm_ctx)
+static int etb_stop_capture(struct etm_context *etm_ctx)
 {
 	struct etb *etb = etm_ctx-&gt;capture_driver_priv;
 	reg_t *etb_ctrl_reg = &amp;etb-&gt;reg_cache-&gt;reg_list[ETB_CTRL];
diff --git a/src/target/etb.h b/src/target/etb.h
index e015bad..49385ee 100644
--- a/src/target/etb.h
+++ b/src/target/etb.h
@@ -36,7 +36,7 @@ enum
 
 struct etb
 {
-	etm_context_t *etm_ctx;
+	struct etm_context *etm_ctx;
 	struct jtag_tap *tap;
 	uint32_t cur_scan_chain;
 	struct reg_cache *reg_cache;
diff --git a/src/target/etm.c b/src/target/etm.c
index 21044e5..751ea42 100644
--- a/src/target/etm.c
+++ b/src/target/etm.c
@@ -229,7 +229,7 @@ static command_t *etm_cmd;
 /* Look up register by ID ... most ETM instances only
  * support a subset of the possible registers.
  */
-static reg_t *etm_reg_lookup(etm_context_t *etm_ctx, unsigned id)
+static reg_t *etm_reg_lookup(struct etm_context *etm_ctx, unsigned id)
 {
 	struct reg_cache *cache = etm_ctx-&gt;reg_cache;
 	int i;
@@ -280,7 +280,7 @@ static void etm_reg_add(unsigned bcd_vers, struct arm_jtag *jtag_info,
 }
 
 struct reg_cache *etm_build_reg_cache(target_t *target,
-		struct arm_jtag *jtag_info, etm_context_t *etm_ctx)
+		struct arm_jtag *jtag_info, struct etm_context *etm_ctx)
 {
 	struct reg_cache *reg_cache = malloc(sizeof(struct reg_cache));
 	reg_t *reg_list = NULL;
@@ -426,7 +426,7 @@ int etm_setup(target_t *target)
 	int retval;
 	uint32_t etm_ctrl_value;
 	struct arm *arm = target_to_arm(target);
-	etm_context_t *etm_ctx = arm-&gt;etm;
+	struct etm_context *etm_ctx = arm-&gt;etm;
 	reg_t *etm_ctrl_reg;
 
 	etm_ctrl_reg = etm_reg_lookup(etm_ctx, ETM_CTRL);
@@ -636,7 +636,7 @@ static struct etm_capture_driver *etm_capture_drivers[] =
 	NULL
 };
 
-static int etm_read_instruction(etm_context_t *ctx, struct arm_instruction *instruction)
+static int etm_read_instruction(struct etm_context *ctx, struct arm_instruction *instruction)
 {
 	int i;
 	int section = -1;
@@ -704,7 +704,7 @@ static int etm_read_instruction(etm_context_t *ctx, struct arm_instruction *inst
 	return ERROR_OK;
 }
 
-static int etmv1_next_packet(etm_context_t *ctx, uint8_t *packet, int apo)
+static int etmv1_next_packet(struct etm_context *ctx, uint8_t *packet, int apo)
 {
 	while (ctx-&gt;data_index &lt; ctx-&gt;trace_depth)
 	{
@@ -769,7 +769,7 @@ static int etmv1_next_packet(etm_context_t *ctx, uint8_t *packet, int apo)
 	return -1;
 }
 
-static int etmv1_branch_address(etm_context_t *ctx)
+static int etmv1_branch_address(struct etm_context *ctx)
 {
 	int retval;
 	uint8_t packet;
@@ -855,7 +855,7 @@ static int etmv1_branch_address(etm_context_t *ctx)
 	return 0;
 }
 
-static int etmv1_data(etm_context_t *ctx, int size, uint32_t *data)
+static int etmv1_data(struct etm_context *ctx, int size, uint32_t *data)
 {
 	int j;
 	uint8_t buf[4];
@@ -884,7 +884,7 @@ static int etmv1_data(etm_context_t *ctx, int size, uint32_t *data)
 	return 0;
 }
 
-static int etmv1_analyze_trace(etm_context_t *ctx, struct command_context_s *cmd_ctx)
+static int etmv1_analyze_trace(struct etm_context *ctx, struct command_context_s *cmd_ctx)
 {
 	int retval;
 	struct arm_instruction instruction;
@@ -1251,7 +1251,7 @@ COMMAND_HANDLER(handle_etm_tracemode_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
 	struct arm *arm = target_to_arm(target);
-	struct etm *etm;
+	struct etm_context *etm;
 
 	if (!is_arm(arm)) {
 		command_print(cmd_ctx, &quot;ETM: current target isn't an ARM&quot;);
@@ -1374,7 +1374,7 @@ COMMAND_HANDLER(handle_etm_config_command)
 	target_t *target;
 	struct arm *arm;
 	etm_portmode_t portmode = 0x0;
-	struct etm *etm_ctx;
+	struct etm_context *etm_ctx;
 	int i;
 
 	if (argc != 5)
@@ -1477,7 +1477,7 @@ COMMAND_HANDLER(handle_etm_config_command)
 		return ERROR_FAIL;
 	}
 
-	etm_ctx = calloc(1, sizeof(etm_context_t));
+	etm_ctx = calloc(1, sizeof(struct etm_context));
 	if (!etm_ctx) {
 		LOG_DEBUG(&quot;out of memory&quot;);
 		return ERROR_FAIL;
@@ -1523,7 +1523,7 @@ COMMAND_HANDLER(handle_etm_info_command)
 {
 	target_t *target;
 	struct arm *arm;
-	etm_context_t *etm;
+	struct etm_context *etm;
 	reg_t *etm_sys_config_reg;
 	int max_port_size;
 	uint32_t config;
@@ -1655,7 +1655,7 @@ COMMAND_HANDLER(handle_etm_status_command)
 {
 	target_t *target;
 	struct arm *arm;
-	etm_context_t *etm;
+	struct etm_context *etm;
 	trace_status_t trace_status;
 
 	target = get_current_target(cmd_ctx);
@@ -1731,7 +1731,7 @@ COMMAND_HANDLER(handle_etm_image_command)
 {
 	target_t *target;
 	struct arm *arm;
-	etm_context_t *etm_ctx;
+	struct etm_context *etm_ctx;
 
 	if (argc &lt; 1)
 	{
@@ -1791,7 +1791,7 @@ COMMAND_HANDLER(handle_etm_dump_command)
 	struct fileio file;
 	target_t *target;
 	struct arm *arm;
-	etm_context_t *etm_ctx;
+	struct etm_context *etm_ctx;
 	uint32_t i;
 
 	if (argc != 1)
@@ -1859,7 +1859,7 @@ COMMAND_HANDLER(handle_etm_load_command)
 	struct fileio file;
 	target_t *target;
 	struct arm *arm;
-	etm_context_t *etm_ctx;
+	struct etm_context *etm_ctx;
 	uint32_t i;
 
 	if (argc != 1)
@@ -1942,7 +1942,7 @@ COMMAND_HANDLER(handle_etm_trigger_percent_command)
 {
 	target_t *target;
 	struct arm *arm;
-	etm_context_t *etm_ctx;
+	struct etm_context *etm_ctx;
 
 	target = get_current_target(cmd_ctx);
 	arm = target_to_arm(target);
@@ -1983,7 +1983,7 @@ COMMAND_HANDLER(handle_etm_start_command)
 {
 	target_t *target;
 	struct arm *arm;
-	etm_context_t *etm_ctx;
+	struct etm_context *etm_ctx;
 	reg_t *etm_ctrl_reg;
 
 	target = get_current_target(cmd_ctx);
@@ -2031,7 +2031,7 @@ COMMAND_HANDLER(handle_etm_stop_command)
 {
 	target_t *target;
 	struct arm *arm;
-	etm_context_t *etm_ctx;
+	struct etm_context *etm_ctx;
 	reg_t *etm_ctrl_reg;
 
 	target = get_current_target(cmd_ctx);
@@ -2070,7 +2070,7 @@ COMMAND_HANDLER(handle_etm_analyze_command)
 {
 	target_t *target;
 	struct arm *arm;
-	etm_context_t *etm_ctx;
+	struct etm_context *etm_ctx;
 	int retval;
 
 	target = get_current_target(cmd_ctx);
diff --git a/src/target/etm.h b/src/target/etm.h
index 63e31f1..3de54ee 100644
--- a/src/target/etm.h
+++ b/src/target/etm.h
@@ -121,17 +121,17 @@ typedef enum
 } etmv1_tracemode_t;
 
 /* forward-declare ETM context */
-struct etm;
+struct etm_context;
 
 struct etm_capture_driver
 {
 	char *name;
 	int (*register_commands)(struct command_context_s *cmd_ctx);
-	int (*init)(struct etm *etm_ctx);
-	trace_status_t (*status)(struct etm *etm_ctx);
-	int (*read_trace)(struct etm *etm_ctx);
-	int (*start_capture)(struct etm *etm_ctx);
-	int (*stop_capture)(struct etm *etm_ctx);
+	int (*init)(struct etm_context *etm_ctx);
+	trace_status_t (*status)(struct etm_context *etm_ctx);
+	int (*read_trace)(struct etm_context *etm_ctx);
+	int (*start_capture)(struct etm_context *etm_ctx);
+	int (*stop_capture)(struct etm_context *etm_ctx);
 };
 
 enum
@@ -152,7 +152,7 @@ struct etmv1_trace_data
  * this will have to be split into version independent elements
  * and a version specific part
  */
-typedef struct etm
+struct etm_context
 {
 	target_t *target;		/* target this ETM is connected to */
 	struct reg_cache *reg_cache;		/* ETM register cache */
@@ -179,7 +179,7 @@ typedef struct etm
 	uint32_t last_branch_reason;	/* type of last branch encountered */
 	uint32_t last_ptr;		/* address of the last data access */
 	uint32_t last_instruction;	/* index of last executed (to calc timings) */
-} etm_context_t;
+};
 
 /* PIPESTAT values */
 typedef enum
@@ -208,7 +208,7 @@ typedef enum
 } etmv1_branch_reason_t;
 
 struct reg_cache* etm_build_reg_cache(target_t *target,
-		struct arm_jtag *jtag_info, etm_context_t *etm_ctx);
+		struct arm_jtag *jtag_info, struct etm_context *etm_ctx);
 
 int etm_setup(target_t *target);
 
diff --git a/src/target/etm_dummy.c b/src/target/etm_dummy.c
index 4d975c6..eb8377b 100644
--- a/src/target/etm_dummy.c
+++ b/src/target/etm_dummy.c
@@ -69,27 +69,27 @@ static int etm_dummy_register_commands(struct command_context_s *cmd_ctx)
 	return ERROR_OK;
 }
 
-static int etm_dummy_init(etm_context_t *etm_ctx)
+static int etm_dummy_init(struct etm_context *etm_ctx)
 {
 	return ERROR_OK;
 }
 
-static trace_status_t etm_dummy_status(etm_context_t *etm_ctx)
+static trace_status_t etm_dummy_status(struct etm_context *etm_ctx)
 {
 	return TRACE_IDLE;
 }
 
-static int etm_dummy_read_trace(etm_context_t *etm_ctx)
+static int etm_dummy_read_trace(struct etm_context *etm_ctx)
 {
 	return ERROR_OK;
 }
 
-static int etm_dummy_start_capture(etm_context_t *etm_ctx)
+static int etm_dummy_start_capture(struct etm_context *etm_ctx)
 {
 	return ERROR_ETM_PORTMODE_NOT_SUPPORTED;
 }
 
-static int etm_dummy_stop_capture(etm_context_t *etm_ctx)
+static int etm_dummy_stop_capture(struct etm_context *etm_ctx)
 {
 	return ERROR_OK;
 }
diff --git a/src/target/oocd_trace.c b/src/target/oocd_trace.c
index c5f8b80..6011b68 100644
--- a/src/target/oocd_trace.c
+++ b/src/target/oocd_trace.c
@@ -96,7 +96,7 @@ static int oocd_trace_read_memory(struct oocd_trace *oocd_trace, uint8_t *data,
 	return ERROR_OK;
 }
 
-static int oocd_trace_init(etm_context_t *etm_ctx)
+static int oocd_trace_init(struct etm_context *etm_ctx)
 {
 	uint8_t trash[256];
 	struct oocd_trace *oocd_trace = etm_ctx-&gt;capture_driver_priv;
@@ -143,7 +143,7 @@ static int oocd_trace_init(etm_context_t *etm_ctx)
 	return ERROR_OK;
 }
 
-static trace_status_t oocd_trace_status(etm_context_t *etm_ctx)
+static trace_status_t oocd_trace_status(struct etm_context *etm_ctx)
 {
 	struct oocd_trace *oocd_trace = etm_ctx-&gt;capture_driver_priv;
 	uint32_t status;
@@ -175,7 +175,7 @@ static trace_status_t oocd_trace_status(etm_context_t *etm_ctx)
 	return etm_ctx-&gt;capture_status;
 }
 
-static int oocd_trace_read_trace(etm_context_t *etm_ctx)
+static int oocd_trace_read_trace(struct etm_context *etm_ctx)
 {
 	struct oocd_trace *oocd_trace = etm_ctx-&gt;capture_driver_priv;
 	uint32_t status, address;
@@ -233,7 +233,7 @@ static int oocd_trace_read_trace(etm_context_t *etm_ctx)
 	return ERROR_OK;
 }
 
-static int oocd_trace_start_capture(etm_context_t *etm_ctx)
+static int oocd_trace_start_capture(struct etm_context *etm_ctx)
 {
 	struct oocd_trace *oocd_trace = etm_ctx-&gt;capture_driver_priv;
 	uint32_t control = 0x1;	/* 0x1: enabled */
@@ -266,7 +266,7 @@ static int oocd_trace_start_capture(etm_context_t *etm_ctx)
 	return ERROR_OK;
 }
 
-static int oocd_trace_stop_capture(etm_context_t *etm_ctx)
+static int oocd_trace_stop_capture(struct etm_context *etm_ctx)
 {
 	struct oocd_trace *oocd_trace = etm_ctx-&gt;capture_driver_priv;
 
diff --git a/src/target/oocd_trace.h b/src/target/oocd_trace.h
index 49b4b89..8234b65 100644
--- a/src/target/oocd_trace.h
+++ b/src/target/oocd_trace.h
@@ -48,7 +48,7 @@ enum
 
 struct oocd_trace
 {
-	etm_context_t *etm_ctx;
+	struct etm_context *etm_ctx;
 	char *tty;
 	int tty_fd;
 	struct termios oldtio, newtio;

commit 6421c2075c733d18b7fc9daed847c135b98230b7
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 09:27:28 2009 -0800

    etb_t -&gt; struct etb
    
    Remove misleading typedef and redundant suffix from struct etb.

diff --git a/src/target/etb.c b/src/target/etb.c
index 8f1c67a..eed961b 100644
--- a/src/target/etb.c
+++ b/src/target/etb.c
@@ -42,7 +42,7 @@ static int etb_reg_arch_type = -1;
 
 static int etb_get_reg(reg_t *reg);
 
-static int etb_set_instr(etb_t *etb, uint32_t new_instr)
+static int etb_set_instr(struct etb *etb, uint32_t new_instr)
 {
 	struct jtag_tap *tap;
 
@@ -69,7 +69,7 @@ static int etb_set_instr(etb_t *etb, uint32_t new_instr)
 	return ERROR_OK;
 }
 
-static int etb_scann(etb_t *etb, uint32_t new_scan_chain)
+static int etb_scann(struct etb *etb, uint32_t new_scan_chain)
 {
 	if (etb-&gt;cur_scan_chain != new_scan_chain)
 	{
@@ -121,7 +121,7 @@ static int etb_get_reg(reg_t *reg)
 	return ERROR_OK;
 }
 
-struct reg_cache* etb_build_reg_cache(etb_t *etb)
+struct reg_cache* etb_build_reg_cache(struct etb *etb)
 {
 	struct reg_cache *reg_cache = malloc(sizeof(struct reg_cache));
 	reg_t *reg_list = NULL;
@@ -171,7 +171,7 @@ static void etb_getbuf(jtag_callback_data_t arg)
 }
 
 
-static int etb_read_ram(etb_t *etb, uint32_t *data, int num_frames)
+static int etb_read_ram(struct etb *etb, uint32_t *data, int num_frames)
 {
 	struct scan_field fields[3];
 	int i;
@@ -384,7 +384,7 @@ COMMAND_HANDLER(handle_etb_config_command)
 
 	if (arm-&gt;etm)
 	{
-		etb_t *etb = malloc(sizeof(etb_t));
+		struct etb *etb = malloc(sizeof(struct etb));
 
 		arm-&gt;etm-&gt;capture_driver_priv = etb;
 
@@ -417,7 +417,7 @@ static int etb_register_commands(struct command_context_s *cmd_ctx)
 
 static int etb_init(etm_context_t *etm_ctx)
 {
-	etb_t *etb = etm_ctx-&gt;capture_driver_priv;
+	struct etb *etb = etm_ctx-&gt;capture_driver_priv;
 
 	etb-&gt;etm_ctx = etm_ctx;
 
@@ -434,7 +434,7 @@ static int etb_init(etm_context_t *etm_ctx)
 
 static trace_status_t etb_status(etm_context_t *etm_ctx)
 {
-	etb_t *etb = etm_ctx-&gt;capture_driver_priv;
+	struct etb *etb = etm_ctx-&gt;capture_driver_priv;
 	reg_t *control = &amp;etb-&gt;reg_cache-&gt;reg_list[ETB_CTRL];
 	reg_t *status = &amp;etb-&gt;reg_cache-&gt;reg_list[ETB_STATUS];
 	trace_status_t retval = 0;
@@ -486,7 +486,7 @@ static trace_status_t etb_status(etm_context_t *etm_ctx)
 
 static int etb_read_trace(etm_context_t *etm_ctx)
 {
-	etb_t *etb = etm_ctx-&gt;capture_driver_priv;
+	struct etb *etb = etm_ctx-&gt;capture_driver_priv;
 	int first_frame = 0;
 	int num_frames = etb-&gt;ram_depth;
 	uint32_t *trace_data = NULL;
@@ -636,7 +636,7 @@ static int etb_read_trace(etm_context_t *etm_ctx)
 
 static int etb_start_capture(etm_context_t *etm_ctx)
 {
-	etb_t *etb = etm_ctx-&gt;capture_driver_priv;
+	struct etb *etb = etm_ctx-&gt;capture_driver_priv;
 	uint32_t etb_ctrl_value = 0x1;
 	uint32_t trigger_count;
 
@@ -670,7 +670,7 @@ static int etb_start_capture(etm_context_t *etm_ctx)
 
 static int etb_stop_capture(etm_context_t *etm_ctx)
 {
-	etb_t *etb = etm_ctx-&gt;capture_driver_priv;
+	struct etb *etb = etm_ctx-&gt;capture_driver_priv;
 	reg_t *etb_ctrl_reg = &amp;etb-&gt;reg_cache-&gt;reg_list[ETB_CTRL];
 
 	etb_write_reg(etb_ctrl_reg, 0x0);
diff --git a/src/target/etb.h b/src/target/etb.h
index 820d296..e015bad 100644
--- a/src/target/etb.h
+++ b/src/target/etb.h
@@ -34,7 +34,7 @@ enum
 	ETB_CTRL = 0x08,
 };
 
-typedef struct etb_s
+struct etb
 {
 	etm_context_t *etm_ctx;
 	struct jtag_tap *tap;
@@ -44,16 +44,16 @@ typedef struct etb_s
 	/* ETB parameters */
 	uint32_t ram_depth;
 	uint32_t ram_width;
-} etb_t;
+};
 
 struct etb_reg
 {
 	uint32_t addr;
-	etb_t *etb;
+	struct etb *etb;
 };
 
 extern struct etm_capture_driver etb_capture_driver;
 
-struct reg_cache* etb_build_reg_cache(etb_t *etb);
+struct reg_cache* etb_build_reg_cache(struct etb *etb);
 
 #endif /* ETB_H */
diff --git a/src/target/etm.c b/src/target/etm.c
index a5fe282..21044e5 100644
--- a/src/target/etm.c
+++ b/src/target/etm.c
@@ -391,7 +391,7 @@ struct reg_cache *etm_build_reg_cache(target_t *target,
 	/* the ETM might have an ETB connected */
 	if (strcmp(etm_ctx-&gt;capture_driver-&gt;name, &quot;etb&quot;) == 0)
 	{
-		etb_t *etb = etm_ctx-&gt;capture_driver_priv;
+		struct etb *etb = etm_ctx-&gt;capture_driver_priv;
 
 		if (!etb)
 		{

commit 4952eadd8f04ca3755c30013abc3ea85e35d8654
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 09:26:19 2009 -0800

    trace_t -&gt; struct trace
    
    Remove misleading typedef and redundant suffix from struct trace.

diff --git a/src/target/target.c b/src/target/target.c
index 6f04af6..68172f1 100644
--- a/src/target/target.c
+++ b/src/target/target.c
@@ -4315,7 +4315,7 @@ static int target_create(Jim_GetOptInfo *goi)
 	target-&gt;halt_issued			= false;
 
 	/* initialize trace information */
-	target-&gt;trace_info = malloc(sizeof(trace_t));
+	target-&gt;trace_info = malloc(sizeof(struct trace));
 	target-&gt;trace_info-&gt;num_trace_points         = 0;
 	target-&gt;trace_info-&gt;trace_points_size        = 0;
 	target-&gt;trace_info-&gt;trace_points             = NULL;
diff --git a/src/target/target.h b/src/target/target.h
index ef3f6cc..3eafc18 100644
--- a/src/target/target.h
+++ b/src/target/target.h
@@ -33,7 +33,7 @@
 #include &quot;command.h&quot;
 
 struct reg_s;
-struct trace_s;
+struct trace;
 struct command_context_s;
 
 
@@ -154,7 +154,7 @@ typedef struct target_s
 	struct reg_cache *reg_cache;		/* the first register cache of the target (core regs) */
 	struct breakpoint *breakpoints;	/* list of breakpoints */
 	struct watchpoint *watchpoints;	/* list of watchpoints */
-	struct trace_s *trace_info;			/* generic trace information */
+	struct trace *trace_info;			/* generic trace information */
 	struct debug_msg_receiver *dbgmsg;/* list of debug message receivers */
 	uint32_t dbg_msg_enabled;				/* debug message status */
 	void *arch_info;					/* architecture specific information */
diff --git a/src/target/trace.c b/src/target/trace.c
index 7bfe019..bc6eec7 100644
--- a/src/target/trace.c
+++ b/src/target/trace.c
@@ -27,7 +27,7 @@
 
 int trace_point(target_t *target, uint32_t number)
 {
-	trace_t *trace = target-&gt;trace_info;
+	struct trace *trace = target-&gt;trace_info;
 
 	LOG_DEBUG(&quot;tracepoint: %i&quot;, (int)number);
 
@@ -50,7 +50,7 @@ int trace_point(target_t *target, uint32_t number)
 COMMAND_HANDLER(handle_trace_point_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
-	trace_t *trace = target-&gt;trace_info;
+	struct trace *trace = target-&gt;trace_info;
 
 	if (argc == 0)
 	{
@@ -98,7 +98,7 @@ COMMAND_HANDLER(handle_trace_point_command)
 COMMAND_HANDLER(handle_trace_history_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
-	trace_t *trace = target-&gt;trace_info;
+	struct trace *trace = target-&gt;trace_info;
 
 	if (argc &gt; 0)
 	{
diff --git a/src/target/trace.h b/src/target/trace.h
index 9fa8d60..cca84d7 100644
--- a/src/target/trace.h
+++ b/src/target/trace.h
@@ -31,7 +31,7 @@ struct trace_point
 	uint64_t hit_counter;
 };
 
-typedef struct trace_s
+struct trace
 {
 	uint32_t num_trace_points;
 	uint32_t trace_points_size;
@@ -40,7 +40,7 @@ typedef struct trace_s
 	uint32_t *trace_history;
 	uint32_t trace_history_pos;
 	int trace_history_overflowed;
-} trace_t;
+};
 
 typedef enum trace_status
 {

commit d90063ffc54ea042c0ff37e6cec1e95848bf1e26
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 09:25:36 2009 -0800

    image_elf_t -&gt; struct image_elf
    
    Remove misleading typedef and redundant suffix from struct image_elf.

diff --git a/src/target/image.c b/src/target/image.c
index 608ac59..27d8eca 100644
--- a/src/target/image.c
+++ b/src/target/image.c
@@ -359,7 +359,7 @@ static int image_ihex_buffer_complete(image_t *image)
 
 static int image_elf_read_headers(image_t *image)
 {
-	image_elf_t *elf = image-&gt;type_private;
+	struct image_elf *elf = image-&gt;type_private;
 	uint32_t read_bytes;
 	uint32_t i,j;
 	int retval;
@@ -460,7 +460,7 @@ static int image_elf_read_headers(image_t *image)
 
 static int image_elf_read_section(image_t *image, int section, uint32_t offset, uint32_t size, uint8_t *buffer, uint32_t *size_read)
 {
-	image_elf_t *elf = image-&gt;type_private;
+	struct image_elf *elf = image-&gt;type_private;
 	Elf32_Phdr *segment = (Elf32_Phdr *)image-&gt;sections[section].private;
 	uint32_t read_size,really_read;
 	int retval;
@@ -715,9 +715,9 @@ int image_open(image_t *image, const char *url, const char *type_string)
 	}
 	else if (image-&gt;type == IMAGE_ELF)
 	{
-		image_elf_t *image_elf;
+		struct image_elf *image_elf;
 
-		image_elf = image-&gt;type_private = malloc(sizeof(image_elf_t));
+		image_elf = image-&gt;type_private = malloc(sizeof(struct image_elf));
 
 		if ((retval = fileio_open(&amp;image_elf-&gt;fileio, url, FILEIO_READ, FILEIO_BINARY)) != ERROR_OK)
 		{
@@ -956,7 +956,7 @@ void image_close(image_t *image)
 	}
 	else if (image-&gt;type == IMAGE_ELF)
 	{
-		image_elf_t *image_elf = image-&gt;type_private;
+		struct image_elf *image_elf = image-&gt;type_private;
 
 		fileio_close(&amp;image_elf-&gt;fileio);
 
diff --git a/src/target/image.h b/src/target/image.h
index 608336b..0180420 100644
--- a/src/target/image.h
+++ b/src/target/image.h
@@ -85,14 +85,14 @@ struct image_memory
 	uint32_t cache_address;
 };
 
-typedef struct fileio_elf_s
+struct image_elf
 {
 	struct fileio fileio;
 	Elf32_Ehdr *header;
 	Elf32_Phdr *segments;
 	uint32_t segment_count;
 	uint8_t endianness;
-} image_elf_t;
+};
 
 struct image_mot
 {

commit 2ec440588fa455e4609bae3d7fc146bf53f1bbab
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 09:19:49 2009 -0800

    cortex_m3_dwt_comparator_t -&gt; struct cortex_m3_dwt_comparator
    
    Remove misleading typedef and redundant suffix from struct cortex_m3_dwt_comparator.

diff --git a/src/target/cortex_m3.c b/src/target/cortex_m3.c
index f495803..bbdc85a 100644
--- a/src/target/cortex_m3.c
+++ b/src/target/cortex_m3.c
@@ -178,7 +178,7 @@ static int cortex_m3_endreset_event(target_t *target)
 	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 	struct swjdp_common *swjdp = &amp;cortex_m3-&gt;armv7m.swjdp_info;
 	struct cortex_m3_fp_comparator *fp_list = cortex_m3-&gt;fp_comparator_list;
-	cortex_m3_dwt_comparator_t *dwt_list = cortex_m3-&gt;dwt_comparator_list;
+	struct cortex_m3_dwt_comparator *dwt_list = cortex_m3-&gt;dwt_comparator_list;
 
 	mem_ap_read_atomic_u32(swjdp, DCB_DEMCR, &amp;dcb_demcr);
 	LOG_DEBUG(&quot;DCB_DEMCR = 0x%8.8&quot; PRIx32 &quot;&quot;,dcb_demcr);
@@ -1052,7 +1052,7 @@ cortex_m3_set_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
 	 * watchpoint using comparator #1; comparator #0 matching cycle
 	 * count; send data trace info through ITM and TPIU; etc
 	 */
-	cortex_m3_dwt_comparator_t *comparator;
+	struct cortex_m3_dwt_comparator *comparator;
 
 	for (comparator = cortex_m3-&gt;dwt_comparator_list;
 			comparator-&gt;used &amp;&amp; dwt_num &lt; cortex_m3-&gt;dwt_num_comp;
@@ -1100,7 +1100,7 @@ static int
 cortex_m3_unset_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
 {
 	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
-	cortex_m3_dwt_comparator_t *comparator;
+	struct cortex_m3_dwt_comparator *comparator;
 	int dwt_num;
 
 	if (!watchpoint-&gt;set)
@@ -1517,7 +1517,7 @@ cortex_m3_dwt_setup(struct cortex_m3_common *cm3, struct target_s *target)
 {
 	uint32_t dwtcr;
 	struct reg_cache *cache;
-	cortex_m3_dwt_comparator_t *comparator;
+	struct cortex_m3_dwt_comparator *comparator;
 	int reg, i;
 
 	target_read_u32(target, DWT_CTRL, &amp;dwtcr);
@@ -1533,7 +1533,7 @@ cortex_m3_dwt_setup(struct cortex_m3_common *cm3, struct target_s *target)
 	cm3-&gt;dwt_num_comp = (dwtcr &gt;&gt; 28) &amp; 0xF;
 	cm3-&gt;dwt_comp_available = cm3-&gt;dwt_num_comp;
 	cm3-&gt;dwt_comparator_list = calloc(cm3-&gt;dwt_num_comp,
-			sizeof(cortex_m3_dwt_comparator_t));
+			sizeof(struct cortex_m3_dwt_comparator));
 	if (!cm3-&gt;dwt_comparator_list) {
 fail0:
 		cm3-&gt;dwt_num_comp = 0;
diff --git a/src/target/cortex_m3.h b/src/target/cortex_m3.h
index 82a7d41..f5dde5b 100644
--- a/src/target/cortex_m3.h
+++ b/src/target/cortex_m3.h
@@ -127,14 +127,14 @@ struct cortex_m3_fp_comparator
 	uint32_t fpcr_address;
 };
 
-typedef struct  cortex_m3_dwt_comparator_s
+struct cortex_m3_dwt_comparator
 {
 	int used;
 	uint32_t comp;
 	uint32_t mask;
 	uint32_t function;
 	uint32_t dwt_comparator_address;
-} cortex_m3_dwt_comparator_t;
+};
 
 struct cortex_m3_common
 {
@@ -157,7 +157,7 @@ struct cortex_m3_common
 	/* Data Watchpoint and Trace (DWT) */
 	int dwt_num_comp;
 	int dwt_comp_available;
-	cortex_m3_dwt_comparator_t *dwt_comparator_list;
+	struct cortex_m3_dwt_comparator *dwt_comparator_list;
 	struct reg_cache *dwt_cache;
 
 	struct armv7m_common armv7m;

commit cdd2d9c2d0dee319ba5d2f419ac78aa6490bb74b
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 09:19:37 2009 -0800

    cortex_m3_fp_comparator_t -&gt; struct cortex_m3_fp_comparator
    
    Remove misleading typedef and redundant suffix from struct cortex_m3_fp_comparator.

diff --git a/src/target/cortex_m3.c b/src/target/cortex_m3.c
index 041f806..f495803 100644
--- a/src/target/cortex_m3.c
+++ b/src/target/cortex_m3.c
@@ -177,7 +177,7 @@ static int cortex_m3_endreset_event(target_t *target)
 	uint32_t dcb_demcr;
 	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 	struct swjdp_common *swjdp = &amp;cortex_m3-&gt;armv7m.swjdp_info;
-	cortex_m3_fp_comparator_t *fp_list = cortex_m3-&gt;fp_comparator_list;
+	struct cortex_m3_fp_comparator *fp_list = cortex_m3-&gt;fp_comparator_list;
 	cortex_m3_dwt_comparator_t *dwt_list = cortex_m3-&gt;dwt_comparator_list;
 
 	mem_ap_read_atomic_u32(swjdp, DCB_DEMCR, &amp;dcb_demcr);
@@ -839,7 +839,7 @@ cortex_m3_set_breakpoint(struct target_s *target, struct breakpoint *breakpoint)
 	int fp_num = 0;
 	uint32_t hilo;
 	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
-	cortex_m3_fp_comparator_t *comparator_list = cortex_m3-&gt;fp_comparator_list;
+	struct cortex_m3_fp_comparator *comparator_list = cortex_m3-&gt;fp_comparator_list;
 
 	if (breakpoint-&gt;set)
 	{
@@ -904,7 +904,7 @@ cortex_m3_unset_breakpoint(struct target_s *target, struct breakpoint *breakpoin
 {
 	int retval;
 	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
-	cortex_m3_fp_comparator_t * comparator_list = cortex_m3-&gt;fp_comparator_list;
+	struct cortex_m3_fp_comparator * comparator_list = cortex_m3-&gt;fp_comparator_list;
 
 	if (!breakpoint-&gt;set)
 	{
@@ -1614,7 +1614,7 @@ static int cortex_m3_examine(struct target_s *target)
 		cortex_m3-&gt;fp_num_code = ((fpcr &gt;&gt; 8) &amp; 0x70) | ((fpcr &gt;&gt; 4) &amp; 0xF); /* bits [14:12] and [7:4] */
 		cortex_m3-&gt;fp_num_lit = (fpcr &gt;&gt; 8) &amp; 0xF;
 		cortex_m3-&gt;fp_code_available = cortex_m3-&gt;fp_num_code;
-		cortex_m3-&gt;fp_comparator_list = calloc(cortex_m3-&gt;fp_num_code + cortex_m3-&gt;fp_num_lit, sizeof(cortex_m3_fp_comparator_t));
+		cortex_m3-&gt;fp_comparator_list = calloc(cortex_m3-&gt;fp_num_code + cortex_m3-&gt;fp_num_lit, sizeof(struct cortex_m3_fp_comparator));
 		cortex_m3-&gt;fpb_enabled = fpcr &amp; 1;
 		for (i = 0; i &lt; cortex_m3-&gt;fp_num_code + cortex_m3-&gt;fp_num_lit; i++)
 		{
diff --git a/src/target/cortex_m3.h b/src/target/cortex_m3.h
index 9626467..82a7d41 100644
--- a/src/target/cortex_m3.h
+++ b/src/target/cortex_m3.h
@@ -119,13 +119,13 @@
 #define FPCR_REPLACE_BKPT_HIGH  (2 &lt;&lt; 30)
 #define FPCR_REPLACE_BKPT_BOTH  (3 &lt;&lt; 30)
 
-typedef struct  cortex_m3_fp_comparator_s
+struct cortex_m3_fp_comparator
 {
 	int used;
 	int type;
 	uint32_t fpcr_value;
 	uint32_t fpcr_address;
-} cortex_m3_fp_comparator_t;
+};
 
 typedef struct  cortex_m3_dwt_comparator_s
 {
@@ -152,7 +152,7 @@ struct cortex_m3_common
 	int fp_code_available;
 	int fpb_enabled;
 	int auto_bp_type;
-	cortex_m3_fp_comparator_t *fp_comparator_list;
+	struct cortex_m3_fp_comparator *fp_comparator_list;
 
 	/* Data Watchpoint and Trace (DWT) */
 	int dwt_num_comp;

commit d727f978897105ceacfed06da0152b4b4dfffc3d
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 09:18:27 2009 -0800

    cortex_a8_wrp_t -&gt; struct cortex_a8_wrp
    
    Remove misleading typedef and redundant suffix from struct cortex_a8_wrp.

diff --git a/src/target/cortex_a8.c b/src/target/cortex_a8.c
index a44bb92..82d0b28 100644
--- a/src/target/cortex_a8.c
+++ b/src/target/cortex_a8.c
@@ -1409,7 +1409,7 @@ static int cortex_a8_examine(struct target_s *target)
 	/* Setup Watchpoint Register Pairs */
 	cortex_a8-&gt;wrp_num = ((didr &gt;&gt; 28) &amp; 0x0F) + 1;
 	cortex_a8-&gt;wrp_num_available = cortex_a8-&gt;wrp_num;
-	cortex_a8-&gt;wrp_list = calloc(cortex_a8-&gt;wrp_num, sizeof(cortex_a8_wrp_t));
+	cortex_a8-&gt;wrp_list = calloc(cortex_a8-&gt;wrp_num, sizeof(struct cortex_a8_wrp));
 	for (i = 0; i &lt; cortex_a8-&gt;wrp_num; i++)
 	{
 		cortex_a8-&gt;wrp_list[i].used = 0;
diff --git a/src/target/cortex_a8.h b/src/target/cortex_a8.h
index 8728842..e3b99ee 100644
--- a/src/target/cortex_a8.h
+++ b/src/target/cortex_a8.h
@@ -91,14 +91,14 @@ struct cortex_a8_brp
 	uint8_t 	BRPn;
 };
 
-typedef struct  cortex_a8_wrp_s
+struct cortex_a8_wrp
 {
 	int used;
 	int type;
 	uint32_t value;
 	uint32_t control;
 	uint8_t 	WRPn;
-} cortex_a8_wrp_t;
+};
 
 struct cortex_a8_common
 {
@@ -124,7 +124,7 @@ struct cortex_a8_common
 	/* Watchpoint register pairs */
 	int wrp_num;
 	int wrp_num_available;
-	cortex_a8_wrp_t *wrp_list;
+	struct cortex_a8_wrp *wrp_list;
 
 	/* Interrupts */
 	int intlinesnum;

commit 42fb6b88764fb39fd07726d7bb447a79c3951aa4
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 09:17:08 2009 -0800

    cortex_a8_brp_t -&gt; struct cortex_a8_brp
    
    Remove misleading typedef and redundant suffix from struct cortex_a8_brp.

diff --git a/src/target/cortex_a8.c b/src/target/cortex_a8.c
index 905860f..a44bb92 100644
--- a/src/target/cortex_a8.c
+++ b/src/target/cortex_a8.c
@@ -969,7 +969,7 @@ static int cortex_a8_set_breakpoint(struct target_s *target,
 	uint8_t byte_addr_select = 0x0F;
 	struct cortex_a8_common *cortex_a8 = target_to_cortex_a8(target);
 	struct armv7a_common *armv7a = &amp;cortex_a8-&gt;armv7a_common;
-	cortex_a8_brp_t * brp_list = cortex_a8-&gt;brp_list;
+	struct cortex_a8_brp * brp_list = cortex_a8-&gt;brp_list;
 
 	if (breakpoint-&gt;set)
 	{
@@ -1040,7 +1040,7 @@ static int cortex_a8_unset_breakpoint(struct target_s *target, struct breakpoint
 	int retval;
 	struct cortex_a8_common *cortex_a8 = target_to_cortex_a8(target);
 	struct armv7a_common *armv7a = &amp;cortex_a8-&gt;armv7a_common;
-	cortex_a8_brp_t * brp_list = cortex_a8-&gt;brp_list;
+	struct cortex_a8_brp * brp_list = cortex_a8-&gt;brp_list;
 
 	if (!breakpoint-&gt;set)
 	{
@@ -1392,7 +1392,7 @@ static int cortex_a8_examine(struct target_s *target)
 	cortex_a8-&gt;brp_num = ((didr &gt;&gt; 24) &amp; 0x0F) + 1;
 	cortex_a8-&gt;brp_num_context = ((didr &gt;&gt; 20) &amp; 0x0F) + 1;
 	cortex_a8-&gt;brp_num_available = cortex_a8-&gt;brp_num;
-	cortex_a8-&gt;brp_list = calloc(cortex_a8-&gt;brp_num, sizeof(cortex_a8_brp_t));
+	cortex_a8-&gt;brp_list = calloc(cortex_a8-&gt;brp_num, sizeof(struct cortex_a8_brp));
 //	cortex_a8-&gt;brb_enabled = ????;
 	for (i = 0; i &lt; cortex_a8-&gt;brp_num; i++)
 	{
diff --git a/src/target/cortex_a8.h b/src/target/cortex_a8.h
index 131cddb..8728842 100644
--- a/src/target/cortex_a8.h
+++ b/src/target/cortex_a8.h
@@ -82,14 +82,14 @@ extern char* cortex_a8_state_strings[];
 #define DSCR_DTR_TX_FULL 		29
 #define DSCR_DTR_RX_FULL 		30
 
-typedef struct  cortex_a8_brp_s
+struct cortex_a8_brp
 {
 	int used;
 	int type;
 	uint32_t value;
 	uint32_t control;
 	uint8_t 	BRPn;
-} cortex_a8_brp_t;
+};
 
 typedef struct  cortex_a8_wrp_s
 {
@@ -119,7 +119,7 @@ struct cortex_a8_common
 	int brp_num;
 	int brp_num_available;
 //	int brp_enabled;
-	cortex_a8_brp_t *brp_list;
+	struct cortex_a8_brp *brp_list;
 
 	/* Watchpoint register pairs */
 	int wrp_num;

commit 53c05c8b1d5718b2acf5dbe0eb517dd427340041
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 09:15:32 2009 -0800

    breakpoint_t -&gt; struct breakpoint
    
    Remove misleading typedef and redundant suffix from struct breakpoint.

diff --git a/src/target/arm11.c b/src/target/arm11.c
index 549f476..42c33af 100644
--- a/src/target/arm11.c
+++ b/src/target/arm11.c
@@ -833,7 +833,7 @@ static int arm11_resume(struct target_s *target, int current,
 	{
 		/* check if one matches PC and step over it if necessary */
 
-		breakpoint_t *	bp;
+		struct breakpoint *	bp;
 
 		for (bp = target-&gt;breakpoints; bp; bp = bp-&gt;next)
 		{
@@ -1552,7 +1552,7 @@ static int arm11_checksum_memory(struct target_s *target,
 * rw: 0 = write, 1 = read, 2 = access
 */
 static int arm11_add_breakpoint(struct target_s *target,
-		breakpoint_t *breakpoint)
+		struct breakpoint *breakpoint)
 {
 	FNC_INFO;
 
@@ -1584,7 +1584,7 @@ static int arm11_add_breakpoint(struct target_s *target,
 }
 
 static int arm11_remove_breakpoint(struct target_s *target,
-		breakpoint_t *breakpoint)
+		struct breakpoint *breakpoint)
 {
 	FNC_INFO;
 
diff --git a/src/target/arm7_9_common.c b/src/target/arm7_9_common.c
index 19244de..26b09c7 100644
--- a/src/target/arm7_9_common.c
+++ b/src/target/arm7_9_common.c
@@ -66,7 +66,7 @@ static int arm7_9_clear_watchpoints(struct arm7_9_common *arm7_9)
  * @param arm7_9 Pointer to the common struct for an ARM7/9 target
  * @param breakpoint Pointer to the breakpoint to be used as a watchpoint
  */
-static void arm7_9_assign_wp(struct arm7_9_common *arm7_9, breakpoint_t *breakpoint)
+static void arm7_9_assign_wp(struct arm7_9_common *arm7_9, struct breakpoint *breakpoint)
 {
 	if (!arm7_9-&gt;wp0_used)
 	{
@@ -210,7 +210,7 @@ int arm7_9_get_arch_pointers(target_t *target, armv4_5_common_t **armv4_5_p, str
  *         queue.  For software breakpoints, this will be the status of the
  *         required memory reads and writes
  */
-int arm7_9_set_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
+int arm7_9_set_breakpoint(struct target_s *target, struct breakpoint *breakpoint)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	int retval = ERROR_OK;
@@ -339,7 +339,7 @@ int arm7_9_set_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
  *         queue.  For software breakpoints, this will be the status of the
  *         required memory reads and writes
  */
-int arm7_9_unset_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
+int arm7_9_unset_breakpoint(struct target_s *target, struct breakpoint *breakpoint)
 {
 	int retval = ERROR_OK;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
@@ -434,7 +434,7 @@ int arm7_9_unset_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
  * @return An error status if there is a problem adding the breakpoint or the
  *         result of setting the breakpoint
  */
-int arm7_9_add_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
+int arm7_9_add_breakpoint(struct target_s *target, struct breakpoint *breakpoint)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 
@@ -484,7 +484,7 @@ int arm7_9_add_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
  * @return Error status if there was a problem unsetting the breakpoint or the
  *         watchpoints could not be cleared
  */
-int arm7_9_remove_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
+int arm7_9_remove_breakpoint(struct target_s *target, struct breakpoint *breakpoint)
 {
 	int retval = ERROR_OK;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
@@ -1788,7 +1788,7 @@ void arm7_9_enable_watchpoints(struct target_s *target)
  */
 void arm7_9_enable_breakpoints(struct target_s *target)
 {
-	breakpoint_t *breakpoint = target-&gt;breakpoints;
+	struct breakpoint *breakpoint = target-&gt;breakpoints;
 
 	/* set any pending breakpoints */
 	while (breakpoint)
@@ -1802,7 +1802,7 @@ int arm7_9_resume(struct target_s *target, int current, uint32_t address, int ha
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
-	breakpoint_t *breakpoint = target-&gt;breakpoints;
+	struct breakpoint *breakpoint = target-&gt;breakpoints;
 	reg_t *dbg_ctrl = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_CTRL];
 	int err, retval = ERROR_OK;
 
@@ -2014,7 +2014,7 @@ int arm7_9_step(struct target_s *target, int current, uint32_t address, int hand
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
-	breakpoint_t *breakpoint = NULL;
+	struct breakpoint *breakpoint = NULL;
 	int err, retval;
 
 	if (target-&gt;state != TARGET_HALTED)
diff --git a/src/target/arm7_9_common.h b/src/target/arm7_9_common.h
index 0ef5eb6..eb4eb1a 100644
--- a/src/target/arm7_9_common.h
+++ b/src/target/arm7_9_common.h
@@ -143,8 +143,8 @@ int arm7_9_blank_check_memory(struct target_s *target, uint32_t address, uint32_
 
 int arm7_9_run_algorithm(struct target_s *target, int num_mem_params, struct mem_param *mem_params, int num_reg_prams, struct reg_param *reg_param, uint32_t entry_point, void *arch_info);
 
-int arm7_9_add_breakpoint(struct target_s *target, breakpoint_t *breakpoint);
-int arm7_9_remove_breakpoint(struct target_s *target, breakpoint_t *breakpoint);
+int arm7_9_add_breakpoint(struct target_s *target, struct breakpoint *breakpoint);
+int arm7_9_remove_breakpoint(struct target_s *target, struct breakpoint *breakpoint);
 int arm7_9_add_watchpoint(struct target_s *target, struct watchpoint *watchpoint);
 int arm7_9_remove_watchpoint(struct target_s *target, struct watchpoint *watchpoint);
 
diff --git a/src/target/breakpoints.c b/src/target/breakpoints.c
index 08008c2..a65ca82 100644
--- a/src/target/breakpoints.c
+++ b/src/target/breakpoints.c
@@ -44,8 +44,8 @@ static int bpwp_unique_id;
 
 int breakpoint_add(target_t *target, uint32_t address, uint32_t length, enum breakpoint_type type)
 {
-	breakpoint_t *breakpoint = target-&gt;breakpoints;
-	breakpoint_t **breakpoint_p = &amp;target-&gt;breakpoints;
+	struct breakpoint *breakpoint = target-&gt;breakpoints;
+	struct breakpoint **breakpoint_p = &amp;target-&gt;breakpoints;
 	int retval;
 	int n;
 
@@ -62,7 +62,7 @@ int breakpoint_add(target_t *target, uint32_t address, uint32_t length, enum bre
 		breakpoint = breakpoint-&gt;next;
 	}
 
-	(*breakpoint_p) = malloc(sizeof(breakpoint_t));
+	(*breakpoint_p) = malloc(sizeof(struct breakpoint));
 	(*breakpoint_p)-&gt;address = address;
 	(*breakpoint_p)-&gt;length = length;
 	(*breakpoint_p)-&gt;type = type;
@@ -107,10 +107,10 @@ int breakpoint_add(target_t *target, uint32_t address, uint32_t length, enum bre
 }
 
 /* free up a breakpoint */
-static void breakpoint_free(target_t *target, breakpoint_t *breakpoint_remove)
+static void breakpoint_free(target_t *target, struct breakpoint *breakpoint_remove)
 {
-	breakpoint_t *breakpoint = target-&gt;breakpoints;
-	breakpoint_t **breakpoint_p = &amp;target-&gt;breakpoints;
+	struct breakpoint *breakpoint = target-&gt;breakpoints;
+	struct breakpoint **breakpoint_p = &amp;target-&gt;breakpoints;
 
 	while (breakpoint)
 	{
@@ -133,8 +133,8 @@ static void breakpoint_free(target_t *target, breakpoint_t *breakpoint_remove)
 
 void breakpoint_remove(target_t *target, uint32_t address)
 {
-	breakpoint_t *breakpoint = target-&gt;breakpoints;
-	breakpoint_t **breakpoint_p = &amp;target-&gt;breakpoints;
+	struct breakpoint *breakpoint = target-&gt;breakpoints;
+	struct breakpoint **breakpoint_p = &amp;target-&gt;breakpoints;
 
 	while (breakpoint)
 	{
@@ -156,7 +156,7 @@ void breakpoint_remove(target_t *target, uint32_t address)
 
 void breakpoint_clear_target(target_t *target)
 {
-	breakpoint_t *breakpoint;
+	struct breakpoint *breakpoint;
 	LOG_DEBUG(&quot;Delete all breakpoints for target: %s&quot;, target_get_name( target ));
 	while ((breakpoint = target-&gt;breakpoints) != NULL)
 	{
@@ -164,9 +164,9 @@ void breakpoint_clear_target(target_t *target)
 	}
 }
 
-breakpoint_t* breakpoint_find(target_t *target, uint32_t address)
+struct breakpoint* breakpoint_find(target_t *target, uint32_t address)
 {
-	breakpoint_t *breakpoint = target-&gt;breakpoints;
+	struct breakpoint *breakpoint = target-&gt;breakpoints;
 
 	while (breakpoint)
 	{
diff --git a/src/target/breakpoints.h b/src/target/breakpoints.h
index 57c06c7..2a79a9a 100644
--- a/src/target/breakpoints.h
+++ b/src/target/breakpoints.h
@@ -35,16 +35,16 @@ enum watchpoint_rw
 	WPT_READ = 0, WPT_WRITE = 1, WPT_ACCESS = 2
 };
 
-typedef struct breakpoint_s
+struct breakpoint
 {
 	uint32_t address;
 	int length;
 	enum breakpoint_type type;
 	int set;
 	uint8_t *orig_instr;
-	struct breakpoint_s *next;
+	struct breakpoint *next;
 	int unique_id;
-} breakpoint_t;
+};
 
 struct watchpoint
 {
@@ -63,7 +63,7 @@ int breakpoint_add(struct target_s *target,
 		uint32_t address, uint32_t length, enum breakpoint_type type);
 void breakpoint_remove(struct target_s *target, uint32_t address);
 
-breakpoint_t* breakpoint_find(struct target_s *target, uint32_t address);
+struct breakpoint* breakpoint_find(struct target_s *target, uint32_t address);
 
 void watchpoint_clear_target(struct target_s *target);
 int watchpoint_add(struct target_s *target,
diff --git a/src/target/cortex_a8.c b/src/target/cortex_a8.c
index 983bef8..905860f 100644
--- a/src/target/cortex_a8.c
+++ b/src/target/cortex_a8.c
@@ -44,9 +44,9 @@ static int cortex_a8_poll(target_t *target);
 static int cortex_a8_debug_entry(target_t *target);
 static int cortex_a8_restore_context(target_t *target);
 static int cortex_a8_set_breakpoint(struct target_s *target,
-		breakpoint_t *breakpoint, uint8_t matchmode);
+		struct breakpoint *breakpoint, uint8_t matchmode);
 static int cortex_a8_unset_breakpoint(struct target_s *target,
-		breakpoint_t *breakpoint);
+		struct breakpoint *breakpoint);
 static int cortex_a8_dap_read_coreregister_u32(target_t *target,
 		uint32_t *value, int regnum);
 static int cortex_a8_dap_write_coreregister_u32(target_t *target,
@@ -445,7 +445,7 @@ static int cortex_a8_resume(struct target_s *target, int current,
 	struct armv4_5_common_s *armv4_5 = &amp;armv7a-&gt;armv4_5_common;
 	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
-//	breakpoint_t *breakpoint = NULL;
+//	struct breakpoint *breakpoint = NULL;
 	uint32_t resume_pc, dscr;
 
 	uint8_t saved_apsel = dap_ap_get_select(swjdp);
@@ -725,8 +725,8 @@ static int cortex_a8_step(struct target_s *target, int current, uint32_t address
 {
 	struct armv7a_common *armv7a = target_to_armv7a(target);
 	struct armv4_5_common_s *armv4_5 = &amp;armv7a-&gt;armv4_5_common;
-	breakpoint_t *breakpoint = NULL;
-	breakpoint_t stepbreakpoint;
+	struct breakpoint *breakpoint = NULL;
+	struct breakpoint stepbreakpoint;
 
 	int timeout = 100;
 
@@ -961,7 +961,7 @@ int cortex_a8_write_core_reg(struct target_s *target, int num,
 
 /* Setup hardware Breakpoint Register Pair */
 static int cortex_a8_set_breakpoint(struct target_s *target,
-		breakpoint_t *breakpoint, uint8_t matchmode)
+		struct breakpoint *breakpoint, uint8_t matchmode)
 {
 	int retval;
 	int brp_i=0;
@@ -1035,7 +1035,7 @@ static int cortex_a8_set_breakpoint(struct target_s *target,
 	return ERROR_OK;
 }
 
-static int cortex_a8_unset_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
+static int cortex_a8_unset_breakpoint(struct target_s *target, struct breakpoint *breakpoint)
 {
 	int retval;
 	struct cortex_a8_common *cortex_a8 = target_to_cortex_a8(target);
@@ -1093,7 +1093,7 @@ static int cortex_a8_unset_breakpoint(struct target_s *target, breakpoint_t *bre
 	return ERROR_OK;
 }
 
-int cortex_a8_add_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
+int cortex_a8_add_breakpoint(struct target_s *target, struct breakpoint *breakpoint)
 {
 	struct cortex_a8_common *cortex_a8 = target_to_cortex_a8(target);
 
@@ -1110,7 +1110,7 @@ int cortex_a8_add_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
 	return ERROR_OK;
 }
 
-static int cortex_a8_remove_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
+static int cortex_a8_remove_breakpoint(struct target_s *target, struct breakpoint *breakpoint)
 {
 	struct cortex_a8_common *cortex_a8 = target_to_cortex_a8(target);
 
diff --git a/src/target/cortex_m3.c b/src/target/cortex_m3.c
index d304ca3..041f806 100644
--- a/src/target/cortex_m3.c
+++ b/src/target/cortex_m3.c
@@ -45,8 +45,8 @@
 
 
 /* forward declarations */
-static int cortex_m3_set_breakpoint(struct target_s *target, breakpoint_t *breakpoint);
-static int cortex_m3_unset_breakpoint(struct target_s *target, breakpoint_t *breakpoint);
+static int cortex_m3_set_breakpoint(struct target_s *target, struct breakpoint *breakpoint);
+static int cortex_m3_unset_breakpoint(struct target_s *target, struct breakpoint *breakpoint);
 static void cortex_m3_enable_watchpoints(struct target_s *target);
 static int cortex_m3_store_core_reg_u32(target_t *target,
 		enum armv7m_regtype type, uint32_t num, uint32_t value);
@@ -533,7 +533,7 @@ static int cortex_m3_soft_reset_halt(struct target_s *target)
 
 static void cortex_m3_enable_breakpoints(struct target_s *target)
 {
-	breakpoint_t *breakpoint = target-&gt;breakpoints;
+	struct breakpoint *breakpoint = target-&gt;breakpoints;
 
 	/* set any pending breakpoints */
 	while (breakpoint)
@@ -548,7 +548,7 @@ static int cortex_m3_resume(struct target_s *target, int current,
 		uint32_t address, int handle_breakpoints, int debug_execution)
 {
 	struct armv7m_common *armv7m = target_to_armv7m(target);
-	breakpoint_t *breakpoint = NULL;
+	struct breakpoint *breakpoint = NULL;
 	uint32_t resume_pc;
 
 	if (target-&gt;state != TARGET_HALTED)
@@ -638,7 +638,7 @@ static int cortex_m3_step(struct target_s *target, int current,
 	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 	struct armv7m_common *armv7m = &amp;cortex_m3-&gt;armv7m;
 	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
-	breakpoint_t *breakpoint = NULL;
+	struct breakpoint *breakpoint = NULL;
 
 	if (target-&gt;state != TARGET_HALTED)
 	{
@@ -833,7 +833,7 @@ static int cortex_m3_deassert_reset(target_t *target)
 }
 
 static int
-cortex_m3_set_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
+cortex_m3_set_breakpoint(struct target_s *target, struct breakpoint *breakpoint)
 {
 	int retval;
 	int fp_num = 0;
@@ -900,7 +900,7 @@ cortex_m3_set_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
 }
 
 static int
-cortex_m3_unset_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
+cortex_m3_unset_breakpoint(struct target_s *target, struct breakpoint *breakpoint)
 {
 	int retval;
 	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
@@ -955,7 +955,7 @@ cortex_m3_unset_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
 }
 
 static int
-cortex_m3_add_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
+cortex_m3_add_breakpoint(struct target_s *target, struct breakpoint *breakpoint)
 {
 	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 
@@ -1004,7 +1004,7 @@ cortex_m3_add_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
 }
 
 static int
-cortex_m3_remove_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
+cortex_m3_remove_breakpoint(struct target_s *target, struct breakpoint *breakpoint)
 {
 	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 
diff --git a/src/target/mips_m4k.c b/src/target/mips_m4k.c
index bd24874..095260c 100644
--- a/src/target/mips_m4k.c
+++ b/src/target/mips_m4k.c
@@ -359,7 +359,7 @@ int mips_m4k_resume(struct target_s *target, int current, uint32_t address, int
 {
 	struct mips32_common *mips32 = target-&gt;arch_info;
 	struct mips_ejtag *ejtag_info = &amp;mips32-&gt;ejtag_info;
-	breakpoint_t *breakpoint = NULL;
+	struct breakpoint *breakpoint = NULL;
 	uint32_t resume_pc;
 
 	if (target-&gt;state != TARGET_HALTED)
@@ -431,7 +431,7 @@ int mips_m4k_step(struct target_s *target, int current, uint32_t address, int ha
 	/* get pointers to arch-specific information */
 	struct mips32_common *mips32 = target-&gt;arch_info;
 	struct mips_ejtag *ejtag_info = &amp;mips32-&gt;ejtag_info;
-	breakpoint_t *breakpoint = NULL;
+	struct breakpoint *breakpoint = NULL;
 
 	if (target-&gt;state != TARGET_HALTED)
 	{
@@ -480,7 +480,7 @@ int mips_m4k_step(struct target_s *target, int current, uint32_t address, int ha
 
 void mips_m4k_enable_breakpoints(struct target_s *target)
 {
-	breakpoint_t *breakpoint = target-&gt;breakpoints;
+	struct breakpoint *breakpoint = target-&gt;breakpoints;
 
 	/* set any pending breakpoints */
 	while (breakpoint)
@@ -491,7 +491,7 @@ void mips_m4k_enable_breakpoints(struct target_s *target)
 	}
 }
 
-int mips_m4k_set_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
+int mips_m4k_set_breakpoint(struct target_s *target, struct breakpoint *breakpoint)
 {
 	struct mips32_common *mips32 = target-&gt;arch_info;
 	struct mips32_comparator * comparator_list = mips32-&gt;inst_break_list;
@@ -582,7 +582,7 @@ int mips_m4k_set_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
 	return ERROR_OK;
 }
 
-int mips_m4k_unset_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
+int mips_m4k_unset_breakpoint(struct target_s *target, struct breakpoint *breakpoint)
 {
 	/* get pointers to arch-specific information */
 	struct mips32_common *mips32 = target-&gt;arch_info;
@@ -657,7 +657,7 @@ int mips_m4k_unset_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
 	return ERROR_OK;
 }
 
-int mips_m4k_add_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
+int mips_m4k_add_breakpoint(struct target_s *target, struct breakpoint *breakpoint)
 {
 	struct mips32_common *mips32 = target-&gt;arch_info;
 
@@ -677,7 +677,7 @@ int mips_m4k_add_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
 	return ERROR_OK;
 }
 
-int mips_m4k_remove_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
+int mips_m4k_remove_breakpoint(struct target_s *target, struct breakpoint *breakpoint)
 {
 	/* get pointers to arch-specific information */
 	struct mips32_common *mips32 = target-&gt;arch_info;
diff --git a/src/target/mips_m4k.h b/src/target/mips_m4k.h
index 6044974..b13dee2 100644
--- a/src/target/mips_m4k.h
+++ b/src/target/mips_m4k.h
@@ -39,10 +39,10 @@ int mips_m4k_bulk_write_memory(struct target_s *target,
 		uint32_t address, uint32_t count, uint8_t *buffer);
 
 void mips_m4k_enable_breakpoints(struct target_s *target);
-int mips_m4k_set_breakpoint(struct target_s *target, breakpoint_t *bp);
-int mips_m4k_unset_breakpoint(struct target_s *target, breakpoint_t *bp);
-int mips_m4k_add_breakpoint(struct target_s *target, breakpoint_t *bp);
-int mips_m4k_remove_breakpoint(struct target_s *target, breakpoint_t *bp);
+int mips_m4k_set_breakpoint(struct target_s *target, struct breakpoint *bp);
+int mips_m4k_unset_breakpoint(struct target_s *target, struct breakpoint *bp);
+int mips_m4k_add_breakpoint(struct target_s *target, struct breakpoint *bp);
+int mips_m4k_remove_breakpoint(struct target_s *target, struct breakpoint *bp);
 
 void mips_m4k_enable_watchpoints(struct target_s *target);
 int mips_m4k_set_watchpoint(struct target_s *target, struct watchpoint *wp);
diff --git a/src/target/target.c b/src/target/target.c
index e46dec9..6f04af6 100644
--- a/src/target/target.c
+++ b/src/target/target.c
@@ -600,12 +600,12 @@ int target_bulk_write_memory(struct target_s *target,
 }
 
 int target_add_breakpoint(struct target_s *target,
-		struct breakpoint_s *breakpoint)
+		struct breakpoint *breakpoint)
 {
 	return target-&gt;type-&gt;add_breakpoint(target, breakpoint);
 }
 int target_remove_breakpoint(struct target_s *target,
-		struct breakpoint_s *breakpoint)
+		struct breakpoint *breakpoint)
 {
 	return target-&gt;type-&gt;remove_breakpoint(target, breakpoint);
 }
@@ -2712,7 +2712,7 @@ COMMAND_HANDLER(handle_test_image_command)
 static int handle_bp_command_list(struct command_context_s *cmd_ctx)
 {
 	target_t *target = get_current_target(cmd_ctx);
-	breakpoint_t *breakpoint = target-&gt;breakpoints;
+	struct breakpoint *breakpoint = target-&gt;breakpoints;
 	while (breakpoint)
 	{
 		if (breakpoint-&gt;type == BKPT_SOFT)
diff --git a/src/target/target.h b/src/target/target.h
index e872ec6..ef3f6cc 100644
--- a/src/target/target.h
+++ b/src/target/target.h
@@ -152,7 +152,7 @@ typedef struct target_s
 	// also see: target_state_name()
 	enum target_state state;			/* the current backend-state (running, halted, ...) */
 	struct reg_cache *reg_cache;		/* the first register cache of the target (core regs) */
-	struct breakpoint_s *breakpoints;	/* list of breakpoints */
+	struct breakpoint *breakpoints;	/* list of breakpoints */
 	struct watchpoint *watchpoints;	/* list of watchpoints */
 	struct trace_s *trace_info;			/* generic trace information */
 	struct debug_msg_receiver *dbgmsg;/* list of debug message receivers */
@@ -313,14 +313,14 @@ void target_reset_examined(struct target_s *target);
  * This routine is a wrapper for target-&gt;type-&gt;add_breakpoint.
  */
 int target_add_breakpoint(struct target_s *target,
-		struct breakpoint_s *breakpoint);
+		struct breakpoint *breakpoint);
 /**
  * Remove the @a breakpoint for @a target.
  *
  * This routine is a wrapper for target-&gt;type-&gt;remove_breakpoint.
  */
 int target_remove_breakpoint(struct target_s *target,
-		struct breakpoint_s *breakpoint);
+		struct breakpoint *breakpoint);
 /**
  * Add the @a watchpoint for @a target.
  *
diff --git a/src/target/target_type.h b/src/target/target_type.h
index 21d7295..3328879 100644
--- a/src/target/target_type.h
+++ b/src/target/target_type.h
@@ -131,12 +131,12 @@ struct target_type_s
 	 *
 	 * Upon GDB connection all breakpoints/watchpoints are cleared.
 	 */
-	int (*add_breakpoint)(struct target_s *target, breakpoint_t *breakpoint);
+	int (*add_breakpoint)(struct target_s *target, struct breakpoint *breakpoint);
 
 	/* remove breakpoint. hw will only be updated if the target is currently halted.
 	 * However, this method can be invoked on unresponsive targets.
 	 */
-	int (*remove_breakpoint)(struct target_s *target, breakpoint_t *breakpoint);
+	int (*remove_breakpoint)(struct target_s *target, struct breakpoint *breakpoint);
 	int (*add_watchpoint)(struct target_s *target, struct watchpoint *watchpoint);
 	/* remove watchpoint. hw will only be updated if the target is currently halted.
 	 * However, this method can be invoked on unresponsive targets.
diff --git a/src/target/xscale.c b/src/target/xscale.c
index 4439b0e..04a5f64 100644
--- a/src/target/xscale.c
+++ b/src/target/xscale.c
@@ -63,9 +63,9 @@ static int xscale_debug_entry(target_t *);
 static int xscale_restore_context(target_t *);
 static int xscale_get_reg(reg_t *reg);
 static int xscale_set_reg(reg_t *reg, uint8_t *buf);
-static int xscale_set_breakpoint(struct target_s *, breakpoint_t *);
+static int xscale_set_breakpoint(struct target_s *, struct breakpoint *);
 static int xscale_set_watchpoint(struct target_s *, struct watchpoint *);
-static int xscale_unset_breakpoint(struct target_s *, breakpoint_t *);
+static int xscale_unset_breakpoint(struct target_s *, struct breakpoint *);
 static int xscale_read_trace(target_t *);
 
 
@@ -1130,7 +1130,7 @@ static int xscale_enable_single_step(struct target_s *target, uint32_t next_pc)
 
 	if (xscale-&gt;ibcr0_used)
 	{
-		breakpoint_t *ibcr0_bp = breakpoint_find(target, buf_get_u32(ibcr0-&gt;value, 0, 32) &amp; 0xfffffffe);
+		struct breakpoint *ibcr0_bp = breakpoint_find(target, buf_get_u32(ibcr0-&gt;value, 0, 32) &amp; 0xfffffffe);
 
 		if (ibcr0_bp)
 		{
@@ -1175,7 +1175,7 @@ static void xscale_enable_watchpoints(struct target_s *target)
 
 static void xscale_enable_breakpoints(struct target_s *target)
 {
-	breakpoint_t *breakpoint = target-&gt;breakpoints;
+	struct breakpoint *breakpoint = target-&gt;breakpoints;
 
 	/* set any pending breakpoints */
 	while (breakpoint)
@@ -1191,7 +1191,7 @@ static int xscale_resume(struct target_s *target, int current,
 {
 	struct xscale_common *xscale = target_to_xscale(target);
 	struct armv4_5_common_s *armv4_5 = &amp;xscale-&gt;armv4_5_common;
-	breakpoint_t *breakpoint = target-&gt;breakpoints;
+	struct breakpoint *breakpoint = target-&gt;breakpoints;
 	uint32_t current_pc;
 	int retval;
 	int i;
@@ -1423,7 +1423,7 @@ static int xscale_step(struct target_s *target, int current,
 		uint32_t address, int handle_breakpoints)
 {
 	struct armv4_5_common_s *armv4_5 = target_to_armv4_5(target);
-	breakpoint_t *breakpoint = target-&gt;breakpoints;
+	struct breakpoint *breakpoint = target-&gt;breakpoints;
 
 	uint32_t current_pc;
 	int retval;
@@ -1518,7 +1518,7 @@ static int xscale_assert_reset(target_t *target)
 static int xscale_deassert_reset(target_t *target)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
-	breakpoint_t *breakpoint = target-&gt;breakpoints;
+	struct breakpoint *breakpoint = target-&gt;breakpoints;
 
 	LOG_DEBUG(&quot;-&quot;);
 
@@ -2046,7 +2046,7 @@ static void xscale_enable_mmu_caches(target_t *target, int mmu,
 }
 
 static int xscale_set_breakpoint(struct target_s *target,
-		breakpoint_t *breakpoint)
+		struct breakpoint *breakpoint)
 {
 	int retval;
 	struct xscale_common *xscale = target_to_xscale(target);
@@ -2119,7 +2119,7 @@ static int xscale_set_breakpoint(struct target_s *target,
 }
 
 static int xscale_add_breakpoint(struct target_s *target,
-		breakpoint_t *breakpoint)
+		struct breakpoint *breakpoint)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
 
@@ -2150,7 +2150,7 @@ static int xscale_add_breakpoint(struct target_s *target,
 }
 
 static int xscale_unset_breakpoint(struct target_s *target,
-		breakpoint_t *breakpoint)
+		struct breakpoint *breakpoint)
 {
 	int retval;
 	struct xscale_common *xscale = target_to_xscale(target);
@@ -2204,7 +2204,7 @@ static int xscale_unset_breakpoint(struct target_s *target,
 	return ERROR_OK;
 }
 
-static int xscale_remove_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
+static int xscale_remove_breakpoint(struct target_s *target, struct breakpoint *breakpoint)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
 

commit 1e51cf049cfed3bc42a748d848210f8e4b472282
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 09:11:22 2009 -0800

    xscale_trace_t -&gt; struct xscale_trace
    
    Remove misleading typedef and redundant suffix from struct xscale_trace.

diff --git a/src/target/xscale.h b/src/target/xscale.h
index 31ab281..936782c 100644
--- a/src/target/xscale.h
+++ b/src/target/xscale.h
@@ -66,7 +66,7 @@ struct xscale_trace_data
 	struct xscale_trace_data *next;
 };
 
-typedef struct xscale_trace_s
+struct xscale_trace
 {
 	trace_status_t capture_status;	/* current state of capture run */
 	struct image_s *image;					/* source for target opcodes */
@@ -76,7 +76,7 @@ typedef struct xscale_trace_s
 	int pc_ok;
 	uint32_t current_pc;
 	armv4_5_state_t core_state;		/* current core state (ARM, Thumb, Jazelle) */
-} xscale_trace_t;
+};
 
 struct xscale_common
 {
@@ -120,7 +120,7 @@ struct xscale_common
 
 	uint8_t vector_catch;
 
-	xscale_trace_t trace;
+	struct xscale_trace trace;
 
 	int arch_debug_reason;
 

commit e76d085603c36efddd9b38cc7383f86ee399177c
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 09:10:47 2009 -0800

    xscale_trace_entry_t -&gt; struct xscale_trace_entry
    
    Remove misleading typedef and redundant suffix from struct xscale_trace_entry.

diff --git a/src/target/xscale.c b/src/target/xscale.c
index 424259b..4439b0e 100644
--- a/src/target/xscale.c
+++ b/src/target/xscale.c
@@ -2534,7 +2534,7 @@ static int xscale_read_trace(target_t *target)
 	(*trace_data_p)-&gt;chkpt0 = trace_buffer[256];
 	(*trace_data_p)-&gt;chkpt1 = trace_buffer[257];
 	(*trace_data_p)-&gt;last_instruction = buf_get_u32(armv4_5-&gt;core_cache-&gt;reg_list[15].value, 0, 32);
-	(*trace_data_p)-&gt;entries = malloc(sizeof(xscale_trace_entry_t) * (256 - j));
+	(*trace_data_p)-&gt;entries = malloc(sizeof(struct xscale_trace_entry) * (256 - j));
 	(*trace_data_p)-&gt;depth = 256 - j;
 
 	for (i = j; i &lt; 256; i++)
diff --git a/src/target/xscale.h b/src/target/xscale.h
index 6fb0bf5..31ab281 100644
--- a/src/target/xscale.h
+++ b/src/target/xscale.h
@@ -50,15 +50,15 @@ enum xscale_trace_entry_type
 	XSCALE_TRACE_ADDRESS = 0x1,
 };
 
-typedef struct xscale_trace_entry_s
+struct xscale_trace_entry
 {
 	uint8_t data;
 	enum xscale_trace_entry_type type;
-} xscale_trace_entry_t;
+};
 
 struct xscale_trace_data
 {
-	xscale_trace_entry_t *entries;
+	struct xscale_trace_entry *entries;
 	int depth;
 	uint32_t chkpt0;
 	uint32_t chkpt1;

commit abd7b404086d3c63b163a5ffa786f3538714b7d9
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 09:09:40 2009 -0800

    target_event_action_t -&gt; struct target_event_action
    
    Remove misleading typedef and redundant suffix from struct target_event_action.

diff --git a/src/target/target.c b/src/target/target.c
index fef7c29..e46dec9 100644
--- a/src/target/target.c
+++ b/src/target/target.c
@@ -3495,7 +3495,7 @@ void target_all_handle_event(enum target_event e)
  */
 void target_handle_event(target_t *target, enum target_event e)
 {
-	target_event_action_t *teap;
+	struct target_event_action *teap;
 
 	for (teap = target-&gt;event_action; teap != NULL; teap = teap-&gt;next) {
 		if (teap-&gt;event == e) {
@@ -3613,7 +3613,7 @@ static int target_configure(Jim_GetOptInfo *goi, target_t *target)
 			}
 
 			{
-				target_event_action_t *teap;
+				struct target_event_action *teap;
 
 				teap = target-&gt;event_action;
 				/* replace existing? */
@@ -4183,7 +4183,7 @@ static int tcl_target_func(Jim_Interp *interp, int argc, Jim_Obj *const *argv)
 		 * scripts/programs should use 'name cget -event NAME'
 		 */
 		{
-			target_event_action_t *teap;
+			struct target_event_action *teap;
 			teap = target-&gt;event_action;
 			command_print(cmd_ctx, &quot;Event actions for target (%d) %s\n&quot;,
 						   target-&gt;target_number,
diff --git a/src/target/target.h b/src/target/target.h
index 73d6319..e872ec6 100644
--- a/src/target/target.h
+++ b/src/target/target.h
@@ -128,9 +128,6 @@ struct working_area
 struct target_type_s;
 typedef struct target_type_s target_type_t;
 
-/* forward decloration */
-typedef struct target_event_action_s target_event_action_t;
-
 typedef struct target_s
 {
 	target_type_t *type;				/* target type definition (name, access functions) */
@@ -138,7 +135,7 @@ typedef struct target_s
 	int target_number;					/* DO NOT USE!  field to be removed in 2010 */
 	struct jtag_tap *tap;					/* where on the jtag chain is this */
 	const char *variant;				/* what varient of this chip is it? */
-	target_event_action_t *event_action;
+	struct target_event_action *event_action;
 
 	int reset_halt;						/* attempt resetting the CPU into the halted mode? */
 	uint32_t working_area;					/* working area (initialized RAM). Evaluated
@@ -225,11 +222,11 @@ enum target_event
 	TARGET_EVENT_GDB_FLASH_WRITE_END,
 };
 
-struct target_event_action_s {
+struct target_event_action {
 	enum target_event event;
 	Jim_Obj *body;
 	int has_percent;
-	target_event_action_t *next;
+	struct target_event_action *next;
  };
 
 struct target_event_callback

commit 55edfdf2ab6c5d1d6cd4c1c97a79cbb1d39b1f22
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 09:06:49 2009 -0800

    arm_instruction_t -&gt; struct arm_instruction
    
    Remove misleading typedef and redundant suffix from struct arm_instruction.

diff --git a/src/target/arm_disassembler.c b/src/target/arm_disassembler.c
index ee087b1..ce33885 100644
--- a/src/target/arm_disassembler.c
+++ b/src/target/arm_disassembler.c
@@ -107,7 +107,7 @@ static uint32_t ror(uint32_t value, int places)
 }
 
 static int evaluate_pld(uint32_t opcode,
-		uint32_t address, arm_instruction_t *instruction)
+		uint32_t address, struct arm_instruction *instruction)
 {
 	/* PLD */
 	if ((opcode &amp; 0x0d70f000) == 0x0550f000)
@@ -129,7 +129,7 @@ static int evaluate_pld(uint32_t opcode,
 }
 
 static int evaluate_swi(uint32_t opcode,
-		uint32_t address, arm_instruction_t *instruction)
+		uint32_t address, struct arm_instruction *instruction)
 {
 	instruction-&gt;type = ARM_SWI;
 
@@ -141,7 +141,7 @@ static int evaluate_swi(uint32_t opcode,
 }
 
 static int evaluate_blx_imm(uint32_t opcode,
-		uint32_t address, arm_instruction_t *instruction)
+		uint32_t address, struct arm_instruction *instruction)
 {
 	int offset;
 	uint32_t immediate;
@@ -174,7 +174,7 @@ static int evaluate_blx_imm(uint32_t opcode,
 }
 
 static int evaluate_b_bl(uint32_t opcode,
-		uint32_t address, arm_instruction_t *instruction)
+		uint32_t address, struct arm_instruction *instruction)
 {
 	uint8_t L;
 	uint32_t immediate;
@@ -212,7 +212,7 @@ static int evaluate_b_bl(uint32_t opcode,
 /* Coprocessor load/store and double register transfers */
 /* both normal and extended instruction space (condition field b1111) */
 static int evaluate_ldc_stc_mcrr_mrrc(uint32_t opcode,
-		uint32_t address, arm_instruction_t *instruction)
+		uint32_t address, struct arm_instruction *instruction)
 {
 	uint8_t cp_num = (opcode &amp; 0xf00) &gt;&gt; 8;
 
@@ -293,7 +293,7 @@ static int evaluate_ldc_stc_mcrr_mrrc(uint32_t opcode,
 /* Coprocessor register transfer instructions */
 /* both normal and extended instruction space (condition field b1111) */
 static int evaluate_cdp_mcr_mrc(uint32_t opcode,
-		uint32_t address, arm_instruction_t *instruction)
+		uint32_t address, struct arm_instruction *instruction)
 {
 	const char *cond;
 	char* mnemonic;
@@ -343,7 +343,7 @@ static int evaluate_cdp_mcr_mrc(uint32_t opcode,
 
 /* Load/store instructions */
 static int evaluate_load_store(uint32_t opcode,
-		uint32_t address, arm_instruction_t *instruction)
+		uint32_t address, struct arm_instruction *instruction)
 {
 	uint8_t I, P, U, B, W, L;
 	uint8_t Rn, Rd;
@@ -634,7 +634,7 @@ undef:
 
 /* ARMv6 and later support &quot;media&quot; instructions (includes SIMD) */
 static int evaluate_media(uint32_t opcode, uint32_t address,
-		arm_instruction_t *instruction)
+		struct arm_instruction *instruction)
 {
 	char *cp = instruction-&gt;text;
 	char *mnemonic = NULL;
@@ -829,7 +829,7 @@ undef:
 
 /* Miscellaneous load/store instructions */
 static int evaluate_misc_load_store(uint32_t opcode,
-		uint32_t address, arm_instruction_t *instruction)
+		uint32_t address, struct arm_instruction *instruction)
 {
 	uint8_t P, U, I, W, L, S, H;
 	uint8_t Rn, Rd;
@@ -957,7 +957,7 @@ static int evaluate_misc_load_store(uint32_t opcode,
 
 /* Load/store multiples instructions */
 static int evaluate_ldm_stm(uint32_t opcode,
-		uint32_t address, arm_instruction_t *instruction)
+		uint32_t address, struct arm_instruction *instruction)
 {
 	uint8_t P, U, S, W, L, Rn;
 	uint32_t register_list;
@@ -1046,7 +1046,7 @@ static int evaluate_ldm_stm(uint32_t opcode,
 
 /* Multiplies, extra load/stores */
 static int evaluate_mul_and_extra_ld_st(uint32_t opcode,
-		uint32_t address, arm_instruction_t *instruction)
+		uint32_t address, struct arm_instruction *instruction)
 {
 	/* Multiply (accumulate) (long) and Swap/swap byte */
 	if ((opcode &amp; 0x000000f0) == 0x00000090)
@@ -1138,7 +1138,7 @@ static int evaluate_mul_and_extra_ld_st(uint32_t opcode,
 }
 
 static int evaluate_mrs_msr(uint32_t opcode,
-		uint32_t address, arm_instruction_t *instruction)
+		uint32_t address, struct arm_instruction *instruction)
 {
 	int R = (opcode &amp; 0x00400000) &gt;&gt; 22;
 	char *PSR = (R) ? &quot;SPSR&quot; : &quot;CPSR&quot;;
@@ -1193,7 +1193,7 @@ static int evaluate_mrs_msr(uint32_t opcode,
 
 /* Miscellaneous instructions */
 static int evaluate_misc_instr(uint32_t opcode,
-		uint32_t address, arm_instruction_t *instruction)
+		uint32_t address, struct arm_instruction *instruction)
 {
 	/* MRS/MSR */
 	if ((opcode &amp; 0x000000f0) == 0x00000000)
@@ -1384,7 +1384,7 @@ static int evaluate_misc_instr(uint32_t opcode,
 }
 
 static int evaluate_data_proc(uint32_t opcode,
-		uint32_t address, arm_instruction_t *instruction)
+		uint32_t address, struct arm_instruction *instruction)
 {
 	uint8_t I, op, S, Rn, Rd;
 	char *mnemonic = NULL;
@@ -1591,10 +1591,10 @@ static int evaluate_data_proc(uint32_t opcode,
 	return ERROR_OK;
 }
 
-int arm_evaluate_opcode(uint32_t opcode, uint32_t address, arm_instruction_t *instruction)
+int arm_evaluate_opcode(uint32_t opcode, uint32_t address, struct arm_instruction *instruction)
 {
 	/* clear fields, to avoid confusion */
-	memset(instruction, 0, sizeof(arm_instruction_t));
+	memset(instruction, 0, sizeof(struct arm_instruction));
 	instruction-&gt;opcode = opcode;
 	instruction-&gt;instruction_size = 4;
 
@@ -1744,7 +1744,7 @@ int arm_evaluate_opcode(uint32_t opcode, uint32_t address, arm_instruction_t *in
 }
 
 static int evaluate_b_bl_blx_thumb(uint16_t opcode,
-		uint32_t address, arm_instruction_t *instruction)
+		uint32_t address, struct arm_instruction *instruction)
 {
 	uint32_t offset = opcode &amp; 0x7ff;
 	uint32_t opc = (opcode &gt;&gt; 11) &amp; 0x3;
@@ -1799,7 +1799,7 @@ static int evaluate_b_bl_blx_thumb(uint16_t opcode,
 }
 
 static int evaluate_add_sub_thumb(uint16_t opcode,
-		uint32_t address, arm_instruction_t *instruction)
+		uint32_t address, struct arm_instruction *instruction)
 {
 	uint8_t Rd = (opcode &gt;&gt; 0) &amp; 0x7;
 	uint8_t Rn = (opcode &gt;&gt; 3) &amp; 0x7;
@@ -1845,7 +1845,7 @@ static int evaluate_add_sub_thumb(uint16_t opcode,
 }
 
 static int evaluate_shift_imm_thumb(uint16_t opcode,
-		uint32_t address, arm_instruction_t *instruction)
+		uint32_t address, struct arm_instruction *instruction)
 {
 	uint8_t Rd = (opcode &gt;&gt; 0) &amp; 0x7;
 	uint8_t Rm = (opcode &gt;&gt; 3) &amp; 0x7;
@@ -1891,7 +1891,7 @@ static int evaluate_shift_imm_thumb(uint16_t opcode,
 }
 
 static int evaluate_data_proc_imm_thumb(uint16_t opcode,
-		uint32_t address, arm_instruction_t *instruction)
+		uint32_t address, struct arm_instruction *instruction)
 {
 	uint8_t imm = opcode &amp; 0xff;
 	uint8_t Rd = (opcode &gt;&gt; 8) &amp; 0x7;
@@ -1934,7 +1934,7 @@ static int evaluate_data_proc_imm_thumb(uint16_t opcode,
 }
 
 static int evaluate_data_proc_thumb(uint16_t opcode,
-		uint32_t address, arm_instruction_t *instruction)
+		uint32_t address, struct arm_instruction *instruction)
 {
 	uint8_t high_reg, op, Rm, Rd,H1,H2;
 	char *mnemonic = NULL;
@@ -2120,7 +2120,7 @@ static inline uint32_t thumb_alignpc4(uint32_t addr)
 }
 
 static int evaluate_load_literal_thumb(uint16_t opcode,
-		uint32_t address, arm_instruction_t *instruction)
+		uint32_t address, struct arm_instruction *instruction)
 {
 	uint32_t immediate;
 	uint8_t Rd = (opcode &gt;&gt; 8) &amp; 0x7;
@@ -2145,7 +2145,7 @@ static int evaluate_load_literal_thumb(uint16_t opcode,
 }
 
 static int evaluate_load_store_reg_thumb(uint16_t opcode,
-		uint32_t address, arm_instruction_t *instruction)
+		uint32_t address, struct arm_instruction *instruction)
 {
 	uint8_t Rd = (opcode &gt;&gt; 0) &amp; 0x7;
 	uint8_t Rn = (opcode &gt;&gt; 3) &amp; 0x7;
@@ -2203,7 +2203,7 @@ static int evaluate_load_store_reg_thumb(uint16_t opcode,
 }
 
 static int evaluate_load_store_imm_thumb(uint16_t opcode,
-		uint32_t address, arm_instruction_t *instruction)
+		uint32_t address, struct arm_instruction *instruction)
 {
 	uint32_t offset = (opcode &gt;&gt; 6) &amp; 0x1f;
 	uint8_t Rd = (opcode &gt;&gt; 0) &amp; 0x7;
@@ -2250,7 +2250,7 @@ static int evaluate_load_store_imm_thumb(uint16_t opcode,
 }
 
 static int evaluate_load_store_stack_thumb(uint16_t opcode,
-		uint32_t address, arm_instruction_t *instruction)
+		uint32_t address, struct arm_instruction *instruction)
 {
 	uint32_t offset = opcode  &amp; 0xff;
 	uint8_t Rd = (opcode &gt;&gt; 8) &amp; 0x7;
@@ -2282,7 +2282,7 @@ static int evaluate_load_store_stack_thumb(uint16_t opcode,
 }
 
 static int evaluate_add_sp_pc_thumb(uint16_t opcode,
-		uint32_t address, arm_instruction_t *instruction)
+		uint32_t address, struct arm_instruction *instruction)
 {
 	uint32_t imm = opcode  &amp; 0xff;
 	uint8_t Rd = (opcode &gt;&gt; 8) &amp; 0x7;
@@ -2316,7 +2316,7 @@ static int evaluate_add_sp_pc_thumb(uint16_t opcode,
 }
 
 static int evaluate_adjust_stack_thumb(uint16_t opcode,
-		uint32_t address, arm_instruction_t *instruction)
+		uint32_t address, struct arm_instruction *instruction)
 {
 	uint32_t imm = opcode  &amp; 0x7f;
 	uint8_t opc = opcode &amp; (1 &lt;&lt; 7);
@@ -2347,7 +2347,7 @@ static int evaluate_adjust_stack_thumb(uint16_t opcode,
 }
 
 static int evaluate_breakpoint_thumb(uint16_t opcode,
-		uint32_t address, arm_instruction_t *instruction)
+		uint32_t address, struct arm_instruction *instruction)
 {
 	uint32_t imm = opcode  &amp; 0xff;
 
@@ -2361,7 +2361,7 @@ static int evaluate_breakpoint_thumb(uint16_t opcode,
 }
 
 static int evaluate_load_store_multiple_thumb(uint16_t opcode,
-		uint32_t address, arm_instruction_t *instruction)
+		uint32_t address, struct arm_instruction *instruction)
 {
 	uint32_t reg_list = opcode  &amp; 0xff;
 	uint32_t L = opcode &amp; (1 &lt;&lt; 11);
@@ -2439,7 +2439,7 @@ static int evaluate_load_store_multiple_thumb(uint16_t opcode,
 }
 
 static int evaluate_cond_branch_thumb(uint16_t opcode,
-		uint32_t address, arm_instruction_t *instruction)
+		uint32_t address, struct arm_instruction *instruction)
 {
 	uint32_t offset = opcode  &amp; 0xff;
 	uint8_t cond = (opcode &gt;&gt; 8) &amp; 0xf;
@@ -2481,7 +2481,7 @@ static int evaluate_cond_branch_thumb(uint16_t opcode,
 }
 
 static int evaluate_cb_thumb(uint16_t opcode, uint32_t address,
-		arm_instruction_t *instruction)
+		struct arm_instruction *instruction)
 {
 	unsigned offset;
 
@@ -2499,7 +2499,7 @@ static int evaluate_cb_thumb(uint16_t opcode, uint32_t address,
 }
 
 static int evaluate_extend_thumb(uint16_t opcode, uint32_t address,
-		arm_instruction_t *instruction)
+		struct arm_instruction *instruction)
 {
 	/* added in ARMv6 */
 	snprintf(instruction-&gt;text, 128,
@@ -2513,7 +2513,7 @@ static int evaluate_extend_thumb(uint16_t opcode, uint32_t address,
 }
 
 static int evaluate_cps_thumb(uint16_t opcode, uint32_t address,
-		arm_instruction_t *instruction)
+		struct arm_instruction *instruction)
 {
 	/* added in ARMv6 */
 	if ((opcode &amp; 0x0ff0) == 0x0650)
@@ -2534,7 +2534,7 @@ static int evaluate_cps_thumb(uint16_t opcode, uint32_t address,
 }
 
 static int evaluate_byterev_thumb(uint16_t opcode, uint32_t address,
-		arm_instruction_t *instruction)
+		struct arm_instruction *instruction)
 {
 	char *suffix;
 
@@ -2559,7 +2559,7 @@ static int evaluate_byterev_thumb(uint16_t opcode, uint32_t address,
 }
 
 static int evaluate_hint_thumb(uint16_t opcode, uint32_t address,
-		arm_instruction_t *instruction)
+		struct arm_instruction *instruction)
 {
 	char *hint;
 
@@ -2592,7 +2592,7 @@ static int evaluate_hint_thumb(uint16_t opcode, uint32_t address,
 }
 
 static int evaluate_ifthen_thumb(uint16_t opcode, uint32_t address,
-		arm_instruction_t *instruction)
+		struct arm_instruction *instruction)
 {
 	unsigned cond = (opcode &gt;&gt; 4) &amp; 0x0f;
 	char *x = &quot;&quot;, *y = &quot;&quot;, *z = &quot;&quot;;
@@ -2616,10 +2616,10 @@ static int evaluate_ifthen_thumb(uint16_t opcode, uint32_t address,
 	return ERROR_OK;
 }
 
-int thumb_evaluate_opcode(uint16_t opcode, uint32_t address, arm_instruction_t *instruction)
+int thumb_evaluate_opcode(uint16_t opcode, uint32_t address, struct arm_instruction *instruction)
 {
 	/* clear fields, to avoid confusion */
-	memset(instruction, 0, sizeof(arm_instruction_t));
+	memset(instruction, 0, sizeof(struct arm_instruction));
 	instruction-&gt;opcode = opcode;
 	instruction-&gt;instruction_size = 2;
 
@@ -2754,7 +2754,7 @@ int thumb_evaluate_opcode(uint16_t opcode, uint32_t address, arm_instruction_t *
 }
 
 static int t2ev_b_bl(uint32_t opcode, uint32_t address,
-		arm_instruction_t *instruction, char *cp)
+		struct arm_instruction *instruction, char *cp)
 {
 	unsigned offset;
 	unsigned b21 = 1 &lt;&lt; 21;
@@ -2795,7 +2795,7 @@ static int t2ev_b_bl(uint32_t opcode, uint32_t address,
 }
 
 static int t2ev_cond_b(uint32_t opcode, uint32_t address,
-		arm_instruction_t *instruction, char *cp)
+		struct arm_instruction *instruction, char *cp)
 {
 	unsigned offset;
 	unsigned b17 = 1 &lt;&lt; 17;
@@ -2884,7 +2884,7 @@ static const char *special_name(int number)
 }
 
 static int t2ev_hint(uint32_t opcode, uint32_t address,
-		arm_instruction_t *instruction, char *cp)
+		struct arm_instruction *instruction, char *cp)
 {
 	const char *mnemonic;
 
@@ -2924,7 +2924,7 @@ static int t2ev_hint(uint32_t opcode, uint32_t address,
 }
 
 static int t2ev_misc(uint32_t opcode, uint32_t address,
-		arm_instruction_t *instruction, char *cp)
+		struct arm_instruction *instruction, char *cp)
 {
 	const char *mnemonic;
 
@@ -2955,7 +2955,7 @@ static int t2ev_misc(uint32_t opcode, uint32_t address,
 }
 
 static int t2ev_b_misc(uint32_t opcode, uint32_t address,
-		arm_instruction_t *instruction, char *cp)
+		struct arm_instruction *instruction, char *cp)
 {
 	/* permanently undefined */
 	if ((opcode &amp; 0x07f07000) == 0x07f02000) {
@@ -3003,7 +3003,7 @@ undef:
 }
 
 static int t2ev_data_mod_immed(uint32_t opcode, uint32_t address,
-		arm_instruction_t *instruction, char *cp)
+		struct arm_instruction *instruction, char *cp)
 {
 	char *mnemonic = NULL;
 	int rn = (opcode &gt;&gt; 16) &amp; 0xf;
@@ -3149,7 +3149,7 @@ static int t2ev_data_mod_immed(uint32_t opcode, uint32_t address,
 }
 
 static int t2ev_data_immed(uint32_t opcode, uint32_t address,
-		arm_instruction_t *instruction, char *cp)
+		struct arm_instruction *instruction, char *cp)
 {
 	char *mnemonic = NULL;
 	int rn = (opcode &gt;&gt; 16) &amp; 0xf;
@@ -3244,7 +3244,7 @@ do_adr:
 }
 
 static int t2ev_store_single(uint32_t opcode, uint32_t address,
-		arm_instruction_t *instruction, char *cp)
+		struct arm_instruction *instruction, char *cp)
 {
 	unsigned op = (opcode &gt;&gt; 20) &amp; 0xf;
 	char *size = &quot;&quot;;
@@ -3337,7 +3337,7 @@ imm8:
 }
 
 static int t2ev_mul32(uint32_t opcode, uint32_t address,
-		arm_instruction_t *instruction, char *cp)
+		struct arm_instruction *instruction, char *cp)
 {
 	int ra = (opcode &gt;&gt; 12) &amp; 0xf;
 
@@ -3367,7 +3367,7 @@ static int t2ev_mul32(uint32_t opcode, uint32_t address,
 }
 
 static int t2ev_mul64_div(uint32_t opcode, uint32_t address,
-		arm_instruction_t *instruction, char *cp)
+		struct arm_instruction *instruction, char *cp)
 {
 	int op = (opcode &gt;&gt; 4) &amp; 0xf;
 	char *infix = &quot;MUL&quot;;
@@ -3404,7 +3404,7 @@ static int t2ev_mul64_div(uint32_t opcode, uint32_t address,
 }
 
 static int t2ev_ldm_stm(uint32_t opcode, uint32_t address,
-		arm_instruction_t *instruction, char *cp)
+		struct arm_instruction *instruction, char *cp)
 {
 	int rn = (opcode &gt;&gt; 16) &amp; 0xf;
 	int op = (opcode &gt;&gt; 22) &amp; 0x6;
@@ -3454,7 +3454,7 @@ static int t2ev_ldm_stm(uint32_t opcode, uint32_t address,
 
 /* load/store dual or exclusive, table branch */
 static int t2ev_ldrex_strex(uint32_t opcode, uint32_t address,
-		arm_instruction_t *instruction, char *cp)
+		struct arm_instruction *instruction, char *cp)
 {
 	unsigned op1op2 = (opcode &gt;&gt; 20) &amp; 0x3;
 	unsigned op3 = (opcode &gt;&gt; 4) &amp; 0xf;
@@ -3580,7 +3580,7 @@ literal:
 }
 
 static int t2ev_data_shift(uint32_t opcode, uint32_t address,
-		arm_instruction_t *instruction, char *cp)
+		struct arm_instruction *instruction, char *cp)
 {
 	int op = (opcode &gt;&gt; 21) &amp; 0xf;
 	int rd = (opcode &gt;&gt; 8) &amp; 0xf;
@@ -3755,7 +3755,7 @@ immediate:
 }
 
 static int t2ev_data_reg(uint32_t opcode, uint32_t address,
-		arm_instruction_t *instruction, char *cp)
+		struct arm_instruction *instruction, char *cp)
 {
 	char *mnemonic;
 	char * suffix = &quot;&quot;;
@@ -3856,7 +3856,7 @@ static int t2ev_data_reg(uint32_t opcode, uint32_t address,
 }
 
 static int t2ev_load_word(uint32_t opcode, uint32_t address,
-		arm_instruction_t *instruction, char *cp)
+		struct arm_instruction *instruction, char *cp)
 {
 	int rn = (opcode &gt;&gt; 16) &amp; 0xf;
 	int immed;
@@ -3930,7 +3930,7 @@ static int t2ev_load_word(uint32_t opcode, uint32_t address,
 }
 
 static int t2ev_load_byte_hints(uint32_t opcode, uint32_t address,
-		arm_instruction_t *instruction, char *cp)
+		struct arm_instruction *instruction, char *cp)
 {
 	int rn = (opcode &gt;&gt; 16) &amp; 0xf;
 	int rt = (opcode &gt;&gt; 12) &amp; 0xf;
@@ -4109,7 +4109,7 @@ ldrsb_literal:
 }
 
 static int t2ev_load_halfword(uint32_t opcode, uint32_t address,
-		arm_instruction_t *instruction, char *cp)
+		struct arm_instruction *instruction, char *cp)
 {
 	int rn = (opcode &gt;&gt; 16) &amp; 0xf;
 	int rt = (opcode &gt;&gt; 12) &amp; 0xf;
@@ -4191,7 +4191,7 @@ ldrh_literal:
  * always set.  That means eventual arm_simulate_step() support for Thumb2
  * will need work in this area.
  */
-int thumb2_opcode(target_t *target, uint32_t address, arm_instruction_t *instruction)
+int thumb2_opcode(target_t *target, uint32_t address, struct arm_instruction *instruction)
 {
 	int retval;
 	uint16_t op;
@@ -4202,7 +4202,7 @@ int thumb2_opcode(target_t *target, uint32_t address, arm_instruction_t *instruc
 	address &amp;= ~1;
 
 	/* clear fields, to avoid confusion */
-	memset(instruction, 0, sizeof(arm_instruction_t));
+	memset(instruction, 0, sizeof(struct arm_instruction));
 
 	/* read first halfword, see if this is the only one */
 	retval = target_read_u16(target, address, &amp;op);
@@ -4308,7 +4308,7 @@ int thumb2_opcode(target_t *target, uint32_t address, arm_instruction_t *instruc
 	return ERROR_OK;
 }
 
-int arm_access_size(arm_instruction_t *instruction)
+int arm_access_size(struct arm_instruction *instruction)
 {
 	if ((instruction-&gt;type == ARM_LDRB)
 		|| (instruction-&gt;type == ARM_LDRBT)
diff --git a/src/target/arm_disassembler.h b/src/target/arm_disassembler.h
index 77230e0..a3d16f5 100644
--- a/src/target/arm_disassembler.h
+++ b/src/target/arm_disassembler.h
@@ -179,7 +179,7 @@ struct arm_load_store_multiple_instr
 	uint8_t W;
 };
 
-typedef struct arm_instruction_s
+struct arm_instruction
 {
 	enum arm_instruction_type type;
 	char text[128];
@@ -195,15 +195,15 @@ typedef struct arm_instruction_s
 		struct arm_load_store_multiple_instr load_store_multiple;
 	} info;
 
-} arm_instruction_t;
+};
 
 int arm_evaluate_opcode(uint32_t opcode, uint32_t address,
-		arm_instruction_t *instruction);
+		struct arm_instruction *instruction);
 int thumb_evaluate_opcode(uint16_t opcode, uint32_t address,
-		arm_instruction_t *instruction);
+		struct arm_instruction *instruction);
 int thumb2_opcode(target_t *target, uint32_t address,
-		arm_instruction_t *instruction);
-int arm_access_size(arm_instruction_t *instruction);
+		struct arm_instruction *instruction);
+int arm_access_size(struct arm_instruction *instruction);
 
 #define COND(opcode) (arm_condition_strings[(opcode &amp; 0xf0000000) &gt;&gt; 28])
 
diff --git a/src/target/arm_simulator.c b/src/target/arm_simulator.c
index bef1405..941e41c 100644
--- a/src/target/arm_simulator.c
+++ b/src/target/arm_simulator.c
@@ -281,7 +281,7 @@ int arm_simulate_step_core(target_t *target,
 		uint32_t *dry_run_pc, struct arm_sim_interface *sim)
 {
 	uint32_t current_pc = sim-&gt;get_reg(sim, 15);
-	arm_instruction_t instruction;
+	struct arm_instruction instruction;
 	int instruction_size;
 	int retval = ERROR_OK;
 
diff --git a/src/target/armv4_5.c b/src/target/armv4_5.c
index e7c405c..fb6c93b 100644
--- a/src/target/armv4_5.c
+++ b/src/target/armv4_5.c
@@ -395,7 +395,7 @@ COMMAND_HANDLER(handle_armv4_5_disassemble_command)
 	uint32_t address;
 	int count = 1;
 	int i;
-	arm_instruction_t cur_instruction;
+	struct arm_instruction cur_instruction;
 	uint32_t opcode;
 	uint16_t thumb_opcode;
 	int thumb = 0;
diff --git a/src/target/armv7a.c b/src/target/armv7a.c
index c4b4c98..efe3d36 100644
--- a/src/target/armv7a.c
+++ b/src/target/armv7a.c
@@ -332,7 +332,7 @@ usage:
 	}
 
 	for (i = 0; i &lt; count; i++) {
-		arm_instruction_t cur_instruction;
+		struct arm_instruction cur_instruction;
 		int retval;
 
 		if (thumb) {
diff --git a/src/target/cortex_m3.c b/src/target/cortex_m3.c
index 01fe7c1..d304ca3 100644
--- a/src/target/cortex_m3.c
+++ b/src/target/cortex_m3.c
@@ -1788,7 +1788,7 @@ COMMAND_HANDLER(handle_cortex_m3_disassemble_command)
 	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 	uint32_t address;
 	unsigned long count = 1;
-	arm_instruction_t cur_instruction;
+	struct arm_instruction cur_instruction;
 
 	retval = cortex_m3_verify_pointer(cmd_ctx, cortex_m3);
 	if (retval != ERROR_OK)
diff --git a/src/target/etm.c b/src/target/etm.c
index 118fe12..a5fe282 100644
--- a/src/target/etm.c
+++ b/src/target/etm.c
@@ -636,7 +636,7 @@ static struct etm_capture_driver *etm_capture_drivers[] =
 	NULL
 };
 
-static int etm_read_instruction(etm_context_t *ctx, arm_instruction_t *instruction)
+static int etm_read_instruction(etm_context_t *ctx, struct arm_instruction *instruction)
 {
 	int i;
 	int section = -1;
@@ -887,7 +887,7 @@ static int etmv1_data(etm_context_t *ctx, int size, uint32_t *data)
 static int etmv1_analyze_trace(etm_context_t *ctx, struct command_context_s *cmd_ctx)
 {
 	int retval;
-	arm_instruction_t instruction;
+	struct arm_instruction instruction;
 
 	/* read the trace data if it wasn't read already */
 	if (ctx-&gt;trace_depth == 0)
diff --git a/src/target/xscale.c b/src/target/xscale.c
index 552b2ff..424259b 100644
--- a/src/target/xscale.c
+++ b/src/target/xscale.c
@@ -2550,7 +2550,7 @@ static int xscale_read_trace(target_t *target)
 }
 
 static int xscale_read_instruction(target_t *target,
-		arm_instruction_t *instruction)
+		struct arm_instruction *instruction)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
 	int i;
@@ -2723,7 +2723,7 @@ static int xscale_analyze_trace(target_t *target, command_context_t *cmd_ctx)
 			if (xscale-&gt;trace.pc_ok)
 			{
 				int executed = (trace_data-&gt;entries[i].data &amp; 0xf) + rollover * 16;
-				arm_instruction_t instruction;
+				struct arm_instruction instruction;
 
 				if ((exception == 6) || (exception == 7))
 				{
@@ -2795,7 +2795,7 @@ static int xscale_analyze_trace(target_t *target, command_context_t *cmd_ctx)
 
 		for (; xscale-&gt;trace.current_pc &lt; trace_data-&gt;last_instruction; xscale-&gt;trace.current_pc += (xscale-&gt;trace.core_state == ARMV4_5_STATE_ARM) ? 4 : 2)
 		{
-			arm_instruction_t instruction;
+			struct arm_instruction instruction;
 			if ((retval = xscale_read_instruction(target, &amp;instruction)) != ERROR_OK)
 			{
 				/* can't continue tracing with no image available */

commit 22f6a4cef5b4bf6696a7ea0fa41fafc3da06c9fa
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 09:04:14 2009 -0800

    arm9tdmi_vector_t -&gt; struct arm9tdmi_vector
    
    Remove misleading typedef and redundant suffix from struct arm9tdmi_vector.
    
    Renames enum arm9tdmi_vector as enum arm9tdmi_vector_bit.

diff --git a/src/target/arm9tdmi.c b/src/target/arm9tdmi.c
index 5e03493..fdd395a 100644
--- a/src/target/arm9tdmi.c
+++ b/src/target/arm9tdmi.c
@@ -45,7 +45,7 @@
 #define _DEBUG_INSTRUCTION_EXECUTION_
 #endif
 
-static const arm9tdmi_vector_t arm9tdmi_vectors[] =
+static const struct arm9tdmi_vector arm9tdmi_vectors[] =
 {
 	{&quot;reset&quot;, ARM9TDMI_RESET_VECTOR},
 	{&quot;undef&quot;, ARM9TDMI_UNDEF_VECTOR},
diff --git a/src/target/arm9tdmi.h b/src/target/arm9tdmi.h
index 5522317..2e25b52 100644
--- a/src/target/arm9tdmi.h
+++ b/src/target/arm9tdmi.h
@@ -33,13 +33,13 @@ struct arm9tdmi_common
 	struct arm7_9_common arm7_9_common;
 };
 
-typedef struct arm9tdmi_vector_s
+struct arm9tdmi_vector
 {
 	char *name;
 	uint32_t value;
-} arm9tdmi_vector_t;
+};
 
-enum arm9tdmi_vector
+enum arm9tdmi_vector_bit
 {
 	ARM9TDMI_RESET_VECTOR = 0x01,
 	ARM9TDMI_UNDEF_VECTOR = 0x02,

commit 18475360b253e52eae7d070421523d5d7636383d
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:45:40 2009 -0800

    xscale_reg_t -&gt; struct xscale_reg
    
    Remove misleading typedef and redundant suffix from struct xscale_reg.

diff --git a/src/target/xscale.c b/src/target/xscale.c
index 99453b4..552b2ff 100644
--- a/src/target/xscale.c
+++ b/src/target/xscale.c
@@ -106,7 +106,7 @@ static char *const xscale_reg_list[] =
 	&quot;XSCALE_TXRXCTRL&quot;,
 };
 
-static const xscale_reg_t xscale_reg_arch_info[] =
+static const struct xscale_reg xscale_reg_arch_info[] =
 {
 	{XSCALE_MAINID, NULL},
 	{XSCALE_CACHETYPE, NULL},
@@ -2365,7 +2365,7 @@ static int xscale_remove_watchpoint(struct target_s *target, struct watchpoint *
 
 static int xscale_get_reg(reg_t *reg)
 {
-	xscale_reg_t *arch_info = reg-&gt;arch_info;
+	struct xscale_reg *arch_info = reg-&gt;arch_info;
 	target_t *target = arch_info-&gt;target;
 	struct xscale_common *xscale = target_to_xscale(target);
 
@@ -2410,7 +2410,7 @@ static int xscale_get_reg(reg_t *reg)
 
 static int xscale_set_reg(reg_t *reg, uint8_t* buf)
 {
-	xscale_reg_t *arch_info = reg-&gt;arch_info;
+	struct xscale_reg *arch_info = reg-&gt;arch_info;
 	target_t *target = arch_info-&gt;target;
 	struct xscale_common *xscale = target_to_xscale(target);
 	uint32_t value = buf_get_u32(buf, 0, 32);
@@ -2456,7 +2456,7 @@ static int xscale_write_dcsr_sw(target_t *target, uint32_t value)
 {
 	struct xscale_common *xscale = target_to_xscale(target);
 	reg_t *dcsr = &amp;xscale-&gt;reg_cache-&gt;reg_list[XSCALE_DCSR];
-	xscale_reg_t *dcsr_arch_info = dcsr-&gt;arch_info;
+	struct xscale_reg *dcsr_arch_info = dcsr-&gt;arch_info;
 
 	/* send CP write request (command 0x41) */
 	xscale_send_u32(target, 0x41);
@@ -2822,9 +2822,9 @@ static void xscale_build_reg_cache(target_t *target)
 	struct xscale_common *xscale = target_to_xscale(target);
 	struct armv4_5_common_s *armv4_5 = &amp;xscale-&gt;armv4_5_common;
 	struct reg_cache **cache_p = register_get_last_cache_p(&amp;target-&gt;reg_cache);
-	xscale_reg_t *arch_info = malloc(sizeof(xscale_reg_arch_info));
+	struct xscale_reg *arch_info = malloc(sizeof(xscale_reg_arch_info));
 	int i;
-	int num_regs = sizeof(xscale_reg_arch_info) / sizeof(xscale_reg_t);
+	int num_regs = sizeof(xscale_reg_arch_info) / sizeof(struct xscale_reg);
 
 	(*cache_p) = armv4_5_build_reg_cache(target, armv4_5);
 	armv4_5-&gt;core_cache = (*cache_p);
diff --git a/src/target/xscale.h b/src/target/xscale.h
index 63655ff..6fb0bf5 100644
--- a/src/target/xscale.h
+++ b/src/target/xscale.h
@@ -138,11 +138,11 @@ target_to_xscale(struct target_s *target)
 			armv4_5_common);
 }
 
-typedef struct xscale_reg_s
+struct xscale_reg
 {
 	int dbg_handler_number;
 	target_t *target;
-} xscale_reg_t;
+};
 
 enum
 {

commit 1f87cf4e804812c81279cc7bcb0fcb86aa2bf48f
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:45:37 2009 -0800

    xscale_common_t -&gt; struct xscale_common
    
    Remove misleading typedef and redundant suffix from struct xscale_common.

diff --git a/src/target/xscale.c b/src/target/xscale.c
index a6b9fbe..99453b4 100644
--- a/src/target/xscale.c
+++ b/src/target/xscale.c
@@ -147,7 +147,7 @@ static int xscale_set_reg_u32(reg_t *reg, uint32_t value)
 static const char xscale_not[] = &quot;target is not an XScale&quot;;
 
 static int xscale_verify_pointer(struct command_context_s *cmd_ctx,
-		struct xscale_common_s *xscale)
+		struct xscale_common *xscale)
 {
 	if (xscale-&gt;common_magic != XSCALE_COMMON_MAGIC) {
 		command_print(cmd_ctx, xscale_not);
@@ -180,7 +180,7 @@ static int xscale_jtag_set_instr(struct jtag_tap *tap, uint32_t new_instr)
 
 static int xscale_read_dcsr(target_t *target)
 {
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 	int retval;
 	struct scan_field fields[3];
 	uint8_t field0 = 0x0;
@@ -357,7 +357,7 @@ static int xscale_receive(target_t *target, uint32_t *buffer, int num_words)
 
 static int xscale_read_tx(target_t *target, int consume)
 {
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 	tap_state_t path[3];
 	tap_state_t noconsume_path[6];
 	int retval;
@@ -455,7 +455,7 @@ static int xscale_read_tx(target_t *target, int consume)
 
 static int xscale_write_rx(target_t *target)
 {
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 	int retval;
 	struct timeval timeout, now;
 	struct scan_field fields[3];
@@ -604,7 +604,7 @@ static int xscale_send(target_t *target, uint8_t *buffer, int count, int size)
 
 static int xscale_send_u32(target_t *target, uint32_t value)
 {
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 
 	buf_set_u32(xscale-&gt;reg_cache-&gt;reg_list[XSCALE_RX].value, 0, 32, value);
 	return xscale_write_rx(target);
@@ -612,7 +612,7 @@ static int xscale_send_u32(target_t *target, uint32_t value)
 
 static int xscale_write_dcsr(target_t *target, int hold_rst, int ext_dbg_brk)
 {
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 	int retval;
 	struct scan_field fields[3];
 	uint8_t field0 = 0x0;
@@ -768,7 +768,7 @@ static int xscale_invalidate_ic_line(target_t *target, uint32_t va)
 
 static int xscale_update_vectors(target_t *target)
 {
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 	int i;
 	int retval;
 
@@ -832,7 +832,7 @@ static int xscale_update_vectors(target_t *target)
 
 static int xscale_arch_state(struct target_s *target)
 {
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 	struct armv4_5_common_s *armv4_5 = &amp;xscale-&gt;armv4_5_common;
 
 	static const char *state[] =
@@ -910,7 +910,7 @@ static int xscale_poll(target_t *target)
 
 static int xscale_debug_entry(target_t *target)
 {
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 	struct armv4_5_common_s *armv4_5 = &amp;xscale-&gt;armv4_5_common;
 	uint32_t pc;
 	uint32_t buffer[10];
@@ -1090,7 +1090,7 @@ static int xscale_debug_entry(target_t *target)
 
 static int xscale_halt(target_t *target)
 {
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 
 	LOG_DEBUG(&quot;target-&gt;state: %s&quot;,
 		  target_state_name(target));
@@ -1124,7 +1124,7 @@ static int xscale_halt(target_t *target)
 
 static int xscale_enable_single_step(struct target_s *target, uint32_t next_pc)
 {
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 	reg_t *ibcr0 = &amp;xscale-&gt;reg_cache-&gt;reg_list[XSCALE_IBCR0];
 	int retval;
 
@@ -1151,7 +1151,7 @@ static int xscale_enable_single_step(struct target_s *target, uint32_t next_pc)
 
 static int xscale_disable_single_step(struct target_s *target)
 {
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 	reg_t *ibcr0 = &amp;xscale-&gt;reg_cache-&gt;reg_list[XSCALE_IBCR0];
 	int retval;
 
@@ -1189,7 +1189,7 @@ static void xscale_enable_breakpoints(struct target_s *target)
 static int xscale_resume(struct target_s *target, int current,
 		uint32_t address, int handle_breakpoints, int debug_execution)
 {
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 	struct armv4_5_common_s *armv4_5 = &amp;xscale-&gt;armv4_5_common;
 	breakpoint_t *breakpoint = target-&gt;breakpoints;
 	uint32_t current_pc;
@@ -1342,7 +1342,7 @@ static int xscale_resume(struct target_s *target, int current,
 static int xscale_step_inner(struct target_s *target, int current,
 		uint32_t address, int handle_breakpoints)
 {
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 	struct armv4_5_common_s *armv4_5 = &amp;xscale-&gt;armv4_5_common;
 	uint32_t next_pc;
 	int retval;
@@ -1476,7 +1476,7 @@ static int xscale_step(struct target_s *target, int current,
 
 static int xscale_assert_reset(target_t *target)
 {
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 
 	LOG_DEBUG(&quot;target-&gt;state: %s&quot;,
 		  target_state_name(target));
@@ -1517,7 +1517,7 @@ static int xscale_assert_reset(target_t *target)
 
 static int xscale_deassert_reset(target_t *target)
 {
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 	breakpoint_t *breakpoint = target-&gt;breakpoints;
 
 	LOG_DEBUG(&quot;-&quot;);
@@ -1809,7 +1809,7 @@ static int xscale_restore_context(target_t *target)
 static int xscale_read_memory(struct target_s *target, uint32_t address,
 		uint32_t size, uint32_t count, uint8_t *buffer)
 {
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 	uint32_t *buf32;
 	uint32_t i;
 	int retval;
@@ -1888,7 +1888,7 @@ static int xscale_read_memory(struct target_s *target, uint32_t address,
 static int xscale_write_memory(struct target_s *target, uint32_t address,
 		uint32_t size, uint32_t count, uint8_t *buffer)
 {
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 	int retval;
 
 	LOG_DEBUG(&quot;address: 0x%8.8&quot; PRIx32 &quot;, size: 0x%8.8&quot; PRIx32 &quot;, count: 0x%8.8&quot; PRIx32, address, size, count);
@@ -1971,7 +1971,7 @@ static int xscale_bulk_write_memory(target_t *target, uint32_t address,
 
 static uint32_t xscale_get_ttb(target_t *target)
 {
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 	uint32_t ttb;
 
 	xscale_get_reg(&amp;xscale-&gt;reg_cache-&gt;reg_list[XSCALE_TTB]);
@@ -1983,7 +1983,7 @@ static uint32_t xscale_get_ttb(target_t *target)
 static void xscale_disable_mmu_caches(target_t *target, int mmu,
 		int d_u_cache, int i_cache)
 {
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 	uint32_t cp15_control;
 
 	/* read cp15 control register */
@@ -2022,7 +2022,7 @@ static void xscale_disable_mmu_caches(target_t *target, int mmu,
 static void xscale_enable_mmu_caches(target_t *target, int mmu,
 		int d_u_cache, int i_cache)
 {
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 	uint32_t cp15_control;
 
 	/* read cp15 control register */
@@ -2049,7 +2049,7 @@ static int xscale_set_breakpoint(struct target_s *target,
 		breakpoint_t *breakpoint)
 {
 	int retval;
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 
 	if (target-&gt;state != TARGET_HALTED)
 	{
@@ -2121,7 +2121,7 @@ static int xscale_set_breakpoint(struct target_s *target,
 static int xscale_add_breakpoint(struct target_s *target,
 		breakpoint_t *breakpoint)
 {
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 
 	if (target-&gt;state != TARGET_HALTED)
 	{
@@ -2153,7 +2153,7 @@ static int xscale_unset_breakpoint(struct target_s *target,
 		breakpoint_t *breakpoint)
 {
 	int retval;
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 
 	if (target-&gt;state != TARGET_HALTED)
 	{
@@ -2206,7 +2206,7 @@ static int xscale_unset_breakpoint(struct target_s *target,
 
 static int xscale_remove_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
 {
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 
 	if (target-&gt;state != TARGET_HALTED)
 	{
@@ -2228,7 +2228,7 @@ static int xscale_remove_breakpoint(struct target_s *target, breakpoint_t *break
 static int xscale_set_watchpoint(struct target_s *target,
 		struct watchpoint *watchpoint)
 {
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 	uint8_t enable = 0;
 	reg_t *dbcon = &amp;xscale-&gt;reg_cache-&gt;reg_list[XSCALE_DBCON];
 	uint32_t dbcon_value = buf_get_u32(dbcon-&gt;value, 0, 32);
@@ -2284,7 +2284,7 @@ static int xscale_set_watchpoint(struct target_s *target,
 static int xscale_add_watchpoint(struct target_s *target,
 		struct watchpoint *watchpoint)
 {
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 
 	if (target-&gt;state != TARGET_HALTED)
 	{
@@ -2310,7 +2310,7 @@ static int xscale_add_watchpoint(struct target_s *target,
 static int xscale_unset_watchpoint(struct target_s *target,
 		struct watchpoint *watchpoint)
 {
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 	reg_t *dbcon = &amp;xscale-&gt;reg_cache-&gt;reg_list[XSCALE_DBCON];
 	uint32_t dbcon_value = buf_get_u32(dbcon-&gt;value, 0, 32);
 
@@ -2345,7 +2345,7 @@ static int xscale_unset_watchpoint(struct target_s *target,
 
 static int xscale_remove_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
 {
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 
 	if (target-&gt;state != TARGET_HALTED)
 	{
@@ -2367,7 +2367,7 @@ static int xscale_get_reg(reg_t *reg)
 {
 	xscale_reg_t *arch_info = reg-&gt;arch_info;
 	target_t *target = arch_info-&gt;target;
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 
 	/* DCSR, TX and RX are accessible via JTAG */
 	if (strcmp(reg-&gt;name, &quot;XSCALE_DCSR&quot;) == 0)
@@ -2412,7 +2412,7 @@ static int xscale_set_reg(reg_t *reg, uint8_t* buf)
 {
 	xscale_reg_t *arch_info = reg-&gt;arch_info;
 	target_t *target = arch_info-&gt;target;
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 	uint32_t value = buf_get_u32(buf, 0, 32);
 
 	/* DCSR, TX and RX are accessible via JTAG */
@@ -2454,7 +2454,7 @@ static int xscale_set_reg(reg_t *reg, uint8_t* buf)
 
 static int xscale_write_dcsr_sw(target_t *target, uint32_t value)
 {
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 	reg_t *dcsr = &amp;xscale-&gt;reg_cache-&gt;reg_list[XSCALE_DCSR];
 	xscale_reg_t *dcsr_arch_info = dcsr-&gt;arch_info;
 
@@ -2473,7 +2473,7 @@ static int xscale_write_dcsr_sw(target_t *target, uint32_t value)
 
 static int xscale_read_trace(target_t *target)
 {
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 	struct armv4_5_common_s *armv4_5 = &amp;xscale-&gt;armv4_5_common;
 	struct xscale_trace_data **trace_data_p;
 
@@ -2552,7 +2552,7 @@ static int xscale_read_trace(target_t *target)
 static int xscale_read_instruction(target_t *target,
 		arm_instruction_t *instruction)
 {
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 	int i;
 	int section = -1;
 	uint32_t size_read;
@@ -2632,7 +2632,7 @@ static int xscale_branch_address(struct xscale_trace_data *trace_data,
 
 static int xscale_analyze_trace(target_t *target, command_context_t *cmd_ctx)
 {
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 	int next_pc_ok = 0;
 	uint32_t next_pc = 0x0;
 	struct xscale_trace_data *trace_data = xscale-&gt;trace.data;
@@ -2819,7 +2819,7 @@ static int xscale_analyze_trace(target_t *target, command_context_t *cmd_ctx)
 
 static void xscale_build_reg_cache(target_t *target)
 {
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 	struct armv4_5_common_s *armv4_5 = &amp;xscale-&gt;armv4_5_common;
 	struct reg_cache **cache_p = register_get_last_cache_p(&amp;target-&gt;reg_cache);
 	xscale_reg_t *arch_info = malloc(sizeof(xscale_reg_arch_info));
@@ -2868,7 +2868,7 @@ static int xscale_init_target(struct command_context_s *cmd_ctx,
 }
 
 static int xscale_init_arch_info(target_t *target,
-		xscale_common_t *xscale, struct jtag_tap *tap, const char *variant)
+		struct xscale_common *xscale, struct jtag_tap *tap, const char *variant)
 {
 	armv4_5_common_t *armv4_5;
 	uint32_t high_reset_branch, low_reset_branch;
@@ -2974,7 +2974,7 @@ static int xscale_init_arch_info(target_t *target,
 
 static int xscale_target_create(struct target_s *target, Jim_Interp *interp)
 {
-	xscale_common_t *xscale;
+	struct xscale_common *xscale;
 
 	if (sizeof xscale_debug_handler - 1 &gt; 0x800) {
 		LOG_ERROR(&quot;debug_handler.bin: larger than 2kb&quot;);
@@ -2992,7 +2992,7 @@ static int xscale_target_create(struct target_s *target, Jim_Interp *interp)
 COMMAND_HANDLER(xscale_handle_debug_handler_command)
 {
 	target_t *target = NULL;
-	xscale_common_t *xscale;
+	struct xscale_common *xscale;
 	int retval;
 	uint32_t handler_address;
 
@@ -3032,7 +3032,7 @@ COMMAND_HANDLER(xscale_handle_debug_handler_command)
 COMMAND_HANDLER(xscale_handle_cache_clean_address_command)
 {
 	target_t *target = NULL;
-	xscale_common_t *xscale;
+	struct xscale_common *xscale;
 	int retval;
 	uint32_t cache_clean_address;
 
@@ -3069,7 +3069,7 @@ COMMAND_HANDLER(xscale_handle_cache_clean_address_command)
 COMMAND_HANDLER(xscale_handle_cache_info_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 	int retval;
 
 	retval = xscale_verify_pointer(cmd_ctx, xscale);
@@ -3082,7 +3082,7 @@ COMMAND_HANDLER(xscale_handle_cache_info_command)
 static int xscale_virt2phys(struct target_s *target,
 		uint32_t virtual, uint32_t *physical)
 {
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 	int type;
 	uint32_t cb;
 	int domain;
@@ -3104,7 +3104,7 @@ static int xscale_virt2phys(struct target_s *target,
 
 static int xscale_mmu(struct target_s *target, int *enabled)
 {
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 
 	if (target-&gt;state != TARGET_HALTED)
 	{
@@ -3118,7 +3118,7 @@ static int xscale_mmu(struct target_s *target, int *enabled)
 COMMAND_HANDLER(xscale_handle_mmu_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 	int retval;
 
 	retval = xscale_verify_pointer(cmd_ctx, xscale);
@@ -3153,7 +3153,7 @@ COMMAND_HANDLER(xscale_handle_mmu_command)
 COMMAND_HANDLER(xscale_handle_idcache_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 	int icache = 0, dcache = 0;
 	int retval;
 
@@ -3206,7 +3206,7 @@ COMMAND_HANDLER(xscale_handle_idcache_command)
 COMMAND_HANDLER(xscale_handle_vector_catch_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 	int retval;
 
 	retval = xscale_verify_pointer(cmd_ctx, xscale);
@@ -3233,7 +3233,7 @@ COMMAND_HANDLER(xscale_handle_vector_catch_command)
 COMMAND_HANDLER(xscale_handle_vector_table_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 	int err = 0;
 	int retval;
 
@@ -3291,7 +3291,7 @@ COMMAND_HANDLER(xscale_handle_vector_table_command)
 COMMAND_HANDLER(xscale_handle_trace_buffer_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 	struct armv4_5_common_s *armv4_5 = &amp;xscale-&gt;armv4_5_common;
 	uint32_t dcsr_value;
 	int retval;
@@ -3370,7 +3370,7 @@ COMMAND_HANDLER(xscale_handle_trace_buffer_command)
 COMMAND_HANDLER(xscale_handle_trace_image_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 	int retval;
 
 	if (argc &lt; 1)
@@ -3418,7 +3418,7 @@ COMMAND_HANDLER(xscale_handle_trace_image_command)
 COMMAND_HANDLER(xscale_handle_dump_trace_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 	struct xscale_trace_data *trace_data;
 	struct fileio file;
 	int retval;
@@ -3475,7 +3475,7 @@ COMMAND_HANDLER(xscale_handle_dump_trace_command)
 COMMAND_HANDLER(xscale_handle_analyze_trace_buffer_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 	int retval;
 
 	retval = xscale_verify_pointer(cmd_ctx, xscale);
@@ -3490,7 +3490,7 @@ COMMAND_HANDLER(xscale_handle_analyze_trace_buffer_command)
 COMMAND_HANDLER(xscale_handle_cp15)
 {
 	target_t *target = get_current_target(cmd_ctx);
-	struct xscale_common_s *xscale = target_to_xscale(target);
+	struct xscale_common *xscale = target_to_xscale(target);
 	int retval;
 
 	retval = xscale_verify_pointer(cmd_ctx, xscale);
diff --git a/src/target/xscale.h b/src/target/xscale.h
index a47bce7..63655ff 100644
--- a/src/target/xscale.h
+++ b/src/target/xscale.h
@@ -78,7 +78,7 @@ typedef struct xscale_trace_s
 	armv4_5_state_t core_state;		/* current core state (ARM, Thumb, Jazelle) */
 } xscale_trace_t;
 
-typedef struct xscale_common_s
+struct xscale_common
 {
 	/* armv4/5 common stuff */
 	armv4_5_common_t armv4_5_common;
@@ -129,12 +129,12 @@ typedef struct xscale_common_s
 	uint32_t cp15_control_reg;
 
 	int fast_memory_access;
-} xscale_common_t;
+};
 
-static inline struct xscale_common_s *
+static inline struct xscale_common *
 target_to_xscale(struct target_s *target)
 {
-	return container_of(target-&gt;arch_info, struct xscale_common_s,
+	return container_of(target-&gt;arch_info, struct xscale_common,
 			armv4_5_common);
 }
 

commit ea34dc988f63ffa1a9ba9e592a65f2f46e78f82a
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:45:32 2009 -0800

    xscale_trace_data_t -&gt; struct xscale_trace_data
    
    Remove misleading typedef and redundant suffix from struct xscale_trace_data.

diff --git a/src/target/xscale.c b/src/target/xscale.c
index d114fec..a6b9fbe 100644
--- a/src/target/xscale.c
+++ b/src/target/xscale.c
@@ -2475,7 +2475,7 @@ static int xscale_read_trace(target_t *target)
 {
 	struct xscale_common_s *xscale = target_to_xscale(target);
 	struct armv4_5_common_s *armv4_5 = &amp;xscale-&gt;armv4_5_common;
-	xscale_trace_data_t **trace_data_p;
+	struct xscale_trace_data **trace_data_p;
 
 	/* 258 words from debug handler
 	 * 256 trace buffer entries
@@ -2529,7 +2529,7 @@ static int xscale_read_trace(target_t *target)
 	for (trace_data_p = &amp;xscale-&gt;trace.data; *trace_data_p; trace_data_p = &amp;(*trace_data_p)-&gt;next)
 		;
 
-	*trace_data_p = malloc(sizeof(xscale_trace_data_t));
+	*trace_data_p = malloc(sizeof(struct xscale_trace_data));
 	(*trace_data_p)-&gt;next = NULL;
 	(*trace_data_p)-&gt;chkpt0 = trace_buffer[256];
 	(*trace_data_p)-&gt;chkpt1 = trace_buffer[257];
@@ -2614,7 +2614,7 @@ static int xscale_read_instruction(target_t *target,
 	return ERROR_OK;
 }
 
-static int xscale_branch_address(xscale_trace_data_t *trace_data,
+static int xscale_branch_address(struct xscale_trace_data *trace_data,
 		int i, uint32_t *target)
 {
 	/* if there are less than four entries prior to the indirect branch message
@@ -2635,7 +2635,7 @@ static int xscale_analyze_trace(target_t *target, command_context_t *cmd_ctx)
 	struct xscale_common_s *xscale = target_to_xscale(target);
 	int next_pc_ok = 0;
 	uint32_t next_pc = 0x0;
-	xscale_trace_data_t *trace_data = xscale-&gt;trace.data;
+	struct xscale_trace_data *trace_data = xscale-&gt;trace.data;
 	int retval;
 
 	while (trace_data)
@@ -3308,7 +3308,7 @@ COMMAND_HANDLER(xscale_handle_trace_buffer_command)
 
 	if ((argc &gt;= 1) &amp;&amp; (strcmp(&quot;enable&quot;, args[0]) == 0))
 	{
-		xscale_trace_data_t *td, *next_td;
+		struct xscale_trace_data *td, *next_td;
 		xscale-&gt;trace.buffer_enabled = 1;
 
 		/* free old trace data */
@@ -3419,7 +3419,7 @@ COMMAND_HANDLER(xscale_handle_dump_trace_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
 	struct xscale_common_s *xscale = target_to_xscale(target);
-	xscale_trace_data_t *trace_data;
+	struct xscale_trace_data *trace_data;
 	struct fileio file;
 	int retval;
 
diff --git a/src/target/xscale.h b/src/target/xscale.h
index d5de8dc..a47bce7 100644
--- a/src/target/xscale.h
+++ b/src/target/xscale.h
@@ -56,21 +56,21 @@ typedef struct xscale_trace_entry_s
 	enum xscale_trace_entry_type type;
 } xscale_trace_entry_t;
 
-typedef struct xscale_trace_data_s
+struct xscale_trace_data
 {
 	xscale_trace_entry_t *entries;
 	int depth;
 	uint32_t chkpt0;
 	uint32_t chkpt1;
 	uint32_t last_instruction;
-	struct xscale_trace_data_s *next;
-} xscale_trace_data_t;
+	struct xscale_trace_data *next;
+};
 
 typedef struct xscale_trace_s
 {
 	trace_status_t capture_status;	/* current state of capture run */
 	struct image_s *image;					/* source for target opcodes */
-	xscale_trace_data_t *data;		/* linked list of collected trace data */
+	struct xscale_trace_data *data;		/* linked list of collected trace data */
 	int buffer_enabled;				/* whether trace buffer is enabled */
 	int buffer_fill;				/* maximum number of trace runs to read (-1 for wrap-around) */
 	int pc_ok;

commit 73ad5cbb1a6d60ee2209ad9faadd19df0295942a
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:45:19 2009 -0800

    trace_point_t -&gt; struct trace_point
    
    Remove misleading typedef and redundant suffix from struct trace_point.

diff --git a/src/target/trace.c b/src/target/trace.c
index 2c25970..7bfe019 100644
--- a/src/target/trace.c
+++ b/src/target/trace.c
@@ -82,7 +82,7 @@ COMMAND_HANDLER(handle_trace_point_command)
 	/* resize array if necessary */
 	if (!trace-&gt;trace_points || (trace-&gt;trace_points_size == trace-&gt;num_trace_points))
 	{
-		trace-&gt;trace_points = realloc(trace-&gt;trace_points, sizeof(trace_point_t) * (trace-&gt;trace_points_size + 32));
+		trace-&gt;trace_points = realloc(trace-&gt;trace_points, sizeof(struct trace_point) * (trace-&gt;trace_points_size + 32));
 		trace-&gt;trace_points_size += 32;
 	}
 
diff --git a/src/target/trace.h b/src/target/trace.h
index f6615f5..9fa8d60 100644
--- a/src/target/trace.h
+++ b/src/target/trace.h
@@ -25,17 +25,17 @@
 struct target_s;
 struct command_context_s;
 
-typedef struct trace_point_s
+struct trace_point
 {
 	uint32_t address;
 	uint64_t hit_counter;
-} trace_point_t;
+};
 
 typedef struct trace_s
 {
 	uint32_t num_trace_points;
 	uint32_t trace_points_size;
-	trace_point_t *trace_points;
+	struct trace_point *trace_points;
 	uint32_t trace_history_size;
 	uint32_t *trace_history;
 	uint32_t trace_history_pos;

commit 151347585a48ef746d8ffbfed7ba9bd621737b0c
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:45:11 2009 -0800

    debug_msg_receiver_t -&gt; struct debug_msg_receiver
    
    Remove misleading typedef and redundant suffix from struct debug_msg_receiver.

diff --git a/src/target/target.h b/src/target/target.h
index c60960e..73d6319 100644
--- a/src/target/target.h
+++ b/src/target/target.h
@@ -158,7 +158,7 @@ typedef struct target_s
 	struct breakpoint_s *breakpoints;	/* list of breakpoints */
 	struct watchpoint *watchpoints;	/* list of watchpoints */
 	struct trace_s *trace_info;			/* generic trace information */
-	struct debug_msg_receiver_s *dbgmsg;/* list of debug message receivers */
+	struct debug_msg_receiver *dbgmsg;/* list of debug message receivers */
 	uint32_t dbg_msg_enabled;				/* debug message status */
 	void *arch_info;					/* architecture specific information */
 	struct target_s *next;				/* next target in list */
diff --git a/src/target/target_request.c b/src/target/target_request.c
index 4bfda5b..32da272 100644
--- a/src/target/target_request.c
+++ b/src/target/target_request.c
@@ -40,7 +40,7 @@ static int charmsg_mode = 0;
 static int target_asciimsg(target_t *target, uint32_t length)
 {
 	char *msg = malloc(CEIL(length + 1, 4) * 4);
-	debug_msg_receiver_t *c = target-&gt;dbgmsg;
+	struct debug_msg_receiver *c = target-&gt;dbgmsg;
 
 	target-&gt;type-&gt;target_request_data(target, CEIL(length, 4), (uint8_t*)msg);
 	msg[length] = 0;
@@ -68,7 +68,7 @@ static int target_hexmsg(target_t *target, int size, uint32_t length)
 	uint8_t *data = malloc(CEIL(length * size, 4) * 4);
 	char line[128];
 	int line_len;
-	debug_msg_receiver_t *c = target-&gt;dbgmsg;
+	struct debug_msg_receiver *c = target-&gt;dbgmsg;
 	uint32_t i;
 
 	LOG_DEBUG(&quot;size: %i, length: %i&quot;, (int)size, (int)length);
@@ -152,7 +152,7 @@ int target_request(target_t *target, uint32_t request)
 
 static int add_debug_msg_receiver(struct command_context_s *cmd_ctx, target_t *target)
 {
-	debug_msg_receiver_t **p = &amp;target-&gt;dbgmsg;
+	struct debug_msg_receiver **p = &amp;target-&gt;dbgmsg;
 
 	if (target == NULL)
 		return ERROR_INVALID_ARGUMENTS;
@@ -168,7 +168,7 @@ static int add_debug_msg_receiver(struct command_context_s *cmd_ctx, target_t *t
 	}
 
 	/* add new debug message receiver */
-	(*p) = malloc(sizeof(debug_msg_receiver_t));
+	(*p) = malloc(sizeof(struct debug_msg_receiver));
 	(*p)-&gt;cmd_ctx = cmd_ctx;
 	(*p)-&gt;next = NULL;
 
@@ -178,10 +178,10 @@ static int add_debug_msg_receiver(struct command_context_s *cmd_ctx, target_t *t
 	return ERROR_OK;
 }
 
-static debug_msg_receiver_t* find_debug_msg_receiver(struct command_context_s *cmd_ctx, target_t *target)
+static struct debug_msg_receiver* find_debug_msg_receiver(struct command_context_s *cmd_ctx, target_t *target)
 {
 	int do_all_targets = 0;
-	debug_msg_receiver_t **p = &amp;target-&gt;dbgmsg;
+	struct debug_msg_receiver **p = &amp;target-&gt;dbgmsg;
 
 	/* if no target has been specified search all of them */
 	if (target == NULL)
@@ -213,8 +213,8 @@ static debug_msg_receiver_t* find_debug_msg_receiver(struct command_context_s *c
 
 int delete_debug_msg_receiver(struct command_context_s *cmd_ctx, target_t *target)
 {
-	debug_msg_receiver_t **p;
-	debug_msg_receiver_t *c;
+	struct debug_msg_receiver **p;
+	struct debug_msg_receiver *c;
 	int do_all_targets = 0;
 
 	/* if no target has been specified search all of them */
@@ -234,7 +234,7 @@ int delete_debug_msg_receiver(struct command_context_s *cmd_ctx, target_t *targe
 		c = *p;
 		while (c)
 		{
-			debug_msg_receiver_t *next = c-&gt;next;
+			struct debug_msg_receiver *next = c-&gt;next;
 			if (c-&gt;cmd_ctx == cmd_ctx)
 			{
 				*p = next;
diff --git a/src/target/target_request.h b/src/target/target_request.h
index 433c592..669a8c6 100644
--- a/src/target/target_request.h
+++ b/src/target/target_request.h
@@ -36,11 +36,11 @@ typedef enum target_req_cmd
 /*	TARGET_REQ_SEMIHOSTING, */
 } target_req_cmd_t;
 
-typedef struct debug_msg_receiver_s
+struct debug_msg_receiver
 {
 	command_context_t *cmd_ctx;
-	struct debug_msg_receiver_s *next;
-} debug_msg_receiver_t;
+	struct debug_msg_receiver *next;
+};
 
 int target_request(target_t *target, uint32_t request);
 int delete_debug_msg_receiver(struct command_context_s *cmd_ctx,

commit 93459582fd340e4f63efed0fab9abd49a2cb6373
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:44:58 2009 -0800

    target_timer_callback_t -&gt; struct target_timer_callback
    
    Remove misleading typedef and redundant suffix from struct target_timer_callback.

diff --git a/src/target/target.c b/src/target/target.c
index 7c77d19..fef7c29 100644
--- a/src/target/target.c
+++ b/src/target/target.c
@@ -87,7 +87,7 @@ target_type_t *target_types[] =
 
 target_t *all_targets = NULL;
 struct target_event_callback *target_event_callbacks = NULL;
-target_timer_callback_t *target_timer_callbacks = NULL;
+struct target_timer_callback *target_timer_callbacks = NULL;
 
 const Jim_Nvp nvp_assert[] = {
 	{ .name = &quot;assert&quot;, NVP_ASSERT },
@@ -896,7 +896,7 @@ int target_register_event_callback(int (*callback)(struct target_s *target, enum
 
 int target_register_timer_callback(int (*callback)(void *priv), int time_ms, int periodic, void *priv)
 {
-	target_timer_callback_t **callbacks_p = &amp;target_timer_callbacks;
+	struct target_timer_callback **callbacks_p = &amp;target_timer_callbacks;
 	struct timeval now;
 
 	if (callback == NULL)
@@ -911,7 +911,7 @@ int target_register_timer_callback(int (*callback)(void *priv), int time_ms, int
 		callbacks_p = &amp;((*callbacks_p)-&gt;next);
 	}
 
-	(*callbacks_p) = malloc(sizeof(target_timer_callback_t));
+	(*callbacks_p) = malloc(sizeof(struct target_timer_callback));
 	(*callbacks_p)-&gt;callback = callback;
 	(*callbacks_p)-&gt;periodic = periodic;
 	(*callbacks_p)-&gt;time_ms = time_ms;
@@ -961,8 +961,8 @@ int target_unregister_event_callback(int (*callback)(struct target_s *target, en
 
 int target_unregister_timer_callback(int (*callback)(void *priv), void *priv)
 {
-	target_timer_callback_t **p = &amp;target_timer_callbacks;
-	target_timer_callback_t *c = target_timer_callbacks;
+	struct target_timer_callback **p = &amp;target_timer_callbacks;
+	struct target_timer_callback *c = target_timer_callbacks;
 
 	if (callback == NULL)
 	{
@@ -971,7 +971,7 @@ int target_unregister_timer_callback(int (*callback)(void *priv), void *priv)
 
 	while (c)
 	{
-		target_timer_callback_t *next = c-&gt;next;
+		struct target_timer_callback *next = c-&gt;next;
 		if ((c-&gt;callback == callback) &amp;&amp; (c-&gt;priv == priv))
 		{
 			*p = next;
@@ -1014,7 +1014,7 @@ int target_call_event_callbacks(target_t *target, enum target_event event)
 }
 
 static int target_timer_callback_periodic_restart(
-		target_timer_callback_t *cb, struct timeval *now)
+		struct target_timer_callback *cb, struct timeval *now)
 {
 	int time_ms = cb-&gt;time_ms;
 	cb-&gt;when.tv_usec = now-&gt;tv_usec + (time_ms % 1000) * 1000;
@@ -1028,7 +1028,7 @@ static int target_timer_callback_periodic_restart(
 	return ERROR_OK;
 }
 
-static int target_call_timer_callback(target_timer_callback_t *cb,
+static int target_call_timer_callback(struct target_timer_callback *cb,
 		struct timeval *now)
 {
 	cb-&gt;callback(cb-&gt;priv);
@@ -1046,11 +1046,11 @@ static int target_call_timer_callbacks_check_time(int checktime)
 	struct timeval now;
 	gettimeofday(&amp;now, NULL);
 
-	target_timer_callback_t *callback = target_timer_callbacks;
+	struct target_timer_callback *callback = target_timer_callbacks;
 	while (callback)
 	{
 		// cleaning up may unregister and free this callback
-		target_timer_callback_t *next_callback = callback-&gt;next;
+		struct target_timer_callback *next_callback = callback-&gt;next;
 
 		bool call_it = callback-&gt;callback &amp;&amp;
 			((!checktime &amp;&amp; callback-&gt;periodic) ||
diff --git a/src/target/target.h b/src/target/target.h
index 0c52c11..c60960e 100644
--- a/src/target/target.h
+++ b/src/target/target.h
@@ -239,15 +239,15 @@ struct target_event_callback
 	struct target_event_callback *next;
 };
 
-typedef struct target_timer_callback_s
+struct target_timer_callback
 {
 	int (*callback)(void *priv);
 	int time_ms;
 	int periodic;
 	struct timeval when;
 	void *priv;
-	struct target_timer_callback_s *next;
-} target_timer_callback_t;
+	struct target_timer_callback *next;
+};
 
 int target_register_commands(struct command_context_s *cmd_ctx);
 int target_register_user_commands(struct command_context_s *cmd_ctx);
@@ -451,7 +451,7 @@ void target_free_all_working_areas_restore(struct target_s *target, int restore)
 extern target_t *all_targets;
 
 extern struct target_event_callback *target_event_callbacks;
-extern target_timer_callback_t *target_timer_callbacks;
+extern struct target_timer_callback *target_timer_callbacks;
 
 uint32_t target_buffer_get_u32(target_t *target, const uint8_t *buffer);
 uint16_t target_buffer_get_u16(target_t *target, const uint8_t *buffer);

commit 2d5767201b8b748b85d6aceb7dd93965e25bd00b
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:44:45 2009 -0800

    target_event_callback_t -&gt; struct target_event_callback
    
    Remove misleading typedef and redundant suffix from struct target_event_callback.

diff --git a/src/target/target.c b/src/target/target.c
index 3b3179c..7c77d19 100644
--- a/src/target/target.c
+++ b/src/target/target.c
@@ -86,7 +86,7 @@ target_type_t *target_types[] =
 };
 
 target_t *all_targets = NULL;
-target_event_callback_t *target_event_callbacks = NULL;
+struct target_event_callback *target_event_callbacks = NULL;
 target_timer_callback_t *target_timer_callbacks = NULL;
 
 const Jim_Nvp nvp_assert[] = {
@@ -872,7 +872,7 @@ int target_init(struct command_context_s *cmd_ctx)
 
 int target_register_event_callback(int (*callback)(struct target_s *target, enum target_event event, void *priv), void *priv)
 {
-	target_event_callback_t **callbacks_p = &amp;target_event_callbacks;
+	struct target_event_callback **callbacks_p = &amp;target_event_callbacks;
 
 	if (callback == NULL)
 	{
@@ -886,7 +886,7 @@ int target_register_event_callback(int (*callback)(struct target_s *target, enum
 		callbacks_p = &amp;((*callbacks_p)-&gt;next);
 	}
 
-	(*callbacks_p) = malloc(sizeof(target_event_callback_t));
+	(*callbacks_p) = malloc(sizeof(struct target_event_callback));
 	(*callbacks_p)-&gt;callback = callback;
 	(*callbacks_p)-&gt;priv = priv;
 	(*callbacks_p)-&gt;next = NULL;
@@ -934,8 +934,8 @@ int target_register_timer_callback(int (*callback)(void *priv), int time_ms, int
 
 int target_unregister_event_callback(int (*callback)(struct target_s *target, enum target_event event, void *priv), void *priv)
 {
-	target_event_callback_t **p = &amp;target_event_callbacks;
-	target_event_callback_t *c = target_event_callbacks;
+	struct target_event_callback **p = &amp;target_event_callbacks;
+	struct target_event_callback *c = target_event_callbacks;
 
 	if (callback == NULL)
 	{
@@ -944,7 +944,7 @@ int target_unregister_event_callback(int (*callback)(struct target_s *target, en
 
 	while (c)
 	{
-		target_event_callback_t *next = c-&gt;next;
+		struct target_event_callback *next = c-&gt;next;
 		if ((c-&gt;callback == callback) &amp;&amp; (c-&gt;priv == priv))
 		{
 			*p = next;
@@ -988,8 +988,8 @@ int target_unregister_timer_callback(int (*callback)(void *priv), void *priv)
 
 int target_call_event_callbacks(target_t *target, enum target_event event)
 {
-	target_event_callback_t *callback = target_event_callbacks;
-	target_event_callback_t *next_callback;
+	struct target_event_callback *callback = target_event_callbacks;
+	struct target_event_callback *next_callback;
 
 	if (event == TARGET_EVENT_HALTED)
 	{
diff --git a/src/target/target.h b/src/target/target.h
index 1497355..0c52c11 100644
--- a/src/target/target.h
+++ b/src/target/target.h
@@ -232,12 +232,12 @@ struct target_event_action_s {
 	target_event_action_t *next;
  };
 
-typedef struct target_event_callback_s
+struct target_event_callback
 {
 	int (*callback)(struct target_s *target, enum target_event event, void *priv);
 	void *priv;
-	struct target_event_callback_s *next;
-} target_event_callback_t;
+	struct target_event_callback *next;
+};
 
 typedef struct target_timer_callback_s
 {
@@ -450,7 +450,7 @@ void target_free_all_working_areas_restore(struct target_s *target, int restore)
 
 extern target_t *all_targets;
 
-extern target_event_callback_t *target_event_callbacks;
+extern struct target_event_callback *target_event_callbacks;
 extern target_timer_callback_t *target_timer_callbacks;
 
 uint32_t target_buffer_get_u32(target_t *target, const uint8_t *buffer);

commit 46fc1d57ac9462fd788277609707a379c7a406cb
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:44:30 2009 -0800

    working_area_t -&gt; struct working_area
    
    Remove misleading typedef and redundant suffix from struct working_area.

diff --git a/src/flash/aduc702x.c b/src/flash/aduc702x.c
index ebda702..8011e93 100644
--- a/src/flash/aduc702x.c
+++ b/src/flash/aduc702x.c
@@ -44,7 +44,7 @@ static int aduc702x_set_write_enable(target_t *target, int enable);
 #define ADUC702x_FLASH_FEEHIDE		(7*4)
 
 struct aduc702x_flash_bank {
-	working_area_t *write_algorithm;
+	struct working_area *write_algorithm;
 };
 
 /* flash bank aduc702x 0 0 0 0 &lt;target#&gt;
@@ -161,7 +161,7 @@ static int aduc702x_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint
 	struct aduc702x_flash_bank *aduc702x_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 	uint32_t buffer_size = 7000;
-	working_area_t *source;
+	struct working_area *source;
 	uint32_t address = bank-&gt;base + offset;
 	struct reg_param reg_params[6];
 	struct armv4_5_algorithm armv4_5_info;
diff --git a/src/flash/arm_nandio.h b/src/flash/arm_nandio.h
index eedf5dc..cb8df42 100644
--- a/src/flash/arm_nandio.h
+++ b/src/flash/arm_nandio.h
@@ -9,7 +9,7 @@ struct arm_nand_data {
 	struct target_s		*target;
 
 	/* copy_area holds write-to-NAND loop and data to write */
-	struct working_area_s	*copy_area;
+	struct working_area	*copy_area;
 
 	/* chunk_size == page or ECC unit */
 	unsigned		chunk_size;
diff --git a/src/flash/cfi.c b/src/flash/cfi.c
index c0c2cb7..6a193e2 100644
--- a/src/flash/cfi.c
+++ b/src/flash/cfi.c
@@ -1022,7 +1022,7 @@ static int cfi_intel_write_block(struct flash_bank_s *bank, uint8_t *buffer, uin
 	target_t *target = bank-&gt;target;
 	struct reg_param reg_params[7];
 	struct armv4_5_algorithm armv4_5_info;
-	working_area_t *source;
+	struct working_area *source;
 	uint32_t buffer_size = 32768;
 	uint32_t write_command_val, busy_pattern_val, error_pattern_val;
 
@@ -1267,7 +1267,7 @@ static int cfi_spansion_write_block(struct flash_bank_s *bank, uint8_t *buffer,
 	target_t *target = bank-&gt;target;
 	struct reg_param reg_params[10];
 	struct armv4_5_algorithm armv4_5_info;
-	working_area_t *source;
+	struct working_area *source;
 	uint32_t buffer_size = 32768;
 	uint32_t status;
 	int retval, retvaltemp;
diff --git a/src/flash/cfi.h b/src/flash/cfi.h
index 7763aff..deca916 100644
--- a/src/flash/cfi.h
+++ b/src/flash/cfi.h
@@ -27,7 +27,7 @@
 
 struct cfi_flash_bank
 {
-	working_area_t *write_algorithm;
+	struct working_area *write_algorithm;
 
 	int x16_as_x8;
 	int jedec_probe;
diff --git a/src/flash/ecos.c b/src/flash/ecos.c
index 0a97bda..450bd5b 100644
--- a/src/flash/ecos.c
+++ b/src/flash/ecos.c
@@ -36,8 +36,8 @@ static int ecosflash_handle_gpnvm_command(struct command_context_s *cmd_ctx, cha
 struct ecosflash_flash_bank
 {
 	struct target_s *target;
-	working_area_t *write_algorithm;
-	working_area_t *erase_check_algorithm;
+	struct working_area *write_algorithm;
+	struct working_area *erase_check_algorithm;
 	char *driverPath;
 	uint32_t start_address;
 };
diff --git a/src/flash/lpc2000.c b/src/flash/lpc2000.c
index 31e81b3..4ad3e0e 100644
--- a/src/flash/lpc2000.c
+++ b/src/flash/lpc2000.c
@@ -548,7 +548,7 @@ static int lpc2000_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t of
 	uint32_t result_table[4];
 	int status_code;
 	int i;
-	working_area_t *download_area;
+	struct working_area *download_area;
 	int retval = ERROR_OK;
 
 	if (bank-&gt;target-&gt;state != TARGET_HALTED)
diff --git a/src/flash/lpc2000.h b/src/flash/lpc2000.h
index b93deb6..08e278a 100644
--- a/src/flash/lpc2000.h
+++ b/src/flash/lpc2000.h
@@ -35,7 +35,7 @@ typedef enum
 struct lpc2000_flash_bank
 {
 	lpc2000_variant variant;
-	struct working_area_s *iap_working_area;
+	struct working_area *iap_working_area;
 	uint32_t cclk;
 	int cmd51_dst_boundary;
 	int cmd51_can_256b;
diff --git a/src/flash/lpc2900.c b/src/flash/lpc2900.c
index f6b3bf6..0887907 100644
--- a/src/flash/lpc2900.c
+++ b/src/flash/lpc2900.c
@@ -1294,7 +1294,7 @@ static int lpc2900_write(struct flash_bank_s *bank, uint8_t *buffer,
 
 	/* Try working area allocation. Start with a large buffer, and try with
 	   reduced size if that fails. */
-	working_area_t *warea;
+	struct working_area *warea;
 	uint32_t buffer_size = lpc2900_info-&gt;max_ram_block - 1 * KiB;
 	while( (retval = target_alloc_working_area(target,
 	                                           buffer_size + target_code_size,
diff --git a/src/flash/pic32mx.c b/src/flash/pic32mx.c
index 262200c..d29950c 100644
--- a/src/flash/pic32mx.c
+++ b/src/flash/pic32mx.c
@@ -302,7 +302,7 @@ static int pic32mx_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint3
 {
 	target_t *target = bank-&gt;target;
 	uint32_t buffer_size = 512;
-	working_area_t *source;
+	struct working_area *source;
 	uint32_t address = bank-&gt;base + offset;
 	int retval = ERROR_OK;
 #if 0
diff --git a/src/flash/pic32mx.h b/src/flash/pic32mx.h
index 3a3c979..92f40c2 100644
--- a/src/flash/pic32mx.h
+++ b/src/flash/pic32mx.h
@@ -30,7 +30,7 @@
 
 struct pic32mx_flash_bank
 {
-	working_area_t *write_algorithm;
+	struct working_area *write_algorithm;
 	int devid;
 	int ppage_size;
 	int probed;
diff --git a/src/flash/stellaris.c b/src/flash/stellaris.c
index cdeccbe..6ec036c 100644
--- a/src/flash/stellaris.c
+++ b/src/flash/stellaris.c
@@ -832,8 +832,8 @@ static int stellaris_write_block(struct flash_bank_s *bank, uint8_t *buffer, uin
 {
 	target_t *target = bank-&gt;target;
 	uint32_t buffer_size = 8192;
-	working_area_t *source;
-	working_area_t *write_algorithm;
+	struct working_area *source;
+	struct working_area *write_algorithm;
 	uint32_t address = bank-&gt;base + offset;
 	struct reg_param reg_params[3];
 	struct armv7m_algorithm armv7m_info;
diff --git a/src/flash/stm32x.c b/src/flash/stm32x.c
index a63ff60..35da209 100644
--- a/src/flash/stm32x.c
+++ b/src/flash/stm32x.c
@@ -435,7 +435,7 @@ static int stm32x_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint32
 	struct stm32x_flash_bank *stm32x_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 	uint32_t buffer_size = 16384;
-	working_area_t *source;
+	struct working_area *source;
 	uint32_t address = bank-&gt;base + offset;
 	struct reg_param reg_params[4];
 	struct armv7m_algorithm armv7m_info;
diff --git a/src/flash/stm32x.h b/src/flash/stm32x.h
index 9e1e5b1..6cd047e 100644
--- a/src/flash/stm32x.h
+++ b/src/flash/stm32x.h
@@ -35,7 +35,7 @@ struct stm32x_options
 struct stm32x_flash_bank
 {
 	struct stm32x_options option_bytes;
-	working_area_t *write_algorithm;
+	struct working_area *write_algorithm;
 	int ppage_size;
 	int probed;
 };
diff --git a/src/flash/str7x.c b/src/flash/str7x.c
index 68ba26e..d5defe5 100644
--- a/src/flash/str7x.c
+++ b/src/flash/str7x.c
@@ -313,7 +313,7 @@ static int str7x_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint32_
 	struct str7x_flash_bank *str7x_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 	uint32_t buffer_size = 8192;
-	working_area_t *source;
+	struct working_area *source;
 	uint32_t address = bank-&gt;base + offset;
 	struct reg_param reg_params[6];
 	struct armv4_5_algorithm armv4_5_info;
diff --git a/src/flash/str7x.h b/src/flash/str7x.h
index ef2d2e3..81af0f1 100644
--- a/src/flash/str7x.h
+++ b/src/flash/str7x.h
@@ -31,7 +31,7 @@ struct str7x_flash_bank
 	uint32_t disable_bit;
 	uint32_t busy_bits;
 	uint32_t register_base;
-	working_area_t *write_algorithm;
+	struct working_area *write_algorithm;
 };
 
 enum str7x_status_codes
diff --git a/src/flash/str9x.c b/src/flash/str9x.c
index bae895d..09e5a08 100644
--- a/src/flash/str9x.c
+++ b/src/flash/str9x.c
@@ -351,7 +351,7 @@ static int str9x_write_block(struct flash_bank_s *bank,
 	struct str9x_flash_bank *str9x_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 	uint32_t buffer_size = 8192;
-	working_area_t *source;
+	struct working_area *source;
 	uint32_t address = bank-&gt;base + offset;
 	struct reg_param reg_params[4];
 	struct armv4_5_algorithm armv4_5_info;
diff --git a/src/flash/str9x.h b/src/flash/str9x.h
index 6938514..c9d5152 100644
--- a/src/flash/str9x.h
+++ b/src/flash/str9x.h
@@ -30,7 +30,7 @@ struct str9x_flash_bank
 	uint32_t *sector_bits;
 	int variant;
 	int bank1;
-	working_area_t *write_algorithm;
+	struct working_area *write_algorithm;
 };
 
 enum str9x_status_codes
diff --git a/src/target/arm7_9_common.c b/src/target/arm7_9_common.c
index eb27bba..19244de 100644
--- a/src/target/arm7_9_common.c
+++ b/src/target/arm7_9_common.c
@@ -2723,7 +2723,7 @@ int arm7_9_bulk_write_memory(target_t *target, uint32_t address, uint32_t count,
 
 int arm7_9_checksum_memory(struct target_s *target, uint32_t address, uint32_t count, uint32_t* checksum)
 {
-	working_area_t *crc_algorithm;
+	struct working_area *crc_algorithm;
 	struct armv4_5_algorithm armv4_5_info;
 	struct reg_param reg_params[2];
 	int retval;
@@ -2807,7 +2807,7 @@ int arm7_9_checksum_memory(struct target_s *target, uint32_t address, uint32_t c
 
 int arm7_9_blank_check_memory(struct target_s *target, uint32_t address, uint32_t count, uint32_t* blank)
 {
-	working_area_t *erase_check_algorithm;
+	struct working_area *erase_check_algorithm;
 	struct reg_param reg_params[3];
 	struct armv4_5_algorithm armv4_5_info;
 	int retval;
diff --git a/src/target/arm7_9_common.h b/src/target/arm7_9_common.h
index cebf6e3..0ef5eb6 100644
--- a/src/target/arm7_9_common.h
+++ b/src/target/arm7_9_common.h
@@ -69,7 +69,7 @@ struct arm7_9_common
 	bool fast_memory_access;
 	bool dcc_downloads;
 
-	struct working_area_s *dcc_working_area;
+	struct working_area *dcc_working_area;
 
 	int (*examine_debug_reason)(target_t *target); /**&lt; Function for determining why debug state was entered */
 
diff --git a/src/target/armv7m.c b/src/target/armv7m.c
index 0566888..4a6869f 100644
--- a/src/target/armv7m.c
+++ b/src/target/armv7m.c
@@ -588,7 +588,7 @@ int armv7m_init_arch_info(target_t *target, struct armv7m_common *armv7m)
 int armv7m_checksum_memory(struct target_s *target,
 		uint32_t address, uint32_t count, uint32_t* checksum)
 {
-	working_area_t *crc_algorithm;
+	struct working_area *crc_algorithm;
 	struct armv7m_algorithm armv7m_info;
 	struct reg_param reg_params[2];
 	int retval;
@@ -671,7 +671,7 @@ int armv7m_checksum_memory(struct target_s *target,
 int armv7m_blank_check_memory(struct target_s *target,
 		uint32_t address, uint32_t count, uint32_t* blank)
 {
-	working_area_t *erase_check_algorithm;
+	struct working_area *erase_check_algorithm;
 	struct reg_param reg_params[3];
 	struct armv7m_algorithm armv7m_info;
 	int retval;
diff --git a/src/target/cortex_a8.c b/src/target/cortex_a8.c
index edf7f14..983bef8 100644
--- a/src/target/cortex_a8.c
+++ b/src/target/cortex_a8.c
@@ -564,7 +564,7 @@ static int cortex_a8_debug_entry(target_t *target)
 	int i;
 	uint32_t regfile[16], pc, cpsr, dscr;
 	int retval = ERROR_OK;
-	working_area_t *regfile_working_area = NULL;
+	struct working_area *regfile_working_area = NULL;
 	struct cortex_a8_common *cortex_a8 = target_to_cortex_a8(target);
 	struct armv7a_common *armv7a = target_to_armv7a(target);
 	struct armv4_5_common_s *armv4_5 = &amp;armv7a-&gt;armv4_5_common;
diff --git a/src/target/target.c b/src/target/target.c
index 8932266..3b3179c 100644
--- a/src/target/target.c
+++ b/src/target/target.c
@@ -1082,10 +1082,10 @@ int target_call_timer_callbacks_now(void)
 	return target_call_timer_callbacks_check_time(0);
 }
 
-int target_alloc_working_area(struct target_s *target, uint32_t size, working_area_t **area)
+int target_alloc_working_area(struct target_s *target, uint32_t size, struct working_area **area)
 {
-	working_area_t *c = target-&gt;working_areas;
-	working_area_t *new_wa = NULL;
+	struct working_area *c = target-&gt;working_areas;
+	struct working_area *new_wa = NULL;
 
 	/* Reevaluate working area address based on MMU state*/
 	if (target-&gt;working_areas == NULL)
@@ -1145,7 +1145,7 @@ int target_alloc_working_area(struct target_s *target, uint32_t size, working_ar
 	/* if not, allocate a new one */
 	if (!new_wa)
 	{
-		working_area_t **p = &amp;target-&gt;working_areas;
+		struct working_area **p = &amp;target-&gt;working_areas;
 		uint32_t first_free = target-&gt;working_area;
 		uint32_t free_size = target-&gt;working_area_size;
 
@@ -1167,7 +1167,7 @@ int target_alloc_working_area(struct target_s *target, uint32_t size, working_ar
 
 		LOG_DEBUG(&quot;allocated new working area at address 0x%08x&quot;, (unsigned)first_free);
 
-		new_wa = malloc(sizeof(working_area_t));
+		new_wa = malloc(sizeof(struct working_area));
 		new_wa-&gt;next = NULL;
 		new_wa-&gt;size = size;
 		new_wa-&gt;address = first_free;
@@ -1202,7 +1202,7 @@ int target_alloc_working_area(struct target_s *target, uint32_t size, working_ar
 	return ERROR_OK;
 }
 
-int target_free_working_area_restore(struct target_s *target, working_area_t *area, int restore)
+int target_free_working_area_restore(struct target_s *target, struct working_area *area, int restore)
 {
 	if (area-&gt;free)
 		return ERROR_OK;
@@ -1223,7 +1223,7 @@ int target_free_working_area_restore(struct target_s *target, working_area_t *ar
 	return ERROR_OK;
 }
 
-int target_free_working_area(struct target_s *target, working_area_t *area)
+int target_free_working_area(struct target_s *target, struct working_area *area)
 {
 	return target_free_working_area_restore(target, area, 1);
 }
@@ -1233,11 +1233,11 @@ int target_free_working_area(struct target_s *target, working_area_t *area)
  */
 void target_free_all_working_areas_restore(struct target_s *target, int restore)
 {
-	working_area_t *c = target-&gt;working_areas;
+	struct working_area *c = target-&gt;working_areas;
 
 	while (c)
 	{
-		working_area_t *next = c-&gt;next;
+		struct working_area *next = c-&gt;next;
 		target_free_working_area_restore(target, c, restore);
 
 		if (c-&gt;backup)
diff --git a/src/target/target.h b/src/target/target.h
index b7fa3eb..1497355 100644
--- a/src/target/target.h
+++ b/src/target/target.h
@@ -114,15 +114,15 @@ extern const Jim_Nvp nvp_target_endian[];
 
 struct target_s;
 
-typedef struct working_area_s
+struct working_area
 {
 	uint32_t address;
 	uint32_t size;
 	int free;
 	uint8_t *backup;
-	struct working_area_s **user;
-	struct working_area_s *next;
-} working_area_t;
+	struct working_area **user;
+	struct working_area *next;
+};
 
 // target_type.h contains the full definitionof struct target_type_s
 struct target_type_s;
@@ -149,7 +149,7 @@ typedef struct target_s
 	uint32_t working_area_phys;			/* physical address */
 	uint32_t working_area_size;			/* size in bytes */
 	uint32_t backup_working_area;			/* whether the content of the working area has to be preserved */
-	struct working_area_s *working_areas;/* list of allocated working areas */
+	struct working_area *working_areas;/* list of allocated working areas */
 	enum target_debug_reason debug_reason;/* reason why the target entered debug state */
 	enum target_endianess endianness;	/* target endianess */
 	// also see: target_state_name()
@@ -441,10 +441,10 @@ const char *target_state_name( target_t *target );
  *
  */
 int target_alloc_working_area(struct target_s *target,
-		uint32_t size, working_area_t **area);
-int target_free_working_area(struct target_s *target, working_area_t *area);
+		uint32_t size, struct working_area **area);
+int target_free_working_area(struct target_s *target, struct working_area *area);
 int target_free_working_area_restore(struct target_s *target,
-		working_area_t *area, int restore);
+		struct working_area *area, int restore);
 void target_free_all_working_areas(struct target_s *target);
 void target_free_all_working_areas_restore(struct target_s *target, int restore);
 

commit c2b5d8a6fa72ce6b0fed1e612d4fe5e4b54ba45a
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:44:18 2009 -0800

    reg_arch_type_t -&gt; struct reg_arch_type
    
    Remove misleading typedef and redundant suffix from struct reg_arch_type.

diff --git a/src/server/gdb_server.c b/src/server/gdb_server.c
index 389710e..0bdb3a0 100644
--- a/src/server/gdb_server.c
+++ b/src/server/gdb_server.c
@@ -1003,7 +1003,7 @@ int gdb_set_registers_packet(struct connection *connection, target_t *target, ch
 			LOG_ERROR(&quot;BUG: register packet is too small for registers&quot;);
 		}
 
-		reg_arch_type_t *arch_type;
+		struct reg_arch_type *arch_type;
 		bin_buf = malloc(CEIL(reg_list[i]-&gt;size, 8));
 		gdb_target_to_reg(target, packet_p, chars, bin_buf);
 
@@ -1070,7 +1070,7 @@ int gdb_set_register_packet(struct connection *connection, target_t *target, cha
 	reg_t **reg_list;
 	int reg_list_size;
 	int retval;
-	reg_arch_type_t *arch_type;
+	struct reg_arch_type *arch_type;
 
 	LOG_DEBUG(&quot;-&quot;);
 
diff --git a/src/target/register.c b/src/target/register.c
index 2efcd5f..c3ad830 100644
--- a/src/target/register.c
+++ b/src/target/register.c
@@ -28,7 +28,7 @@
 #include &quot;log.h&quot;
 
 
-reg_arch_type_t *reg_arch_types = NULL;
+struct reg_arch_type *reg_arch_types = NULL;
 
 reg_t* register_get_by_name(struct reg_cache *first,
 		const char *name, bool search_all)
@@ -68,7 +68,7 @@ struct reg_cache** register_get_last_cache_p(struct reg_cache **first)
 
 int register_reg_arch_type(int (*get)(reg_t *reg), int (*set)(reg_t *reg, uint8_t *buf))
 {
-	reg_arch_type_t** arch_type_p = &amp;reg_arch_types;
+	struct reg_arch_type** arch_type_p = &amp;reg_arch_types;
 	int id = 0;
 
 	if (*arch_type_p)
@@ -80,7 +80,7 @@ int register_reg_arch_type(int (*get)(reg_t *reg), int (*set)(reg_t *reg, uint8_
 		}
 	}
 
-	(*arch_type_p) = malloc(sizeof(reg_arch_type_t));
+	(*arch_type_p) = malloc(sizeof(struct reg_arch_type));
 	(*arch_type_p)-&gt;id = id + 1;
 	(*arch_type_p)-&gt;set = set;
 	(*arch_type_p)-&gt;get = get;
@@ -89,9 +89,9 @@ int register_reg_arch_type(int (*get)(reg_t *reg), int (*set)(reg_t *reg, uint8_
 	return id + 1;
 }
 
-reg_arch_type_t* register_get_arch_type(int id)
+struct reg_arch_type* register_get_arch_type(int id)
 {
-	reg_arch_type_t *arch_type = reg_arch_types;
+	struct reg_arch_type *arch_type = reg_arch_types;
 
 	while (arch_type)
 	{
diff --git a/src/target/register.h b/src/target/register.h
index 422fbd2..57342ba 100644
--- a/src/target/register.h
+++ b/src/target/register.h
@@ -54,13 +54,13 @@ struct reg_cache
 	int num_regs;
 };
 
-typedef struct reg_arch_type_s
+struct reg_arch_type
 {
 	int id;
 	int (*get)(reg_t *reg);
 	int (*set)(reg_t *reg, uint8_t *buf);
-	struct reg_arch_type_s *next;
-} reg_arch_type_t;
+	struct reg_arch_type *next;
+};
 
 reg_t* register_get_by_name(struct reg_cache *first,
 		const char *name, bool search_all);
@@ -68,7 +68,7 @@ struct reg_cache** register_get_last_cache_p(struct reg_cache **first);
 
 int register_reg_arch_type(int (*get)(reg_t *reg),
 		int (*set)(reg_t *reg, uint8_t *buf));
-reg_arch_type_t* register_get_arch_type(int id);
+struct reg_arch_type* register_get_arch_type(int id);
 
 void register_init_dummy(reg_t *reg);
 
diff --git a/src/target/target.c b/src/target/target.c
index eaa29db..8932266 100644
--- a/src/target/target.c
+++ b/src/target/target.c
@@ -1961,7 +1961,7 @@ COMMAND_HANDLER(handle_reg_command)
 
 		if (reg-&gt;valid == 0)
 		{
-			reg_arch_type_t *arch_type = register_get_arch_type(reg-&gt;arch_type);
+			struct reg_arch_type *arch_type = register_get_arch_type(reg-&gt;arch_type);
 			arch_type-&gt;get(reg);
 		}
 		value = buf_to_str(reg-&gt;value, reg-&gt;size, 16);
@@ -1976,7 +1976,7 @@ COMMAND_HANDLER(handle_reg_command)
 		uint8_t *buf = malloc(CEIL(reg-&gt;size, 8));
 		str_to_buf(args[1], strlen(args[1]), buf, reg-&gt;size, 0);
 
-		reg_arch_type_t *arch_type = register_get_arch_type(reg-&gt;arch_type);
+		struct reg_arch_type *arch_type = register_get_arch_type(reg-&gt;arch_type);
 		arch_type-&gt;set(reg, buf);
 
 		value = buf_to_str(reg-&gt;value, reg-&gt;size, 16);

commit 74d09617b927ed7011098d5a65087dee1ef1e87a
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:44:08 2009 -0800

    reg_cache_t -&gt; struct reg_cache
    
    Remove misleading typedef and redundant suffix from struct reg_cache.

diff --git a/src/target/arm11.c b/src/target/arm11.c
index 5e96b3e..549f476 100644
--- a/src/target/arm11.c
+++ b/src/target/arm11.c
@@ -1933,7 +1933,7 @@ static int arm11_build_reg_cache(target_t *target)
 {
 	struct arm11_common *arm11 = target-&gt;arch_info;
 
-	NEW(reg_cache_t,		cache,				1);
+	NEW(struct reg_cache,		cache,				1);
 	NEW(reg_t,				reg_list,			ARM11_REGCACHE_COUNT);
 	NEW(struct arm11_reg_state,	arm11_reg_states,	ARM11_REGCACHE_COUNT);
 
@@ -1951,7 +1951,7 @@ static int arm11_build_reg_cache(target_t *target)
 	cache-&gt;reg_list	= reg_list;
 	cache-&gt;num_regs	= ARM11_REGCACHE_COUNT;
 
-	reg_cache_t **cache_p = register_get_last_cache_p(&amp;target-&gt;reg_cache);
+	struct reg_cache **cache_p = register_get_last_cache_p(&amp;target-&gt;reg_cache);
 	(*cache_p) = cache;
 
 	arm11-&gt;core_cache = cache;
diff --git a/src/target/arm11.h b/src/target/arm11.h
index f277b29..b397709 100644
--- a/src/target/arm11.h
+++ b/src/target/arm11.h
@@ -116,7 +116,7 @@ struct arm11_common
 	size_t	free_wrps;				/**&lt; keep track of breakpoints allocated by arm11_add_watchpoint() */
 
 	// GA
-	reg_cache_t *core_cache;
+	struct reg_cache *core_cache;
 };
 
 
diff --git a/src/target/arm7_9_common.h b/src/target/arm7_9_common.h
index 0cd6bf5..cebf6e3 100644
--- a/src/target/arm7_9_common.h
+++ b/src/target/arm7_9_common.h
@@ -43,7 +43,7 @@ struct arm7_9_common
 	uint32_t common_magic;
 
 	struct arm_jtag jtag_info; /**&lt; JTAG information for target */
-	reg_cache_t *eice_cache; /**&lt; Embedded ICE register cache */
+	struct reg_cache *eice_cache; /**&lt; Embedded ICE register cache */
 
 	uint32_t arm_bkpt; /**&lt; ARM breakpoint instruction */
 	uint16_t thumb_bkpt; /**&lt; Thumb breakpoint instruction */
diff --git a/src/target/arm7tdmi.c b/src/target/arm7tdmi.c
index dc2cfbd..d1509cb 100644
--- a/src/target/arm7tdmi.c
+++ b/src/target/arm7tdmi.c
@@ -639,7 +639,7 @@ static void arm7tdmi_branch_resume_thumb(target_t *target)
 
 static void arm7tdmi_build_reg_cache(target_t *target)
 {
-	reg_cache_t **cache_p = register_get_last_cache_p(&amp;target-&gt;reg_cache);
+	struct reg_cache **cache_p = register_get_last_cache_p(&amp;target-&gt;reg_cache);
 	struct armv4_5_common_s *armv4_5 = target_to_armv4_5(target);
 
 	(*cache_p) = armv4_5_build_reg_cache(target, armv4_5);
@@ -655,8 +655,8 @@ int arm7tdmi_examine(struct target_s *target)
 	if (!target_was_examined(target))
 	{
 		/* get pointers to arch-specific information */
-		reg_cache_t **cache_p = register_get_last_cache_p(&amp;target-&gt;reg_cache);
-		reg_cache_t *t = embeddedice_build_reg_cache(target, arm7_9);
+		struct reg_cache **cache_p = register_get_last_cache_p(&amp;target-&gt;reg_cache);
+		struct reg_cache *t = embeddedice_build_reg_cache(target, arm7_9);
 		if (t == NULL)
 			return ERROR_FAIL;
 
diff --git a/src/target/arm9tdmi.c b/src/target/arm9tdmi.c
index 897563c..5e03493 100644
--- a/src/target/arm9tdmi.c
+++ b/src/target/arm9tdmi.c
@@ -735,7 +735,7 @@ void arm9tdmi_disable_single_step(target_t *target)
 
 static void arm9tdmi_build_reg_cache(target_t *target)
 {
-	reg_cache_t **cache_p = register_get_last_cache_p(&amp;target-&gt;reg_cache);
+	struct reg_cache **cache_p = register_get_last_cache_p(&amp;target-&gt;reg_cache);
 	struct armv4_5_common_s *armv4_5 = target_to_armv4_5(target);
 
 	(*cache_p) = armv4_5_build_reg_cache(target, armv4_5);
@@ -749,8 +749,8 @@ int arm9tdmi_examine(struct target_s *target)
 
 	if (!target_was_examined(target))
 	{
-		reg_cache_t **cache_p = register_get_last_cache_p(&amp;target-&gt;reg_cache);
-		reg_cache_t *t;
+		struct reg_cache **cache_p = register_get_last_cache_p(&amp;target-&gt;reg_cache);
+		struct reg_cache *t;
 		/* one extra register (vector catch) */
 		t = embeddedice_build_reg_cache(target, arm7_9);
 		if (t == NULL)
diff --git a/src/target/armv4_5.c b/src/target/armv4_5.c
index 1c5db29..e7c405c 100644
--- a/src/target/armv4_5.c
+++ b/src/target/armv4_5.c
@@ -249,10 +249,10 @@ int armv4_5_invalidate_core_regs(target_t *target)
 	return ERROR_OK;
 }
 
-reg_cache_t* armv4_5_build_reg_cache(target_t *target, armv4_5_common_t *armv4_5_common)
+struct reg_cache* armv4_5_build_reg_cache(target_t *target, armv4_5_common_t *armv4_5_common)
 {
 	int num_regs = 37;
-	reg_cache_t *cache = malloc(sizeof(reg_cache_t));
+	struct reg_cache *cache = malloc(sizeof(struct reg_cache));
 	reg_t *reg_list = malloc(sizeof(reg_t) * num_regs);
 	struct armv4_5_core_reg *arch_info = malloc(sizeof(struct armv4_5_core_reg) * num_regs);
 	int i;
diff --git a/src/target/armv4_5.h b/src/target/armv4_5.h
index 3cc8937..8987916 100644
--- a/src/target/armv4_5.h
+++ b/src/target/armv4_5.h
@@ -87,7 +87,7 @@ enum
 typedef struct arm
 {
 	int common_magic;
-	reg_cache_t *core_cache;
+	struct reg_cache *core_cache;
 
 	int /* armv4_5_mode */ core_mode;
 	enum armv4_5_state core_state;
@@ -135,7 +135,7 @@ struct armv4_5_core_reg
 	armv4_5_common_t *armv4_5_common;
 };
 
-reg_cache_t* armv4_5_build_reg_cache(target_t *target,
+struct reg_cache* armv4_5_build_reg_cache(target_t *target,
 		armv4_5_common_t *armv4_5_common);
 
 /* map psr mode bits to linear number */
diff --git a/src/target/armv7a.h b/src/target/armv7a.h
index 42a25df..910a884 100644
--- a/src/target/armv7a.h
+++ b/src/target/armv7a.h
@@ -92,7 +92,7 @@ enum
 struct armv7a_common
 {
 	int common_magic;
-	reg_cache_t *core_cache;
+	struct reg_cache *core_cache;
 	enum armv7a_mode core_mode;
 	enum armv7a_state core_state;
 
@@ -150,7 +150,7 @@ struct armv7a_core_reg
 };
 
 int armv7a_arch_state(struct target_s *target);
-reg_cache_t *armv7a_build_reg_cache(target_t *target,
+struct reg_cache *armv7a_build_reg_cache(target_t *target,
 		struct armv7a_common *armv7a_common);
 int armv7a_register_commands(struct command_context_s *cmd_ctx);
 int armv7a_init_arch_info(target_t *target, struct armv7a_common *armv7a);
diff --git a/src/target/armv7m.c b/src/target/armv7m.c
index 9319bf2..0566888 100644
--- a/src/target/armv7m.c
+++ b/src/target/armv7m.c
@@ -524,12 +524,12 @@ int armv7m_arch_state(struct target_s *target)
 }
 
 /** Builds cache of architecturally defined registers.  */
-reg_cache_t *armv7m_build_reg_cache(target_t *target)
+struct reg_cache *armv7m_build_reg_cache(target_t *target)
 {
 	struct armv7m_common *armv7m = target_to_armv7m(target);
 	int num_regs = ARMV7M_NUM_REGS;
-	reg_cache_t **cache_p = register_get_last_cache_p(&amp;target-&gt;reg_cache);
-	reg_cache_t *cache = malloc(sizeof(reg_cache_t));
+	struct reg_cache **cache_p = register_get_last_cache_p(&amp;target-&gt;reg_cache);
+	struct reg_cache *cache = malloc(sizeof(struct reg_cache));
 	reg_t *reg_list = calloc(num_regs, sizeof(reg_t));
 	struct armv7m_core_reg *arch_info = calloc(num_regs, sizeof(struct armv7m_core_reg));
 	int i;
diff --git a/src/target/armv7m.h b/src/target/armv7m.h
index 43ec563..2f4fbdb 100644
--- a/src/target/armv7m.h
+++ b/src/target/armv7m.h
@@ -94,7 +94,7 @@ enum
 struct armv7m_common
 {
 	int common_magic;
-	reg_cache_t *core_cache;
+	struct reg_cache *core_cache;
 	enum armv7m_mode core_mode;
 	int exception_number;
 	struct swjdp_common swjdp_info;
@@ -134,7 +134,7 @@ struct armv7m_core_reg
 	struct armv7m_common *armv7m_common;
 };
 
-reg_cache_t *armv7m_build_reg_cache(target_t *target);
+struct reg_cache *armv7m_build_reg_cache(target_t *target);
 enum armv7m_mode armv7m_number_to_mode(int number);
 int armv7m_mode_to_number(enum armv7m_mode mode);
 
diff --git a/src/target/cortex_a8.c b/src/target/cortex_a8.c
index a60564c..edf7f14 100644
--- a/src/target/cortex_a8.c
+++ b/src/target/cortex_a8.c
@@ -1435,7 +1435,7 @@ static int cortex_a8_examine(struct target_s *target)
 
 static void cortex_a8_build_reg_cache(target_t *target)
 {
-	reg_cache_t **cache_p = register_get_last_cache_p(&amp;target-&gt;reg_cache);
+	struct reg_cache **cache_p = register_get_last_cache_p(&amp;target-&gt;reg_cache);
 	struct armv4_5_common_s *armv4_5 = target_to_armv4_5(target);
 
 	(*cache_p) = armv4_5_build_reg_cache(target, armv4_5);
diff --git a/src/target/cortex_m3.c b/src/target/cortex_m3.c
index 9d2c54f..01fe7c1 100644
--- a/src/target/cortex_m3.c
+++ b/src/target/cortex_m3.c
@@ -1516,7 +1516,7 @@ static void
 cortex_m3_dwt_setup(struct cortex_m3_common *cm3, struct target_s *target)
 {
 	uint32_t dwtcr;
-	struct reg_cache_s *cache;
+	struct reg_cache *cache;
 	cortex_m3_dwt_comparator_t *comparator;
 	int reg, i;
 
diff --git a/src/target/cortex_m3.h b/src/target/cortex_m3.h
index b2d558d..9626467 100644
--- a/src/target/cortex_m3.h
+++ b/src/target/cortex_m3.h
@@ -158,7 +158,7 @@ struct cortex_m3_common
 	int dwt_num_comp;
 	int dwt_comp_available;
 	cortex_m3_dwt_comparator_t *dwt_comparator_list;
-	struct reg_cache_s *dwt_cache;
+	struct reg_cache *dwt_cache;
 
 	struct armv7m_common armv7m;
 };
diff --git a/src/target/embeddedice.c b/src/target/embeddedice.c
index 169ad2c..4d93981 100644
--- a/src/target/embeddedice.c
+++ b/src/target/embeddedice.c
@@ -163,11 +163,11 @@ static int embeddedice_get_reg(reg_t *reg)
  * Different versions of the modules have different capabilities, such as
  * hardware support for vector_catch, single stepping, and monitor mode.
  */
-reg_cache_t *
+struct reg_cache *
 embeddedice_build_reg_cache(target_t *target, struct arm7_9_common *arm7_9)
 {
 	int retval;
-	reg_cache_t *reg_cache = malloc(sizeof(reg_cache_t));
+	struct reg_cache *reg_cache = malloc(sizeof(struct reg_cache));
 	reg_t *reg_list = NULL;
 	struct embeddedice_reg *arch_info = NULL;
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
diff --git a/src/target/embeddedice.h b/src/target/embeddedice.h
index eb2bb29..47ef3d9 100644
--- a/src/target/embeddedice.h
+++ b/src/target/embeddedice.h
@@ -93,7 +93,7 @@ struct embeddedice_reg
 	struct arm_jtag *jtag_info;
 };
 
-reg_cache_t* embeddedice_build_reg_cache(target_t *target,
+struct reg_cache* embeddedice_build_reg_cache(target_t *target,
 		struct arm7_9_common *arm7_9);
 
 int embeddedice_setup(target_t *target);
diff --git a/src/target/etb.c b/src/target/etb.c
index 44decfe..8f1c67a 100644
--- a/src/target/etb.c
+++ b/src/target/etb.c
@@ -121,9 +121,9 @@ static int etb_get_reg(reg_t *reg)
 	return ERROR_OK;
 }
 
-reg_cache_t* etb_build_reg_cache(etb_t *etb)
+struct reg_cache* etb_build_reg_cache(etb_t *etb)
 {
-	reg_cache_t *reg_cache = malloc(sizeof(reg_cache_t));
+	struct reg_cache *reg_cache = malloc(sizeof(struct reg_cache));
 	reg_t *reg_list = NULL;
 	struct etb_reg *arch_info = NULL;
 	int num_regs = 9;
diff --git a/src/target/etb.h b/src/target/etb.h
index b8973de..820d296 100644
--- a/src/target/etb.h
+++ b/src/target/etb.h
@@ -39,7 +39,7 @@ typedef struct etb_s
 	etm_context_t *etm_ctx;
 	struct jtag_tap *tap;
 	uint32_t cur_scan_chain;
-	reg_cache_t *reg_cache;
+	struct reg_cache *reg_cache;
 
 	/* ETB parameters */
 	uint32_t ram_depth;
@@ -54,6 +54,6 @@ struct etb_reg
 
 extern struct etm_capture_driver etb_capture_driver;
 
-reg_cache_t* etb_build_reg_cache(etb_t *etb);
+struct reg_cache* etb_build_reg_cache(etb_t *etb);
 
 #endif /* ETB_H */
diff --git a/src/target/etm.c b/src/target/etm.c
index 9952279..118fe12 100644
--- a/src/target/etm.c
+++ b/src/target/etm.c
@@ -231,7 +231,7 @@ static command_t *etm_cmd;
  */
 static reg_t *etm_reg_lookup(etm_context_t *etm_ctx, unsigned id)
 {
-	reg_cache_t *cache = etm_ctx-&gt;reg_cache;
+	struct reg_cache *cache = etm_ctx-&gt;reg_cache;
 	int i;
 
 	for (i = 0; i &lt; cache-&gt;num_regs; i++) {
@@ -248,7 +248,7 @@ static reg_t *etm_reg_lookup(etm_context_t *etm_ctx, unsigned id)
 }
 
 static void etm_reg_add(unsigned bcd_vers, struct arm_jtag *jtag_info,
-		reg_cache_t *cache, struct etm_reg *ereg,
+		struct reg_cache *cache, struct etm_reg *ereg,
 		const struct etm_reg_info *r, unsigned nreg)
 {
 	reg_t *reg = cache-&gt;reg_list;
@@ -279,10 +279,10 @@ static void etm_reg_add(unsigned bcd_vers, struct arm_jtag *jtag_info,
 	}
 }
 
-reg_cache_t *etm_build_reg_cache(target_t *target,
+struct reg_cache *etm_build_reg_cache(target_t *target,
 		struct arm_jtag *jtag_info, etm_context_t *etm_ctx)
 {
-	reg_cache_t *reg_cache = malloc(sizeof(reg_cache_t));
+	struct reg_cache *reg_cache = malloc(sizeof(struct reg_cache));
 	reg_t *reg_list = NULL;
 	struct etm_reg *arch_info = NULL;
 	unsigned bcd_vers, config;
diff --git a/src/target/etm.h b/src/target/etm.h
index 08f9c22..63e31f1 100644
--- a/src/target/etm.h
+++ b/src/target/etm.h
@@ -155,7 +155,7 @@ struct etmv1_trace_data
 typedef struct etm
 {
 	target_t *target;		/* target this ETM is connected to */
-	reg_cache_t *reg_cache;		/* ETM register cache */
+	struct reg_cache *reg_cache;		/* ETM register cache */
 	struct etm_capture_driver *capture_driver;	/* driver used to access ETM data */
 	void *capture_driver_priv;	/* capture driver private data */
 	uint32_t trigger_percent;	/* how much trace buffer to fill after trigger */
@@ -207,7 +207,7 @@ typedef enum
 	BR_RSVD7   = 0x7, /* reserved */
 } etmv1_branch_reason_t;
 
-reg_cache_t* etm_build_reg_cache(target_t *target,
+struct reg_cache* etm_build_reg_cache(target_t *target,
 		struct arm_jtag *jtag_info, etm_context_t *etm_ctx);
 
 int etm_setup(target_t *target);
diff --git a/src/target/mips32.c b/src/target/mips32.c
index 48fb7a3..ddc27a6 100644
--- a/src/target/mips32.c
+++ b/src/target/mips32.c
@@ -271,14 +271,14 @@ int mips32_arch_state(struct target_s *target)
 	return ERROR_OK;
 }
 
-reg_cache_t *mips32_build_reg_cache(target_t *target)
+struct reg_cache *mips32_build_reg_cache(target_t *target)
 {
 	/* get pointers to arch-specific information */
 	struct mips32_common *mips32 = target-&gt;arch_info;
 
 	int num_regs = MIPS32NUMCOREREGS;
-	reg_cache_t **cache_p = register_get_last_cache_p(&amp;target-&gt;reg_cache);
-	reg_cache_t *cache = malloc(sizeof(reg_cache_t));
+	struct reg_cache **cache_p = register_get_last_cache_p(&amp;target-&gt;reg_cache);
+	struct reg_cache *cache = malloc(sizeof(struct reg_cache));
 	reg_t *reg_list = malloc(sizeof(reg_t) * num_regs);
 	struct mips32_core_reg *arch_info = malloc(sizeof(struct mips32_core_reg) * num_regs);
 	int i;
diff --git a/src/target/mips32.h b/src/target/mips32.h
index 39f00be..7cecb75 100644
--- a/src/target/mips32.h
+++ b/src/target/mips32.h
@@ -49,7 +49,7 @@ struct mips32_common
 {
 	uint32_t common_magic;
 	void *arch_info;
-	reg_cache_t *core_cache;
+	struct reg_cache *core_cache;
 	struct mips_ejtag ejtag_info;
 	uint32_t core_regs[MIPS32NUMCOREREGS];
 
@@ -132,7 +132,7 @@ int mips32_init_arch_info(target_t *target,
 int mips32_restore_context(target_t *target);
 int mips32_save_context(target_t *target);
 
-reg_cache_t *mips32_build_reg_cache(target_t *target);
+struct reg_cache *mips32_build_reg_cache(target_t *target);
 
 int mips32_run_algorithm(struct target_s *target,
 		int num_mem_params, struct mem_param *mem_params,
diff --git a/src/target/register.c b/src/target/register.c
index 58cc85e..2efcd5f 100644
--- a/src/target/register.c
+++ b/src/target/register.c
@@ -30,11 +30,11 @@
 
 reg_arch_type_t *reg_arch_types = NULL;
 
-reg_t* register_get_by_name(reg_cache_t *first,
+reg_t* register_get_by_name(struct reg_cache *first,
 		const char *name, bool search_all)
 {
 	int i;
-	reg_cache_t *cache = first;
+	struct reg_cache *cache = first;
 
 	while (cache)
 	{
@@ -53,9 +53,9 @@ reg_t* register_get_by_name(reg_cache_t *first,
 	return NULL;
 }
 
-reg_cache_t** register_get_last_cache_p(reg_cache_t **first)
+struct reg_cache** register_get_last_cache_p(struct reg_cache **first)
 {
-	reg_cache_t **cache_p = first;
+	struct reg_cache **cache_p = first;
 
 	if (*cache_p)
 		while (*cache_p)
diff --git a/src/target/register.h b/src/target/register.h
index bc40d1f..422fbd2 100644
--- a/src/target/register.h
+++ b/src/target/register.h
@@ -46,13 +46,13 @@ typedef struct reg_s
 	int arch_type;
 } reg_t;
 
-typedef struct reg_cache_s
+struct reg_cache
 {
 	char *name;
-	struct reg_cache_s *next;
+	struct reg_cache *next;
 	reg_t *reg_list;
 	int num_regs;
-} reg_cache_t;
+};
 
 typedef struct reg_arch_type_s
 {
@@ -62,9 +62,9 @@ typedef struct reg_arch_type_s
 	struct reg_arch_type_s *next;
 } reg_arch_type_t;
 
-reg_t* register_get_by_name(reg_cache_t *first,
+reg_t* register_get_by_name(struct reg_cache *first,
 		const char *name, bool search_all);
-reg_cache_t** register_get_last_cache_p(reg_cache_t **first);
+struct reg_cache** register_get_last_cache_p(struct reg_cache **first);
 
 int register_reg_arch_type(int (*get)(reg_t *reg),
 		int (*set)(reg_t *reg, uint8_t *buf));
diff --git a/src/target/target.c b/src/target/target.c
index e8f91de..eaa29db 100644
--- a/src/target/target.c
+++ b/src/target/target.c
@@ -1876,7 +1876,7 @@ COMMAND_HANDLER(handle_reg_command)
 	/* list all available registers for the current target */
 	if (argc == 0)
 	{
-		reg_cache_t *cache = target-&gt;reg_cache;
+		struct reg_cache *cache = target-&gt;reg_cache;
 
 		count = 0;
 		while (cache)
@@ -1919,7 +1919,7 @@ COMMAND_HANDLER(handle_reg_command)
 		unsigned num;
 		COMMAND_PARSE_NUMBER(uint, args[0], num);
 
-		reg_cache_t *cache = target-&gt;reg_cache;
+		struct reg_cache *cache = target-&gt;reg_cache;
 		count = 0;
 		while (cache)
 		{
diff --git a/src/target/target.h b/src/target/target.h
index 064a954..b7fa3eb 100644
--- a/src/target/target.h
+++ b/src/target/target.h
@@ -154,7 +154,7 @@ typedef struct target_s
 	enum target_endianess endianness;	/* target endianess */
 	// also see: target_state_name()
 	enum target_state state;			/* the current backend-state (running, halted, ...) */
-	struct reg_cache_s *reg_cache;		/* the first register cache of the target (core regs) */
+	struct reg_cache *reg_cache;		/* the first register cache of the target (core regs) */
 	struct breakpoint_s *breakpoints;	/* list of breakpoints */
 	struct watchpoint *watchpoints;	/* list of watchpoints */
 	struct trace_s *trace_info;			/* generic trace information */
diff --git a/src/target/xscale.c b/src/target/xscale.c
index a04bf42..d114fec 100644
--- a/src/target/xscale.c
+++ b/src/target/xscale.c
@@ -2821,7 +2821,7 @@ static void xscale_build_reg_cache(target_t *target)
 {
 	struct xscale_common_s *xscale = target_to_xscale(target);
 	struct armv4_5_common_s *armv4_5 = &amp;xscale-&gt;armv4_5_common;
-	reg_cache_t **cache_p = register_get_last_cache_p(&amp;target-&gt;reg_cache);
+	struct reg_cache **cache_p = register_get_last_cache_p(&amp;target-&gt;reg_cache);
 	xscale_reg_t *arch_info = malloc(sizeof(xscale_reg_arch_info));
 	int i;
 	int num_regs = sizeof(xscale_reg_arch_info) / sizeof(xscale_reg_t);
@@ -2833,7 +2833,7 @@ static void xscale_build_reg_cache(target_t *target)
 	if (xscale_reg_arch_type == -1)
 		xscale_reg_arch_type = register_reg_arch_type(xscale_get_reg, xscale_set_reg);
 
-	(*cache_p)-&gt;next = malloc(sizeof(reg_cache_t));
+	(*cache_p)-&gt;next = malloc(sizeof(struct reg_cache));
 	cache_p = &amp;(*cache_p)-&gt;next;
 
 	/* fill in values for the xscale reg cache */
diff --git a/src/target/xscale.h b/src/target/xscale.h
index dd7b034..d5de8dc 100644
--- a/src/target/xscale.h
+++ b/src/target/xscale.h
@@ -86,7 +86,7 @@ typedef struct xscale_common_s
 	int common_magic;
 
 	/* XScale registers (CP15, DBG) */
-	reg_cache_t *reg_cache;
+	struct reg_cache *reg_cache;
 
 	/* current state of the debug handler */
 	uint32_t handler_address;

commit de3fb2f3bce2de5be44223204ce368216ed85b0f
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:43:51 2009 -0800

    bitfield_desc_t -&gt; struct bitfield_desc
    
    Remove misleading typedef and redundant suffix from struct bitfield_desc.

diff --git a/src/target/armv4_5.c b/src/target/armv4_5.c
index bde9e22..1c5db29 100644
--- a/src/target/armv4_5.c
+++ b/src/target/armv4_5.c
@@ -32,7 +32,7 @@
 #include &quot;binarybuffer.h&quot;
 
 
-bitfield_desc_t armv4_5_psr_bitfield_desc[] =
+struct bitfield_desc armv4_5_psr_bitfield_desc[] =
 {
 	{&quot;M[4:0]&quot;, 5},
 	{&quot;T&quot;, 1},
diff --git a/src/target/armv7a.c b/src/target/armv7a.c
index 582e2e0..c4b4c98 100644
--- a/src/target/armv7a.c
+++ b/src/target/armv7a.c
@@ -35,7 +35,7 @@
 #include &lt;string.h&gt;
 #include &lt;unistd.h&gt;
 
-bitfield_desc_t armv7a_psr_bitfield_desc[] =
+struct bitfield_desc armv7a_psr_bitfield_desc[] =
 {
 	{&quot;M[4:0]&quot;, 5},
 	{&quot;T&quot;, 1},
diff --git a/src/target/register.h b/src/target/register.h
index 3af81ca..bc40d1f 100644
--- a/src/target/register.h
+++ b/src/target/register.h
@@ -27,11 +27,11 @@
 
 struct target_s;
 
-typedef struct bitfield_desc_s
+struct bitfield_desc
 {
 	char *name;
 	int num_bits;
-} bitfield_desc_t;
+};
 
 typedef struct reg_s
 {
@@ -40,7 +40,7 @@ typedef struct reg_s
 	int dirty;
 	int valid;
 	uint32_t size;
-	bitfield_desc_t *bitfield_desc;
+	struct bitfield_desc *bitfield_desc;
 	int num_bitfields;
 	void *arch_info;
 	int arch_type;

commit f4e03e3b902104f5cf8aab1ea3cd5db2bb36890e
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:43:42 2009 -0800

    oocd_trace_t -&gt; struct oocd_trace
    
    Remove misleading typedef and redundant suffix from struct oocd_trace.

diff --git a/src/target/oocd_trace.c b/src/target/oocd_trace.c
index b9cd03a..c5f8b80 100644
--- a/src/target/oocd_trace.c
+++ b/src/target/oocd_trace.c
@@ -32,7 +32,7 @@
 
 static int oocd_trace_register_commands(struct command_context_s *cmd_ctx);
 
-static int oocd_trace_read_reg(oocd_trace_t *oocd_trace, int reg, uint32_t *value)
+static int oocd_trace_read_reg(struct oocd_trace *oocd_trace, int reg, uint32_t *value)
 {
 	size_t bytes_written, bytes_read, bytes_to_read;
 	uint8_t cmd;
@@ -52,7 +52,7 @@ static int oocd_trace_read_reg(oocd_trace_t *oocd_trace, int reg, uint32_t *valu
 	return ERROR_OK;
 }
 
-static int oocd_trace_write_reg(oocd_trace_t *oocd_trace, int reg, uint32_t value)
+static int oocd_trace_write_reg(struct oocd_trace *oocd_trace, int reg, uint32_t value)
 {
 	size_t bytes_written;
 	uint8_t data[5];
@@ -69,7 +69,7 @@ static int oocd_trace_write_reg(oocd_trace_t *oocd_trace, int reg, uint32_t valu
 	return ERROR_OK;
 }
 
-static int oocd_trace_read_memory(oocd_trace_t *oocd_trace, uint8_t *data, uint32_t address, uint32_t size)
+static int oocd_trace_read_memory(struct oocd_trace *oocd_trace, uint8_t *data, uint32_t address, uint32_t size)
 {
 	size_t bytes_written, bytes_to_read;
 	ssize_t bytes_read;
@@ -99,7 +99,7 @@ static int oocd_trace_read_memory(oocd_trace_t *oocd_trace, uint8_t *data, uint3
 static int oocd_trace_init(etm_context_t *etm_ctx)
 {
 	uint8_t trash[256];
-	oocd_trace_t *oocd_trace = etm_ctx-&gt;capture_driver_priv;
+	struct oocd_trace *oocd_trace = etm_ctx-&gt;capture_driver_priv;
 	size_t bytes_read;
 
 	oocd_trace-&gt;tty_fd = open(oocd_trace-&gt;tty, O_RDWR | O_NOCTTY | O_NONBLOCK);
@@ -145,7 +145,7 @@ static int oocd_trace_init(etm_context_t *etm_ctx)
 
 static trace_status_t oocd_trace_status(etm_context_t *etm_ctx)
 {
-	oocd_trace_t *oocd_trace = etm_ctx-&gt;capture_driver_priv;
+	struct oocd_trace *oocd_trace = etm_ctx-&gt;capture_driver_priv;
 	uint32_t status;
 
 	oocd_trace_read_reg(oocd_trace, OOCD_TRACE_STATUS, &amp;status);
@@ -177,7 +177,7 @@ static trace_status_t oocd_trace_status(etm_context_t *etm_ctx)
 
 static int oocd_trace_read_trace(etm_context_t *etm_ctx)
 {
-	oocd_trace_t *oocd_trace = etm_ctx-&gt;capture_driver_priv;
+	struct oocd_trace *oocd_trace = etm_ctx-&gt;capture_driver_priv;
 	uint32_t status, address;
 	uint32_t first_frame = 0x0;
 	uint32_t num_frames = 1048576;
@@ -235,7 +235,7 @@ static int oocd_trace_read_trace(etm_context_t *etm_ctx)
 
 static int oocd_trace_start_capture(etm_context_t *etm_ctx)
 {
-	oocd_trace_t *oocd_trace = etm_ctx-&gt;capture_driver_priv;
+	struct oocd_trace *oocd_trace = etm_ctx-&gt;capture_driver_priv;
 	uint32_t control = 0x1;	/* 0x1: enabled */
 	uint32_t trigger_count;
 
@@ -268,7 +268,7 @@ static int oocd_trace_start_capture(etm_context_t *etm_ctx)
 
 static int oocd_trace_stop_capture(etm_context_t *etm_ctx)
 {
-	oocd_trace_t *oocd_trace = etm_ctx-&gt;capture_driver_priv;
+	struct oocd_trace *oocd_trace = etm_ctx-&gt;capture_driver_priv;
 
 	/* trace stopped, just clear running flag, but preserve others */
 	etm_ctx-&gt;capture_status &amp;= ~TRACE_RUNNING;
@@ -310,7 +310,7 @@ COMMAND_HANDLER(handle_oocd_trace_config_command)
 
 	if (arm-&gt;etm)
 	{
-		oocd_trace_t *oocd_trace = malloc(sizeof(oocd_trace_t));
+		struct oocd_trace *oocd_trace = malloc(sizeof(struct oocd_trace));
 
 		arm-&gt;etm-&gt;capture_driver_priv = oocd_trace;
 		oocd_trace-&gt;etm_ctx = arm-&gt;etm;
@@ -330,7 +330,7 @@ COMMAND_HANDLER(handle_oocd_trace_status_command)
 {
 	target_t *target;
 	struct arm *arm;
-	oocd_trace_t *oocd_trace;
+	struct oocd_trace *oocd_trace;
 	uint32_t status;
 
 	target = get_current_target(cmd_ctx);
@@ -354,7 +354,7 @@ COMMAND_HANDLER(handle_oocd_trace_status_command)
 		return ERROR_FAIL;
 	}
 
-	oocd_trace = (oocd_trace_t*)arm-&gt;etm-&gt;capture_driver_priv;
+	oocd_trace = (struct oocd_trace*)arm-&gt;etm-&gt;capture_driver_priv;
 
 	oocd_trace_read_reg(oocd_trace, OOCD_TRACE_STATUS, &amp;status);
 
@@ -370,7 +370,7 @@ COMMAND_HANDLER(handle_oocd_trace_resync_command)
 {
 	target_t *target;
 	struct arm *arm;
-	oocd_trace_t *oocd_trace;
+	struct oocd_trace *oocd_trace;
 	size_t bytes_written;
 	uint8_t cmd_array[1];
 
@@ -395,7 +395,7 @@ COMMAND_HANDLER(handle_oocd_trace_resync_command)
 		return ERROR_FAIL;
 	}
 
-	oocd_trace = (oocd_trace_t*)arm-&gt;etm-&gt;capture_driver_priv;
+	oocd_trace = (struct oocd_trace*)arm-&gt;etm-&gt;capture_driver_priv;
 
 	cmd_array[0] = 0xf0;
 
diff --git a/src/target/oocd_trace.h b/src/target/oocd_trace.h
index 886ff79..49b4b89 100644
--- a/src/target/oocd_trace.h
+++ b/src/target/oocd_trace.h
@@ -46,13 +46,13 @@ enum
 	OOCD_TRACE_RESYNC = 0xf0,
 };
 
-typedef struct oocd_trace_s
+struct oocd_trace
 {
 	etm_context_t *etm_ctx;
 	char *tty;
 	int tty_fd;
 	struct termios oldtio, newtio;
-} oocd_trace_t;
+};
 
 extern struct etm_capture_driver oocd_trace_capture_driver;
 

commit b87f07110a42981aa53bb6f824d29216658dafc4
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:43:39 2009 -0800

    mips_m4k_common_t -&gt; struct mips_m4k_common
    
    Remove misleading typedef and redundant suffix from struct mips_m4k_common.

diff --git a/src/target/mips_m4k.c b/src/target/mips_m4k.c
index 580c060..bd24874 100644
--- a/src/target/mips_m4k.c
+++ b/src/target/mips_m4k.c
@@ -917,7 +917,7 @@ int mips_m4k_init_target(struct command_context_s *cmd_ctx, struct target_s *tar
 	return ERROR_OK;
 }
 
-int mips_m4k_init_arch_info(target_t *target, mips_m4k_common_t *mips_m4k, struct jtag_tap *tap)
+int mips_m4k_init_arch_info(target_t *target, struct mips_m4k_common *mips_m4k, struct jtag_tap *tap)
 {
 	struct mips32_common *mips32 = &amp;mips_m4k-&gt;mips32_common;
 
@@ -932,7 +932,7 @@ int mips_m4k_init_arch_info(target_t *target, mips_m4k_common_t *mips_m4k, struc
 
 int mips_m4k_target_create(struct target_s *target, Jim_Interp *interp)
 {
-	mips_m4k_common_t *mips_m4k = calloc(1,sizeof(mips_m4k_common_t));
+	struct mips_m4k_common *mips_m4k = calloc(1,sizeof(struct mips_m4k_common));
 
 	mips_m4k_init_arch_info(target, mips_m4k, target-&gt;tap);
 
diff --git a/src/target/mips_m4k.h b/src/target/mips_m4k.h
index 89c0a16..6044974 100644
--- a/src/target/mips_m4k.h
+++ b/src/target/mips_m4k.h
@@ -29,11 +29,11 @@ struct target_s;
 
 #define MIPSM4K_COMMON_MAGIC	0xB321B321
 
-typedef struct mips_m4k_common_s
+struct mips_m4k_common
 {
 	int common_magic;
 	struct mips32_common mips32_common;
-} mips_m4k_common_t;
+};
 
 int mips_m4k_bulk_write_memory(struct target_s *target,
 		uint32_t address, uint32_t count, uint8_t *buffer);

commit a8141cafdef162d52e128cd2ab51702b9800fda2
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:43:36 2009 -0800

    mips_ejtag_t -&gt; struct mips_ejtag
    
    Remove misleading typedef and redundant suffix from struct mips_ejtag.

diff --git a/src/flash/pic32mx.c b/src/flash/pic32mx.c
index 97111f2..262200c 100644
--- a/src/flash/pic32mx.c
+++ b/src/flash/pic32mx.c
@@ -544,7 +544,7 @@ static int pic32mx_probe(struct flash_bank_s *bank)
 	target_t *target = bank-&gt;target;
 	struct pic32mx_flash_bank *pic32mx_info = bank-&gt;driver_priv;
 	struct mips32_common *mips32 = target-&gt;arch_info;
-	mips_ejtag_t *ejtag_info = &amp;mips32-&gt;ejtag_info;
+	struct mips_ejtag *ejtag_info = &amp;mips32-&gt;ejtag_info;
 	int i;
 	uint16_t num_pages = 0;
 	uint32_t device_id;
@@ -641,7 +641,7 @@ static int pic32mx_info(struct flash_bank_s *bank, char *buf, int buf_size)
 {
 	target_t *target = bank-&gt;target;
 	struct mips32_common *mips32 = target-&gt;arch_info;
-	mips_ejtag_t *ejtag_info = &amp;mips32-&gt;ejtag_info;
+	struct mips_ejtag *ejtag_info = &amp;mips32-&gt;ejtag_info;
 	uint32_t device_id;
 	int printed = 0, i;
 
diff --git a/src/target/mips32.c b/src/target/mips32.c
index 1804665..48fb7a3 100644
--- a/src/target/mips32.c
+++ b/src/target/mips32.c
@@ -216,7 +216,7 @@ int mips32_save_context(target_t *target)
 
 	/* get pointers to arch-specific information */
 	struct mips32_common *mips32 = target-&gt;arch_info;
-	mips_ejtag_t *ejtag_info = &amp;mips32-&gt;ejtag_info;
+	struct mips_ejtag *ejtag_info = &amp;mips32-&gt;ejtag_info;
 
 	/* read core registers */
 	mips32_pracc_read_regs(ejtag_info, mips32-&gt;core_regs);
@@ -238,7 +238,7 @@ int mips32_restore_context(target_t *target)
 
 	/* get pointers to arch-specific information */
 	struct mips32_common *mips32 = target-&gt;arch_info;
-	mips_ejtag_t *ejtag_info = &amp;mips32-&gt;ejtag_info;
+	struct mips_ejtag *ejtag_info = &amp;mips32-&gt;ejtag_info;
 
 	for (i = 0; i &lt; MIPS32NUMCOREREGS; i++)
 	{
diff --git a/src/target/mips32.h b/src/target/mips32.h
index 9fdb605..39f00be 100644
--- a/src/target/mips32.h
+++ b/src/target/mips32.h
@@ -50,7 +50,7 @@ struct mips32_common
 	uint32_t common_magic;
 	void *arch_info;
 	reg_cache_t *core_cache;
-	mips_ejtag_t ejtag_info;
+	struct mips_ejtag ejtag_info;
 	uint32_t core_regs[MIPS32NUMCOREREGS];
 
 	int bp_scanned;
diff --git a/src/target/mips32_dmaacc.c b/src/target/mips32_dmaacc.c
index 9a38084..aa36d2c 100644
--- a/src/target/mips32_dmaacc.c
+++ b/src/target/mips32_dmaacc.c
@@ -39,7 +39,7 @@
  * displaying/modifying memory and memory mapped registers.
  */
 
-static int ejtag_dma_read(mips_ejtag_t *ejtag_info, uint32_t addr, uint32_t *data)
+static int ejtag_dma_read(struct mips_ejtag *ejtag_info, uint32_t addr, uint32_t *data)
 {
 	uint32_t v;
 	uint32_t ejtag_ctrl;
@@ -85,7 +85,7 @@ begin_ejtag_dma_read:
 	return ERROR_OK;
 }
 
-static int ejtag_dma_read_h(mips_ejtag_t *ejtag_info, uint32_t addr, uint16_t *data)
+static int ejtag_dma_read_h(struct mips_ejtag *ejtag_info, uint32_t addr, uint16_t *data)
 {
 	uint32_t v;
 	uint32_t ejtag_ctrl;
@@ -137,7 +137,7 @@ begin_ejtag_dma_read_h:
 	return ERROR_OK;
 }
 
-static int ejtag_dma_read_b(mips_ejtag_t *ejtag_info, uint32_t addr, uint8_t *data)
+static int ejtag_dma_read_b(struct mips_ejtag *ejtag_info, uint32_t addr, uint8_t *data)
 {
 	uint32_t v;
 	uint32_t ejtag_ctrl;
@@ -199,7 +199,7 @@ begin_ejtag_dma_read_b:
 	return ERROR_OK;
 }
 
-static int ejtag_dma_write(mips_ejtag_t *ejtag_info, uint32_t addr, uint32_t data)
+static int ejtag_dma_write(struct mips_ejtag *ejtag_info, uint32_t addr, uint32_t data)
 {
 	uint32_t v;
 	uint32_t ejtag_ctrl;
@@ -246,7 +246,7 @@ begin_ejtag_dma_write:
 	return ERROR_OK;
 }
 
-static int ejtag_dma_write_h(mips_ejtag_t *ejtag_info, uint32_t addr, uint32_t data)
+static int ejtag_dma_write_h(struct mips_ejtag *ejtag_info, uint32_t addr, uint32_t data)
 {
 	uint32_t v;
 	uint32_t ejtag_ctrl;
@@ -297,7 +297,7 @@ begin_ejtag_dma_write_h:
 	return ERROR_OK;
 }
 
-static int ejtag_dma_write_b(mips_ejtag_t *ejtag_info, uint32_t addr, uint32_t data)
+static int ejtag_dma_write_b(struct mips_ejtag *ejtag_info, uint32_t addr, uint32_t data)
 {
 	uint32_t v;
 	uint32_t ejtag_ctrl;
@@ -349,7 +349,7 @@ begin_ejtag_dma_write_b:
 	return ERROR_OK;
 }
 
-int mips32_dmaacc_read_mem(mips_ejtag_t *ejtag_info, uint32_t addr, int size, int count, void *buf)
+int mips32_dmaacc_read_mem(struct mips_ejtag *ejtag_info, uint32_t addr, int size, int count, void *buf)
 {
 	switch (size)
 	{
@@ -364,7 +364,7 @@ int mips32_dmaacc_read_mem(mips_ejtag_t *ejtag_info, uint32_t addr, int size, in
 	return ERROR_OK;
 }
 
-int mips32_dmaacc_read_mem32(mips_ejtag_t *ejtag_info, uint32_t addr, int count, uint32_t *buf)
+int mips32_dmaacc_read_mem32(struct mips_ejtag *ejtag_info, uint32_t addr, int count, uint32_t *buf)
 {
 	int i;
 	int	retval;
@@ -377,7 +377,7 @@ int mips32_dmaacc_read_mem32(mips_ejtag_t *ejtag_info, uint32_t addr, int count,
 	return ERROR_OK;
 }
 
-int mips32_dmaacc_read_mem16(mips_ejtag_t *ejtag_info, uint32_t addr, int count, uint16_t *buf)
+int mips32_dmaacc_read_mem16(struct mips_ejtag *ejtag_info, uint32_t addr, int count, uint16_t *buf)
 {
 	int i;
 	int retval;
@@ -390,7 +390,7 @@ int mips32_dmaacc_read_mem16(mips_ejtag_t *ejtag_info, uint32_t addr, int count,
 	return ERROR_OK;
 }
 
-int mips32_dmaacc_read_mem8(mips_ejtag_t *ejtag_info, uint32_t addr, int count, uint8_t *buf)
+int mips32_dmaacc_read_mem8(struct mips_ejtag *ejtag_info, uint32_t addr, int count, uint8_t *buf)
 {
 	int i;
 	int retval;
@@ -403,7 +403,7 @@ int mips32_dmaacc_read_mem8(mips_ejtag_t *ejtag_info, uint32_t addr, int count,
 	return ERROR_OK;
 }
 
-int mips32_dmaacc_write_mem(mips_ejtag_t *ejtag_info, uint32_t addr, int size, int count, void *buf)
+int mips32_dmaacc_write_mem(struct mips_ejtag *ejtag_info, uint32_t addr, int size, int count, void *buf)
 {
 	switch (size)
 	{
@@ -418,7 +418,7 @@ int mips32_dmaacc_write_mem(mips_ejtag_t *ejtag_info, uint32_t addr, int size, i
 	return ERROR_OK;
 }
 
-int mips32_dmaacc_write_mem32(mips_ejtag_t *ejtag_info, uint32_t addr, int count, uint32_t *buf)
+int mips32_dmaacc_write_mem32(struct mips_ejtag *ejtag_info, uint32_t addr, int count, uint32_t *buf)
 {
 	int i;
 	int retval;
@@ -431,7 +431,7 @@ int mips32_dmaacc_write_mem32(mips_ejtag_t *ejtag_info, uint32_t addr, int count
 	return ERROR_OK;
 }
 
-int mips32_dmaacc_write_mem16(mips_ejtag_t *ejtag_info, uint32_t addr, int count, uint16_t *buf)
+int mips32_dmaacc_write_mem16(struct mips_ejtag *ejtag_info, uint32_t addr, int count, uint16_t *buf)
 {
 	int i;
 	int retval;
@@ -444,7 +444,7 @@ int mips32_dmaacc_write_mem16(mips_ejtag_t *ejtag_info, uint32_t addr, int count
 	return ERROR_OK;
 }
 
-int mips32_dmaacc_write_mem8(mips_ejtag_t *ejtag_info, uint32_t addr, int count, uint8_t *buf)
+int mips32_dmaacc_write_mem8(struct mips_ejtag *ejtag_info, uint32_t addr, int count, uint8_t *buf)
 {
 	int i;
 	int retval;
diff --git a/src/target/mips32_dmaacc.h b/src/target/mips32_dmaacc.h
index c8a64fb..c1aa07d 100644
--- a/src/target/mips32_dmaacc.h
+++ b/src/target/mips32_dmaacc.h
@@ -34,23 +34,23 @@
 
 #define RETRY_ATTEMPTS	0
 
-int mips32_dmaacc_read_mem(mips_ejtag_t *ejtag_info,
+int mips32_dmaacc_read_mem(struct mips_ejtag *ejtag_info,
 		uint32_t addr, int size, int count, void *buf);
-int mips32_dmaacc_write_mem(mips_ejtag_t *ejtag_info,
+int mips32_dmaacc_write_mem(struct mips_ejtag *ejtag_info,
 		uint32_t addr, int size, int count, void *buf);
 
-int mips32_dmaacc_read_mem8(mips_ejtag_t *ejtag_info,
+int mips32_dmaacc_read_mem8(struct mips_ejtag *ejtag_info,
 		uint32_t addr, int count, uint8_t *buf);
-int mips32_dmaacc_read_mem16(mips_ejtag_t *ejtag_info,
+int mips32_dmaacc_read_mem16(struct mips_ejtag *ejtag_info,
 		uint32_t addr, int count, uint16_t *buf);
-int mips32_dmaacc_read_mem32(mips_ejtag_t *ejtag_info,
+int mips32_dmaacc_read_mem32(struct mips_ejtag *ejtag_info,
 		uint32_t addr, int count, uint32_t *buf);
 
-int mips32_dmaacc_write_mem8(mips_ejtag_t *ejtag_info,
+int mips32_dmaacc_write_mem8(struct mips_ejtag *ejtag_info,
 		uint32_t addr, int count, uint8_t *buf);
-int mips32_dmaacc_write_mem16(mips_ejtag_t *ejtag_info,
+int mips32_dmaacc_write_mem16(struct mips_ejtag *ejtag_info,
 		uint32_t addr, int count, uint16_t *buf);
-int mips32_dmaacc_write_mem32(mips_ejtag_t *ejtag_info,
+int mips32_dmaacc_write_mem32(struct mips_ejtag *ejtag_info,
 		uint32_t addr, int count, uint32_t *buf);
 
 #endif
diff --git a/src/target/mips32_pracc.c b/src/target/mips32_pracc.c
index 0d33f39..4f597a5 100644
--- a/src/target/mips32_pracc.c
+++ b/src/target/mips32_pracc.c
@@ -86,10 +86,10 @@ typedef struct {
 	int code_len;
 	uint32_t stack[32];
 	int stack_offset;
-	mips_ejtag_t *ejtag_info;
+	struct mips_ejtag *ejtag_info;
 } mips32_pracc_context;
 
-static int wait_for_pracc_rw(mips_ejtag_t *ejtag_info, uint32_t *ctrl)
+static int wait_for_pracc_rw(struct mips_ejtag *ejtag_info, uint32_t *ctrl)
 {
 	uint32_t ejtag_ctrl;
 
@@ -110,7 +110,7 @@ static int wait_for_pracc_rw(mips_ejtag_t *ejtag_info, uint32_t *ctrl)
 
 static int mips32_pracc_exec_read(mips32_pracc_context *ctx, uint32_t address)
 {
-	mips_ejtag_t *ejtag_info = ctx-&gt;ejtag_info;
+	struct mips_ejtag *ejtag_info = ctx-&gt;ejtag_info;
 	int offset;
 	uint32_t ejtag_ctrl, data;
 
@@ -168,7 +168,7 @@ static int mips32_pracc_exec_write(mips32_pracc_context *ctx, uint32_t address)
 {
 	uint32_t ejtag_ctrl,data;
 	int offset;
-	mips_ejtag_t *ejtag_info = ctx-&gt;ejtag_info;
+	struct mips_ejtag *ejtag_info = ctx-&gt;ejtag_info;
 
 	mips_ejtag_set_instr(ctx-&gt;ejtag_info, EJTAG_INST_DATA, NULL);
 	mips_ejtag_drscan_32(ctx-&gt;ejtag_info, &amp;data);
@@ -207,7 +207,7 @@ static int mips32_pracc_exec_write(mips32_pracc_context *ctx, uint32_t address)
 	return ERROR_OK;
 }
 
-int mips32_pracc_exec(mips_ejtag_t *ejtag_info, int code_len, uint32_t *code, int num_param_in, uint32_t *param_in, int num_param_out, uint32_t *param_out, int cycle)
+int mips32_pracc_exec(struct mips_ejtag *ejtag_info, int code_len, uint32_t *code, int num_param_in, uint32_t *param_in, int num_param_out, uint32_t *param_out, int cycle)
 {
 	uint32_t ejtag_ctrl;
 	uint32_t address, data;
@@ -269,7 +269,7 @@ int mips32_pracc_exec(mips_ejtag_t *ejtag_info, int code_len, uint32_t *code, in
 	return ERROR_OK;
 }
 
-int mips32_pracc_read_mem(mips_ejtag_t *ejtag_info, uint32_t addr, int size, int count, void *buf)
+int mips32_pracc_read_mem(struct mips_ejtag *ejtag_info, uint32_t addr, int size, int count, void *buf)
 {
 	switch (size)
 	{
@@ -287,7 +287,7 @@ int mips32_pracc_read_mem(mips_ejtag_t *ejtag_info, uint32_t addr, int size, int
 	return ERROR_OK;
 }
 
-int mips32_pracc_read_mem32(mips_ejtag_t *ejtag_info, uint32_t addr, int count, uint32_t *buf)
+int mips32_pracc_read_mem32(struct mips_ejtag *ejtag_info, uint32_t addr, int count, uint32_t *buf)
 {
 	uint32_t code[] = {
 															/* start: */
@@ -361,7 +361,7 @@ int mips32_pracc_read_mem32(mips_ejtag_t *ejtag_info, uint32_t addr, int count,
 	return retval;
 }
 
-int mips32_pracc_read_u32(mips_ejtag_t *ejtag_info, uint32_t addr, uint32_t *buf)
+int mips32_pracc_read_u32(struct mips_ejtag *ejtag_info, uint32_t addr, uint32_t *buf)
 {
 	uint32_t code[] = {
 															/* start: */
@@ -395,7 +395,7 @@ int mips32_pracc_read_u32(mips_ejtag_t *ejtag_info, uint32_t addr, uint32_t *buf
 	return retval;
 }
 
-int mips32_pracc_read_mem16(mips_ejtag_t *ejtag_info, uint32_t addr, int count, uint16_t *buf)
+int mips32_pracc_read_mem16(struct mips_ejtag *ejtag_info, uint32_t addr, int count, uint16_t *buf)
 {
 	uint32_t code[] = {
 															/* start: */
@@ -474,7 +474,7 @@ int mips32_pracc_read_mem16(mips_ejtag_t *ejtag_info, uint32_t addr, int count,
 	return ERROR_OK;
 }
 
-int mips32_pracc_read_mem8(mips_ejtag_t *ejtag_info, uint32_t addr, int count, uint8_t *buf)
+int mips32_pracc_read_mem8(struct mips_ejtag *ejtag_info, uint32_t addr, int count, uint8_t *buf)
 {
 	uint32_t code[] = {
 															/* start: */
@@ -553,7 +553,7 @@ int mips32_pracc_read_mem8(mips_ejtag_t *ejtag_info, uint32_t addr, int count, u
 	return ERROR_OK;
 }
 
-int mips32_pracc_write_mem(mips_ejtag_t *ejtag_info, uint32_t addr, int size, int count, void *buf)
+int mips32_pracc_write_mem(struct mips_ejtag *ejtag_info, uint32_t addr, int size, int count, void *buf)
 {
 	switch (size)
 	{
@@ -571,7 +571,7 @@ int mips32_pracc_write_mem(mips_ejtag_t *ejtag_info, uint32_t addr, int size, in
 	return ERROR_OK;
 }
 
-int mips32_pracc_write_mem32(mips_ejtag_t *ejtag_info, uint32_t addr, int count, uint32_t *buf)
+int mips32_pracc_write_mem32(struct mips_ejtag *ejtag_info, uint32_t addr, int count, uint32_t *buf)
 {
 
 //NC: use destination pointer as loop counter (last address is in $10)
@@ -620,7 +620,7 @@ int mips32_pracc_write_mem32(mips_ejtag_t *ejtag_info, uint32_t addr, int count,
 	return ERROR_OK;
 }
 
-int mips32_pracc_write_u32(mips_ejtag_t *ejtag_info, uint32_t addr, uint32_t *buf)
+int mips32_pracc_write_u32(struct mips_ejtag *ejtag_info, uint32_t addr, uint32_t *buf)
 {
 	uint32_t code[] = {
 															/* start: */
@@ -653,7 +653,7 @@ int mips32_pracc_write_u32(mips_ejtag_t *ejtag_info, uint32_t addr, uint32_t *bu
 	return ERROR_OK;
 }
 
-int mips32_pracc_write_mem16(mips_ejtag_t *ejtag_info, uint32_t addr, int count, uint16_t *buf)
+int mips32_pracc_write_mem16(struct mips_ejtag *ejtag_info, uint32_t addr, int count, uint16_t *buf)
 {
 	uint32_t code[] = {
 															/* start: */
@@ -713,7 +713,7 @@ int mips32_pracc_write_mem16(mips_ejtag_t *ejtag_info, uint32_t addr, int count,
 	return ERROR_OK;
 }
 
-int mips32_pracc_write_mem8(mips_ejtag_t *ejtag_info, uint32_t addr, int count, uint8_t *buf)
+int mips32_pracc_write_mem8(struct mips_ejtag *ejtag_info, uint32_t addr, int count, uint8_t *buf)
 {
 	uint32_t code[] = {
 															/* start: */
@@ -774,7 +774,7 @@ int mips32_pracc_write_mem8(mips_ejtag_t *ejtag_info, uint32_t addr, int count,
 	return retval;
 }
 
-int mips32_pracc_write_regs(mips_ejtag_t *ejtag_info, uint32_t *regs)
+int mips32_pracc_write_regs(struct mips_ejtag *ejtag_info, uint32_t *regs)
 {
 	uint32_t code[] = {
 														/* start: */
@@ -846,7 +846,7 @@ int mips32_pracc_write_regs(mips_ejtag_t *ejtag_info, uint32_t *regs)
 	return retval;
 }
 
-int mips32_pracc_read_regs(mips_ejtag_t *ejtag_info, uint32_t *regs)
+int mips32_pracc_read_regs(struct mips_ejtag *ejtag_info, uint32_t *regs)
 {
 	uint32_t code[] = {
 														/* start: */
diff --git a/src/target/mips32_pracc.h b/src/target/mips32_pracc.h
index 866f6f5..3b124c7 100644
--- a/src/target/mips32_pracc.h
+++ b/src/target/mips32_pracc.h
@@ -37,33 +37,33 @@
 #define NEG16(v) (((~(v)) + 1) &amp; 0xFFFF)
 /*#define NEG18(v) (((~(v)) + 1) &amp; 0x3FFFF)*/
 
-int mips32_pracc_read_mem(mips_ejtag_t *ejtag_info,
+int mips32_pracc_read_mem(struct mips_ejtag *ejtag_info,
 		uint32_t addr, int size, int count, void *buf);
-int mips32_pracc_write_mem(mips_ejtag_t *ejtag_info,
+int mips32_pracc_write_mem(struct mips_ejtag *ejtag_info,
 		uint32_t addr, int size, int count, void *buf);
 
-int mips32_pracc_read_mem8(mips_ejtag_t *ejtag_info,
+int mips32_pracc_read_mem8(struct mips_ejtag *ejtag_info,
 		uint32_t addr, int count, uint8_t *buf);
-int mips32_pracc_read_mem16(mips_ejtag_t *ejtag_info,
+int mips32_pracc_read_mem16(struct mips_ejtag *ejtag_info,
 		uint32_t addr, int count, uint16_t *buf);
-int mips32_pracc_read_mem32(mips_ejtag_t *ejtag_info,
+int mips32_pracc_read_mem32(struct mips_ejtag *ejtag_info,
 		uint32_t addr, int count, uint32_t *buf);
-int mips32_pracc_read_u32(mips_ejtag_t *ejtag_info,
+int mips32_pracc_read_u32(struct mips_ejtag *ejtag_info,
 		uint32_t addr, uint32_t *buf);
 
-int mips32_pracc_write_mem8(mips_ejtag_t *ejtag_info,
+int mips32_pracc_write_mem8(struct mips_ejtag *ejtag_info,
 		uint32_t addr, int count, uint8_t *buf);
-int mips32_pracc_write_mem16(mips_ejtag_t *ejtag_info,
+int mips32_pracc_write_mem16(struct mips_ejtag *ejtag_info,
 		uint32_t addr, int count, uint16_t *buf);
-int mips32_pracc_write_mem32(mips_ejtag_t *ejtag_info,
+int mips32_pracc_write_mem32(struct mips_ejtag *ejtag_info,
 		uint32_t addr, int count, uint32_t *buf);
-int mips32_pracc_write_u32(mips_ejtag_t *ejtag_info,
+int mips32_pracc_write_u32(struct mips_ejtag *ejtag_info,
 		uint32_t addr, uint32_t *buf);
 
-int mips32_pracc_read_regs(mips_ejtag_t *ejtag_info, uint32_t *regs);
-int mips32_pracc_write_regs(mips_ejtag_t *ejtag_info, uint32_t *regs);
+int mips32_pracc_read_regs(struct mips_ejtag *ejtag_info, uint32_t *regs);
+int mips32_pracc_write_regs(struct mips_ejtag *ejtag_info, uint32_t *regs);
 
-int mips32_pracc_exec(mips_ejtag_t *ejtag_info, int code_len, uint32_t *code,
+int mips32_pracc_exec(struct mips_ejtag *ejtag_info, int code_len, uint32_t *code,
 		int num_param_in, uint32_t *param_in,
 		int num_param_out, uint32_t *param_out, int cycle);
 
diff --git a/src/target/mips_ejtag.c b/src/target/mips_ejtag.c
index d23411f..6f06d9a 100644
--- a/src/target/mips_ejtag.c
+++ b/src/target/mips_ejtag.c
@@ -27,7 +27,7 @@
 #include &quot;mips_ejtag.h&quot;
 
 
-int mips_ejtag_set_instr(mips_ejtag_t *ejtag_info, int new_instr, void *delete_me_and_submit_patch)
+int mips_ejtag_set_instr(struct mips_ejtag *ejtag_info, int new_instr, void *delete_me_and_submit_patch)
 {
 	struct jtag_tap *tap;
 
@@ -52,7 +52,7 @@ int mips_ejtag_set_instr(mips_ejtag_t *ejtag_info, int new_instr, void *delete_m
 	return ERROR_OK;
 }
 
-int mips_ejtag_get_idcode(mips_ejtag_t *ejtag_info, uint32_t *idcode)
+int mips_ejtag_get_idcode(struct mips_ejtag *ejtag_info, uint32_t *idcode)
 {
 	struct scan_field field;
 
@@ -75,7 +75,7 @@ int mips_ejtag_get_idcode(mips_ejtag_t *ejtag_info, uint32_t *idcode)
 	return ERROR_OK;
 }
 
-int mips_ejtag_get_impcode(mips_ejtag_t *ejtag_info, uint32_t *impcode)
+int mips_ejtag_get_impcode(struct mips_ejtag *ejtag_info, uint32_t *impcode)
 {
 	struct scan_field field;
 
@@ -98,7 +98,7 @@ int mips_ejtag_get_impcode(mips_ejtag_t *ejtag_info, uint32_t *impcode)
 	return ERROR_OK;
 }
 
-int mips_ejtag_drscan_32(mips_ejtag_t *ejtag_info, uint32_t *data)
+int mips_ejtag_drscan_32(struct mips_ejtag *ejtag_info, uint32_t *data)
 {
 	struct jtag_tap *tap;
 	tap  = ejtag_info-&gt;tap;
@@ -130,7 +130,7 @@ int mips_ejtag_drscan_32(mips_ejtag_t *ejtag_info, uint32_t *data)
 	return ERROR_OK;
 }
 
-int mips_ejtag_step_enable(mips_ejtag_t *ejtag_info)
+int mips_ejtag_step_enable(struct mips_ejtag *ejtag_info)
 {
 	uint32_t code[] = {
 			MIPS32_MTC0(1,31,0),			/* move $1 to COP0 DeSave */
@@ -148,7 +148,7 @@ int mips_ejtag_step_enable(mips_ejtag_t *ejtag_info)
 
 	return ERROR_OK;
 }
-int mips_ejtag_step_disable(mips_ejtag_t *ejtag_info)
+int mips_ejtag_step_disable(struct mips_ejtag *ejtag_info)
 {
 	uint32_t code[] = {
 			MIPS32_MTC0(15,31,0),							/* move $15 to COP0 DeSave */
@@ -175,14 +175,14 @@ int mips_ejtag_step_disable(mips_ejtag_t *ejtag_info)
 	return ERROR_OK;
 }
 
-int mips_ejtag_config_step(mips_ejtag_t *ejtag_info, int enable_step)
+int mips_ejtag_config_step(struct mips_ejtag *ejtag_info, int enable_step)
 {
 	if (enable_step)
 		return mips_ejtag_step_enable(ejtag_info);
 	return mips_ejtag_step_disable(ejtag_info);
 }
 
-int mips_ejtag_enter_debug(mips_ejtag_t *ejtag_info)
+int mips_ejtag_enter_debug(struct mips_ejtag *ejtag_info)
 {
 	uint32_t ejtag_ctrl;
 	jtag_set_end_state(TAP_IDLE);
@@ -202,7 +202,7 @@ int mips_ejtag_enter_debug(mips_ejtag_t *ejtag_info)
 	return ERROR_OK;
 }
 
-int mips_ejtag_exit_debug(mips_ejtag_t *ejtag_info)
+int mips_ejtag_exit_debug(struct mips_ejtag *ejtag_info)
 {
 	uint32_t inst;
 	inst = MIPS32_DRET;
@@ -213,7 +213,7 @@ int mips_ejtag_exit_debug(mips_ejtag_t *ejtag_info)
 	return ERROR_OK;
 }
 
-int mips_ejtag_read_debug(mips_ejtag_t *ejtag_info, uint32_t* debug_reg)
+int mips_ejtag_read_debug(struct mips_ejtag *ejtag_info, uint32_t* debug_reg)
 {
 	/* read ejtag ECR */
 	uint32_t code[] = {
@@ -240,7 +240,7 @@ int mips_ejtag_read_debug(mips_ejtag_t *ejtag_info, uint32_t* debug_reg)
 	return ERROR_OK;
 }
 
-int mips_ejtag_init(mips_ejtag_t *ejtag_info)
+int mips_ejtag_init(struct mips_ejtag *ejtag_info)
 {
 	uint32_t ejtag_version;
 
diff --git a/src/target/mips_ejtag.h b/src/target/mips_ejtag.h
index 74cb21d..6a653d4 100644
--- a/src/target/mips_ejtag.h
+++ b/src/target/mips_ejtag.h
@@ -102,25 +102,25 @@
 #define		EJTAG_DBCn_BLM_SHIFT		4
 #define		EJTAG_DBCn_BE				(1 &lt;&lt; 0)
 
-typedef struct mips_ejtag_s
+struct mips_ejtag
 {
 	struct jtag_tap *tap;
 	uint32_t impcode;
 	uint32_t idcode;
 	/*int use_dma;*/
 	uint32_t ejtag_ctrl;
-} mips_ejtag_t;
+};
 
-int mips_ejtag_set_instr(mips_ejtag_t *ejtag_info,
+int mips_ejtag_set_instr(struct mips_ejtag *ejtag_info,
 		int new_instr, void *delete_me_and_submit_patch);
-int mips_ejtag_enter_debug(mips_ejtag_t *ejtag_info);
-int mips_ejtag_exit_debug(mips_ejtag_t *ejtag_info);
-int mips_ejtag_get_impcode(mips_ejtag_t *ejtag_info, uint32_t *impcode);
-int mips_ejtag_get_idcode(mips_ejtag_t *ejtag_info, uint32_t *idcode);
-int mips_ejtag_drscan_32(mips_ejtag_t *ejtag_info, uint32_t *data);
+int mips_ejtag_enter_debug(struct mips_ejtag *ejtag_info);
+int mips_ejtag_exit_debug(struct mips_ejtag *ejtag_info);
+int mips_ejtag_get_impcode(struct mips_ejtag *ejtag_info, uint32_t *impcode);
+int mips_ejtag_get_idcode(struct mips_ejtag *ejtag_info, uint32_t *idcode);
+int mips_ejtag_drscan_32(struct mips_ejtag *ejtag_info, uint32_t *data);
 
-int mips_ejtag_init(mips_ejtag_t *ejtag_info);
-int mips_ejtag_config_step(mips_ejtag_t *ejtag_info, int enable_step);
-int mips_ejtag_read_debug(mips_ejtag_t *ejtag_info, uint32_t* debug_reg);
+int mips_ejtag_init(struct mips_ejtag *ejtag_info);
+int mips_ejtag_config_step(struct mips_ejtag *ejtag_info, int enable_step);
+int mips_ejtag_read_debug(struct mips_ejtag *ejtag_info, uint32_t* debug_reg);
 
 #endif /* MIPS_EJTAG */
diff --git a/src/target/mips_m4k.c b/src/target/mips_m4k.c
index fa40574..580c060 100644
--- a/src/target/mips_m4k.c
+++ b/src/target/mips_m4k.c
@@ -123,7 +123,7 @@ int mips_m4k_examine_debug_reason(target_t *target)
 int mips_m4k_debug_entry(target_t *target)
 {
 	struct mips32_common *mips32 = target-&gt;arch_info;
-	mips_ejtag_t *ejtag_info = &amp;mips32-&gt;ejtag_info;
+	struct mips_ejtag *ejtag_info = &amp;mips32-&gt;ejtag_info;
 	uint32_t debug_reg;
 
 	/* read debug register */
@@ -155,7 +155,7 @@ int mips_m4k_poll(target_t *target)
 {
 	int retval;
 	struct mips32_common *mips32 = target-&gt;arch_info;
-	mips_ejtag_t *ejtag_info = &amp;mips32-&gt;ejtag_info;
+	struct mips_ejtag *ejtag_info = &amp;mips32-&gt;ejtag_info;
 	uint32_t ejtag_ctrl = ejtag_info-&gt;ejtag_ctrl;
 
 	/* read ejtag control reg */
@@ -215,7 +215,7 @@ int mips_m4k_poll(target_t *target)
 int mips_m4k_halt(struct target_s *target)
 {
 	struct mips32_common *mips32 = target-&gt;arch_info;
-	mips_ejtag_t *ejtag_info = &amp;mips32-&gt;ejtag_info;
+	struct mips_ejtag *ejtag_info = &amp;mips32-&gt;ejtag_info;
 
 	LOG_DEBUG(&quot;target-&gt;state: %s&quot;,
 		  target_state_name(target));
@@ -260,7 +260,7 @@ int mips_m4k_halt(struct target_s *target)
 int mips_m4k_assert_reset(target_t *target)
 {
 	struct mips32_common *mips32 = target-&gt;arch_info;
-	mips_ejtag_t *ejtag_info = &amp;mips32-&gt;ejtag_info;
+	struct mips_ejtag *ejtag_info = &amp;mips32-&gt;ejtag_info;
 
 	LOG_DEBUG(&quot;target-&gt;state: %s&quot;,
 		target_state_name(target));
@@ -339,7 +339,7 @@ int mips_m4k_soft_reset_halt(struct target_s *target)
 int mips_m4k_single_step_core(target_t *target)
 {
 	struct mips32_common *mips32 = target-&gt;arch_info;
-	mips_ejtag_t *ejtag_info = &amp;mips32-&gt;ejtag_info;
+	struct mips_ejtag *ejtag_info = &amp;mips32-&gt;ejtag_info;
 
 	/* configure single step mode */
 	mips_ejtag_config_step(ejtag_info, 1);
@@ -358,7 +358,7 @@ int mips_m4k_single_step_core(target_t *target)
 int mips_m4k_resume(struct target_s *target, int current, uint32_t address, int handle_breakpoints, int debug_execution)
 {
 	struct mips32_common *mips32 = target-&gt;arch_info;
-	mips_ejtag_t *ejtag_info = &amp;mips32-&gt;ejtag_info;
+	struct mips_ejtag *ejtag_info = &amp;mips32-&gt;ejtag_info;
 	breakpoint_t *breakpoint = NULL;
 	uint32_t resume_pc;
 
@@ -430,7 +430,7 @@ int mips_m4k_step(struct target_s *target, int current, uint32_t address, int ha
 {
 	/* get pointers to arch-specific information */
 	struct mips32_common *mips32 = target-&gt;arch_info;
-	mips_ejtag_t *ejtag_info = &amp;mips32-&gt;ejtag_info;
+	struct mips_ejtag *ejtag_info = &amp;mips32-&gt;ejtag_info;
 	breakpoint_t *breakpoint = NULL;
 
 	if (target-&gt;state != TARGET_HALTED)
@@ -846,7 +846,7 @@ void mips_m4k_enable_watchpoints(struct target_s *target)
 int mips_m4k_read_memory(struct target_s *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	struct mips32_common *mips32 = target-&gt;arch_info;
-	mips_ejtag_t *ejtag_info = &amp;mips32-&gt;ejtag_info;
+	struct mips_ejtag *ejtag_info = &amp;mips32-&gt;ejtag_info;
 
 	LOG_DEBUG(&quot;address: 0x%8.8&quot; PRIx32 &quot;, size: 0x%8.8&quot; PRIx32 &quot;, count: 0x%8.8&quot; PRIx32 &quot;&quot;, address, size, count);
 
@@ -878,7 +878,7 @@ int mips_m4k_read_memory(struct target_s *target, uint32_t address, uint32_t siz
 int mips_m4k_write_memory(struct target_s *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	struct mips32_common *mips32 = target-&gt;arch_info;
-	mips_ejtag_t *ejtag_info = &amp;mips32-&gt;ejtag_info;
+	struct mips_ejtag *ejtag_info = &amp;mips32-&gt;ejtag_info;
 
 	LOG_DEBUG(&quot;address: 0x%8.8&quot; PRIx32 &quot;, size: 0x%8.8&quot; PRIx32 &quot;, count: 0x%8.8&quot; PRIx32 &quot;&quot;, address, size, count);
 
@@ -943,7 +943,7 @@ int mips_m4k_examine(struct target_s *target)
 {
 	int retval;
 	struct mips32_common *mips32 = target-&gt;arch_info;
-	mips_ejtag_t *ejtag_info = &amp;mips32-&gt;ejtag_info;
+	struct mips_ejtag *ejtag_info = &amp;mips32-&gt;ejtag_info;
 	uint32_t idcode = 0;
 
 	if (!target_was_examined(target))

commit ccde06a08fbf9c4f57b321dbec0509f73239c2de
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:43:33 2009 -0800

    mips32_core_reg_t -&gt; struct mips32_core_reg
    
    Remove misleading typedef and redundant suffix from struct mips32_core_reg.

diff --git a/src/target/mips32.c b/src/target/mips32.c
index 6cec7f0..1804665 100644
--- a/src/target/mips32.c
+++ b/src/target/mips32.c
@@ -38,7 +38,7 @@ char* mips32_core_reg_list[] =
 	&quot;status&quot;, &quot;lo&quot;, &quot;hi&quot;, &quot;badvaddr&quot;, &quot;cause&quot;, &quot;pc&quot;
 };
 
-mips32_core_reg_t mips32_core_reg_list_arch_info[MIPS32NUMCOREREGS] =
+struct mips32_core_reg mips32_core_reg_list_arch_info[MIPS32NUMCOREREGS] =
 {
 	{0, NULL, NULL},
 	{1, NULL, NULL},
@@ -98,7 +98,7 @@ int mips32_core_reg_arch_type = -1;
 int mips32_get_core_reg(reg_t *reg)
 {
 	int retval;
-	mips32_core_reg_t *mips32_reg = reg-&gt;arch_info;
+	struct mips32_core_reg *mips32_reg = reg-&gt;arch_info;
 	target_t *target = mips32_reg-&gt;target;
 	struct mips32_common *mips32_target = target-&gt;arch_info;
 
@@ -114,7 +114,7 @@ int mips32_get_core_reg(reg_t *reg)
 
 int mips32_set_core_reg(reg_t *reg, uint8_t *buf)
 {
-	mips32_core_reg_t *mips32_reg = reg-&gt;arch_info;
+	struct mips32_core_reg *mips32_reg = reg-&gt;arch_info;
 	target_t *target = mips32_reg-&gt;target;
 	uint32_t value = buf_get_u32(buf, 0, 32);
 
@@ -133,7 +133,7 @@ int mips32_set_core_reg(reg_t *reg, uint8_t *buf)
 int mips32_read_core_reg(struct target_s *target, int num)
 {
 	uint32_t reg_value;
-	mips32_core_reg_t *mips_core_reg;
+	struct mips32_core_reg *mips_core_reg;
 
 	/* get pointers to arch-specific information */
 	struct mips32_common *mips32 = target-&gt;arch_info;
@@ -153,7 +153,7 @@ int mips32_read_core_reg(struct target_s *target, int num)
 int mips32_write_core_reg(struct target_s *target, int num)
 {
 	uint32_t reg_value;
-	mips32_core_reg_t *mips_core_reg;
+	struct mips32_core_reg *mips_core_reg;
 
 	/* get pointers to arch-specific information */
 	struct mips32_common *mips32 = target-&gt;arch_info;
@@ -280,7 +280,7 @@ reg_cache_t *mips32_build_reg_cache(target_t *target)
 	reg_cache_t **cache_p = register_get_last_cache_p(&amp;target-&gt;reg_cache);
 	reg_cache_t *cache = malloc(sizeof(reg_cache_t));
 	reg_t *reg_list = malloc(sizeof(reg_t) * num_regs);
-	mips32_core_reg_t *arch_info = malloc(sizeof(mips32_core_reg_t) * num_regs);
+	struct mips32_core_reg *arch_info = malloc(sizeof(struct mips32_core_reg) * num_regs);
 	int i;
 
 	if (mips32_core_reg_arch_type == -1)
diff --git a/src/target/mips32.h b/src/target/mips32.h
index 870ff48..9fdb605 100644
--- a/src/target/mips32.h
+++ b/src/target/mips32.h
@@ -66,12 +66,12 @@ struct mips32_common
 	int (*write_core_reg)(struct target_s *target, int num);
 };
 
-typedef struct mips32_core_reg_s
+struct mips32_core_reg
 {
 	uint32_t num;
 	struct target_s *target;
 	struct mips32_common *mips32_common;
-} mips32_core_reg_t;
+};
 
 #define MIPS32_OP_BEQ	0x04
 #define MIPS32_OP_BNE	0x05

commit 3b7aee21b50f4bd0014878f29129ac33812faea3
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:43:30 2009 -0800

    mips32_common_t -&gt; struct mips32_common
    
    Remove misleading typedef and redundant suffix from struct mips32_common.

diff --git a/src/flash/pic32mx.c b/src/flash/pic32mx.c
index 01252bb..97111f2 100644
--- a/src/flash/pic32mx.c
+++ b/src/flash/pic32mx.c
@@ -543,7 +543,7 @@ static int pic32mx_probe(struct flash_bank_s *bank)
 {
 	target_t *target = bank-&gt;target;
 	struct pic32mx_flash_bank *pic32mx_info = bank-&gt;driver_priv;
-	mips32_common_t *mips32 = target-&gt;arch_info;
+	struct mips32_common *mips32 = target-&gt;arch_info;
 	mips_ejtag_t *ejtag_info = &amp;mips32-&gt;ejtag_info;
 	int i;
 	uint16_t num_pages = 0;
@@ -640,7 +640,7 @@ COMMAND_HANDLER(pic32mx_handle_part_id_command)
 static int pic32mx_info(struct flash_bank_s *bank, char *buf, int buf_size)
 {
 	target_t *target = bank-&gt;target;
-	mips32_common_t *mips32 = target-&gt;arch_info;
+	struct mips32_common *mips32 = target-&gt;arch_info;
 	mips_ejtag_t *ejtag_info = &amp;mips32-&gt;ejtag_info;
 	uint32_t device_id;
 	int printed = 0, i;
diff --git a/src/target/mips32.c b/src/target/mips32.c
index c8e47aa..6cec7f0 100644
--- a/src/target/mips32.c
+++ b/src/target/mips32.c
@@ -100,7 +100,7 @@ int mips32_get_core_reg(reg_t *reg)
 	int retval;
 	mips32_core_reg_t *mips32_reg = reg-&gt;arch_info;
 	target_t *target = mips32_reg-&gt;target;
-	mips32_common_t *mips32_target = target-&gt;arch_info;
+	struct mips32_common *mips32_target = target-&gt;arch_info;
 
 	if (target-&gt;state != TARGET_HALTED)
 	{
@@ -136,7 +136,7 @@ int mips32_read_core_reg(struct target_s *target, int num)
 	mips32_core_reg_t *mips_core_reg;
 
 	/* get pointers to arch-specific information */
-	mips32_common_t *mips32 = target-&gt;arch_info;
+	struct mips32_common *mips32 = target-&gt;arch_info;
 
 	if ((num &lt; 0) || (num &gt;= MIPS32NUMCOREREGS))
 		return ERROR_INVALID_ARGUMENTS;
@@ -156,7 +156,7 @@ int mips32_write_core_reg(struct target_s *target, int num)
 	mips32_core_reg_t *mips_core_reg;
 
 	/* get pointers to arch-specific information */
-	mips32_common_t *mips32 = target-&gt;arch_info;
+	struct mips32_common *mips32 = target-&gt;arch_info;
 
 	if ((num &lt; 0) || (num &gt;= MIPS32NUMCOREREGS))
 		return ERROR_INVALID_ARGUMENTS;
@@ -174,7 +174,7 @@ int mips32_write_core_reg(struct target_s *target, int num)
 int mips32_invalidate_core_regs(target_t *target)
 {
 	/* get pointers to arch-specific information */
-	mips32_common_t *mips32 = target-&gt;arch_info;
+	struct mips32_common *mips32 = target-&gt;arch_info;
 	int i;
 
 	for (i = 0; i &lt; mips32-&gt;core_cache-&gt;num_regs; i++)
@@ -189,7 +189,7 @@ int mips32_invalidate_core_regs(target_t *target)
 int mips32_get_gdb_reg_list(target_t *target, reg_t **reg_list[], int *reg_list_size)
 {
 	/* get pointers to arch-specific information */
-	mips32_common_t *mips32 = target-&gt;arch_info;
+	struct mips32_common *mips32 = target-&gt;arch_info;
 	int i;
 
 	/* include floating point registers */
@@ -215,7 +215,7 @@ int mips32_save_context(target_t *target)
 	int i;
 
 	/* get pointers to arch-specific information */
-	mips32_common_t *mips32 = target-&gt;arch_info;
+	struct mips32_common *mips32 = target-&gt;arch_info;
 	mips_ejtag_t *ejtag_info = &amp;mips32-&gt;ejtag_info;
 
 	/* read core registers */
@@ -237,7 +237,7 @@ int mips32_restore_context(target_t *target)
 	int i;
 
 	/* get pointers to arch-specific information */
-	mips32_common_t *mips32 = target-&gt;arch_info;
+	struct mips32_common *mips32 = target-&gt;arch_info;
 	mips_ejtag_t *ejtag_info = &amp;mips32-&gt;ejtag_info;
 
 	for (i = 0; i &lt; MIPS32NUMCOREREGS; i++)
@@ -256,7 +256,7 @@ int mips32_restore_context(target_t *target)
 
 int mips32_arch_state(struct target_s *target)
 {
-	mips32_common_t *mips32 = target-&gt;arch_info;
+	struct mips32_common *mips32 = target-&gt;arch_info;
 
 	if (mips32-&gt;common_magic != MIPS32_COMMON_MAGIC)
 	{
@@ -274,7 +274,7 @@ int mips32_arch_state(struct target_s *target)
 reg_cache_t *mips32_build_reg_cache(target_t *target)
 {
 	/* get pointers to arch-specific information */
-	mips32_common_t *mips32 = target-&gt;arch_info;
+	struct mips32_common *mips32 = target-&gt;arch_info;
 
 	int num_regs = MIPS32NUMCOREREGS;
 	reg_cache_t **cache_p = register_get_last_cache_p(&amp;target-&gt;reg_cache);
@@ -315,7 +315,7 @@ reg_cache_t *mips32_build_reg_cache(target_t *target)
 	return cache;
 }
 
-int mips32_init_arch_info(target_t *target, mips32_common_t *mips32, struct jtag_tap *tap)
+int mips32_init_arch_info(target_t *target, struct mips32_common *mips32, struct jtag_tap *tap)
 {
 	target-&gt;arch_info = mips32;
 	mips32-&gt;common_magic = MIPS32_COMMON_MAGIC;
@@ -344,7 +344,7 @@ int mips32_run_algorithm(struct target_s *target, int num_mem_params, struct mem
 
 int mips32_examine(struct target_s *target)
 {
-	mips32_common_t *mips32 = target-&gt;arch_info;
+	struct mips32_common *mips32 = target-&gt;arch_info;
 
 	if (!target_was_examined(target))
 	{
@@ -364,7 +364,7 @@ int mips32_examine(struct target_s *target)
 int mips32_configure_break_unit(struct target_s *target)
 {
 	/* get pointers to arch-specific information */
-	mips32_common_t *mips32 = target-&gt;arch_info;
+	struct mips32_common *mips32 = target-&gt;arch_info;
 	int retval;
 	uint32_t dcr, bpinfo;
 	int i;
diff --git a/src/target/mips32.h b/src/target/mips32.h
index 5398ddf..870ff48 100644
--- a/src/target/mips32.h
+++ b/src/target/mips32.h
@@ -45,7 +45,7 @@ struct mips32_comparator
 	uint32_t reg_address;
 };
 
-typedef struct mips32_common_s
+struct mips32_common
 {
 	uint32_t common_magic;
 	void *arch_info;
@@ -64,13 +64,13 @@ typedef struct mips32_common_s
 	/* register cache to processor synchronization */
 	int (*read_core_reg)(struct target_s *target, int num);
 	int (*write_core_reg)(struct target_s *target, int num);
-} mips32_common_t;
+};
 
 typedef struct mips32_core_reg_s
 {
 	uint32_t num;
 	struct target_s *target;
-	mips32_common_t *mips32_common;
+	struct mips32_common *mips32_common;
 } mips32_core_reg_t;
 
 #define MIPS32_OP_BEQ	0x04
@@ -127,7 +127,7 @@ typedef struct mips32_core_reg_s
 int mips32_arch_state(struct target_s *target);
 
 int mips32_init_arch_info(target_t *target,
-		mips32_common_t *mips32, struct jtag_tap *tap);
+		struct mips32_common *mips32, struct jtag_tap *tap);
 
 int mips32_restore_context(target_t *target);
 int mips32_save_context(target_t *target);
diff --git a/src/target/mips_m4k.c b/src/target/mips_m4k.c
index df9ec41..fa40574 100644
--- a/src/target/mips_m4k.c
+++ b/src/target/mips_m4k.c
@@ -122,7 +122,7 @@ int mips_m4k_examine_debug_reason(target_t *target)
 
 int mips_m4k_debug_entry(target_t *target)
 {
-	mips32_common_t *mips32 = target-&gt;arch_info;
+	struct mips32_common *mips32 = target-&gt;arch_info;
 	mips_ejtag_t *ejtag_info = &amp;mips32-&gt;ejtag_info;
 	uint32_t debug_reg;
 
@@ -154,7 +154,7 @@ int mips_m4k_debug_entry(target_t *target)
 int mips_m4k_poll(target_t *target)
 {
 	int retval;
-	mips32_common_t *mips32 = target-&gt;arch_info;
+	struct mips32_common *mips32 = target-&gt;arch_info;
 	mips_ejtag_t *ejtag_info = &amp;mips32-&gt;ejtag_info;
 	uint32_t ejtag_ctrl = ejtag_info-&gt;ejtag_ctrl;
 
@@ -214,7 +214,7 @@ int mips_m4k_poll(target_t *target)
 
 int mips_m4k_halt(struct target_s *target)
 {
-	mips32_common_t *mips32 = target-&gt;arch_info;
+	struct mips32_common *mips32 = target-&gt;arch_info;
 	mips_ejtag_t *ejtag_info = &amp;mips32-&gt;ejtag_info;
 
 	LOG_DEBUG(&quot;target-&gt;state: %s&quot;,
@@ -259,7 +259,7 @@ int mips_m4k_halt(struct target_s *target)
 
 int mips_m4k_assert_reset(target_t *target)
 {
-	mips32_common_t *mips32 = target-&gt;arch_info;
+	struct mips32_common *mips32 = target-&gt;arch_info;
 	mips_ejtag_t *ejtag_info = &amp;mips32-&gt;ejtag_info;
 
 	LOG_DEBUG(&quot;target-&gt;state: %s&quot;,
@@ -338,7 +338,7 @@ int mips_m4k_soft_reset_halt(struct target_s *target)
 
 int mips_m4k_single_step_core(target_t *target)
 {
-	mips32_common_t *mips32 = target-&gt;arch_info;
+	struct mips32_common *mips32 = target-&gt;arch_info;
 	mips_ejtag_t *ejtag_info = &amp;mips32-&gt;ejtag_info;
 
 	/* configure single step mode */
@@ -357,7 +357,7 @@ int mips_m4k_single_step_core(target_t *target)
 
 int mips_m4k_resume(struct target_s *target, int current, uint32_t address, int handle_breakpoints, int debug_execution)
 {
-	mips32_common_t *mips32 = target-&gt;arch_info;
+	struct mips32_common *mips32 = target-&gt;arch_info;
 	mips_ejtag_t *ejtag_info = &amp;mips32-&gt;ejtag_info;
 	breakpoint_t *breakpoint = NULL;
 	uint32_t resume_pc;
@@ -429,7 +429,7 @@ int mips_m4k_resume(struct target_s *target, int current, uint32_t address, int
 int mips_m4k_step(struct target_s *target, int current, uint32_t address, int handle_breakpoints)
 {
 	/* get pointers to arch-specific information */
-	mips32_common_t *mips32 = target-&gt;arch_info;
+	struct mips32_common *mips32 = target-&gt;arch_info;
 	mips_ejtag_t *ejtag_info = &amp;mips32-&gt;ejtag_info;
 	breakpoint_t *breakpoint = NULL;
 
@@ -493,7 +493,7 @@ void mips_m4k_enable_breakpoints(struct target_s *target)
 
 int mips_m4k_set_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
 {
-	mips32_common_t *mips32 = target-&gt;arch_info;
+	struct mips32_common *mips32 = target-&gt;arch_info;
 	struct mips32_comparator * comparator_list = mips32-&gt;inst_break_list;
 	int retval;
 
@@ -585,7 +585,7 @@ int mips_m4k_set_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
 int mips_m4k_unset_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
 {
 	/* get pointers to arch-specific information */
-	mips32_common_t *mips32 = target-&gt;arch_info;
+	struct mips32_common *mips32 = target-&gt;arch_info;
 	struct mips32_comparator * comparator_list = mips32-&gt;inst_break_list;
 	int retval;
 
@@ -659,7 +659,7 @@ int mips_m4k_unset_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
 
 int mips_m4k_add_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
 {
-	mips32_common_t *mips32 = target-&gt;arch_info;
+	struct mips32_common *mips32 = target-&gt;arch_info;
 
 	if (breakpoint-&gt;type == BKPT_HARD)
 	{
@@ -680,7 +680,7 @@ int mips_m4k_add_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
 int mips_m4k_remove_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
 {
 	/* get pointers to arch-specific information */
-	mips32_common_t *mips32 = target-&gt;arch_info;
+	struct mips32_common *mips32 = target-&gt;arch_info;
 
 	if (target-&gt;state != TARGET_HALTED)
 	{
@@ -701,7 +701,7 @@ int mips_m4k_remove_breakpoint(struct target_s *target, breakpoint_t *breakpoint
 
 int mips_m4k_set_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
 {
-	mips32_common_t *mips32 = target-&gt;arch_info;
+	struct mips32_common *mips32 = target-&gt;arch_info;
 	struct mips32_comparator * comparator_list = mips32-&gt;data_break_list;
 	int wp_num = 0;
 	/*
@@ -770,7 +770,7 @@ int mips_m4k_set_watchpoint(struct target_s *target, struct watchpoint *watchpoi
 int mips_m4k_unset_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
 {
 	/* get pointers to arch-specific information */
-	mips32_common_t *mips32 = target-&gt;arch_info;
+	struct mips32_common *mips32 = target-&gt;arch_info;
 	struct mips32_comparator * comparator_list = mips32-&gt;data_break_list;
 
 	if (!watchpoint-&gt;set)
@@ -795,7 +795,7 @@ int mips_m4k_unset_watchpoint(struct target_s *target, struct watchpoint *watchp
 
 int mips_m4k_add_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
 {
-	mips32_common_t *mips32 = target-&gt;arch_info;
+	struct mips32_common *mips32 = target-&gt;arch_info;
 
 	if (mips32-&gt;num_data_bpoints_avail &lt; 1)
 	{
@@ -812,7 +812,7 @@ int mips_m4k_add_watchpoint(struct target_s *target, struct watchpoint *watchpoi
 int mips_m4k_remove_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
 {
 	/* get pointers to arch-specific information */
-	mips32_common_t *mips32 = target-&gt;arch_info;
+	struct mips32_common *mips32 = target-&gt;arch_info;
 
 	if (target-&gt;state != TARGET_HALTED)
 	{
@@ -845,7 +845,7 @@ void mips_m4k_enable_watchpoints(struct target_s *target)
 
 int mips_m4k_read_memory(struct target_s *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
 {
-	mips32_common_t *mips32 = target-&gt;arch_info;
+	struct mips32_common *mips32 = target-&gt;arch_info;
 	mips_ejtag_t *ejtag_info = &amp;mips32-&gt;ejtag_info;
 
 	LOG_DEBUG(&quot;address: 0x%8.8&quot; PRIx32 &quot;, size: 0x%8.8&quot; PRIx32 &quot;, count: 0x%8.8&quot; PRIx32 &quot;&quot;, address, size, count);
@@ -877,7 +877,7 @@ int mips_m4k_read_memory(struct target_s *target, uint32_t address, uint32_t siz
 
 int mips_m4k_write_memory(struct target_s *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
 {
-	mips32_common_t *mips32 = target-&gt;arch_info;
+	struct mips32_common *mips32 = target-&gt;arch_info;
 	mips_ejtag_t *ejtag_info = &amp;mips32-&gt;ejtag_info;
 
 	LOG_DEBUG(&quot;address: 0x%8.8&quot; PRIx32 &quot;, size: 0x%8.8&quot; PRIx32 &quot;, count: 0x%8.8&quot; PRIx32 &quot;&quot;, address, size, count);
@@ -919,7 +919,7 @@ int mips_m4k_init_target(struct command_context_s *cmd_ctx, struct target_s *tar
 
 int mips_m4k_init_arch_info(target_t *target, mips_m4k_common_t *mips_m4k, struct jtag_tap *tap)
 {
-	mips32_common_t *mips32 = &amp;mips_m4k-&gt;mips32_common;
+	struct mips32_common *mips32 = &amp;mips_m4k-&gt;mips32_common;
 
 	mips_m4k-&gt;common_magic = MIPSM4K_COMMON_MAGIC;
 
@@ -942,7 +942,7 @@ int mips_m4k_target_create(struct target_s *target, Jim_Interp *interp)
 int mips_m4k_examine(struct target_s *target)
 {
 	int retval;
-	mips32_common_t *mips32 = target-&gt;arch_info;
+	struct mips32_common *mips32 = target-&gt;arch_info;
 	mips_ejtag_t *ejtag_info = &amp;mips32-&gt;ejtag_info;
 	uint32_t idcode = 0;
 
diff --git a/src/target/mips_m4k.h b/src/target/mips_m4k.h
index 3eddc3f..89c0a16 100644
--- a/src/target/mips_m4k.h
+++ b/src/target/mips_m4k.h
@@ -32,7 +32,7 @@ struct target_s;
 typedef struct mips_m4k_common_s
 {
 	int common_magic;
-	mips32_common_t mips32_common;
+	struct mips32_common mips32_common;
 } mips_m4k_common_t;
 
 int mips_m4k_bulk_write_memory(struct target_s *target,

commit 1bd7a78d92e06fcd403c915f0e9d3ecdbcc8305d
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:43:26 2009 -0800

    mips32_comparator_t -&gt; struct mips32_comparator
    
    Remove misleading typedef and redundant suffix from struct mips32_comparator.

diff --git a/src/target/mips32.c b/src/target/mips32.c
index 055d278..c8e47aa 100644
--- a/src/target/mips32.c
+++ b/src/target/mips32.c
@@ -384,7 +384,7 @@ int mips32_configure_break_unit(struct target_s *target)
 
 		mips32-&gt;num_inst_bpoints = (bpinfo &gt;&gt; 24) &amp; 0x0F;
 		mips32-&gt;num_inst_bpoints_avail = mips32-&gt;num_inst_bpoints;
-		mips32-&gt;inst_break_list = calloc(mips32-&gt;num_inst_bpoints, sizeof(mips32_comparator_t));
+		mips32-&gt;inst_break_list = calloc(mips32-&gt;num_inst_bpoints, sizeof(struct mips32_comparator));
 		for (i = 0; i &lt; mips32-&gt;num_inst_bpoints; i++)
 		{
 			mips32-&gt;inst_break_list[i].reg_address = EJTAG_IBA1 + (0x100 * i);
@@ -403,7 +403,7 @@ int mips32_configure_break_unit(struct target_s *target)
 
 		mips32-&gt;num_data_bpoints = (bpinfo &gt;&gt; 24) &amp; 0x0F;
 		mips32-&gt;num_data_bpoints_avail = mips32-&gt;num_data_bpoints;
-		mips32-&gt;data_break_list = calloc(mips32-&gt;num_data_bpoints, sizeof(mips32_comparator_t));
+		mips32-&gt;data_break_list = calloc(mips32-&gt;num_data_bpoints, sizeof(struct mips32_comparator));
 		for (i = 0; i &lt; mips32-&gt;num_data_bpoints; i++)
 		{
 			mips32-&gt;data_break_list[i].reg_address = EJTAG_DBA1 + (0x100 * i);
diff --git a/src/target/mips32.h b/src/target/mips32.h
index 476b768..5398ddf 100644
--- a/src/target/mips32.h
+++ b/src/target/mips32.h
@@ -37,13 +37,13 @@ enum
 	MIPS32NUMCOREREGS
 };
 
-typedef struct mips32_comparator_s
+struct mips32_comparator
 {
 	int used;
 	//int type;
 	uint32_t bp_value;
 	uint32_t reg_address;
-} mips32_comparator_t;
+};
 
 typedef struct mips32_common_s
 {
@@ -58,8 +58,8 @@ typedef struct mips32_common_s
 	int num_data_bpoints;
 	int num_inst_bpoints_avail;
 	int num_data_bpoints_avail;
-	mips32_comparator_t *inst_break_list;
-	mips32_comparator_t *data_break_list;
+	struct mips32_comparator *inst_break_list;
+	struct mips32_comparator *data_break_list;
 
 	/* register cache to processor synchronization */
 	int (*read_core_reg)(struct target_s *target, int num);
diff --git a/src/target/mips_m4k.c b/src/target/mips_m4k.c
index 0fc32ab..df9ec41 100644
--- a/src/target/mips_m4k.c
+++ b/src/target/mips_m4k.c
@@ -494,7 +494,7 @@ void mips_m4k_enable_breakpoints(struct target_s *target)
 int mips_m4k_set_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
 {
 	mips32_common_t *mips32 = target-&gt;arch_info;
-	mips32_comparator_t * comparator_list = mips32-&gt;inst_break_list;
+	struct mips32_comparator * comparator_list = mips32-&gt;inst_break_list;
 	int retval;
 
 	if (breakpoint-&gt;set)
@@ -586,7 +586,7 @@ int mips_m4k_unset_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
 {
 	/* get pointers to arch-specific information */
 	mips32_common_t *mips32 = target-&gt;arch_info;
-	mips32_comparator_t * comparator_list = mips32-&gt;inst_break_list;
+	struct mips32_comparator * comparator_list = mips32-&gt;inst_break_list;
 	int retval;
 
 	if (!breakpoint-&gt;set)
@@ -702,7 +702,7 @@ int mips_m4k_remove_breakpoint(struct target_s *target, breakpoint_t *breakpoint
 int mips_m4k_set_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
 {
 	mips32_common_t *mips32 = target-&gt;arch_info;
-	mips32_comparator_t * comparator_list = mips32-&gt;data_break_list;
+	struct mips32_comparator * comparator_list = mips32-&gt;data_break_list;
 	int wp_num = 0;
 	/*
 	 * watchpoint enabled, ignore all byte lanes in value register
@@ -771,7 +771,7 @@ int mips_m4k_unset_watchpoint(struct target_s *target, struct watchpoint *watchp
 {
 	/* get pointers to arch-specific information */
 	mips32_common_t *mips32 = target-&gt;arch_info;
-	mips32_comparator_t * comparator_list = mips32-&gt;data_break_list;
+	struct mips32_comparator * comparator_list = mips32-&gt;data_break_list;
 
 	if (!watchpoint-&gt;set)
 	{

commit ef36a7fb3b87bddc14ad9c5d98fde1d041a0de2d
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:43:23 2009 -0800

    image_mot_t -&gt; struct image_mot
    
    Remove misleading typedef and redundant suffix from struct image_mot.

diff --git a/src/target/image.c b/src/target/image.c
index fbd5d7e..608ac59 100644
--- a/src/target/image.c
+++ b/src/target/image.c
@@ -501,7 +501,7 @@ static int image_elf_read_section(image_t *image, int section, uint32_t offset,
 
 static int image_mot_buffer_complete(image_t *image)
 {
-	image_mot_t *mot = image-&gt;type_private;
+	struct image_mot *mot = image-&gt;type_private;
 	struct fileio *fileio = &amp;mot-&gt;fileio;
 	uint32_t full_address = 0x0;
 	uint32_t cooked_bytes;
@@ -756,9 +756,9 @@ int image_open(image_t *image, const char *url, const char *type_string)
 	}
 	else if (image-&gt;type == IMAGE_SRECORD)
 	{
-		image_mot_t *image_mot;
+		struct image_mot *image_mot;
 
-		image_mot = image-&gt;type_private = malloc(sizeof(image_mot_t));
+		image_mot = image-&gt;type_private = malloc(sizeof(struct image_mot));
 
 		if ((retval = fileio_open(&amp;image_mot-&gt;fileio, url, FILEIO_READ, FILEIO_TEXT)) != ERROR_OK)
 		{
@@ -984,7 +984,7 @@ void image_close(image_t *image)
 	}
 	else if (image-&gt;type == IMAGE_SRECORD)
 	{
-		image_mot_t *image_mot = image-&gt;type_private;
+		struct image_mot *image_mot = image-&gt;type_private;
 
 		fileio_close(&amp;image_mot-&gt;fileio);
 
diff --git a/src/target/image.h b/src/target/image.h
index 5969dde..608336b 100644
--- a/src/target/image.h
+++ b/src/target/image.h
@@ -94,11 +94,11 @@ typedef struct fileio_elf_s
 	uint8_t endianness;
 } image_elf_t;
 
-typedef struct image_mot_s
+struct image_mot
 {
 	struct fileio fileio;
 	uint8_t *buffer;
-} image_mot_t;
+};
 
 int image_open(image_t *image, const char *url, const char *type_string);
 int image_read_section(image_t *image, int section, uint32_t offset,

commit b154972bdbcbda1ae8e05271c0db556fade8dbef
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:43:14 2009 -0800

    image_memory_t -&gt; struct image_memory
    
    Remove misleading typedef and redundant suffix from struct image_memory.

diff --git a/src/target/image.c b/src/target/image.c
index 60784c8..fbd5d7e 100644
--- a/src/target/image.c
+++ b/src/target/image.c
@@ -740,7 +740,7 @@ int image_open(image_t *image, const char *url, const char *type_string)
 			return ERROR_FAIL;
 		}
 
-		image_memory_t *image_memory;
+		struct image_memory *image_memory;
 
 		image-&gt;num_sections = 1;
 		image-&gt;sections = malloc(sizeof(struct image_section));
@@ -748,7 +748,7 @@ int image_open(image_t *image, const char *url, const char *type_string)
 		image-&gt;sections[0].size = 0xffffffff;
 		image-&gt;sections[0].flags = 0;
 
-		image_memory = image-&gt;type_private = malloc(sizeof(image_memory_t));
+		image_memory = image-&gt;type_private = malloc(sizeof(struct image_memory));
 
 		image_memory-&gt;target = target;
 		image_memory-&gt;cache = NULL;
@@ -842,7 +842,7 @@ int image_read_section(image_t *image, int section, uint32_t offset, uint32_t si
 	}
 	else if (image-&gt;type == IMAGE_MEMORY)
 	{
-		image_memory_t *image_memory = image-&gt;type_private;
+		struct image_memory *image_memory = image-&gt;type_private;
 		uint32_t address = image-&gt;sections[section].base_address + offset;
 
 		*size_read = 0;
@@ -974,7 +974,7 @@ void image_close(image_t *image)
 	}
 	else if (image-&gt;type == IMAGE_MEMORY)
 	{
-		image_memory_t *image_memory = image-&gt;type_private;
+		struct image_memory *image_memory = image-&gt;type_private;
 
 		if (image_memory-&gt;cache)
 		{
diff --git a/src/target/image.h b/src/target/image.h
index 20d3151..5969dde 100644
--- a/src/target/image.h
+++ b/src/target/image.h
@@ -78,12 +78,12 @@ struct image_ihex
 	uint8_t *buffer;
 };
 
-typedef struct image_memory_s
+struct image_memory
 {
 	struct target_s *target;
 	uint8_t *cache;
 	uint32_t cache_address;
-} image_memory_t;
+};
 
 typedef struct fileio_elf_s
 {

commit 1a4ff43a7ce4463e7b37f893ca185b055ec6fa9d
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:43:09 2009 -0800

    image_ihex_t -&gt; struct image_ihex
    
    Remove misleading typedef and redundant suffix from struct image_ihex.

diff --git a/src/target/image.c b/src/target/image.c
index e8affb6..60784c8 100644
--- a/src/target/image.c
+++ b/src/target/image.c
@@ -149,7 +149,7 @@ static int identify_image_type(image_t *image, const char *type_string, const ch
 
 static int image_ihex_buffer_complete(image_t *image)
 {
-	image_ihex_t *ihex = image-&gt;type_private;
+	struct image_ihex *ihex = image-&gt;type_private;
 	struct fileio *fileio = &amp;ihex-&gt;fileio;
 	uint32_t full_address = 0x0;
 	uint32_t cooked_bytes;
@@ -697,9 +697,9 @@ int image_open(image_t *image, const char *url, const char *type_string)
 	}
 	else if (image-&gt;type == IMAGE_IHEX)
 	{
-		image_ihex_t *image_ihex;
+		struct image_ihex *image_ihex;
 
-		image_ihex = image-&gt;type_private = malloc(sizeof(image_ihex_t));
+		image_ihex = image-&gt;type_private = malloc(sizeof(struct image_ihex));
 
 		if ((retval = fileio_open(&amp;image_ihex-&gt;fileio, url, FILEIO_READ, FILEIO_TEXT)) != ERROR_OK)
 		{
@@ -944,7 +944,7 @@ void image_close(image_t *image)
 	}
 	else if (image-&gt;type == IMAGE_IHEX)
 	{
-		image_ihex_t *image_ihex = image-&gt;type_private;
+		struct image_ihex *image_ihex = image-&gt;type_private;
 
 		fileio_close(&amp;image_ihex-&gt;fileio);
 
diff --git a/src/target/image.h b/src/target/image.h
index b150b90..20d3151 100644
--- a/src/target/image.h
+++ b/src/target/image.h
@@ -72,11 +72,11 @@ struct image_binary
 	struct fileio fileio;
 };
 
-typedef struct image_ihex_s
+struct image_ihex
 {
 	struct fileio fileio;
 	uint8_t *buffer;
-} image_ihex_t;
+};
 
 typedef struct image_memory_s
 {

commit a87faf5b66fabb03cdf15a54185f15b91da779c2
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:43:02 2009 -0800

    image_binary_t -&gt; struct image_binary
    
    Remove misleading typedef and redundant suffix from struct image_binary.

diff --git a/src/target/image.c b/src/target/image.c
index 0247310..e8affb6 100644
--- a/src/target/image.c
+++ b/src/target/image.c
@@ -680,9 +680,9 @@ int image_open(image_t *image, const char *url, const char *type_string)
 
 	if (image-&gt;type == IMAGE_BINARY)
 	{
-		image_binary_t *image_binary;
+		struct image_binary *image_binary;
 
-		image_binary = image-&gt;type_private = malloc(sizeof(image_binary_t));
+		image_binary = image-&gt;type_private = malloc(sizeof(struct image_binary));
 
 		if ((retval = fileio_open(&amp;image_binary-&gt;fileio, url, FILEIO_READ, FILEIO_BINARY)) != ERROR_OK)
 		{
@@ -811,7 +811,7 @@ int image_read_section(image_t *image, int section, uint32_t offset, uint32_t si
 
 	if (image-&gt;type == IMAGE_BINARY)
 	{
-		image_binary_t *image_binary = image-&gt;type_private;
+		struct image_binary *image_binary = image-&gt;type_private;
 
 		/* only one section in a plain binary */
 		if (section != 0)
@@ -938,7 +938,7 @@ void image_close(image_t *image)
 {
 	if (image-&gt;type == IMAGE_BINARY)
 	{
-		image_binary_t *image_binary = image-&gt;type_private;
+		struct image_binary *image_binary = image-&gt;type_private;
 
 		fileio_close(&amp;image_binary-&gt;fileio);
 	}
diff --git a/src/target/image.h b/src/target/image.h
index 746f3d2..b150b90 100644
--- a/src/target/image.h
+++ b/src/target/image.h
@@ -67,10 +67,10 @@ typedef struct image_s
 	uint32_t start_address;		/* start address, if one is set */
 } image_t;
 
-typedef struct image_binary_s
+struct image_binary
 {
 	struct fileio fileio;
-} image_binary_t;
+};
 
 typedef struct image_ihex_s
 {

commit 24df46d0676630c90f04ee49b96533f5fddca6cd
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:42:52 2009 -0800

    image_section_t -&gt; struct image_section
    
    Remove misleading typedef and redundant suffix from struct image_section.

diff --git a/src/target/image.c b/src/target/image.c
index 9a9c955..0247310 100644
--- a/src/target/image.c
+++ b/src/target/image.c
@@ -158,7 +158,7 @@ static int image_ihex_buffer_complete(image_t *image)
 
 	/* we can't determine the number of sections that we'll have to create ahead of time,
 	 * so we locally hold them until parsing is finished */
-	image_section_t section[IMAGE_MAX_SECTIONS];
+	struct image_section section[IMAGE_MAX_SECTIONS];
 
 	ihex-&gt;buffer = malloc(fileio-&gt;size &gt;&gt; 1);
 	cooked_bytes = 0x0;
@@ -232,7 +232,7 @@ static int image_ihex_buffer_complete(image_t *image)
 			image-&gt;num_sections++;
 
 			/* copy section information */
-			image-&gt;sections = malloc(sizeof(image_section_t) * image-&gt;num_sections);
+			image-&gt;sections = malloc(sizeof(struct image_section) * image-&gt;num_sections);
 			for (i = 0; i &lt; image-&gt;num_sections; i++)
 			{
 				image-&gt;sections[i].private = section[i].private;
@@ -439,7 +439,7 @@ static int image_elf_read_headers(image_t *image)
 		if ((field32(elf, elf-&gt;segments[i].p_type) == PT_LOAD) &amp;&amp; (field32(elf, elf-&gt;segments[i].p_filesz) != 0))
 			image-&gt;num_sections++;
 	/* alloc and fill sections array with loadable segments */
-	image-&gt;sections = malloc(image-&gt;num_sections * sizeof(image_section_t));
+	image-&gt;sections = malloc(image-&gt;num_sections * sizeof(struct image_section));
 	for (i = 0,j = 0;i &lt; elf-&gt;segment_count;i++)
 	{
 		if ((field32(elf, elf-&gt;segments[i].p_type) == PT_LOAD) &amp;&amp; (field32(elf, elf-&gt;segments[i].p_filesz) != 0))
@@ -510,7 +510,7 @@ static int image_mot_buffer_complete(image_t *image)
 
 	/* we can't determine the number of sections that we'll have to create ahead of time,
 	 * so we locally hold them until parsing is finished */
-	image_section_t section[IMAGE_MAX_SECTIONS];
+	struct image_section section[IMAGE_MAX_SECTIONS];
 
 	mot-&gt;buffer = malloc(fileio-&gt;size &gt;&gt; 1);
 	cooked_bytes = 0x0;
@@ -635,7 +635,7 @@ static int image_mot_buffer_complete(image_t *image)
 			image-&gt;num_sections++;
 
 			/* copy section information */
-			image-&gt;sections = malloc(sizeof(image_section_t) * image-&gt;num_sections);
+			image-&gt;sections = malloc(sizeof(struct image_section) * image-&gt;num_sections);
 			for (i = 0; i &lt; image-&gt;num_sections; i++)
 			{
 				image-&gt;sections[i].private = section[i].private;
@@ -690,7 +690,7 @@ int image_open(image_t *image, const char *url, const char *type_string)
 		}
 
 		image-&gt;num_sections = 1;
-		image-&gt;sections = malloc(sizeof(image_section_t));
+		image-&gt;sections = malloc(sizeof(struct image_section));
 		image-&gt;sections[0].base_address = 0x0;
 		image-&gt;sections[0].size = image_binary-&gt;fileio.size;
 		image-&gt;sections[0].flags = 0;
@@ -743,7 +743,7 @@ int image_open(image_t *image, const char *url, const char *type_string)
 		image_memory_t *image_memory;
 
 		image-&gt;num_sections = 1;
-		image-&gt;sections = malloc(sizeof(image_section_t));
+		image-&gt;sections = malloc(sizeof(struct image_section));
 		image-&gt;sections[0].base_address = 0x0;
 		image-&gt;sections[0].size = 0xffffffff;
 		image-&gt;sections[0].flags = 0;
@@ -899,7 +899,7 @@ int image_read_section(image_t *image, int section, uint32_t offset, uint32_t si
 
 int image_add_section(image_t *image, uint32_t base, uint32_t size, int flags, uint8_t *data)
 {
-	image_section_t *section;
+	struct image_section *section;
 
 	/* only image builder supports adding sections */
 	if (image-&gt;type != IMAGE_BUILDER)
@@ -923,7 +923,7 @@ int image_add_section(image_t *image, uint32_t base, uint32_t size, int flags, u
 
 	/* allocate new section */
 	image-&gt;num_sections++;
-	image-&gt;sections = realloc(image-&gt;sections, sizeof(image_section_t) * image-&gt;num_sections);
+	image-&gt;sections = realloc(image-&gt;sections, sizeof(struct image_section) * image-&gt;num_sections);
 	section = &amp;image-&gt;sections[image-&gt;num_sections - 1];
 	section-&gt;base_address = base;
 	section-&gt;size = size;
diff --git a/src/target/image.h b/src/target/image.h
index a1e24c4..746f3d2 100644
--- a/src/target/image.h
+++ b/src/target/image.h
@@ -47,20 +47,20 @@ typedef enum image_type
 	IMAGE_BUILDER,	/* when building a new image */
 } image_type_t;
 
-typedef struct image_section_s
+struct image_section
 {
 	uint32_t base_address;
 	uint32_t size;
 	int flags;
 	void *private;		/* private data */
-} image_section_t;
+};
 
 typedef struct image_s
 {
 	image_type_t type;		/* image type (plain, ihex, ...) */
 	void *type_private;		/* type private data */
 	int num_sections;		/* number of sections contained in the image */
-	image_section_t *sections;	/* array of sections */
+	struct image_section *sections;	/* array of sections */
 	int base_address_set;	/* whether the image has a base address set (for relocation purposes) */
 	int base_address;		/* base address, if one is set */
 	int start_address_set;	/* whether the image has a start address (entry point) associated */

commit 99614219ad111c124ea5d5f997bb388cbcf00e32
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:42:46 2009 -0800

    etmv1_trace_data_t -&gt; struct etmv1_trace_data
    
    Remove misleading typedef and redundant suffix from struct etmv1_trace_data.

diff --git a/src/target/etb.c b/src/target/etb.c
index d6bf73f..44decfe 100644
--- a/src/target/etb.c
+++ b/src/target/etb.c
@@ -527,7 +527,7 @@ static int etb_read_trace(etm_context_t *etm_ctx)
 	else
 		etm_ctx-&gt;trace_depth = num_frames;
 
-	etm_ctx-&gt;trace_data = malloc(sizeof(etmv1_trace_data_t) * etm_ctx-&gt;trace_depth);
+	etm_ctx-&gt;trace_data = malloc(sizeof(struct etmv1_trace_data) * etm_ctx-&gt;trace_depth);
 
 	for (i = 0, j = 0; i &lt; num_frames; i++)
 	{
diff --git a/src/target/etm.c b/src/target/etm.c
index f423835..9952279 100644
--- a/src/target/etm.c
+++ b/src/target/etm.c
@@ -1914,7 +1914,7 @@ COMMAND_HANDLER(handle_etm_load_command)
 	  fileio_read_u32(&amp;file, &amp;tmp); etm_ctx-&gt;tracemode = tmp;
 	  fileio_read_u32(&amp;file, &amp;etm_ctx-&gt;trace_depth);
 	}
-	etm_ctx-&gt;trace_data = malloc(sizeof(etmv1_trace_data_t) * etm_ctx-&gt;trace_depth);
+	etm_ctx-&gt;trace_data = malloc(sizeof(struct etmv1_trace_data) * etm_ctx-&gt;trace_depth);
 	if (etm_ctx-&gt;trace_data == NULL)
 	{
 		command_print(cmd_ctx, &quot;not enough memory to perform operation&quot;);
diff --git a/src/target/etm.h b/src/target/etm.h
index 317474c..08f9c22 100644
--- a/src/target/etm.h
+++ b/src/target/etm.h
@@ -140,12 +140,12 @@ enum
 	ETMV1_TRIGGER_CYCLE = 0x2,
 };
 
-typedef struct etmv1_trace_data_s
+struct etmv1_trace_data
 {
 	uint8_t pipestat;	/* bits 0-2 pipeline status */
 	uint16_t packet;		/* packet data (4, 8 or 16 bit) */
 	int flags;		/* ETMV1_TRACESYNC_CYCLE, ETMV1_TRIGGER_CYCLE */
-} etmv1_trace_data_t;
+};
 
 /* describe a trace context
  * if support for ETMv2 or ETMv3 is to be implemented,
@@ -160,7 +160,7 @@ typedef struct etm
 	void *capture_driver_priv;	/* capture driver private data */
 	uint32_t trigger_percent;	/* how much trace buffer to fill after trigger */
 	trace_status_t capture_status;	/* current state of capture run */
-	etmv1_trace_data_t *trace_data;	/* trace data */
+	struct etmv1_trace_data *trace_data;	/* trace data */
 	uint32_t trace_depth;		/* number of cycles to be analyzed, 0 if no data available */
 	etm_portmode_t portmode;	/* normal, multiplexed or demultiplexed */
 	etmv1_tracemode_t tracemode;	/* type of info trace contains */
diff --git a/src/target/oocd_trace.c b/src/target/oocd_trace.c
index f4064f7..b9cd03a 100644
--- a/src/target/oocd_trace.c
+++ b/src/target/oocd_trace.c
@@ -208,7 +208,7 @@ static int oocd_trace_read_trace(etm_context_t *etm_ctx)
 	}
 
 	etm_ctx-&gt;trace_depth = num_frames * 16;
-	etm_ctx-&gt;trace_data = malloc(sizeof(etmv1_trace_data_t) * etm_ctx-&gt;trace_depth);
+	etm_ctx-&gt;trace_data = malloc(sizeof(struct etmv1_trace_data) * etm_ctx-&gt;trace_depth);
 
 	for (i = 0; i &lt; num_frames * 16; i++)
 	{

commit e2001ba2116fe5c0c75f7953b5fbe35da65fa29d
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:42:39 2009 -0800

    etm_capture_driver_t -&gt; struct etm_capture_driver
    
    Remove misleading typedef and redundant suffix from struct etm_capture_driver.

diff --git a/src/target/etb.c b/src/target/etb.c
index 6a711d4..d6bf73f 100644
--- a/src/target/etb.c
+++ b/src/target/etb.c
@@ -682,7 +682,7 @@ static int etb_stop_capture(etm_context_t *etm_ctx)
 	return ERROR_OK;
 }
 
-etm_capture_driver_t etb_capture_driver =
+struct etm_capture_driver etb_capture_driver =
 {
 	.name = &quot;etb&quot;,
 	.register_commands = etb_register_commands,
diff --git a/src/target/etb.h b/src/target/etb.h
index 15171f5..b8973de 100644
--- a/src/target/etb.h
+++ b/src/target/etb.h
@@ -52,7 +52,7 @@ struct etb_reg
 	etb_t *etb;
 };
 
-extern etm_capture_driver_t etb_capture_driver;
+extern struct etm_capture_driver etb_capture_driver;
 
 reg_cache_t* etb_build_reg_cache(etb_t *etb);
 
diff --git a/src/target/etm.c b/src/target/etm.c
index ed2c76c..f423835 100644
--- a/src/target/etm.c
+++ b/src/target/etm.c
@@ -621,12 +621,12 @@ static int etm_write_reg(reg_t *reg, uint32_t value)
 /* ETM trace analysis functionality
  *
  */
-extern etm_capture_driver_t etm_dummy_capture_driver;
+extern struct etm_capture_driver etm_dummy_capture_driver;
 #if BUILD_OOCD_TRACE == 1
-extern etm_capture_driver_t oocd_trace_capture_driver;
+extern struct etm_capture_driver oocd_trace_capture_driver;
 #endif
 
-static etm_capture_driver_t *etm_capture_drivers[] =
+static struct etm_capture_driver *etm_capture_drivers[] =
 {
 	&amp;etb_capture_driver,
 	&amp;etm_dummy_capture_driver,
diff --git a/src/target/etm.h b/src/target/etm.h
index a58adb3..317474c 100644
--- a/src/target/etm.h
+++ b/src/target/etm.h
@@ -123,7 +123,7 @@ typedef enum
 /* forward-declare ETM context */
 struct etm;
 
-typedef struct etm_capture_driver_s
+struct etm_capture_driver
 {
 	char *name;
 	int (*register_commands)(struct command_context_s *cmd_ctx);
@@ -132,7 +132,7 @@ typedef struct etm_capture_driver_s
 	int (*read_trace)(struct etm *etm_ctx);
 	int (*start_capture)(struct etm *etm_ctx);
 	int (*stop_capture)(struct etm *etm_ctx);
-} etm_capture_driver_t;
+};
 
 enum
 {
@@ -156,7 +156,7 @@ typedef struct etm
 {
 	target_t *target;		/* target this ETM is connected to */
 	reg_cache_t *reg_cache;		/* ETM register cache */
-	etm_capture_driver_t *capture_driver;	/* driver used to access ETM data */
+	struct etm_capture_driver *capture_driver;	/* driver used to access ETM data */
 	void *capture_driver_priv;	/* capture driver private data */
 	uint32_t trigger_percent;	/* how much trace buffer to fill after trigger */
 	trace_status_t capture_status;	/* current state of capture run */
diff --git a/src/target/etm_dummy.c b/src/target/etm_dummy.c
index 6bb2cde..4d975c6 100644
--- a/src/target/etm_dummy.c
+++ b/src/target/etm_dummy.c
@@ -94,7 +94,7 @@ static int etm_dummy_stop_capture(etm_context_t *etm_ctx)
 	return ERROR_OK;
 }
 
-etm_capture_driver_t etm_dummy_capture_driver =
+struct etm_capture_driver etm_dummy_capture_driver =
 {
 	.name = &quot;dummy&quot;,
 	.register_commands = etm_dummy_register_commands,
diff --git a/src/target/etm_dummy.h b/src/target/etm_dummy.h
index 0e712e3..2673e4f 100644
--- a/src/target/etm_dummy.h
+++ b/src/target/etm_dummy.h
@@ -22,6 +22,6 @@
 
 #include &quot;etm.h&quot;
 
-extern etm_capture_driver_t etm_dummy_capture_driver;
+extern struct etm_capture_driver etm_dummy_capture_driver;
 
 #endif /* ETB_H */
diff --git a/src/target/oocd_trace.c b/src/target/oocd_trace.c
index 755e1b6..f4064f7 100644
--- a/src/target/oocd_trace.c
+++ b/src/target/oocd_trace.c
@@ -278,7 +278,7 @@ static int oocd_trace_stop_capture(etm_context_t *etm_ctx)
 	return ERROR_OK;
 }
 
-etm_capture_driver_t oocd_trace_capture_driver =
+struct etm_capture_driver oocd_trace_capture_driver =
 {
 	.name = &quot;oocd_trace&quot;,
 	.register_commands = oocd_trace_register_commands,
diff --git a/src/target/oocd_trace.h b/src/target/oocd_trace.h
index 6c3f7f9..886ff79 100644
--- a/src/target/oocd_trace.h
+++ b/src/target/oocd_trace.h
@@ -54,6 +54,6 @@ typedef struct oocd_trace_s
 	struct termios oldtio, newtio;
 } oocd_trace_t;
 
-extern etm_capture_driver_t oocd_trace_capture_driver;
+extern struct etm_capture_driver oocd_trace_capture_driver;
 
 #endif /* OOCD_TRACE_TRACE_H */

commit 63242c6d45570ca32fd569a71b5ecea522f839ea
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:42:32 2009 -0800

    etm_reg_t -&gt; struct etm_reg
    
    Remove misleading typedef and redundant suffix from struct etm_reg.

diff --git a/src/target/etm.c b/src/target/etm.c
index 8643463..ed2c76c 100644
--- a/src/target/etm.c
+++ b/src/target/etm.c
@@ -235,7 +235,7 @@ static reg_t *etm_reg_lookup(etm_context_t *etm_ctx, unsigned id)
 	int i;
 
 	for (i = 0; i &lt; cache-&gt;num_regs; i++) {
-		struct etm_reg_s *reg = cache-&gt;reg_list[i].arch_info;
+		struct etm_reg *reg = cache-&gt;reg_list[i].arch_info;
 
 		if (reg-&gt;reg_info-&gt;addr == id)
 			return &amp;cache-&gt;reg_list[i];
@@ -248,7 +248,7 @@ static reg_t *etm_reg_lookup(etm_context_t *etm_ctx, unsigned id)
 }
 
 static void etm_reg_add(unsigned bcd_vers, struct arm_jtag *jtag_info,
-		reg_cache_t *cache, etm_reg_t *ereg,
+		reg_cache_t *cache, struct etm_reg *ereg,
 		const struct etm_reg_info *r, unsigned nreg)
 {
 	reg_t *reg = cache-&gt;reg_list;
@@ -284,7 +284,7 @@ reg_cache_t *etm_build_reg_cache(target_t *target,
 {
 	reg_cache_t *reg_cache = malloc(sizeof(reg_cache_t));
 	reg_t *reg_list = NULL;
-	etm_reg_t *arch_info = NULL;
+	struct etm_reg *arch_info = NULL;
 	unsigned bcd_vers, config;
 
 	/* register a register arch-type for etm registers only once */
@@ -294,7 +294,7 @@ reg_cache_t *etm_build_reg_cache(target_t *target,
 
 	/* the actual registers are kept in two arrays */
 	reg_list = calloc(128, sizeof(reg_t));
-	arch_info = calloc(128, sizeof(etm_reg_t));
+	arch_info = calloc(128, sizeof(struct etm_reg));
 
 	/* fill in values for the reg cache */
 	reg_cache-&gt;name = &quot;etm registers&quot;;
@@ -489,7 +489,7 @@ static int etm_get_reg(reg_t *reg)
 static int etm_read_reg_w_check(reg_t *reg,
 		uint8_t* check_value, uint8_t* check_mask)
 {
-	etm_reg_t *etm_reg = reg-&gt;arch_info;
+	struct etm_reg *etm_reg = reg-&gt;arch_info;
 	const struct etm_reg_info *r = etm_reg-&gt;reg_info;
 	uint8_t reg_addr = r-&gt;addr &amp; 0x7f;
 	struct scan_field fields[3];
@@ -575,7 +575,7 @@ static int etm_set_reg_w_exec(reg_t *reg, uint8_t *buf)
 
 static int etm_write_reg(reg_t *reg, uint32_t value)
 {
-	etm_reg_t *etm_reg = reg-&gt;arch_info;
+	struct etm_reg *etm_reg = reg-&gt;arch_info;
 	const struct etm_reg_info *r = etm_reg-&gt;reg_info;
 	uint8_t reg_addr = r-&gt;addr &amp; 0x7f;
 	struct scan_field fields[3];
diff --git a/src/target/etm.h b/src/target/etm.h
index d6e1210..a58adb3 100644
--- a/src/target/etm.h
+++ b/src/target/etm.h
@@ -71,12 +71,12 @@ enum
 	ETM_ID = 0x79,
 };
 
-typedef struct etm_reg_s
+struct etm_reg
 {
 	uint32_t value;
 	const struct etm_reg_info *reg_info;
 	struct arm_jtag *jtag_info;
-} etm_reg_t;
+};
 
 typedef enum
 {

commit 01f9dc18fcce8d5a0e02e56822d580da81570fdc
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:42:24 2009 -0800

    etb_reg_t -&gt; struct etb_reg
    
    Remove misleading typedef and redundant suffix from struct etb_reg.

diff --git a/src/target/etb.c b/src/target/etb.c
index 1315b71..6a711d4 100644
--- a/src/target/etb.c
+++ b/src/target/etb.c
@@ -125,7 +125,7 @@ reg_cache_t* etb_build_reg_cache(etb_t *etb)
 {
 	reg_cache_t *reg_cache = malloc(sizeof(reg_cache_t));
 	reg_t *reg_list = NULL;
-	etb_reg_t *arch_info = NULL;
+	struct etb_reg *arch_info = NULL;
 	int num_regs = 9;
 	int i;
 
@@ -135,7 +135,7 @@ reg_cache_t* etb_build_reg_cache(etb_t *etb)
 
 	/* the actual registers are kept in two arrays */
 	reg_list = calloc(num_regs, sizeof(reg_t));
-	arch_info = calloc(num_regs, sizeof(etb_reg_t));
+	arch_info = calloc(num_regs, sizeof(struct etb_reg));
 
 	/* fill in values for the reg cache */
 	reg_cache-&gt;name = &quot;etb registers&quot;;
@@ -227,7 +227,7 @@ static int etb_read_ram(etb_t *etb, uint32_t *data, int num_frames)
 static int etb_read_reg_w_check(reg_t *reg,
 		uint8_t* check_value, uint8_t* check_mask)
 {
-	etb_reg_t *etb_reg = reg-&gt;arch_info;
+	struct etb_reg *etb_reg = reg-&gt;arch_info;
 	uint8_t reg_addr = etb_reg-&gt;addr &amp; 0x7f;
 	struct scan_field fields[3];
 
@@ -313,7 +313,7 @@ static int etb_set_reg_w_exec(reg_t *reg, uint8_t *buf)
 
 static int etb_write_reg(reg_t *reg, uint32_t value)
 {
-	etb_reg_t *etb_reg = reg-&gt;arch_info;
+	struct etb_reg *etb_reg = reg-&gt;arch_info;
 	uint8_t reg_addr = etb_reg-&gt;addr &amp; 0x7f;
 	struct scan_field fields[3];
 
diff --git a/src/target/etb.h b/src/target/etb.h
index 6700ecb..15171f5 100644
--- a/src/target/etb.h
+++ b/src/target/etb.h
@@ -46,11 +46,11 @@ typedef struct etb_s
 	uint32_t ram_width;
 } etb_t;
 
-typedef struct etb_reg_s
+struct etb_reg
 {
 	uint32_t addr;
 	etb_t *etb;
-} etb_reg_t;
+};
 
 extern etm_capture_driver_t etb_capture_driver;
 

commit 2f7fc2921d5769799f1bd527b49a7a877b4c8fa0
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:42:20 2009 -0800

    embeddedice_reg_t -&gt; struct embeddedice_reg
    
    Remove misleading typedef and redundant suffix from struct embeddedice_reg.

diff --git a/src/target/arm7_9_common.c b/src/target/arm7_9_common.c
index 893c39d..eb27bba 100644
--- a/src/target/arm7_9_common.c
+++ b/src/target/arm7_9_common.c
@@ -2609,7 +2609,7 @@ static int arm7_9_dcc_completion(struct target_s *target, uint32_t exit_point, i
 		embeddedice_write_reg(&amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_COMMS_DATA], fast_target_buffer_get_u32(buffer, little));
 		buffer += 4;
 
-		embeddedice_reg_t *ice_reg = arm7_9-&gt;eice_cache-&gt;reg_list[EICE_COMMS_DATA].arch_info;
+		struct embeddedice_reg *ice_reg = arm7_9-&gt;eice_cache-&gt;reg_list[EICE_COMMS_DATA].arch_info;
 		uint8_t reg_addr = ice_reg-&gt;addr &amp; 0x1f;
 		struct jtag_tap *tap;
 		tap = ice_reg-&gt;jtag_info-&gt;tap;
diff --git a/src/target/embeddedice.c b/src/target/embeddedice.c
index 3f0048e..169ad2c 100644
--- a/src/target/embeddedice.c
+++ b/src/target/embeddedice.c
@@ -169,7 +169,7 @@ embeddedice_build_reg_cache(target_t *target, struct arm7_9_common *arm7_9)
 	int retval;
 	reg_cache_t *reg_cache = malloc(sizeof(reg_cache_t));
 	reg_t *reg_list = NULL;
-	embeddedice_reg_t *arch_info = NULL;
+	struct embeddedice_reg *arch_info = NULL;
 	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	int num_regs = ARRAY_SIZE(eice_regs);
 	int i;
@@ -186,7 +186,7 @@ embeddedice_build_reg_cache(target_t *target, struct arm7_9_common *arm7_9)
 
 	/* the actual registers are kept in two arrays */
 	reg_list = calloc(num_regs, sizeof(reg_t));
-	arch_info = calloc(num_regs, sizeof(embeddedice_reg_t));
+	arch_info = calloc(num_regs, sizeof(struct embeddedice_reg));
 
 	/* fill in values for the reg cache */
 	reg_cache-&gt;name = &quot;EmbeddedICE registers&quot;;
@@ -331,7 +331,7 @@ int embeddedice_setup(target_t *target)
 int embeddedice_read_reg_w_check(reg_t *reg,
 		uint8_t *check_value, uint8_t *check_mask)
 {
-	embeddedice_reg_t *ice_reg = reg-&gt;arch_info;
+	struct embeddedice_reg *ice_reg = reg-&gt;arch_info;
 	uint8_t reg_addr = ice_reg-&gt;addr &amp; 0x1f;
 	struct scan_field fields[3];
 	uint8_t field1_out[1];
@@ -487,7 +487,7 @@ int embeddedice_set_reg_w_exec(reg_t *reg, uint8_t *buf)
  */
 void embeddedice_write_reg(reg_t *reg, uint32_t value)
 {
-	embeddedice_reg_t *ice_reg = reg-&gt;arch_info;
+	struct embeddedice_reg *ice_reg = reg-&gt;arch_info;
 
 	LOG_DEBUG(&quot;%i: 0x%8.8&quot; PRIx32 &quot;&quot;, ice_reg-&gt;addr, value);
 
diff --git a/src/target/embeddedice.h b/src/target/embeddedice.h
index 113a8fe..eb2bb29 100644
--- a/src/target/embeddedice.h
+++ b/src/target/embeddedice.h
@@ -87,11 +87,11 @@ enum
 	EICE_COMM_CTRL_RBIT = 0
 };
 
-typedef struct embeddedice_reg_s
+struct embeddedice_reg
 {
 	int addr;
 	struct arm_jtag *jtag_info;
-} embeddedice_reg_t;
+};
 
 reg_cache_t* embeddedice_build_reg_cache(target_t *target,
 		struct arm7_9_common *arm7_9);

commit 26a99ed740f4071c9eebba10f7f597844812fc13
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:42:15 2009 -0800

    cortex_m3_common_t -&gt; struct cortex_m3_common
    
    Remove misleading typedef and redundant suffix from struct cortex_m3_common.

diff --git a/src/target/cortex_m3.c b/src/target/cortex_m3.c
index 6f64714..9d2c54f 100644
--- a/src/target/cortex_m3.c
+++ b/src/target/cortex_m3.c
@@ -121,7 +121,7 @@ static int cortexm3_dap_write_coreregister_u32(struct swjdp_common *swjdp,
 static int cortex_m3_write_debug_halt_mask(target_t *target,
 		uint32_t mask_on, uint32_t mask_off)
 {
-	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
+	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 	struct swjdp_common *swjdp = &amp;cortex_m3-&gt;armv7m.swjdp_info;
 
 	/* mask off status bits */
@@ -134,7 +134,7 @@ static int cortex_m3_write_debug_halt_mask(target_t *target,
 
 static int cortex_m3_clear_halt(target_t *target)
 {
-	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
+	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 	struct swjdp_common *swjdp = &amp;cortex_m3-&gt;armv7m.swjdp_info;
 
 	/* clear step if any */
@@ -151,7 +151,7 @@ static int cortex_m3_clear_halt(target_t *target)
 
 static int cortex_m3_single_step_core(target_t *target)
 {
-	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
+	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 	struct swjdp_common *swjdp = &amp;cortex_m3-&gt;armv7m.swjdp_info;
 	uint32_t dhcsr_save;
 
@@ -175,7 +175,7 @@ static int cortex_m3_endreset_event(target_t *target)
 {
 	int i;
 	uint32_t dcb_demcr;
-	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
+	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 	struct swjdp_common *swjdp = &amp;cortex_m3-&gt;armv7m.swjdp_info;
 	cortex_m3_fp_comparator_t *fp_list = cortex_m3-&gt;fp_comparator_list;
 	cortex_m3_dwt_comparator_t *dwt_list = cortex_m3-&gt;dwt_comparator_list;
@@ -231,7 +231,7 @@ static int cortex_m3_endreset_event(target_t *target)
 
 static int cortex_m3_examine_debug_reason(target_t *target)
 {
-	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
+	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 
 	/* THIS IS NOT GOOD, TODO - better logic for detection of debug state reason */
 	/* only check the debug reason if we don't know it already */
@@ -309,7 +309,7 @@ static int cortex_m3_debug_entry(target_t *target)
 	int i;
 	uint32_t xPSR;
 	int retval;
-	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
+	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 	struct armv7m_common *armv7m = &amp;cortex_m3-&gt;armv7m;
 	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
 
@@ -380,7 +380,7 @@ static int cortex_m3_poll(target_t *target)
 {
 	int retval;
 	enum target_state prev_target_state = target-&gt;state;
-	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
+	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 	struct swjdp_common *swjdp = &amp;cortex_m3-&gt;armv7m.swjdp_info;
 
 	/* Read from Debug Halting Control and Status Register */
@@ -494,7 +494,7 @@ static int cortex_m3_halt(target_t *target)
 
 static int cortex_m3_soft_reset_halt(struct target_s *target)
 {
-	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
+	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 	struct swjdp_common *swjdp = &amp;cortex_m3-&gt;armv7m.swjdp_info;
 	uint32_t dcb_dhcsr = 0;
 	int retval, timeout = 0;
@@ -635,7 +635,7 @@ static int cortex_m3_resume(struct target_s *target, int current,
 static int cortex_m3_step(struct target_s *target, int current,
 		uint32_t address, int handle_breakpoints)
 {
-	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
+	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 	struct armv7m_common *armv7m = &amp;cortex_m3-&gt;armv7m;
 	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
 	breakpoint_t *breakpoint = NULL;
@@ -686,7 +686,7 @@ static int cortex_m3_step(struct target_s *target, int current,
 
 static int cortex_m3_assert_reset(target_t *target)
 {
-	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
+	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 	struct swjdp_common *swjdp = &amp;cortex_m3-&gt;armv7m.swjdp_info;
 	int assert_srst = 1;
 
@@ -838,7 +838,7 @@ cortex_m3_set_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
 	int retval;
 	int fp_num = 0;
 	uint32_t hilo;
-	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
+	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 	cortex_m3_fp_comparator_t *comparator_list = cortex_m3-&gt;fp_comparator_list;
 
 	if (breakpoint-&gt;set)
@@ -903,7 +903,7 @@ static int
 cortex_m3_unset_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
 {
 	int retval;
-	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
+	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 	cortex_m3_fp_comparator_t * comparator_list = cortex_m3-&gt;fp_comparator_list;
 
 	if (!breakpoint-&gt;set)
@@ -957,7 +957,7 @@ cortex_m3_unset_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
 static int
 cortex_m3_add_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
 {
-	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
+	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 
 	if (cortex_m3-&gt;auto_bp_type)
 	{
@@ -1006,7 +1006,7 @@ cortex_m3_add_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
 static int
 cortex_m3_remove_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
 {
-	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
+	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 
 	/* REVISIT why check? FBP can be updated with core running ... */
 	if (target-&gt;state != TARGET_HALTED)
@@ -1036,7 +1036,7 @@ cortex_m3_set_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
 {
 	int dwt_num = 0;
 	uint32_t mask, temp;
-	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
+	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 
 	/* watchpoint params were validated earlier */
 	mask = 0;
@@ -1099,7 +1099,7 @@ cortex_m3_set_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
 static int
 cortex_m3_unset_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
 {
-	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
+	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 	cortex_m3_dwt_comparator_t *comparator;
 	int dwt_num;
 
@@ -1136,7 +1136,7 @@ cortex_m3_unset_watchpoint(struct target_s *target, struct watchpoint *watchpoin
 static int
 cortex_m3_add_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
 {
-	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
+	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 
 	/* REVISIT why check? DWT can be updated with core running ... */
 	if (target-&gt;state != TARGET_HALTED)
@@ -1194,7 +1194,7 @@ cortex_m3_add_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
 static int
 cortex_m3_remove_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
 {
-	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
+	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 
 	/* REVISIT why check? DWT can be updated with core running ... */
 	if (target-&gt;state != TARGET_HALTED)
@@ -1513,7 +1513,7 @@ cortex_m3_dwt_addreg(struct target_s *t, struct reg_s *r, struct dwt_reg *d)
 }
 
 static void
-cortex_m3_dwt_setup(cortex_m3_common_t *cm3, struct target_s *target)
+cortex_m3_dwt_setup(struct cortex_m3_common *cm3, struct target_s *target)
 {
 	uint32_t dwtcr;
 	struct reg_cache_s *cache;
@@ -1587,7 +1587,7 @@ static int cortex_m3_examine(struct target_s *target)
 	int retval;
 	uint32_t cpuid, fpcr;
 	int i;
-	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
+	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 	struct swjdp_common *swjdp = &amp;cortex_m3-&gt;armv7m.swjdp_info;
 
 	if ((retval = ahbap_debugport_init(swjdp)) != ERROR_OK)
@@ -1708,7 +1708,7 @@ static int cortex_m3_handle_target_request(void *priv)
 }
 
 static int cortex_m3_init_arch_info(target_t *target,
-		cortex_m3_common_t *cortex_m3, struct jtag_tap *tap)
+		struct cortex_m3_common *cortex_m3, struct jtag_tap *tap)
 {
 	int retval;
 	struct armv7m_common *armv7m = &amp;cortex_m3-&gt;armv7m;
@@ -1749,7 +1749,7 @@ static int cortex_m3_init_arch_info(target_t *target,
 
 static int cortex_m3_target_create(struct target_s *target, Jim_Interp *interp)
 {
-	cortex_m3_common_t *cortex_m3 = calloc(1,sizeof(cortex_m3_common_t));
+	struct cortex_m3_common *cortex_m3 = calloc(1,sizeof(struct cortex_m3_common));
 
 	cortex_m3-&gt;common_magic = CORTEX_M3_COMMON_MAGIC;
 	cortex_m3_init_arch_info(target, cortex_m3, target-&gt;tap);
@@ -1760,7 +1760,7 @@ static int cortex_m3_target_create(struct target_s *target, Jim_Interp *interp)
 /*--------------------------------------------------------------------------*/
 
 static int cortex_m3_verify_pointer(struct command_context_s *cmd_ctx,
-		struct cortex_m3_common_s *cm3)
+		struct cortex_m3_common *cm3)
 {
 	if (cm3-&gt;common_magic != CORTEX_M3_COMMON_MAGIC) {
 		command_print(cmd_ctx, &quot;target is not a Cortex-M3&quot;);
@@ -1785,7 +1785,7 @@ COMMAND_HANDLER(handle_cortex_m3_disassemble_command)
 {
 	int retval;
 	target_t *target = get_current_target(cmd_ctx);
-	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
+	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 	uint32_t address;
 	unsigned long count = 1;
 	arm_instruction_t cur_instruction;
@@ -1836,7 +1836,7 @@ static const struct {
 COMMAND_HANDLER(handle_cortex_m3_vector_catch_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
-	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
+	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 	struct armv7m_common *armv7m = &amp;cortex_m3-&gt;armv7m;
 	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
 	uint32_t demcr = 0;
@@ -1893,7 +1893,7 @@ write:
 COMMAND_HANDLER(handle_cortex_m3_mask_interrupts_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
-	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
+	struct cortex_m3_common *cortex_m3 = target_to_cm3(target);
 	int retval;
 
 	retval = cortex_m3_verify_pointer(cmd_ctx, cortex_m3);
diff --git a/src/target/cortex_m3.h b/src/target/cortex_m3.h
index 7474049..b2d558d 100644
--- a/src/target/cortex_m3.h
+++ b/src/target/cortex_m3.h
@@ -136,7 +136,7 @@ typedef struct  cortex_m3_dwt_comparator_s
 	uint32_t dwt_comparator_address;
 } cortex_m3_dwt_comparator_t;
 
-typedef struct cortex_m3_common_s
+struct cortex_m3_common
 {
 	int common_magic;
 	struct arm_jtag jtag_info;
@@ -161,13 +161,13 @@ typedef struct cortex_m3_common_s
 	struct reg_cache_s *dwt_cache;
 
 	struct armv7m_common armv7m;
-} cortex_m3_common_t;
+};
 
-static inline struct cortex_m3_common_s *
+static inline struct cortex_m3_common *
 target_to_cm3(struct target_s *target)
 {
 	return container_of(target-&gt;arch_info,
-			struct cortex_m3_common_s, armv7m);
+			struct cortex_m3_common, armv7m);
 }
 
 #endif /* CORTEX_M3_H */

commit a1971ecacf6450aa57192680fc201928deb46b7d
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:42:11 2009 -0800

    cortex_a8_common_t -&gt; struct cortex_a8_common
    
    Remove misleading typedef and redundant suffix from struct cortex_a8_common.

diff --git a/src/target/cortex_a8.c b/src/target/cortex_a8.c
index fec8837..a60564c 100644
--- a/src/target/cortex_a8.c
+++ b/src/target/cortex_a8.c
@@ -339,7 +339,7 @@ static int cortex_a8_poll(target_t *target)
 {
 	int retval = ERROR_OK;
 	uint32_t dscr;
-	struct cortex_a8_common_s *cortex_a8 = target_to_cortex_a8(target);
+	struct cortex_a8_common *cortex_a8 = target_to_cortex_a8(target);
 	struct armv7a_common *armv7a = &amp;cortex_a8-&gt;armv7a_common;
 	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 	enum target_state prev_target_state = target-&gt;state;
@@ -565,7 +565,7 @@ static int cortex_a8_debug_entry(target_t *target)
 	uint32_t regfile[16], pc, cpsr, dscr;
 	int retval = ERROR_OK;
 	working_area_t *regfile_working_area = NULL;
-	struct cortex_a8_common_s *cortex_a8 = target_to_cortex_a8(target);
+	struct cortex_a8_common *cortex_a8 = target_to_cortex_a8(target);
 	struct armv7a_common *armv7a = target_to_armv7a(target);
 	struct armv4_5_common_s *armv4_5 = &amp;armv7a-&gt;armv4_5_common;
 	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
@@ -690,7 +690,7 @@ static int cortex_a8_debug_entry(target_t *target)
 
 static void cortex_a8_post_debug_entry(target_t *target)
 {
-	struct cortex_a8_common_s *cortex_a8 = target_to_cortex_a8(target);
+	struct cortex_a8_common *cortex_a8 = target_to_cortex_a8(target);
 	struct armv7a_common *armv7a = &amp;cortex_a8-&gt;armv7a_common;
 
 //	cortex_a8_read_cp(target, &amp;cp15_control_register, 15, 0, 1, 0, 0);
@@ -967,7 +967,7 @@ static int cortex_a8_set_breakpoint(struct target_s *target,
 	int brp_i=0;
 	uint32_t control;
 	uint8_t byte_addr_select = 0x0F;
-	struct cortex_a8_common_s *cortex_a8 = target_to_cortex_a8(target);
+	struct cortex_a8_common *cortex_a8 = target_to_cortex_a8(target);
 	struct armv7a_common *armv7a = &amp;cortex_a8-&gt;armv7a_common;
 	cortex_a8_brp_t * brp_list = cortex_a8-&gt;brp_list;
 
@@ -1038,7 +1038,7 @@ static int cortex_a8_set_breakpoint(struct target_s *target,
 static int cortex_a8_unset_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
 {
 	int retval;
-	struct cortex_a8_common_s *cortex_a8 = target_to_cortex_a8(target);
+	struct cortex_a8_common *cortex_a8 = target_to_cortex_a8(target);
 	struct armv7a_common *armv7a = &amp;cortex_a8-&gt;armv7a_common;
 	cortex_a8_brp_t * brp_list = cortex_a8-&gt;brp_list;
 
@@ -1095,7 +1095,7 @@ static int cortex_a8_unset_breakpoint(struct target_s *target, breakpoint_t *bre
 
 int cortex_a8_add_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
 {
-	struct cortex_a8_common_s *cortex_a8 = target_to_cortex_a8(target);
+	struct cortex_a8_common *cortex_a8 = target_to_cortex_a8(target);
 
 	if ((breakpoint-&gt;type == BKPT_HARD) &amp;&amp; (cortex_a8-&gt;brp_num_available &lt; 1))
 	{
@@ -1112,7 +1112,7 @@ int cortex_a8_add_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
 
 static int cortex_a8_remove_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
 {
-	struct cortex_a8_common_s *cortex_a8 = target_to_cortex_a8(target);
+	struct cortex_a8_common *cortex_a8 = target_to_cortex_a8(target);
 
 #if 0
 /* It is perfectly possible to remove brakpoints while the taget is running */
@@ -1338,7 +1338,7 @@ static int cortex_a8_handle_target_request(void *priv)
 
 static int cortex_a8_examine(struct target_s *target)
 {
-	struct cortex_a8_common_s *cortex_a8 = target_to_cortex_a8(target);
+	struct cortex_a8_common *cortex_a8 = target_to_cortex_a8(target);
 	struct armv7a_common *armv7a = &amp;cortex_a8-&gt;armv7a_common;
 	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 	int i;
@@ -1451,7 +1451,7 @@ static int cortex_a8_init_target(struct command_context_s *cmd_ctx,
 }
 
 int cortex_a8_init_arch_info(target_t *target,
-		cortex_a8_common_t *cortex_a8, struct jtag_tap *tap)
+		struct cortex_a8_common *cortex_a8, struct jtag_tap *tap)
 {
 	armv4_5_common_t *armv4_5;
 	struct armv7a_common *armv7a;
@@ -1460,7 +1460,7 @@ int cortex_a8_init_arch_info(target_t *target,
 	armv4_5 = &amp;armv7a-&gt;armv4_5_common;
 	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
-	/* Setup cortex_a8_common_t */
+	/* Setup struct cortex_a8_common */
 	cortex_a8-&gt;common_magic = CORTEX_A8_COMMON_MAGIC;
 	armv4_5-&gt;arch_info = armv7a;
 
@@ -1519,7 +1519,7 @@ LOG_DEBUG(&quot; &quot;);
 
 static int cortex_a8_target_create(struct target_s *target, Jim_Interp *interp)
 {
-	cortex_a8_common_t *cortex_a8 = calloc(1, sizeof(cortex_a8_common_t));
+	struct cortex_a8_common *cortex_a8 = calloc(1, sizeof(struct cortex_a8_common));
 
 	cortex_a8_init_arch_info(target, cortex_a8, target-&gt;tap);
 
diff --git a/src/target/cortex_a8.h b/src/target/cortex_a8.h
index 8216ffb..131cddb 100644
--- a/src/target/cortex_a8.h
+++ b/src/target/cortex_a8.h
@@ -100,7 +100,7 @@ typedef struct  cortex_a8_wrp_s
 	uint8_t 	WRPn;
 } cortex_a8_wrp_t;
 
-typedef struct cortex_a8_common_s
+struct cortex_a8_common
 {
 	int common_magic;
 	struct arm_jtag jtag_info;
@@ -134,16 +134,16 @@ typedef struct cortex_a8_common_s
 	int fast_reg_read;
 
 	struct armv7a_common armv7a_common;
-} cortex_a8_common_t;
+};
 
-static inline struct cortex_a8_common_s *
+static inline struct cortex_a8_common *
 target_to_cortex_a8(struct target_s *target)
 {
-	return container_of(target-&gt;arch_info, struct cortex_a8_common_s,
+	return container_of(target-&gt;arch_info, struct cortex_a8_common,
 			armv7a_common.armv4_5_common);
 }
 
 int cortex_a8_init_arch_info(target_t *target,
-		cortex_a8_common_t *cortex_a8, struct jtag_tap *tap);
+		struct cortex_a8_common *cortex_a8, struct jtag_tap *tap);
 
 #endif /* CORTEX_A8_H */

commit 72b421418f315cb54a01ba4d249082f989d5154a
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:42:06 2009 -0800

    watchpoint_t -&gt; struct watchpoint
    
    Remove misleading typedef and redundant suffix from struct watchpoint.

diff --git a/src/target/arm11.c b/src/target/arm11.c
index e5794b8..5e96b3e 100644
--- a/src/target/arm11.c
+++ b/src/target/arm11.c
@@ -1596,7 +1596,7 @@ static int arm11_remove_breakpoint(struct target_s *target,
 }
 
 static int arm11_add_watchpoint(struct target_s *target,
-		watchpoint_t *watchpoint)
+		struct watchpoint *watchpoint)
 {
 	FNC_INFO_NOTIMPLEMENTED;
 
@@ -1604,7 +1604,7 @@ static int arm11_add_watchpoint(struct target_s *target,
 }
 
 static int arm11_remove_watchpoint(struct target_s *target,
-		watchpoint_t *watchpoint)
+		struct watchpoint *watchpoint)
 {
 	FNC_INFO_NOTIMPLEMENTED;
 
diff --git a/src/target/arm7_9_common.c b/src/target/arm7_9_common.c
index 1cd3456..893c39d 100644
--- a/src/target/arm7_9_common.c
+++ b/src/target/arm7_9_common.c
@@ -520,7 +520,7 @@ int arm7_9_remove_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
  * @return Error status if watchpoint set fails or the result of executing the
  *         JTAG queue
  */
-int arm7_9_set_watchpoint(struct target_s *target, watchpoint_t *watchpoint)
+int arm7_9_set_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
 {
 	int retval = ERROR_OK;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
@@ -591,7 +591,7 @@ int arm7_9_set_watchpoint(struct target_s *target, watchpoint_t *watchpoint)
  * @return Error status while trying to unset the watchpoint or the result of
  *         executing the JTAG queue
  */
-int arm7_9_unset_watchpoint(struct target_s *target, watchpoint_t *watchpoint)
+int arm7_9_unset_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
 {
 	int retval = ERROR_OK;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
@@ -639,7 +639,7 @@ int arm7_9_unset_watchpoint(struct target_s *target, watchpoint_t *watchpoint)
  * @param watchpoint Pointer to the watchpoint to be added
  * @return Error status while trying to add the watchpoint
  */
-int arm7_9_add_watchpoint(struct target_s *target, watchpoint_t *watchpoint)
+int arm7_9_add_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 
@@ -672,7 +672,7 @@ int arm7_9_add_watchpoint(struct target_s *target, watchpoint_t *watchpoint)
  * @param watchpoint Pointer to the watchpoint to be removed
  * @return Result of trying to unset the watchpoint
  */
-int arm7_9_remove_watchpoint(struct target_s *target, watchpoint_t *watchpoint)
+int arm7_9_remove_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
 {
 	int retval = ERROR_OK;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
@@ -1770,7 +1770,7 @@ int arm7_9_restart_core(struct target_s *target)
  */
 void arm7_9_enable_watchpoints(struct target_s *target)
 {
-	watchpoint_t *watchpoint = target-&gt;watchpoints;
+	struct watchpoint *watchpoint = target-&gt;watchpoints;
 
 	while (watchpoint)
 	{
diff --git a/src/target/arm7_9_common.h b/src/target/arm7_9_common.h
index ca73997..0cd6bf5 100644
--- a/src/target/arm7_9_common.h
+++ b/src/target/arm7_9_common.h
@@ -145,8 +145,8 @@ int arm7_9_run_algorithm(struct target_s *target, int num_mem_params, struct mem
 
 int arm7_9_add_breakpoint(struct target_s *target, breakpoint_t *breakpoint);
 int arm7_9_remove_breakpoint(struct target_s *target, breakpoint_t *breakpoint);
-int arm7_9_add_watchpoint(struct target_s *target, watchpoint_t *watchpoint);
-int arm7_9_remove_watchpoint(struct target_s *target, watchpoint_t *watchpoint);
+int arm7_9_add_watchpoint(struct target_s *target, struct watchpoint *watchpoint);
+int arm7_9_remove_watchpoint(struct target_s *target, struct watchpoint *watchpoint);
 
 void arm7_9_enable_eice_step(target_t *target, uint32_t next_pc);
 void arm7_9_disable_eice_step(target_t *target);
diff --git a/src/target/breakpoints.c b/src/target/breakpoints.c
index dd672b9..08008c2 100644
--- a/src/target/breakpoints.c
+++ b/src/target/breakpoints.c
@@ -181,8 +181,8 @@ breakpoint_t* breakpoint_find(target_t *target, uint32_t address)
 int watchpoint_add(target_t *target, uint32_t address, uint32_t length,
 		enum watchpoint_rw rw, uint32_t value, uint32_t mask)
 {
-	watchpoint_t *watchpoint = target-&gt;watchpoints;
-	watchpoint_t **watchpoint_p = &amp;target-&gt;watchpoints;
+	struct watchpoint *watchpoint = target-&gt;watchpoints;
+	struct watchpoint **watchpoint_p = &amp;target-&gt;watchpoints;
 	int retval;
 	char *reason;
 
@@ -206,7 +206,7 @@ int watchpoint_add(target_t *target, uint32_t address, uint32_t length,
 		watchpoint = watchpoint-&gt;next;
 	}
 
-	(*watchpoint_p) = calloc(1, sizeof(watchpoint_t));
+	(*watchpoint_p) = calloc(1, sizeof(struct watchpoint));
 	(*watchpoint_p)-&gt;address = address;
 	(*watchpoint_p)-&gt;length = length;
 	(*watchpoint_p)-&gt;value = value;
@@ -244,10 +244,10 @@ bye:
 	return ERROR_OK;
 }
 
-static void watchpoint_free(target_t *target, watchpoint_t *watchpoint_remove)
+static void watchpoint_free(target_t *target, struct watchpoint *watchpoint_remove)
 {
-	watchpoint_t *watchpoint = target-&gt;watchpoints;
-	watchpoint_t **watchpoint_p = &amp;target-&gt;watchpoints;
+	struct watchpoint *watchpoint = target-&gt;watchpoints;
+	struct watchpoint **watchpoint_p = &amp;target-&gt;watchpoints;
 
 	while (watchpoint)
 	{
@@ -267,8 +267,8 @@ static void watchpoint_free(target_t *target, watchpoint_t *watchpoint_remove)
 
 void watchpoint_remove(target_t *target, uint32_t address)
 {
-	watchpoint_t *watchpoint = target-&gt;watchpoints;
-	watchpoint_t **watchpoint_p = &amp;target-&gt;watchpoints;
+	struct watchpoint *watchpoint = target-&gt;watchpoints;
+	struct watchpoint **watchpoint_p = &amp;target-&gt;watchpoints;
 
 	while (watchpoint)
 	{
@@ -290,7 +290,7 @@ void watchpoint_remove(target_t *target, uint32_t address)
 
 void watchpoint_clear_target(target_t *target)
 {
-	watchpoint_t *watchpoint;
+	struct watchpoint *watchpoint;
 	LOG_DEBUG(&quot;Delete all watchpoints for target: %s&quot;, target_get_name( target ));
 	while ((watchpoint = target-&gt;watchpoints) != NULL)
 	{
diff --git a/src/target/breakpoints.h b/src/target/breakpoints.h
index 781c91b..57c06c7 100644
--- a/src/target/breakpoints.h
+++ b/src/target/breakpoints.h
@@ -46,7 +46,7 @@ typedef struct breakpoint_s
 	int unique_id;
 } breakpoint_t;
 
-typedef struct watchpoint_s
+struct watchpoint
 {
 	uint32_t address;
 	uint32_t length;
@@ -54,9 +54,9 @@ typedef struct watchpoint_s
 	uint32_t value;
 	enum watchpoint_rw rw;
 	int set;
-	struct watchpoint_s *next;
+	struct watchpoint *next;
 	int unique_id;
-} watchpoint_t;
+};
 
 void breakpoint_clear_target(struct target_s *target);
 int breakpoint_add(struct target_s *target,
diff --git a/src/target/cortex_m3.c b/src/target/cortex_m3.c
index caeeac7..6f64714 100644
--- a/src/target/cortex_m3.c
+++ b/src/target/cortex_m3.c
@@ -1032,7 +1032,7 @@ cortex_m3_remove_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
 }
 
 static int
-cortex_m3_set_watchpoint(struct target_s *target, watchpoint_t *watchpoint)
+cortex_m3_set_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
 {
 	int dwt_num = 0;
 	uint32_t mask, temp;
@@ -1097,7 +1097,7 @@ cortex_m3_set_watchpoint(struct target_s *target, watchpoint_t *watchpoint)
 }
 
 static int
-cortex_m3_unset_watchpoint(struct target_s *target, watchpoint_t *watchpoint)
+cortex_m3_unset_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
 {
 	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
 	cortex_m3_dwt_comparator_t *comparator;
@@ -1134,7 +1134,7 @@ cortex_m3_unset_watchpoint(struct target_s *target, watchpoint_t *watchpoint)
 }
 
 static int
-cortex_m3_add_watchpoint(struct target_s *target, watchpoint_t *watchpoint)
+cortex_m3_add_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
 {
 	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
 
@@ -1192,7 +1192,7 @@ cortex_m3_add_watchpoint(struct target_s *target, watchpoint_t *watchpoint)
 }
 
 static int
-cortex_m3_remove_watchpoint(struct target_s *target, watchpoint_t *watchpoint)
+cortex_m3_remove_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
 {
 	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
 
@@ -1216,7 +1216,7 @@ cortex_m3_remove_watchpoint(struct target_s *target, watchpoint_t *watchpoint)
 
 static void cortex_m3_enable_watchpoints(struct target_s *target)
 {
-	watchpoint_t *watchpoint = target-&gt;watchpoints;
+	struct watchpoint *watchpoint = target-&gt;watchpoints;
 
 	/* set any pending watchpoints */
 	while (watchpoint)
diff --git a/src/target/mips_m4k.c b/src/target/mips_m4k.c
index 909745a..0fc32ab 100644
--- a/src/target/mips_m4k.c
+++ b/src/target/mips_m4k.c
@@ -699,7 +699,7 @@ int mips_m4k_remove_breakpoint(struct target_s *target, breakpoint_t *breakpoint
 	return ERROR_OK;
 }
 
-int mips_m4k_set_watchpoint(struct target_s *target, watchpoint_t *watchpoint)
+int mips_m4k_set_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
 {
 	mips32_common_t *mips32 = target-&gt;arch_info;
 	mips32_comparator_t * comparator_list = mips32-&gt;data_break_list;
@@ -767,7 +767,7 @@ int mips_m4k_set_watchpoint(struct target_s *target, watchpoint_t *watchpoint)
 	return ERROR_OK;
 }
 
-int mips_m4k_unset_watchpoint(struct target_s *target, watchpoint_t *watchpoint)
+int mips_m4k_unset_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
 {
 	/* get pointers to arch-specific information */
 	mips32_common_t *mips32 = target-&gt;arch_info;
@@ -793,7 +793,7 @@ int mips_m4k_unset_watchpoint(struct target_s *target, watchpoint_t *watchpoint)
 	return ERROR_OK;
 }
 
-int mips_m4k_add_watchpoint(struct target_s *target, watchpoint_t *watchpoint)
+int mips_m4k_add_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
 {
 	mips32_common_t *mips32 = target-&gt;arch_info;
 
@@ -809,7 +809,7 @@ int mips_m4k_add_watchpoint(struct target_s *target, watchpoint_t *watchpoint)
 	return ERROR_OK;
 }
 
-int mips_m4k_remove_watchpoint(struct target_s *target, watchpoint_t *watchpoint)
+int mips_m4k_remove_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
 {
 	/* get pointers to arch-specific information */
 	mips32_common_t *mips32 = target-&gt;arch_info;
@@ -832,7 +832,7 @@ int mips_m4k_remove_watchpoint(struct target_s *target, watchpoint_t *watchpoint
 
 void mips_m4k_enable_watchpoints(struct target_s *target)
 {
-	watchpoint_t *watchpoint = target-&gt;watchpoints;
+	struct watchpoint *watchpoint = target-&gt;watchpoints;
 
 	/* set any pending watchpoints */
 	while (watchpoint)
diff --git a/src/target/mips_m4k.h b/src/target/mips_m4k.h
index e11f06a..3eddc3f 100644
--- a/src/target/mips_m4k.h
+++ b/src/target/mips_m4k.h
@@ -45,9 +45,9 @@ int mips_m4k_add_breakpoint(struct target_s *target, breakpoint_t *bp);
 int mips_m4k_remove_breakpoint(struct target_s *target, breakpoint_t *bp);
 
 void mips_m4k_enable_watchpoints(struct target_s *target);
-int mips_m4k_set_watchpoint(struct target_s *target, watchpoint_t *wp);
-int mips_m4k_unset_watchpoint(struct target_s *target, watchpoint_t *wp);
-int mips_m4k_add_watchpoint(struct target_s *target, watchpoint_t *wp);
-int mips_m4k_remove_watchpoint(struct target_s *target, watchpoint_t *wp);
+int mips_m4k_set_watchpoint(struct target_s *target, struct watchpoint *wp);
+int mips_m4k_unset_watchpoint(struct target_s *target, struct watchpoint *wp);
+int mips_m4k_add_watchpoint(struct target_s *target, struct watchpoint *wp);
+int mips_m4k_remove_watchpoint(struct target_s *target, struct watchpoint *wp);
 
 #endif	/*MIPS_M4K_H*/
diff --git a/src/target/target.c b/src/target/target.c
index f56fbc4..e8f91de 100644
--- a/src/target/target.c
+++ b/src/target/target.c
@@ -611,12 +611,12 @@ int target_remove_breakpoint(struct target_s *target,
 }
 
 int target_add_watchpoint(struct target_s *target,
-		struct watchpoint_s *watchpoint)
+		struct watchpoint *watchpoint)
 {
 	return target-&gt;type-&gt;add_watchpoint(target, watchpoint);
 }
 int target_remove_watchpoint(struct target_s *target,
-		struct watchpoint_s *watchpoint)
+		struct watchpoint *watchpoint)
 {
 	return target-&gt;type-&gt;remove_watchpoint(target, watchpoint);
 }
@@ -2797,7 +2797,7 @@ COMMAND_HANDLER(handle_wp_command)
 
 	if (argc == 0)
 	{
-		watchpoint_t *watchpoint = target-&gt;watchpoints;
+		struct watchpoint *watchpoint = target-&gt;watchpoints;
 
 		while (watchpoint)
 		{
diff --git a/src/target/target.h b/src/target/target.h
index 1e5639d..064a954 100644
--- a/src/target/target.h
+++ b/src/target/target.h
@@ -156,7 +156,7 @@ typedef struct target_s
 	enum target_state state;			/* the current backend-state (running, halted, ...) */
 	struct reg_cache_s *reg_cache;		/* the first register cache of the target (core regs) */
 	struct breakpoint_s *breakpoints;	/* list of breakpoints */
-	struct watchpoint_s *watchpoints;	/* list of watchpoints */
+	struct watchpoint *watchpoints;	/* list of watchpoints */
 	struct trace_s *trace_info;			/* generic trace information */
 	struct debug_msg_receiver_s *dbgmsg;/* list of debug message receivers */
 	uint32_t dbg_msg_enabled;				/* debug message status */
@@ -330,14 +330,14 @@ int target_remove_breakpoint(struct target_s *target,
  * This routine is a wrapper for target-&gt;type-&gt;add_watchpoint.
  */
 int target_add_watchpoint(struct target_s *target,
-		struct watchpoint_s *watchpoint);
+		struct watchpoint *watchpoint);
 /**
  * Remove the @a watchpoint for @a target.
  *
  * This routine is a wrapper for target-&gt;type-&gt;remove_watchpoint.
  */
 int target_remove_watchpoint(struct target_s *target,
-		struct watchpoint_s *watchpoint);
+		struct watchpoint *watchpoint);
 
 /**
  * Obtain the registers for GDB.
diff --git a/src/target/target_type.h b/src/target/target_type.h
index ee76ff4..21d7295 100644
--- a/src/target/target_type.h
+++ b/src/target/target_type.h
@@ -137,11 +137,11 @@ struct target_type_s
 	 * However, this method can be invoked on unresponsive targets.
 	 */
 	int (*remove_breakpoint)(struct target_s *target, breakpoint_t *breakpoint);
-	int (*add_watchpoint)(struct target_s *target, watchpoint_t *watchpoint);
+	int (*add_watchpoint)(struct target_s *target, struct watchpoint *watchpoint);
 	/* remove watchpoint. hw will only be updated if the target is currently halted.
 	 * However, this method can be invoked on unresponsive targets.
 	 */
-	int (*remove_watchpoint)(struct target_s *target, watchpoint_t *watchpoint);
+	int (*remove_watchpoint)(struct target_s *target, struct watchpoint *watchpoint);
 
 	/* target algorithm support */
 	int (*run_algorithm_imp)(struct target_s *target, int num_mem_params, struct mem_param *mem_params, int num_reg_params, struct reg_param *reg_param, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info);
diff --git a/src/target/xscale.c b/src/target/xscale.c
index 3540f6a..a04bf42 100644
--- a/src/target/xscale.c
+++ b/src/target/xscale.c
@@ -64,7 +64,7 @@ static int xscale_restore_context(target_t *);
 static int xscale_get_reg(reg_t *reg);
 static int xscale_set_reg(reg_t *reg, uint8_t *buf);
 static int xscale_set_breakpoint(struct target_s *, breakpoint_t *);
-static int xscale_set_watchpoint(struct target_s *, watchpoint_t *);
+static int xscale_set_watchpoint(struct target_s *, struct watchpoint *);
 static int xscale_unset_breakpoint(struct target_s *, breakpoint_t *);
 static int xscale_read_trace(target_t *);
 
@@ -1163,7 +1163,7 @@ static int xscale_disable_single_step(struct target_s *target)
 
 static void xscale_enable_watchpoints(struct target_s *target)
 {
-	watchpoint_t *watchpoint = target-&gt;watchpoints;
+	struct watchpoint *watchpoint = target-&gt;watchpoints;
 
 	while (watchpoint)
 	{
@@ -2226,7 +2226,7 @@ static int xscale_remove_breakpoint(struct target_s *target, breakpoint_t *break
 }
 
 static int xscale_set_watchpoint(struct target_s *target,
-		watchpoint_t *watchpoint)
+		struct watchpoint *watchpoint)
 {
 	struct xscale_common_s *xscale = target_to_xscale(target);
 	uint8_t enable = 0;
@@ -2282,7 +2282,7 @@ static int xscale_set_watchpoint(struct target_s *target,
 }
 
 static int xscale_add_watchpoint(struct target_s *target,
-		watchpoint_t *watchpoint)
+		struct watchpoint *watchpoint)
 {
 	struct xscale_common_s *xscale = target_to_xscale(target);
 
@@ -2308,7 +2308,7 @@ static int xscale_add_watchpoint(struct target_s *target,
 }
 
 static int xscale_unset_watchpoint(struct target_s *target,
-		watchpoint_t *watchpoint)
+		struct watchpoint *watchpoint)
 {
 	struct xscale_common_s *xscale = target_to_xscale(target);
 	reg_t *dbcon = &amp;xscale-&gt;reg_cache-&gt;reg_list[XSCALE_DBCON];
@@ -2343,7 +2343,7 @@ static int xscale_unset_watchpoint(struct target_s *target,
 	return ERROR_OK;
 }
 
-static int xscale_remove_watchpoint(struct target_s *target, watchpoint_t *watchpoint)
+static int xscale_remove_watchpoint(struct target_s *target, struct watchpoint *watchpoint)
 {
 	struct xscale_common_s *xscale = target_to_xscale(target);
 

commit e7f65c5a116802c4e510fe212b26e9a020de0b3e
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:41:52 2009 -0800

    avr_common_t -&gt; struct avr_common
    
    Remove misleading typedef and redundant suffix from struct avr_common.

diff --git a/src/flash/avrf.c b/src/flash/avrf.c
index 8dd4339..91aedb8 100644
--- a/src/flash/avrf.c
+++ b/src/flash/avrf.c
@@ -70,7 +70,7 @@ int mcu_write_dr_u32(struct jtag_tap *tap, uint32_t *ir_in, uint32_t ir_out, int
 int mcu_execute_queue(void);
 
 /* avr program functions */
-static int avr_jtag_reset(avr_common_t *avr, uint32_t reset)
+static int avr_jtag_reset(struct avr_common *avr, uint32_t reset)
 {
 	avr_jtag_sendinstr(avr-&gt;jtag_info.tap, NULL, AVR_JTAG_INS_AVR_RESET);
 	avr_jtag_senddat(avr-&gt;jtag_info.tap, NULL, reset ,AVR_JTAG_REG_Reset_Len);
@@ -78,7 +78,7 @@ static int avr_jtag_reset(avr_common_t *avr, uint32_t reset)
 	return ERROR_OK;
 }
 
-static int avr_jtag_read_jtagid(avr_common_t *avr, uint32_t *id)
+static int avr_jtag_read_jtagid(struct avr_common *avr, uint32_t *id)
 {
 	avr_jtag_sendinstr(avr-&gt;jtag_info.tap, NULL, AVR_JTAG_INS_IDCODE);
 	avr_jtag_senddat(avr-&gt;jtag_info.tap, id, 0, AVR_JTAG_REG_JTAGID_Len);
@@ -86,7 +86,7 @@ static int avr_jtag_read_jtagid(avr_common_t *avr, uint32_t *id)
 	return ERROR_OK;
 }
 
-static int avr_jtagprg_enterprogmode(avr_common_t *avr)
+static int avr_jtagprg_enterprogmode(struct avr_common *avr)
 {
 	avr_jtag_reset(avr, 1);
 
@@ -96,7 +96,7 @@ static int avr_jtagprg_enterprogmode(avr_common_t *avr)
 	return ERROR_OK;
 }
 
-static int avr_jtagprg_leaveprogmode(avr_common_t *avr)
+static int avr_jtagprg_leaveprogmode(struct avr_common *avr)
 {
 	avr_jtag_sendinstr(avr-&gt;jtag_info.tap, NULL, AVR_JTAG_INS_PROG_COMMANDS);
 	avr_jtag_senddat(avr-&gt;jtag_info.tap, NULL, 0x2300, AVR_JTAG_REG_ProgrammingCommand_Len);
@@ -110,7 +110,7 @@ static int avr_jtagprg_leaveprogmode(avr_common_t *avr)
 	return ERROR_OK;
 }
 
-static int avr_jtagprg_chiperase(avr_common_t *avr)
+static int avr_jtagprg_chiperase(struct avr_common *avr)
 {
 	uint32_t poll_value;
 
@@ -133,7 +133,7 @@ static int avr_jtagprg_chiperase(avr_common_t *avr)
 	return ERROR_OK;
 }
 
-static int avr_jtagprg_writeflashpage(avr_common_t *avr, uint8_t *page_buf, uint32_t buf_size, uint32_t addr, uint32_t page_size)
+static int avr_jtagprg_writeflashpage(struct avr_common *avr, uint8_t *page_buf, uint32_t buf_size, uint32_t addr, uint32_t page_size)
 {
 	uint32_t i, poll_value;
 
@@ -213,7 +213,7 @@ static int avrf_protect(struct flash_bank_s *bank, int set, int first, int last)
 static int avrf_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
 	target_t *target = bank-&gt;target;
-	avr_common_t *avr = target-&gt;arch_info;
+	struct avr_common *avr = target-&gt;arch_info;
 	uint32_t cur_size, cur_buffer_size, page_size;
 
 	if (bank-&gt;target-&gt;state != TARGET_HALTED)
@@ -265,7 +265,7 @@ static int avrf_probe(struct flash_bank_s *bank)
 {
 	target_t *target = bank-&gt;target;
 	struct avrf_flash_bank *avrf_info = bank-&gt;driver_priv;
-	avr_common_t *avr = target-&gt;arch_info;
+	struct avr_common *avr = target-&gt;arch_info;
 	struct avrf_type *avr_info = NULL;
 	int i;
 	uint32_t device_id;
@@ -346,7 +346,7 @@ static int avrf_protect_check(struct flash_bank_s *bank)
 static int avrf_info(struct flash_bank_s *bank, char *buf, int buf_size)
 {
 	target_t *target = bank-&gt;target;
-	avr_common_t *avr = target-&gt;arch_info;
+	struct avr_common *avr = target-&gt;arch_info;
 	struct avrf_type *avr_info = NULL;
 	int i;
 	uint32_t device_id;
@@ -397,7 +397,7 @@ static int avrf_info(struct flash_bank_s *bank, char *buf, int buf_size)
 static int avrf_mass_erase(struct flash_bank_s *bank)
 {
 	target_t *target = bank-&gt;target;
-	avr_common_t *avr = target-&gt;arch_info;
+	struct avr_common *avr = target-&gt;arch_info;
 
 	if (target-&gt;state != TARGET_HALTED)
 	{
diff --git a/src/target/avrt.c b/src/target/avrt.c
index 4a1024f..d7c7623 100644
--- a/src/target/avrt.c
+++ b/src/target/avrt.c
@@ -104,7 +104,7 @@ int avr_register_commands(struct command_context_s *cmd_ctx)
 
 int avr_target_create(struct target_s *target, Jim_Interp *interp)
 {
-	avr_common_t *avr = calloc(1, sizeof(avr_common_t));
+	struct avr_common *avr = calloc(1, sizeof(struct avr_common));
 
 	avr-&gt;jtag_info.tap = target-&gt;tap;
 	target-&gt;arch_info = avr;
diff --git a/src/target/avrt.h b/src/target/avrt.h
index 54722ac..145f836 100644
--- a/src/target/avrt.h
+++ b/src/target/avrt.h
@@ -27,9 +27,9 @@ struct mcu_jtag
 	struct jtag_tap *tap;
 };
 
-typedef struct avr_common_s
+struct avr_common
 {
 	struct mcu_jtag jtag_info;
-} avr_common_t;
+};
 
 #endif /* AVRT_H */

commit 4bc80e5a65dde09ca795e50e77bcfe77b8dd444f
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:41:49 2009 -0800

    mcu_jtag_t -&gt; struct mcu_jtag
    
    Remove misleading typedef and redundant suffix from struct mcu_jtag.

diff --git a/src/target/avrt.h b/src/target/avrt.h
index 37ea8e3..54722ac 100644
--- a/src/target/avrt.h
+++ b/src/target/avrt.h
@@ -22,14 +22,14 @@
 
 #include &quot;jtag.h&quot;
 
-typedef struct mcu_jtag_s
+struct mcu_jtag
 {
 	struct jtag_tap *tap;
-} mcu_jtag_t;
+};
 
 typedef struct avr_common_s
 {
-	mcu_jtag_t jtag_info;
+	struct mcu_jtag jtag_info;
 } avr_common_t;
 
 #endif /* AVRT_H */

commit 94f5ed90f1832e81803713f4364de586a69247d4
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:41:46 2009 -0800

    armv7m_core_reg_t -&gt; struct armv7m_core_reg
    
    Remove misleading typedef and redundant suffix from struct armv7m_core_reg.

diff --git a/src/target/armv7m.c b/src/target/armv7m.c
index 3ce6d7a..9319bf2 100644
--- a/src/target/armv7m.c
+++ b/src/target/armv7m.c
@@ -181,7 +181,7 @@ char *armv7m_exception_string(int number)
 static int armv7m_get_core_reg(reg_t *reg)
 {
 	int retval;
-	armv7m_core_reg_t *armv7m_reg = reg-&gt;arch_info;
+	struct armv7m_core_reg *armv7m_reg = reg-&gt;arch_info;
 	target_t *target = armv7m_reg-&gt;target;
 	struct armv7m_common *armv7m = target_to_armv7m(target);
 
@@ -197,7 +197,7 @@ static int armv7m_get_core_reg(reg_t *reg)
 
 static int armv7m_set_core_reg(reg_t *reg, uint8_t *buf)
 {
-	armv7m_core_reg_t *armv7m_reg = reg-&gt;arch_info;
+	struct armv7m_core_reg *armv7m_reg = reg-&gt;arch_info;
 	target_t *target = armv7m_reg-&gt;target;
 	uint32_t value = buf_get_u32(buf, 0, 32);
 
@@ -217,7 +217,7 @@ static int armv7m_read_core_reg(struct target_s *target, int num)
 {
 	uint32_t reg_value;
 	int retval;
-	armv7m_core_reg_t * armv7m_core_reg;
+	struct armv7m_core_reg * armv7m_core_reg;
 	struct armv7m_common *armv7m = target_to_armv7m(target);
 
 	if ((num &lt; 0) || (num &gt;= ARMV7M_NUM_REGS))
@@ -236,7 +236,7 @@ static int armv7m_write_core_reg(struct target_s *target, int num)
 {
 	int retval;
 	uint32_t reg_value;
-	armv7m_core_reg_t *armv7m_core_reg;
+	struct armv7m_core_reg *armv7m_core_reg;
 	struct armv7m_common *armv7m = target_to_armv7m(target);
 
 	if ((num &lt; 0) || (num &gt;= ARMV7M_NUM_REGS))
@@ -531,7 +531,7 @@ reg_cache_t *armv7m_build_reg_cache(target_t *target)
 	reg_cache_t **cache_p = register_get_last_cache_p(&amp;target-&gt;reg_cache);
 	reg_cache_t *cache = malloc(sizeof(reg_cache_t));
 	reg_t *reg_list = calloc(num_regs, sizeof(reg_t));
-	armv7m_core_reg_t *arch_info = calloc(num_regs, sizeof(armv7m_core_reg_t));
+	struct armv7m_core_reg *arch_info = calloc(num_regs, sizeof(struct armv7m_core_reg));
 	int i;
 
 	if (armv7m_core_reg_arch_type == -1)
diff --git a/src/target/armv7m.h b/src/target/armv7m.h
index 6e857ee..43ec563 100644
--- a/src/target/armv7m.h
+++ b/src/target/armv7m.h
@@ -126,13 +126,13 @@ struct armv7m_algorithm
 	enum armv7m_mode core_mode;
 };
 
-typedef struct armv7m_core_reg_s
+struct armv7m_core_reg
 {
 	uint32_t num;
 	enum armv7m_regtype type;
 	target_t *target;
 	struct armv7m_common *armv7m_common;
-} armv7m_core_reg_t;
+};
 
 reg_cache_t *armv7m_build_reg_cache(target_t *target);
 enum armv7m_mode armv7m_number_to_mode(int number);

commit 5e43565ab543b1ceff4cc8030434a54ac28dd875
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:41:43 2009 -0800

    armv7m_algorithm_t -&gt; struct armv7m_algorithm
    
    Remove misleading typedef and redundant suffix from struct armv7m_algorithm.

diff --git a/src/flash/lpc2000.c b/src/flash/lpc2000.c
index a2c09d2..31e81b3 100644
--- a/src/flash/lpc2000.c
+++ b/src/flash/lpc2000.c
@@ -242,7 +242,7 @@ static int lpc2000_iap_call(flash_bank_t *bank, int code, uint32_t param_table[5
 	struct mem_param mem_params[2];
 	struct reg_param reg_params[5];
 	struct armv4_5_algorithm armv4_5_info; /* for LPC2000 */
-	armv7m_algorithm_t armv7m_info;   /* for LPC1700 */
+	struct armv7m_algorithm armv7m_info;   /* for LPC1700 */
  	uint32_t status_code;
 	uint32_t iap_entry_point = 0; /* to make compiler happier */
 
diff --git a/src/flash/pic32mx.c b/src/flash/pic32mx.c
index 3248127..01252bb 100644
--- a/src/flash/pic32mx.c
+++ b/src/flash/pic32mx.c
@@ -307,7 +307,7 @@ static int pic32mx_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint3
 	int retval = ERROR_OK;
 #if 0
 	struct pic32mx_flash_bank *pic32mx_info = bank-&gt;driver_priv;
-	armv7m_algorithm_t armv7m_info;
+	struct armv7m_algorithm armv7m_info;
 
 	uint8_t pic32mx_flash_write_code[] = {
 									/* write: */
diff --git a/src/flash/stellaris.c b/src/flash/stellaris.c
index bc5d10a..cdeccbe 100644
--- a/src/flash/stellaris.c
+++ b/src/flash/stellaris.c
@@ -836,7 +836,7 @@ static int stellaris_write_block(struct flash_bank_s *bank, uint8_t *buffer, uin
 	working_area_t *write_algorithm;
 	uint32_t address = bank-&gt;base + offset;
 	struct reg_param reg_params[3];
-	armv7m_algorithm_t armv7m_info;
+	struct armv7m_algorithm armv7m_info;
 	int retval = ERROR_OK;
 
 	LOG_DEBUG(&quot;(bank=%p buffer=%p offset=%08&quot; PRIx32 &quot; wcount=%08&quot; PRIx32 &quot;&quot;,
diff --git a/src/flash/stm32x.c b/src/flash/stm32x.c
index e69fb56..a63ff60 100644
--- a/src/flash/stm32x.c
+++ b/src/flash/stm32x.c
@@ -438,7 +438,7 @@ static int stm32x_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint32
 	working_area_t *source;
 	uint32_t address = bank-&gt;base + offset;
 	struct reg_param reg_params[4];
-	armv7m_algorithm_t armv7m_info;
+	struct armv7m_algorithm armv7m_info;
 	int retval = ERROR_OK;
 
 	uint8_t stm32x_flash_write_code[] = {
diff --git a/src/target/armv7m.c b/src/target/armv7m.c
index 7fb7394..3ce6d7a 100644
--- a/src/target/armv7m.c
+++ b/src/target/armv7m.c
@@ -363,7 +363,7 @@ int armv7m_run_algorithm(struct target_s *target,
 	int timeout_ms, void *arch_info)
 {
 	struct armv7m_common *armv7m = target_to_armv7m(target);
-	armv7m_algorithm_t *armv7m_algorithm_info = arch_info;
+	struct armv7m_algorithm *armv7m_algorithm_info = arch_info;
 	enum armv7m_mode core_mode = armv7m-&gt;core_mode;
 	int retval = ERROR_OK;
 	int i;
@@ -589,7 +589,7 @@ int armv7m_checksum_memory(struct target_s *target,
 		uint32_t address, uint32_t count, uint32_t* checksum)
 {
 	working_area_t *crc_algorithm;
-	armv7m_algorithm_t armv7m_info;
+	struct armv7m_algorithm armv7m_info;
 	struct reg_param reg_params[2];
 	int retval;
 
@@ -673,7 +673,7 @@ int armv7m_blank_check_memory(struct target_s *target,
 {
 	working_area_t *erase_check_algorithm;
 	struct reg_param reg_params[3];
-	armv7m_algorithm_t armv7m_info;
+	struct armv7m_algorithm armv7m_info;
 	int retval;
 	uint32_t i;
 
diff --git a/src/target/armv7m.h b/src/target/armv7m.h
index 602bf31..6e857ee 100644
--- a/src/target/armv7m.h
+++ b/src/target/armv7m.h
@@ -119,12 +119,12 @@ target_to_armv7m(struct target_s *target)
 	return target-&gt;arch_info;
 }
 
-typedef struct armv7m_algorithm_s
+struct armv7m_algorithm
 {
 	int common_magic;
 
 	enum armv7m_mode core_mode;
-} armv7m_algorithm_t;
+};
 
 typedef struct armv7m_core_reg_s
 {

commit e8a6e3b2f4e1b0f3cccfa01c486fbdd952842801
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:41:39 2009 -0800

    armv7m_common_t -&gt; struct armv7m_common
    
    Remove misleading typedef and redundant suffix from struct armv7m_common.

diff --git a/src/target/armv7m.c b/src/target/armv7m.c
index 62be15e..7fb7394 100644
--- a/src/target/armv7m.c
+++ b/src/target/armv7m.c
@@ -136,7 +136,7 @@ static int armv7m_core_reg_arch_type = -1;
 int armv7m_restore_context(target_t *target)
 {
 	int i;
-	struct armv7m_common_s *armv7m = target_to_armv7m(target);
+	struct armv7m_common *armv7m = target_to_armv7m(target);
 
 	LOG_DEBUG(&quot; &quot;);
 
@@ -183,7 +183,7 @@ static int armv7m_get_core_reg(reg_t *reg)
 	int retval;
 	armv7m_core_reg_t *armv7m_reg = reg-&gt;arch_info;
 	target_t *target = armv7m_reg-&gt;target;
-	struct armv7m_common_s *armv7m = target_to_armv7m(target);
+	struct armv7m_common *armv7m = target_to_armv7m(target);
 
 	if (target-&gt;state != TARGET_HALTED)
 	{
@@ -218,7 +218,7 @@ static int armv7m_read_core_reg(struct target_s *target, int num)
 	uint32_t reg_value;
 	int retval;
 	armv7m_core_reg_t * armv7m_core_reg;
-	struct armv7m_common_s *armv7m = target_to_armv7m(target);
+	struct armv7m_common *armv7m = target_to_armv7m(target);
 
 	if ((num &lt; 0) || (num &gt;= ARMV7M_NUM_REGS))
 		return ERROR_INVALID_ARGUMENTS;
@@ -237,7 +237,7 @@ static int armv7m_write_core_reg(struct target_s *target, int num)
 	int retval;
 	uint32_t reg_value;
 	armv7m_core_reg_t *armv7m_core_reg;
-	struct armv7m_common_s *armv7m = target_to_armv7m(target);
+	struct armv7m_common *armv7m = target_to_armv7m(target);
 
 	if ((num &lt; 0) || (num &gt;= ARMV7M_NUM_REGS))
 		return ERROR_INVALID_ARGUMENTS;
@@ -261,7 +261,7 @@ static int armv7m_write_core_reg(struct target_s *target, int num)
 /** Invalidates cache of core registers set up by armv7m_build_reg_cache(). */
 int armv7m_invalidate_core_regs(target_t *target)
 {
-	struct armv7m_common_s *armv7m = target_to_armv7m(target);
+	struct armv7m_common *armv7m = target_to_armv7m(target);
 	int i;
 
 	for (i = 0; i &lt; armv7m-&gt;core_cache-&gt;num_regs; i++)
@@ -281,7 +281,7 @@ int armv7m_invalidate_core_regs(target_t *target)
  */
 int armv7m_get_gdb_reg_list(target_t *target, reg_t **reg_list[], int *reg_list_size)
 {
-	struct armv7m_common_s *armv7m = target_to_armv7m(target);
+	struct armv7m_common *armv7m = target_to_armv7m(target);
 	int i;
 
 	*reg_list_size = 26;
@@ -321,7 +321,7 @@ int armv7m_get_gdb_reg_list(target_t *target, reg_t **reg_list[], int *reg_list_
 }
 
 /* run to exit point. return error if exit point was not reached. */
-static int armv7m_run_and_wait(struct target_s *target, uint32_t entry_point, int timeout_ms, uint32_t exit_point, armv7m_common_t *armv7m)
+static int armv7m_run_and_wait(struct target_s *target, uint32_t entry_point, int timeout_ms, uint32_t exit_point, struct armv7m_common *armv7m)
 {
 	uint32_t pc;
 	int retval;
@@ -362,7 +362,7 @@ int armv7m_run_algorithm(struct target_s *target,
 	uint32_t entry_point, uint32_t exit_point,
 	int timeout_ms, void *arch_info)
 {
-	struct armv7m_common_s *armv7m = target_to_armv7m(target);
+	struct armv7m_common *armv7m = target_to_armv7m(target);
 	armv7m_algorithm_t *armv7m_algorithm_info = arch_info;
 	enum armv7m_mode core_mode = armv7m-&gt;core_mode;
 	int retval = ERROR_OK;
@@ -503,7 +503,7 @@ int armv7m_run_algorithm(struct target_s *target,
 /** Logs summary of ARMv7-M state for a halted target. */
 int armv7m_arch_state(struct target_s *target)
 {
-	struct armv7m_common_s *armv7m = target_to_armv7m(target);
+	struct armv7m_common *armv7m = target_to_armv7m(target);
 	uint32_t ctrl, sp;
 
 	ctrl = buf_get_u32(armv7m-&gt;core_cache-&gt;reg_list[ARMV7M_CONTROL].value, 0, 32);
@@ -526,7 +526,7 @@ int armv7m_arch_state(struct target_s *target)
 /** Builds cache of architecturally defined registers.  */
 reg_cache_t *armv7m_build_reg_cache(target_t *target)
 {
-	struct armv7m_common_s *armv7m = target_to_armv7m(target);
+	struct armv7m_common *armv7m = target_to_armv7m(target);
 	int num_regs = ARMV7M_NUM_REGS;
 	reg_cache_t **cache_p = register_get_last_cache_p(&amp;target-&gt;reg_cache);
 	reg_cache_t *cache = malloc(sizeof(reg_cache_t));
@@ -573,7 +573,7 @@ reg_cache_t *armv7m_build_reg_cache(target_t *target)
 }
 
 /** Sets up target as a generic ARMv7-M core */
-int armv7m_init_arch_info(target_t *target, armv7m_common_t *armv7m)
+int armv7m_init_arch_info(target_t *target, struct armv7m_common *armv7m)
 {
 	/* register arch-specific functions */
 
@@ -748,7 +748,7 @@ int armv7m_blank_check_memory(struct target_s *target,
 COMMAND_HANDLER(handle_dap_baseaddr_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
-	struct armv7m_common_s *armv7m = target_to_armv7m(target);
+	struct armv7m_common *armv7m = target_to_armv7m(target);
 	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
 	uint32_t apsel, apselsave, baseaddr;
 	int retval;
@@ -785,7 +785,7 @@ COMMAND_HANDLER(handle_dap_baseaddr_command)
 COMMAND_HANDLER(handle_dap_apid_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
-	struct armv7m_common_s *armv7m = target_to_armv7m(target);
+	struct armv7m_common *armv7m = target_to_armv7m(target);
 	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
 
 	return CALL_COMMAND_HANDLER(dap_apid_command, swjdp);
@@ -794,7 +794,7 @@ COMMAND_HANDLER(handle_dap_apid_command)
 COMMAND_HANDLER(handle_dap_apsel_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
-	struct armv7m_common_s *armv7m = target_to_armv7m(target);
+	struct armv7m_common *armv7m = target_to_armv7m(target);
 	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
 
 	return CALL_COMMAND_HANDLER(dap_apsel_command, swjdp);
@@ -803,7 +803,7 @@ COMMAND_HANDLER(handle_dap_apsel_command)
 COMMAND_HANDLER(handle_dap_memaccess_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
-	struct armv7m_common_s *armv7m = target_to_armv7m(target);
+	struct armv7m_common *armv7m = target_to_armv7m(target);
 	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
 
 	return CALL_COMMAND_HANDLER(dap_memaccess_command, swjdp);
@@ -813,7 +813,7 @@ COMMAND_HANDLER(handle_dap_memaccess_command)
 COMMAND_HANDLER(handle_dap_info_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
-	struct armv7m_common_s *armv7m = target_to_armv7m(target);
+	struct armv7m_common *armv7m = target_to_armv7m(target);
 	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
 	uint32_t apsel;
 
diff --git a/src/target/armv7m.h b/src/target/armv7m.h
index 8e87c77..602bf31 100644
--- a/src/target/armv7m.h
+++ b/src/target/armv7m.h
@@ -91,7 +91,7 @@ enum
 
 #define ARMV7M_COMMON_MAGIC 0x2A452A45
 
-typedef struct armv7m_common_s
+struct armv7m_common
 {
 	int common_magic;
 	reg_cache_t *core_cache;
@@ -111,9 +111,9 @@ typedef struct armv7m_common_s
 
 	void (*pre_restore_context)(target_t *target);
 	void (*post_restore_context)(target_t *target);
-} armv7m_common_t;
+};
 
-static inline struct armv7m_common_s *
+static inline struct armv7m_common *
 target_to_armv7m(struct target_s *target)
 {
 	return target-&gt;arch_info;
@@ -131,7 +131,7 @@ typedef struct armv7m_core_reg_s
 	uint32_t num;
 	enum armv7m_regtype type;
 	target_t *target;
-	armv7m_common_t *armv7m_common;
+	struct armv7m_common *armv7m_common;
 } armv7m_core_reg_t;
 
 reg_cache_t *armv7m_build_reg_cache(target_t *target);
@@ -143,7 +143,7 @@ int armv7m_get_gdb_reg_list(target_t *target,
 		reg_t **reg_list[], int *reg_list_size);
 
 int armv7m_register_commands(struct command_context_s *cmd_ctx);
-int armv7m_init_arch_info(target_t *target, armv7m_common_t *armv7m);
+int armv7m_init_arch_info(target_t *target, struct armv7m_common *armv7m);
 
 int armv7m_run_algorithm(struct target_s *target,
 		int num_mem_params, struct mem_param *mem_params,
diff --git a/src/target/cortex_m3.c b/src/target/cortex_m3.c
index ae71446..caeeac7 100644
--- a/src/target/cortex_m3.c
+++ b/src/target/cortex_m3.c
@@ -259,7 +259,7 @@ static int cortex_m3_examine_debug_reason(target_t *target)
 static int cortex_m3_examine_exception_reason(target_t *target)
 {
 	uint32_t shcsr, except_sr, cfsr = -1, except_ar = -1;
-	struct armv7m_common_s *armv7m = target_to_armv7m(target);
+	struct armv7m_common *armv7m = target_to_armv7m(target);
 	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
 
 	mem_ap_read_u32(swjdp, NVIC_SHCSR, &amp;shcsr);
@@ -310,7 +310,7 @@ static int cortex_m3_debug_entry(target_t *target)
 	uint32_t xPSR;
 	int retval;
 	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
-	struct armv7m_common_s *armv7m = &amp;cortex_m3-&gt;armv7m;
+	struct armv7m_common *armv7m = &amp;cortex_m3-&gt;armv7m;
 	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
 
 	LOG_DEBUG(&quot; &quot;);
@@ -547,7 +547,7 @@ static void cortex_m3_enable_breakpoints(struct target_s *target)
 static int cortex_m3_resume(struct target_s *target, int current,
 		uint32_t address, int handle_breakpoints, int debug_execution)
 {
-	struct armv7m_common_s *armv7m = target_to_armv7m(target);
+	struct armv7m_common *armv7m = target_to_armv7m(target);
 	breakpoint_t *breakpoint = NULL;
 	uint32_t resume_pc;
 
@@ -636,7 +636,7 @@ static int cortex_m3_step(struct target_s *target, int current,
 		uint32_t address, int handle_breakpoints)
 {
 	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
-	struct armv7m_common_s *armv7m = &amp;cortex_m3-&gt;armv7m;
+	struct armv7m_common *armv7m = &amp;cortex_m3-&gt;armv7m;
 	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
 	breakpoint_t *breakpoint = NULL;
 
@@ -1231,7 +1231,7 @@ static int cortex_m3_load_core_reg_u32(struct target_s *target,
 		enum armv7m_regtype type, uint32_t num, uint32_t * value)
 {
 	int retval;
-	struct armv7m_common_s *armv7m = target_to_armv7m(target);
+	struct armv7m_common *armv7m = target_to_armv7m(target);
 	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
 
 	/* NOTE:  we &quot;know&quot; here that the register identifiers used
@@ -1295,7 +1295,7 @@ static int cortex_m3_store_core_reg_u32(struct target_s *target,
 {
 	int retval;
 	uint32_t reg;
-	struct armv7m_common_s *armv7m = target_to_armv7m(target);
+	struct armv7m_common *armv7m = target_to_armv7m(target);
 	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
 
 #ifdef ARMV7_GDB_HACKS
@@ -1370,7 +1370,7 @@ static int cortex_m3_store_core_reg_u32(struct target_s *target,
 static int cortex_m3_read_memory(struct target_s *target, uint32_t address,
 		uint32_t size, uint32_t count, uint8_t *buffer)
 {
-	struct armv7m_common_s *armv7m = target_to_armv7m(target);
+	struct armv7m_common *armv7m = target_to_armv7m(target);
 	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
 	int retval;
 
@@ -1402,7 +1402,7 @@ static int cortex_m3_read_memory(struct target_s *target, uint32_t address,
 static int cortex_m3_write_memory(struct target_s *target, uint32_t address,
 		uint32_t size, uint32_t count, uint8_t *buffer)
 {
-	struct armv7m_common_s *armv7m = target_to_armv7m(target);
+	struct armv7m_common *armv7m = target_to_armv7m(target);
 	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
 	int retval;
 
@@ -1654,7 +1654,7 @@ static int cortex_m3_dcc_read(struct swjdp_common *swjdp, uint8_t *value, uint8_
 static int cortex_m3_target_request_data(target_t *target,
 		uint32_t size, uint8_t *buffer)
 {
-	struct armv7m_common_s *armv7m = target_to_armv7m(target);
+	struct armv7m_common *armv7m = target_to_armv7m(target);
 	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
 	uint8_t data;
 	uint8_t ctrl;
@@ -1674,7 +1674,7 @@ static int cortex_m3_handle_target_request(void *priv)
 	target_t *target = priv;
 	if (!target_was_examined(target))
 		return ERROR_OK;
-	struct armv7m_common_s *armv7m = target_to_armv7m(target);
+	struct armv7m_common *armv7m = target_to_armv7m(target);
 	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
 
 	if (!target-&gt;dbg_msg_enabled)
@@ -1711,7 +1711,7 @@ static int cortex_m3_init_arch_info(target_t *target,
 		cortex_m3_common_t *cortex_m3, struct jtag_tap *tap)
 {
 	int retval;
-	struct armv7m_common_s *armv7m = &amp;cortex_m3-&gt;armv7m;
+	struct armv7m_common *armv7m = &amp;cortex_m3-&gt;armv7m;
 
 	armv7m_init_arch_info(target, armv7m);
 
@@ -1837,7 +1837,7 @@ COMMAND_HANDLER(handle_cortex_m3_vector_catch_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
 	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
-	struct armv7m_common_s *armv7m = &amp;cortex_m3-&gt;armv7m;
+	struct armv7m_common *armv7m = &amp;cortex_m3-&gt;armv7m;
 	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
 	uint32_t demcr = 0;
 	int retval;
diff --git a/src/target/cortex_m3.h b/src/target/cortex_m3.h
index 5b1d5ea..7474049 100644
--- a/src/target/cortex_m3.h
+++ b/src/target/cortex_m3.h
@@ -160,7 +160,7 @@ typedef struct cortex_m3_common_s
 	cortex_m3_dwt_comparator_t *dwt_comparator_list;
 	struct reg_cache_s *dwt_cache;
 
-	armv7m_common_t armv7m;
+	struct armv7m_common armv7m;
 } cortex_m3_common_t;
 
 static inline struct cortex_m3_common_s *

commit 2744a031cb333f4d1c2cd81171cbdafd6c780e1d
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:41:35 2009 -0800

    armv7a_core_reg_t -&gt; struct armv7a_core_reg
    
    Remove misleading typedef and redundant suffix from struct armv7a_core_reg.

diff --git a/src/target/armv7a.c b/src/target/armv7a.c
index 1def12f..582e2e0 100644
--- a/src/target/armv7a.c
+++ b/src/target/armv7a.c
@@ -82,7 +82,7 @@ char* armv7a_state_strings[] =
 	&quot;ARM&quot;, &quot;Thumb&quot;, &quot;Jazelle&quot;, &quot;ThumbEE&quot;
 };
 
-armv7a_core_reg_t armv7a_core_reg_list_arch_info[] =
+struct armv7a_core_reg armv7a_core_reg_list_arch_info[] =
 {
 	{0, ARMV4_5_MODE_ANY, NULL, NULL},
 	{1, ARMV4_5_MODE_ANY, NULL, NULL},
diff --git a/src/target/armv7a.h b/src/target/armv7a.h
index 5a77bef..42a25df 100644
--- a/src/target/armv7a.h
+++ b/src/target/armv7a.h
@@ -141,13 +141,13 @@ struct armv7a_algorithm
 	enum armv7a_state core_state;
 };
 
-typedef struct armv7a_core_reg_s
+struct armv7a_core_reg
 {
 	int num;
 	enum armv7a_mode mode;
 	target_t *target;
 	struct armv7a_common *armv7a_common;
-} armv7a_core_reg_t;
+};
 
 int armv7a_arch_state(struct target_s *target);
 reg_cache_t *armv7a_build_reg_cache(target_t *target,

commit 5415d07139faeb2541127d5a7bcedef833b79de3
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:41:32 2009 -0800

    armv7a_algorithm_t -&gt; struct armv7a_algorithm
    
    Remove misleading typedef and redundant suffix from struct armv7a_algorithm.

diff --git a/src/target/armv7a.h b/src/target/armv7a.h
index e5615bb..5a77bef 100644
--- a/src/target/armv7a.h
+++ b/src/target/armv7a.h
@@ -133,13 +133,13 @@ target_to_armv7a(struct target_s *target)
 			armv4_5_common);
 }
 
-typedef struct armv7a_algorithm_s
+struct armv7a_algorithm
 {
 	int common_magic;
 
 	enum armv7a_mode core_mode;
 	enum armv7a_state core_state;
-} armv7a_algorithm_t;
+};
 
 typedef struct armv7a_core_reg_s
 {

commit 248448ee3a5f4f97307f1d5af4ef940529478a34
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:41:29 2009 -0800

    armv7a_common_t -&gt; struct armv7a_common
    
    Remove misleading typedef and redundant suffix from struct armv7a_common.

diff --git a/src/target/armv7a.c b/src/target/armv7a.c
index 0bba549..1def12f 100644
--- a/src/target/armv7a.c
+++ b/src/target/armv7a.c
@@ -176,7 +176,7 @@ reg_t armv7a_gdb_dummy_fp_reg =
 void armv7a_show_fault_registers(target_t *target)
 {
 	uint32_t dfsr, ifsr, dfar, ifar;
-	struct armv7a_common_s *armv7a = target_to_armv7a(target);
+	struct armv7a_common *armv7a = target_to_armv7a(target);
 
 	armv7a-&gt;read_cp15(target, 0, 0, 5, 0, &amp;dfsr);
 	armv7a-&gt;read_cp15(target, 0, 1, 5, 0, &amp;ifsr);
@@ -197,7 +197,7 @@ int armv7a_arch_state(struct target_s *target)
 		&quot;disabled&quot;, &quot;enabled&quot;
 	};
 
-	struct armv7a_common_s *armv7a = target_to_armv7a(target);
+	struct armv7a_common *armv7a = target_to_armv7a(target);
 	struct armv4_5_common_s *armv4_5 = &amp;armv7a-&gt;armv4_5_common;
 
 	if (armv4_5-&gt;common_magic != ARMV4_5_COMMON_MAGIC)
@@ -233,7 +233,7 @@ int armv7a_arch_state(struct target_s *target)
 COMMAND_HANDLER(handle_dap_baseaddr_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
-	struct armv7a_common_s *armv7a = target_to_armv7a(target);
+	struct armv7a_common *armv7a = target_to_armv7a(target);
 	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
 	return CALL_COMMAND_HANDLER(dap_baseaddr_command, swjdp);
@@ -242,7 +242,7 @@ COMMAND_HANDLER(handle_dap_baseaddr_command)
 COMMAND_HANDLER(handle_dap_memaccess_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
-	struct armv7a_common_s *armv7a = target_to_armv7a(target);
+	struct armv7a_common *armv7a = target_to_armv7a(target);
 	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
 	return CALL_COMMAND_HANDLER(dap_memaccess_command, swjdp);
@@ -251,7 +251,7 @@ COMMAND_HANDLER(handle_dap_memaccess_command)
 COMMAND_HANDLER(handle_dap_apsel_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
-	struct armv7a_common_s *armv7a = target_to_armv7a(target);
+	struct armv7a_common *armv7a = target_to_armv7a(target);
 	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
 	return CALL_COMMAND_HANDLER(dap_apsel_command, swjdp);
@@ -260,7 +260,7 @@ COMMAND_HANDLER(handle_dap_apsel_command)
 COMMAND_HANDLER(handle_dap_apid_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
-	struct armv7a_common_s *armv7a = target_to_armv7a(target);
+	struct armv7a_common *armv7a = target_to_armv7a(target);
 	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
 	return CALL_COMMAND_HANDLER(dap_apid_command, swjdp);
@@ -269,7 +269,7 @@ COMMAND_HANDLER(handle_dap_apid_command)
 COMMAND_HANDLER(handle_dap_info_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
-	struct armv7a_common_s *armv7a = target_to_armv7a(target);
+	struct armv7a_common *armv7a = target_to_armv7a(target);
 	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 	uint32_t apsel;
 
diff --git a/src/target/armv7a.h b/src/target/armv7a.h
index b12c62c..e5615bb 100644
--- a/src/target/armv7a.h
+++ b/src/target/armv7a.h
@@ -89,7 +89,7 @@ enum
 #define V2POWUR  6
 #define V2POWUW  7
 
-typedef struct armv7a_common_s
+struct armv7a_common
 {
 	int common_magic;
 	reg_cache_t *core_cache;
@@ -124,12 +124,12 @@ typedef struct armv7a_common_s
 	void (*pre_restore_context)(target_t *target);
 	void (*post_restore_context)(target_t *target);
 
-} armv7a_common_t;
+};
 
-static inline struct armv7a_common_s *
+static inline struct armv7a_common *
 target_to_armv7a(struct target_s *target)
 {
-	return container_of(target-&gt;arch_info, struct armv7a_common_s,
+	return container_of(target-&gt;arch_info, struct armv7a_common,
 			armv4_5_common);
 }
 
@@ -146,14 +146,14 @@ typedef struct armv7a_core_reg_s
 	int num;
 	enum armv7a_mode mode;
 	target_t *target;
-	armv7a_common_t *armv7a_common;
+	struct armv7a_common *armv7a_common;
 } armv7a_core_reg_t;
 
 int armv7a_arch_state(struct target_s *target);
 reg_cache_t *armv7a_build_reg_cache(target_t *target,
-		armv7a_common_t *armv7a_common);
+		struct armv7a_common *armv7a_common);
 int armv7a_register_commands(struct command_context_s *cmd_ctx);
-int armv7a_init_arch_info(target_t *target, armv7a_common_t *armv7a);
+int armv7a_init_arch_info(target_t *target, struct armv7a_common *armv7a);
 
 /* map psr mode bits to linear number */
 static inline int armv7a_mode_to_number(enum armv7a_mode mode)
diff --git a/src/target/cortex_a8.c b/src/target/cortex_a8.c
index 7f0189b..fec8837 100644
--- a/src/target/cortex_a8.c
+++ b/src/target/cortex_a8.c
@@ -64,7 +64,7 @@ static int cortex_a8_dap_write_coreregister_u32(target_t *target,
  */
 static int cortex_a8_init_debug_access(target_t *target)
 {
-	struct armv7a_common_s *armv7a = target_to_armv7a(target);
+	struct armv7a_common *armv7a = target_to_armv7a(target);
 	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
 	int retval;
@@ -94,7 +94,7 @@ int cortex_a8_exec_opcode(target_t *target, uint32_t opcode)
 {
 	uint32_t dscr;
 	int retval;
-	struct armv7a_common_s *armv7a = target_to_armv7a(target);
+	struct armv7a_common *armv7a = target_to_armv7a(target);
 	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
 	LOG_DEBUG(&quot;exec opcode 0x%08&quot; PRIx32, opcode);
@@ -135,7 +135,7 @@ static int cortex_a8_read_regs_through_mem(target_t *target, uint32_t address,
 		uint32_t * regfile)
 {
 	int retval = ERROR_OK;
-	struct armv7a_common_s *armv7a = target_to_armv7a(target);
+	struct armv7a_common *armv7a = target_to_armv7a(target);
 	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
 	cortex_a8_dap_read_coreregister_u32(target, regfile, 0);
@@ -152,7 +152,7 @@ static int cortex_a8_read_cp(target_t *target, uint32_t *value, uint8_t CP,
 		uint8_t op1, uint8_t CRn, uint8_t CRm, uint8_t op2)
 {
 	int retval;
-	struct armv7a_common_s *armv7a = target_to_armv7a(target);
+	struct armv7a_common *armv7a = target_to_armv7a(target);
 	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
 	cortex_a8_exec_opcode(target, ARMV4_5_MRC(CP, op1, 0, CRn, CRm, op2));
@@ -171,7 +171,7 @@ static int cortex_a8_write_cp(target_t *target, uint32_t value,
 {
 	int retval;
 	uint32_t dscr;
-	struct armv7a_common_s *armv7a = target_to_armv7a(target);
+	struct armv7a_common *armv7a = target_to_armv7a(target);
 	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
 	LOG_DEBUG(&quot;CP%i, CRn %i, value 0x%08&quot; PRIx32, CP, CRn, value);
@@ -235,7 +235,7 @@ static int cortex_a8_dap_read_coreregister_u32(target_t *target,
 	int retval = ERROR_OK;
 	uint8_t reg = regnum&amp;0xFF;
 	uint32_t dscr;
-	struct armv7a_common_s *armv7a = target_to_armv7a(target);
+	struct armv7a_common *armv7a = target_to_armv7a(target);
 	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
 	if (reg &gt; 16)
@@ -276,7 +276,7 @@ static int cortex_a8_dap_write_coreregister_u32(target_t *target, uint32_t value
 	int retval = ERROR_OK;
 	uint8_t Rd = regnum&amp;0xFF;
 	uint32_t dscr;
-	struct armv7a_common_s *armv7a = target_to_armv7a(target);
+	struct armv7a_common *armv7a = target_to_armv7a(target);
 	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
 	LOG_DEBUG(&quot;register %i, value 0x%08&quot; PRIx32, regnum, value);
@@ -323,7 +323,7 @@ static int cortex_a8_dap_write_coreregister_u32(target_t *target, uint32_t value
 static int cortex_a8_dap_write_memap_register_u32(target_t *target, uint32_t address, uint32_t value)
 {
 	int retval;
-	struct armv7a_common_s *armv7a = target_to_armv7a(target);
+	struct armv7a_common *armv7a = target_to_armv7a(target);
 	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
 	retval = mem_ap_write_atomic_u32(swjdp, address, value);
@@ -340,7 +340,7 @@ static int cortex_a8_poll(target_t *target)
 	int retval = ERROR_OK;
 	uint32_t dscr;
 	struct cortex_a8_common_s *cortex_a8 = target_to_cortex_a8(target);
-	struct armv7a_common_s *armv7a = &amp;cortex_a8-&gt;armv7a_common;
+	struct armv7a_common *armv7a = &amp;cortex_a8-&gt;armv7a_common;
 	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 	enum target_state prev_target_state = target-&gt;state;
 	uint8_t saved_apsel = dap_ap_get_select(swjdp);
@@ -404,7 +404,7 @@ static int cortex_a8_halt(target_t *target)
 {
 	int retval = ERROR_OK;
 	uint32_t dscr;
-	struct armv7a_common_s *armv7a = target_to_armv7a(target);
+	struct armv7a_common *armv7a = target_to_armv7a(target);
 	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 	uint8_t saved_apsel = dap_ap_get_select(swjdp);
 	dap_ap_select(swjdp, swjdp_debugap);
@@ -441,7 +441,7 @@ out:
 static int cortex_a8_resume(struct target_s *target, int current,
 		uint32_t address, int handle_breakpoints, int debug_execution)
 {
-	struct armv7a_common_s *armv7a = target_to_armv7a(target);
+	struct armv7a_common *armv7a = target_to_armv7a(target);
 	struct armv4_5_common_s *armv4_5 = &amp;armv7a-&gt;armv4_5_common;
 	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
@@ -566,7 +566,7 @@ static int cortex_a8_debug_entry(target_t *target)
 	int retval = ERROR_OK;
 	working_area_t *regfile_working_area = NULL;
 	struct cortex_a8_common_s *cortex_a8 = target_to_cortex_a8(target);
-	struct armv7a_common_s *armv7a = target_to_armv7a(target);
+	struct armv7a_common *armv7a = target_to_armv7a(target);
 	struct armv4_5_common_s *armv4_5 = &amp;armv7a-&gt;armv4_5_common;
 	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
@@ -691,7 +691,7 @@ static int cortex_a8_debug_entry(target_t *target)
 static void cortex_a8_post_debug_entry(target_t *target)
 {
 	struct cortex_a8_common_s *cortex_a8 = target_to_cortex_a8(target);
-	struct armv7a_common_s *armv7a = &amp;cortex_a8-&gt;armv7a_common;
+	struct armv7a_common *armv7a = &amp;cortex_a8-&gt;armv7a_common;
 
 //	cortex_a8_read_cp(target, &amp;cp15_control_register, 15, 0, 1, 0, 0);
 	/* examine cp15 control reg */
@@ -723,7 +723,7 @@ static void cortex_a8_post_debug_entry(target_t *target)
 static int cortex_a8_step(struct target_s *target, int current, uint32_t address,
 		int handle_breakpoints)
 {
-	struct armv7a_common_s *armv7a = target_to_armv7a(target);
+	struct armv7a_common *armv7a = target_to_armv7a(target);
 	struct armv4_5_common_s *armv4_5 = &amp;armv7a-&gt;armv4_5_common;
 	breakpoint_t *breakpoint = NULL;
 	breakpoint_t stepbreakpoint;
@@ -803,7 +803,7 @@ static int cortex_a8_restore_context(target_t *target)
 {
 	int i;
 	uint32_t value;
-	struct armv7a_common_s *armv7a = target_to_armv7a(target);
+	struct armv7a_common *armv7a = target_to_armv7a(target);
 	struct armv4_5_common_s *armv4_5 = &amp;armv7a-&gt;armv4_5_common;
 
 	LOG_DEBUG(&quot; &quot;);
@@ -968,7 +968,7 @@ static int cortex_a8_set_breakpoint(struct target_s *target,
 	uint32_t control;
 	uint8_t byte_addr_select = 0x0F;
 	struct cortex_a8_common_s *cortex_a8 = target_to_cortex_a8(target);
-	struct armv7a_common_s *armv7a = &amp;cortex_a8-&gt;armv7a_common;
+	struct armv7a_common *armv7a = &amp;cortex_a8-&gt;armv7a_common;
 	cortex_a8_brp_t * brp_list = cortex_a8-&gt;brp_list;
 
 	if (breakpoint-&gt;set)
@@ -1039,7 +1039,7 @@ static int cortex_a8_unset_breakpoint(struct target_s *target, breakpoint_t *bre
 {
 	int retval;
 	struct cortex_a8_common_s *cortex_a8 = target_to_cortex_a8(target);
-	struct armv7a_common_s *armv7a = &amp;cortex_a8-&gt;armv7a_common;
+	struct armv7a_common *armv7a = &amp;cortex_a8-&gt;armv7a_common;
 	cortex_a8_brp_t * brp_list = cortex_a8-&gt;brp_list;
 
 	if (!breakpoint-&gt;set)
@@ -1178,7 +1178,7 @@ static int cortex_a8_deassert_reset(target_t *target)
 static int cortex_a8_read_memory(struct target_s *target, uint32_t address,
 		uint32_t size, uint32_t count, uint8_t *buffer)
 {
-	struct armv7a_common_s *armv7a = target_to_armv7a(target);
+	struct armv7a_common *armv7a = target_to_armv7a(target);
 	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
 	int retval = ERROR_OK;
@@ -1213,7 +1213,7 @@ static int cortex_a8_read_memory(struct target_s *target, uint32_t address,
 int cortex_a8_write_memory(struct target_s *target, uint32_t address,
 		uint32_t size, uint32_t count, uint8_t *buffer)
 {
-	struct armv7a_common_s *armv7a = target_to_armv7a(target);
+	struct armv7a_common *armv7a = target_to_armv7a(target);
 	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
 	int retval;
@@ -1299,7 +1299,7 @@ static int cortex_a8_handle_target_request(void *priv)
 	target_t *target = priv;
 	if (!target-&gt;type-&gt;examined)
 		return ERROR_OK;
-	struct armv7a_common_s *armv7a = target_to_armv7a(target);
+	struct armv7a_common *armv7a = target_to_armv7a(target);
 	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
 	if (!target-&gt;dbg_msg_enabled)
@@ -1339,7 +1339,7 @@ static int cortex_a8_handle_target_request(void *priv)
 static int cortex_a8_examine(struct target_s *target)
 {
 	struct cortex_a8_common_s *cortex_a8 = target_to_cortex_a8(target);
-	struct armv7a_common_s *armv7a = &amp;cortex_a8-&gt;armv7a_common;
+	struct armv7a_common *armv7a = &amp;cortex_a8-&gt;armv7a_common;
 	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 	int i;
 	int retval = ERROR_OK;
@@ -1454,7 +1454,7 @@ int cortex_a8_init_arch_info(target_t *target,
 		cortex_a8_common_t *cortex_a8, struct jtag_tap *tap)
 {
 	armv4_5_common_t *armv4_5;
-	armv7a_common_t *armv7a;
+	struct armv7a_common *armv7a;
 
 	armv7a = &amp;cortex_a8-&gt;armv7a_common;
 	armv4_5 = &amp;armv7a-&gt;armv4_5_common;
@@ -1529,7 +1529,7 @@ static int cortex_a8_target_create(struct target_s *target, Jim_Interp *interp)
 COMMAND_HANDLER(cortex_a8_handle_cache_info_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
-	struct armv7a_common_s *armv7a = target_to_armv7a(target);
+	struct armv7a_common *armv7a = target_to_armv7a(target);
 
 	return armv4_5_handle_cache_info_command(cmd_ctx,
 			&amp;armv7a-&gt;armv4_5_mmu.armv4_5_cache);
diff --git a/src/target/cortex_a8.h b/src/target/cortex_a8.h
index 02cf797..8216ffb 100644
--- a/src/target/cortex_a8.h
+++ b/src/target/cortex_a8.h
@@ -133,7 +133,7 @@ typedef struct cortex_a8_common_s
 	/* Use cortex_a8_read_regs_through_mem for fast register reads */
 	int fast_reg_read;
 
-	armv7a_common_t armv7a_common;
+	struct armv7a_common armv7a_common;
 } cortex_a8_common_t;
 
 static inline struct cortex_a8_common_s *

commit f6dae0cf84de26846a18f3fcaea842ccd898a5c1
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:41:27 2009 -0800

    armv4_5_mmu_common_t -&gt; struct armv4_5_mmu_common
    
    Remove misleading typedef and redundant suffix from struct armv4_5_mmu_common.

diff --git a/src/target/arm720t.h b/src/target/arm720t.h
index c5e2809..ab9aef6 100644
--- a/src/target/arm720t.h
+++ b/src/target/arm720t.h
@@ -29,7 +29,7 @@ struct arm720t_common
 {
 	struct arm7tdmi_common arm7tdmi_common;
 	uint32_t common_magic;
-	armv4_5_mmu_common_t armv4_5_mmu;
+	struct armv4_5_mmu_common armv4_5_mmu;
 	uint32_t cp15_control_reg;
 	uint32_t fsr_reg;
 	uint32_t far_reg;
diff --git a/src/target/arm920t.h b/src/target/arm920t.h
index b2ab459..4bd5ceb 100644
--- a/src/target/arm920t.h
+++ b/src/target/arm920t.h
@@ -29,7 +29,7 @@ struct arm920t_common
 {
 	struct arm9tdmi_common arm9tdmi_common;
 	uint32_t common_magic;
-	armv4_5_mmu_common_t armv4_5_mmu;
+	struct armv4_5_mmu_common armv4_5_mmu;
 	uint32_t cp15_control_reg;
 	uint32_t d_fsr;
 	uint32_t i_fsr;
diff --git a/src/target/arm926ejs.h b/src/target/arm926ejs.h
index ec23f14..171c589 100644
--- a/src/target/arm926ejs.h
+++ b/src/target/arm926ejs.h
@@ -29,7 +29,7 @@ struct arm926ejs_common
 {
 	struct arm9tdmi_common arm9tdmi_common;
 	uint32_t common_magic;
-	armv4_5_mmu_common_t armv4_5_mmu;
+	struct armv4_5_mmu_common armv4_5_mmu;
 	int (*read_cp15)(target_t *target, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t *value);
 	int (*write_cp15)(target_t *target, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t value);
 	uint32_t cp15_control_reg;
diff --git a/src/target/armv4_5_mmu.c b/src/target/armv4_5_mmu.c
index 4088fd2..64147e8 100644
--- a/src/target/armv4_5_mmu.c
+++ b/src/target/armv4_5_mmu.c
@@ -25,14 +25,14 @@
 #include &quot;armv4_5_mmu.h&quot;
 
 
-uint32_t armv4mmu_translate_va(target_t *target, armv4_5_mmu_common_t *armv4_5_mmu, uint32_t va, int *type, uint32_t *cb, int *domain, uint32_t *ap);
+uint32_t armv4mmu_translate_va(target_t *target, struct armv4_5_mmu_common *armv4_5_mmu, uint32_t va, int *type, uint32_t *cb, int *domain, uint32_t *ap);
 
 char* armv4_5_mmu_page_type_names[] =
 {
 	&quot;section&quot;, &quot;large page&quot;, &quot;small page&quot;, &quot;tiny page&quot;
 };
 
-uint32_t armv4_5_mmu_translate_va(target_t *target, armv4_5_mmu_common_t *armv4_5_mmu, uint32_t va, int *type, uint32_t *cb, int *domain, uint32_t *ap)
+uint32_t armv4_5_mmu_translate_va(target_t *target, struct armv4_5_mmu_common *armv4_5_mmu, uint32_t va, int *type, uint32_t *cb, int *domain, uint32_t *ap)
 {
 	uint32_t first_lvl_descriptor = 0x0;
 	uint32_t second_lvl_descriptor = 0x0;
@@ -130,7 +130,7 @@ uint32_t armv4_5_mmu_translate_va(target_t *target, armv4_5_mmu_common_t *armv4_
 	return ERROR_TARGET_TRANSLATION_FAULT;
 }
 
-int armv4_5_mmu_read_physical(target_t *target, armv4_5_mmu_common_t *armv4_5_mmu, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
+int armv4_5_mmu_read_physical(target_t *target, struct armv4_5_mmu_common *armv4_5_mmu, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	int retval;
 
@@ -150,7 +150,7 @@ int armv4_5_mmu_read_physical(target_t *target, armv4_5_mmu_common_t *armv4_5_mm
 	return retval;
 }
 
-int armv4_5_mmu_write_physical(target_t *target, armv4_5_mmu_common_t *armv4_5_mmu, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
+int armv4_5_mmu_write_physical(target_t *target, struct armv4_5_mmu_common *armv4_5_mmu, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	int retval;
 
diff --git a/src/target/armv4_5_mmu.h b/src/target/armv4_5_mmu.h
index b8ad0c8..4357c92 100644
--- a/src/target/armv4_5_mmu.h
+++ b/src/target/armv4_5_mmu.h
@@ -23,7 +23,7 @@
 #include &quot;armv4_5_cache.h&quot;
 #include &quot;target.h&quot;
 
-typedef struct armv4_5_mmu_common_s
+struct armv4_5_mmu_common
 {
 	uint32_t (*get_ttb)(target_t *target);
 	int (*read_memory)(target_t *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer);
@@ -33,7 +33,7 @@ typedef struct armv4_5_mmu_common_s
 	struct armv4_5_cache_common armv4_5_cache;
 	int has_tiny_pages;
 	int mmu_enabled;
-} armv4_5_mmu_common_t;
+};
 
 enum
 {
@@ -43,15 +43,15 @@ enum
 extern char* armv4_5_page_type_names[];
 
 uint32_t armv4_5_mmu_translate_va(target_t *target,
-		armv4_5_mmu_common_t *armv4_5_mmu, uint32_t va, int *type,
+		struct armv4_5_mmu_common *armv4_5_mmu, uint32_t va, int *type,
 		uint32_t *cb, int *domain, uint32_t *ap);
 
 int armv4_5_mmu_read_physical(target_t *target,
-		armv4_5_mmu_common_t *armv4_5_mmu,
+		struct armv4_5_mmu_common *armv4_5_mmu,
 		uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer);
 
 int armv4_5_mmu_write_physical(target_t *target,
-		armv4_5_mmu_common_t *armv4_5_mmu,
+		struct armv4_5_mmu_common *armv4_5_mmu,
 		uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer);
 
 enum
diff --git a/src/target/armv7a.h b/src/target/armv7a.h
index e7a7fc2..b12c62c 100644
--- a/src/target/armv7a.h
+++ b/src/target/armv7a.h
@@ -105,7 +105,7 @@ typedef struct armv7a_common_s
 	uint8_t memory_ap;
 
 	/* Cache and Memory Management Unit */
-	armv4_5_mmu_common_t armv4_5_mmu;
+	struct armv4_5_mmu_common armv4_5_mmu;
 	armv4_5_common_t armv4_5_common;
 
 //	int (*full_context)(struct target_s *target);
diff --git a/src/target/xscale.h b/src/target/xscale.h
index 433ecfc..dd7b034 100644
--- a/src/target/xscale.h
+++ b/src/target/xscale.h
@@ -125,7 +125,7 @@ typedef struct xscale_common_s
 	int arch_debug_reason;
 
 	/* MMU/Caches */
-	armv4_5_mmu_common_t armv4_5_mmu;
+	struct armv4_5_mmu_common armv4_5_mmu;
 	uint32_t cp15_control_reg;
 
 	int fast_memory_access;

commit 405a5df7860bf9c0465fce4ac517083a1f9c4a4b
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:41:22 2009 -0800

    armv4_5_cache_common_t -&gt; struct armv4_5_cache_common
    
    Remove misleading typedef and redundant suffix from struct armv4_5_cache_common.

diff --git a/src/target/armv4_5_cache.c b/src/target/armv4_5_cache.c
index f45878a..793979e 100644
--- a/src/target/armv4_5_cache.c
+++ b/src/target/armv4_5_cache.c
@@ -24,7 +24,7 @@
 #include &quot;armv4_5_cache.h&quot;
 #include &quot;log.h&quot;
 
-int armv4_5_identify_cache(uint32_t cache_type_reg, armv4_5_cache_common_t *cache)
+int armv4_5_identify_cache(uint32_t cache_type_reg, struct armv4_5_cache_common *cache)
 {
 	int size, assoc, M, len, multiplier;
 
@@ -87,7 +87,7 @@ int armv4_5_identify_cache(uint32_t cache_type_reg, armv4_5_cache_common_t *cach
 	return ERROR_OK;
 }
 
-int armv4_5_handle_cache_info_command(struct command_context_s *cmd_ctx, armv4_5_cache_common_t *armv4_5_cache)
+int armv4_5_handle_cache_info_command(struct command_context_s *cmd_ctx, struct armv4_5_cache_common *armv4_5_cache)
 {
 	if (armv4_5_cache-&gt;ctype == -1)
 	{
diff --git a/src/target/armv4_5_cache.h b/src/target/armv4_5_cache.h
index 9a06090..456a32d 100644
--- a/src/target/armv4_5_cache.h
+++ b/src/target/armv4_5_cache.h
@@ -32,7 +32,7 @@ struct armv4_5_cachesize
 	int cachesize;
 };
 
-typedef struct armv4_5_cache_common_s
+struct armv4_5_cache_common
 {
 	int ctype;	/* specify supported cache operations */
 	int separate;	/* separate caches or unified cache */
@@ -40,15 +40,15 @@ typedef struct armv4_5_cache_common_s
 	struct armv4_5_cachesize i_size; /* instruction cache */
 	int i_cache_enabled;
 	int d_u_cache_enabled;
-} armv4_5_cache_common_t;
+};
 
 int armv4_5_identify_cache(uint32_t cache_type_reg,
-		armv4_5_cache_common_t *cache);
+		struct armv4_5_cache_common *cache);
 int armv4_5_cache_state(uint32_t cp15_control_reg,
-		armv4_5_cache_common_t *cache);
+		struct armv4_5_cache_common *cache);
 
 int armv4_5_handle_cache_info_command(struct command_context_s *cmd_ctx,
-		armv4_5_cache_common_t *armv4_5_cache);
+		struct armv4_5_cache_common *armv4_5_cache);
 
 enum
 {
diff --git a/src/target/armv4_5_mmu.h b/src/target/armv4_5_mmu.h
index b0c39a7..b8ad0c8 100644
--- a/src/target/armv4_5_mmu.h
+++ b/src/target/armv4_5_mmu.h
@@ -30,7 +30,7 @@ typedef struct armv4_5_mmu_common_s
 	int (*write_memory)(target_t *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer);
 	void (*disable_mmu_caches)(target_t *target, int mmu, int d_u_cache, int i_cache);
 	void (*enable_mmu_caches)(target_t *target, int mmu, int d_u_cache, int i_cache);
-	armv4_5_cache_common_t armv4_5_cache;
+	struct armv4_5_cache_common armv4_5_cache;
 	int has_tiny_pages;
 	int mmu_enabled;
 } armv4_5_mmu_common_t;

commit e976786d55c367ec5b867baffb055b06bbda6ea0
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:41:18 2009 -0800

    armv4_5_cachesize_t -&gt; struct armv4_5_cachesize
    
    Remove misleading typedef and redundant suffix from struct armv4_5_cachesize.

diff --git a/src/target/armv4_5_cache.h b/src/target/armv4_5_cache.h
index 71e3203..9a06090 100644
--- a/src/target/armv4_5_cache.h
+++ b/src/target/armv4_5_cache.h
@@ -24,20 +24,20 @@
 
 struct command_context_s;
 
-typedef struct armv4_5_cachesize_s
+struct armv4_5_cachesize
 {
 	int linelen;
 	int associativity;
 	int nsets;
 	int cachesize;
-} armv4_5_cachesize_t;
+};
 
 typedef struct armv4_5_cache_common_s
 {
 	int ctype;	/* specify supported cache operations */
 	int separate;	/* separate caches or unified cache */
-	armv4_5_cachesize_t d_u_size;	/* data cache */
-	armv4_5_cachesize_t i_size; /* instruction cache */
+	struct armv4_5_cachesize d_u_size;	/* data cache */
+	struct armv4_5_cachesize i_size; /* instruction cache */
 	int i_cache_enabled;
 	int d_u_cache_enabled;
 } armv4_5_cache_common_t;

commit 2dd9c5e1da3a7e9152e7ca45fefc73363b509d5a
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:41:14 2009 -0800

    armv4_5_core_reg_t -&gt; struct armv4_5_core_reg
    
    Remove misleading typedef and redundant suffix from struct armv4_5_core_reg.

diff --git a/src/target/arm7_9_common.c b/src/target/arm7_9_common.c
index 75998fe..1cd3456 100644
--- a/src/target/arm7_9_common.c
+++ b/src/target/arm7_9_common.c
@@ -1600,7 +1600,7 @@ int arm7_9_restore_context(target_t *target)
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
 	reg_t *reg;
-	armv4_5_core_reg_t *reg_arch_info;
+	struct armv4_5_core_reg *reg_arch_info;
 	enum armv4_5_mode current_mode = armv4_5-&gt;core_mode;
 	int i, j;
 	int dirty;
@@ -2114,7 +2114,7 @@ int arm7_9_read_core_reg(struct target_s *target, int num, enum armv4_5_mode mod
 	if (armv4_5_mode_to_number(armv4_5-&gt;core_mode)==-1)
 		return ERROR_FAIL;
 
-	enum armv4_5_mode reg_mode = ((armv4_5_core_reg_t*)ARMV4_5_CORE_REG_MODE(armv4_5-&gt;core_cache, mode, num).arch_info)-&gt;mode;
+	enum armv4_5_mode reg_mode = ((struct armv4_5_core_reg*)ARMV4_5_CORE_REG_MODE(armv4_5-&gt;core_cache, mode, num).arch_info)-&gt;mode;
 
 	if ((num &lt; 0) || (num &gt; 16))
 		return ERROR_INVALID_ARGUMENTS;
@@ -2144,7 +2144,7 @@ int arm7_9_read_core_reg(struct target_s *target, int num, enum armv4_5_mode mod
 		/* read a program status register
 		 * if the register mode is MODE_ANY, we read the cpsr, otherwise a spsr
 		 */
-		armv4_5_core_reg_t *arch_info = ARMV4_5_CORE_REG_MODE(armv4_5-&gt;core_cache, mode, num).arch_info;
+		struct armv4_5_core_reg *arch_info = ARMV4_5_CORE_REG_MODE(armv4_5-&gt;core_cache, mode, num).arch_info;
 		int spsr = (arch_info-&gt;mode == ARMV4_5_MODE_ANY) ? 0 : 1;
 
 		arm7_9-&gt;read_xpsr(target, &amp;value, spsr);
@@ -2178,7 +2178,7 @@ int arm7_9_write_core_reg(struct target_s *target, int num, enum armv4_5_mode mo
 	if (armv4_5_mode_to_number(armv4_5-&gt;core_mode)==-1)
 		return ERROR_FAIL;
 
-	enum armv4_5_mode reg_mode = ((armv4_5_core_reg_t*)ARMV4_5_CORE_REG_MODE(armv4_5-&gt;core_cache, mode, num).arch_info)-&gt;mode;
+	enum armv4_5_mode reg_mode = ((struct armv4_5_core_reg*)ARMV4_5_CORE_REG_MODE(armv4_5-&gt;core_cache, mode, num).arch_info)-&gt;mode;
 
 	if ((num &lt; 0) || (num &gt; 16))
 		return ERROR_INVALID_ARGUMENTS;
@@ -2207,7 +2207,7 @@ int arm7_9_write_core_reg(struct target_s *target, int num, enum armv4_5_mode mo
 		/* write a program status register
 		* if the register mode is MODE_ANY, we write the cpsr, otherwise a spsr
 		*/
-		armv4_5_core_reg_t *arch_info = ARMV4_5_CORE_REG_MODE(armv4_5-&gt;core_cache, mode, num).arch_info;
+		struct armv4_5_core_reg *arch_info = ARMV4_5_CORE_REG_MODE(armv4_5-&gt;core_cache, mode, num).arch_info;
 		int spsr = (arch_info-&gt;mode == ARMV4_5_MODE_ANY) ? 0 : 1;
 
 		/* if we're writing the CPSR, mask the T bit */
diff --git a/src/target/armv4_5.c b/src/target/armv4_5.c
index a89b98b..bde9e22 100644
--- a/src/target/armv4_5.c
+++ b/src/target/armv4_5.c
@@ -80,7 +80,7 @@ char* armv4_5_state_strings[] =
 
 int armv4_5_core_reg_arch_type = -1;
 
-armv4_5_core_reg_t armv4_5_core_reg_list_arch_info[] =
+struct armv4_5_core_reg armv4_5_core_reg_list_arch_info[] =
 {
 	{0, ARMV4_5_MODE_ANY, NULL, NULL},
 	{1, ARMV4_5_MODE_ANY, NULL, NULL},
@@ -170,7 +170,7 @@ reg_t armv4_5_gdb_dummy_fps_reg =
 int armv4_5_get_core_reg(reg_t *reg)
 {
 	int retval;
-	armv4_5_core_reg_t *armv4_5 = reg-&gt;arch_info;
+	struct armv4_5_core_reg *armv4_5 = reg-&gt;arch_info;
 	target_t *target = armv4_5-&gt;target;
 
 	if (target-&gt;state != TARGET_HALTED)
@@ -187,7 +187,7 @@ int armv4_5_get_core_reg(reg_t *reg)
 
 int armv4_5_set_core_reg(reg_t *reg, uint8_t *buf)
 {
-	armv4_5_core_reg_t *armv4_5 = reg-&gt;arch_info;
+	struct armv4_5_core_reg *armv4_5 = reg-&gt;arch_info;
 	target_t *target = armv4_5-&gt;target;
 	struct armv4_5_common_s *armv4_5_target = target_to_armv4_5(target);
 	uint32_t value = buf_get_u32(buf, 0, 32);
@@ -254,7 +254,7 @@ reg_cache_t* armv4_5_build_reg_cache(target_t *target, armv4_5_common_t *armv4_5
 	int num_regs = 37;
 	reg_cache_t *cache = malloc(sizeof(reg_cache_t));
 	reg_t *reg_list = malloc(sizeof(reg_t) * num_regs);
-	armv4_5_core_reg_t *arch_info = malloc(sizeof(armv4_5_core_reg_t) * num_regs);
+	struct armv4_5_core_reg *arch_info = malloc(sizeof(struct armv4_5_core_reg) * num_regs);
 	int i;
 
 	cache-&gt;name = &quot;arm v4/5 registers&quot;;
diff --git a/src/target/armv4_5.h b/src/target/armv4_5.h
index 22069d1..3cc8937 100644
--- a/src/target/armv4_5.h
+++ b/src/target/armv4_5.h
@@ -127,13 +127,13 @@ struct armv4_5_algorithm
 	enum armv4_5_state core_state;
 };
 
-typedef struct armv4_5_core_reg_s
+struct armv4_5_core_reg
 {
 	int num;
 	enum armv4_5_mode mode;
 	target_t *target;
 	armv4_5_common_t *armv4_5_common;
-} armv4_5_core_reg_t;
+};
 
 reg_cache_t* armv4_5_build_reg_cache(target_t *target,
 		armv4_5_common_t *armv4_5_common);

commit 15e8e4530866454c18c5d91ad9e867f339c2e82b
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:41:07 2009 -0800

    armv4_5_algorithm_t -&gt; struct armv4_5_algorithm
    
    Remove misleading typedef and redundant suffix from struct armv4_5_algorithm.

diff --git a/src/flash/aduc702x.c b/src/flash/aduc702x.c
index 931db5a..ebda702 100644
--- a/src/flash/aduc702x.c
+++ b/src/flash/aduc702x.c
@@ -164,7 +164,7 @@ static int aduc702x_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint
 	working_area_t *source;
 	uint32_t address = bank-&gt;base + offset;
 	struct reg_param reg_params[6];
-	armv4_5_algorithm_t armv4_5_info;
+	struct armv4_5_algorithm armv4_5_info;
 	int retval = ERROR_OK;
 
 	if (((count%2)!=0)||((offset%2)!=0))
diff --git a/src/flash/arm_nandio.c b/src/flash/arm_nandio.c
index 0453656..63dcaeb 100644
--- a/src/flash/arm_nandio.c
+++ b/src/flash/arm_nandio.c
@@ -42,7 +42,7 @@
 int arm_nandwrite(struct arm_nand_data *nand, uint8_t *data, int size)
 {
 	target_t		*target = nand-&gt;target;
-	armv4_5_algorithm_t	algo;
+	struct armv4_5_algorithm	algo;
 	armv4_5_common_t	*armv4_5 = target-&gt;arch_info;
 	struct reg_param		reg_params[3];
 	uint32_t		target_buf;
diff --git a/src/flash/cfi.c b/src/flash/cfi.c
index fd9c2a7..c0c2cb7 100644
--- a/src/flash/cfi.c
+++ b/src/flash/cfi.c
@@ -1021,7 +1021,7 @@ static int cfi_intel_write_block(struct flash_bank_s *bank, uint8_t *buffer, uin
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 	struct reg_param reg_params[7];
-	armv4_5_algorithm_t armv4_5_info;
+	struct armv4_5_algorithm armv4_5_info;
 	working_area_t *source;
 	uint32_t buffer_size = 32768;
 	uint32_t write_command_val, busy_pattern_val, error_pattern_val;
@@ -1266,7 +1266,7 @@ static int cfi_spansion_write_block(struct flash_bank_s *bank, uint8_t *buffer,
 	struct cfi_spansion_pri_ext *pri_ext = cfi_info-&gt;pri_ext;
 	target_t *target = bank-&gt;target;
 	struct reg_param reg_params[10];
-	armv4_5_algorithm_t armv4_5_info;
+	struct armv4_5_algorithm armv4_5_info;
 	working_area_t *source;
 	uint32_t buffer_size = 32768;
 	uint32_t status;
diff --git a/src/flash/ecos.c b/src/flash/ecos.c
index 97566d4..0a97bda 100644
--- a/src/flash/ecos.c
+++ b/src/flash/ecos.c
@@ -207,7 +207,7 @@ static int runCode(struct ecosflash_flash_bank *info,
 	target_t *target = info-&gt;target;
 
 	struct reg_param reg_params[3];
-	armv4_5_algorithm_t armv4_5_info;
+	struct armv4_5_algorithm armv4_5_info;
 	armv4_5_info.common_magic = ARMV4_5_COMMON_MAGIC;
 	armv4_5_info.core_mode = ARMV4_5_MODE_SVC;
 	armv4_5_info.core_state = ARMV4_5_STATE_ARM;
diff --git a/src/flash/lpc2000.c b/src/flash/lpc2000.c
index 05c08dd..a2c09d2 100644
--- a/src/flash/lpc2000.c
+++ b/src/flash/lpc2000.c
@@ -241,7 +241,7 @@ static int lpc2000_iap_call(flash_bank_t *bank, int code, uint32_t param_table[5
 	target_t *target = bank-&gt;target;
 	struct mem_param mem_params[2];
 	struct reg_param reg_params[5];
-	armv4_5_algorithm_t armv4_5_info; /* for LPC2000 */
+	struct armv4_5_algorithm armv4_5_info; /* for LPC2000 */
 	armv7m_algorithm_t armv7m_info;   /* for LPC1700 */
  	uint32_t status_code;
 	uint32_t iap_entry_point = 0; /* to make compiler happier */
diff --git a/src/flash/lpc2900.c b/src/flash/lpc2900.c
index 8d1eeb8..f6b3bf6 100644
--- a/src/flash/lpc2900.c
+++ b/src/flash/lpc2900.c
@@ -1314,7 +1314,7 @@ static int lpc2900_write(struct flash_bank_s *bank, uint8_t *buffer,
 	if( warea )
 	{
 		struct reg_param reg_params[5];
-		armv4_5_algorithm_t armv4_5_info;
+		struct armv4_5_algorithm armv4_5_info;
 
 		/* We can use target mode. Download the algorithm. */
 		retval = target_write_buffer( target,
diff --git a/src/flash/str7x.c b/src/flash/str7x.c
index c594c96..68ba26e 100644
--- a/src/flash/str7x.c
+++ b/src/flash/str7x.c
@@ -316,7 +316,7 @@ static int str7x_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint32_
 	working_area_t *source;
 	uint32_t address = bank-&gt;base + offset;
 	struct reg_param reg_params[6];
-	armv4_5_algorithm_t armv4_5_info;
+	struct armv4_5_algorithm armv4_5_info;
 	int retval = ERROR_OK;
 
 	uint32_t str7x_flash_write_code[] = {
diff --git a/src/flash/str9x.c b/src/flash/str9x.c
index c364908..bae895d 100644
--- a/src/flash/str9x.c
+++ b/src/flash/str9x.c
@@ -354,7 +354,7 @@ static int str9x_write_block(struct flash_bank_s *bank,
 	working_area_t *source;
 	uint32_t address = bank-&gt;base + offset;
 	struct reg_param reg_params[4];
-	armv4_5_algorithm_t armv4_5_info;
+	struct armv4_5_algorithm armv4_5_info;
 	int retval = ERROR_OK;
 
 	uint32_t str9x_flash_write_code[] = {
diff --git a/src/target/arm7_9_common.c b/src/target/arm7_9_common.c
index 65f2687..75998fe 100644
--- a/src/target/arm7_9_common.c
+++ b/src/target/arm7_9_common.c
@@ -2690,7 +2690,7 @@ int arm7_9_bulk_write_memory(target_t *target, uint32_t address, uint32_t count,
 		}
 	}
 
-	armv4_5_algorithm_t armv4_5_info;
+	struct armv4_5_algorithm armv4_5_info;
 	struct reg_param reg_params[1];
 
 	armv4_5_info.common_magic = ARMV4_5_COMMON_MAGIC;
@@ -2724,7 +2724,7 @@ int arm7_9_bulk_write_memory(target_t *target, uint32_t address, uint32_t count,
 int arm7_9_checksum_memory(struct target_s *target, uint32_t address, uint32_t count, uint32_t* checksum)
 {
 	working_area_t *crc_algorithm;
-	armv4_5_algorithm_t armv4_5_info;
+	struct armv4_5_algorithm armv4_5_info;
 	struct reg_param reg_params[2];
 	int retval;
 
@@ -2809,7 +2809,7 @@ int arm7_9_blank_check_memory(struct target_s *target, uint32_t address, uint32_
 {
 	working_area_t *erase_check_algorithm;
 	struct reg_param reg_params[3];
-	armv4_5_algorithm_t armv4_5_info;
+	struct armv4_5_algorithm armv4_5_info;
 	int retval;
 	uint32_t i;
 
diff --git a/src/target/armv4_5.c b/src/target/armv4_5.c
index 0dd047d..a89b98b 100644
--- a/src/target/armv4_5.c
+++ b/src/target/armv4_5.c
@@ -546,7 +546,7 @@ static int armv4_5_run_algorithm_completion(struct target_s *target, uint32_t ex
 int armv4_5_run_algorithm_inner(struct target_s *target, int num_mem_params, struct mem_param *mem_params, int num_reg_params, struct reg_param *reg_params, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info, int (*run_it)(struct target_s *target, uint32_t exit_point, int timeout_ms, void *arch_info))
 {
 	struct armv4_5_common_s *armv4_5 = target_to_armv4_5(target);
-	armv4_5_algorithm_t *armv4_5_algorithm_info = arch_info;
+	struct armv4_5_algorithm *armv4_5_algorithm_info = arch_info;
 	enum armv4_5_state core_state = armv4_5-&gt;core_state;
 	enum armv4_5_mode core_mode = armv4_5-&gt;core_mode;
 	uint32_t context[17];
diff --git a/src/target/armv4_5.h b/src/target/armv4_5.h
index c6686f1..22069d1 100644
--- a/src/target/armv4_5.h
+++ b/src/target/armv4_5.h
@@ -119,13 +119,13 @@ static inline bool is_arm(struct arm *arm)
 	return arm &amp;&amp; arm-&gt;common_magic == ARMV4_5_COMMON_MAGIC;
 }
 
-typedef struct armv4_5_algorithm_s
+struct armv4_5_algorithm
 {
 	int common_magic;
 
 	enum armv4_5_mode core_mode;
 	enum armv4_5_state core_state;
-} armv4_5_algorithm_t;
+};
 
 typedef struct armv4_5_core_reg_s
 {

commit 056fcdb540f0ab9a404f3b5de72fd707eb146603
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:41:00 2009 -0800

    arm_jtag_t -&gt; struct arm_jtag
    
    Remove misleading typedef and redundant suffix from struct arm_jtag.

diff --git a/src/flash/ocl.c b/src/flash/ocl.c
index 83c8fcf..14b3e7c 100644
--- a/src/flash/ocl.c
+++ b/src/flash/ocl.c
@@ -28,7 +28,7 @@
 
 struct ocl_priv
 {
-	arm_jtag_t *jtag_info;
+	struct arm_jtag *jtag_info;
 	unsigned int buflen;
 	unsigned int bufalign;
 };
diff --git a/src/flash/str9xpec.c b/src/flash/str9xpec.c
index ad51cf1..c553cdc 100644
--- a/src/flash/str9xpec.c
+++ b/src/flash/str9xpec.c
@@ -240,7 +240,7 @@ FLASH_BANK_COMMAND_HANDLER(str9xpec_flash_bank_command)
 	struct str9xpec_flash_controller *str9xpec_info;
 	armv4_5_common_t *armv4_5 = NULL;
 	struct arm7_9_common *arm7_9 = NULL;
-	arm_jtag_t *jtag_info = NULL;
+	struct arm_jtag *jtag_info = NULL;
 
 	if (argc &lt; 6)
 	{
diff --git a/src/target/arm720t.c b/src/target/arm720t.c
index a6641d0..8ef7114 100644
--- a/src/target/arm720t.c
+++ b/src/target/arm720t.c
@@ -43,7 +43,7 @@ static int arm720t_scan_cp15(target_t *target,
 {
 	int retval;
 	struct arm720t_common *arm720t = target_to_arm720(target);
-	arm_jtag_t *jtag_info;
+	struct arm_jtag *jtag_info;
 	struct scan_field fields[2];
 	uint8_t out_buf[4];
 	uint8_t instruction_buf = instruction;
@@ -414,7 +414,7 @@ COMMAND_HANDLER(arm720t_handle_cp15_command)
 	int retval;
 	target_t *target = get_current_target(cmd_ctx);
 	struct arm720t_common *arm720t = target_to_arm720(target);
-	arm_jtag_t *jtag_info;
+	struct arm_jtag *jtag_info;
 
 	retval = arm720t_verify_pointer(cmd_ctx, arm720t);
 	if (retval != ERROR_OK)
diff --git a/src/target/arm7_9_common.c b/src/target/arm7_9_common.c
index 3894f85..65f2687 100644
--- a/src/target/arm7_9_common.c
+++ b/src/target/arm7_9_common.c
@@ -703,7 +703,7 @@ int arm7_9_execute_sys_speed(struct target_s *target)
 {
 	int retval;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	reg_t *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
 
 	/* set RESTART instruction */
@@ -756,7 +756,7 @@ int arm7_9_execute_fast_sys_speed(struct target_s *target)
 	static uint8_t check_value[4], check_mask[4];
 
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	reg_t *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
 
 	/* set RESTART instruction */
@@ -797,7 +797,7 @@ int arm7_9_execute_fast_sys_speed(struct target_s *target)
 int arm7_9_target_request_data(target_t *target, uint32_t size, uint8_t *buffer)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	uint32_t *data;
 	int retval = ERROR_OK;
 	uint32_t i;
@@ -833,7 +833,7 @@ int arm7_9_handle_target_request(void *priv)
 	if (!target_was_examined(target))
 		return ERROR_OK;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	reg_t *dcc_control = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_COMMS_CTRL];
 
 	if (!target-&gt;dbg_msg_enabled)
@@ -1748,7 +1748,7 @@ int arm7_9_restore_context(target_t *target)
 int arm7_9_restart_core(struct target_s *target)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* set RESTART instruction */
 	jtag_set_end_state(TAP_IDLE);
diff --git a/src/target/arm7_9_common.h b/src/target/arm7_9_common.h
index 2059bd0..ca73997 100644
--- a/src/target/arm7_9_common.h
+++ b/src/target/arm7_9_common.h
@@ -42,7 +42,7 @@ struct arm7_9_common
 	struct arm armv4_5_common;
 	uint32_t common_magic;
 
-	arm_jtag_t jtag_info; /**&lt; JTAG information for target */
+	struct arm_jtag jtag_info; /**&lt; JTAG information for target */
 	reg_cache_t *eice_cache; /**&lt; Embedded ICE register cache */
 
 	uint32_t arm_bkpt; /**&lt; ARM breakpoint instruction */
diff --git a/src/target/arm7tdmi.c b/src/target/arm7tdmi.c
index 2614d9e..dc2cfbd 100644
--- a/src/target/arm7tdmi.c
+++ b/src/target/arm7tdmi.c
@@ -96,7 +96,7 @@ static int arm7tdmi_examine_debug_reason(target_t *target)
 
 static const int arm7tdmi_num_bits[] = {1, 32};
 
-static __inline int arm7tdmi_clock_out_inner(arm_jtag_t *jtag_info, uint32_t out, int breakpoint)
+static __inline int arm7tdmi_clock_out_inner(struct arm_jtag *jtag_info, uint32_t out, int breakpoint)
 {
 	uint32_t values[2]={breakpoint, flip_u32(out, 32)};
 
@@ -116,7 +116,7 @@ static __inline int arm7tdmi_clock_out_inner(arm_jtag_t *jtag_info, uint32_t out
  *
  * FIXME remove the unused &quot;deprecated&quot; parameter
  */
-static __inline int arm7tdmi_clock_out(arm_jtag_t *jtag_info,
+static __inline int arm7tdmi_clock_out(struct arm_jtag *jtag_info,
 		uint32_t out, uint32_t *deprecated, int breakpoint)
 {
 	jtag_set_end_state(TAP_DRPAUSE);
@@ -127,7 +127,7 @@ static __inline int arm7tdmi_clock_out(arm_jtag_t *jtag_info,
 }
 
 /* clock the target, reading the databus */
-static int arm7tdmi_clock_data_in(arm_jtag_t *jtag_info, uint32_t *in)
+static int arm7tdmi_clock_data_in(struct arm_jtag *jtag_info, uint32_t *in)
 {
 	int retval = ERROR_OK;
 	struct scan_field fields[2];
@@ -213,7 +213,7 @@ static int arm7endianness(jtag_callback_data_t arg,
  * the *in pointer points to a buffer where elements of 'size' bytes
  * are stored in big (be == 1) or little (be == 0) endianness
  */
-static int arm7tdmi_clock_data_in_endianness(arm_jtag_t *jtag_info,
+static int arm7tdmi_clock_data_in_endianness(struct arm_jtag *jtag_info,
 		void *in, int size, int be)
 {
 	int retval = ERROR_OK;
@@ -267,7 +267,7 @@ static void arm7tdmi_change_to_arm(target_t *target,
 		uint32_t *r0, uint32_t *pc)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* save r0 before using it and put system in ARM state
 	 * to allow common handling of ARM and THUMB debugging */
@@ -324,7 +324,7 @@ static void arm7tdmi_read_core_regs(target_t *target,
 {
 	int i;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* STMIA r0-15, [r0] at debug speed
 	 * register values will start to appear on 4th DCLK
@@ -349,7 +349,7 @@ static void arm7tdmi_read_core_regs_target_buffer(target_t *target,
 {
 	int i;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	int be = (target-&gt;endianness == TARGET_BIG_ENDIAN) ? 1 : 0;
 	uint32_t *buf_u32 = buffer;
 	uint16_t *buf_u16 = buffer;
@@ -389,7 +389,7 @@ static void arm7tdmi_read_core_regs_target_buffer(target_t *target,
 static void arm7tdmi_read_xpsr(target_t *target, uint32_t *xpsr, int spsr)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* MRS r0, cpsr */
 	arm7tdmi_clock_out(jtag_info, ARMV4_5_MRS(0, spsr &amp; 1), NULL, 0);
@@ -407,7 +407,7 @@ static void arm7tdmi_read_xpsr(target_t *target, uint32_t *xpsr, int spsr)
 static void arm7tdmi_write_xpsr(target_t *target, uint32_t xpsr, int spsr)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	LOG_DEBUG(&quot;xpsr: %8.8&quot; PRIx32 &quot;, spsr: %i&quot;, xpsr, spsr);
 
@@ -437,7 +437,7 @@ static void arm7tdmi_write_xpsr_im8(target_t *target,
 		uint8_t xpsr_im, int rot, int spsr)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	LOG_DEBUG(&quot;xpsr_im: %2.2x, rot: %i, spsr: %i&quot;, xpsr_im, rot, spsr);
 
@@ -456,7 +456,7 @@ static void arm7tdmi_write_core_regs(target_t *target,
 {
 	int i;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* LDMIA r0-15, [r0] at debug speed
 	* register values will start to appear on 4th DCLK
@@ -480,7 +480,7 @@ static void arm7tdmi_write_core_regs(target_t *target,
 static void arm7tdmi_load_word_regs(target_t *target, uint32_t mask)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* put system-speed load-multiple into the pipeline */
 	arm7tdmi_clock_out(jtag_info, ARMV4_5_NOP, NULL, 0);
@@ -491,7 +491,7 @@ static void arm7tdmi_load_word_regs(target_t *target, uint32_t mask)
 static void arm7tdmi_load_hword_reg(target_t *target, int num)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* put system-speed load half-word into the pipeline */
 	arm7tdmi_clock_out(jtag_info, ARMV4_5_NOP, NULL, 0);
@@ -502,7 +502,7 @@ static void arm7tdmi_load_hword_reg(target_t *target, int num)
 static void arm7tdmi_load_byte_reg(target_t *target, int num)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* put system-speed load byte into the pipeline */
 	arm7tdmi_clock_out(jtag_info, ARMV4_5_NOP, NULL, 0);
@@ -513,7 +513,7 @@ static void arm7tdmi_load_byte_reg(target_t *target, int num)
 static void arm7tdmi_store_word_regs(target_t *target, uint32_t mask)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* put system-speed store-multiple into the pipeline */
 	arm7tdmi_clock_out(jtag_info, ARMV4_5_NOP, NULL, 0);
@@ -524,7 +524,7 @@ static void arm7tdmi_store_word_regs(target_t *target, uint32_t mask)
 static void arm7tdmi_store_hword_reg(target_t *target, int num)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* put system-speed store half-word into the pipeline */
 	arm7tdmi_clock_out(jtag_info, ARMV4_5_NOP, NULL, 0);
@@ -535,7 +535,7 @@ static void arm7tdmi_store_hword_reg(target_t *target, int num)
 static void arm7tdmi_store_byte_reg(target_t *target, int num)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* put system-speed store byte into the pipeline */
 	arm7tdmi_clock_out(jtag_info, ARMV4_5_NOP, NULL, 0);
@@ -546,7 +546,7 @@ static void arm7tdmi_store_byte_reg(target_t *target, int num)
 static void arm7tdmi_write_pc(target_t *target, uint32_t pc)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* LDMIA r0-15, [r0] at debug speed
 	 * register values will start to appear on 4th DCLK
@@ -571,7 +571,7 @@ static void arm7tdmi_write_pc(target_t *target, uint32_t pc)
 static void arm7tdmi_branch_resume(target_t *target)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	arm7tdmi_clock_out(jtag_info, ARMV4_5_NOP, NULL, 1);
 	arm7tdmi_clock_out_inner(jtag_info, ARMV4_5_B(0xfffffa, 0), 0);
@@ -581,7 +581,7 @@ static void arm7tdmi_branch_resume_thumb(target_t *target)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	reg_t *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
 
 	LOG_DEBUG(&quot;-&quot;);
@@ -665,7 +665,7 @@ int arm7tdmi_examine(struct target_s *target)
 
 		if (arm7_9-&gt;armv4_5_common.etm)
 		{
-			arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+			struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 			(*cache_p)-&gt;next = etm_build_reg_cache(target,
 					jtag_info, arm7_9-&gt;armv4_5_common.etm);
 			arm7_9-&gt;armv4_5_common.etm-&gt;reg_cache = (*cache_p)-&gt;next;
diff --git a/src/target/arm920t.c b/src/target/arm920t.c
index 22f7b63..2fe50a1 100644
--- a/src/target/arm920t.c
+++ b/src/target/arm920t.c
@@ -55,7 +55,7 @@ static int arm920t_read_cp15_physical(target_t *target,
 		int reg_addr, uint32_t *value)
 {
 	struct arm920t_common *arm920t = target_to_arm920(target);
-	arm_jtag_t *jtag_info;
+	struct arm_jtag *jtag_info;
 	struct scan_field fields[4];
 	uint8_t access_type_buf = 1;
 	uint8_t reg_addr_buf = reg_addr &amp; 0x3f;
@@ -107,7 +107,7 @@ static int arm920t_write_cp15_physical(target_t *target,
 		int reg_addr, uint32_t value)
 {
 	struct arm920t_common *arm920t = target_to_arm920(target);
-	arm_jtag_t *jtag_info;
+	struct arm_jtag *jtag_info;
 	struct scan_field fields[4];
 	uint8_t access_type_buf = 1;
 	uint8_t reg_addr_buf = reg_addr &amp; 0x3f;
@@ -156,7 +156,7 @@ static int arm920t_execute_cp15(target_t *target, uint32_t cp15_opcode,
 {
 	int retval;
 	struct arm920t_common *arm920t = target_to_arm920(target);
-	arm_jtag_t *jtag_info;
+	struct arm_jtag *jtag_info;
 	struct scan_field fields[4];
 	uint8_t access_type_buf = 0;		/* interpreted access */
 	uint8_t reg_addr_buf = 0x0;
diff --git a/src/target/arm926ejs.c b/src/target/arm926ejs.c
index 9133bd9..9ae19a8 100644
--- a/src/target/arm926ejs.c
+++ b/src/target/arm926ejs.c
@@ -52,7 +52,7 @@ static int arm926ejs_cp15_read(target_t *target, uint32_t op1, uint32_t op2,
 {
 	int retval = ERROR_OK;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	uint32_t address = ARM926EJS_CP15_ADDR(op1, op2, CRn, CRm);
 	struct scan_field fields[4];
 	uint8_t address_buf[2];
@@ -144,7 +144,7 @@ static int arm926ejs_cp15_write(target_t *target, uint32_t op1, uint32_t op2,
 {
 	int retval = ERROR_OK;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	uint32_t address = ARM926EJS_CP15_ADDR(op1, op2, CRn, CRm);
 	struct scan_field fields[4];
 	uint8_t value_buf[4];
diff --git a/src/target/arm966e.c b/src/target/arm966e.c
index 524c362..dee9f61 100644
--- a/src/target/arm966e.c
+++ b/src/target/arm966e.c
@@ -71,7 +71,7 @@ static int arm966e_read_cp15(target_t *target, int reg_addr, uint32_t *value)
 {
 	int retval = ERROR_OK;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	struct scan_field fields[3];
 	uint8_t reg_addr_buf = reg_addr &amp; 0x3f;
 	uint8_t nr_w_buf = 0;
@@ -123,7 +123,7 @@ int arm966e_write_cp15(target_t *target, int reg_addr, uint32_t value)
 {
 	int retval = ERROR_OK;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	struct scan_field fields[3];
 	uint8_t reg_addr_buf = reg_addr &amp; 0x3f;
 	uint8_t nr_w_buf = 1;
diff --git a/src/target/arm9tdmi.c b/src/target/arm9tdmi.c
index 985b7ff..897563c 100644
--- a/src/target/arm9tdmi.c
+++ b/src/target/arm9tdmi.c
@@ -124,7 +124,7 @@ int arm9tdmi_examine_debug_reason(target_t *target)
 /* put an instruction in the ARM9TDMI pipeline or write the data bus,
  * and optionally read data
  */
-int arm9tdmi_clock_out(arm_jtag_t *jtag_info, uint32_t instr,
+int arm9tdmi_clock_out(struct arm_jtag *jtag_info, uint32_t instr,
 		uint32_t out, uint32_t *in, int sysspeed)
 {
 	int retval = ERROR_OK;
@@ -198,7 +198,7 @@ int arm9tdmi_clock_out(arm_jtag_t *jtag_info, uint32_t instr,
 }
 
 /* just read data (instruction and data-out = don't care) */
-int arm9tdmi_clock_data_in(arm_jtag_t *jtag_info, uint32_t *in)
+int arm9tdmi_clock_data_in(struct arm_jtag *jtag_info, uint32_t *in)
 {
 	int retval = ERROR_OK;;
 	struct scan_field fields[3];
@@ -269,7 +269,7 @@ static int arm9endianness(jtag_callback_data_t arg,
  * the *in pointer points to a buffer where elements of 'size' bytes
  * are stored in big (be == 1) or little (be == 0) endianness
  */
-int arm9tdmi_clock_data_in_endianness(arm_jtag_t *jtag_info,
+int arm9tdmi_clock_data_in_endianness(struct arm_jtag *jtag_info,
 		void *in, int size, int be)
 {
 	int retval = ERROR_OK;
@@ -330,7 +330,7 @@ static void arm9tdmi_change_to_arm(target_t *target,
 {
 	int retval = ERROR_OK;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* save r0 before using it and put system in ARM state
 	 * to allow common handling of ARM and THUMB debugging */
@@ -384,7 +384,7 @@ void arm9tdmi_read_core_regs(target_t *target,
 {
 	int i;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* STMIA r0-15, [r0] at debug speed
 	 * register values will start to appear on 4th DCLK
@@ -409,7 +409,7 @@ static void arm9tdmi_read_core_regs_target_buffer(target_t *target,
 {
 	int i;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	int be = (target-&gt;endianness == TARGET_BIG_ENDIAN) ? 1 : 0;
 	uint32_t *buf_u32 = buffer;
 	uint16_t *buf_u16 = buffer;
@@ -447,7 +447,7 @@ static void arm9tdmi_read_core_regs_target_buffer(target_t *target,
 static void arm9tdmi_read_xpsr(target_t *target, uint32_t *xpsr, int spsr)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* MRS r0, cpsr */
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_MRS(0, spsr &amp; 1), 0, NULL, 0);
@@ -469,7 +469,7 @@ static void arm9tdmi_read_xpsr(target_t *target, uint32_t *xpsr, int spsr)
 static void arm9tdmi_write_xpsr(target_t *target, uint32_t xpsr, int spsr)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	LOG_DEBUG(&quot;xpsr: %8.8&quot; PRIx32 &quot;, spsr: %i&quot;, xpsr, spsr);
 
@@ -504,7 +504,7 @@ static void arm9tdmi_write_xpsr_im8(target_t *target,
 		uint8_t xpsr_im, int rot, int spsr)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	LOG_DEBUG(&quot;xpsr_im: %2.2x, rot: %i, spsr: %i&quot;, xpsr_im, rot, spsr);
 
@@ -530,7 +530,7 @@ void arm9tdmi_write_core_regs(target_t *target,
 {
 	int i;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* LDMIA r0-15, [r0] at debug speed
 	* register values will start to appear on 4th DCLK
@@ -554,7 +554,7 @@ void arm9tdmi_write_core_regs(target_t *target,
 void arm9tdmi_load_word_regs(target_t *target, uint32_t mask)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* put system-speed load-multiple into the pipeline */
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_LDMIA(0, mask &amp; 0xffff, 0, 1), 0, NULL, 0);
@@ -564,7 +564,7 @@ void arm9tdmi_load_word_regs(target_t *target, uint32_t mask)
 void arm9tdmi_load_hword_reg(target_t *target, int num)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* put system-speed load half-word into the pipeline */
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_LDRH_IP(num, 0), 0, NULL, 0);
@@ -574,7 +574,7 @@ void arm9tdmi_load_hword_reg(target_t *target, int num)
 void arm9tdmi_load_byte_reg(target_t *target, int num)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* put system-speed load byte into the pipeline */
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_LDRB_IP(num, 0), 0, NULL, 0);
@@ -584,7 +584,7 @@ void arm9tdmi_load_byte_reg(target_t *target, int num)
 void arm9tdmi_store_word_regs(target_t *target, uint32_t mask)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* put system-speed store-multiple into the pipeline */
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_STMIA(0, mask, 0, 1), 0, NULL, 0);
@@ -594,7 +594,7 @@ void arm9tdmi_store_word_regs(target_t *target, uint32_t mask)
 void arm9tdmi_store_hword_reg(target_t *target, int num)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* put system-speed store half-word into the pipeline */
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_STRH_IP(num, 0), 0, NULL, 0);
@@ -604,7 +604,7 @@ void arm9tdmi_store_hword_reg(target_t *target, int num)
 void arm9tdmi_store_byte_reg(target_t *target, int num)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* put system-speed store byte into the pipeline */
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_STRB_IP(num, 0), 0, NULL, 0);
@@ -614,7 +614,7 @@ void arm9tdmi_store_byte_reg(target_t *target, int num)
 static void arm9tdmi_write_pc(target_t *target, uint32_t pc)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* LDMIA r0-15, [r0] at debug speed
 	 * register values will start to appear on 4th DCLK
@@ -638,7 +638,7 @@ static void arm9tdmi_write_pc(target_t *target, uint32_t pc)
 void arm9tdmi_branch_resume(target_t *target)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_B(0xfffffc, 0), 0, NULL, 0);
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_NOP, 0, NULL, 1);
@@ -650,7 +650,7 @@ static void arm9tdmi_branch_resume_thumb(target_t *target)
 
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	reg_t *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
 
 	/* LDMIA r0-15, [r0] at debug speed
@@ -760,7 +760,7 @@ int arm9tdmi_examine(struct target_s *target)
 
 		if (arm7_9-&gt;armv4_5_common.etm)
 		{
-			arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+			struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 			(*cache_p)-&gt;next = etm_build_reg_cache(target,
 					jtag_info, arm7_9-&gt;armv4_5_common.etm);
 			arm7_9-&gt;armv4_5_common.etm-&gt;reg_cache = (*cache_p)-&gt;next;
diff --git a/src/target/arm9tdmi.h b/src/target/arm9tdmi.h
index 61d1ccf..5522317 100644
--- a/src/target/arm9tdmi.h
+++ b/src/target/arm9tdmi.h
@@ -58,10 +58,10 @@ int arm9tdmi_init_arch_info(target_t *target,
 		struct arm9tdmi_common *arm9tdmi, struct jtag_tap *tap);
 int arm9tdmi_register_commands(struct command_context_s *cmd_ctx);
 
-int arm9tdmi_clock_out(arm_jtag_t *jtag_info,
+int arm9tdmi_clock_out(struct arm_jtag *jtag_info,
 		uint32_t instr, uint32_t out, uint32_t *in, int sysspeed);
-int arm9tdmi_clock_data_in(arm_jtag_t *jtag_info, uint32_t *in);
-int arm9tdmi_clock_data_in_endianness(arm_jtag_t *jtag_info,
+int arm9tdmi_clock_data_in(struct arm_jtag *jtag_info, uint32_t *in);
+int arm9tdmi_clock_data_in_endianness(struct arm_jtag *jtag_info,
 		void *in, int size, int be);
 void arm9tdmi_read_core_regs(target_t *target,
 		uint32_t mask, uint32_t* core_regs[16]);
diff --git a/src/target/arm_adi_v5.c b/src/target/arm_adi_v5.c
index 3323485..751020f 100644
--- a/src/target/arm_adi_v5.c
+++ b/src/target/arm_adi_v5.c
@@ -73,7 +73,7 @@ static uint32_t max_tar_block_size(uint32_t tar_autoincr_block, uint32_t address
 /* Scan out and in from target ordered uint8_t buffers */
 int adi_jtag_dp_scan(struct swjdp_common *swjdp, uint8_t instr, uint8_t reg_addr, uint8_t RnW, uint8_t *outvalue, uint8_t *invalue, uint8_t *ack)
 {
-	arm_jtag_t *jtag_info = swjdp-&gt;jtag_info;
+	struct arm_jtag *jtag_info = swjdp-&gt;jtag_info;
 	struct scan_field fields[2];
 	uint8_t out_addr_buf;
 
@@ -103,7 +103,7 @@ int adi_jtag_dp_scan(struct swjdp_common *swjdp, uint8_t instr, uint8_t reg_addr
 /* Scan out and in from host ordered uint32_t variables */
 int adi_jtag_dp_scan_u32(struct swjdp_common *swjdp, uint8_t instr, uint8_t reg_addr, uint8_t RnW, uint32_t outvalue, uint32_t *invalue, uint8_t *ack)
 {
-	arm_jtag_t *jtag_info = swjdp-&gt;jtag_info;
+	struct arm_jtag *jtag_info = swjdp-&gt;jtag_info;
 	struct scan_field fields[2];
 	uint8_t out_value_buf[4];
 	uint8_t out_addr_buf;
diff --git a/src/target/arm_adi_v5.h b/src/target/arm_adi_v5.h
index 5f2c969..486d29f 100644
--- a/src/target/arm_adi_v5.h
+++ b/src/target/arm_adi_v5.h
@@ -79,12 +79,12 @@
 struct swjdp_reg
 {
 	int addr;
-	arm_jtag_t *jtag_info;
+	struct arm_jtag *jtag_info;
 };
 
 struct swjdp_common
 {
-	arm_jtag_t *jtag_info;
+	struct arm_jtag *jtag_info;
 	/* Control config */
 	uint32_t dp_ctrl_stat;
 	/* Support for several AP's in one DAP */
diff --git a/src/target/arm_jtag.c b/src/target/arm_jtag.c
index 4b5bd39..e7dbea4 100644
--- a/src/target/arm_jtag.c
+++ b/src/target/arm_jtag.c
@@ -31,7 +31,7 @@
 #define _ARM_JTAG_SCAN_N_CHECK_
 #endif
 
-int arm_jtag_set_instr(arm_jtag_t *jtag_info, uint32_t new_instr,  void *no_verify_capture)
+int arm_jtag_set_instr(struct arm_jtag *jtag_info, uint32_t new_instr,  void *no_verify_capture)
 {
 	struct jtag_tap *tap;
 	tap = jtag_info-&gt;tap;
@@ -66,7 +66,7 @@ int arm_jtag_set_instr(arm_jtag_t *jtag_info, uint32_t new_instr,  void *no_veri
 	return ERROR_OK;
 }
 
-int arm_jtag_scann(arm_jtag_t *jtag_info, uint32_t new_scan_chain)
+int arm_jtag_scann(struct arm_jtag *jtag_info, uint32_t new_scan_chain)
 {
 	int retval = ERROR_OK;
 	if (jtag_info-&gt;cur_scan_chain != new_scan_chain)
@@ -96,7 +96,7 @@ int arm_jtag_scann(arm_jtag_t *jtag_info, uint32_t new_scan_chain)
 
 int arm_jtag_reset_callback(enum jtag_event event, void *priv)
 {
-	arm_jtag_t *jtag_info = priv;
+	struct arm_jtag *jtag_info = priv;
 
 	if (event == JTAG_TRST_ASSERTED)
 	{
@@ -106,7 +106,7 @@ int arm_jtag_reset_callback(enum jtag_event event, void *priv)
 	return ERROR_OK;
 }
 
-int arm_jtag_setup_connection(arm_jtag_t *jtag_info)
+int arm_jtag_setup_connection(struct arm_jtag *jtag_info)
 {
 	jtag_info-&gt;scann_instr = 0x2;
 	jtag_info-&gt;cur_scan_chain = 0;
diff --git a/src/target/arm_jtag.h b/src/target/arm_jtag.h
index 5b882c6..b1905a3 100644
--- a/src/target/arm_jtag.h
+++ b/src/target/arm_jtag.h
@@ -25,7 +25,7 @@
 
 #include &quot;jtag.h&quot;
 
-typedef struct arm_jtag_s
+struct arm_jtag
 {
 	struct jtag_tap *tap;
 
@@ -34,12 +34,12 @@ typedef struct arm_jtag_s
 	uint32_t cur_scan_chain;
 
 	uint32_t intest_instr;
-} arm_jtag_t;
+};
 
-int arm_jtag_set_instr(arm_jtag_t *jtag_info,
+int arm_jtag_set_instr(struct arm_jtag *jtag_info,
 		uint32_t new_instr, void *verify_capture);
-int arm_jtag_scann(arm_jtag_t *jtag_info, uint32_t new_scan_chain);
-int arm_jtag_setup_connection(arm_jtag_t *jtag_info);
+int arm_jtag_scann(struct arm_jtag *jtag_info, uint32_t new_scan_chain);
+int arm_jtag_setup_connection(struct arm_jtag *jtag_info);
 
 /* JTAG buffers to host, be and le buffers, flipping variants */
 int arm_jtag_buf_to_u32_flip(uint8_t *in_buf, void *priv, struct scan_field_s *field);
diff --git a/src/target/cortex_a8.h b/src/target/cortex_a8.h
index 39d4e77..02cf797 100644
--- a/src/target/cortex_a8.h
+++ b/src/target/cortex_a8.h
@@ -103,7 +103,7 @@ typedef struct  cortex_a8_wrp_s
 typedef struct cortex_a8_common_s
 {
 	int common_magic;
-	arm_jtag_t jtag_info;
+	struct arm_jtag jtag_info;
 
 	/* Context information */
 	uint32_t cpudbg_dscr;
diff --git a/src/target/cortex_m3.h b/src/target/cortex_m3.h
index 9ad9dca..5b1d5ea 100644
--- a/src/target/cortex_m3.h
+++ b/src/target/cortex_m3.h
@@ -139,7 +139,7 @@ typedef struct  cortex_m3_dwt_comparator_s
 typedef struct cortex_m3_common_s
 {
 	int common_magic;
-	arm_jtag_t jtag_info;
+	struct arm_jtag jtag_info;
 
 	/* Context information */
 	uint32_t dcb_dhcsr;
diff --git a/src/target/embeddedice.c b/src/target/embeddedice.c
index 4a60960..3f0048e 100644
--- a/src/target/embeddedice.c
+++ b/src/target/embeddedice.c
@@ -170,7 +170,7 @@ embeddedice_build_reg_cache(target_t *target, struct arm7_9_common *arm7_9)
 	reg_cache_t *reg_cache = malloc(sizeof(reg_cache_t));
 	reg_t *reg_list = NULL;
 	embeddedice_reg_t *arch_info = NULL;
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	int num_regs = ARRAY_SIZE(eice_regs);
 	int i;
 	int eice_version = 0;
@@ -396,7 +396,7 @@ int embeddedice_read_reg_w_check(reg_t *reg,
  * functional clock, so the 50+ JTAG clocks needed to receive the word
  * allow hundreds of instruction cycles (per word) in the target.
  */
-int embeddedice_receive(arm_jtag_t *jtag_info, uint32_t *data, uint32_t size)
+int embeddedice_receive(struct arm_jtag *jtag_info, uint32_t *data, uint32_t size)
 {
 	struct scan_field fields[3];
 	uint8_t field1_out[1];
@@ -517,7 +517,7 @@ void embeddedice_store_reg(reg_t *reg)
  * functional clock, so the 50+ JTAG clocks needed to receive the word
  * allow hundreds of instruction cycles (per word) in the target.
  */
-int embeddedice_send(arm_jtag_t *jtag_info, uint32_t *data, uint32_t size)
+int embeddedice_send(struct arm_jtag *jtag_info, uint32_t *data, uint32_t size)
 {
 	struct scan_field fields[3];
 	uint8_t field0_out[4];
@@ -562,7 +562,7 @@ int embeddedice_send(arm_jtag_t *jtag_info, uint32_t *data, uint32_t size)
 /**
  * Poll DCC control register until read or write handshake completes.
  */
-int embeddedice_handshake(arm_jtag_t *jtag_info, int hsbit, uint32_t timeout)
+int embeddedice_handshake(struct arm_jtag *jtag_info, int hsbit, uint32_t timeout)
 {
 	struct scan_field fields[3];
 	uint8_t field0_in[4];
diff --git a/src/target/embeddedice.h b/src/target/embeddedice.h
index 4e5639c..113a8fe 100644
--- a/src/target/embeddedice.h
+++ b/src/target/embeddedice.h
@@ -90,7 +90,7 @@ enum
 typedef struct embeddedice_reg_s
 {
 	int addr;
-	arm_jtag_t *jtag_info;
+	struct arm_jtag *jtag_info;
 } embeddedice_reg_t;
 
 reg_cache_t* embeddedice_build_reg_cache(target_t *target,
@@ -108,10 +108,10 @@ void embeddedice_store_reg(reg_t *reg);
 void embeddedice_set_reg(reg_t *reg, uint32_t value);
 int embeddedice_set_reg_w_exec(reg_t *reg, uint8_t *buf);
 
-int embeddedice_receive(arm_jtag_t *jtag_info, uint32_t *data, uint32_t size);
-int embeddedice_send(arm_jtag_t *jtag_info, uint32_t *data, uint32_t size);
+int embeddedice_receive(struct arm_jtag *jtag_info, uint32_t *data, uint32_t size);
+int embeddedice_send(struct arm_jtag *jtag_info, uint32_t *data, uint32_t size);
 
-int embeddedice_handshake(arm_jtag_t *jtag_info, int hsbit, uint32_t timeout);
+int embeddedice_handshake(struct arm_jtag *jtag_info, int hsbit, uint32_t timeout);
 
 /* If many embeddedice_write_reg() follow eachother, then the &gt;1 invocations can be this faster version of
  * embeddedice_write_reg
diff --git a/src/target/etm.c b/src/target/etm.c
index 01a9b71..8643463 100644
--- a/src/target/etm.c
+++ b/src/target/etm.c
@@ -247,7 +247,7 @@ static reg_t *etm_reg_lookup(etm_context_t *etm_ctx, unsigned id)
 	return NULL;
 }
 
-static void etm_reg_add(unsigned bcd_vers, arm_jtag_t *jtag_info,
+static void etm_reg_add(unsigned bcd_vers, struct arm_jtag *jtag_info,
 		reg_cache_t *cache, etm_reg_t *ereg,
 		const struct etm_reg_info *r, unsigned nreg)
 {
@@ -280,7 +280,7 @@ static void etm_reg_add(unsigned bcd_vers, arm_jtag_t *jtag_info,
 }
 
 reg_cache_t *etm_build_reg_cache(target_t *target,
-		arm_jtag_t *jtag_info, etm_context_t *etm_ctx)
+		struct arm_jtag *jtag_info, etm_context_t *etm_ctx)
 {
 	reg_cache_t *reg_cache = malloc(sizeof(reg_cache_t));
 	reg_t *reg_list = NULL;
diff --git a/src/target/etm.h b/src/target/etm.h
index ead4585..d6e1210 100644
--- a/src/target/etm.h
+++ b/src/target/etm.h
@@ -75,7 +75,7 @@ typedef struct etm_reg_s
 {
 	uint32_t value;
 	const struct etm_reg_info *reg_info;
-	arm_jtag_t *jtag_info;
+	struct arm_jtag *jtag_info;
 } etm_reg_t;
 
 typedef enum
@@ -208,7 +208,7 @@ typedef enum
 } etmv1_branch_reason_t;
 
 reg_cache_t* etm_build_reg_cache(target_t *target,
-		arm_jtag_t *jtag_info, etm_context_t *etm_ctx);
+		struct arm_jtag *jtag_info, etm_context_t *etm_ctx);
 
 int etm_setup(target_t *target);
 
diff --git a/src/target/fa526.c b/src/target/fa526.c
index 4aa5e3a..3b884c6 100644
--- a/src/target/fa526.c
+++ b/src/target/fa526.c
@@ -44,7 +44,7 @@ static void fa526_read_core_regs(target_t *target,
 {
 	int i;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* STMIA r0-15, [r0] at debug speed
 	 * register values will start to appear on 4th DCLK
@@ -71,7 +71,7 @@ static void fa526_read_core_regs_target_buffer(target_t *target,
 {
 	int i;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	int be = (target-&gt;endianness == TARGET_BIG_ENDIAN) ? 1 : 0;
 	uint32_t *buf_u32 = buffer;
 	uint16_t *buf_u16 = buffer;
@@ -111,7 +111,7 @@ static void fa526_read_core_regs_target_buffer(target_t *target,
 static void fa526_read_xpsr(target_t *target, uint32_t *xpsr, int spsr)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* MRS r0, cpsr */
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_MRS(0, spsr &amp; 1), 0, NULL, 0);
@@ -136,7 +136,7 @@ static void fa526_read_xpsr(target_t *target, uint32_t *xpsr, int spsr)
 static void fa526_write_xpsr(target_t *target, uint32_t xpsr, int spsr)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	LOG_DEBUG(&quot;xpsr: %8.8&quot; PRIx32 &quot;, spsr: %i&quot;, xpsr, spsr);
 
@@ -173,7 +173,7 @@ static void fa526_write_xpsr_im8(target_t *target,
 		uint8_t xpsr_im, int rot, int spsr)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	LOG_DEBUG(&quot;xpsr_im: %2.2x, rot: %i, spsr: %i&quot;, xpsr_im, rot, spsr);
 
@@ -201,7 +201,7 @@ static void fa526_write_core_regs(target_t *target,
 {
 	int i;
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* LDMIA r0-15, [r0] at debug speed
 	* register values will start to appear on 4th DCLK
@@ -227,7 +227,7 @@ static void fa526_write_core_regs(target_t *target,
 static void fa526_write_pc(target_t *target, uint32_t pc)
 {
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* LDMIA r0-15, [r0] at debug speed
 	 * register values will start to appear on 4th DCLK
diff --git a/src/target/feroceon.c b/src/target/feroceon.c
index 73c0e57..0439f81 100644
--- a/src/target/feroceon.c
+++ b/src/target/feroceon.c
@@ -69,7 +69,7 @@ int feroceon_assert_reset(target_t *target)
 	return arm7_9_assert_reset(target);
 }
 
-int feroceon_dummy_clock_out(arm_jtag_t *jtag_info, uint32_t instr)
+int feroceon_dummy_clock_out(struct arm_jtag *jtag_info, uint32_t instr)
 {
 	struct scan_field fields[3];
 	uint8_t out_buf[4];
@@ -112,7 +112,7 @@ void feroceon_change_to_arm(target_t *target, uint32_t *r0, uint32_t *pc)
 {
 	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/*
 	 * save r0 before using it and put system in ARM state
@@ -159,7 +159,7 @@ void feroceon_read_core_regs(target_t *target, uint32_t mask, uint32_t* core_reg
 	int i;
 	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_STMIA(0, mask &amp; 0xffff, 0, 0), 0, NULL, 0);
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_NOP, 0, NULL, 0);
@@ -178,7 +178,7 @@ void feroceon_read_core_regs_target_buffer(target_t *target, uint32_t mask, void
 	int i;
 	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	int be = (target-&gt;endianness == TARGET_BIG_ENDIAN) ? 1 : 0;
 	uint32_t *buf_u32 = buffer;
 	uint16_t *buf_u16 = buffer;
@@ -214,7 +214,7 @@ void feroceon_read_xpsr(target_t *target, uint32_t *xpsr, int spsr)
 {
 	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_MRS(0, spsr &amp; 1), 0, NULL, 0);
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_NOP, 0, NULL, 0);
@@ -237,7 +237,7 @@ void feroceon_write_xpsr(target_t *target, uint32_t xpsr, int spsr)
 {
 	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	LOG_DEBUG(&quot;xpsr: %8.8&quot; PRIx32 &quot;, spsr: %i&quot;, xpsr, spsr);
 
@@ -278,7 +278,7 @@ void feroceon_write_xpsr_im8(target_t *target, uint8_t xpsr_im, int rot, int sps
 {
 	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	LOG_DEBUG(&quot;xpsr_im: %2.2x, rot: %i, spsr: %i&quot;, xpsr_im, rot, spsr);
 
@@ -296,7 +296,7 @@ void feroceon_write_core_regs(target_t *target, uint32_t mask, uint32_t core_reg
 	int i;
 	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_LDMIA(0, mask &amp; 0xffff, 0, 0), 0, NULL, 0);
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_NOP, 0, NULL, 0);
@@ -315,7 +315,7 @@ void feroceon_branch_resume(target_t *target)
 {
 	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_NOP, 0, NULL, 0);
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_NOP, 0, NULL, 0);
@@ -332,7 +332,7 @@ void feroceon_branch_resume_thumb(target_t *target)
 
 	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	uint32_t r0 = buf_get_u32(armv4_5-&gt;core_cache-&gt;reg_list[0].value, 0, 32);
 	uint32_t pc = buf_get_u32(armv4_5-&gt;core_cache-&gt;reg_list[15].value, 0, 32);
 
@@ -365,7 +365,7 @@ int feroceon_read_cp15(target_t *target, uint32_t op1, uint32_t op2, uint32_t CR
 {
 	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	int err;
 
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_MRC(15, op1, 0, CRn, CRm, op2), 0, NULL, 0);
@@ -387,7 +387,7 @@ int feroceon_write_cp15(target_t *target, uint32_t op1, uint32_t op2, uint32_t C
 {
 	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
-	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
+	struct arm_jtag *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_LDMIA(0, 1, 0, 0), 0, NULL, 0);
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_NOP, 0, NULL, 0);

commit c25e00b52810822108b54ac40dffadba62ef48d9
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:40:48 2009 -0800

    arm_load_store_multiple_instr_t -&gt; struct arm_load_store_multiple_instr
    
    Remove misleading typedef and redundant suffix from struct arm_load_store_multiple_instr.

diff --git a/src/target/arm_disassembler.h b/src/target/arm_disassembler.h
index c69ab65..77230e0 100644
--- a/src/target/arm_disassembler.h
+++ b/src/target/arm_disassembler.h
@@ -170,14 +170,14 @@ struct arm_load_store_instr
 	} offset;
 };
 
-typedef struct arm_load_store_multiple_instr_s
+struct arm_load_store_multiple_instr
 {
 	uint8_t Rn;
 	uint32_t register_list;
 	uint8_t addressing_mode; /* 0: IA, 1: IB, 2: DA, 3: DB */
 	uint8_t S;
 	uint8_t W;
-} arm_load_store_multiple_instr_t;
+};
 
 typedef struct arm_instruction_s
 {
@@ -192,7 +192,7 @@ typedef struct arm_instruction_s
 		struct arm_b_bl_bx_blx_instr b_bl_bx_blx;
 		struct arm_data_proc_instr data_proc;
 		struct arm_load_store_instr load_store;
-		arm_load_store_multiple_instr_t load_store_multiple;
+		struct arm_load_store_multiple_instr load_store_multiple;
 	} info;
 
 } arm_instruction_t;

commit 7de3c44320af79e5d666e5a4cb4a669f5ecb8eb5
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:40:44 2009 -0800

    arm_load_store_instr_t -&gt; struct arm_load_store_instr
    
    Remove misleading typedef and redundant suffix from struct arm_load_store_instr.

diff --git a/src/target/arm_disassembler.h b/src/target/arm_disassembler.h
index e7e3e95..c69ab65 100644
--- a/src/target/arm_disassembler.h
+++ b/src/target/arm_disassembler.h
@@ -152,7 +152,7 @@ struct arm_data_proc_instr
 	union arm_shifter_operand shifter_operand;
 };
 
-typedef struct arm_load_store_instr_s
+struct arm_load_store_instr
 {
 	uint8_t Rd;
 	uint8_t Rn;
@@ -168,7 +168,7 @@ typedef struct arm_load_store_instr_s
 			uint8_t shift_imm;
 		} reg;
 	} offset;
-} arm_load_store_instr_t;
+};
 
 typedef struct arm_load_store_multiple_instr_s
 {
@@ -191,7 +191,7 @@ typedef struct arm_instruction_s
 	union {
 		struct arm_b_bl_bx_blx_instr b_bl_bx_blx;
 		struct arm_data_proc_instr data_proc;
-		arm_load_store_instr_t load_store;
+		struct arm_load_store_instr load_store;
 		arm_load_store_multiple_instr_t load_store_multiple;
 	} info;
 

commit f9e091a2d3841d4b5e2f49f3b4337261974b2f2c
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:40:40 2009 -0800

    arm_data_proc_instr_t -&gt; struct arm_data_proc_instr
    
    Remove misleading typedef and redundant suffix from struct arm_data_proc_instr.

diff --git a/src/target/arm_disassembler.h b/src/target/arm_disassembler.h
index 52fe24a..e7e3e95 100644
--- a/src/target/arm_disassembler.h
+++ b/src/target/arm_disassembler.h
@@ -143,14 +143,14 @@ union arm_shifter_operand
 	} register_shift;
 };
 
-typedef struct arm_data_proc_instr_s
+struct arm_data_proc_instr
 {
 	int variant; /* 0: immediate, 1: immediate_shift, 2: register_shift */
 	uint8_t S;
 	uint8_t Rn;
 	uint8_t Rd;
 	union arm_shifter_operand shifter_operand;
-} arm_data_proc_instr_t;
+};
 
 typedef struct arm_load_store_instr_s
 {
@@ -190,7 +190,7 @@ typedef struct arm_instruction_s
 
 	union {
 		struct arm_b_bl_bx_blx_instr b_bl_bx_blx;
-		arm_data_proc_instr_t data_proc;
+		struct arm_data_proc_instr data_proc;
 		arm_load_store_instr_t load_store;
 		arm_load_store_multiple_instr_t load_store_multiple;
 	} info;

commit 67f2f8393742bd88017b54ae0cfd833265bb1517
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:40:35 2009 -0800

    arm_b_bl_bx_blx_instr_t -&gt; struct arm_b_bl_bx_blx_instr
    
    Remove misleading typedef and redundant suffix from struct arm_b_bl_bx_blx_instr.

diff --git a/src/target/arm_disassembler.h b/src/target/arm_disassembler.h
index 8021e7c..52fe24a 100644
--- a/src/target/arm_disassembler.h
+++ b/src/target/arm_disassembler.h
@@ -120,11 +120,11 @@ enum arm_instruction_type
 	ARM_UNDEFINED_INSTRUCTION = 0xffffffff,
 };
 
-typedef struct arm_b_bl_bx_blx_instr_s
+struct arm_b_bl_bx_blx_instr
 {
 	int reg_operand;
 	uint32_t target_address;
-} arm_b_bl_bx_blx_instr_t;
+};
 
 union arm_shifter_operand
 {
@@ -189,7 +189,7 @@ typedef struct arm_instruction_s
 	unsigned instruction_size;
 
 	union {
-		arm_b_bl_bx_blx_instr_t b_bl_bx_blx;
+		struct arm_b_bl_bx_blx_instr b_bl_bx_blx;
 		arm_data_proc_instr_t data_proc;
 		arm_load_store_instr_t load_store;
 		arm_load_store_multiple_instr_t load_store_multiple;

commit f96d6054e65708e7abdceac673f1a18fec3204b6
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:40:31 2009 -0800

    swjdp_common_t -&gt; struct swjdp_common
    
    Remove misleading typedef and redundant suffix from struct swjdp_common.

diff --git a/src/target/arm_adi_v5.c b/src/target/arm_adi_v5.c
index 7fc22d0..3323485 100644
--- a/src/target/arm_adi_v5.c
+++ b/src/target/arm_adi_v5.c
@@ -71,7 +71,7 @@ static uint32_t max_tar_block_size(uint32_t tar_autoincr_block, uint32_t address
 ***************************************************************************/
 
 /* Scan out and in from target ordered uint8_t buffers */
-int adi_jtag_dp_scan(swjdp_common_t *swjdp, uint8_t instr, uint8_t reg_addr, uint8_t RnW, uint8_t *outvalue, uint8_t *invalue, uint8_t *ack)
+int adi_jtag_dp_scan(struct swjdp_common *swjdp, uint8_t instr, uint8_t reg_addr, uint8_t RnW, uint8_t *outvalue, uint8_t *invalue, uint8_t *ack)
 {
 	arm_jtag_t *jtag_info = swjdp-&gt;jtag_info;
 	struct scan_field fields[2];
@@ -101,7 +101,7 @@ int adi_jtag_dp_scan(swjdp_common_t *swjdp, uint8_t instr, uint8_t reg_addr, uin
 }
 
 /* Scan out and in from host ordered uint32_t variables */
-int adi_jtag_dp_scan_u32(swjdp_common_t *swjdp, uint8_t instr, uint8_t reg_addr, uint8_t RnW, uint32_t outvalue, uint32_t *invalue, uint8_t *ack)
+int adi_jtag_dp_scan_u32(struct swjdp_common *swjdp, uint8_t instr, uint8_t reg_addr, uint8_t RnW, uint32_t outvalue, uint32_t *invalue, uint8_t *ack)
 {
 	arm_jtag_t *jtag_info = swjdp-&gt;jtag_info;
 	struct scan_field fields[2];
@@ -143,7 +143,7 @@ int adi_jtag_dp_scan_u32(swjdp_common_t *swjdp, uint8_t instr, uint8_t reg_addr,
 }
 
 /* scan_inout_check adds one extra inscan for DPAP_READ commands to read variables */
-int scan_inout_check(swjdp_common_t *swjdp, uint8_t instr, uint8_t reg_addr, uint8_t RnW, uint8_t *outvalue, uint8_t *invalue)
+int scan_inout_check(struct swjdp_common *swjdp, uint8_t instr, uint8_t reg_addr, uint8_t RnW, uint8_t *outvalue, uint8_t *invalue)
 {
 	adi_jtag_dp_scan(swjdp, instr, reg_addr, RnW, outvalue, NULL, NULL);
 
@@ -161,7 +161,7 @@ int scan_inout_check(swjdp_common_t *swjdp, uint8_t instr, uint8_t reg_addr, uin
 	return ERROR_OK;
 }
 
-int scan_inout_check_u32(swjdp_common_t *swjdp, uint8_t instr, uint8_t reg_addr, uint8_t RnW, uint32_t outvalue, uint32_t *invalue)
+int scan_inout_check_u32(struct swjdp_common *swjdp, uint8_t instr, uint8_t reg_addr, uint8_t RnW, uint32_t outvalue, uint32_t *invalue)
 {
 	adi_jtag_dp_scan_u32(swjdp, instr, reg_addr, RnW, outvalue, NULL, NULL);
 
@@ -179,7 +179,7 @@ int scan_inout_check_u32(swjdp_common_t *swjdp, uint8_t instr, uint8_t reg_addr,
 	return ERROR_OK;
 }
 
-int swjdp_transaction_endcheck(swjdp_common_t *swjdp)
+int swjdp_transaction_endcheck(struct swjdp_common *swjdp)
 {
 	int retval;
 	uint32_t ctrlstat;
@@ -287,17 +287,17 @@ int swjdp_transaction_endcheck(swjdp_common_t *swjdp)
  *                                                                         *
 ***************************************************************************/
 
-int dap_dp_write_reg(swjdp_common_t *swjdp, uint32_t value, uint8_t reg_addr)
+int dap_dp_write_reg(struct swjdp_common *swjdp, uint32_t value, uint8_t reg_addr)
 {
 	return scan_inout_check_u32(swjdp, DAP_IR_DPACC, reg_addr, DPAP_WRITE, value, NULL);
 }
 
-int dap_dp_read_reg(swjdp_common_t *swjdp, uint32_t *value, uint8_t reg_addr)
+int dap_dp_read_reg(struct swjdp_common *swjdp, uint32_t *value, uint8_t reg_addr)
 {
 	return scan_inout_check_u32(swjdp, DAP_IR_DPACC, reg_addr, DPAP_READ, 0, value);
 }
 
-int dap_ap_select(swjdp_common_t *swjdp,uint8_t apsel)
+int dap_ap_select(struct swjdp_common *swjdp,uint8_t apsel)
 {
 	uint32_t select;
 	select = (apsel &lt;&lt; 24) &amp; 0xFF000000;
@@ -314,7 +314,7 @@ int dap_ap_select(swjdp_common_t *swjdp,uint8_t apsel)
 	return ERROR_OK;
 }
 
-int dap_dp_bankselect(swjdp_common_t *swjdp,uint32_t ap_reg)
+int dap_dp_bankselect(struct swjdp_common *swjdp,uint32_t ap_reg)
 {
 	uint32_t select;
 	select = (ap_reg &amp; 0x000000F0);
@@ -328,7 +328,7 @@ int dap_dp_bankselect(swjdp_common_t *swjdp,uint32_t ap_reg)
 	return ERROR_OK;
 }
 
-int dap_ap_write_reg(swjdp_common_t *swjdp, uint32_t reg_addr, uint8_t* out_value_buf)
+int dap_ap_write_reg(struct swjdp_common *swjdp, uint32_t reg_addr, uint8_t* out_value_buf)
 {
 	dap_dp_bankselect(swjdp, reg_addr);
 	scan_inout_check(swjdp, DAP_IR_APACC, reg_addr, DPAP_WRITE, out_value_buf, NULL);
@@ -336,14 +336,14 @@ int dap_ap_write_reg(swjdp_common_t *swjdp, uint32_t reg_addr, uint8_t* out_valu
 	return ERROR_OK;
 }
 
-int dap_ap_read_reg(swjdp_common_t *swjdp, uint32_t reg_addr, uint8_t *in_value_buf)
+int dap_ap_read_reg(struct swjdp_common *swjdp, uint32_t reg_addr, uint8_t *in_value_buf)
 {
 	dap_dp_bankselect(swjdp, reg_addr);
 	scan_inout_check(swjdp, DAP_IR_APACC, reg_addr, DPAP_READ, 0, in_value_buf);
 
 	return ERROR_OK;
 }
-int dap_ap_write_reg_u32(swjdp_common_t *swjdp, uint32_t reg_addr, uint32_t value)
+int dap_ap_write_reg_u32(struct swjdp_common *swjdp, uint32_t reg_addr, uint32_t value)
 {
 	uint8_t out_value_buf[4];
 
@@ -354,7 +354,7 @@ int dap_ap_write_reg_u32(swjdp_common_t *swjdp, uint32_t reg_addr, uint32_t valu
 	return ERROR_OK;
 }
 
-int dap_ap_read_reg_u32(swjdp_common_t *swjdp, uint32_t reg_addr, uint32_t *value)
+int dap_ap_read_reg_u32(struct swjdp_common *swjdp, uint32_t reg_addr, uint32_t *value)
 {
 	dap_dp_bankselect(swjdp, reg_addr);
 	scan_inout_check_u32(swjdp, DAP_IR_APACC, reg_addr, DPAP_READ, 0, value);
@@ -368,7 +368,7 @@ int dap_ap_read_reg_u32(swjdp_common_t *swjdp, uint32_t reg_addr, uint32_t *valu
  *                                                                         *
 ***************************************************************************/
 
-int dap_setup_accessport(swjdp_common_t *swjdp, uint32_t csw, uint32_t tar)
+int dap_setup_accessport(struct swjdp_common *swjdp, uint32_t csw, uint32_t tar)
 {
 	csw = csw | CSW_DBGSWENABLE | CSW_MASTER_DEBUG | CSW_HPROT;
 	if (csw != swjdp-&gt;ap_csw_value)
@@ -393,13 +393,13 @@ int dap_setup_accessport(swjdp_common_t *swjdp, uint32_t csw, uint32_t tar)
 
 /*****************************************************************************
 *                                                                            *
-* mem_ap_read_u32(swjdp_common_t *swjdp, uint32_t address, uint32_t *value)      *
+* mem_ap_read_u32(struct swjdp_common *swjdp, uint32_t address, uint32_t *value)      *
 *                                                                            *
 * Read a uint32_t value from memory or system register                            *
 * Functionally equivalent to target_read_u32(target, address, uint32_t *value),   *
 * but with less overhead                                                     *
 *****************************************************************************/
-int mem_ap_read_u32(swjdp_common_t *swjdp, uint32_t address, uint32_t *value)
+int mem_ap_read_u32(struct swjdp_common *swjdp, uint32_t address, uint32_t *value)
 {
 	swjdp-&gt;trans_mode = TRANS_MODE_COMPOSITE;
 
@@ -409,7 +409,7 @@ int mem_ap_read_u32(swjdp_common_t *swjdp, uint32_t address, uint32_t *value)
 	return ERROR_OK;
 }
 
-int mem_ap_read_atomic_u32(swjdp_common_t *swjdp, uint32_t address, uint32_t *value)
+int mem_ap_read_atomic_u32(struct swjdp_common *swjdp, uint32_t address, uint32_t *value)
 {
 	mem_ap_read_u32(swjdp, address, value);
 
@@ -418,12 +418,12 @@ int mem_ap_read_atomic_u32(swjdp_common_t *swjdp, uint32_t address, uint32_t *va
 
 /*****************************************************************************
 *                                                                            *
-* mem_ap_write_u32(swjdp_common_t *swjdp, uint32_t address, uint32_t value)      *
+* mem_ap_write_u32(struct swjdp_common *swjdp, uint32_t address, uint32_t value)      *
 *                                                                            *
 * Write a uint32_t value to memory or memory mapped register                              *
 *                                                                            *
 *****************************************************************************/
-int mem_ap_write_u32(swjdp_common_t *swjdp, uint32_t address, uint32_t value)
+int mem_ap_write_u32(struct swjdp_common *swjdp, uint32_t address, uint32_t value)
 {
 	swjdp-&gt;trans_mode = TRANS_MODE_COMPOSITE;
 
@@ -433,7 +433,7 @@ int mem_ap_write_u32(swjdp_common_t *swjdp, uint32_t address, uint32_t value)
 	return ERROR_OK;
 }
 
-int mem_ap_write_atomic_u32(swjdp_common_t *swjdp, uint32_t address, uint32_t value)
+int mem_ap_write_atomic_u32(struct swjdp_common *swjdp, uint32_t address, uint32_t value)
 {
 	mem_ap_write_u32(swjdp, address, value);
 
@@ -442,12 +442,12 @@ int mem_ap_write_atomic_u32(swjdp_common_t *swjdp, uint32_t address, uint32_t va
 
 /*****************************************************************************
 *                                                                            *
-* mem_ap_write_buf(swjdp_common_t *swjdp, uint8_t *buffer, int count, uint32_t address) *
+* mem_ap_write_buf(struct swjdp_common *swjdp, uint8_t *buffer, int count, uint32_t address) *
 *                                                                            *
 * Write a buffer in target order (little endian)                             *
 *                                                                            *
 *****************************************************************************/
-int mem_ap_write_buf_u32(swjdp_common_t *swjdp, uint8_t *buffer, int count, uint32_t address)
+int mem_ap_write_buf_u32(struct swjdp_common *swjdp, uint8_t *buffer, int count, uint32_t address)
 {
 	int wcount, blocksize, writecount, errorcount = 0, retval = ERROR_OK;
 	uint32_t adr = address;
@@ -516,7 +516,7 @@ int mem_ap_write_buf_u32(swjdp_common_t *swjdp, uint8_t *buffer, int count, uint
 	return retval;
 }
 
-int mem_ap_write_buf_packed_u16(swjdp_common_t *swjdp, uint8_t *buffer, int count, uint32_t address)
+int mem_ap_write_buf_packed_u16(struct swjdp_common *swjdp, uint8_t *buffer, int count, uint32_t address)
 {
 	int retval = ERROR_OK;
 	int wcount, blocksize, writecount, i;
@@ -587,7 +587,7 @@ int mem_ap_write_buf_packed_u16(swjdp_common_t *swjdp, uint8_t *buffer, int coun
 	return retval;
 }
 
-int mem_ap_write_buf_u16(swjdp_common_t *swjdp, uint8_t *buffer, int count, uint32_t address)
+int mem_ap_write_buf_u16(struct swjdp_common *swjdp, uint8_t *buffer, int count, uint32_t address)
 {
 	int retval = ERROR_OK;
 
@@ -612,7 +612,7 @@ int mem_ap_write_buf_u16(swjdp_common_t *swjdp, uint8_t *buffer, int count, uint
 	return retval;
 }
 
-int mem_ap_write_buf_packed_u8(swjdp_common_t *swjdp, uint8_t *buffer, int count, uint32_t address)
+int mem_ap_write_buf_packed_u8(struct swjdp_common *swjdp, uint8_t *buffer, int count, uint32_t address)
 {
 	int retval = ERROR_OK;
 	int wcount, blocksize, writecount, i;
@@ -679,7 +679,7 @@ int mem_ap_write_buf_packed_u8(swjdp_common_t *swjdp, uint8_t *buffer, int count
 	return retval;
 }
 
-int mem_ap_write_buf_u8(swjdp_common_t *swjdp, uint8_t *buffer, int count, uint32_t address)
+int mem_ap_write_buf_u8(struct swjdp_common *swjdp, uint8_t *buffer, int count, uint32_t address)
 {
 	int retval = ERROR_OK;
 
@@ -704,12 +704,12 @@ int mem_ap_write_buf_u8(swjdp_common_t *swjdp, uint8_t *buffer, int count, uint3
 
 /*********************************************************************************
 *                                                                                *
-* mem_ap_read_buf_u32(swjdp_common_t *swjdp, uint8_t *buffer, int count, uint32_t address)  *
+* mem_ap_read_buf_u32(struct swjdp_common *swjdp, uint8_t *buffer, int count, uint32_t address)  *
 *                                                                                *
 * Read block fast in target order (little endian) into a buffer                  *
 *                                                                                *
 **********************************************************************************/
-int mem_ap_read_buf_u32(swjdp_common_t *swjdp, uint8_t *buffer, int count, uint32_t address)
+int mem_ap_read_buf_u32(struct swjdp_common *swjdp, uint8_t *buffer, int count, uint32_t address)
 {
 	int wcount, blocksize, readcount, errorcount = 0, retval = ERROR_OK;
 	uint32_t adr = address;
@@ -782,7 +782,7 @@ int mem_ap_read_buf_u32(swjdp_common_t *swjdp, uint8_t *buffer, int count, uint3
 	return retval;
 }
 
-int mem_ap_read_buf_packed_u16(swjdp_common_t *swjdp, uint8_t *buffer, int count, uint32_t address)
+int mem_ap_read_buf_packed_u16(struct swjdp_common *swjdp, uint8_t *buffer, int count, uint32_t address)
 {
 	uint32_t invalue;
 	int retval = ERROR_OK;
@@ -834,7 +834,7 @@ int mem_ap_read_buf_packed_u16(swjdp_common_t *swjdp, uint8_t *buffer, int count
 	return retval;
 }
 
-int mem_ap_read_buf_u16(swjdp_common_t *swjdp, uint8_t *buffer, int count, uint32_t address)
+int mem_ap_read_buf_u16(struct swjdp_common *swjdp, uint8_t *buffer, int count, uint32_t address)
 {
 	uint32_t invalue, i;
 	int retval = ERROR_OK;
@@ -877,7 +877,7 @@ int mem_ap_read_buf_u16(swjdp_common_t *swjdp, uint8_t *buffer, int count, uint3
  * The solution is to arrange for a large out/in scan in this loop and
  * and convert data afterwards.
  */
-int mem_ap_read_buf_packed_u8(swjdp_common_t *swjdp, uint8_t *buffer, int count, uint32_t address)
+int mem_ap_read_buf_packed_u8(struct swjdp_common *swjdp, uint8_t *buffer, int count, uint32_t address)
 {
 	uint32_t invalue;
 	int retval = ERROR_OK;
@@ -926,7 +926,7 @@ int mem_ap_read_buf_packed_u8(swjdp_common_t *swjdp, uint8_t *buffer, int count,
 	return retval;
 }
 
-int mem_ap_read_buf_u8(swjdp_common_t *swjdp, uint8_t *buffer, int count, uint32_t address)
+int mem_ap_read_buf_u8(struct swjdp_common *swjdp, uint8_t *buffer, int count, uint32_t address)
 {
 	uint32_t invalue;
 	int retval = ERROR_OK;
@@ -950,7 +950,7 @@ int mem_ap_read_buf_u8(swjdp_common_t *swjdp, uint8_t *buffer, int count, uint32
 	return retval;
 }
 
-int ahbap_debugport_init(swjdp_common_t *swjdp)
+int ahbap_debugport_init(struct swjdp_common *swjdp)
 {
 	uint32_t idreg, romaddr, dummy;
 	uint32_t ctrlstat;
@@ -1022,7 +1022,7 @@ is_dap_cid_ok(uint32_t cid3, uint32_t cid2, uint32_t cid1, uint32_t cid0)
 			&amp;&amp; ((cid1 &amp; 0x0f) == 0) &amp;&amp; cid0 == 0x0d;
 }
 
-int dap_info_command(struct command_context_s *cmd_ctx, swjdp_common_t *swjdp, int apsel)
+int dap_info_command(struct command_context_s *cmd_ctx, struct swjdp_common *swjdp, int apsel)
 {
 
 	uint32_t dbgbase,apid;
diff --git a/src/target/arm_adi_v5.h b/src/target/arm_adi_v5.h
index a52a096..5f2c969 100644
--- a/src/target/arm_adi_v5.h
+++ b/src/target/arm_adi_v5.h
@@ -82,7 +82,7 @@ struct swjdp_reg
 	arm_jtag_t *jtag_info;
 };
 
-typedef struct swjdp_common_s
+struct swjdp_common
 {
 	arm_jtag_t *jtag_info;
 	/* Control config */
@@ -102,65 +102,65 @@ typedef struct swjdp_common_s
 	/* Size of TAR autoincrement block, ARM ADI Specification requires at least 10 bits */
 	uint32_t tar_autoincr_block;
 
-} swjdp_common_t;
+};
 
 /* Accessor function for currently selected DAP-AP number */
-static inline uint8_t dap_ap_get_select(swjdp_common_t *swjdp)
+static inline uint8_t dap_ap_get_select(struct swjdp_common *swjdp)
 {
 	return (uint8_t)(swjdp -&gt;apsel &gt;&gt; 24);
 }
 
 /* Internal functions used in the module, partial transactions, use with caution */
-int dap_dp_write_reg(swjdp_common_t *swjdp, uint32_t value, uint8_t reg_addr);
-/* int swjdp_write_apacc(swjdp_common_t *swjdp, uint32_t value, uint8_t reg_addr); */
-int dap_dp_read_reg(swjdp_common_t *swjdp, uint32_t *value, uint8_t reg_addr);
-/* int swjdp_read_apacc(swjdp_common_t *swjdp, uint32_t *value, uint8_t reg_addr); */
-int dap_setup_accessport(swjdp_common_t *swjdp, uint32_t csw, uint32_t tar);
-int dap_ap_select(swjdp_common_t *swjdp,uint8_t apsel);
-
-int dap_ap_write_reg(swjdp_common_t *swjdp, uint32_t addr, uint8_t* out_buf);
-int dap_ap_write_reg_u32(swjdp_common_t *swjdp, uint32_t addr, uint32_t value);
-int dap_ap_read_reg(swjdp_common_t *swjdp, uint32_t addr, uint8_t *in_buf);
-int dap_ap_read_reg_u32(swjdp_common_t *swjdp, uint32_t addr, uint32_t *value);
+int dap_dp_write_reg(struct swjdp_common *swjdp, uint32_t value, uint8_t reg_addr);
+/* int swjdp_write_apacc(struct swjdp_common *swjdp, uint32_t value, uint8_t reg_addr); */
+int dap_dp_read_reg(struct swjdp_common *swjdp, uint32_t *value, uint8_t reg_addr);
+/* int swjdp_read_apacc(struct swjdp_common *swjdp, uint32_t *value, uint8_t reg_addr); */
+int dap_setup_accessport(struct swjdp_common *swjdp, uint32_t csw, uint32_t tar);
+int dap_ap_select(struct swjdp_common *swjdp,uint8_t apsel);
+
+int dap_ap_write_reg(struct swjdp_common *swjdp, uint32_t addr, uint8_t* out_buf);
+int dap_ap_write_reg_u32(struct swjdp_common *swjdp, uint32_t addr, uint32_t value);
+int dap_ap_read_reg(struct swjdp_common *swjdp, uint32_t addr, uint8_t *in_buf);
+int dap_ap_read_reg_u32(struct swjdp_common *swjdp, uint32_t addr, uint32_t *value);
 
 /* External interface, partial operations must be completed with swjdp_transaction_endcheck() */
-int swjdp_transaction_endcheck(swjdp_common_t *swjdp);
+int swjdp_transaction_endcheck(struct swjdp_common *swjdp);
 
 /* MEM-AP memory mapped bus single uint32_t register transfers, without endcheck */
-int mem_ap_read_u32(swjdp_common_t *swjdp, uint32_t address, uint32_t *value);
-int mem_ap_write_u32(swjdp_common_t *swjdp, uint32_t address, uint32_t value);
+int mem_ap_read_u32(struct swjdp_common *swjdp, uint32_t address, uint32_t *value);
+int mem_ap_write_u32(struct swjdp_common *swjdp, uint32_t address, uint32_t value);
 
 /* MEM-AP memory mapped bus transfers, single registers, complete transactions */
-int mem_ap_read_atomic_u32(swjdp_common_t *swjdp,
+int mem_ap_read_atomic_u32(struct swjdp_common *swjdp,
 		uint32_t address, uint32_t *value);
-int mem_ap_write_atomic_u32(swjdp_common_t *swjdp,
+int mem_ap_write_atomic_u32(struct swjdp_common *swjdp,
 		uint32_t address, uint32_t value);
 
 /* MEM-AP memory mapped bus block transfers */
-int mem_ap_read_buf_u8(swjdp_common_t *swjdp,
+int mem_ap_read_buf_u8(struct swjdp_common *swjdp,
 		uint8_t *buffer, int count, uint32_t address);
-int mem_ap_read_buf_u16(swjdp_common_t *swjdp,
+int mem_ap_read_buf_u16(struct swjdp_common *swjdp,
 		uint8_t *buffer, int count, uint32_t address);
-int mem_ap_read_buf_u32(swjdp_common_t *swjdp,
+int mem_ap_read_buf_u32(struct swjdp_common *swjdp,
 		uint8_t *buffer, int count, uint32_t address);
 
-int mem_ap_write_buf_u8(swjdp_common_t *swjdp,
+int mem_ap_write_buf_u8(struct swjdp_common *swjdp,
 		uint8_t *buffer, int count, uint32_t address);
-int mem_ap_write_buf_u16(swjdp_common_t *swjdp,
+int mem_ap_write_buf_u16(struct swjdp_common *swjdp,
 		uint8_t *buffer, int count, uint32_t address);
-int mem_ap_write_buf_u32(swjdp_common_t *swjdp,
+int mem_ap_write_buf_u32(struct swjdp_common *swjdp,
 		uint8_t *buffer, int count, uint32_t address);
 
 /* Initialisation of the debug system, power domains and registers */
-int ahbap_debugport_init(swjdp_common_t *swjdp);
+int ahbap_debugport_init(struct swjdp_common *swjdp);
 
 
 /* Commands for user dap access */
 int dap_info_command(struct command_context_s *cmd_ctx,
-		swjdp_common_t *swjdp, int apsel);
+		struct swjdp_common *swjdp, int apsel);
 
 #define DAP_COMMAND_HANDLER(name) \
-		COMMAND_HELPER(name, swjdp_common_t *swjdp)
+		COMMAND_HELPER(name, struct swjdp_common *swjdp)
 DAP_COMMAND_HANDLER(dap_baseaddr_command);
 DAP_COMMAND_HANDLER(dap_memaccess_command);
 DAP_COMMAND_HANDLER(dap_apsel_command);
diff --git a/src/target/armv7a.c b/src/target/armv7a.c
index eb5bfa9..0bba549 100644
--- a/src/target/armv7a.c
+++ b/src/target/armv7a.c
@@ -234,7 +234,7 @@ COMMAND_HANDLER(handle_dap_baseaddr_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
 	struct armv7a_common_s *armv7a = target_to_armv7a(target);
-	swjdp_common_t *swjdp = &amp;armv7a-&gt;swjdp_info;
+	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
 	return CALL_COMMAND_HANDLER(dap_baseaddr_command, swjdp);
 }
@@ -243,7 +243,7 @@ COMMAND_HANDLER(handle_dap_memaccess_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
 	struct armv7a_common_s *armv7a = target_to_armv7a(target);
-	swjdp_common_t *swjdp = &amp;armv7a-&gt;swjdp_info;
+	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
 	return CALL_COMMAND_HANDLER(dap_memaccess_command, swjdp);
 }
@@ -252,7 +252,7 @@ COMMAND_HANDLER(handle_dap_apsel_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
 	struct armv7a_common_s *armv7a = target_to_armv7a(target);
-	swjdp_common_t *swjdp = &amp;armv7a-&gt;swjdp_info;
+	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
 	return CALL_COMMAND_HANDLER(dap_apsel_command, swjdp);
 }
@@ -261,7 +261,7 @@ COMMAND_HANDLER(handle_dap_apid_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
 	struct armv7a_common_s *armv7a = target_to_armv7a(target);
-	swjdp_common_t *swjdp = &amp;armv7a-&gt;swjdp_info;
+	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
 	return CALL_COMMAND_HANDLER(dap_apid_command, swjdp);
 }
@@ -270,7 +270,7 @@ COMMAND_HANDLER(handle_dap_info_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
 	struct armv7a_common_s *armv7a = target_to_armv7a(target);
-	swjdp_common_t *swjdp = &amp;armv7a-&gt;swjdp_info;
+	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 	uint32_t apsel;
 
 	switch (argc) {
diff --git a/src/target/armv7a.h b/src/target/armv7a.h
index 2ad0321..e7a7fc2 100644
--- a/src/target/armv7a.h
+++ b/src/target/armv7a.h
@@ -97,7 +97,7 @@ typedef struct armv7a_common_s
 	enum armv7a_state core_state;
 
 	/* arm adp debug port */
-	swjdp_common_t swjdp_info;
+	struct swjdp_common swjdp_info;
 
 	/* Core Debug Unit */
 	uint32_t debug_base;
diff --git a/src/target/armv7m.c b/src/target/armv7m.c
index 0e3c8a9..62be15e 100644
--- a/src/target/armv7m.c
+++ b/src/target/armv7m.c
@@ -749,7 +749,7 @@ COMMAND_HANDLER(handle_dap_baseaddr_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
 	struct armv7m_common_s *armv7m = target_to_armv7m(target);
-	swjdp_common_t *swjdp = &amp;armv7m-&gt;swjdp_info;
+	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
 	uint32_t apsel, apselsave, baseaddr;
 	int retval;
 
@@ -786,7 +786,7 @@ COMMAND_HANDLER(handle_dap_apid_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
 	struct armv7m_common_s *armv7m = target_to_armv7m(target);
-	swjdp_common_t *swjdp = &amp;armv7m-&gt;swjdp_info;
+	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
 
 	return CALL_COMMAND_HANDLER(dap_apid_command, swjdp);
 }
@@ -795,7 +795,7 @@ COMMAND_HANDLER(handle_dap_apsel_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
 	struct armv7m_common_s *armv7m = target_to_armv7m(target);
-	swjdp_common_t *swjdp = &amp;armv7m-&gt;swjdp_info;
+	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
 
 	return CALL_COMMAND_HANDLER(dap_apsel_command, swjdp);
 }
@@ -804,7 +804,7 @@ COMMAND_HANDLER(handle_dap_memaccess_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
 	struct armv7m_common_s *armv7m = target_to_armv7m(target);
-	swjdp_common_t *swjdp = &amp;armv7m-&gt;swjdp_info;
+	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
 
 	return CALL_COMMAND_HANDLER(dap_memaccess_command, swjdp);
 }
@@ -814,7 +814,7 @@ COMMAND_HANDLER(handle_dap_info_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
 	struct armv7m_common_s *armv7m = target_to_armv7m(target);
-	swjdp_common_t *swjdp = &amp;armv7m-&gt;swjdp_info;
+	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
 	uint32_t apsel;
 
 	switch (argc) {
diff --git a/src/target/armv7m.h b/src/target/armv7m.h
index 75ba3d9..8e87c77 100644
--- a/src/target/armv7m.h
+++ b/src/target/armv7m.h
@@ -97,7 +97,7 @@ typedef struct armv7m_common_s
 	reg_cache_t *core_cache;
 	enum armv7m_mode core_mode;
 	int exception_number;
-	swjdp_common_t swjdp_info;
+	struct swjdp_common swjdp_info;
 
 	/* Direct processor core register read and writes */
 	int (*load_core_reg_u32)(struct target_s *target, enum armv7m_regtype type, uint32_t num, uint32_t *value);
diff --git a/src/target/cortex_a8.c b/src/target/cortex_a8.c
index 2a3cbad..7f0189b 100644
--- a/src/target/cortex_a8.c
+++ b/src/target/cortex_a8.c
@@ -65,7 +65,7 @@ static int cortex_a8_dap_write_coreregister_u32(target_t *target,
 static int cortex_a8_init_debug_access(target_t *target)
 {
 	struct armv7a_common_s *armv7a = target_to_armv7a(target);
-	swjdp_common_t *swjdp = &amp;armv7a-&gt;swjdp_info;
+	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
 	int retval;
 	uint32_t dummy;
@@ -95,7 +95,7 @@ int cortex_a8_exec_opcode(target_t *target, uint32_t opcode)
 	uint32_t dscr;
 	int retval;
 	struct armv7a_common_s *armv7a = target_to_armv7a(target);
-	swjdp_common_t *swjdp = &amp;armv7a-&gt;swjdp_info;
+	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
 	LOG_DEBUG(&quot;exec opcode 0x%08&quot; PRIx32, opcode);
 	do
@@ -136,7 +136,7 @@ static int cortex_a8_read_regs_through_mem(target_t *target, uint32_t address,
 {
 	int retval = ERROR_OK;
 	struct armv7a_common_s *armv7a = target_to_armv7a(target);
-	swjdp_common_t *swjdp = &amp;armv7a-&gt;swjdp_info;
+	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
 	cortex_a8_dap_read_coreregister_u32(target, regfile, 0);
 	cortex_a8_dap_write_coreregister_u32(target, address, 0);
@@ -153,7 +153,7 @@ static int cortex_a8_read_cp(target_t *target, uint32_t *value, uint8_t CP,
 {
 	int retval;
 	struct armv7a_common_s *armv7a = target_to_armv7a(target);
-	swjdp_common_t *swjdp = &amp;armv7a-&gt;swjdp_info;
+	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
 	cortex_a8_exec_opcode(target, ARMV4_5_MRC(CP, op1, 0, CRn, CRm, op2));
 	/* Move R0 to DTRTX */
@@ -172,7 +172,7 @@ static int cortex_a8_write_cp(target_t *target, uint32_t value,
 	int retval;
 	uint32_t dscr;
 	struct armv7a_common_s *armv7a = target_to_armv7a(target);
-	swjdp_common_t *swjdp = &amp;armv7a-&gt;swjdp_info;
+	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
 	LOG_DEBUG(&quot;CP%i, CRn %i, value 0x%08&quot; PRIx32, CP, CRn, value);
 
@@ -236,7 +236,7 @@ static int cortex_a8_dap_read_coreregister_u32(target_t *target,
 	uint8_t reg = regnum&amp;0xFF;
 	uint32_t dscr;
 	struct armv7a_common_s *armv7a = target_to_armv7a(target);
-	swjdp_common_t *swjdp = &amp;armv7a-&gt;swjdp_info;
+	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
 	if (reg &gt; 16)
 		return retval;
@@ -277,7 +277,7 @@ static int cortex_a8_dap_write_coreregister_u32(target_t *target, uint32_t value
 	uint8_t Rd = regnum&amp;0xFF;
 	uint32_t dscr;
 	struct armv7a_common_s *armv7a = target_to_armv7a(target);
-	swjdp_common_t *swjdp = &amp;armv7a-&gt;swjdp_info;
+	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
 	LOG_DEBUG(&quot;register %i, value 0x%08&quot; PRIx32, regnum, value);
 
@@ -324,7 +324,7 @@ static int cortex_a8_dap_write_memap_register_u32(target_t *target, uint32_t add
 {
 	int retval;
 	struct armv7a_common_s *armv7a = target_to_armv7a(target);
-	swjdp_common_t *swjdp = &amp;armv7a-&gt;swjdp_info;
+	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
 	retval = mem_ap_write_atomic_u32(swjdp, address, value);
 
@@ -341,7 +341,7 @@ static int cortex_a8_poll(target_t *target)
 	uint32_t dscr;
 	struct cortex_a8_common_s *cortex_a8 = target_to_cortex_a8(target);
 	struct armv7a_common_s *armv7a = &amp;cortex_a8-&gt;armv7a_common;
-	swjdp_common_t *swjdp = &amp;armv7a-&gt;swjdp_info;
+	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 	enum target_state prev_target_state = target-&gt;state;
 	uint8_t saved_apsel = dap_ap_get_select(swjdp);
 
@@ -405,7 +405,7 @@ static int cortex_a8_halt(target_t *target)
 	int retval = ERROR_OK;
 	uint32_t dscr;
 	struct armv7a_common_s *armv7a = target_to_armv7a(target);
-	swjdp_common_t *swjdp = &amp;armv7a-&gt;swjdp_info;
+	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 	uint8_t saved_apsel = dap_ap_get_select(swjdp);
 	dap_ap_select(swjdp, swjdp_debugap);
 
@@ -443,7 +443,7 @@ static int cortex_a8_resume(struct target_s *target, int current,
 {
 	struct armv7a_common_s *armv7a = target_to_armv7a(target);
 	struct armv4_5_common_s *armv4_5 = &amp;armv7a-&gt;armv4_5_common;
-	swjdp_common_t *swjdp = &amp;armv7a-&gt;swjdp_info;
+	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
 //	breakpoint_t *breakpoint = NULL;
 	uint32_t resume_pc, dscr;
@@ -568,7 +568,7 @@ static int cortex_a8_debug_entry(target_t *target)
 	struct cortex_a8_common_s *cortex_a8 = target_to_cortex_a8(target);
 	struct armv7a_common_s *armv7a = target_to_armv7a(target);
 	struct armv4_5_common_s *armv4_5 = &amp;armv7a-&gt;armv4_5_common;
-	swjdp_common_t *swjdp = &amp;armv7a-&gt;swjdp_info;
+	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
 	LOG_DEBUG(&quot;dscr = 0x%08&quot; PRIx32, cortex_a8-&gt;cpudbg_dscr);
 
@@ -1179,7 +1179,7 @@ static int cortex_a8_read_memory(struct target_s *target, uint32_t address,
 		uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	struct armv7a_common_s *armv7a = target_to_armv7a(target);
-	swjdp_common_t *swjdp = &amp;armv7a-&gt;swjdp_info;
+	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
 	int retval = ERROR_OK;
 
@@ -1214,7 +1214,7 @@ int cortex_a8_write_memory(struct target_s *target, uint32_t address,
 		uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	struct armv7a_common_s *armv7a = target_to_armv7a(target);
-	swjdp_common_t *swjdp = &amp;armv7a-&gt;swjdp_info;
+	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
 	int retval;
 
@@ -1271,7 +1271,7 @@ static int cortex_a8_bulk_write_memory(target_t *target, uint32_t address,
 }
 
 
-static int cortex_a8_dcc_read(swjdp_common_t *swjdp, uint8_t *value, uint8_t *ctrl)
+static int cortex_a8_dcc_read(struct swjdp_common *swjdp, uint8_t *value, uint8_t *ctrl)
 {
 #if 0
 	u16 dcrdr;
@@ -1300,7 +1300,7 @@ static int cortex_a8_handle_target_request(void *priv)
 	if (!target-&gt;type-&gt;examined)
 		return ERROR_OK;
 	struct armv7a_common_s *armv7a = target_to_armv7a(target);
-	swjdp_common_t *swjdp = &amp;armv7a-&gt;swjdp_info;
+	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
 	if (!target-&gt;dbg_msg_enabled)
 		return ERROR_OK;
@@ -1340,7 +1340,7 @@ static int cortex_a8_examine(struct target_s *target)
 {
 	struct cortex_a8_common_s *cortex_a8 = target_to_cortex_a8(target);
 	struct armv7a_common_s *armv7a = &amp;cortex_a8-&gt;armv7a_common;
-	swjdp_common_t *swjdp = &amp;armv7a-&gt;swjdp_info;
+	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 	int i;
 	int retval = ERROR_OK;
 	uint32_t didr, ctypr, ttypr, cpuid;
@@ -1458,7 +1458,7 @@ int cortex_a8_init_arch_info(target_t *target,
 
 	armv7a = &amp;cortex_a8-&gt;armv7a_common;
 	armv4_5 = &amp;armv7a-&gt;armv4_5_common;
-	swjdp_common_t *swjdp = &amp;armv7a-&gt;swjdp_info;
+	struct swjdp_common *swjdp = &amp;armv7a-&gt;swjdp_info;
 
 	/* Setup cortex_a8_common_t */
 	cortex_a8-&gt;common_magic = CORTEX_A8_COMMON_MAGIC;
diff --git a/src/target/cortex_m3.c b/src/target/cortex_m3.c
index d617817..ae71446 100644
--- a/src/target/cortex_m3.c
+++ b/src/target/cortex_m3.c
@@ -56,7 +56,7 @@ extern uint8_t armv7m_gdb_dummy_cpsr_value[];
 extern reg_t armv7m_gdb_dummy_cpsr_reg;
 #endif
 
-static int cortexm3_dap_read_coreregister_u32(swjdp_common_t *swjdp,
+static int cortexm3_dap_read_coreregister_u32(struct swjdp_common *swjdp,
 		uint32_t *value, int regnum)
 {
 	int retval;
@@ -87,7 +87,7 @@ static int cortexm3_dap_read_coreregister_u32(swjdp_common_t *swjdp,
 	return retval;
 }
 
-static int cortexm3_dap_write_coreregister_u32(swjdp_common_t *swjdp,
+static int cortexm3_dap_write_coreregister_u32(struct swjdp_common *swjdp,
 		uint32_t value, int regnum)
 {
 	int retval;
@@ -122,7 +122,7 @@ static int cortex_m3_write_debug_halt_mask(target_t *target,
 		uint32_t mask_on, uint32_t mask_off)
 {
 	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
-	struct swjdp_common_s *swjdp = &amp;cortex_m3-&gt;armv7m.swjdp_info;
+	struct swjdp_common *swjdp = &amp;cortex_m3-&gt;armv7m.swjdp_info;
 
 	/* mask off status bits */
 	cortex_m3-&gt;dcb_dhcsr &amp;= ~((0xFFFF &lt;&lt; 16) | mask_off);
@@ -135,7 +135,7 @@ static int cortex_m3_write_debug_halt_mask(target_t *target,
 static int cortex_m3_clear_halt(target_t *target)
 {
 	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
-	struct swjdp_common_s *swjdp = &amp;cortex_m3-&gt;armv7m.swjdp_info;
+	struct swjdp_common *swjdp = &amp;cortex_m3-&gt;armv7m.swjdp_info;
 
 	/* clear step if any */
 	cortex_m3_write_debug_halt_mask(target, C_HALT, C_STEP);
@@ -152,7 +152,7 @@ static int cortex_m3_clear_halt(target_t *target)
 static int cortex_m3_single_step_core(target_t *target)
 {
 	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
-	struct swjdp_common_s *swjdp = &amp;cortex_m3-&gt;armv7m.swjdp_info;
+	struct swjdp_common *swjdp = &amp;cortex_m3-&gt;armv7m.swjdp_info;
 	uint32_t dhcsr_save;
 
 	/* backup dhcsr reg */
@@ -176,7 +176,7 @@ static int cortex_m3_endreset_event(target_t *target)
 	int i;
 	uint32_t dcb_demcr;
 	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
-	struct swjdp_common_s *swjdp = &amp;cortex_m3-&gt;armv7m.swjdp_info;
+	struct swjdp_common *swjdp = &amp;cortex_m3-&gt;armv7m.swjdp_info;
 	cortex_m3_fp_comparator_t *fp_list = cortex_m3-&gt;fp_comparator_list;
 	cortex_m3_dwt_comparator_t *dwt_list = cortex_m3-&gt;dwt_comparator_list;
 
@@ -260,7 +260,7 @@ static int cortex_m3_examine_exception_reason(target_t *target)
 {
 	uint32_t shcsr, except_sr, cfsr = -1, except_ar = -1;
 	struct armv7m_common_s *armv7m = target_to_armv7m(target);
-	swjdp_common_t *swjdp = &amp;armv7m-&gt;swjdp_info;
+	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
 
 	mem_ap_read_u32(swjdp, NVIC_SHCSR, &amp;shcsr);
 	switch (armv7m-&gt;exception_number)
@@ -311,7 +311,7 @@ static int cortex_m3_debug_entry(target_t *target)
 	int retval;
 	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
 	struct armv7m_common_s *armv7m = &amp;cortex_m3-&gt;armv7m;
-	swjdp_common_t *swjdp = &amp;armv7m-&gt;swjdp_info;
+	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
 
 	LOG_DEBUG(&quot; &quot;);
 
@@ -381,7 +381,7 @@ static int cortex_m3_poll(target_t *target)
 	int retval;
 	enum target_state prev_target_state = target-&gt;state;
 	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
-	struct swjdp_common_s *swjdp = &amp;cortex_m3-&gt;armv7m.swjdp_info;
+	struct swjdp_common *swjdp = &amp;cortex_m3-&gt;armv7m.swjdp_info;
 
 	/* Read from Debug Halting Control and Status Register */
 	retval = mem_ap_read_atomic_u32(swjdp, DCB_DHCSR, &amp;cortex_m3-&gt;dcb_dhcsr);
@@ -495,7 +495,7 @@ static int cortex_m3_halt(target_t *target)
 static int cortex_m3_soft_reset_halt(struct target_s *target)
 {
 	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
-	struct swjdp_common_s *swjdp = &amp;cortex_m3-&gt;armv7m.swjdp_info;
+	struct swjdp_common *swjdp = &amp;cortex_m3-&gt;armv7m.swjdp_info;
 	uint32_t dcb_dhcsr = 0;
 	int retval, timeout = 0;
 
@@ -637,7 +637,7 @@ static int cortex_m3_step(struct target_s *target, int current,
 {
 	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
 	struct armv7m_common_s *armv7m = &amp;cortex_m3-&gt;armv7m;
-	swjdp_common_t *swjdp = &amp;armv7m-&gt;swjdp_info;
+	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
 	breakpoint_t *breakpoint = NULL;
 
 	if (target-&gt;state != TARGET_HALTED)
@@ -687,7 +687,7 @@ static int cortex_m3_step(struct target_s *target, int current,
 static int cortex_m3_assert_reset(target_t *target)
 {
 	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
-	struct swjdp_common_s *swjdp = &amp;cortex_m3-&gt;armv7m.swjdp_info;
+	struct swjdp_common *swjdp = &amp;cortex_m3-&gt;armv7m.swjdp_info;
 	int assert_srst = 1;
 
 	LOG_DEBUG(&quot;target-&gt;state: %s&quot;,
@@ -1232,7 +1232,7 @@ static int cortex_m3_load_core_reg_u32(struct target_s *target,
 {
 	int retval;
 	struct armv7m_common_s *armv7m = target_to_armv7m(target);
-	swjdp_common_t *swjdp = &amp;armv7m-&gt;swjdp_info;
+	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
 
 	/* NOTE:  we &quot;know&quot; here that the register identifiers used
 	 * in the v7m header match the Cortex-M3 Debug Core Register
@@ -1296,7 +1296,7 @@ static int cortex_m3_store_core_reg_u32(struct target_s *target,
 	int retval;
 	uint32_t reg;
 	struct armv7m_common_s *armv7m = target_to_armv7m(target);
-	swjdp_common_t *swjdp = &amp;armv7m-&gt;swjdp_info;
+	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
 
 #ifdef ARMV7_GDB_HACKS
 	/* If the LR register is being modified, make sure it will put us
@@ -1371,7 +1371,7 @@ static int cortex_m3_read_memory(struct target_s *target, uint32_t address,
 		uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	struct armv7m_common_s *armv7m = target_to_armv7m(target);
-	swjdp_common_t *swjdp = &amp;armv7m-&gt;swjdp_info;
+	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
 	int retval;
 
 	/* sanitize arguments */
@@ -1403,7 +1403,7 @@ static int cortex_m3_write_memory(struct target_s *target, uint32_t address,
 		uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	struct armv7m_common_s *armv7m = target_to_armv7m(target);
-	swjdp_common_t *swjdp = &amp;armv7m-&gt;swjdp_info;
+	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
 	int retval;
 
 	/* sanitize arguments */
@@ -1588,7 +1588,7 @@ static int cortex_m3_examine(struct target_s *target)
 	uint32_t cpuid, fpcr;
 	int i;
 	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
-	struct swjdp_common_s *swjdp = &amp;cortex_m3-&gt;armv7m.swjdp_info;
+	struct swjdp_common *swjdp = &amp;cortex_m3-&gt;armv7m.swjdp_info;
 
 	if ((retval = ahbap_debugport_init(swjdp)) != ERROR_OK)
 		return retval;
@@ -1630,7 +1630,7 @@ static int cortex_m3_examine(struct target_s *target)
 	return ERROR_OK;
 }
 
-static int cortex_m3_dcc_read(swjdp_common_t *swjdp, uint8_t *value, uint8_t *ctrl)
+static int cortex_m3_dcc_read(struct swjdp_common *swjdp, uint8_t *value, uint8_t *ctrl)
 {
 	uint16_t dcrdr;
 
@@ -1655,7 +1655,7 @@ static int cortex_m3_target_request_data(target_t *target,
 		uint32_t size, uint8_t *buffer)
 {
 	struct armv7m_common_s *armv7m = target_to_armv7m(target);
-	swjdp_common_t *swjdp = &amp;armv7m-&gt;swjdp_info;
+	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
 	uint8_t data;
 	uint8_t ctrl;
 	uint32_t i;
@@ -1675,7 +1675,7 @@ static int cortex_m3_handle_target_request(void *priv)
 	if (!target_was_examined(target))
 		return ERROR_OK;
 	struct armv7m_common_s *armv7m = target_to_armv7m(target);
-	swjdp_common_t *swjdp = &amp;armv7m-&gt;swjdp_info;
+	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
 
 	if (!target-&gt;dbg_msg_enabled)
 		return ERROR_OK;
@@ -1838,7 +1838,7 @@ COMMAND_HANDLER(handle_cortex_m3_vector_catch_command)
 	target_t *target = get_current_target(cmd_ctx);
 	struct cortex_m3_common_s *cortex_m3 = target_to_cm3(target);
 	struct armv7m_common_s *armv7m = &amp;cortex_m3-&gt;armv7m;
-	swjdp_common_t *swjdp = &amp;armv7m-&gt;swjdp_info;
+	struct swjdp_common *swjdp = &amp;armv7m-&gt;swjdp_info;
 	uint32_t demcr = 0;
 	int retval;
 	int i;

commit 6ba48a1b44d34e445af17ae66efb7e168f911a0f
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:40:27 2009 -0800

    swjdp_reg_t -&gt; struct swjdp_reg
    
    Remove misleading typedef and redundant suffix from struct swjdp_reg.

diff --git a/src/target/arm_adi_v5.h b/src/target/arm_adi_v5.h
index 90b4cbd..a52a096 100644
--- a/src/target/arm_adi_v5.h
+++ b/src/target/arm_adi_v5.h
@@ -76,11 +76,11 @@
 /* Freerunning transactions with delays and overrun checking */
 #define TRANS_MODE_COMPOSITE	2
 
-typedef struct swjdp_reg_s
+struct swjdp_reg
 {
 	int addr;
 	arm_jtag_t *jtag_info;
-} swjdp_reg_t;
+};
 
 typedef struct swjdp_common_s
 {

commit 785115a6a0a850f24f01fb385757a331eea9f093
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:40:22 2009 -0800

    arm9tdmi_common_t -&gt; struct arm9tdmi_common
    
    Remove misleading typedef and redundant suffix from struct arm9tdmi_common.

diff --git a/src/target/arm920t.c b/src/target/arm920t.c
index 97545c5..22f7b63 100644
--- a/src/target/arm920t.c
+++ b/src/target/arm920t.c
@@ -622,7 +622,7 @@ int arm920t_soft_reset_halt(struct target_s *target)
 
 int arm920t_init_arch_info(target_t *target, struct arm920t_common *arm920t, struct jtag_tap *tap)
 {
-	arm9tdmi_common_t *arm9tdmi = &amp;arm920t-&gt;arm9tdmi_common;
+	struct arm9tdmi_common *arm9tdmi = &amp;arm920t-&gt;arm9tdmi_common;
 	struct arm7_9_common *arm7_9 = &amp;arm9tdmi-&gt;arm7_9_common;
 
 	/* initialize arm9tdmi specific info (including arm7_9 and armv4_5)
diff --git a/src/target/arm920t.h b/src/target/arm920t.h
index b82c57b..b2ab459 100644
--- a/src/target/arm920t.h
+++ b/src/target/arm920t.h
@@ -27,7 +27,7 @@
 
 struct arm920t_common
 {
-	arm9tdmi_common_t arm9tdmi_common;
+	struct arm9tdmi_common arm9tdmi_common;
 	uint32_t common_magic;
 	armv4_5_mmu_common_t armv4_5_mmu;
 	uint32_t cp15_control_reg;
diff --git a/src/target/arm926ejs.c b/src/target/arm926ejs.c
index b9d13e0..9133bd9 100644
--- a/src/target/arm926ejs.c
+++ b/src/target/arm926ejs.c
@@ -669,7 +669,7 @@ static int arm926ejs_read_phys_memory(struct target_s *target,
 int arm926ejs_init_arch_info(target_t *target, struct arm926ejs_common *arm926ejs,
 		struct jtag_tap *tap)
 {
-	arm9tdmi_common_t *arm9tdmi = &amp;arm926ejs-&gt;arm9tdmi_common;
+	struct arm9tdmi_common *arm9tdmi = &amp;arm926ejs-&gt;arm9tdmi_common;
 	struct arm7_9_common *arm7_9 = &amp;arm9tdmi-&gt;arm7_9_common;
 
 	/* initialize arm9tdmi specific info (including arm7_9 and armv4_5)
diff --git a/src/target/arm926ejs.h b/src/target/arm926ejs.h
index 27320e6..ec23f14 100644
--- a/src/target/arm926ejs.h
+++ b/src/target/arm926ejs.h
@@ -27,7 +27,7 @@
 
 struct arm926ejs_common
 {
-	arm9tdmi_common_t arm9tdmi_common;
+	struct arm9tdmi_common arm9tdmi_common;
 	uint32_t common_magic;
 	armv4_5_mmu_common_t armv4_5_mmu;
 	int (*read_cp15)(target_t *target, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t *value);
diff --git a/src/target/arm966e.c b/src/target/arm966e.c
index 18e904e..524c362 100644
--- a/src/target/arm966e.c
+++ b/src/target/arm966e.c
@@ -34,7 +34,7 @@
 
 int arm966e_init_arch_info(target_t *target, struct arm966e_common *arm966e, struct jtag_tap *tap)
 {
-	arm9tdmi_common_t *arm9tdmi = &amp;arm966e-&gt;arm9tdmi_common;
+	struct arm9tdmi_common *arm9tdmi = &amp;arm966e-&gt;arm9tdmi_common;
 	struct arm7_9_common *arm7_9 = &amp;arm9tdmi-&gt;arm7_9_common;
 
 	arm9tdmi_init_arch_info(target, arm9tdmi, tap);
diff --git a/src/target/arm966e.h b/src/target/arm966e.h
index d8f9cc4..e6155b5 100644
--- a/src/target/arm966e.h
+++ b/src/target/arm966e.h
@@ -29,7 +29,7 @@
 
 struct arm966e_common
 {
-	arm9tdmi_common_t arm9tdmi_common;
+	struct arm9tdmi_common arm9tdmi_common;
 	int common_magic;
 	uint32_t cp15_control_reg;
 };
diff --git a/src/target/arm9tdmi.c b/src/target/arm9tdmi.c
index 7176ab3..985b7ff 100644
--- a/src/target/arm9tdmi.c
+++ b/src/target/arm9tdmi.c
@@ -786,7 +786,7 @@ int arm9tdmi_init_target(struct command_context_s *cmd_ctx,
 	return ERROR_OK;
 }
 
-int arm9tdmi_init_arch_info(target_t *target, arm9tdmi_common_t *arm9tdmi, struct jtag_tap *tap)
+int arm9tdmi_init_arch_info(target_t *target, struct arm9tdmi_common *arm9tdmi, struct jtag_tap *tap)
 {
 	armv4_5_common_t *armv4_5;
 	struct arm7_9_common *arm7_9;
@@ -848,7 +848,7 @@ int arm9tdmi_init_arch_info(target_t *target, arm9tdmi_common_t *arm9tdmi, struc
 
 static int arm9tdmi_target_create(struct target_s *target, Jim_Interp *interp)
 {
-	arm9tdmi_common_t *arm9tdmi = calloc(1,sizeof(arm9tdmi_common_t));
+	struct arm9tdmi_common *arm9tdmi = calloc(1,sizeof(struct arm9tdmi_common));
 
 	arm9tdmi_init_arch_info(target, arm9tdmi, target-&gt;tap);
 	arm9tdmi-&gt;arm7_9_common.armv4_5_common.is_armv4 = true;
diff --git a/src/target/arm9tdmi.h b/src/target/arm9tdmi.h
index 85ed029..61d1ccf 100644
--- a/src/target/arm9tdmi.h
+++ b/src/target/arm9tdmi.h
@@ -28,10 +28,10 @@
 /* FIXME we don't really need a separate arm9tdmi struct any more...
  * remove it, the arm7/arm9 common struct suffices.
  */
-typedef struct arm9tdmi_common_s
+struct arm9tdmi_common
 {
 	struct arm7_9_common arm7_9_common;
-} arm9tdmi_common_t;
+};
 
 typedef struct arm9tdmi_vector_s
 {
@@ -55,7 +55,7 @@ int arm9tdmi_init_target(struct command_context_s *cmd_ctx,
 		struct target_s *target);
 int arm9tdmi_examine(struct target_s *target);
 int arm9tdmi_init_arch_info(target_t *target,
-		arm9tdmi_common_t *arm9tdmi, struct jtag_tap *tap);
+		struct arm9tdmi_common *arm9tdmi, struct jtag_tap *tap);
 int arm9tdmi_register_commands(struct command_context_s *cmd_ctx);
 
 int arm9tdmi_clock_out(arm_jtag_t *jtag_info,
diff --git a/src/target/fa526.c b/src/target/fa526.c
index 95999b3..4aa5e3a 100644
--- a/src/target/fa526.c
+++ b/src/target/fa526.c
@@ -256,7 +256,7 @@ static void fa526_branch_resume_thumb(target_t *target)
 }
 
 static int fa526_init_arch_info_2(target_t *target,
-		arm9tdmi_common_t *arm9tdmi, struct jtag_tap *tap)
+		struct arm9tdmi_common *arm9tdmi, struct jtag_tap *tap)
 {
 	struct arm7_9_common *arm7_9;
 
@@ -317,7 +317,7 @@ static int fa526_init_arch_info_2(target_t *target,
 static int fa526_init_arch_info(target_t *target,
 		struct arm920t_common *arm920t, struct jtag_tap *tap)
 {
-	arm9tdmi_common_t *arm9tdmi = &amp;arm920t-&gt;arm9tdmi_common;
+	struct arm9tdmi_common *arm9tdmi = &amp;arm920t-&gt;arm9tdmi_common;
 	struct arm7_9_common *arm7_9 = &amp;arm9tdmi-&gt;arm7_9_common;
 
 	/* initialize arm9tdmi specific info (including arm7_9 and armv4_5)

commit 1ad4ee2deb5a888cb9f9b825a0e4fbfa68aa1218
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:40:18 2009 -0800

    arm966e_common_t -&gt; struct arm966e_common
    
    Remove misleading typedef and redundant suffix from struct arm966e_common.

diff --git a/src/target/arm966e.c b/src/target/arm966e.c
index c752aea..18e904e 100644
--- a/src/target/arm966e.c
+++ b/src/target/arm966e.c
@@ -32,7 +32,7 @@
 #define _DEBUG_INSTRUCTION_EXECUTION_
 #endif
 
-int arm966e_init_arch_info(target_t *target, arm966e_common_t *arm966e, struct jtag_tap *tap)
+int arm966e_init_arch_info(target_t *target, struct arm966e_common *arm966e, struct jtag_tap *tap)
 {
 	arm9tdmi_common_t *arm9tdmi = &amp;arm966e-&gt;arm9tdmi_common;
 	struct arm7_9_common *arm7_9 = &amp;arm9tdmi-&gt;arm7_9_common;
@@ -52,13 +52,13 @@ int arm966e_init_arch_info(target_t *target, arm966e_common_t *arm966e, struct j
 
 static int arm966e_target_create(struct target_s *target, Jim_Interp *interp)
 {
-	arm966e_common_t *arm966e = calloc(1,sizeof(arm966e_common_t));
+	struct arm966e_common *arm966e = calloc(1,sizeof(struct arm966e_common));
 
 	return arm966e_init_arch_info(target, arm966e, target-&gt;tap);
 }
 
 static int arm966e_verify_pointer(struct command_context_s *cmd_ctx,
-		struct arm966e_common_s *arm966e)
+		struct arm966e_common *arm966e)
 {
 	if (arm966e-&gt;common_magic != ARM966E_COMMON_MAGIC) {
 		command_print(cmd_ctx, &quot;target is not an ARM966&quot;);
@@ -166,7 +166,7 @@ COMMAND_HANDLER(arm966e_handle_cp15_command)
 {
 	int retval;
 	target_t *target = get_current_target(cmd_ctx);
-	struct arm966e_common_s *arm966e = target_to_arm966(target);
+	struct arm966e_common *arm966e = target_to_arm966(target);
 
 	retval = arm966e_verify_pointer(cmd_ctx, arm966e);
 	if (retval != ERROR_OK)
diff --git a/src/target/arm966e.h b/src/target/arm966e.h
index e311659..d8f9cc4 100644
--- a/src/target/arm966e.h
+++ b/src/target/arm966e.h
@@ -27,22 +27,22 @@
 
 #define	ARM966E_COMMON_MAGIC 0x20f920f9
 
-typedef struct arm966e_common_s
+struct arm966e_common
 {
 	arm9tdmi_common_t arm9tdmi_common;
 	int common_magic;
 	uint32_t cp15_control_reg;
-} arm966e_common_t;
+};
 
-static inline struct arm966e_common_s *
+static inline struct arm966e_common *
 target_to_arm966(struct target_s *target)
 {
-	return container_of(target-&gt;arch_info, struct arm966e_common_s,
+	return container_of(target-&gt;arch_info, struct arm966e_common,
 			arm9tdmi_common.arm7_9_common.armv4_5_common);
 }
 
 int arm966e_init_arch_info(target_t *target,
-		arm966e_common_t *arm966e, struct jtag_tap *tap);
+		struct arm966e_common *arm966e, struct jtag_tap *tap);
 int arm966e_register_commands(struct command_context_s *cmd_ctx);
 int arm966e_write_cp15(target_t *target, int reg_addr, uint32_t value);
 
diff --git a/src/target/feroceon.c b/src/target/feroceon.c
index 3026ed2..73c0e57 100644
--- a/src/target/feroceon.c
+++ b/src/target/feroceon.c
@@ -632,7 +632,7 @@ int feroceon_target_create(struct target_s *target, Jim_Interp *interp)
 
 int dragonite_target_create(struct target_s *target, Jim_Interp *interp)
 {
-	arm966e_common_t *arm966e = calloc(1,sizeof(arm966e_common_t));
+	struct arm966e_common *arm966e = calloc(1,sizeof(struct arm966e_common));
 
 	arm966e_init_arch_info(target, arm966e, target-&gt;tap);
 	feroceon_common_setup(target);

commit 5f68f45186c1fe73e1c83bd5847edd6bfaf06b34
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:40:15 2009 -0800

    arm926ejs_common_t -&gt; struct arm926ejs_common
    
    Remove misleading typedef and redundant suffix from struct arm926ejs_common.

diff --git a/src/target/arm926ejs.c b/src/target/arm926ejs.c
index c6aeaed..b9d13e0 100644
--- a/src/target/arm926ejs.c
+++ b/src/target/arm926ejs.c
@@ -334,7 +334,7 @@ static int arm926ejs_examine_debug_reason(target_t *target)
 
 static uint32_t arm926ejs_get_ttb(target_t *target)
 {
-	struct arm926ejs_common_s *arm926ejs = target_to_arm926(target);
+	struct arm926ejs_common *arm926ejs = target_to_arm926(target);
 	int retval;
 	uint32_t ttb = 0x0;
 
@@ -347,7 +347,7 @@ static uint32_t arm926ejs_get_ttb(target_t *target)
 static void arm926ejs_disable_mmu_caches(target_t *target, int mmu,
 		int d_u_cache, int i_cache)
 {
-	struct arm926ejs_common_s *arm926ejs = target_to_arm926(target);
+	struct arm926ejs_common *arm926ejs = target_to_arm926(target);
 	uint32_t cp15_control;
 
 	/* read cp15 control register */
@@ -396,7 +396,7 @@ static void arm926ejs_disable_mmu_caches(target_t *target, int mmu,
 static void arm926ejs_enable_mmu_caches(target_t *target, int mmu,
 		int d_u_cache, int i_cache)
 {
-	struct arm926ejs_common_s *arm926ejs = target_to_arm926(target);
+	struct arm926ejs_common *arm926ejs = target_to_arm926(target);
 	uint32_t cp15_control;
 
 	/* read cp15 control register */
@@ -417,7 +417,7 @@ static void arm926ejs_enable_mmu_caches(target_t *target, int mmu,
 
 static void arm926ejs_post_debug_entry(target_t *target)
 {
-	struct arm926ejs_common_s *arm926ejs = target_to_arm926(target);
+	struct arm926ejs_common *arm926ejs = target_to_arm926(target);
 
 	/* examine cp15 control reg */
 	arm926ejs-&gt;read_cp15(target, 0, 0, 1, 0, &amp;arm926ejs-&gt;cp15_control_reg);
@@ -456,7 +456,7 @@ static void arm926ejs_post_debug_entry(target_t *target)
 
 static void arm926ejs_pre_restore_context(target_t *target)
 {
-	struct arm926ejs_common_s *arm926ejs = target_to_arm926(target);
+	struct arm926ejs_common *arm926ejs = target_to_arm926(target);
 
 	/* restore i/d fault status and address register */
 	arm926ejs-&gt;write_cp15(target, 0, 0, 5, 0, arm926ejs-&gt;d_fsr);
@@ -475,7 +475,7 @@ static void arm926ejs_pre_restore_context(target_t *target)
 static const char arm926_not[] = &quot;target is not an ARM926&quot;;
 
 static int arm926ejs_verify_pointer(struct command_context_s *cmd_ctx,
-		struct arm926ejs_common_s *arm926)
+		struct arm926ejs_common *arm926)
 {
 	if (arm926-&gt;common_magic != ARM926EJS_COMMON_MAGIC) {
 		command_print(cmd_ctx, arm926_not);
@@ -492,7 +492,7 @@ int arm926ejs_arch_state(struct target_s *target)
 		&quot;disabled&quot;, &quot;enabled&quot;
 	};
 
-	struct arm926ejs_common_s *arm926ejs = target_to_arm926(target);
+	struct arm926ejs_common *arm926ejs = target_to_arm926(target);
 	struct armv4_5_common_s *armv4_5;
 
 	if (arm926ejs-&gt;common_magic != ARM926EJS_COMMON_MAGIC)
@@ -521,7 +521,7 @@ int arm926ejs_arch_state(struct target_s *target)
 int arm926ejs_soft_reset_halt(struct target_s *target)
 {
 	int retval = ERROR_OK;
-	struct arm926ejs_common_s *arm926ejs = target_to_arm926(target);
+	struct arm926ejs_common *arm926ejs = target_to_arm926(target);
 	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
 	reg_t *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
@@ -589,7 +589,7 @@ int arm926ejs_write_memory(struct target_s *target, uint32_t address,
 		uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	int retval;
-	struct arm926ejs_common_s *arm926ejs = target_to_arm926(target);
+	struct arm926ejs_common *arm926ejs = target_to_arm926(target);
 
 	/* FIX!!!! this should be cleaned up and made much more general. The
 	 * plan is to write up and test on arm926ejs specifically and
@@ -650,7 +650,7 @@ static int arm926ejs_write_phys_memory(struct target_s *target,
 		uint32_t address, uint32_t size,
 		uint32_t count, uint8_t *buffer)
 {
-	struct arm926ejs_common_s *arm926ejs = target_to_arm926(target);
+	struct arm926ejs_common *arm926ejs = target_to_arm926(target);
 
 	return armv4_5_mmu_write_physical(target, &amp;arm926ejs-&gt;armv4_5_mmu,
 			address, size, count, buffer);
@@ -660,13 +660,13 @@ static int arm926ejs_read_phys_memory(struct target_s *target,
 		uint32_t address, uint32_t size,
 		uint32_t count, uint8_t *buffer)
 {
-	struct arm926ejs_common_s *arm926ejs = target_to_arm926(target);
+	struct arm926ejs_common *arm926ejs = target_to_arm926(target);
 
 	return armv4_5_mmu_read_physical(target, &amp;arm926ejs-&gt;armv4_5_mmu,
 			address, size, count, buffer);
 }
 
-int arm926ejs_init_arch_info(target_t *target, arm926ejs_common_t *arm926ejs,
+int arm926ejs_init_arch_info(target_t *target, struct arm926ejs_common *arm926ejs,
 		struct jtag_tap *tap)
 {
 	arm9tdmi_common_t *arm9tdmi = &amp;arm926ejs-&gt;arm9tdmi_common;
@@ -705,7 +705,7 @@ int arm926ejs_init_arch_info(target_t *target, arm926ejs_common_t *arm926ejs,
 
 static int arm926ejs_target_create(struct target_s *target, Jim_Interp *interp)
 {
-	arm926ejs_common_t *arm926ejs = calloc(1,sizeof(arm926ejs_common_t));
+	struct arm926ejs_common *arm926ejs = calloc(1,sizeof(struct arm926ejs_common));
 
 	/* ARM9EJ-S core always reports 0x1 in Capture-IR */
 	target-&gt;tap-&gt;ir_capture_mask = 0x0f;
@@ -717,7 +717,7 @@ COMMAND_HANDLER(arm926ejs_handle_cp15_command)
 {
 	int retval;
 	target_t *target = get_current_target(cmd_ctx);
-	struct arm926ejs_common_s *arm926ejs = target_to_arm926(target);
+	struct arm926ejs_common *arm926ejs = target_to_arm926(target);
 	int opcode_1;
 	int opcode_2;
 	int CRn;
@@ -778,7 +778,7 @@ COMMAND_HANDLER(arm926ejs_handle_cache_info_command)
 {
 	int retval;
 	target_t *target = get_current_target(cmd_ctx);
-	struct arm926ejs_common_s *arm926ejs = target_to_arm926(target);
+	struct arm926ejs_common *arm926ejs = target_to_arm926(target);
 
 	retval = arm926ejs_verify_pointer(cmd_ctx, arm926ejs);
 	if (retval != ERROR_OK)
@@ -793,7 +793,7 @@ static int arm926ejs_virt2phys(struct target_s *target, uint32_t virtual, uint32
 	uint32_t cb;
 	int domain;
 	uint32_t ap;
-	struct arm926ejs_common_s *arm926ejs = target_to_arm926(target);
+	struct arm926ejs_common *arm926ejs = target_to_arm926(target);
 
 	uint32_t ret = armv4_5_mmu_translate_va(target, &amp;arm926ejs-&gt;armv4_5_mmu, virtual, &amp;type, &amp;cb, &amp;domain, &amp;ap);
 	if (type == -1)
@@ -806,7 +806,7 @@ static int arm926ejs_virt2phys(struct target_s *target, uint32_t virtual, uint32
 
 static int arm926ejs_mmu(struct target_s *target, int *enabled)
 {
-	struct arm926ejs_common_s *arm926ejs = target_to_arm926(target);
+	struct arm926ejs_common *arm926ejs = target_to_arm926(target);
 
 	if (target-&gt;state != TARGET_HALTED)
 	{
diff --git a/src/target/arm926ejs.h b/src/target/arm926ejs.h
index f0df091..27320e6 100644
--- a/src/target/arm926ejs.h
+++ b/src/target/arm926ejs.h
@@ -25,7 +25,7 @@
 
 #define	ARM926EJS_COMMON_MAGIC 0xa926a926
 
-typedef struct arm926ejs_common_s
+struct arm926ejs_common
 {
 	arm9tdmi_common_t arm9tdmi_common;
 	uint32_t common_magic;
@@ -36,18 +36,18 @@ typedef struct arm926ejs_common_s
 	uint32_t d_fsr;
 	uint32_t i_fsr;
 	uint32_t d_far;
-} arm926ejs_common_t;
+};
 
-static inline struct arm926ejs_common_s *
+static inline struct arm926ejs_common *
 target_to_arm926(struct target_s *target)
 {
-	return container_of(target-&gt;arch_info, struct arm926ejs_common_s,
+	return container_of(target-&gt;arch_info, struct arm926ejs_common,
 		arm9tdmi_common.arm7_9_common.armv4_5_common);
 }
 
 
 int arm926ejs_init_arch_info(target_t *target,
-		arm926ejs_common_t *arm926ejs, struct jtag_tap *tap);
+		struct arm926ejs_common *arm926ejs, struct jtag_tap *tap);
 int arm926ejs_register_commands(struct command_context_s *cmd_ctx);
 int arm926ejs_arch_state(struct target_s *target);
 int arm926ejs_write_memory(struct target_s *target,
diff --git a/src/target/feroceon.c b/src/target/feroceon.c
index d203293..3026ed2 100644
--- a/src/target/feroceon.c
+++ b/src/target/feroceon.c
@@ -618,7 +618,7 @@ void feroceon_common_setup(struct target_s *target)
 
 int feroceon_target_create(struct target_s *target, Jim_Interp *interp)
 {
-	arm926ejs_common_t *arm926ejs = calloc(1,sizeof(arm926ejs_common_t));
+	struct arm926ejs_common *arm926ejs = calloc(1,sizeof(struct arm926ejs_common));
 
 	arm926ejs_init_arch_info(target, arm926ejs, target-&gt;tap);
 	feroceon_common_setup(target);

commit 16487e70856a72f9cbe174c7d7d2fb6a1f258100
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:40:12 2009 -0800

    arm920t_tlb_entry_t -&gt; struct arm920t_tlb_entry
    
    Remove misleading typedef and redundant suffix from struct arm920t_tlb_entry.

diff --git a/src/target/arm920t.c b/src/target/arm920t.c
index 871d2f7..97545c5 100644
--- a/src/target/arm920t.c
+++ b/src/target/arm920t.c
@@ -922,7 +922,7 @@ COMMAND_HANDLER(arm920t_handle_read_mmu_command)
 	int i;
 	FILE *output;
 	uint32_t Dlockdown, Ilockdown;
-	arm920t_tlb_entry_t d_tlb[64], i_tlb[64];
+	struct arm920t_tlb_entry d_tlb[64], i_tlb[64];
 	int victim;
 
 	retval = arm920t_verify_pointer(cmd_ctx, arm920t);
diff --git a/src/target/arm920t.h b/src/target/arm920t.h
index 9a837b5..b82c57b 100644
--- a/src/target/arm920t.h
+++ b/src/target/arm920t.h
@@ -51,12 +51,12 @@ struct arm920t_cache_line
 	uint32_t data[8];
 };
 
-typedef struct arm920t_tlb_entry_s
+struct arm920t_tlb_entry
 {
 	uint32_t cam;
 	uint32_t ram1;
 	uint32_t ram2;
-} arm920t_tlb_entry_t;
+};
 
 int arm920t_arch_state(struct target_s *target);
 int arm920t_soft_reset_halt(struct target_s *target);

commit b174a0d75ec81fbcd075c8c8d7f915e4a3d76bc3
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:40:09 2009 -0800

    arm920t_cache_line_t -&gt; struct arm920t_cache_line
    
    Remove misleading typedef and redundant suffix from struct arm920t_cache_line.

diff --git a/src/target/arm920t.c b/src/target/arm920t.c
index 336b01c..871d2f7 100644
--- a/src/target/arm920t.c
+++ b/src/target/arm920t.c
@@ -676,7 +676,7 @@ COMMAND_HANDLER(arm920t_handle_read_cache_command)
 	uint32_t C15_C_D_Ind, C15_C_I_Ind;
 	int i;
 	FILE *output;
-	arm920t_cache_line_t d_cache[8][64], i_cache[8][64];
+	struct arm920t_cache_line d_cache[8][64], i_cache[8][64];
 	int segment, index;
 
 	retval = arm920t_verify_pointer(cmd_ctx, arm920t);
diff --git a/src/target/arm920t.h b/src/target/arm920t.h
index 38dafcf..9a837b5 100644
--- a/src/target/arm920t.h
+++ b/src/target/arm920t.h
@@ -45,11 +45,11 @@ target_to_arm920(struct target_s *target)
 			arm9tdmi_common.arm7_9_common.armv4_5_common);
 }
 
-typedef struct arm920t_cache_line_s
+struct arm920t_cache_line
 {
 	uint32_t cam;
 	uint32_t data[8];
-} arm920t_cache_line_t;
+};
 
 typedef struct arm920t_tlb_entry_s
 {

commit 8e77975b92a75d392727339eccd6cc7898628ebb
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:40:06 2009 -0800

    arm7tdmi_common_t -&gt; struct arm7tdmi_common
    
    Remove misleading typedef and redundant suffix from struct arm7tdmi_common.

diff --git a/src/target/arm720t.c b/src/target/arm720t.c
index d9d31da..a6641d0 100644
--- a/src/target/arm720t.c
+++ b/src/target/arm720t.c
@@ -379,7 +379,7 @@ static int arm720t_init_target(struct command_context_s *cmd_ctx, struct target_
 static int arm720t_init_arch_info(target_t *target,
 		struct arm720t_common *arm720t, struct jtag_tap *tap)
 {
-	arm7tdmi_common_t *arm7tdmi = &amp;arm720t-&gt;arm7tdmi_common;
+	struct arm7tdmi_common *arm7tdmi = &amp;arm720t-&gt;arm7tdmi_common;
 	struct arm7_9_common *arm7_9 = &amp;arm7tdmi-&gt;arm7_9_common;
 
 	arm7tdmi_init_arch_info(target, arm7tdmi, tap);
diff --git a/src/target/arm720t.h b/src/target/arm720t.h
index 25c682a..c5e2809 100644
--- a/src/target/arm720t.h
+++ b/src/target/arm720t.h
@@ -27,7 +27,7 @@
 
 struct arm720t_common
 {
-	arm7tdmi_common_t arm7tdmi_common;
+	struct arm7tdmi_common arm7tdmi_common;
 	uint32_t common_magic;
 	armv4_5_mmu_common_t armv4_5_mmu;
 	uint32_t cp15_control_reg;
diff --git a/src/target/arm7tdmi.c b/src/target/arm7tdmi.c
index 6644726..2614d9e 100644
--- a/src/target/arm7tdmi.c
+++ b/src/target/arm7tdmi.c
@@ -691,7 +691,7 @@ int arm7tdmi_init_target(struct command_context_s *cmd_ctx, struct target_s *tar
 	return ERROR_OK;
 }
 
-int arm7tdmi_init_arch_info(target_t *target, arm7tdmi_common_t *arm7tdmi, struct jtag_tap *tap)
+int arm7tdmi_init_arch_info(target_t *target, struct arm7tdmi_common *arm7tdmi, struct jtag_tap *tap)
 {
 	struct arm7_9_common *arm7_9 = &amp;arm7tdmi-&gt;arm7_9_common;
 
@@ -743,9 +743,9 @@ int arm7tdmi_init_arch_info(target_t *target, arm7tdmi_common_t *arm7tdmi, struc
 
 static int arm7tdmi_target_create(struct target_s *target, Jim_Interp *interp)
 {
-	arm7tdmi_common_t *arm7tdmi;
+	struct arm7tdmi_common *arm7tdmi;
 
-	arm7tdmi = calloc(1,sizeof(arm7tdmi_common_t));
+	arm7tdmi = calloc(1,sizeof(struct arm7tdmi_common));
 	arm7tdmi_init_arch_info(target, arm7tdmi, target-&gt;tap);
 	arm7tdmi-&gt;arm7_9_common.armv4_5_common.is_armv4 = true;
 
diff --git a/src/target/arm7tdmi.h b/src/target/arm7tdmi.h
index b699697..4faec18 100644
--- a/src/target/arm7tdmi.h
+++ b/src/target/arm7tdmi.h
@@ -28,12 +28,12 @@
 /* FIXME we don't really need a separate arm7tdmi struct any more...
  * remove it, the arm7/arm9 common struct suffices.
  */
-typedef struct arm7tdmi_common_s
+struct arm7tdmi_common
 {
 	struct arm7_9_common arm7_9_common;
-} arm7tdmi_common_t;
+};
 
-int arm7tdmi_init_arch_info(target_t *target, arm7tdmi_common_t *arm7tdmi, struct jtag_tap *tap);
+int arm7tdmi_init_arch_info(target_t *target, struct arm7tdmi_common *arm7tdmi, struct jtag_tap *tap);
 int arm7tdmi_init_target(struct command_context_s *cmd_ctx, struct target_s *target);
 int arm7tdmi_examine(struct target_s *target);
 

commit 8012b3963fc49c7edf87f31a93bc0039095f5b59
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:40:03 2009 -0800

    arm7_9_common_t -&gt; struct arm7_9_common
    
    Remove misleading typedef and redundant suffix from struct arm7_9_common.

diff --git a/src/flash/ocl.c b/src/flash/ocl.c
index 10ac230..83c8fcf 100644
--- a/src/flash/ocl.c
+++ b/src/flash/ocl.c
@@ -48,7 +48,7 @@ FLASH_BANK_COMMAND_HANDLER(ocl_flash_bank_command)
 {
 	int retval;
 	armv4_5_common_t *armv4_5;
-	arm7_9_common_t *arm7_9;
+	struct arm7_9_common *arm7_9;
 	struct ocl_priv *ocl;
 
 	if (argc &lt; 6)
diff --git a/src/flash/str9xpec.c b/src/flash/str9xpec.c
index c47b9c5..ad51cf1 100644
--- a/src/flash/str9xpec.c
+++ b/src/flash/str9xpec.c
@@ -239,7 +239,7 @@ FLASH_BANK_COMMAND_HANDLER(str9xpec_flash_bank_command)
 {
 	struct str9xpec_flash_controller *str9xpec_info;
 	armv4_5_common_t *armv4_5 = NULL;
-	arm7_9_common_t *arm7_9 = NULL;
+	struct arm7_9_common *arm7_9 = NULL;
 	arm_jtag_t *jtag_info = NULL;
 
 	if (argc &lt; 6)
diff --git a/src/target/arm720t.c b/src/target/arm720t.c
index 1d15dc9..d9d31da 100644
--- a/src/target/arm720t.c
+++ b/src/target/arm720t.c
@@ -380,7 +380,7 @@ static int arm720t_init_arch_info(target_t *target,
 		struct arm720t_common *arm720t, struct jtag_tap *tap)
 {
 	arm7tdmi_common_t *arm7tdmi = &amp;arm720t-&gt;arm7tdmi_common;
-	arm7_9_common_t *arm7_9 = &amp;arm7tdmi-&gt;arm7_9_common;
+	struct arm7_9_common *arm7_9 = &amp;arm7tdmi-&gt;arm7_9_common;
 
 	arm7tdmi_init_arch_info(target, arm7tdmi, tap);
 
diff --git a/src/target/arm7_9_common.c b/src/target/arm7_9_common.c
index 0289d3c..3894f85 100644
--- a/src/target/arm7_9_common.c
+++ b/src/target/arm7_9_common.c
@@ -45,7 +45,7 @@ int arm7_9_debug_entry(target_t *target);
  * @param arm7_9 Pointer to the common struct for an ARM7/9 target
  * @return JTAG error status after executing queue
  */
-static int arm7_9_clear_watchpoints(arm7_9_common_t *arm7_9)
+static int arm7_9_clear_watchpoints(struct arm7_9_common *arm7_9)
 {
 	LOG_DEBUG(&quot;-&quot;);
 	embeddedice_write_reg(&amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_W0_CONTROL_VALUE], 0x0);
@@ -66,7 +66,7 @@ static int arm7_9_clear_watchpoints(arm7_9_common_t *arm7_9)
  * @param arm7_9 Pointer to the common struct for an ARM7/9 target
  * @param breakpoint Pointer to the breakpoint to be used as a watchpoint
  */
-static void arm7_9_assign_wp(arm7_9_common_t *arm7_9, breakpoint_t *breakpoint)
+static void arm7_9_assign_wp(struct arm7_9_common *arm7_9, breakpoint_t *breakpoint)
 {
 	if (!arm7_9-&gt;wp0_used)
 	{
@@ -97,7 +97,7 @@ static void arm7_9_assign_wp(arm7_9_common_t *arm7_9, breakpoint_t *breakpoint)
  * @return Error codes if there is a problem finding a watchpoint or the result
  *         of executing the JTAG queue
  */
-static int arm7_9_set_software_breakpoints(arm7_9_common_t *arm7_9)
+static int arm7_9_set_software_breakpoints(struct arm7_9_common *arm7_9)
 {
 	if (arm7_9-&gt;sw_breakpoints_added)
 	{
@@ -161,7 +161,7 @@ static int arm7_9_set_software_breakpoints(arm7_9_common_t *arm7_9)
  */
 int arm7_9_setup(target_t *target)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 
 	return arm7_9_clear_watchpoints(arm7_9);
 }
@@ -178,9 +178,9 @@ int arm7_9_setup(target_t *target)
  *                 targets
  * @return ERROR_OK if successful
  */
-int arm7_9_get_arch_pointers(target_t *target, armv4_5_common_t **armv4_5_p, arm7_9_common_t **arm7_9_p)
+int arm7_9_get_arch_pointers(target_t *target, armv4_5_common_t **armv4_5_p, struct arm7_9_common **arm7_9_p)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
 
 	/* FIXME stop using this routine; just target_to_arm7_9() and
@@ -212,7 +212,7 @@ int arm7_9_get_arch_pointers(target_t *target, armv4_5_common_t **armv4_5_p, arm
  */
 int arm7_9_set_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	int retval = ERROR_OK;
 
 	LOG_DEBUG(&quot;BPID: %d, Address: 0x%08&quot; PRIx32 &quot;, Type: %d&quot; ,
@@ -342,7 +342,7 @@ int arm7_9_set_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
 int arm7_9_unset_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
 {
 	int retval = ERROR_OK;
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 
 	LOG_DEBUG(&quot;BPID: %d, Address: 0x%08&quot; PRIx32,
 			  breakpoint-&gt;unique_id,
@@ -436,7 +436,7 @@ int arm7_9_unset_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
  */
 int arm7_9_add_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 
 	if (target-&gt;state != TARGET_HALTED)
 	{
@@ -487,7 +487,7 @@ int arm7_9_add_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
 int arm7_9_remove_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
 {
 	int retval = ERROR_OK;
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 
 	if ((retval = arm7_9_unset_breakpoint(target, breakpoint)) != ERROR_OK)
 	{
@@ -523,7 +523,7 @@ int arm7_9_remove_breakpoint(struct target_s *target, breakpoint_t *breakpoint)
 int arm7_9_set_watchpoint(struct target_s *target, watchpoint_t *watchpoint)
 {
 	int retval = ERROR_OK;
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	int rw_mask = 1;
 	uint32_t mask;
 
@@ -594,7 +594,7 @@ int arm7_9_set_watchpoint(struct target_s *target, watchpoint_t *watchpoint)
 int arm7_9_unset_watchpoint(struct target_s *target, watchpoint_t *watchpoint)
 {
 	int retval = ERROR_OK;
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 
 	if (target-&gt;state != TARGET_HALTED)
 	{
@@ -641,7 +641,7 @@ int arm7_9_unset_watchpoint(struct target_s *target, watchpoint_t *watchpoint)
  */
 int arm7_9_add_watchpoint(struct target_s *target, watchpoint_t *watchpoint)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 
 	if (target-&gt;state != TARGET_HALTED)
 	{
@@ -675,7 +675,7 @@ int arm7_9_add_watchpoint(struct target_s *target, watchpoint_t *watchpoint)
 int arm7_9_remove_watchpoint(struct target_s *target, watchpoint_t *watchpoint)
 {
 	int retval = ERROR_OK;
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 
 	if (watchpoint-&gt;set)
 	{
@@ -702,7 +702,7 @@ int arm7_9_remove_watchpoint(struct target_s *target, watchpoint_t *watchpoint)
 int arm7_9_execute_sys_speed(struct target_s *target)
 {
 	int retval;
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	reg_t *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
 
@@ -755,7 +755,7 @@ int arm7_9_execute_fast_sys_speed(struct target_s *target)
 	static int set = 0;
 	static uint8_t check_value[4], check_mask[4];
 
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	reg_t *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
 
@@ -796,7 +796,7 @@ int arm7_9_execute_fast_sys_speed(struct target_s *target)
  */
 int arm7_9_target_request_data(target_t *target, uint32_t size, uint8_t *buffer)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	uint32_t *data;
 	int retval = ERROR_OK;
@@ -832,7 +832,7 @@ int arm7_9_handle_target_request(void *priv)
 	target_t *target = priv;
 	if (!target_was_examined(target))
 		return ERROR_OK;
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	reg_t *dcc_control = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_COMMS_CTRL];
 
@@ -890,7 +890,7 @@ int arm7_9_handle_target_request(void *priv)
 int arm7_9_poll(target_t *target)
 {
 	int retval;
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	reg_t *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
 
 	/* read debug status register */
@@ -982,7 +982,7 @@ int arm7_9_poll(target_t *target)
  */
 int arm7_9_assert_reset(target_t *target)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 
 	LOG_DEBUG(&quot;target-&gt;state: %s&quot;,
 		  target_state_name(target));
@@ -1114,7 +1114,7 @@ int arm7_9_deassert_reset(target_t *target)
  */
 int arm7_9_clear_halt(target_t *target)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	reg_t *dbg_ctrl = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_CTRL];
 
 	/* we used DBGRQ only if we didn't come out of reset */
@@ -1171,7 +1171,7 @@ int arm7_9_clear_halt(target_t *target)
  */
 int arm7_9_soft_reset_halt(struct target_s *target)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
 	reg_t *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
 	reg_t *dbg_ctrl = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_CTRL];
@@ -1290,7 +1290,7 @@ int arm7_9_halt(target_t *target)
 		return ERROR_OK;
 	}
 
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	reg_t *dbg_ctrl = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_CTRL];
 
 	LOG_DEBUG(&quot;target-&gt;state: %s&quot;,
@@ -1352,7 +1352,7 @@ int arm7_9_debug_entry(target_t *target)
 	uint32_t r0_thumb, pc_thumb;
 	uint32_t cpsr;
 	int retval;
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
 	reg_t *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
 	reg_t *dbg_ctrl = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_CTRL];
@@ -1506,7 +1506,7 @@ int arm7_9_full_context(target_t *target)
 {
 	int i;
 	int retval;
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
 
 	LOG_DEBUG(&quot;-&quot;);
@@ -1597,7 +1597,7 @@ int arm7_9_full_context(target_t *target)
  */
 int arm7_9_restore_context(target_t *target)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
 	reg_t *reg;
 	armv4_5_core_reg_t *reg_arch_info;
@@ -1747,7 +1747,7 @@ int arm7_9_restore_context(target_t *target)
  */
 int arm7_9_restart_core(struct target_s *target)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* set RESTART instruction */
@@ -1800,7 +1800,7 @@ void arm7_9_enable_breakpoints(struct target_s *target)
 
 int arm7_9_resume(struct target_s *target, int current, uint32_t address, int handle_breakpoints, int debug_execution)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
 	breakpoint_t *breakpoint = target-&gt;breakpoints;
 	reg_t *dbg_ctrl = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_CTRL];
@@ -1960,7 +1960,7 @@ int arm7_9_resume(struct target_s *target, int current, uint32_t address, int ha
 
 void arm7_9_enable_eice_step(target_t *target, uint32_t next_pc)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
 	uint32_t current_pc;
 	current_pc = buf_get_u32(armv4_5-&gt;core_cache-&gt;reg_list[15].value, 0, 32);
@@ -1997,7 +1997,7 @@ void arm7_9_enable_eice_step(target_t *target, uint32_t next_pc)
 
 void arm7_9_disable_eice_step(target_t *target)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 
 	embeddedice_store_reg(&amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_W0_ADDR_MASK]);
 	embeddedice_store_reg(&amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_W0_DATA_MASK]);
@@ -2012,7 +2012,7 @@ void arm7_9_disable_eice_step(target_t *target)
 
 int arm7_9_step(struct target_s *target, int current, uint32_t address, int handle_breakpoints)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
 	breakpoint_t *breakpoint = NULL;
 	int err, retval;
@@ -2108,7 +2108,7 @@ int arm7_9_read_core_reg(struct target_s *target, int num, enum armv4_5_mode mod
 	uint32_t* reg_p[16];
 	uint32_t value;
 	int retval;
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
 
 	if (armv4_5_mode_to_number(armv4_5-&gt;core_mode)==-1)
@@ -2172,7 +2172,7 @@ int arm7_9_read_core_reg(struct target_s *target, int num, enum armv4_5_mode mod
 int arm7_9_write_core_reg(struct target_s *target, int num, enum armv4_5_mode mode, uint32_t value)
 {
 	uint32_t reg[16];
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
 
 	if (armv4_5_mode_to_number(armv4_5-&gt;core_mode)==-1)
@@ -2232,7 +2232,7 @@ int arm7_9_write_core_reg(struct target_s *target, int num, enum armv4_5_mode mo
 
 int arm7_9_read_memory(struct target_s *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
 	uint32_t reg[16];
 	uint32_t num_accesses = 0;
@@ -2407,7 +2407,7 @@ int arm7_9_read_memory(struct target_s *target, uint32_t address, uint32_t size,
 
 int arm7_9_write_memory(struct target_s *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
 	reg_t *dbg_ctrl = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_CTRL];
 
@@ -2594,7 +2594,7 @@ static uint8_t *dcc_buffer;
 static int arm7_9_dcc_completion(struct target_s *target, uint32_t exit_point, int timeout_ms, void *arch_info)
 {
 	int retval = ERROR_OK;
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 
 	if ((retval = target_wait_state(target, TARGET_DEBUG_RUNNING, 500)) != ERROR_OK)
 		return retval;
@@ -2659,7 +2659,7 @@ int armv4_5_run_algorithm_inner(struct target_s *target, int num_mem_params, str
 int arm7_9_bulk_write_memory(target_t *target, uint32_t address, uint32_t count, uint8_t *buffer)
 {
 	int retval;
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	int i;
 
 	if (!arm7_9-&gt;dcc_downloads)
@@ -2878,7 +2878,7 @@ COMMAND_HANDLER(handle_arm7_9_write_xpsr_command)
 	int retval;
 	target_t *target = get_current_target(cmd_ctx);
 	armv4_5_common_t *armv4_5;
-	arm7_9_common_t *arm7_9;
+	struct arm7_9_common *arm7_9;
 
 	if (arm7_9_get_arch_pointers(target, &amp;armv4_5, &amp;arm7_9) != ERROR_OK)
 	{
@@ -2923,7 +2923,7 @@ COMMAND_HANDLER(handle_arm7_9_write_xpsr_im8_command)
 	int retval;
 	target_t *target = get_current_target(cmd_ctx);
 	armv4_5_common_t *armv4_5;
-	arm7_9_common_t *arm7_9;
+	struct arm7_9_common *arm7_9;
 
 	if (arm7_9_get_arch_pointers(target, &amp;armv4_5, &amp;arm7_9) != ERROR_OK)
 	{
@@ -2964,7 +2964,7 @@ COMMAND_HANDLER(handle_arm7_9_write_core_reg_command)
 	int num;
 	target_t *target = get_current_target(cmd_ctx);
 	armv4_5_common_t *armv4_5;
-	arm7_9_common_t *arm7_9;
+	struct arm7_9_common *arm7_9;
 
 	if (arm7_9_get_arch_pointers(target, &amp;armv4_5, &amp;arm7_9) != ERROR_OK)
 	{
@@ -2995,7 +2995,7 @@ COMMAND_HANDLER(handle_arm7_9_dbgrq_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
 	armv4_5_common_t *armv4_5;
-	arm7_9_common_t *arm7_9;
+	struct arm7_9_common *arm7_9;
 
 	if (arm7_9_get_arch_pointers(target, &amp;armv4_5, &amp;arm7_9) != ERROR_OK)
 	{
@@ -3028,7 +3028,7 @@ COMMAND_HANDLER(handle_arm7_9_fast_memory_access_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
 	armv4_5_common_t *armv4_5;
-	arm7_9_common_t *arm7_9;
+	struct arm7_9_common *arm7_9;
 
 	if (arm7_9_get_arch_pointers(target, &amp;armv4_5, &amp;arm7_9) != ERROR_OK)
 	{
@@ -3061,7 +3061,7 @@ COMMAND_HANDLER(handle_arm7_9_dcc_downloads_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
 	armv4_5_common_t *armv4_5;
-	arm7_9_common_t *arm7_9;
+	struct arm7_9_common *arm7_9;
 
 	if (arm7_9_get_arch_pointers(target, &amp;armv4_5, &amp;arm7_9) != ERROR_OK)
 	{
@@ -3090,7 +3090,7 @@ COMMAND_HANDLER(handle_arm7_9_dcc_downloads_command)
 	return ERROR_OK;
 }
 
-int arm7_9_init_arch_info(target_t *target, arm7_9_common_t *arm7_9)
+int arm7_9_init_arch_info(target_t *target, struct arm7_9_common *arm7_9)
 {
 	int retval = ERROR_OK;
 	armv4_5_common_t *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
diff --git a/src/target/arm7_9_common.h b/src/target/arm7_9_common.h
index 8a6dce4..2059bd0 100644
--- a/src/target/arm7_9_common.h
+++ b/src/target/arm7_9_common.h
@@ -37,7 +37,7 @@
 /**
  * Structure for items that are common between both ARM7 and ARM9 targets.
  */
-typedef struct arm7_9_common_s
+struct arm7_9_common
 {
 	struct arm armv4_5_common;
 	uint32_t common_magic;
@@ -106,12 +106,12 @@ typedef struct arm7_9_common_s
 	void (*post_restore_context)(target_t *target); /**&lt; Callback function called after restoring the processor context */
 
 
-} arm7_9_common_t;
+};
 
-static inline struct arm7_9_common_s *
+static inline struct arm7_9_common *
 target_to_arm7_9(struct target_s *target)
 {
-	return container_of(target-&gt;arch_info, struct arm7_9_common_s,
+	return container_of(target-&gt;arch_info, struct arm7_9_common,
 			armv4_5_common);
 }
 
@@ -153,7 +153,7 @@ void arm7_9_disable_eice_step(target_t *target);
 
 int arm7_9_execute_sys_speed(struct target_s *target);
 
-int arm7_9_init_arch_info(target_t *target, arm7_9_common_t *arm7_9);
-int arm7_9_get_arch_pointers(target_t *target, armv4_5_common_t **armv4_5_p, arm7_9_common_t **arm7_9_p);
+int arm7_9_init_arch_info(target_t *target, struct arm7_9_common *arm7_9);
+int arm7_9_get_arch_pointers(target_t *target, armv4_5_common_t **armv4_5_p, struct arm7_9_common **arm7_9_p);
 
 #endif /* ARM7_9_COMMON_H */
diff --git a/src/target/arm7tdmi.c b/src/target/arm7tdmi.c
index 90e7526..6644726 100644
--- a/src/target/arm7tdmi.c
+++ b/src/target/arm7tdmi.c
@@ -44,7 +44,7 @@
 static int arm7tdmi_examine_debug_reason(target_t *target)
 {
 	int retval = ERROR_OK;
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 
 	/* only check the debug reason if we don't know it already */
 	if ((target-&gt;debug_reason != DBG_REASON_DBGRQ)
@@ -266,7 +266,7 @@ static int arm7tdmi_clock_data_in_endianness(arm_jtag_t *jtag_info,
 static void arm7tdmi_change_to_arm(target_t *target,
 		uint32_t *r0, uint32_t *pc)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* save r0 before using it and put system in ARM state
@@ -323,7 +323,7 @@ static void arm7tdmi_read_core_regs(target_t *target,
 		uint32_t mask, uint32_t* core_regs[16])
 {
 	int i;
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* STMIA r0-15, [r0] at debug speed
@@ -348,7 +348,7 @@ static void arm7tdmi_read_core_regs_target_buffer(target_t *target,
 		uint32_t mask, void* buffer, int size)
 {
 	int i;
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	int be = (target-&gt;endianness == TARGET_BIG_ENDIAN) ? 1 : 0;
 	uint32_t *buf_u32 = buffer;
@@ -388,7 +388,7 @@ static void arm7tdmi_read_core_regs_target_buffer(target_t *target,
 
 static void arm7tdmi_read_xpsr(target_t *target, uint32_t *xpsr, int spsr)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* MRS r0, cpsr */
@@ -406,7 +406,7 @@ static void arm7tdmi_read_xpsr(target_t *target, uint32_t *xpsr, int spsr)
 
 static void arm7tdmi_write_xpsr(target_t *target, uint32_t xpsr, int spsr)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	LOG_DEBUG(&quot;xpsr: %8.8&quot; PRIx32 &quot;, spsr: %i&quot;, xpsr, spsr);
@@ -436,7 +436,7 @@ static void arm7tdmi_write_xpsr(target_t *target, uint32_t xpsr, int spsr)
 static void arm7tdmi_write_xpsr_im8(target_t *target,
 		uint8_t xpsr_im, int rot, int spsr)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	LOG_DEBUG(&quot;xpsr_im: %2.2x, rot: %i, spsr: %i&quot;, xpsr_im, rot, spsr);
@@ -455,7 +455,7 @@ static void arm7tdmi_write_core_regs(target_t *target,
 		uint32_t mask, uint32_t core_regs[16])
 {
 	int i;
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* LDMIA r0-15, [r0] at debug speed
@@ -479,7 +479,7 @@ static void arm7tdmi_write_core_regs(target_t *target,
 
 static void arm7tdmi_load_word_regs(target_t *target, uint32_t mask)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* put system-speed load-multiple into the pipeline */
@@ -490,7 +490,7 @@ static void arm7tdmi_load_word_regs(target_t *target, uint32_t mask)
 
 static void arm7tdmi_load_hword_reg(target_t *target, int num)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* put system-speed load half-word into the pipeline */
@@ -501,7 +501,7 @@ static void arm7tdmi_load_hword_reg(target_t *target, int num)
 
 static void arm7tdmi_load_byte_reg(target_t *target, int num)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* put system-speed load byte into the pipeline */
@@ -512,7 +512,7 @@ static void arm7tdmi_load_byte_reg(target_t *target, int num)
 
 static void arm7tdmi_store_word_regs(target_t *target, uint32_t mask)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* put system-speed store-multiple into the pipeline */
@@ -523,7 +523,7 @@ static void arm7tdmi_store_word_regs(target_t *target, uint32_t mask)
 
 static void arm7tdmi_store_hword_reg(target_t *target, int num)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* put system-speed store half-word into the pipeline */
@@ -534,7 +534,7 @@ static void arm7tdmi_store_hword_reg(target_t *target, int num)
 
 static void arm7tdmi_store_byte_reg(target_t *target, int num)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* put system-speed store byte into the pipeline */
@@ -545,7 +545,7 @@ static void arm7tdmi_store_byte_reg(target_t *target, int num)
 
 static void arm7tdmi_write_pc(target_t *target, uint32_t pc)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* LDMIA r0-15, [r0] at debug speed
@@ -570,7 +570,7 @@ static void arm7tdmi_write_pc(target_t *target, uint32_t pc)
 
 static void arm7tdmi_branch_resume(target_t *target)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	arm7tdmi_clock_out(jtag_info, ARMV4_5_NOP, NULL, 1);
@@ -579,7 +579,7 @@ static void arm7tdmi_branch_resume(target_t *target)
 
 static void arm7tdmi_branch_resume_thumb(target_t *target)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	reg_t *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
@@ -648,7 +648,7 @@ static void arm7tdmi_build_reg_cache(target_t *target)
 
 int arm7tdmi_examine(struct target_s *target)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	int retval;
 
 
@@ -693,7 +693,7 @@ int arm7tdmi_init_target(struct command_context_s *cmd_ctx, struct target_s *tar
 
 int arm7tdmi_init_arch_info(target_t *target, arm7tdmi_common_t *arm7tdmi, struct jtag_tap *tap)
 {
-	struct arm7_9_common_s *arm7_9 = &amp;arm7tdmi-&gt;arm7_9_common;
+	struct arm7_9_common *arm7_9 = &amp;arm7tdmi-&gt;arm7_9_common;
 
 	/* prepare JTAG information for the new target */
 	arm7_9-&gt;jtag_info.tap = tap;
diff --git a/src/target/arm7tdmi.h b/src/target/arm7tdmi.h
index da0f772..b699697 100644
--- a/src/target/arm7tdmi.h
+++ b/src/target/arm7tdmi.h
@@ -30,7 +30,7 @@
  */
 typedef struct arm7tdmi_common_s
 {
-	arm7_9_common_t arm7_9_common;
+	struct arm7_9_common arm7_9_common;
 } arm7tdmi_common_t;
 
 int arm7tdmi_init_arch_info(target_t *target, arm7tdmi_common_t *arm7tdmi, struct jtag_tap *tap);
diff --git a/src/target/arm920t.c b/src/target/arm920t.c
index 4fa4130..336b01c 100644
--- a/src/target/arm920t.c
+++ b/src/target/arm920t.c
@@ -553,7 +553,7 @@ int arm920t_soft_reset_halt(struct target_s *target)
 {
 	int retval = ERROR_OK;
 	struct arm920t_common *arm920t = target_to_arm920(target);
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
 	reg_t *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
 
@@ -623,7 +623,7 @@ int arm920t_soft_reset_halt(struct target_s *target)
 int arm920t_init_arch_info(target_t *target, struct arm920t_common *arm920t, struct jtag_tap *tap)
 {
 	arm9tdmi_common_t *arm9tdmi = &amp;arm920t-&gt;arm9tdmi_common;
-	arm7_9_common_t *arm7_9 = &amp;arm9tdmi-&gt;arm7_9_common;
+	struct arm7_9_common *arm7_9 = &amp;arm9tdmi-&gt;arm7_9_common;
 
 	/* initialize arm9tdmi specific info (including arm7_9 and armv4_5)
 	 */
@@ -667,7 +667,7 @@ COMMAND_HANDLER(arm920t_handle_read_cache_command)
 	int retval = ERROR_OK;
 	target_t *target = get_current_target(cmd_ctx);
 	struct arm920t_common *arm920t = target_to_arm920(target);
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
 	uint32_t cp15c15;
 	uint32_t cp15_ctrl, cp15_ctrl_saved;
@@ -913,7 +913,7 @@ COMMAND_HANDLER(arm920t_handle_read_mmu_command)
 	int retval = ERROR_OK;
 	target_t *target = get_current_target(cmd_ctx);
 	struct arm920t_common *arm920t = target_to_arm920(target);
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
 	uint32_t cp15c15;
 	uint32_t cp15_ctrl, cp15_ctrl_saved;
diff --git a/src/target/arm926ejs.c b/src/target/arm926ejs.c
index 25c44a0..c6aeaed 100644
--- a/src/target/arm926ejs.c
+++ b/src/target/arm926ejs.c
@@ -51,7 +51,7 @@ static int arm926ejs_cp15_read(target_t *target, uint32_t op1, uint32_t op2,
 		uint32_t CRn, uint32_t CRm, uint32_t *value)
 {
 	int retval = ERROR_OK;
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	uint32_t address = ARM926EJS_CP15_ADDR(op1, op2, CRn, CRm);
 	struct scan_field fields[4];
@@ -143,7 +143,7 @@ static int arm926ejs_cp15_write(target_t *target, uint32_t op1, uint32_t op2,
 		uint32_t CRn, uint32_t CRm, uint32_t value)
 {
 	int retval = ERROR_OK;
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	uint32_t address = ARM926EJS_CP15_ADDR(op1, op2, CRn, CRm);
 	struct scan_field fields[4];
@@ -231,7 +231,7 @@ static int arm926ejs_mcr(target_t *target, int cpnum, uint32_t op1,
 
 static int arm926ejs_examine_debug_reason(target_t *target)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	reg_t *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
 	int debug_reason;
 	int retval;
@@ -522,7 +522,7 @@ int arm926ejs_soft_reset_halt(struct target_s *target)
 {
 	int retval = ERROR_OK;
 	struct arm926ejs_common_s *arm926ejs = target_to_arm926(target);
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
 	reg_t *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
 
@@ -670,7 +670,7 @@ int arm926ejs_init_arch_info(target_t *target, arm926ejs_common_t *arm926ejs,
 		struct jtag_tap *tap)
 {
 	arm9tdmi_common_t *arm9tdmi = &amp;arm926ejs-&gt;arm9tdmi_common;
-	arm7_9_common_t *arm7_9 = &amp;arm9tdmi-&gt;arm7_9_common;
+	struct arm7_9_common *arm7_9 = &amp;arm9tdmi-&gt;arm7_9_common;
 
 	/* initialize arm9tdmi specific info (including arm7_9 and armv4_5)
 	 */
diff --git a/src/target/arm966e.c b/src/target/arm966e.c
index d3ae9b2..c752aea 100644
--- a/src/target/arm966e.c
+++ b/src/target/arm966e.c
@@ -35,7 +35,7 @@
 int arm966e_init_arch_info(target_t *target, arm966e_common_t *arm966e, struct jtag_tap *tap)
 {
 	arm9tdmi_common_t *arm9tdmi = &amp;arm966e-&gt;arm9tdmi_common;
-	arm7_9_common_t *arm7_9 = &amp;arm9tdmi-&gt;arm7_9_common;
+	struct arm7_9_common *arm7_9 = &amp;arm9tdmi-&gt;arm7_9_common;
 
 	arm9tdmi_init_arch_info(target, arm9tdmi, tap);
 
@@ -70,7 +70,7 @@ static int arm966e_verify_pointer(struct command_context_s *cmd_ctx,
 static int arm966e_read_cp15(target_t *target, int reg_addr, uint32_t *value)
 {
 	int retval = ERROR_OK;
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	struct scan_field fields[3];
 	uint8_t reg_addr_buf = reg_addr &amp; 0x3f;
@@ -122,7 +122,7 @@ static int arm966e_read_cp15(target_t *target, int reg_addr, uint32_t *value)
 int arm966e_write_cp15(target_t *target, int reg_addr, uint32_t value)
 {
 	int retval = ERROR_OK;
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	struct scan_field fields[3];
 	uint8_t reg_addr_buf = reg_addr &amp; 0x3f;
diff --git a/src/target/arm9tdmi.c b/src/target/arm9tdmi.c
index d1d4a8d..7176ab3 100644
--- a/src/target/arm9tdmi.c
+++ b/src/target/arm9tdmi.c
@@ -60,7 +60,7 @@ static const arm9tdmi_vector_t arm9tdmi_vectors[] =
 int arm9tdmi_examine_debug_reason(target_t *target)
 {
 	int retval = ERROR_OK;
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 
 	/* only check the debug reason if we don't know it already */
 	if ((target-&gt;debug_reason != DBG_REASON_DBGRQ)
@@ -329,7 +329,7 @@ static void arm9tdmi_change_to_arm(target_t *target,
 		uint32_t *r0, uint32_t *pc)
 {
 	int retval = ERROR_OK;
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* save r0 before using it and put system in ARM state
@@ -383,7 +383,7 @@ void arm9tdmi_read_core_regs(target_t *target,
 		uint32_t mask, uint32_t* core_regs[16])
 {
 	int i;
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* STMIA r0-15, [r0] at debug speed
@@ -408,7 +408,7 @@ static void arm9tdmi_read_core_regs_target_buffer(target_t *target,
 		uint32_t mask, void* buffer, int size)
 {
 	int i;
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	int be = (target-&gt;endianness == TARGET_BIG_ENDIAN) ? 1 : 0;
 	uint32_t *buf_u32 = buffer;
@@ -446,7 +446,7 @@ static void arm9tdmi_read_core_regs_target_buffer(target_t *target,
 
 static void arm9tdmi_read_xpsr(target_t *target, uint32_t *xpsr, int spsr)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* MRS r0, cpsr */
@@ -468,7 +468,7 @@ static void arm9tdmi_read_xpsr(target_t *target, uint32_t *xpsr, int spsr)
 
 static void arm9tdmi_write_xpsr(target_t *target, uint32_t xpsr, int spsr)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	LOG_DEBUG(&quot;xpsr: %8.8&quot; PRIx32 &quot;, spsr: %i&quot;, xpsr, spsr);
@@ -503,7 +503,7 @@ static void arm9tdmi_write_xpsr(target_t *target, uint32_t xpsr, int spsr)
 static void arm9tdmi_write_xpsr_im8(target_t *target,
 		uint8_t xpsr_im, int rot, int spsr)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	LOG_DEBUG(&quot;xpsr_im: %2.2x, rot: %i, spsr: %i&quot;, xpsr_im, rot, spsr);
@@ -529,7 +529,7 @@ void arm9tdmi_write_core_regs(target_t *target,
 		uint32_t mask, uint32_t core_regs[16])
 {
 	int i;
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* LDMIA r0-15, [r0] at debug speed
@@ -553,7 +553,7 @@ void arm9tdmi_write_core_regs(target_t *target,
 
 void arm9tdmi_load_word_regs(target_t *target, uint32_t mask)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* put system-speed load-multiple into the pipeline */
@@ -563,7 +563,7 @@ void arm9tdmi_load_word_regs(target_t *target, uint32_t mask)
 
 void arm9tdmi_load_hword_reg(target_t *target, int num)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* put system-speed load half-word into the pipeline */
@@ -573,7 +573,7 @@ void arm9tdmi_load_hword_reg(target_t *target, int num)
 
 void arm9tdmi_load_byte_reg(target_t *target, int num)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* put system-speed load byte into the pipeline */
@@ -583,7 +583,7 @@ void arm9tdmi_load_byte_reg(target_t *target, int num)
 
 void arm9tdmi_store_word_regs(target_t *target, uint32_t mask)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* put system-speed store-multiple into the pipeline */
@@ -593,7 +593,7 @@ void arm9tdmi_store_word_regs(target_t *target, uint32_t mask)
 
 void arm9tdmi_store_hword_reg(target_t *target, int num)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* put system-speed store half-word into the pipeline */
@@ -603,7 +603,7 @@ void arm9tdmi_store_hword_reg(target_t *target, int num)
 
 void arm9tdmi_store_byte_reg(target_t *target, int num)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* put system-speed store byte into the pipeline */
@@ -613,7 +613,7 @@ void arm9tdmi_store_byte_reg(target_t *target, int num)
 
 static void arm9tdmi_write_pc(target_t *target, uint32_t pc)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* LDMIA r0-15, [r0] at debug speed
@@ -637,7 +637,7 @@ static void arm9tdmi_write_pc(target_t *target, uint32_t pc)
 
 void arm9tdmi_branch_resume(target_t *target)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_B(0xfffffc, 0), 0, NULL, 0);
@@ -648,7 +648,7 @@ static void arm9tdmi_branch_resume_thumb(target_t *target)
 {
 	LOG_DEBUG(&quot;-&quot;);
 
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	reg_t *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
@@ -705,7 +705,7 @@ static void arm9tdmi_branch_resume_thumb(target_t *target)
 
 void arm9tdmi_enable_single_step(target_t *target, uint32_t next_pc)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 
 	if (arm7_9-&gt;has_single_step)
 	{
@@ -720,7 +720,7 @@ void arm9tdmi_enable_single_step(target_t *target, uint32_t next_pc)
 
 void arm9tdmi_disable_single_step(target_t *target)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 
 	if (arm7_9-&gt;has_single_step)
 	{
@@ -745,7 +745,7 @@ static void arm9tdmi_build_reg_cache(target_t *target)
 int arm9tdmi_examine(struct target_s *target)
 {
 	int retval;
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 
 	if (!target_was_examined(target))
 	{
@@ -789,7 +789,7 @@ int arm9tdmi_init_target(struct command_context_s *cmd_ctx,
 int arm9tdmi_init_arch_info(target_t *target, arm9tdmi_common_t *arm9tdmi, struct jtag_tap *tap)
 {
 	armv4_5_common_t *armv4_5;
-	arm7_9_common_t *arm7_9;
+	struct arm7_9_common *arm7_9;
 
 	arm7_9 = &amp;arm9tdmi-&gt;arm7_9_common;
 	armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
@@ -859,7 +859,7 @@ static int arm9tdmi_target_create(struct target_s *target, Jim_Interp *interp)
 COMMAND_HANDLER(handle_arm9tdmi_catch_vectors_command)
 {
 	target_t *target = get_current_target(cmd_ctx);
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	reg_t *vector_catch;
 	uint32_t vector_catch_value;
 
diff --git a/src/target/arm9tdmi.h b/src/target/arm9tdmi.h
index 775d475..85ed029 100644
--- a/src/target/arm9tdmi.h
+++ b/src/target/arm9tdmi.h
@@ -30,7 +30,7 @@
  */
 typedef struct arm9tdmi_common_s
 {
-	arm7_9_common_t arm7_9_common;
+	struct arm7_9_common arm7_9_common;
 } arm9tdmi_common_t;
 
 typedef struct arm9tdmi_vector_s
diff --git a/src/target/embeddedice.c b/src/target/embeddedice.c
index a1eac13..4a60960 100644
--- a/src/target/embeddedice.c
+++ b/src/target/embeddedice.c
@@ -164,7 +164,7 @@ static int embeddedice_get_reg(reg_t *reg)
  * hardware support for vector_catch, single stepping, and monitor mode.
  */
 reg_cache_t *
-embeddedice_build_reg_cache(target_t *target, arm7_9_common_t *arm7_9)
+embeddedice_build_reg_cache(target_t *target, struct arm7_9_common *arm7_9)
 {
 	int retval;
 	reg_cache_t *reg_cache = malloc(sizeof(reg_cache_t));
@@ -303,7 +303,7 @@ embeddedice_build_reg_cache(target_t *target, arm7_9_common_t *arm7_9)
 int embeddedice_setup(target_t *target)
 {
 	int retval;
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 
 	/* Explicitly disable monitor mode.  For now we only support halting
 	 * debug ... we don't know how to talk with a resident debug monitor
diff --git a/src/target/embeddedice.h b/src/target/embeddedice.h
index c27a1b5..4e5639c 100644
--- a/src/target/embeddedice.h
+++ b/src/target/embeddedice.h
@@ -94,7 +94,7 @@ typedef struct embeddedice_reg_s
 } embeddedice_reg_t;
 
 reg_cache_t* embeddedice_build_reg_cache(target_t *target,
-		arm7_9_common_t *arm7_9);
+		struct arm7_9_common *arm7_9);
 
 int embeddedice_setup(target_t *target);
 
diff --git a/src/target/fa526.c b/src/target/fa526.c
index 98e969a..95999b3 100644
--- a/src/target/fa526.c
+++ b/src/target/fa526.c
@@ -43,7 +43,7 @@ static void fa526_read_core_regs(target_t *target,
 		uint32_t mask, uint32_t* core_regs[16])
 {
 	int i;
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* STMIA r0-15, [r0] at debug speed
@@ -70,7 +70,7 @@ static void fa526_read_core_regs_target_buffer(target_t *target,
 		uint32_t mask, void* buffer, int size)
 {
 	int i;
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	int be = (target-&gt;endianness == TARGET_BIG_ENDIAN) ? 1 : 0;
 	uint32_t *buf_u32 = buffer;
@@ -110,7 +110,7 @@ static void fa526_read_core_regs_target_buffer(target_t *target,
 
 static void fa526_read_xpsr(target_t *target, uint32_t *xpsr, int spsr)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* MRS r0, cpsr */
@@ -135,7 +135,7 @@ static void fa526_read_xpsr(target_t *target, uint32_t *xpsr, int spsr)
 
 static void fa526_write_xpsr(target_t *target, uint32_t xpsr, int spsr)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	LOG_DEBUG(&quot;xpsr: %8.8&quot; PRIx32 &quot;, spsr: %i&quot;, xpsr, spsr);
@@ -172,7 +172,7 @@ static void fa526_write_xpsr(target_t *target, uint32_t xpsr, int spsr)
 static void fa526_write_xpsr_im8(target_t *target,
 		uint8_t xpsr_im, int rot, int spsr)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	LOG_DEBUG(&quot;xpsr_im: %2.2x, rot: %i, spsr: %i&quot;, xpsr_im, rot, spsr);
@@ -200,7 +200,7 @@ static void fa526_write_core_regs(target_t *target,
 		uint32_t mask, uint32_t core_regs[16])
 {
 	int i;
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* LDMIA r0-15, [r0] at debug speed
@@ -226,7 +226,7 @@ static void fa526_write_core_regs(target_t *target,
 
 static void fa526_write_pc(target_t *target, uint32_t pc)
 {
-	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
+	struct arm7_9_common *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/* LDMIA r0-15, [r0] at debug speed
@@ -258,7 +258,7 @@ static void fa526_branch_resume_thumb(target_t *target)
 static int fa526_init_arch_info_2(target_t *target,
 		arm9tdmi_common_t *arm9tdmi, struct jtag_tap *tap)
 {
-	arm7_9_common_t *arm7_9;
+	struct arm7_9_common *arm7_9;
 
 	arm7_9 = &amp;arm9tdmi-&gt;arm7_9_common;
 
@@ -318,7 +318,7 @@ static int fa526_init_arch_info(target_t *target,
 		struct arm920t_common *arm920t, struct jtag_tap *tap)
 {
 	arm9tdmi_common_t *arm9tdmi = &amp;arm920t-&gt;arm9tdmi_common;
-	arm7_9_common_t *arm7_9 = &amp;arm9tdmi-&gt;arm7_9_common;
+	struct arm7_9_common *arm7_9 = &amp;arm9tdmi-&gt;arm7_9_common;
 
 	/* initialize arm9tdmi specific info (including arm7_9 and armv4_5)
 	 */
diff --git a/src/target/feroceon.c b/src/target/feroceon.c
index b157dc3..d203293 100644
--- a/src/target/feroceon.c
+++ b/src/target/feroceon.c
@@ -59,7 +59,7 @@
 int feroceon_assert_reset(target_t *target)
 {
 	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
-	arm7_9_common_t *arm7_9 = armv4_5-&gt;arch_info;
+	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
 	int ud = arm7_9-&gt;use_dbgrq;
 
 	arm7_9-&gt;use_dbgrq = 0;
@@ -111,7 +111,7 @@ int feroceon_dummy_clock_out(arm_jtag_t *jtag_info, uint32_t instr)
 void feroceon_change_to_arm(target_t *target, uint32_t *r0, uint32_t *pc)
 {
 	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
-	arm7_9_common_t *arm7_9 = armv4_5-&gt;arch_info;
+	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	/*
@@ -158,7 +158,7 @@ void feroceon_read_core_regs(target_t *target, uint32_t mask, uint32_t* core_reg
 {
 	int i;
 	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
-	arm7_9_common_t *arm7_9 = armv4_5-&gt;arch_info;
+	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_STMIA(0, mask &amp; 0xffff, 0, 0), 0, NULL, 0);
@@ -177,7 +177,7 @@ void feroceon_read_core_regs_target_buffer(target_t *target, uint32_t mask, void
 {
 	int i;
 	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
-	arm7_9_common_t *arm7_9 = armv4_5-&gt;arch_info;
+	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	int be = (target-&gt;endianness == TARGET_BIG_ENDIAN) ? 1 : 0;
 	uint32_t *buf_u32 = buffer;
@@ -213,7 +213,7 @@ void feroceon_read_core_regs_target_buffer(target_t *target, uint32_t mask, void
 void feroceon_read_xpsr(target_t *target, uint32_t *xpsr, int spsr)
 {
 	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
-	arm7_9_common_t *arm7_9 = armv4_5-&gt;arch_info;
+	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_MRS(0, spsr &amp; 1), 0, NULL, 0);
@@ -236,7 +236,7 @@ void feroceon_read_xpsr(target_t *target, uint32_t *xpsr, int spsr)
 void feroceon_write_xpsr(target_t *target, uint32_t xpsr, int spsr)
 {
 	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
-	arm7_9_common_t *arm7_9 = armv4_5-&gt;arch_info;
+	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	LOG_DEBUG(&quot;xpsr: %8.8&quot; PRIx32 &quot;, spsr: %i&quot;, xpsr, spsr);
@@ -277,7 +277,7 @@ void feroceon_write_xpsr(target_t *target, uint32_t xpsr, int spsr)
 void feroceon_write_xpsr_im8(target_t *target, uint8_t xpsr_im, int rot, int spsr)
 {
 	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
-	arm7_9_common_t *arm7_9 = armv4_5-&gt;arch_info;
+	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	LOG_DEBUG(&quot;xpsr_im: %2.2x, rot: %i, spsr: %i&quot;, xpsr_im, rot, spsr);
@@ -295,7 +295,7 @@ void feroceon_write_core_regs(target_t *target, uint32_t mask, uint32_t core_reg
 {
 	int i;
 	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
-	arm7_9_common_t *arm7_9 = armv4_5-&gt;arch_info;
+	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_LDMIA(0, mask &amp; 0xffff, 0, 0), 0, NULL, 0);
@@ -314,7 +314,7 @@ void feroceon_write_core_regs(target_t *target, uint32_t mask, uint32_t core_reg
 void feroceon_branch_resume(target_t *target)
 {
 	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
-	arm7_9_common_t *arm7_9 = armv4_5-&gt;arch_info;
+	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_NOP, 0, NULL, 0);
@@ -331,7 +331,7 @@ void feroceon_branch_resume_thumb(target_t *target)
 	LOG_DEBUG(&quot;-&quot;);
 
 	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
-	arm7_9_common_t *arm7_9 = armv4_5-&gt;arch_info;
+	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	uint32_t r0 = buf_get_u32(armv4_5-&gt;core_cache-&gt;reg_list[0].value, 0, 32);
 	uint32_t pc = buf_get_u32(armv4_5-&gt;core_cache-&gt;reg_list[15].value, 0, 32);
@@ -364,7 +364,7 @@ void feroceon_branch_resume_thumb(target_t *target)
 int feroceon_read_cp15(target_t *target, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t *value)
 {
 	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
-	arm7_9_common_t *arm7_9 = armv4_5-&gt;arch_info;
+	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	int err;
 
@@ -386,7 +386,7 @@ int feroceon_read_cp15(target_t *target, uint32_t op1, uint32_t op2, uint32_t CR
 int feroceon_write_cp15(target_t *target, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t value)
 {
 	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
-	arm7_9_common_t *arm7_9 = armv4_5-&gt;arch_info;
+	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_LDMIA(0, 1, 0, 0), 0, NULL, 0);
@@ -405,7 +405,7 @@ int feroceon_write_cp15(target_t *target, uint32_t op1, uint32_t op2, uint32_t C
 void feroceon_set_dbgrq(target_t *target)
 {
 	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
-	arm7_9_common_t *arm7_9 = armv4_5-&gt;arch_info;
+	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
 	reg_t *dbg_ctrl = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_CTRL];
 
 	buf_set_u32(dbg_ctrl-&gt;value, 0, 8, 2);
@@ -415,7 +415,7 @@ void feroceon_set_dbgrq(target_t *target)
 void feroceon_enable_single_step(target_t *target, uint32_t next_pc)
 {
 	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
-	arm7_9_common_t *arm7_9 = armv4_5-&gt;arch_info;
+	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
 
 	/* set a breakpoint there */
 	embeddedice_write_reg(&amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_W0_ADDR_VALUE], next_pc);
@@ -428,7 +428,7 @@ void feroceon_enable_single_step(target_t *target, uint32_t next_pc)
 void feroceon_disable_single_step(target_t *target)
 {
 	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
-	arm7_9_common_t *arm7_9 = armv4_5-&gt;arch_info;
+	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
 
 	embeddedice_store_reg(&amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_W0_ADDR_VALUE]);
 	embeddedice_store_reg(&amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_W0_ADDR_MASK]);
@@ -452,7 +452,7 @@ int feroceon_bulk_write_memory(target_t *target, uint32_t address, uint32_t coun
 {
 	int retval;
 	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
-	arm7_9_common_t *arm7_9 = armv4_5-&gt;arch_info;
+	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
 	enum armv4_5_state core_state = armv4_5-&gt;core_state;
 	uint32_t x, flip, shift, save[7];
 	uint32_t i;
@@ -586,7 +586,7 @@ int feroceon_init_target(struct command_context_s *cmd_ctx, struct target_s *tar
 void feroceon_common_setup(struct target_s *target)
 {
 	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
-	arm7_9_common_t *arm7_9 = armv4_5-&gt;arch_info;
+	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
 
 	/* override some insn sequence functions */
 	arm7_9-&gt;change_to_arm = feroceon_change_to_arm;
@@ -643,7 +643,7 @@ int dragonite_target_create(struct target_s *target, Jim_Interp *interp)
 int feroceon_examine(struct target_s *target)
 {
 	armv4_5_common_t *armv4_5;
-	arm7_9_common_t *arm7_9;
+	struct arm7_9_common *arm7_9;
 	int retval;
 
 	retval = arm9tdmi_examine(target);

commit bcb18b2044e9a9b812f8e0d390ed903f74524586
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:39:57 2009 -0800

    arm720t_common_t -&gt; struct arm720t_common
    
    Remove misleading typedef and redundant suffix from struct arm720t_common.

diff --git a/src/target/arm720t.c b/src/target/arm720t.c
index 01ccf30..1d15dc9 100644
--- a/src/target/arm720t.c
+++ b/src/target/arm720t.c
@@ -42,7 +42,7 @@ static int arm720t_scan_cp15(target_t *target,
 		uint32_t out, uint32_t *in, int instruction, int clock)
 {
 	int retval;
-	struct arm720t_common_s *arm720t = target_to_arm720(target);
+	struct arm720t_common *arm720t = target_to_arm720(target);
 	arm_jtag_t *jtag_info;
 	struct scan_field fields[2];
 	uint8_t out_buf[4];
@@ -185,7 +185,7 @@ static void arm720t_enable_mmu_caches(target_t *target,
 
 static void arm720t_post_debug_entry(target_t *target)
 {
-	struct arm720t_common_s *arm720t = target_to_arm720(target);
+	struct arm720t_common *arm720t = target_to_arm720(target);
 
 	/* examine cp15 control reg */
 	arm720t_read_cp15(target, 0xee110f10, &amp;arm720t-&gt;cp15_control_reg);
@@ -204,7 +204,7 @@ static void arm720t_post_debug_entry(target_t *target)
 
 static void arm720t_pre_restore_context(target_t *target)
 {
-	struct arm720t_common_s *arm720t = target_to_arm720(target);
+	struct arm720t_common *arm720t = target_to_arm720(target);
 
 	/* restore i/d fault status and address register */
 	arm720t_write_cp15(target, 0xee050f10, arm720t-&gt;fsr_reg);
@@ -212,7 +212,7 @@ static void arm720t_pre_restore_context(target_t *target)
 }
 
 static int arm720t_verify_pointer(struct command_context_s *cmd_ctx,
-		struct arm720t_common_s *arm720t)
+		struct arm720t_common *arm720t)
 {
 	if (arm720t-&gt;common_magic != ARM720T_COMMON_MAGIC) {
 		command_print(cmd_ctx, &quot;target is not an ARM720&quot;);
@@ -223,7 +223,7 @@ static int arm720t_verify_pointer(struct command_context_s *cmd_ctx,
 
 static int arm720t_arch_state(struct target_s *target)
 {
-	struct arm720t_common_s *arm720t = target_to_arm720(target);
+	struct arm720t_common *arm720t = target_to_arm720(target);
 	struct armv4_5_common_s *armv4_5;
 
 	static const char *state[] =
@@ -270,7 +270,7 @@ static int arm720t_read_memory(struct target_s *target,
 		uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	int retval;
-	struct arm720t_common_s *arm720t = target_to_arm720(target);
+	struct arm720t_common *arm720t = target_to_arm720(target);
 
 	/* disable cache, but leave MMU enabled */
 	if (arm720t-&gt;armv4_5_mmu.armv4_5_cache.d_u_cache_enabled)
@@ -287,7 +287,7 @@ static int arm720t_read_memory(struct target_s *target,
 static int arm720t_read_phys_memory(struct target_s *target,
 		uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
 {
-	struct arm720t_common_s *arm720t = target_to_arm720(target);
+	struct arm720t_common *arm720t = target_to_arm720(target);
 
 	return armv4_5_mmu_read_physical(target, &amp;arm720t-&gt;armv4_5_mmu, address, size, count, buffer);
 }
@@ -295,7 +295,7 @@ static int arm720t_read_phys_memory(struct target_s *target,
 static int arm720t_write_phys_memory(struct target_s *target,
 		uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
 {
-	struct arm720t_common_s *arm720t = target_to_arm720(target);
+	struct arm720t_common *arm720t = target_to_arm720(target);
 
 	return armv4_5_mmu_write_physical(target, &amp;arm720t-&gt;armv4_5_mmu, address, size, count, buffer);
 }
@@ -303,7 +303,7 @@ static int arm720t_write_phys_memory(struct target_s *target,
 static int arm720t_soft_reset_halt(struct target_s *target)
 {
 	int retval = ERROR_OK;
-	struct arm720t_common_s *arm720t = target_to_arm720(target);
+	struct arm720t_common *arm720t = target_to_arm720(target);
 	reg_t *dbg_stat = &amp;arm720t-&gt;arm7tdmi_common.arm7_9_common
 			.eice_cache-&gt;reg_list[EICE_DBG_STAT];
 	struct armv4_5_common_s *armv4_5 = &amp;arm720t-&gt;arm7tdmi_common
@@ -377,7 +377,7 @@ static int arm720t_init_target(struct command_context_s *cmd_ctx, struct target_
 }
 
 static int arm720t_init_arch_info(target_t *target,
-		arm720t_common_t *arm720t, struct jtag_tap *tap)
+		struct arm720t_common *arm720t, struct jtag_tap *tap)
 {
 	arm7tdmi_common_t *arm7tdmi = &amp;arm720t-&gt;arm7tdmi_common;
 	arm7_9_common_t *arm7_9 = &amp;arm7tdmi-&gt;arm7_9_common;
@@ -403,7 +403,7 @@ static int arm720t_init_arch_info(target_t *target,
 
 static int arm720t_target_create(struct target_s *target, Jim_Interp *interp)
 {
-	struct arm720t_common_s *arm720t = calloc(1, sizeof(*arm720t));
+	struct arm720t_common *arm720t = calloc(1, sizeof(*arm720t));
 
 	arm720t-&gt;arm7tdmi_common.arm7_9_common.armv4_5_common.is_armv4 = true;
 	return arm720t_init_arch_info(target, arm720t, target-&gt;tap);
@@ -413,7 +413,7 @@ COMMAND_HANDLER(arm720t_handle_cp15_command)
 {
 	int retval;
 	target_t *target = get_current_target(cmd_ctx);
-	struct arm720t_common_s *arm720t = target_to_arm720(target);
+	struct arm720t_common *arm720t = target_to_arm720(target);
 	arm_jtag_t *jtag_info;
 
 	retval = arm720t_verify_pointer(cmd_ctx, arm720t);
diff --git a/src/target/arm720t.h b/src/target/arm720t.h
index c10cbe1..25c682a 100644
--- a/src/target/arm720t.h
+++ b/src/target/arm720t.h
@@ -25,7 +25,7 @@
 
 #define	ARM720T_COMMON_MAGIC 0xa720a720
 
-typedef struct arm720t_common_s
+struct arm720t_common
 {
 	arm7tdmi_common_t arm7tdmi_common;
 	uint32_t common_magic;
@@ -33,12 +33,12 @@ typedef struct arm720t_common_s
 	uint32_t cp15_control_reg;
 	uint32_t fsr_reg;
 	uint32_t far_reg;
-} arm720t_common_t;
+};
 
-static inline struct arm720t_common_s *
+static inline struct arm720t_common *
 target_to_arm720(struct target_s *target)
 {
-	return container_of(target-&gt;arch_info, struct arm720t_common_s,
+	return container_of(target-&gt;arch_info, struct arm720t_common,
 			arm7tdmi_common.arm7_9_common.armv4_5_common);
 }
 

commit f3b3752a9eebae273da6580c182e9d1486e41ed9
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:39:54 2009 -0800

    arm11_sc7_action_t -&gt; struct arm11_sc7_action
    
    Remove misleading typedef and redundant suffix from struct arm11_sc7_action.

diff --git a/src/target/arm11.c b/src/target/arm11.c
index 47786b8..e5794b8 100644
--- a/src/target/arm11.c
+++ b/src/target/arm11.c
@@ -851,7 +851,7 @@ static int arm11_resume(struct target_s *target, int current,
 
 		for (bp = target-&gt;breakpoints; bp; bp = bp-&gt;next)
 		{
-			arm11_sc7_action_t	brp[2];
+			struct arm11_sc7_action	brp[2];
 
 			brp[0].write	= 1;
 			brp[0].address	= ARM11_SC7_BVR0 + brp_num;
@@ -1074,7 +1074,7 @@ static int arm11_step(struct target_s *target, int current,
 
 		/* Set up breakpoint for stepping */
 
-		arm11_sc7_action_t	brp[2];
+		struct arm11_sc7_action	brp[2];
 
 		brp[0].write	= 1;
 		brp[0].address	= ARM11_SC7_BVR0;
diff --git a/src/target/arm11_dbgtap.c b/src/target/arm11_dbgtap.c
index f958238..65d4f82 100644
--- a/src/target/arm11_dbgtap.c
+++ b/src/target/arm11_dbgtap.c
@@ -782,14 +782,14 @@ int arm11_run_instr_data_to_core_via_r0(struct arm11_common * arm11, uint32_t op
 
 /** Apply reads and writes to scan chain 7
  *
- * \see arm11_sc7_action_t
+ * \see struct arm11_sc7_action
  *
  * \param arm11		Target state variable.
  * \param actions	A list of read and/or write instructions
  * \param count		Number of instructions in the list.
  *
  */
-int arm11_sc7_run(struct arm11_common * arm11, arm11_sc7_action_t * actions, size_t count)
+int arm11_sc7_run(struct arm11_common * arm11, struct arm11_sc7_action * actions, size_t count)
 {
 	int retval;
 
@@ -875,8 +875,8 @@ int arm11_sc7_run(struct arm11_common * arm11, arm11_sc7_action_t * actions, siz
  */
 void arm11_sc7_clear_vbw(struct arm11_common * arm11)
 {
-	arm11_sc7_action_t		clear_bw[arm11-&gt;brp + arm11-&gt;wrp + 1];
-	arm11_sc7_action_t *	pos = clear_bw;
+	struct arm11_sc7_action		clear_bw[arm11-&gt;brp + arm11-&gt;wrp + 1];
+	struct arm11_sc7_action *	pos = clear_bw;
 
 	for (size_t i = 0; i &lt; asizeof(clear_bw); i++)
 	{
@@ -904,7 +904,7 @@ void arm11_sc7_clear_vbw(struct arm11_common * arm11)
  */
 void arm11_sc7_set_vcr(struct arm11_common * arm11, uint32_t value)
 {
-	arm11_sc7_action_t		set_vcr;
+	struct arm11_sc7_action		set_vcr;
 
 	set_vcr.write		= true;
 	set_vcr.address		= ARM11_SC7_VCR;
diff --git a/src/target/arm11_dbgtap.h b/src/target/arm11_dbgtap.h
index 33ab3dd..87b66a5 100644
--- a/src/target/arm11_dbgtap.h
+++ b/src/target/arm11_dbgtap.h
@@ -45,7 +45,7 @@ int arm11_add_ir_scan_vc(int num_fields, struct scan_field *fields,
  * Used with arm11_sc7_run to make a list of read/write commands for
  * scan chain 7
  */
-typedef struct arm11_sc7_action_s
+struct arm11_sc7_action
 {
 	bool write; /**&lt; Access mode: true for write, false for read. */
 	uint8_t	address; /**&lt; Register address mode. Use enum #arm11_sc7 */
@@ -54,10 +54,10 @@ typedef struct arm11_sc7_action_s
 	 * this receives the read value when the function returns.
 	 */
 	uint32_t value;
-} arm11_sc7_action_t;
+};
 
 int arm11_sc7_run(struct arm11_common *arm11,
-		arm11_sc7_action_t *actions, size_t count);
+		struct arm11_sc7_action *actions, size_t count);
 
 /* Mid-level helper functions */
 void arm11_sc7_clear_vbw(struct arm11_common *arm11);

commit 3bcd9ad9d017649038be26fad5440e507db2118d
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:39:51 2009 -0800

    arm11_reg_state_t -&gt; struct arm11_reg_state
    
    Remove misleading typedef and redundant suffix from struct arm11_reg_state.

diff --git a/src/target/arm11.c b/src/target/arm11.c
index f5919c4..47786b8 100644
--- a/src/target/arm11.c
+++ b/src/target/arm11.c
@@ -1895,7 +1895,7 @@ static int arm11_get_reg(reg_t *reg)
 {
 	FNC_INFO;
 
-	target_t * target = ((arm11_reg_state_t *)reg-&gt;arch_info)-&gt;target;
+	target_t * target = ((struct arm11_reg_state *)reg-&gt;arch_info)-&gt;target;
 
 	if (target-&gt;state != TARGET_HALTED)
 	{
@@ -1907,7 +1907,7 @@ static int arm11_get_reg(reg_t *reg)
 
 #if 0
 	struct arm11_common *arm11 = target-&gt;arch_info;
-	const struct arm11_reg_defs * arm11_reg_info = arm11_reg_defs + ((arm11_reg_state_t *)reg-&gt;arch_info)-&gt;def_index;
+	const struct arm11_reg_defs * arm11_reg_info = arm11_reg_defs + ((struct arm11_reg_state *)reg-&gt;arch_info)-&gt;def_index;
 #endif
 
 	return ERROR_OK;
@@ -1918,11 +1918,11 @@ static int arm11_set_reg(reg_t *reg, uint8_t *buf)
 {
 	FNC_INFO;
 
-	target_t * target = ((arm11_reg_state_t *)reg-&gt;arch_info)-&gt;target;
+	target_t * target = ((struct arm11_reg_state *)reg-&gt;arch_info)-&gt;target;
 	struct arm11_common *arm11 = target-&gt;arch_info;
-//	  const struct arm11_reg_defs * arm11_reg_info = arm11_reg_defs + ((arm11_reg_state_t *)reg-&gt;arch_info)-&gt;def_index;
+//	  const struct arm11_reg_defs * arm11_reg_info = arm11_reg_defs + ((struct arm11_reg_state *)reg-&gt;arch_info)-&gt;def_index;
 
-	arm11-&gt;reg_values[((arm11_reg_state_t *)reg-&gt;arch_info)-&gt;def_index] = buf_get_u32(buf, 0, 32);
+	arm11-&gt;reg_values[((struct arm11_reg_state *)reg-&gt;arch_info)-&gt;def_index] = buf_get_u32(buf, 0, 32);
 	reg-&gt;valid	= 1;
 	reg-&gt;dirty	= 1;
 
@@ -1935,7 +1935,7 @@ static int arm11_build_reg_cache(target_t *target)
 
 	NEW(reg_cache_t,		cache,				1);
 	NEW(reg_t,				reg_list,			ARM11_REGCACHE_COUNT);
-	NEW(arm11_reg_state_t,	arm11_reg_states,	ARM11_REGCACHE_COUNT);
+	NEW(struct arm11_reg_state,	arm11_reg_states,	ARM11_REGCACHE_COUNT);
 
 	if (arm11_regs_arch_type == -1)
 		arm11_regs_arch_type = register_reg_arch_type(arm11_get_reg, arm11_set_reg);
@@ -1972,7 +1972,7 @@ static int arm11_build_reg_cache(target_t *target)
 	{
 		reg_t *						r	= reg_list			+ i;
 		const struct arm11_reg_defs *	rd	= arm11_reg_defs	+ i;
-		arm11_reg_state_t *			rs	= arm11_reg_states	+ i;
+		struct arm11_reg_state *			rs	= arm11_reg_states	+ i;
 
 		r-&gt;name				= rd-&gt;name;
 		r-&gt;size				= 32;
diff --git a/src/target/arm11.h b/src/target/arm11.h
index 464782d..f277b29 100644
--- a/src/target/arm11.h
+++ b/src/target/arm11.h
@@ -176,11 +176,11 @@ enum arm11_sc7
 	ARM11_SC7_WCR0				= 112,
 };
 
-typedef struct arm11_reg_state_s
+struct arm11_reg_state
 {
 	uint32_t				def_index;
 	target_t *			target;
-} arm11_reg_state_t;
+};
 
 int arm11_register_commands(struct command_context_s *cmd_ctx);
 

commit 55926f576f99a0c67b2836fedf0dc1bfc1260428
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:39:48 2009 -0800

    arm11_common_t -&gt; struct arm11_common
    
    Remove misleading typedef and redundant suffix from struct arm11_common.

diff --git a/src/target/arm11.c b/src/target/arm11.c
index 75ad15d..f5919c4 100644
--- a/src/target/arm11.c
+++ b/src/target/arm11.c
@@ -261,7 +261,7 @@ static reg_t arm11_gdb_dummy_fps_reg =
 };
 
 
-static int arm11_on_enter_debug_state(arm11_common_t *arm11);
+static int arm11_on_enter_debug_state(struct arm11_common *arm11);
 static int arm11_step(struct target_s *target, int current,
 		uint32_t address, int handle_breakpoints);
 /* helpers */
@@ -269,8 +269,8 @@ static int arm11_build_reg_cache(target_t *target);
 static int arm11_set_reg(reg_t *reg, uint8_t *buf);
 static int arm11_get_reg(reg_t *reg);
 
-static void arm11_record_register_history(arm11_common_t * arm11);
-static void arm11_dump_reg_changes(arm11_common_t * arm11);
+static void arm11_record_register_history(struct arm11_common * arm11);
+static void arm11_dump_reg_changes(struct arm11_common * arm11);
 
 
 /** Check and if necessary take control of the system
@@ -280,7 +280,7 @@ static void arm11_dump_reg_changes(arm11_common_t * arm11);
  *					available a pointer to a word holding the
  *					DSCR can be passed. Otherwise use NULL.
  */
-static int arm11_check_init(arm11_common_t *arm11, uint32_t *dscr)
+static int arm11_check_init(struct arm11_common *arm11, uint32_t *dscr)
 {
 	FNC_INFO;
 
@@ -338,7 +338,7 @@ static int arm11_check_init(arm11_common_t *arm11, uint32_t *dscr)
   * or on other occasions that stop the processor.
   *
   */
-static int arm11_on_enter_debug_state(arm11_common_t *arm11)
+static int arm11_on_enter_debug_state(struct arm11_common *arm11)
 {
 	int retval;
 	FNC_INFO;
@@ -502,7 +502,7 @@ static int arm11_on_enter_debug_state(arm11_common_t *arm11)
 	return ERROR_OK;
 }
 
-void arm11_dump_reg_changes(arm11_common_t * arm11)
+void arm11_dump_reg_changes(struct arm11_common * arm11)
 {
 
 	if (!(debug_level &gt;= LOG_LVL_DEBUG))
@@ -537,7 +537,7 @@ void arm11_dump_reg_changes(arm11_common_t * arm11)
   * This is called in preparation for the RESTART function.
   *
   */
-static int arm11_leave_debug_state(arm11_common_t *arm11)
+static int arm11_leave_debug_state(struct arm11_common *arm11)
 {
 	FNC_INFO;
 	int retval;
@@ -654,7 +654,7 @@ static int arm11_leave_debug_state(arm11_common_t *arm11)
 	return ERROR_OK;
 }
 
-static void arm11_record_register_history(arm11_common_t *arm11)
+static void arm11_record_register_history(struct arm11_common *arm11)
 {
 	for (size_t i = 0; i &lt; ARM11_REGCACHE_COUNT; i++)
 	{
@@ -673,7 +673,7 @@ static int arm11_poll(struct target_s *target)
 	FNC_INFO;
 	int retval;
 
-	arm11_common_t * arm11 = target-&gt;arch_info;
+	struct arm11_common * arm11 = target-&gt;arch_info;
 
 	uint32_t	dscr;
 
@@ -715,7 +715,7 @@ static int arm11_poll(struct target_s *target)
 /* architecture specific status reply */
 static int arm11_arch_state(struct target_s *target)
 {
-	arm11_common_t * arm11 = target-&gt;arch_info;
+	struct arm11_common * arm11 = target-&gt;arch_info;
 
 	LOG_USER(&quot;target halted due to %s\ncpsr: 0x%8.8&quot; PRIx32 &quot; pc: 0x%8.8&quot; PRIx32 &quot;&quot;,
 			 Jim_Nvp_value2name_simple(nvp_target_debug_reason, target-&gt;debug_reason)-&gt;name,
@@ -739,7 +739,7 @@ static int arm11_halt(struct target_s *target)
 {
 	FNC_INFO;
 
-	arm11_common_t * arm11 = target-&gt;arch_info;
+	struct arm11_common * arm11 = target-&gt;arch_info;
 
 	LOG_DEBUG(&quot;target-&gt;state: %s&quot;,
 		target_state_name(target));
@@ -808,7 +808,7 @@ static int arm11_resume(struct target_s *target, int current,
 	//	  LOG_DEBUG(&quot;current %d  address %08x  handle_breakpoints %d  debug_execution %d&quot;,
 	//	current, address, handle_breakpoints, debug_execution);
 
-	arm11_common_t * arm11 = target-&gt;arch_info;
+	struct arm11_common * arm11 = target-&gt;arch_info;
 
 	LOG_DEBUG(&quot;target-&gt;state: %s&quot;,
 		target_state_name(target));
@@ -944,7 +944,7 @@ static int armv4_5_to_arm11(int reg)
 
 static uint32_t arm11_sim_get_reg(struct arm_sim_interface *sim, int reg)
 {
-	arm11_common_t * arm11 = (arm11_common_t *)sim-&gt;user_data;
+	struct arm11_common * arm11 = (struct arm11_common *)sim-&gt;user_data;
 
 	reg=armv4_5_to_arm11(reg);
 
@@ -954,7 +954,7 @@ static uint32_t arm11_sim_get_reg(struct arm_sim_interface *sim, int reg)
 static void arm11_sim_set_reg(struct arm_sim_interface *sim,
 		int reg, uint32_t value)
 {
-	arm11_common_t * arm11 = (arm11_common_t *)sim-&gt;user_data;
+	struct arm11_common * arm11 = (struct arm11_common *)sim-&gt;user_data;
 
 	reg=armv4_5_to_arm11(reg);
 
@@ -964,14 +964,14 @@ static void arm11_sim_set_reg(struct arm_sim_interface *sim,
 static uint32_t arm11_sim_get_cpsr(struct arm_sim_interface *sim,
 		int pos, int bits)
 {
-	arm11_common_t * arm11 = (arm11_common_t *)sim-&gt;user_data;
+	struct arm11_common * arm11 = (struct arm11_common *)sim-&gt;user_data;
 
 	return buf_get_u32(arm11-&gt;reg_list[ARM11_RC_CPSR].value, pos, bits);
 }
 
 static enum armv4_5_state arm11_sim_get_state(struct arm_sim_interface *sim)
 {
-//	arm11_common_t * arm11 = (arm11_common_t *)sim-&gt;user_data;
+//	struct arm11_common * arm11 = (struct arm11_common *)sim-&gt;user_data;
 
 	/* FIX!!!! we should implement thumb for arm11 */
 	return ARMV4_5_STATE_ARM;
@@ -980,7 +980,7 @@ static enum armv4_5_state arm11_sim_get_state(struct arm_sim_interface *sim)
 static void arm11_sim_set_state(struct arm_sim_interface *sim,
 		enum armv4_5_state mode)
 {
-//	arm11_common_t * arm11 = (arm11_common_t *)sim-&gt;user_data;
+//	struct arm11_common * arm11 = (struct arm11_common *)sim-&gt;user_data;
 
 	/* FIX!!!! we should implement thumb for arm11 */
 	LOG_ERROR(&quot;Not implemetned!&quot;);
@@ -989,7 +989,7 @@ static void arm11_sim_set_state(struct arm_sim_interface *sim,
 
 static enum armv4_5_mode arm11_sim_get_mode(struct arm_sim_interface *sim)
 {
-	//arm11_common_t * arm11 = (arm11_common_t *)sim-&gt;user_data;
+	//struct arm11_common * arm11 = (struct arm11_common *)sim-&gt;user_data;
 
 	/* FIX!!!! we should implement something that returns the current mode here!!! */
 	return ARMV4_5_MODE_USR;
@@ -1027,7 +1027,7 @@ static int arm11_step(struct target_s *target, int current,
 		return ERROR_TARGET_NOT_HALTED;
 	}
 
-	arm11_common_t * arm11 = target-&gt;arch_info;
+	struct arm11_common * arm11 = target-&gt;arch_info;
 
 	if (!current)
 		R(PC) = address;
@@ -1174,7 +1174,7 @@ static int arm11_assert_reset(target_t *target)
 	FNC_INFO;
 	int retval;
 
-	arm11_common_t * arm11 = target-&gt;arch_info;
+	struct arm11_common * arm11 = target-&gt;arch_info;
 	retval = arm11_check_init(arm11, NULL);
 	if (retval != ERROR_OK)
 		return retval;
@@ -1249,7 +1249,7 @@ static int arm11_get_gdb_reg_list(struct target_s *target,
 {
 	FNC_INFO;
 
-	arm11_common_t * arm11 = target-&gt;arch_info;
+	struct arm11_common * arm11 = target-&gt;arch_info;
 
 	*reg_list_size	= ARM11_GDB_REGISTER_COUNT;
 	*reg_list		= malloc(sizeof(reg_t*) * ARM11_GDB_REGISTER_COUNT);
@@ -1297,7 +1297,7 @@ static int arm11_read_memory_inner(struct target_s *target,
 
 	LOG_DEBUG(&quot;ADDR %08&quot; PRIx32 &quot;  SIZE %08&quot; PRIx32 &quot;  COUNT %08&quot; PRIx32 &quot;&quot;, address, size, count);
 
-	arm11_common_t * arm11 = target-&gt;arch_info;
+	struct arm11_common * arm11 = target-&gt;arch_info;
 
 	retval = arm11_run_instr_data_prepare(arm11);
 	if (retval != ERROR_OK)
@@ -1393,7 +1393,7 @@ static int arm11_write_memory_inner(struct target_s *target,
 
 	LOG_DEBUG(&quot;ADDR %08&quot; PRIx32 &quot;  SIZE %08&quot; PRIx32 &quot;  COUNT %08&quot; PRIx32 &quot;&quot;, address, size, count);
 
-	arm11_common_t * arm11 = target-&gt;arch_info;
+	struct arm11_common * arm11 = target-&gt;arch_info;
 
 	retval = arm11_run_instr_data_prepare(arm11);
 	if (retval != ERROR_OK)
@@ -1556,7 +1556,7 @@ static int arm11_add_breakpoint(struct target_s *target,
 {
 	FNC_INFO;
 
-	arm11_common_t * arm11 = target-&gt;arch_info;
+	struct arm11_common * arm11 = target-&gt;arch_info;
 
 #if 0
 	if (breakpoint-&gt;type == BKPT_SOFT)
@@ -1588,7 +1588,7 @@ static int arm11_remove_breakpoint(struct target_s *target,
 {
 	FNC_INFO;
 
-	arm11_common_t * arm11 = target-&gt;arch_info;
+	struct arm11_common * arm11 = target-&gt;arch_info;
 
 	arm11-&gt;free_brps++;
 
@@ -1619,7 +1619,7 @@ static int arm11_run_algorithm(struct target_s *target,
 		uint32_t entry_point, uint32_t exit_point,
 		int timeout_ms, void *arch_info)
 {
-		arm11_common_t *arm11 = target-&gt;arch_info;
+		struct arm11_common *arm11 = target-&gt;arch_info;
 //	enum armv4_5_state core_state = arm11-&gt;core_state;
 //	enum armv4_5_mode core_mode = arm11-&gt;core_mode;
 	uint32_t context[16];
@@ -1783,7 +1783,7 @@ static int arm11_target_create(struct target_s *target, Jim_Interp *interp)
 {
 	FNC_INFO;
 
-	NEW(arm11_common_t, arm11, 1);
+	NEW(struct arm11_common, arm11, 1);
 
 	arm11-&gt;target = target;
 
@@ -1815,7 +1815,7 @@ static int arm11_examine(struct target_s *target)
 
 	FNC_INFO;
 
-	arm11_common_t * arm11 = target-&gt;arch_info;
+	struct arm11_common * arm11 = target-&gt;arch_info;
 
 	/* check IDCODE */
 
@@ -1906,7 +1906,7 @@ static int arm11_get_reg(reg_t *reg)
 	/** \todo TODO: Check this. We assume that all registers are fetched at debug entry. */
 
 #if 0
-	arm11_common_t *arm11 = target-&gt;arch_info;
+	struct arm11_common *arm11 = target-&gt;arch_info;
 	const struct arm11_reg_defs * arm11_reg_info = arm11_reg_defs + ((arm11_reg_state_t *)reg-&gt;arch_info)-&gt;def_index;
 #endif
 
@@ -1919,7 +1919,7 @@ static int arm11_set_reg(reg_t *reg, uint8_t *buf)
 	FNC_INFO;
 
 	target_t * target = ((arm11_reg_state_t *)reg-&gt;arch_info)-&gt;target;
-	arm11_common_t *arm11 = target-&gt;arch_info;
+	struct arm11_common *arm11 = target-&gt;arch_info;
 //	  const struct arm11_reg_defs * arm11_reg_info = arm11_reg_defs + ((arm11_reg_state_t *)reg-&gt;arch_info)-&gt;def_index;
 
 	arm11-&gt;reg_values[((arm11_reg_state_t *)reg-&gt;arch_info)-&gt;def_index] = buf_get_u32(buf, 0, 32);
@@ -1931,7 +1931,7 @@ static int arm11_set_reg(reg_t *reg, uint8_t *buf)
 
 static int arm11_build_reg_cache(target_t *target)
 {
-	arm11_common_t *arm11 = target-&gt;arch_info;
+	struct arm11_common *arm11 = target-&gt;arch_info;
 
 	NEW(reg_cache_t,		cache,				1);
 	NEW(reg_t,				reg_list,			ARM11_REGCACHE_COUNT);
@@ -2064,7 +2064,7 @@ static const uint32_t arm11_coproc_instruction_limits[] =
 	0xFFFFFFFF,		/* value */
 };
 
-static arm11_common_t * arm11_find_target(const char * arg)
+static struct arm11_common * arm11_find_target(const char * arg)
 {
 	struct jtag_tap *	tap;
 	target_t *		t;
@@ -2099,7 +2099,7 @@ static int arm11_mrc_inner(target_t *target, int cpnum,
 		return ERROR_FAIL;
 	}
 		
-	arm11_common_t * arm11 = target-&gt;arch_info;
+	struct arm11_common * arm11 = target-&gt;arch_info;
 
 	uint32_t instr = 0xEE000010	|
 		(cpnum &lt;&lt;  8) |
@@ -2151,7 +2151,7 @@ static COMMAND_HELPER(arm11_handle_etm_read_write, bool read)
 		return ERROR_COMMAND_SYNTAX_ERROR;
 	}
 
-	arm11_common_t * arm11 = arm11_find_target(args[0]);
+	struct arm11_common * arm11 = arm11_find_target(args[0]);
 
 	if (!arm11)
 	{
diff --git a/src/target/arm11.h b/src/target/arm11.h
index 4bbc456..464782d 100644
--- a/src/target/arm11.h
+++ b/src/target/arm11.h
@@ -78,7 +78,7 @@ enum arm11_debug_version
 	ARM11_DEBUG_V7_CP14		= 0x04,
 };
 
-typedef struct arm11_common_s
+struct arm11_common
 {
 	target_t *	target;		/**&lt; Reference back to the owner */
 
@@ -117,7 +117,7 @@ typedef struct arm11_common_s
 
 	// GA
 	reg_cache_t *core_cache;
-} arm11_common_t;
+};
 
 
 /**
@@ -184,8 +184,8 @@ typedef struct arm11_reg_state_s
 
 int arm11_register_commands(struct command_context_s *cmd_ctx);
 
-int arm11_read_etm(arm11_common_t * arm11, uint8_t address, uint32_t *value);
-int arm11_write_etm(arm11_common_t * arm11, uint8_t address, uint32_t value);
+int arm11_read_etm(struct arm11_common * arm11, uint8_t address, uint32_t *value);
+int arm11_write_etm(struct arm11_common * arm11, uint8_t address, uint32_t value);
 
 
 
diff --git a/src/target/arm11_dbgtap.c b/src/target/arm11_dbgtap.c
index 6154f34..f958238 100644
--- a/src/target/arm11_dbgtap.c
+++ b/src/target/arm11_dbgtap.c
@@ -81,7 +81,7 @@ int arm11_add_dr_scan_vc(int num_fields, struct scan_field *fields, tap_state_t
  *						&lt;em &gt; (data is written when the JTAG queue is executed)&lt;/em&gt;
  * \param field			target data structure that will be initialized
  */
-void arm11_setup_field(arm11_common_t * arm11, int num_bits, void * out_data, void * in_data, struct scan_field * field)
+void arm11_setup_field(struct arm11_common * arm11, int num_bits, void * out_data, void * in_data, struct scan_field * field)
 {
 	field-&gt;tap   			= arm11-&gt;target-&gt;tap;
 	field-&gt;num_bits			= num_bits;
@@ -98,7 +98,7 @@ void arm11_setup_field(arm11_common_t * arm11, int num_bits, void * out_data, vo
  *
  * \remarks			This adds to the JTAG command queue but does \em not execute it.
  */
-void arm11_add_IR(arm11_common_t * arm11, uint8_t instr, tap_state_t state)
+void arm11_add_IR(struct arm11_common * arm11, uint8_t instr, tap_state_t state)
 {
 	struct jtag_tap *tap;
 	tap = arm11-&gt;target-&gt;tap;
@@ -161,7 +161,7 @@ static void arm11_in_handler_SCAN_N(uint8_t *in_value)
  * \remarks			This adds to the JTAG command queue but does \em not execute it.
  */
 
-int arm11_add_debug_SCAN_N(arm11_common_t * arm11, uint8_t chain, tap_state_t state)
+int arm11_add_debug_SCAN_N(struct arm11_common * arm11, uint8_t chain, tap_state_t state)
 {
 	JTAG_DEBUG(&quot;SCREG &lt;= 0x%02x&quot;, chain);
 
@@ -198,7 +198,7 @@ int arm11_add_debug_SCAN_N(arm11_common_t * arm11, uint8_t chain, tap_state_t st
  *
  * \remarks			This adds to the JTAG command queue but does \em not execute it.
  */
-void arm11_add_debug_INST(arm11_common_t * arm11, uint32_t inst, uint8_t * flag, tap_state_t state)
+void arm11_add_debug_INST(struct arm11_common * arm11, uint32_t inst, uint8_t * flag, tap_state_t state)
 {
 	JTAG_DEBUG(&quot;INST &lt;= 0x%08x&quot;, inst);
 
@@ -220,7 +220,7 @@ void arm11_add_debug_INST(arm11_common_t * arm11, uint32_t inst, uint8_t * flag,
  *
  * \remarks			This is a stand-alone function that executes the JTAG command queue.
  */
-int arm11_read_DSCR(arm11_common_t * arm11, uint32_t *value)
+int arm11_read_DSCR(struct arm11_common * arm11, uint32_t *value)
 {
 	int retval;
 	retval = arm11_add_debug_SCAN_N(arm11, 0x01, ARM11_TAP_DEFAULT);
@@ -257,7 +257,7 @@ int arm11_read_DSCR(arm11_common_t * arm11, uint32_t *value)
  *
  * \remarks			This is a stand-alone function that executes the JTAG command queue.
  */
-int arm11_write_DSCR(arm11_common_t * arm11, uint32_t dscr)
+int arm11_write_DSCR(struct arm11_common * arm11, uint32_t dscr)
 {
 	int retval;
 	retval = arm11_add_debug_SCAN_N(arm11, 0x01, ARM11_TAP_DEFAULT);
@@ -339,7 +339,7 @@ enum target_debug_reason arm11_get_DSCR_debug_reason(uint32_t dscr)
  * \param arm11		Target state variable.
  *
  */
-int arm11_run_instr_data_prepare(arm11_common_t * arm11)
+int arm11_run_instr_data_prepare(struct arm11_common * arm11)
 {
 	return arm11_add_debug_SCAN_N(arm11, 0x05, ARM11_TAP_DEFAULT);
 }
@@ -358,7 +358,7 @@ int arm11_run_instr_data_prepare(arm11_common_t * arm11)
  * \param arm11		Target state variable.
  *
  */
-int arm11_run_instr_data_finish(arm11_common_t * arm11)
+int arm11_run_instr_data_finish(struct arm11_common * arm11)
 {
 	return arm11_add_debug_SCAN_N(arm11, 0x00, ARM11_TAP_DEFAULT);
 }
@@ -374,7 +374,7 @@ int arm11_run_instr_data_finish(arm11_common_t * arm11)
  * \param count		Number of opcodes to execute
  *
  */
-int arm11_run_instr_no_data(arm11_common_t * arm11, uint32_t * opcode, size_t count)
+int arm11_run_instr_no_data(struct arm11_common * arm11, uint32_t * opcode, size_t count)
 {
 	arm11_add_IR(arm11, ARM11_ITRSEL, ARM11_TAP_DEFAULT);
 
@@ -424,7 +424,7 @@ int arm11_run_instr_no_data(arm11_common_t * arm11, uint32_t * opcode, size_t co
  * \param opcode	ARM opcode
  *
  */
-int arm11_run_instr_no_data1(arm11_common_t * arm11, uint32_t opcode)
+int arm11_run_instr_no_data1(struct arm11_common * arm11, uint32_t opcode)
 {
 	return arm11_run_instr_no_data(arm11, &amp;opcode, 1);
 }
@@ -443,7 +443,7 @@ int arm11_run_instr_no_data1(arm11_common_t * arm11, uint32_t opcode)
  * \param count		Number of data words and instruction repetitions
  *
  */
-int arm11_run_instr_data_to_core(arm11_common_t * arm11, uint32_t opcode, uint32_t * data, size_t count)
+int arm11_run_instr_data_to_core(struct arm11_common * arm11, uint32_t opcode, uint32_t * data, size_t count)
 {
 	arm11_add_IR(arm11, ARM11_ITRSEL, ARM11_TAP_DEFAULT);
 
@@ -570,7 +570,7 @@ static const tap_state_t arm11_MOVE_DRPAUSE_IDLE_DRPAUSE_with_delay[] =
  * \param count		Number of data words and instruction repetitions
  *
  */
-int arm11_run_instr_data_to_core_noack(arm11_common_t * arm11, uint32_t opcode, uint32_t * data, size_t count)
+int arm11_run_instr_data_to_core_noack(struct arm11_common * arm11, uint32_t opcode, uint32_t * data, size_t count)
 {
 	arm11_add_IR(arm11, ARM11_ITRSEL, ARM11_TAP_DEFAULT);
 
@@ -655,7 +655,7 @@ int arm11_run_instr_data_to_core_noack(arm11_common_t * arm11, uint32_t opcode,
  * \param data		Data word to be passed to the core via DTR
  *
  */
-int arm11_run_instr_data_to_core1(arm11_common_t * arm11, uint32_t opcode, uint32_t data)
+int arm11_run_instr_data_to_core1(struct arm11_common * arm11, uint32_t opcode, uint32_t data)
 {
 	return arm11_run_instr_data_to_core(arm11, opcode, &amp;data, 1);
 }
@@ -674,7 +674,7 @@ int arm11_run_instr_data_to_core1(arm11_common_t * arm11, uint32_t opcode, uint3
  * \param count		Number of data words and instruction repetitions
  *
  */
-int arm11_run_instr_data_from_core(arm11_common_t * arm11, uint32_t opcode, uint32_t * data, size_t count)
+int arm11_run_instr_data_from_core(struct arm11_common * arm11, uint32_t opcode, uint32_t * data, size_t count)
 {
 	arm11_add_IR(arm11, ARM11_ITRSEL, ARM11_TAP_DEFAULT);
 
@@ -740,7 +740,7 @@ int arm11_run_instr_data_from_core(arm11_common_t * arm11, uint32_t opcode, uint
  * \param data		Pointer to a data word that receives the value from r0 after \p opcode was executed.
  *
  */
-int arm11_run_instr_data_from_core_via_r0(arm11_common_t * arm11, uint32_t opcode, uint32_t * data)
+int arm11_run_instr_data_from_core_via_r0(struct arm11_common * arm11, uint32_t opcode, uint32_t * data)
 {
 	int retval;
 	retval = arm11_run_instr_no_data1(arm11, opcode);
@@ -765,7 +765,7 @@ int arm11_run_instr_data_from_core_via_r0(arm11_common_t * arm11, uint32_t opcod
  * \param data		Data word that will be written to r0 before \p opcode is executed
  *
  */
-int arm11_run_instr_data_to_core_via_r0(arm11_common_t * arm11, uint32_t opcode, uint32_t data)
+int arm11_run_instr_data_to_core_via_r0(struct arm11_common * arm11, uint32_t opcode, uint32_t data)
 {
 	int retval;
 	/* MRC p14,0,r0,c0,c5,0 */
@@ -789,7 +789,7 @@ int arm11_run_instr_data_to_core_via_r0(arm11_common_t * arm11, uint32_t opcode,
  * \param count		Number of instructions in the list.
  *
  */
-int arm11_sc7_run(arm11_common_t * arm11, arm11_sc7_action_t * actions, size_t count)
+int arm11_sc7_run(struct arm11_common * arm11, arm11_sc7_action_t * actions, size_t count)
 {
 	int retval;
 
@@ -873,7 +873,7 @@ int arm11_sc7_run(arm11_common_t * arm11, arm11_sc7_action_t * actions, size_t c
  * \param arm11		Target state variable.
  *
  */
-void arm11_sc7_clear_vbw(arm11_common_t * arm11)
+void arm11_sc7_clear_vbw(struct arm11_common * arm11)
 {
 	arm11_sc7_action_t		clear_bw[arm11-&gt;brp + arm11-&gt;wrp + 1];
 	arm11_sc7_action_t *	pos = clear_bw;
@@ -902,7 +902,7 @@ void arm11_sc7_clear_vbw(arm11_common_t * arm11)
  * \param arm11		Target state variable.
  * \param value		Value to be written
  */
-void arm11_sc7_set_vcr(arm11_common_t * arm11, uint32_t value)
+void arm11_sc7_set_vcr(struct arm11_common * arm11, uint32_t value)
 {
 	arm11_sc7_action_t		set_vcr;
 
@@ -923,7 +923,7 @@ void arm11_sc7_set_vcr(arm11_common_t * arm11, uint32_t value)
  * \param result	Pointer where to store result
  *
  */
-int arm11_read_memory_word(arm11_common_t * arm11, uint32_t address, uint32_t * result)
+int arm11_read_memory_word(struct arm11_common * arm11, uint32_t address, uint32_t * result)
 {
 	int retval;
 	retval = arm11_run_instr_data_prepare(arm11);
@@ -952,7 +952,7 @@ int arm11_read_memory_word(arm11_common_t * arm11, uint32_t address, uint32_t *
  *
  * \remarks			This is a stand-alone function that executes the JTAG command queue.
  */
-int arm11_write_etm(arm11_common_t * arm11, uint8_t address, uint32_t value)
+int arm11_write_etm(struct arm11_common * arm11, uint8_t address, uint32_t value)
 {
 	CHECK_RETVAL(arm11_add_debug_SCAN_N(arm11, 0x06, ARM11_TAP_DEFAULT));
 
@@ -986,7 +986,7 @@ int arm11_write_etm(arm11_common_t * arm11, uint8_t address, uint32_t value)
  *
  * \remarks			This is a stand-alone function that executes the JTAG command queue.
  */
-int arm11_read_etm(arm11_common_t * arm11, uint8_t address, uint32_t * value)
+int arm11_read_etm(struct arm11_common * arm11, uint8_t address, uint32_t * value)
 {
 	CHECK_RETVAL(arm11_add_debug_SCAN_N(arm11, 0x06, ARM11_TAP_DEFAULT));
 
diff --git a/src/target/arm11_dbgtap.h b/src/target/arm11_dbgtap.h
index fb37faa..33ab3dd 100644
--- a/src/target/arm11_dbgtap.h
+++ b/src/target/arm11_dbgtap.h
@@ -5,35 +5,35 @@
 
 /* ARM11 internals */
 
-void arm11_setup_field(arm11_common_t *arm11, int num_bits,
+void arm11_setup_field(struct arm11_common *arm11, int num_bits,
 		void *in_data, void *out_data, struct scan_field *field);
-void arm11_add_IR(arm11_common_t *arm11,
+void arm11_add_IR(struct arm11_common *arm11,
 		uint8_t instr, tap_state_t state);
-int arm11_add_debug_SCAN_N(arm11_common_t *arm11,
+int arm11_add_debug_SCAN_N(struct arm11_common *arm11,
 		uint8_t chain, tap_state_t state);
-void arm11_add_debug_INST(arm11_common_t *arm11,
+void arm11_add_debug_INST(struct arm11_common *arm11,
 		uint32_t inst, uint8_t *flag, tap_state_t state);
-int arm11_read_DSCR(arm11_common_t *arm11, uint32_t *dscr);
-int arm11_write_DSCR(arm11_common_t *arm11, uint32_t dscr);
+int arm11_read_DSCR(struct arm11_common *arm11, uint32_t *dscr);
+int arm11_write_DSCR(struct arm11_common *arm11, uint32_t dscr);
 
 enum target_debug_reason arm11_get_DSCR_debug_reason(uint32_t dscr);
 
-int arm11_run_instr_data_prepare(arm11_common_t *arm11);
-int arm11_run_instr_data_finish(arm11_common_t *arm11);
-int arm11_run_instr_no_data(arm11_common_t *arm11,
+int arm11_run_instr_data_prepare(struct arm11_common *arm11);
+int arm11_run_instr_data_finish(struct arm11_common *arm11);
+int arm11_run_instr_no_data(struct arm11_common *arm11,
 		uint32_t *opcode, size_t count);
-int arm11_run_instr_no_data1(arm11_common_t *arm11, uint32_t opcode);
-int arm11_run_instr_data_to_core(arm11_common_t *arm11,
+int arm11_run_instr_no_data1(struct arm11_common *arm11, uint32_t opcode);
+int arm11_run_instr_data_to_core(struct arm11_common *arm11,
 		uint32_t opcode, uint32_t *data, size_t count);
-int arm11_run_instr_data_to_core_noack(arm11_common_t *arm11,
+int arm11_run_instr_data_to_core_noack(struct arm11_common *arm11,
 		uint32_t opcode, uint32_t *data, size_t count);
-int arm11_run_instr_data_to_core1(arm11_common_t *arm11,
+int arm11_run_instr_data_to_core1(struct arm11_common *arm11,
 		uint32_t opcode, uint32_t data);
-int arm11_run_instr_data_from_core(arm11_common_t *arm11,
+int arm11_run_instr_data_from_core(struct arm11_common *arm11,
 		uint32_t opcode, uint32_t *data, size_t count);
-int arm11_run_instr_data_from_core_via_r0(arm11_common_t *arm11,
+int arm11_run_instr_data_from_core_via_r0(struct arm11_common *arm11,
 		uint32_t opcode, uint32_t *data);
-int arm11_run_instr_data_to_core_via_r0(arm11_common_t *arm11,
+int arm11_run_instr_data_to_core_via_r0(struct arm11_common *arm11,
 		uint32_t opcode, uint32_t data);
 
 int arm11_add_dr_scan_vc(int num_fields, struct scan_field *fields,
@@ -56,14 +56,14 @@ typedef struct arm11_sc7_action_s
 	uint32_t value;
 } arm11_sc7_action_t;
 
-int arm11_sc7_run(arm11_common_t *arm11,
+int arm11_sc7_run(struct arm11_common *arm11,
 		arm11_sc7_action_t *actions, size_t count);
 
 /* Mid-level helper functions */
-void arm11_sc7_clear_vbw(arm11_common_t *arm11);
-void arm11_sc7_set_vcr(arm11_common_t *arm11, uint32_t value);
+void arm11_sc7_clear_vbw(struct arm11_common *arm11);
+void arm11_sc7_set_vcr(struct arm11_common *arm11, uint32_t value);
 
-int arm11_read_memory_word(arm11_common_t *arm11,
+int arm11_read_memory_word(struct arm11_common *arm11,
 		uint32_t address, uint32_t *result);
 
 #endif // ARM11_DBGTAP_H

commit 0eae94879d85a7a402c890bda66efdeffde6f1c7
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:39:45 2009 -0800

    arm11_reg_defs_t -&gt; struct arm11_reg_defs
    
    Remove misleading typedef and redundant suffix from struct arm11_reg_defs.

diff --git a/src/target/arm11.c b/src/target/arm11.c
index 2787eca..75ad15d 100644
--- a/src/target/arm11.c
+++ b/src/target/arm11.c
@@ -87,16 +87,16 @@ enum arm11_regtype
 };
 
 
-typedef struct arm11_reg_defs_s
+struct arm11_reg_defs
 {
 	char *					name;
 	uint32_t						num;
 	int						gdb_num;
 	enum arm11_regtype		type;
-} arm11_reg_defs_t;
+};
 
 /* update arm11_regcache_ids when changing this */
-static const arm11_reg_defs_t arm11_reg_defs[] =
+static const struct arm11_reg_defs arm11_reg_defs[] =
 {
 	{&quot;r0&quot;,	0,	0,	ARM11_REGISTER_CORE},
 	{&quot;r1&quot;,	1,	1,	ARM11_REGISTER_CORE},
@@ -1907,7 +1907,7 @@ static int arm11_get_reg(reg_t *reg)
 
 #if 0
 	arm11_common_t *arm11 = target-&gt;arch_info;
-	const arm11_reg_defs_t * arm11_reg_info = arm11_reg_defs + ((arm11_reg_state_t *)reg-&gt;arch_info)-&gt;def_index;
+	const struct arm11_reg_defs * arm11_reg_info = arm11_reg_defs + ((arm11_reg_state_t *)reg-&gt;arch_info)-&gt;def_index;
 #endif
 
 	return ERROR_OK;
@@ -1920,7 +1920,7 @@ static int arm11_set_reg(reg_t *reg, uint8_t *buf)
 
 	target_t * target = ((arm11_reg_state_t *)reg-&gt;arch_info)-&gt;target;
 	arm11_common_t *arm11 = target-&gt;arch_info;
-//	  const arm11_reg_defs_t * arm11_reg_info = arm11_reg_defs + ((arm11_reg_state_t *)reg-&gt;arch_info)-&gt;def_index;
+//	  const struct arm11_reg_defs * arm11_reg_info = arm11_reg_defs + ((arm11_reg_state_t *)reg-&gt;arch_info)-&gt;def_index;
 
 	arm11-&gt;reg_values[((arm11_reg_state_t *)reg-&gt;arch_info)-&gt;def_index] = buf_get_u32(buf, 0, 32);
 	reg-&gt;valid	= 1;
@@ -1971,7 +1971,7 @@ static int arm11_build_reg_cache(target_t *target)
 	for (i = 0; i &lt; ARM11_REGCACHE_COUNT; i++)
 	{
 		reg_t *						r	= reg_list			+ i;
-		const arm11_reg_defs_t *	rd	= arm11_reg_defs	+ i;
+		const struct arm11_reg_defs *	rd	= arm11_reg_defs	+ i;
 		arm11_reg_state_t *			rs	= arm11_reg_states	+ i;
 
 		r-&gt;name				= rd-&gt;name;

commit b1de5eb9a074b362e953e857c42cac9a9b18b2a3
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:39:42 2009 -0800

    reg_param_t -&gt; struct reg_param
    
    Remove misleading typedef and redundant suffix from struct reg_param.

diff --git a/src/flash/aduc702x.c b/src/flash/aduc702x.c
index ea9e840..931db5a 100644
--- a/src/flash/aduc702x.c
+++ b/src/flash/aduc702x.c
@@ -163,7 +163,7 @@ static int aduc702x_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint
 	uint32_t buffer_size = 7000;
 	working_area_t *source;
 	uint32_t address = bank-&gt;base + offset;
-	reg_param_t reg_params[6];
+	struct reg_param reg_params[6];
 	armv4_5_algorithm_t armv4_5_info;
 	int retval = ERROR_OK;
 
diff --git a/src/flash/arm_nandio.c b/src/flash/arm_nandio.c
index 8087221..0453656 100644
--- a/src/flash/arm_nandio.c
+++ b/src/flash/arm_nandio.c
@@ -44,7 +44,7 @@ int arm_nandwrite(struct arm_nand_data *nand, uint8_t *data, int size)
 	target_t		*target = nand-&gt;target;
 	armv4_5_algorithm_t	algo;
 	armv4_5_common_t	*armv4_5 = target-&gt;arch_info;
-	reg_param_t		reg_params[3];
+	struct reg_param		reg_params[3];
 	uint32_t		target_buf;
 	uint32_t		exit = 0;
 	int			retval;
diff --git a/src/flash/cfi.c b/src/flash/cfi.c
index 3fa4917..fd9c2a7 100644
--- a/src/flash/cfi.c
+++ b/src/flash/cfi.c
@@ -1020,7 +1020,7 @@ static int cfi_intel_write_block(struct flash_bank_s *bank, uint8_t *buffer, uin
 {
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
-	reg_param_t reg_params[7];
+	struct reg_param reg_params[7];
 	armv4_5_algorithm_t armv4_5_info;
 	working_area_t *source;
 	uint32_t buffer_size = 32768;
@@ -1265,7 +1265,7 @@ static int cfi_spansion_write_block(struct flash_bank_s *bank, uint8_t *buffer,
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	struct cfi_spansion_pri_ext *pri_ext = cfi_info-&gt;pri_ext;
 	target_t *target = bank-&gt;target;
-	reg_param_t reg_params[10];
+	struct reg_param reg_params[10];
 	armv4_5_algorithm_t armv4_5_info;
 	working_area_t *source;
 	uint32_t buffer_size = 32768;
diff --git a/src/flash/ecos.c b/src/flash/ecos.c
index 5a0d7ec..97566d4 100644
--- a/src/flash/ecos.c
+++ b/src/flash/ecos.c
@@ -206,7 +206,7 @@ static int runCode(struct ecosflash_flash_bank *info,
 {
 	target_t *target = info-&gt;target;
 
-	reg_param_t reg_params[3];
+	struct reg_param reg_params[3];
 	armv4_5_algorithm_t armv4_5_info;
 	armv4_5_info.common_magic = ARMV4_5_COMMON_MAGIC;
 	armv4_5_info.core_mode = ARMV4_5_MODE_SVC;
diff --git a/src/flash/lpc2000.c b/src/flash/lpc2000.c
index ab2b1c8..05c08dd 100644
--- a/src/flash/lpc2000.c
+++ b/src/flash/lpc2000.c
@@ -240,7 +240,7 @@ static int lpc2000_iap_call(flash_bank_t *bank, int code, uint32_t param_table[5
 	struct lpc2000_flash_bank *lpc2000_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 	struct mem_param mem_params[2];
-	reg_param_t reg_params[5];
+	struct reg_param reg_params[5];
 	armv4_5_algorithm_t armv4_5_info; /* for LPC2000 */
 	armv7m_algorithm_t armv7m_info;   /* for LPC1700 */
  	uint32_t status_code;
diff --git a/src/flash/lpc2900.c b/src/flash/lpc2900.c
index 5255f56..8d1eeb8 100644
--- a/src/flash/lpc2900.c
+++ b/src/flash/lpc2900.c
@@ -1313,7 +1313,7 @@ static int lpc2900_write(struct flash_bank_s *bank, uint8_t *buffer,
 
 	if( warea )
 	{
-		reg_param_t reg_params[5];
+		struct reg_param reg_params[5];
 		armv4_5_algorithm_t armv4_5_info;
 
 		/* We can use target mode. Download the algorithm. */
diff --git a/src/flash/stellaris.c b/src/flash/stellaris.c
index 7799800..bc5d10a 100644
--- a/src/flash/stellaris.c
+++ b/src/flash/stellaris.c
@@ -835,7 +835,7 @@ static int stellaris_write_block(struct flash_bank_s *bank, uint8_t *buffer, uin
 	working_area_t *source;
 	working_area_t *write_algorithm;
 	uint32_t address = bank-&gt;base + offset;
-	reg_param_t reg_params[3];
+	struct reg_param reg_params[3];
 	armv7m_algorithm_t armv7m_info;
 	int retval = ERROR_OK;
 
diff --git a/src/flash/stm32x.c b/src/flash/stm32x.c
index 1b2486d..e69fb56 100644
--- a/src/flash/stm32x.c
+++ b/src/flash/stm32x.c
@@ -437,7 +437,7 @@ static int stm32x_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint32
 	uint32_t buffer_size = 16384;
 	working_area_t *source;
 	uint32_t address = bank-&gt;base + offset;
-	reg_param_t reg_params[4];
+	struct reg_param reg_params[4];
 	armv7m_algorithm_t armv7m_info;
 	int retval = ERROR_OK;
 
diff --git a/src/flash/str7x.c b/src/flash/str7x.c
index 84a246a..c594c96 100644
--- a/src/flash/str7x.c
+++ b/src/flash/str7x.c
@@ -315,7 +315,7 @@ static int str7x_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint32_
 	uint32_t buffer_size = 8192;
 	working_area_t *source;
 	uint32_t address = bank-&gt;base + offset;
-	reg_param_t reg_params[6];
+	struct reg_param reg_params[6];
 	armv4_5_algorithm_t armv4_5_info;
 	int retval = ERROR_OK;
 
diff --git a/src/flash/str9x.c b/src/flash/str9x.c
index 77f9ddf..c364908 100644
--- a/src/flash/str9x.c
+++ b/src/flash/str9x.c
@@ -353,7 +353,7 @@ static int str9x_write_block(struct flash_bank_s *bank,
 	uint32_t buffer_size = 8192;
 	working_area_t *source;
 	uint32_t address = bank-&gt;base + offset;
-	reg_param_t reg_params[4];
+	struct reg_param reg_params[4];
 	armv4_5_algorithm_t armv4_5_info;
 	int retval = ERROR_OK;
 
diff --git a/src/target/algorithm.c b/src/target/algorithm.c
index 6d213e0..7643e3c 100644
--- a/src/target/algorithm.c
+++ b/src/target/algorithm.c
@@ -39,7 +39,7 @@ void destroy_mem_param(struct mem_param *param)
 	param-&gt;value = NULL;
 }
 
-void init_reg_param(reg_param_t *param, char *reg_name, uint32_t size, enum param_direction direction)
+void init_reg_param(struct reg_param *param, char *reg_name, uint32_t size, enum param_direction direction)
 {
 	param-&gt;reg_name = reg_name;
 	param-&gt;size = size;
@@ -47,7 +47,7 @@ void init_reg_param(reg_param_t *param, char *reg_name, uint32_t size, enum para
 	param-&gt;direction = direction;
 }
 
-void destroy_reg_param(reg_param_t *param)
+void destroy_reg_param(struct reg_param *param)
 {
 	free(param-&gt;value);
 	param-&gt;value = NULL;
diff --git a/src/target/algorithm.h b/src/target/algorithm.h
index 963d1a5..80f081d 100644
--- a/src/target/algorithm.h
+++ b/src/target/algorithm.h
@@ -37,20 +37,20 @@ struct mem_param
 	enum param_direction direction;
 };
 
-typedef struct reg_param_s
+struct reg_param
 {
 	char *reg_name;
 	uint32_t size;
 	uint8_t *value;
 	enum param_direction direction;
-} reg_param_t;
+};
 
 void init_mem_param(struct mem_param *param,
 		uint32_t address, uint32_t size, enum param_direction dir);
 void destroy_mem_param(struct mem_param *param);
 
-void init_reg_param(reg_param_t *param,
+void init_reg_param(struct reg_param *param,
 		char *reg_name, uint32_t size, enum param_direction dir);
-void destroy_reg_param(reg_param_t *param);
+void destroy_reg_param(struct reg_param *param);
 
 #endif /* ALGORITHM_H */
diff --git a/src/target/arm11.c b/src/target/arm11.c
index d7fca7d..2787eca 100644
--- a/src/target/arm11.c
+++ b/src/target/arm11.c
@@ -1615,7 +1615,7 @@ static int arm11_remove_watchpoint(struct target_s *target,
 /* target algorithm support */
 static int arm11_run_algorithm(struct target_s *target,
 		int num_mem_params, struct mem_param *mem_params,
-		int num_reg_params, reg_param_t *reg_params,
+		int num_reg_params, struct reg_param *reg_params,
 		uint32_t entry_point, uint32_t exit_point,
 		int timeout_ms, void *arch_info)
 {
diff --git a/src/target/arm7_9_common.c b/src/target/arm7_9_common.c
index 66b13df..0289d3c 100644
--- a/src/target/arm7_9_common.c
+++ b/src/target/arm7_9_common.c
@@ -2654,7 +2654,7 @@ static const uint32_t dcc_code[] =
 	0xeafffff9	/*    b   w                   */
 };
 
-int armv4_5_run_algorithm_inner(struct target_s *target, int num_mem_params, struct mem_param *mem_params, int num_reg_params, reg_param_t *reg_params, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info, int (*run_it)(struct target_s *target, uint32_t exit_point, int timeout_ms, void *arch_info));
+int armv4_5_run_algorithm_inner(struct target_s *target, int num_mem_params, struct mem_param *mem_params, int num_reg_params, struct reg_param *reg_params, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info, int (*run_it)(struct target_s *target, uint32_t exit_point, int timeout_ms, void *arch_info));
 
 int arm7_9_bulk_write_memory(target_t *target, uint32_t address, uint32_t count, uint8_t *buffer)
 {
@@ -2691,7 +2691,7 @@ int arm7_9_bulk_write_memory(target_t *target, uint32_t address, uint32_t count,
 	}
 
 	armv4_5_algorithm_t armv4_5_info;
-	reg_param_t reg_params[1];
+	struct reg_param reg_params[1];
 
 	armv4_5_info.common_magic = ARMV4_5_COMMON_MAGIC;
 	armv4_5_info.core_mode = ARMV4_5_MODE_SVC;
@@ -2725,7 +2725,7 @@ int arm7_9_checksum_memory(struct target_s *target, uint32_t address, uint32_t c
 {
 	working_area_t *crc_algorithm;
 	armv4_5_algorithm_t armv4_5_info;
-	reg_param_t reg_params[2];
+	struct reg_param reg_params[2];
 	int retval;
 
 	static const uint32_t arm7_9_crc_code[] = {
@@ -2808,7 +2808,7 @@ int arm7_9_checksum_memory(struct target_s *target, uint32_t address, uint32_t c
 int arm7_9_blank_check_memory(struct target_s *target, uint32_t address, uint32_t count, uint32_t* blank)
 {
 	working_area_t *erase_check_algorithm;
-	reg_param_t reg_params[3];
+	struct reg_param reg_params[3];
 	armv4_5_algorithm_t armv4_5_info;
 	int retval;
 	uint32_t i;
diff --git a/src/target/arm7_9_common.h b/src/target/arm7_9_common.h
index 1a9e173..8a6dce4 100644
--- a/src/target/arm7_9_common.h
+++ b/src/target/arm7_9_common.h
@@ -141,7 +141,7 @@ int arm7_9_bulk_write_memory(target_t *target, uint32_t address, uint32_t count,
 int arm7_9_checksum_memory(struct target_s *target, uint32_t address, uint32_t count, uint32_t* checksum);
 int arm7_9_blank_check_memory(struct target_s *target, uint32_t address, uint32_t count, uint32_t* blank);
 
-int arm7_9_run_algorithm(struct target_s *target, int num_mem_params, struct mem_param *mem_params, int num_reg_prams, reg_param_t *reg_param, uint32_t entry_point, void *arch_info);
+int arm7_9_run_algorithm(struct target_s *target, int num_mem_params, struct mem_param *mem_params, int num_reg_prams, struct reg_param *reg_param, uint32_t entry_point, void *arch_info);
 
 int arm7_9_add_breakpoint(struct target_s *target, breakpoint_t *breakpoint);
 int arm7_9_remove_breakpoint(struct target_s *target, breakpoint_t *breakpoint);
diff --git a/src/target/armv4_5.c b/src/target/armv4_5.c
index 12509aa..0dd047d 100644
--- a/src/target/armv4_5.c
+++ b/src/target/armv4_5.c
@@ -543,7 +543,7 @@ static int armv4_5_run_algorithm_completion(struct target_s *target, uint32_t ex
 	return ERROR_OK;
 }
 
-int armv4_5_run_algorithm_inner(struct target_s *target, int num_mem_params, struct mem_param *mem_params, int num_reg_params, reg_param_t *reg_params, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info, int (*run_it)(struct target_s *target, uint32_t exit_point, int timeout_ms, void *arch_info))
+int armv4_5_run_algorithm_inner(struct target_s *target, int num_mem_params, struct mem_param *mem_params, int num_reg_params, struct reg_param *reg_params, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info, int (*run_it)(struct target_s *target, uint32_t exit_point, int timeout_ms, void *arch_info))
 {
 	struct armv4_5_common_s *armv4_5 = target_to_armv4_5(target);
 	armv4_5_algorithm_t *armv4_5_algorithm_info = arch_info;
@@ -708,7 +708,7 @@ int armv4_5_run_algorithm_inner(struct target_s *target, int num_mem_params, str
 	return retval;
 }
 
-int armv4_5_run_algorithm(struct target_s *target, int num_mem_params, struct mem_param *mem_params, int num_reg_params, reg_param_t *reg_params, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info)
+int armv4_5_run_algorithm(struct target_s *target, int num_mem_params, struct mem_param *mem_params, int num_reg_params, struct reg_param *reg_params, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info)
 {
 	return armv4_5_run_algorithm_inner(target, num_mem_params, mem_params, num_reg_params, reg_params, entry_point, exit_point, timeout_ms, arch_info, armv4_5_run_algorithm_completion);
 }
diff --git a/src/target/armv4_5.h b/src/target/armv4_5.h
index e908d54..c6686f1 100644
--- a/src/target/armv4_5.h
+++ b/src/target/armv4_5.h
@@ -184,7 +184,7 @@ int armv4_5_init_arch_info(target_t *target, armv4_5_common_t *armv4_5);
 
 int armv4_5_run_algorithm(struct target_s *target,
 		int num_mem_params, struct mem_param *mem_params,
-		int num_reg_params, reg_param_t *reg_params,
+		int num_reg_params, struct reg_param *reg_params,
 		uint32_t entry_point, uint32_t exit_point,
 		int timeout_ms, void *arch_info);
 
diff --git a/src/target/armv7m.c b/src/target/armv7m.c
index 36f828b..0e3c8a9 100644
--- a/src/target/armv7m.c
+++ b/src/target/armv7m.c
@@ -358,7 +358,7 @@ static int armv7m_run_and_wait(struct target_s *target, uint32_t entry_point, in
 /** Runs a Thumb algorithm in the target. */
 int armv7m_run_algorithm(struct target_s *target,
 	int num_mem_params, struct mem_param *mem_params,
-	int num_reg_params, reg_param_t *reg_params,
+	int num_reg_params, struct reg_param *reg_params,
 	uint32_t entry_point, uint32_t exit_point,
 	int timeout_ms, void *arch_info)
 {
@@ -590,7 +590,7 @@ int armv7m_checksum_memory(struct target_s *target,
 {
 	working_area_t *crc_algorithm;
 	armv7m_algorithm_t armv7m_info;
-	reg_param_t reg_params[2];
+	struct reg_param reg_params[2];
 	int retval;
 
 	static const uint16_t cortex_m3_crc_code[] = {
@@ -672,7 +672,7 @@ int armv7m_blank_check_memory(struct target_s *target,
 		uint32_t address, uint32_t count, uint32_t* blank)
 {
 	working_area_t *erase_check_algorithm;
-	reg_param_t reg_params[3];
+	struct reg_param reg_params[3];
 	armv7m_algorithm_t armv7m_info;
 	int retval;
 	uint32_t i;
diff --git a/src/target/armv7m.h b/src/target/armv7m.h
index 6b51c47..75ba3d9 100644
--- a/src/target/armv7m.h
+++ b/src/target/armv7m.h
@@ -147,7 +147,7 @@ int armv7m_init_arch_info(target_t *target, armv7m_common_t *armv7m);
 
 int armv7m_run_algorithm(struct target_s *target,
 		int num_mem_params, struct mem_param *mem_params,
-		int num_reg_params, reg_param_t *reg_params,
+		int num_reg_params, struct reg_param *reg_params,
 		uint32_t entry_point, uint32_t exit_point,
 		int timeout_ms, void *arch_info);
 
diff --git a/src/target/mips32.c b/src/target/mips32.c
index 18bea79..055d278 100644
--- a/src/target/mips32.c
+++ b/src/target/mips32.c
@@ -336,7 +336,7 @@ int mips32_register_commands(struct command_context_s *cmd_ctx)
 	return ERROR_OK;
 }
 
-int mips32_run_algorithm(struct target_s *target, int num_mem_params, struct mem_param *mem_params, int num_reg_params, reg_param_t *reg_params, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info)
+int mips32_run_algorithm(struct target_s *target, int num_mem_params, struct mem_param *mem_params, int num_reg_params, struct reg_param *reg_params, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info)
 {
 	/*TODO*/
 	return ERROR_OK;
diff --git a/src/target/mips32.h b/src/target/mips32.h
index 927c2f1..476b768 100644
--- a/src/target/mips32.h
+++ b/src/target/mips32.h
@@ -136,7 +136,7 @@ reg_cache_t *mips32_build_reg_cache(target_t *target);
 
 int mips32_run_algorithm(struct target_s *target,
 		int num_mem_params, struct mem_param *mem_params,
-		int num_reg_params, reg_param_t *reg_params,
+		int num_reg_params, struct reg_param *reg_params,
 		uint32_t entry_point, uint32_t exit_point,
 		int timeout_ms, void *arch_info);
 
diff --git a/src/target/target.c b/src/target/target.c
index 44fe6bc..f56fbc4 100644
--- a/src/target/target.c
+++ b/src/target/target.c
@@ -559,7 +559,7 @@ static int target_soft_reset_halt_imp(struct target_s *target)
 	return target-&gt;type-&gt;soft_reset_halt_imp(target);
 }
 
-static int target_run_algorithm_imp(struct target_s *target, int num_mem_params, struct mem_param *mem_params, int num_reg_params, reg_param_t *reg_param, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info)
+static int target_run_algorithm_imp(struct target_s *target, int num_mem_params, struct mem_param *mem_params, int num_reg_params, struct reg_param *reg_param, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info)
 {
 	if (!target_was_examined(target))
 	{
@@ -635,7 +635,7 @@ int target_step(struct target_s *target,
 
 int target_run_algorithm(struct target_s *target,
 		int num_mem_params, struct mem_param *mem_params,
-		int num_reg_params, reg_param_t *reg_param,
+		int num_reg_params, struct reg_param *reg_param,
 		uint32_t entry_point, uint32_t exit_point,
 		int timeout_ms, void *arch_info)
 {
diff --git a/src/target/target.h b/src/target/target.h
index 691a000..1e5639d 100644
--- a/src/target/target.h
+++ b/src/target/target.h
@@ -361,7 +361,7 @@ int target_step(struct target_s *target,
  */
 int target_run_algorithm(struct target_s *target,
 		int num_mem_params, struct mem_param *mem_params,
-		int num_reg_params, reg_param_t *reg_param,
+		int num_reg_params, struct reg_param *reg_param,
 		uint32_t entry_point, uint32_t exit_point,
 		int timeout_ms, void *arch_info);
 
diff --git a/src/target/target_type.h b/src/target/target_type.h
index f8c78e2..ee76ff4 100644
--- a/src/target/target_type.h
+++ b/src/target/target_type.h
@@ -144,12 +144,12 @@ struct target_type_s
 	int (*remove_watchpoint)(struct target_s *target, watchpoint_t *watchpoint);
 
 	/* target algorithm support */
-	int (*run_algorithm_imp)(struct target_s *target, int num_mem_params, struct mem_param *mem_params, int num_reg_params, reg_param_t *reg_param, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info);
+	int (*run_algorithm_imp)(struct target_s *target, int num_mem_params, struct mem_param *mem_params, int num_reg_params, struct reg_param *reg_param, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info);
 	/**
 	 * Target algorithm support.  Do @b not call this method directly,
 	 * use target_run_algorithm() instead.
 	 */
-	int (*run_algorithm)(struct target_s *target, int num_mem_params, struct mem_param *mem_params, int num_reg_params, reg_param_t *reg_param, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info);
+	int (*run_algorithm)(struct target_s *target, int num_mem_params, struct mem_param *mem_params, int num_reg_params, struct reg_param *reg_param, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info);
 
 	int (*register_commands)(struct command_context_s *cmd_ctx);
 

commit 6c965a3da9cd6f5b2cf1b177d38723356c83d923
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:39:30 2009 -0800

    mem_param_t -&gt; struct mem_param
    
    Remove misleading typedef and redundant suffix from struct mem_param.

diff --git a/src/flash/lpc2000.c b/src/flash/lpc2000.c
index 01b17f5..ab2b1c8 100644
--- a/src/flash/lpc2000.c
+++ b/src/flash/lpc2000.c
@@ -239,7 +239,7 @@ static int lpc2000_iap_call(flash_bank_t *bank, int code, uint32_t param_table[5
 	int retval;
 	struct lpc2000_flash_bank *lpc2000_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
-	mem_param_t mem_params[2];
+	struct mem_param mem_params[2];
 	reg_param_t reg_params[5];
 	armv4_5_algorithm_t armv4_5_info; /* for LPC2000 */
 	armv7m_algorithm_t armv7m_info;   /* for LPC1700 */
diff --git a/src/target/algorithm.c b/src/target/algorithm.c
index 5fcbfd3..6d213e0 100644
--- a/src/target/algorithm.c
+++ b/src/target/algorithm.c
@@ -25,7 +25,7 @@
 #include &quot;binarybuffer.h&quot;
 
 
-void init_mem_param(mem_param_t *param, uint32_t address, uint32_t size, enum param_direction direction)
+void init_mem_param(struct mem_param *param, uint32_t address, uint32_t size, enum param_direction direction)
 {
 	param-&gt;address = address;
 	param-&gt;size = size;
@@ -33,7 +33,7 @@ void init_mem_param(mem_param_t *param, uint32_t address, uint32_t size, enum pa
 	param-&gt;direction = direction;
 }
 
-void destroy_mem_param(mem_param_t *param)
+void destroy_mem_param(struct mem_param *param)
 {
 	free(param-&gt;value);
 	param-&gt;value = NULL;
diff --git a/src/target/algorithm.h b/src/target/algorithm.h
index 600580c..963d1a5 100644
--- a/src/target/algorithm.h
+++ b/src/target/algorithm.h
@@ -29,13 +29,13 @@ enum param_direction
 	PARAM_IN_OUT
 };
 
-typedef struct mem_param_s
+struct mem_param
 {
 	uint32_t address;
 	uint32_t size;
 	uint8_t *value;
 	enum param_direction direction;
-} mem_param_t;
+};
 
 typedef struct reg_param_s
 {
@@ -45,9 +45,9 @@ typedef struct reg_param_s
 	enum param_direction direction;
 } reg_param_t;
 
-void init_mem_param(mem_param_t *param,
+void init_mem_param(struct mem_param *param,
 		uint32_t address, uint32_t size, enum param_direction dir);
-void destroy_mem_param(mem_param_t *param);
+void destroy_mem_param(struct mem_param *param);
 
 void init_reg_param(reg_param_t *param,
 		char *reg_name, uint32_t size, enum param_direction dir);
diff --git a/src/target/arm11.c b/src/target/arm11.c
index 2318548..d7fca7d 100644
--- a/src/target/arm11.c
+++ b/src/target/arm11.c
@@ -1614,7 +1614,7 @@ static int arm11_remove_watchpoint(struct target_s *target,
 // HACKHACKHACK - FIXME mode/state
 /* target algorithm support */
 static int arm11_run_algorithm(struct target_s *target,
-		int num_mem_params, mem_param_t *mem_params,
+		int num_mem_params, struct mem_param *mem_params,
 		int num_reg_params, reg_param_t *reg_params,
 		uint32_t entry_point, uint32_t exit_point,
 		int timeout_ms, void *arch_info)
diff --git a/src/target/arm7_9_common.c b/src/target/arm7_9_common.c
index 96575d5..66b13df 100644
--- a/src/target/arm7_9_common.c
+++ b/src/target/arm7_9_common.c
@@ -2654,7 +2654,7 @@ static const uint32_t dcc_code[] =
 	0xeafffff9	/*    b   w                   */
 };
 
-int armv4_5_run_algorithm_inner(struct target_s *target, int num_mem_params, mem_param_t *mem_params, int num_reg_params, reg_param_t *reg_params, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info, int (*run_it)(struct target_s *target, uint32_t exit_point, int timeout_ms, void *arch_info));
+int armv4_5_run_algorithm_inner(struct target_s *target, int num_mem_params, struct mem_param *mem_params, int num_reg_params, reg_param_t *reg_params, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info, int (*run_it)(struct target_s *target, uint32_t exit_point, int timeout_ms, void *arch_info));
 
 int arm7_9_bulk_write_memory(target_t *target, uint32_t address, uint32_t count, uint8_t *buffer)
 {
diff --git a/src/target/arm7_9_common.h b/src/target/arm7_9_common.h
index a49dab2..1a9e173 100644
--- a/src/target/arm7_9_common.h
+++ b/src/target/arm7_9_common.h
@@ -141,7 +141,7 @@ int arm7_9_bulk_write_memory(target_t *target, uint32_t address, uint32_t count,
 int arm7_9_checksum_memory(struct target_s *target, uint32_t address, uint32_t count, uint32_t* checksum);
 int arm7_9_blank_check_memory(struct target_s *target, uint32_t address, uint32_t count, uint32_t* blank);
 
-int arm7_9_run_algorithm(struct target_s *target, int num_mem_params, mem_param_t *mem_params, int num_reg_prams, reg_param_t *reg_param, uint32_t entry_point, void *arch_info);
+int arm7_9_run_algorithm(struct target_s *target, int num_mem_params, struct mem_param *mem_params, int num_reg_prams, reg_param_t *reg_param, uint32_t entry_point, void *arch_info);
 
 int arm7_9_add_breakpoint(struct target_s *target, breakpoint_t *breakpoint);
 int arm7_9_remove_breakpoint(struct target_s *target, breakpoint_t *breakpoint);
diff --git a/src/target/armv4_5.c b/src/target/armv4_5.c
index c0a9c8a..12509aa 100644
--- a/src/target/armv4_5.c
+++ b/src/target/armv4_5.c
@@ -543,7 +543,7 @@ static int armv4_5_run_algorithm_completion(struct target_s *target, uint32_t ex
 	return ERROR_OK;
 }
 
-int armv4_5_run_algorithm_inner(struct target_s *target, int num_mem_params, mem_param_t *mem_params, int num_reg_params, reg_param_t *reg_params, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info, int (*run_it)(struct target_s *target, uint32_t exit_point, int timeout_ms, void *arch_info))
+int armv4_5_run_algorithm_inner(struct target_s *target, int num_mem_params, struct mem_param *mem_params, int num_reg_params, reg_param_t *reg_params, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info, int (*run_it)(struct target_s *target, uint32_t exit_point, int timeout_ms, void *arch_info))
 {
 	struct armv4_5_common_s *armv4_5 = target_to_armv4_5(target);
 	armv4_5_algorithm_t *armv4_5_algorithm_info = arch_info;
@@ -708,7 +708,7 @@ int armv4_5_run_algorithm_inner(struct target_s *target, int num_mem_params, mem
 	return retval;
 }
 
-int armv4_5_run_algorithm(struct target_s *target, int num_mem_params, mem_param_t *mem_params, int num_reg_params, reg_param_t *reg_params, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info)
+int armv4_5_run_algorithm(struct target_s *target, int num_mem_params, struct mem_param *mem_params, int num_reg_params, reg_param_t *reg_params, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info)
 {
 	return armv4_5_run_algorithm_inner(target, num_mem_params, mem_params, num_reg_params, reg_params, entry_point, exit_point, timeout_ms, arch_info, armv4_5_run_algorithm_completion);
 }
diff --git a/src/target/armv4_5.h b/src/target/armv4_5.h
index 1eaab12..e908d54 100644
--- a/src/target/armv4_5.h
+++ b/src/target/armv4_5.h
@@ -183,7 +183,7 @@ int armv4_5_register_commands(struct command_context_s *cmd_ctx);
 int armv4_5_init_arch_info(target_t *target, armv4_5_common_t *armv4_5);
 
 int armv4_5_run_algorithm(struct target_s *target,
-		int num_mem_params, mem_param_t *mem_params,
+		int num_mem_params, struct mem_param *mem_params,
 		int num_reg_params, reg_param_t *reg_params,
 		uint32_t entry_point, uint32_t exit_point,
 		int timeout_ms, void *arch_info);
diff --git a/src/target/armv7m.c b/src/target/armv7m.c
index 0f9d811..36f828b 100644
--- a/src/target/armv7m.c
+++ b/src/target/armv7m.c
@@ -357,7 +357,7 @@ static int armv7m_run_and_wait(struct target_s *target, uint32_t entry_point, in
 
 /** Runs a Thumb algorithm in the target. */
 int armv7m_run_algorithm(struct target_s *target,
-	int num_mem_params, mem_param_t *mem_params,
+	int num_mem_params, struct mem_param *mem_params,
 	int num_reg_params, reg_param_t *reg_params,
 	uint32_t entry_point, uint32_t exit_point,
 	int timeout_ms, void *arch_info)
diff --git a/src/target/armv7m.h b/src/target/armv7m.h
index 7601685..6b51c47 100644
--- a/src/target/armv7m.h
+++ b/src/target/armv7m.h
@@ -146,7 +146,7 @@ int armv7m_register_commands(struct command_context_s *cmd_ctx);
 int armv7m_init_arch_info(target_t *target, armv7m_common_t *armv7m);
 
 int armv7m_run_algorithm(struct target_s *target,
-		int num_mem_params, mem_param_t *mem_params,
+		int num_mem_params, struct mem_param *mem_params,
 		int num_reg_params, reg_param_t *reg_params,
 		uint32_t entry_point, uint32_t exit_point,
 		int timeout_ms, void *arch_info);
diff --git a/src/target/mips32.c b/src/target/mips32.c
index d1722c1..18bea79 100644
--- a/src/target/mips32.c
+++ b/src/target/mips32.c
@@ -336,7 +336,7 @@ int mips32_register_commands(struct command_context_s *cmd_ctx)
 	return ERROR_OK;
 }
 
-int mips32_run_algorithm(struct target_s *target, int num_mem_params, mem_param_t *mem_params, int num_reg_params, reg_param_t *reg_params, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info)
+int mips32_run_algorithm(struct target_s *target, int num_mem_params, struct mem_param *mem_params, int num_reg_params, reg_param_t *reg_params, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info)
 {
 	/*TODO*/
 	return ERROR_OK;
diff --git a/src/target/mips32.h b/src/target/mips32.h
index 64328e3..927c2f1 100644
--- a/src/target/mips32.h
+++ b/src/target/mips32.h
@@ -135,7 +135,7 @@ int mips32_save_context(target_t *target);
 reg_cache_t *mips32_build_reg_cache(target_t *target);
 
 int mips32_run_algorithm(struct target_s *target,
-		int num_mem_params, mem_param_t *mem_params,
+		int num_mem_params, struct mem_param *mem_params,
 		int num_reg_params, reg_param_t *reg_params,
 		uint32_t entry_point, uint32_t exit_point,
 		int timeout_ms, void *arch_info);
diff --git a/src/target/target.c b/src/target/target.c
index 2528a64..44fe6bc 100644
--- a/src/target/target.c
+++ b/src/target/target.c
@@ -559,7 +559,7 @@ static int target_soft_reset_halt_imp(struct target_s *target)
 	return target-&gt;type-&gt;soft_reset_halt_imp(target);
 }
 
-static int target_run_algorithm_imp(struct target_s *target, int num_mem_params, mem_param_t *mem_params, int num_reg_params, reg_param_t *reg_param, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info)
+static int target_run_algorithm_imp(struct target_s *target, int num_mem_params, struct mem_param *mem_params, int num_reg_params, reg_param_t *reg_param, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info)
 {
 	if (!target_was_examined(target))
 	{
@@ -634,7 +634,7 @@ int target_step(struct target_s *target,
 
 
 int target_run_algorithm(struct target_s *target,
-		int num_mem_params, mem_param_t *mem_params,
+		int num_mem_params, struct mem_param *mem_params,
 		int num_reg_params, reg_param_t *reg_param,
 		uint32_t entry_point, uint32_t exit_point,
 		int timeout_ms, void *arch_info)
diff --git a/src/target/target.h b/src/target/target.h
index f5b6eb2..691a000 100644
--- a/src/target/target.h
+++ b/src/target/target.h
@@ -360,7 +360,7 @@ int target_step(struct target_s *target,
  * This routine is a wrapper for target-&gt;type-&gt;run_algorithm.
  */
 int target_run_algorithm(struct target_s *target,
-		int num_mem_params, mem_param_t *mem_params,
+		int num_mem_params, struct mem_param *mem_params,
 		int num_reg_params, reg_param_t *reg_param,
 		uint32_t entry_point, uint32_t exit_point,
 		int timeout_ms, void *arch_info);
diff --git a/src/target/target_type.h b/src/target/target_type.h
index dd469db..f8c78e2 100644
--- a/src/target/target_type.h
+++ b/src/target/target_type.h
@@ -144,12 +144,12 @@ struct target_type_s
 	int (*remove_watchpoint)(struct target_s *target, watchpoint_t *watchpoint);
 
 	/* target algorithm support */
-	int (*run_algorithm_imp)(struct target_s *target, int num_mem_params, mem_param_t *mem_params, int num_reg_params, reg_param_t *reg_param, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info);
+	int (*run_algorithm_imp)(struct target_s *target, int num_mem_params, struct mem_param *mem_params, int num_reg_params, reg_param_t *reg_param, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info);
 	/**
 	 * Target algorithm support.  Do @b not call this method directly,
 	 * use target_run_algorithm() instead.
 	 */
-	int (*run_algorithm)(struct target_s *target, int num_mem_params, mem_param_t *mem_params, int num_reg_params, reg_param_t *reg_param, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info);
+	int (*run_algorithm)(struct target_s *target, int num_mem_params, struct mem_param *mem_params, int num_reg_params, reg_param_t *reg_param, uint32_t entry_point, uint32_t exit_point, int timeout_ms, void *arch_info);
 
 	int (*register_commands)(struct command_context_s *cmd_ctx);
 

commit 996613522df32870b23e68d8d63e523908694598
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:36:02 2009 -0800

    arm920t_common_t -&gt; struct arm920t_common
    
    Remove misleading typedef and redundant suffix from struct arm920t_common.

diff --git a/src/target/arm920t.c b/src/target/arm920t.c
index ca7728b..4fa4130 100644
--- a/src/target/arm920t.c
+++ b/src/target/arm920t.c
@@ -54,7 +54,7 @@
 static int arm920t_read_cp15_physical(target_t *target,
 		int reg_addr, uint32_t *value)
 {
-	struct arm920t_common_s *arm920t = target_to_arm920(target);
+	struct arm920t_common *arm920t = target_to_arm920(target);
 	arm_jtag_t *jtag_info;
 	struct scan_field fields[4];
 	uint8_t access_type_buf = 1;
@@ -106,7 +106,7 @@ static int arm920t_read_cp15_physical(target_t *target,
 static int arm920t_write_cp15_physical(target_t *target,
 		int reg_addr, uint32_t value)
 {
-	struct arm920t_common_s *arm920t = target_to_arm920(target);
+	struct arm920t_common *arm920t = target_to_arm920(target);
 	arm_jtag_t *jtag_info;
 	struct scan_field fields[4];
 	uint8_t access_type_buf = 1;
@@ -155,7 +155,7 @@ static int arm920t_execute_cp15(target_t *target, uint32_t cp15_opcode,
 		uint32_t arm_opcode)
 {
 	int retval;
-	struct arm920t_common_s *arm920t = target_to_arm920(target);
+	struct arm920t_common *arm920t = target_to_arm920(target);
 	arm_jtag_t *jtag_info;
 	struct scan_field fields[4];
 	uint8_t access_type_buf = 0;		/* interpreted access */
@@ -350,7 +350,7 @@ void arm920t_enable_mmu_caches(target_t *target, int mmu, int d_u_cache, int i_c
 void arm920t_post_debug_entry(target_t *target)
 {
 	uint32_t cp15c15;
-	struct arm920t_common_s *arm920t = target_to_arm920(target);
+	struct arm920t_common *arm920t = target_to_arm920(target);
 
 	/* examine cp15 control reg */
 	arm920t_read_cp15_physical(target, 0x2, &amp;arm920t-&gt;cp15_control_reg);
@@ -394,7 +394,7 @@ void arm920t_post_debug_entry(target_t *target)
 void arm920t_pre_restore_context(target_t *target)
 {
 	uint32_t cp15c15;
-	struct arm920t_common_s *arm920t = target_to_arm920(target);
+	struct arm920t_common *arm920t = target_to_arm920(target);
 
 	/* restore i/d fault status and address register */
 	arm920t_write_cp15_interpreted(target, 0xee050f10, arm920t-&gt;d_fsr, 0x0);
@@ -416,7 +416,7 @@ void arm920t_pre_restore_context(target_t *target)
 static const char arm920_not[] = &quot;target is not an ARM920&quot;;
 
 static int arm920t_verify_pointer(struct command_context_s *cmd_ctx,
-		struct arm920t_common_s *arm920t)
+		struct arm920t_common *arm920t)
 {
 	if (arm920t-&gt;common_magic != ARM920T_COMMON_MAGIC) {
 		command_print(cmd_ctx, arm920_not);
@@ -434,7 +434,7 @@ int arm920t_arch_state(struct target_s *target)
 		&quot;disabled&quot;, &quot;enabled&quot;
 	};
 
-	struct arm920t_common_s *arm920t = target_to_arm920(target);
+	struct arm920t_common *arm920t = target_to_arm920(target);
 	struct armv4_5_common_s *armv4_5;
 
 	if (arm920t-&gt;common_magic != ARM920T_COMMON_MAGIC)
@@ -494,7 +494,7 @@ static int arm920t_read_phys_memory(struct target_s *target,
 		uint32_t address, uint32_t size,
 		uint32_t count, uint8_t *buffer)
 {
-	struct arm920t_common_s *arm920t = target_to_arm920(target);
+	struct arm920t_common *arm920t = target_to_arm920(target);
 
 	return armv4_5_mmu_read_physical(target, &amp;arm920t-&gt;armv4_5_mmu,
 			address, size, count, buffer);
@@ -504,7 +504,7 @@ static int arm920t_write_phys_memory(struct target_s *target,
 		uint32_t address, uint32_t size,
 		uint32_t count, uint8_t *buffer)
 {
-	struct arm920t_common_s *arm920t = target_to_arm920(target);
+	struct arm920t_common *arm920t = target_to_arm920(target);
 
 	return armv4_5_mmu_write_physical(target, &amp;arm920t-&gt;armv4_5_mmu,
 			address, size, count, buffer);
@@ -525,7 +525,7 @@ int arm920t_write_memory(struct target_s *target, uint32_t address, uint32_t siz
 	 */
 	if (((size == 4) || (size == 2)) &amp;&amp; (count == 1))
 	{
-		struct arm920t_common_s *arm920t = target_to_arm920(target);
+		struct arm920t_common *arm920t = target_to_arm920(target);
 
 		if (arm920t-&gt;armv4_5_mmu.armv4_5_cache.d_u_cache_enabled)
 		{
@@ -552,7 +552,7 @@ int arm920t_write_memory(struct target_s *target, uint32_t address, uint32_t siz
 int arm920t_soft_reset_halt(struct target_s *target)
 {
 	int retval = ERROR_OK;
-	struct arm920t_common_s *arm920t = target_to_arm920(target);
+	struct arm920t_common *arm920t = target_to_arm920(target);
 	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
 	reg_t *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
@@ -620,7 +620,7 @@ int arm920t_soft_reset_halt(struct target_s *target)
 	return ERROR_OK;
 }
 
-int arm920t_init_arch_info(target_t *target, arm920t_common_t *arm920t, struct jtag_tap *tap)
+int arm920t_init_arch_info(target_t *target, struct arm920t_common *arm920t, struct jtag_tap *tap)
 {
 	arm9tdmi_common_t *arm9tdmi = &amp;arm920t-&gt;arm9tdmi_common;
 	arm7_9_common_t *arm7_9 = &amp;arm9tdmi-&gt;arm7_9_common;
@@ -657,7 +657,7 @@ int arm920t_init_arch_info(target_t *target, arm920t_common_t *arm920t, struct j
 
 static int arm920t_target_create(struct target_s *target, Jim_Interp *interp)
 {
-	arm920t_common_t *arm920t = calloc(1,sizeof(arm920t_common_t));
+	struct arm920t_common *arm920t = calloc(1,sizeof(struct arm920t_common));
 
 	return arm920t_init_arch_info(target, arm920t, target-&gt;tap);
 }
@@ -666,7 +666,7 @@ COMMAND_HANDLER(arm920t_handle_read_cache_command)
 {
 	int retval = ERROR_OK;
 	target_t *target = get_current_target(cmd_ctx);
-	struct arm920t_common_s *arm920t = target_to_arm920(target);
+	struct arm920t_common *arm920t = target_to_arm920(target);
 	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
 	uint32_t cp15c15;
@@ -912,7 +912,7 @@ COMMAND_HANDLER(arm920t_handle_read_mmu_command)
 {
 	int retval = ERROR_OK;
 	target_t *target = get_current_target(cmd_ctx);
-	struct arm920t_common_s *arm920t = target_to_arm920(target);
+	struct arm920t_common *arm920t = target_to_arm920(target);
 	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
 	struct armv4_5_common_s *armv4_5 = &amp;arm7_9-&gt;armv4_5_common;
 	uint32_t cp15c15;
@@ -1195,7 +1195,7 @@ COMMAND_HANDLER(arm920t_handle_cp15_command)
 {
 	int retval;
 	target_t *target = get_current_target(cmd_ctx);
-	struct arm920t_common_s *arm920t = target_to_arm920(target);
+	struct arm920t_common *arm920t = target_to_arm920(target);
 
 	retval = arm920t_verify_pointer(cmd_ctx, arm920t);
 	if (retval != ERROR_OK)
@@ -1248,7 +1248,7 @@ COMMAND_HANDLER(arm920t_handle_cp15i_command)
 {
 	int retval;
 	target_t *target = get_current_target(cmd_ctx);
-	struct arm920t_common_s *arm920t = target_to_arm920(target);
+	struct arm920t_common *arm920t = target_to_arm920(target);
 
 	retval = arm920t_verify_pointer(cmd_ctx, arm920t);
 	if (retval != ERROR_OK)
@@ -1315,7 +1315,7 @@ COMMAND_HANDLER(arm920t_handle_cache_info_command)
 {
 	int retval;
 	target_t *target = get_current_target(cmd_ctx);
-	struct arm920t_common_s *arm920t = target_to_arm920(target);
+	struct arm920t_common *arm920t = target_to_arm920(target);
 
 	retval = arm920t_verify_pointer(cmd_ctx, arm920t);
 	if (retval != ERROR_OK)
diff --git a/src/target/arm920t.h b/src/target/arm920t.h
index af0f982..38dafcf 100644
--- a/src/target/arm920t.h
+++ b/src/target/arm920t.h
@@ -25,7 +25,7 @@
 
 #define	ARM920T_COMMON_MAGIC 0xa920a920
 
-typedef struct arm920t_common_s
+struct arm920t_common
 {
 	arm9tdmi_common_t arm9tdmi_common;
 	uint32_t common_magic;
@@ -36,12 +36,12 @@ typedef struct arm920t_common_s
 	uint32_t d_far;
 	uint32_t i_far;
 	int preserve_cache;
-} arm920t_common_t;
+};
 
-static inline struct arm920t_common_s *
+static inline struct arm920t_common *
 target_to_arm920(struct target_s *target)
 {
-	return container_of(target-&gt;arch_info, struct arm920t_common_s,
+	return container_of(target-&gt;arch_info, struct arm920t_common,
 			arm9tdmi_common.arm7_9_common.armv4_5_common);
 }
 
diff --git a/src/target/fa526.c b/src/target/fa526.c
index 4592934..98e969a 100644
--- a/src/target/fa526.c
+++ b/src/target/fa526.c
@@ -315,7 +315,7 @@ static int fa526_init_arch_info_2(target_t *target,
 }
 
 static int fa526_init_arch_info(target_t *target,
-		arm920t_common_t *arm920t, struct jtag_tap *tap)
+		struct arm920t_common *arm920t, struct jtag_tap *tap)
 {
 	arm9tdmi_common_t *arm9tdmi = &amp;arm920t-&gt;arm9tdmi_common;
 	arm7_9_common_t *arm7_9 = &amp;arm9tdmi-&gt;arm7_9_common;
@@ -352,7 +352,7 @@ static int fa526_init_arch_info(target_t *target,
 
 static int fa526_target_create(struct target_s *target, Jim_Interp *interp)
 {
-	arm920t_common_t *arm920t = calloc(1,sizeof(arm920t_common_t));
+	struct arm920t_common *arm920t = calloc(1,sizeof(struct arm920t_common));
 
 	return fa526_init_arch_info(target, arm920t, target-&gt;tap);
 }

commit 52bc6cad87c2ae0558ec5b3539fecad15b75b008
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:35:54 2009 -0800

    arm11_register_history_t -&gt; struct arm11_register_history
    
    Remove misleading typedef and redundant suffix from struct arm11_register_history.

diff --git a/src/target/arm11.h b/src/target/arm11.h
index 100fc26..4bbc456 100644
--- a/src/target/arm11.h
+++ b/src/target/arm11.h
@@ -64,11 +64,11 @@ do {														\
 } while (0)
 
 
-typedef struct arm11_register_history_s
+struct arm11_register_history
 {
 	uint32_t		value;
 	uint8_t		valid;
-}arm11_register_history_t;
+};
 
 enum arm11_debug_version
 {
@@ -109,7 +109,7 @@ typedef struct arm11_common_s
 
 	/*@}*/
 
-	arm11_register_history_t
+	struct arm11_register_history
 		reg_history[ARM11_REGCACHE_COUNT];	/**&lt; register state before last resume */
 
 	size_t	free_brps;				/**&lt; keep track of breakpoints allocated by arm11_add_breakpoint() */

commit ea49f2e3ff55268faeff6e1603d86025873320ed
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:20:24 2009 -0800

    remove typedef keyword from svf structures
    
    Removes all misleading typedef keywords from structures in svf.c.

diff --git a/src/svf/svf.c b/src/svf/svf.c
index 348145d..7e689fa 100644
--- a/src/svf/svf.c
+++ b/src/svf/svf.c
@@ -89,13 +89,13 @@ static const char *svf_trst_mode_name[4] =
 	&quot;ABSENT&quot;
 };
 
-typedef struct
+struct svf_statemove
 {
 	tap_state_t from;
 	tap_state_t to;
 	uint32_t num_of_moves;
 	tap_state_t paths[8];
-}svf_statemove_t;
+};
 
 /*
  * These paths are from the SVF specification for the STATE command, to be
@@ -112,7 +112,7 @@ typedef struct
  * and many SVF implementations, we don't want to risk missing that state.
  * To get to RESET, always we ignore the current state.
  */
-static const svf_statemove_t svf_statemoves[] =
+static const struct svf_statemove svf_statemoves[] =
 {
 	// from			to				num_of_moves,	paths[8]
 //	{TAP_RESET,		TAP_RESET,		1,				{TAP_RESET}},
@@ -141,7 +141,7 @@ static const svf_statemove_t svf_statemoves[] =
 #define XXR_TDO						(1 &lt;&lt; 1)
 #define XXR_MASK					(1 &lt;&lt; 2)
 #define XXR_SMASK					(1 &lt;&lt; 3)
-typedef struct
+struct svf_xxr_para
 {
 	int len;
 	int data_mask;
@@ -149,9 +149,9 @@ typedef struct
 	uint8_t *tdo;
 	uint8_t *mask;
 	uint8_t *smask;
-}svf_xxr_para_t;
+};
 
-typedef struct
+struct svf_para
 {
 	float frequency;
 	tap_state_t ir_end_state;
@@ -160,16 +160,16 @@ typedef struct
 	tap_state_t runtest_end_state;
 	trst_mode_t trst_mode;
 
-	svf_xxr_para_t hir_para;
-	svf_xxr_para_t hdr_para;
-	svf_xxr_para_t tir_para;
-	svf_xxr_para_t tdr_para;
-	svf_xxr_para_t sir_para;
-	svf_xxr_para_t sdr_para;
-}svf_para_t;
+	struct svf_xxr_para hir_para;
+	struct svf_xxr_para hdr_para;
+	struct svf_xxr_para tir_para;
+	struct svf_xxr_para tdr_para;
+	struct svf_xxr_para sir_para;
+	struct svf_xxr_para sdr_para;
+};
 
-static svf_para_t svf_para;
-static const svf_para_t svf_para_init =
+static struct svf_para svf_para;
+static const struct svf_para svf_para_init =
 {
 //	frequency,	ir_end_state,	dr_end_state,	runtest_run_state,	runtest_end_state,	trst_mode
 	0,			TAP_IDLE,		TAP_IDLE,		TAP_IDLE,			TAP_IDLE,			TRST_Z,
@@ -193,17 +193,17 @@ static const svf_para_t svf_para_init =
 	{0,		0,			NULL,	NULL,	NULL,	NULL},
 };
 
-typedef struct
+struct svf_check_tdo_para
 {
 	int line_num;		// used to record line number of the check operation
 						// so more information could be printed
 	int enabled;		// check is enabled or not
 	int buffer_offset;	// buffer_offset to buffers
 	int bit_len;		// bit length to check
-}svf_check_tdo_para_t;
+};
 
 #define SVF_CHECK_TDO_PARA_SIZE	1024
-static svf_check_tdo_para_t *svf_check_tdo_para = NULL;
+static struct svf_check_tdo_para *svf_check_tdo_para = NULL;
 static int svf_check_tdo_para_index = 0;
 
 static int svf_read_command_from_file(int fd);
@@ -224,7 +224,7 @@ static int svf_buffer_index = 0, svf_buffer_size = 0;
 static int svf_quiet = 0;
 
 
-static void svf_free_xxd_para(svf_xxr_para_t *para)
+static void svf_free_xxd_para(struct svf_xxr_para *para)
 {
 	if (NULL != para)
 	{
@@ -349,7 +349,7 @@ COMMAND_HANDLER(handle_svf_command)
 	svf_command_buffer_size = 0;
 
 	svf_check_tdo_para_index = 0;
-	svf_check_tdo_para = malloc(sizeof(svf_check_tdo_para_t) * SVF_CHECK_TDO_PARA_SIZE);
+	svf_check_tdo_para = malloc(sizeof(struct svf_check_tdo_para) * SVF_CHECK_TDO_PARA_SIZE);
 	if (NULL == svf_check_tdo_para)
 	{
 		LOG_ERROR(&quot;not enough memory&quot;);
@@ -762,7 +762,7 @@ static int svf_run_command(struct command_context_s *cmd_ctx, char *cmd_str)
 	int run_count;
 	float min_time, max_time;
 	// for XXR
-	svf_xxr_para_t *xxr_para_tmp;
+	struct svf_xxr_para *xxr_para_tmp;
 	uint8_t **pbuffer_tmp;
 	struct scan_field field;
 	// for STATE

commit 95bf461c0af385fc6b3abfff610e5510534ef571
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:15:00 2009 -0800

    pld_device_t -&gt; struct pld_device
    
    Remove misleading typedef and redundant suffix from struct pld_device.

diff --git a/src/pld/pld.c b/src/pld/pld.c
index 119d75d..e0a7eac 100644
--- a/src/pld/pld.c
+++ b/src/pld/pld.c
@@ -36,12 +36,12 @@ static struct pld_driver *pld_drivers[] =
 	NULL,
 };
 
-static pld_device_t *pld_devices;
+static struct pld_device *pld_devices;
 static command_t *pld_cmd;
 
-pld_device_t *get_pld_device_by_num(int num)
+struct pld_device *get_pld_device_by_num(int num)
 {
-	pld_device_t *p;
+	struct pld_device *p;
 	int i = 0;
 
 	for (p = pld_devices; p; p = p-&gt;next)
@@ -72,7 +72,7 @@ COMMAND_HANDLER(handle_pld_device_command)
 	{
 		if (strcmp(args[0], pld_drivers[i]-&gt;name) == 0)
 		{
-			pld_device_t *p, *c;
+			struct pld_device *p, *c;
 
 			/* register pld specific commands */
 			if (pld_drivers[i]-&gt;register_commands(cmd_ctx) != ERROR_OK)
@@ -81,7 +81,7 @@ COMMAND_HANDLER(handle_pld_device_command)
 				exit(-1);
 			}
 
-			c = malloc(sizeof(pld_device_t));
+			c = malloc(sizeof(struct pld_device));
 			c-&gt;driver = pld_drivers[i];
 			c-&gt;next = NULL;
 
@@ -122,7 +122,7 @@ COMMAND_HANDLER(handle_pld_device_command)
 
 COMMAND_HANDLER(handle_pld_devices_command)
 {
-	pld_device_t *p;
+	struct pld_device *p;
 	int i = 0;
 
 	if (!pld_devices)
@@ -143,7 +143,7 @@ COMMAND_HANDLER(handle_pld_load_command)
 {
 	int retval;
 	struct timeval start, end, duration;
-	pld_device_t *p;
+	struct pld_device *p;
 
 	gettimeofday(&amp;start, NULL);
 
diff --git a/src/pld/pld.h b/src/pld/pld.h
index 2b88d9d..4c4c64a 100644
--- a/src/pld/pld.h
+++ b/src/pld/pld.h
@@ -22,33 +22,33 @@
 
 #include &quot;command.h&quot;
 
-struct pld_device_s;
+struct pld_device;
 
 #define __PLD_DEVICE_COMMAND(name) \
-		COMMAND_HELPER(name, struct pld_device_s *pld)
+		COMMAND_HELPER(name, struct pld_device *pld)
 
 struct pld_driver
 {
 	char *name;
 	__PLD_DEVICE_COMMAND((*pld_device_command));
 	int (*register_commands)(struct command_context_s *cmd_ctx);
-	int (*load)(struct pld_device_s *pld_device, const char *filename);
+	int (*load)(struct pld_device *pld_device, const char *filename);
 };
 
 #define PLD_DEVICE_COMMAND_HANDLER(name) static __PLD_DEVICE_COMMAND(name)
 
-typedef struct pld_device_s
+struct pld_device
 {
 	struct pld_driver *driver;
 	void *driver_priv;
-	struct pld_device_s *next;
-} pld_device_t;
+	struct pld_device *next;
+};
 
 int pld_register_commands(struct command_context_s *cmd_ctx);
 
 int pld_init(struct command_context_s *cmd_ctx);
 
-pld_device_t *get_pld_device_by_num(int num);
+struct pld_device *get_pld_device_by_num(int num);
 
 #define ERROR_PLD_DEVICE_INVALID	(-1000)
 #define ERROR_PLD_FILE_LOAD_FAILED	(-1001)
diff --git a/src/pld/virtex2.c b/src/pld/virtex2.c
index 2e5a841..e2ebb04 100644
--- a/src/pld/virtex2.c
+++ b/src/pld/virtex2.c
@@ -49,7 +49,7 @@ static int virtex2_set_instr(struct jtag_tap *tap, uint32_t new_instr)
 	return ERROR_OK;
 }
 
-static int virtex2_send_32(struct pld_device_s *pld_device,
+static int virtex2_send_32(struct pld_device *pld_device,
 		int num_words, uint32_t *words)
 {
 	struct virtex2_pld_device *virtex2_info = pld_device-&gt;driver_priv;
@@ -82,7 +82,7 @@ static __inline__ void virtexflip32(jtag_callback_data_t arg)
 	*((uint32_t *)in) = flip_u32(le_to_h_u32(in), 32);
 }
 
-static int virtex2_receive_32(struct pld_device_s *pld_device,
+static int virtex2_receive_32(struct pld_device *pld_device,
 		int num_words, uint32_t *words)
 {
 	struct virtex2_pld_device *virtex2_info = pld_device-&gt;driver_priv;
@@ -109,7 +109,7 @@ static int virtex2_receive_32(struct pld_device_s *pld_device,
 	return ERROR_OK;
 }
 
-static int virtex2_read_stat(struct pld_device_s *pld_device, uint32_t *status)
+static int virtex2_read_stat(struct pld_device *pld_device, uint32_t *status)
 {
 	uint32_t data[5];
 
@@ -131,7 +131,7 @@ static int virtex2_read_stat(struct pld_device_s *pld_device, uint32_t *status)
 	return ERROR_OK;
 }
 
-static int virtex2_load(struct pld_device_s *pld_device, const char *filename)
+static int virtex2_load(struct pld_device *pld_device, const char *filename)
 {
 	struct virtex2_pld_device *virtex2_info = pld_device-&gt;driver_priv;
 	struct xilinx_bit_file bit_file;
@@ -179,7 +179,7 @@ static int virtex2_load(struct pld_device_s *pld_device, const char *filename)
 
 COMMAND_HANDLER(virtex2_handle_read_stat_command)
 {
-	pld_device_t *device;
+	struct pld_device *device;
 	struct virtex2_pld_device *virtex2_info;
 	uint32_t status;
 

commit db08ab8a792a09399d2ffe362f580683ff102707
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:14:57 2009 -0800

    virtex2_pld_device_t -&gt; struct virtex2_pld_device
    
    Remove misleading typedef and redundant suffix from struct virtex2_pld_device.

diff --git a/src/pld/virtex2.c b/src/pld/virtex2.c
index 7a44065..2e5a841 100644
--- a/src/pld/virtex2.c
+++ b/src/pld/virtex2.c
@@ -52,7 +52,7 @@ static int virtex2_set_instr(struct jtag_tap *tap, uint32_t new_instr)
 static int virtex2_send_32(struct pld_device_s *pld_device,
 		int num_words, uint32_t *words)
 {
-	virtex2_pld_device_t *virtex2_info = pld_device-&gt;driver_priv;
+	struct virtex2_pld_device *virtex2_info = pld_device-&gt;driver_priv;
 	struct scan_field scan_field;
 	uint8_t *values;
 	int i;
@@ -85,7 +85,7 @@ static __inline__ void virtexflip32(jtag_callback_data_t arg)
 static int virtex2_receive_32(struct pld_device_s *pld_device,
 		int num_words, uint32_t *words)
 {
-	virtex2_pld_device_t *virtex2_info = pld_device-&gt;driver_priv;
+	struct virtex2_pld_device *virtex2_info = pld_device-&gt;driver_priv;
 	struct scan_field scan_field;
 
 	scan_field.tap = virtex2_info-&gt;tap;
@@ -133,7 +133,7 @@ static int virtex2_read_stat(struct pld_device_s *pld_device, uint32_t *status)
 
 static int virtex2_load(struct pld_device_s *pld_device, const char *filename)
 {
-	virtex2_pld_device_t *virtex2_info = pld_device-&gt;driver_priv;
+	struct virtex2_pld_device *virtex2_info = pld_device-&gt;driver_priv;
 	struct xilinx_bit_file bit_file;
 	int retval;
 	unsigned int i;
@@ -180,7 +180,7 @@ static int virtex2_load(struct pld_device_s *pld_device, const char *filename)
 COMMAND_HANDLER(virtex2_handle_read_stat_command)
 {
 	pld_device_t *device;
-	virtex2_pld_device_t *virtex2_info;
+	struct virtex2_pld_device *virtex2_info;
 	uint32_t status;
 
 	if (argc &lt; 1)
@@ -211,7 +211,7 @@ PLD_DEVICE_COMMAND_HANDLER(virtex2_pld_device_command)
 {
 	struct jtag_tap *tap;
 
-	virtex2_pld_device_t *virtex2_info;
+	struct virtex2_pld_device *virtex2_info;
 
 	if (argc &lt; 2)
 	{
@@ -225,7 +225,7 @@ PLD_DEVICE_COMMAND_HANDLER(virtex2_pld_device_command)
 		return ERROR_OK;
 	}
 
-	virtex2_info = malloc(sizeof(virtex2_pld_device_t));
+	virtex2_info = malloc(sizeof(struct virtex2_pld_device));
 	virtex2_info-&gt;tap = tap;
 
 	pld-&gt;driver_priv = virtex2_info;
diff --git a/src/pld/virtex2.h b/src/pld/virtex2.h
index 2714dd7..8e07604 100644
--- a/src/pld/virtex2.h
+++ b/src/pld/virtex2.h
@@ -22,9 +22,9 @@
 
 #include &quot;jtag.h&quot;
 
-typedef struct virtex2_pld_device_s
+struct virtex2_pld_device
 {
   struct jtag_tap *tap;
-} virtex2_pld_device_t;
+};
 
 #endif /* VIRTEX2_H */

commit cd4c0598060dc6539604c9cad8cb645aa14b4ab1
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:14:54 2009 -0800

    xilinx_bit_file_t -&gt; struct xilinx_bit_file
    
    Remove misleading typedef and redundant suffix from struct xilinx_bit_file.

diff --git a/src/pld/virtex2.c b/src/pld/virtex2.c
index 4c1fc53..7a44065 100644
--- a/src/pld/virtex2.c
+++ b/src/pld/virtex2.c
@@ -134,7 +134,7 @@ static int virtex2_read_stat(struct pld_device_s *pld_device, uint32_t *status)
 static int virtex2_load(struct pld_device_s *pld_device, const char *filename)
 {
 	virtex2_pld_device_t *virtex2_info = pld_device-&gt;driver_priv;
-	xilinx_bit_file_t bit_file;
+	struct xilinx_bit_file bit_file;
 	int retval;
 	unsigned int i;
 	struct scan_field field;
diff --git a/src/pld/xilinx_bit.c b/src/pld/xilinx_bit.c
index 33c3ed7..70edbf5 100644
--- a/src/pld/xilinx_bit.c
+++ b/src/pld/xilinx_bit.c
@@ -75,7 +75,7 @@ static int read_section(FILE *input_file, int length_size, char section,
 	return ERROR_OK;
 }
 
-int xilinx_read_bit_file(xilinx_bit_file_t *bit_file, const char *filename)
+int xilinx_read_bit_file(struct xilinx_bit_file *bit_file, const char *filename)
 {
 	FILE *input_file;
 	struct stat input_stat;
diff --git a/src/pld/xilinx_bit.h b/src/pld/xilinx_bit.h
index 3eb331b..722d225 100644
--- a/src/pld/xilinx_bit.h
+++ b/src/pld/xilinx_bit.h
@@ -22,7 +22,7 @@
 
 #include &quot;types.h&quot;
 
-typedef struct xilinx_bit_file_s
+struct xilinx_bit_file
 {
 	uint8_t unknown_header[13];
 	uint8_t *source_file;
@@ -31,8 +31,8 @@ typedef struct xilinx_bit_file_s
 	uint8_t *time;
 	uint32_t length;
 	uint8_t *data;
-} xilinx_bit_file_t;
+};
 
-int xilinx_read_bit_file(xilinx_bit_file_t *bit_file, const char *filename);
+int xilinx_read_bit_file(struct xilinx_bit_file *bit_file, const char *filename);
 
 #endif /* XILINX_BIT_H */

commit db2086897a581111bb86a0fb49d72b776a9801a9
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:14:52 2009 -0800

    pld_driver_t -&gt; struct pld_driver
    
    Remove misleading typedef and redundant suffix from struct pld_driver.

diff --git a/src/pld/pld.c b/src/pld/pld.c
index e8cd075..119d75d 100644
--- a/src/pld/pld.c
+++ b/src/pld/pld.c
@@ -28,9 +28,9 @@
 
 /* pld drivers
  */
-extern pld_driver_t virtex2_pld;
+extern struct pld_driver virtex2_pld;
 
-static pld_driver_t *pld_drivers[] =
+static struct pld_driver *pld_drivers[] =
 {
 	&amp;virtex2_pld,
 	NULL,
diff --git a/src/pld/pld.h b/src/pld/pld.h
index 22f2c13..2b88d9d 100644
--- a/src/pld/pld.h
+++ b/src/pld/pld.h
@@ -27,19 +27,19 @@ struct pld_device_s;
 #define __PLD_DEVICE_COMMAND(name) \
 		COMMAND_HELPER(name, struct pld_device_s *pld)
 
-typedef struct pld_driver_s
+struct pld_driver
 {
 	char *name;
 	__PLD_DEVICE_COMMAND((*pld_device_command));
 	int (*register_commands)(struct command_context_s *cmd_ctx);
 	int (*load)(struct pld_device_s *pld_device, const char *filename);
-} pld_driver_t;
+};
 
 #define PLD_DEVICE_COMMAND_HANDLER(name) static __PLD_DEVICE_COMMAND(name)
 
 typedef struct pld_device_s
 {
-	pld_driver_t *driver;
+	struct pld_driver *driver;
 	void *driver_priv;
 	struct pld_device_s *next;
 } pld_device_t;
diff --git a/src/pld/virtex2.c b/src/pld/virtex2.c
index 56b4eee..4c1fc53 100644
--- a/src/pld/virtex2.c
+++ b/src/pld/virtex2.c
@@ -245,7 +245,7 @@ static int virtex2_register_commands(struct command_context_s *cmd_ctx)
 	return ERROR_OK;
 }
 
-pld_driver_t virtex2_pld = {
+struct pld_driver virtex2_pld = {
 		.name = &quot;virtex2&quot;,
 		.register_commands = &amp;virtex2_register_commands,
 		.pld_device_command = &amp;virtex2_pld_device_command,

commit 38d826cec18902f719439903838ebb612575d05d
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:10:43 2009 -0800

    connection_t -&gt; struct connection
    
    Remove misleading typedef and redundant suffix from struct connection.

diff --git a/src/server/gdb_server.c b/src/server/gdb_server.c
index fe916c2..389710e 100644
--- a/src/server/gdb_server.c
+++ b/src/server/gdb_server.c
@@ -45,7 +45,7 @@ static struct gdb_connection *current_gdb_connection;
 static int gdb_breakpoint_override;
 static enum breakpoint_type gdb_breakpoint_override_type;
 
-extern int gdb_error(connection_t *connection, int retval);
+extern int gdb_error(struct connection *connection, int retval);
 static unsigned short gdb_port = 3333;
 static const char *DIGITS = &quot;0123456789abcdef&quot;;
 
@@ -87,7 +87,7 @@ int gdb_last_signal(target_t *target)
 	}
 }
 
-int check_pending(connection_t *connection, int timeout_s, int *got_data)
+int check_pending(struct connection *connection, int timeout_s, int *got_data)
 {
 	/* a non-blocking socket will block if there is 0 bytes available on the socket,
 	 * but return with as many bytes as are available immediately
@@ -128,7 +128,7 @@ int check_pending(connection_t *connection, int timeout_s, int *got_data)
 	return ERROR_OK;
 }
 
-int gdb_get_char(connection_t *connection, int* next_char)
+int gdb_get_char(struct connection *connection, int* next_char)
 {
 	struct gdb_connection *gdb_con = connection-&gt;priv;
 	int retval = ERROR_OK;
@@ -236,7 +236,7 @@ int gdb_get_char(connection_t *connection, int* next_char)
 	return retval;
 }
 
-int gdb_putback_char(connection_t *connection, int last_char)
+int gdb_putback_char(struct connection *connection, int last_char)
 {
 	struct gdb_connection *gdb_con = connection-&gt;priv;
 
@@ -256,7 +256,7 @@ int gdb_putback_char(connection_t *connection, int last_char)
 /* The only way we can detect that the socket is closed is the first time
  * we write to it, we will fail. Subsequent write operations will
  * succeed. Shudder! */
-int gdb_write(connection_t *connection, void *data, int len)
+int gdb_write(struct connection *connection, void *data, int len)
 {
 	struct gdb_connection *gdb_con = connection-&gt;priv;
 	if (gdb_con-&gt;closed)
@@ -281,7 +281,7 @@ int gdb_write(connection_t *connection, void *data, int len)
 	return ERROR_SERVER_REMOTE_CLOSED;
 }
 
-int gdb_put_packet_inner(connection_t *connection, char *buffer, int len)
+int gdb_put_packet_inner(struct connection *connection, char *buffer, int len)
 {
 	int i;
 	unsigned char my_checksum = 0;
@@ -422,7 +422,7 @@ int gdb_put_packet_inner(connection_t *connection, char *buffer, int len)
 	return ERROR_OK;
 }
 
-int gdb_put_packet(connection_t *connection, char *buffer, int len)
+int gdb_put_packet(struct connection *connection, char *buffer, int len)
 {
 	struct gdb_connection *gdb_con = connection-&gt;priv;
 	gdb_con-&gt;busy = 1;
@@ -435,7 +435,7 @@ int gdb_put_packet(connection_t *connection, char *buffer, int len)
 	return retval;
 }
 
-static __inline__ int fetch_packet(connection_t *connection, int *checksum_ok, int noack, int *len, char *buffer)
+static __inline__ int fetch_packet(struct connection *connection, int *checksum_ok, int noack, int *len, char *buffer)
 {
 	unsigned char my_checksum = 0;
 	char checksum[3];
@@ -544,7 +544,7 @@ static __inline__ int fetch_packet(connection_t *connection, int *checksum_ok, i
 	return ERROR_OK;
 }
 
-int gdb_get_packet_inner(connection_t *connection, char *buffer, int *len)
+int gdb_get_packet_inner(struct connection *connection, char *buffer, int *len)
 {
 	int character;
 	int retval;
@@ -619,7 +619,7 @@ int gdb_get_packet_inner(connection_t *connection, char *buffer, int *len)
 	return ERROR_OK;
 }
 
-int gdb_get_packet(connection_t *connection, char *buffer, int *len)
+int gdb_get_packet(struct connection *connection, char *buffer, int *len)
 {
 	struct gdb_connection *gdb_con = connection-&gt;priv;
 	gdb_con-&gt;busy = 1;
@@ -628,7 +628,7 @@ int gdb_get_packet(connection_t *connection, char *buffer, int *len)
 	return retval;
 }
 
-int gdb_output_con(connection_t *connection, const char* line)
+int gdb_output_con(struct connection *connection, const char* line)
 {
 	char *hex_buffer;
 	int i, bin_size;
@@ -658,7 +658,7 @@ int gdb_output(struct command_context_s *context, const char* line)
 }
 
 
-static void gdb_frontend_halted(struct target_s *target, connection_t *connection)
+static void gdb_frontend_halted(struct target_s *target, struct connection *connection)
 {
 	struct gdb_connection *gdb_connection = connection-&gt;priv;
 
@@ -698,7 +698,7 @@ static void gdb_frontend_halted(struct target_s *target, connection_t *connectio
 int gdb_target_callback_event_handler(struct target_s *target, enum target_event event, void *priv)
 {
 	int retval;
-	connection_t *connection = priv;
+	struct connection *connection = priv;
 
 	target_handle_event(target, event);
 	switch (event)
@@ -723,7 +723,7 @@ int gdb_target_callback_event_handler(struct target_s *target, enum target_event
 	return ERROR_OK;
 }
 
-int gdb_new_connection(connection_t *connection)
+int gdb_new_connection(struct connection *connection)
 {
 	struct gdb_connection *gdb_connection = malloc(sizeof(struct gdb_connection));
 	struct gdb_service *gdb_service = connection-&gt;service-&gt;priv;
@@ -779,7 +779,7 @@ int gdb_new_connection(connection_t *connection)
 	return ERROR_OK;
 }
 
-int gdb_connection_closed(connection_t *connection)
+int gdb_connection_closed(struct connection *connection)
 {
 	struct gdb_service *gdb_service = connection-&gt;service-&gt;priv;
 	struct gdb_connection *gdb_connection = connection-&gt;priv;
@@ -826,14 +826,14 @@ int gdb_connection_closed(connection_t *connection)
 	return ERROR_OK;
 }
 
-void gdb_send_error(connection_t *connection, uint8_t the_error)
+void gdb_send_error(struct connection *connection, uint8_t the_error)
 {
 	char err[4];
 	snprintf(err, 4, &quot;E%2.2X&quot;, the_error);
 	gdb_put_packet(connection, err, 3);
 }
 
-int gdb_last_signal_packet(connection_t *connection, target_t *target, char* packet, int packet_size)
+int gdb_last_signal_packet(struct connection *connection, target_t *target, char* packet, int packet_size)
 {
 	char sig_reply[4];
 	int signal;
@@ -915,7 +915,7 @@ void gdb_target_to_reg(target_t *target, char *tstr, int str_len, uint8_t *bin)
 	}
 }
 
-int gdb_get_registers_packet(connection_t *connection, target_t *target, char* packet, int packet_size)
+int gdb_get_registers_packet(struct connection *connection, target_t *target, char* packet, int packet_size)
 {
 	reg_t **reg_list;
 	int reg_list_size;
@@ -965,7 +965,7 @@ int gdb_get_registers_packet(connection_t *connection, target_t *target, char* p
 	return ERROR_OK;
 }
 
-int gdb_set_registers_packet(connection_t *connection, target_t *target, char *packet, int packet_size)
+int gdb_set_registers_packet(struct connection *connection, target_t *target, char *packet, int packet_size)
 {
 	int i;
 	reg_t **reg_list;
@@ -1027,7 +1027,7 @@ int gdb_set_registers_packet(connection_t *connection, target_t *target, char *p
 	return ERROR_OK;
 }
 
-int gdb_get_register_packet(connection_t *connection, target_t *target, char *packet, int packet_size)
+int gdb_get_register_packet(struct connection *connection, target_t *target, char *packet, int packet_size)
 {
 	char *reg_packet;
 	int reg_num = strtoul(packet + 1, NULL, 16);
@@ -1062,7 +1062,7 @@ int gdb_get_register_packet(connection_t *connection, target_t *target, char *pa
 	return ERROR_OK;
 }
 
-int gdb_set_register_packet(connection_t *connection, target_t *target, char *packet, int packet_size)
+int gdb_set_register_packet(struct connection *connection, target_t *target, char *packet, int packet_size)
 {
 	char *separator;
 	uint8_t *bin_buf;
@@ -1111,7 +1111,7 @@ int gdb_set_register_packet(connection_t *connection, target_t *target, char *pa
 	return ERROR_OK;
 }
 
-int gdb_error(connection_t *connection, int retval)
+int gdb_error(struct connection *connection, int retval)
 {
 	switch (retval)
 	{
@@ -1142,7 +1142,7 @@ int gdb_error(connection_t *connection, int retval)
  *
  * 8191 bytes by the looks of it. Why 8191 bytes instead of 8192?????
  */
-int gdb_read_memory_packet(connection_t *connection, target_t *target, char *packet, int packet_size)
+int gdb_read_memory_packet(struct connection *connection, target_t *target, char *packet, int packet_size)
 {
 	char *separator;
 	uint32_t addr = 0;
@@ -1216,7 +1216,7 @@ int gdb_read_memory_packet(connection_t *connection, target_t *target, char *pac
 	return retval;
 }
 
-int gdb_write_memory_packet(connection_t *connection, target_t *target, char *packet, int packet_size)
+int gdb_write_memory_packet(struct connection *connection, target_t *target, char *packet, int packet_size)
 {
 	char *separator;
 	uint32_t addr = 0;
@@ -1273,7 +1273,7 @@ int gdb_write_memory_packet(connection_t *connection, target_t *target, char *pa
 	return retval;
 }
 
-int gdb_write_memory_binary_packet(connection_t *connection, target_t *target, char *packet, int packet_size)
+int gdb_write_memory_binary_packet(struct connection *connection, target_t *target, char *packet, int packet_size)
 {
 	char *separator;
 	uint32_t addr = 0;
@@ -1321,7 +1321,7 @@ int gdb_write_memory_binary_packet(connection_t *connection, target_t *target, c
 	return ERROR_OK;
 }
 
-int gdb_step_continue_packet(connection_t *connection, target_t *target, char *packet, int packet_size)
+int gdb_step_continue_packet(struct connection *connection, target_t *target, char *packet, int packet_size)
 {
 	int current = 0;
 	uint32_t address = 0x0;
@@ -1354,7 +1354,7 @@ int gdb_step_continue_packet(connection_t *connection, target_t *target, char *p
 	return retval;
 }
 
-int gdb_breakpoint_watchpoint_packet(connection_t *connection, target_t *target, char *packet, int packet_size)
+int gdb_breakpoint_watchpoint_packet(struct connection *connection, target_t *target, char *packet, int packet_size)
 {
 	int type;
 	enum breakpoint_type bp_type = BKPT_SOFT /* dummy init to avoid warning */;
@@ -1554,7 +1554,7 @@ static int compare_bank (const void * a, const void * b)
 	}
 }
 
-int gdb_query_packet(connection_t *connection, target_t *target, char *packet, int packet_size)
+int gdb_query_packet(struct connection *connection, target_t *target, char *packet, int packet_size)
 {
 	command_context_t *cmd_ctx = connection-&gt;cmd_ctx;
 	struct gdb_connection *gdb_connection = connection-&gt;priv;
@@ -1810,7 +1810,7 @@ int gdb_query_packet(connection_t *connection, target_t *target, char *packet, i
 	return ERROR_OK;
 }
 
-int gdb_v_packet(connection_t *connection, target_t *target, char *packet, int packet_size)
+int gdb_v_packet(struct connection *connection, target_t *target, char *packet, int packet_size)
 {
 	struct gdb_connection *gdb_connection = connection-&gt;priv;
 	struct gdb_service *gdb_service = connection-&gt;service-&gt;priv;
@@ -1947,7 +1947,7 @@ int gdb_v_packet(connection_t *connection, target_t *target, char *packet, int p
 	return ERROR_OK;
 }
 
-int gdb_detach(connection_t *connection, target_t *target)
+int gdb_detach(struct connection *connection, target_t *target)
 {
 	struct gdb_service *gdb_service = connection-&gt;service-&gt;priv;
 
@@ -1959,7 +1959,7 @@ int gdb_detach(connection_t *connection, target_t *target)
 static void gdb_log_callback(void *priv, const char *file, unsigned line,
 		const char *function, const char *string)
 {
-	connection_t *connection = priv;
+	struct connection *connection = priv;
 	struct gdb_connection *gdb_con = connection-&gt;priv;
 
 	if (gdb_con-&gt;busy)
@@ -1974,7 +1974,7 @@ static void gdb_log_callback(void *priv, const char *file, unsigned line,
 /* Do not allocate this on the stack */
 char gdb_packet_buffer[GDB_BUFFER_SIZE];
 
-static void gdb_sig_halted(connection_t *connection)
+static void gdb_sig_halted(struct connection *connection)
 {
 	char sig_reply[4];
 	snprintf(sig_reply, 4, &quot;T%2.2x&quot;, 2);
@@ -1982,7 +1982,7 @@ static void gdb_sig_halted(connection_t *connection)
 
 }
 
-int gdb_input_inner(connection_t *connection)
+int gdb_input_inner(struct connection *connection)
 {
 	struct gdb_service *gdb_service = connection-&gt;service-&gt;priv;
 	target_t *target = gdb_service-&gt;target;
@@ -2180,7 +2180,7 @@ int gdb_input_inner(connection_t *connection)
 	return ERROR_OK;
 }
 
-int gdb_input(connection_t *connection)
+int gdb_input(struct connection *connection)
 {
 	int retval = gdb_input_inner(connection);
 	struct gdb_connection *gdb_con = connection-&gt;priv;
diff --git a/src/server/server.c b/src/server/server.c
index 59ed1a5..5614ef9 100644
--- a/src/server/server.c
+++ b/src/server/server.c
@@ -48,11 +48,11 @@ int server_use_pipes = 0;
 int add_connection(struct service *service, command_context_t *cmd_ctx)
 {
 	socklen_t address_size;
-	connection_t *c, **p;
+	struct connection *c, **p;
 	int retval;
 	int flag = 1;
 
-	c = malloc(sizeof(connection_t));
+	c = malloc(sizeof(struct connection));
 	c-&gt;fd = -1;
 	memset(&amp;c-&gt;sin, 0, sizeof(c-&gt;sin));
 	c-&gt;cmd_ctx = copy_command_context(cmd_ctx);
@@ -109,10 +109,10 @@ int add_connection(struct service *service, command_context_t *cmd_ctx)
 	return ERROR_OK;
 }
 
-int remove_connection(struct service *service, connection_t *connection)
+int remove_connection(struct service *service, struct connection *connection)
 {
-	connection_t **p = &amp;service-&gt;connections;
-	connection_t *c;
+	struct connection **p = &amp;service-&gt;connections;
+	struct connection *c;
 
 	/* find connection */
 	while ((c = *p))
@@ -329,7 +329,7 @@ int server_loop(command_context_t *command_context)
 
 			if (service-&gt;connections)
 			{
-				connection_t *c;
+				struct connection *c;
 
 				for (c = service-&gt;connections; c; c = c-&gt;next)
 				{
@@ -423,7 +423,7 @@ int server_loop(command_context_t *command_context)
 			/* handle activity on connections */
 			if (service-&gt;connections)
 			{
-				connection_t *c;
+				struct connection *c;
 
 				for (c = service-&gt;connections; c;)
 				{
@@ -431,7 +431,7 @@ int server_loop(command_context_t *command_context)
 					{
 						if ((retval = service-&gt;input(c)) != ERROR_OK)
 						{
-							connection_t *next = c-&gt;next;
+							struct connection *next = c-&gt;next;
 							if (service-&gt;type == CONNECTION_PIPE)
 							{
 								/* if connection uses a pipe then shutdown openocd on error */
diff --git a/src/server/server.h b/src/server/server.h
index 2bfedb4..062691b 100644
--- a/src/server/server.h
+++ b/src/server/server.h
@@ -38,7 +38,7 @@ enum connection_type
 	CONNECTION_PIPE
 };
 
-typedef struct connection_s
+struct connection
 {
 	int fd;
 	struct sockaddr_in sin;
@@ -46,12 +46,12 @@ typedef struct connection_s
 	struct service *service;
 	int input_pending;
 	void *priv;
-	struct connection_s *next;
-} connection_t;
+	struct connection *next;
+};
 
-typedef int (*new_connection_handler_t)(connection_t *connection);
-typedef int (*input_handler_t)(connection_t *connection);
-typedef int (*connection_closed_handler_t)(connection_t *connection);
+typedef int (*new_connection_handler_t)(struct connection *connection);
+typedef int (*input_handler_t)(struct connection *connection);
+typedef int (*connection_closed_handler_t)(struct connection *connection);
 
 struct service
 {
@@ -61,7 +61,7 @@ struct service
 	int fd;
 	struct sockaddr_in sin;
 	int max_connections;
-	connection_t *connections;
+	struct connection *connections;
 	new_connection_handler_t new_connection;
 	input_handler_t input;
 	connection_closed_handler_t connection_closed;
diff --git a/src/server/tcl_server.c b/src/server/tcl_server.c
index b5bdbc2..eed483c 100644
--- a/src/server/tcl_server.c
+++ b/src/server/tcl_server.c
@@ -37,17 +37,17 @@ struct tcl_connection {
 static unsigned short tcl_port = 6666;
 
 /* handlers */
-static int tcl_new_connection(connection_t *connection);
-static int tcl_input(connection_t *connection);
-static int tcl_output(connection_t *connection, const void *buf, ssize_t len);
-static int tcl_closed(connection_t *connection);
+static int tcl_new_connection(struct connection *connection);
+static int tcl_input(struct connection *connection);
+static int tcl_output(struct connection *connection, const void *buf, ssize_t len);
+static int tcl_closed(struct connection *connection);
 
 /* write data out to a socket.
  *
  * this is a blocking write, so the return value must equal the length, if
  * that is not the case then flag the connection with an output error.
  */
-int tcl_output(connection_t *connection, const void *data, ssize_t len)
+int tcl_output(struct connection *connection, const void *data, ssize_t len)
 {
 	ssize_t wlen;
 	struct tcl_connection *tclc;
@@ -66,7 +66,7 @@ int tcl_output(connection_t *connection, const void *data, ssize_t len)
 }
 
 /* connections */
-static int tcl_new_connection(connection_t *connection)
+static int tcl_new_connection(struct connection *connection)
 {
 	struct tcl_connection *tclc;
 
@@ -79,7 +79,7 @@ static int tcl_new_connection(connection_t *connection)
 	return ERROR_OK;
 }
 
-static int tcl_input(connection_t *connection)
+static int tcl_input(struct connection *connection)
 {
 	int retval;
 	int i;
@@ -146,7 +146,7 @@ static int tcl_input(connection_t *connection)
 	return ERROR_OK;
 }
 
-static int tcl_closed(connection_t *connection)
+static int tcl_closed(struct connection *connection)
 {
 	/* cleanup connection context */
 	if (connection-&gt;priv) {
diff --git a/src/server/telnet_server.c b/src/server/telnet_server.c
index 13ac087..93028b1 100644
--- a/src/server/telnet_server.c
+++ b/src/server/telnet_server.c
@@ -44,7 +44,7 @@ static char *negotiate =
  * we write to it, we will fail. Subsequent write operations will
  * succeed. Shudder!
  */
-int telnet_write(connection_t *connection, const void *data, int len)
+int telnet_write(struct connection *connection, const void *data, int len)
 {
 	struct telnet_connection *t_con = connection-&gt;priv;
 	if (t_con-&gt;closed)
@@ -58,7 +58,7 @@ int telnet_write(connection_t *connection, const void *data, int len)
 	return ERROR_SERVER_REMOTE_CLOSED;
 }
 
-int telnet_prompt(connection_t *connection)
+int telnet_prompt(struct connection *connection)
 {
 	struct telnet_connection *t_con = connection-&gt;priv;
 
@@ -66,7 +66,7 @@ int telnet_prompt(connection_t *connection)
 	return telnet_write(connection, t_con-&gt;prompt, strlen(t_con-&gt;prompt));
 }
 
-int telnet_outputline(connection_t *connection, const char *line)
+int telnet_outputline(struct connection *connection, const char *line)
 {
 	int len;
 
@@ -96,7 +96,7 @@ int telnet_outputline(connection_t *connection, const char *line)
 
 int telnet_output(struct command_context_s *cmd_ctx, const char* line)
 {
-	connection_t *connection = cmd_ctx-&gt;output_handler_priv;
+	struct connection *connection = cmd_ctx-&gt;output_handler_priv;
 
 	return telnet_outputline(connection, line);
 }
@@ -104,7 +104,7 @@ int telnet_output(struct command_context_s *cmd_ctx, const char* line)
 void telnet_log_callback(void *priv, const char *file, unsigned line,
 		const char *function, const char *string)
 {
-	connection_t *connection = priv;
+	struct connection *connection = priv;
 	struct telnet_connection *t_con = connection-&gt;priv;
 	int i;
 
@@ -131,7 +131,7 @@ void telnet_log_callback(void *priv, const char *file, unsigned line,
 		telnet_write(connection, &quot;\b&quot;, 1);
 }
 
-int telnet_new_connection(connection_t *connection)
+int telnet_new_connection(struct connection *connection)
 {
 	struct telnet_connection *telnet_connection = malloc(sizeof(struct telnet_connection));
 	struct telnet_service *telnet_service = connection-&gt;service-&gt;priv;
@@ -175,7 +175,7 @@ int telnet_new_connection(connection_t *connection)
 	return ERROR_OK;
 }
 
-void telnet_clear_line(connection_t *connection, struct telnet_connection *t_con)
+void telnet_clear_line(struct connection *connection, struct telnet_connection *t_con)
 {
 	/* move to end of line */
 	if (t_con-&gt;line_cursor &lt; t_con-&gt;line_size)
@@ -192,7 +192,7 @@ void telnet_clear_line(connection_t *connection, struct telnet_connection *t_con
 	t_con-&gt;line_cursor = 0;
 }
 
-int telnet_input(connection_t *connection)
+int telnet_input(struct connection *connection)
 {
 	int bytes_read;
 	char buffer[TELNET_BUFFER_SIZE];
@@ -537,7 +537,7 @@ int telnet_input(connection_t *connection)
 	return ERROR_OK;
 }
 
-int telnet_connection_closed(connection_t *connection)
+int telnet_connection_closed(struct connection *connection)
 {
 	struct telnet_connection *t_con = connection-&gt;priv;
 	int i;
@@ -575,7 +575,7 @@ int telnet_connection_closed(connection_t *connection)
 	return ERROR_OK;
 }
 
-int telnet_set_prompt(connection_t *connection, char *prompt)
+int telnet_set_prompt(struct connection *connection, char *prompt)
 {
 	struct telnet_connection *t_con = connection-&gt;priv;
 

commit f7cd2aa0ef2939f7d3df5f4a86f5e777a27dbd37
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:07:36 2009 -0800

    telnet_connection_t -&gt; struct telnet_connection
    
    Remove misleading typedef and redundant suffix from struct telnet_connection.

diff --git a/src/server/telnet_server.c b/src/server/telnet_server.c
index 9c61155..13ac087 100644
--- a/src/server/telnet_server.c
+++ b/src/server/telnet_server.c
@@ -46,7 +46,7 @@ static char *negotiate =
  */
 int telnet_write(connection_t *connection, const void *data, int len)
 {
-	telnet_connection_t *t_con = connection-&gt;priv;
+	struct telnet_connection *t_con = connection-&gt;priv;
 	if (t_con-&gt;closed)
 		return ERROR_SERVER_REMOTE_CLOSED;
 
@@ -60,7 +60,7 @@ int telnet_write(connection_t *connection, const void *data, int len)
 
 int telnet_prompt(connection_t *connection)
 {
-	telnet_connection_t *t_con = connection-&gt;priv;
+	struct telnet_connection *t_con = connection-&gt;priv;
 
 	telnet_write(connection, &quot;\r&quot;, 1); /* the prompt is always placed at the line beginning */
 	return telnet_write(connection, t_con-&gt;prompt, strlen(t_con-&gt;prompt));
@@ -105,7 +105,7 @@ void telnet_log_callback(void *priv, const char *file, unsigned line,
 		const char *function, const char *string)
 {
 	connection_t *connection = priv;
-	telnet_connection_t *t_con = connection-&gt;priv;
+	struct telnet_connection *t_con = connection-&gt;priv;
 	int i;
 
 	/* if there is no prompt, simply output the message */
@@ -133,7 +133,7 @@ void telnet_log_callback(void *priv, const char *file, unsigned line,
 
 int telnet_new_connection(connection_t *connection)
 {
-	telnet_connection_t *telnet_connection = malloc(sizeof(telnet_connection_t));
+	struct telnet_connection *telnet_connection = malloc(sizeof(struct telnet_connection));
 	struct telnet_service *telnet_service = connection-&gt;service-&gt;priv;
 	int i;
 
@@ -175,7 +175,7 @@ int telnet_new_connection(connection_t *connection)
 	return ERROR_OK;
 }
 
-void telnet_clear_line(connection_t *connection, telnet_connection_t *t_con)
+void telnet_clear_line(connection_t *connection, struct telnet_connection *t_con)
 {
 	/* move to end of line */
 	if (t_con-&gt;line_cursor &lt; t_con-&gt;line_size)
@@ -197,7 +197,7 @@ int telnet_input(connection_t *connection)
 	int bytes_read;
 	char buffer[TELNET_BUFFER_SIZE];
 	char *buf_p;
-	telnet_connection_t *t_con = connection-&gt;priv;
+	struct telnet_connection *t_con = connection-&gt;priv;
 	command_context_t *command_context = connection-&gt;cmd_ctx;
 
 	bytes_read = read_socket(connection-&gt;fd, buffer, TELNET_BUFFER_SIZE);
@@ -539,7 +539,7 @@ int telnet_input(connection_t *connection)
 
 int telnet_connection_closed(connection_t *connection)
 {
-	telnet_connection_t *t_con = connection-&gt;priv;
+	struct telnet_connection *t_con = connection-&gt;priv;
 	int i;
 
 	log_remove_callback(telnet_log_callback, connection);
@@ -577,7 +577,7 @@ int telnet_connection_closed(connection_t *connection)
 
 int telnet_set_prompt(connection_t *connection, char *prompt)
 {
-	telnet_connection_t *t_con = connection-&gt;priv;
+	struct telnet_connection *t_con = connection-&gt;priv;
 
 	if (t_con-&gt;prompt != NULL)
 		free(t_con-&gt;prompt);
diff --git a/src/server/telnet_server.h b/src/server/telnet_server.h
index d6e9222..c45a423 100644
--- a/src/server/telnet_server.h
+++ b/src/server/telnet_server.h
@@ -47,7 +47,7 @@ enum telnet_states
 	TELNET_STATE_ESCAPE,
 };
 
-typedef struct telnet_connection_s
+struct telnet_connection
 {
 	char *prompt;
 	enum telnet_states state;
@@ -61,7 +61,7 @@ typedef struct telnet_connection_s
 	int next_history;
 	int current_history;
 	int closed;
-} telnet_connection_t;
+};
 
 struct telnet_service
 {

commit f2cbaba3cc4af99db7b4f2682c2e0dd4467655e3
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:07:33 2009 -0800

    tcl_connection_t -&gt; struct tcl_connection
    
    Remove misleading typedef and redundant suffix from struct tcl_connection.

diff --git a/src/server/tcl_server.c b/src/server/tcl_server.c
index c8da5bc..b5bdbc2 100644
--- a/src/server/tcl_server.c
+++ b/src/server/tcl_server.c
@@ -27,12 +27,12 @@
 #define TCL_SERVER_VERSION	&quot;TCL Server 0.1&quot;
 #define TCL_MAX_LINE		(4096)
 
-typedef struct tcl_connection_s {
+struct tcl_connection {
 	int tc_linedrop;
 	int tc_lineoffset;
 	char tc_line[TCL_MAX_LINE];
 	int tc_outerror; /* flag an output error */
-} tcl_connection_t;
+};
 
 static unsigned short tcl_port = 6666;
 
@@ -50,7 +50,7 @@ static int tcl_closed(connection_t *connection);
 int tcl_output(connection_t *connection, const void *data, ssize_t len)
 {
 	ssize_t wlen;
-	tcl_connection_t *tclc;
+	struct tcl_connection *tclc;
 
 	tclc = connection-&gt;priv;
 	if (tclc-&gt;tc_outerror)
@@ -68,13 +68,13 @@ int tcl_output(connection_t *connection, const void *data, ssize_t len)
 /* connections */
 static int tcl_new_connection(connection_t *connection)
 {
-	tcl_connection_t *tclc;
+	struct tcl_connection *tclc;
 
-	tclc = malloc(sizeof(tcl_connection_t));
+	tclc = malloc(sizeof(struct tcl_connection));
 	if (tclc == NULL)
 		return ERROR_CONNECTION_REJECTED;
 
-	memset(tclc, 0, sizeof(tcl_connection_t));
+	memset(tclc, 0, sizeof(struct tcl_connection));
 	connection-&gt;priv = tclc;
 	return ERROR_OK;
 }
@@ -86,7 +86,7 @@ static int tcl_input(connection_t *connection)
 	ssize_t rlen;
 	const char *result;
 	int reslen;
-	tcl_connection_t *tclc;
+	struct tcl_connection *tclc;
 	char in[256];
 
 	rlen = read_socket(connection-&gt;fd, &amp;in, sizeof(in));

commit 8775a0f6638d966b6ef135b488da6efb954e2573
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:07:00 2009 -0800

    service_t -&gt; struct service
    
    Remove misleading typedef and redundant suffix from struct service.

diff --git a/src/server/server.c b/src/server/server.c
index ada0a60..59ed1a5 100644
--- a/src/server/server.c
+++ b/src/server/server.c
@@ -37,7 +37,7 @@
 #endif
 
 
-service_t *services = NULL;
+struct service *services = NULL;
 
 /* shutdown_openocd == 1: exit the main event loop, and quit the debugger */
 static int shutdown_openocd = 0;
@@ -45,7 +45,7 @@ static int shutdown_openocd = 0;
 /* set when using pipes rather than tcp */
 int server_use_pipes = 0;
 
-int add_connection(service_t *service, command_context_t *cmd_ctx)
+int add_connection(struct service *service, command_context_t *cmd_ctx)
 {
 	socklen_t address_size;
 	connection_t *c, **p;
@@ -109,7 +109,7 @@ int add_connection(service_t *service, command_context_t *cmd_ctx)
 	return ERROR_OK;
 }
 
-int remove_connection(service_t *service, connection_t *connection)
+int remove_connection(struct service *service, connection_t *connection)
 {
 	connection_t **p = &amp;service-&gt;connections;
 	connection_t *c;
@@ -141,10 +141,10 @@ int remove_connection(service_t *service, connection_t *connection)
 
 int add_service(char *name, enum connection_type type, unsigned short port, int max_connections, new_connection_handler_t new_connection_handler, input_handler_t input_handler, connection_closed_handler_t connection_closed_handler, void *priv)
 {
-	service_t *c, **p;
+	struct service *c, **p;
 	int so_reuseaddr_option = 1;
 
-	c = malloc(sizeof(service_t));
+	c = malloc(sizeof(struct service));
 
 	c-&gt;name = strdup(name);
 	c-&gt;type = type;
@@ -232,8 +232,8 @@ int add_service(char *name, enum connection_type type, unsigned short port, int
 
 int remove_service(unsigned short port)
 {
-	service_t **p = &services;
-	service_t *c;
+	struct service **p = &services;
+	struct service *c;
 
 	/* find service */
 	while ((c = *p))
@@ -260,12 +260,12 @@ int remove_service(unsigned short port)
 
 int remove_services(void)
 {
-	service_t *c = services;
+	struct service *c = services;
 
 	/* loop service */
 	while (c)
 	{
-		service_t *next = c-&gt;next;
+		struct service *next = c-&gt;next;
 
 		if (c-&gt;name)
 			free(c-&gt;name);
@@ -290,7 +290,7 @@ extern void openocd_sleep_postlude(void);
 
 int server_loop(command_context_t *command_context)
 {
-	service_t *service;
+	struct service *service;
 
 	/* used in select() */
 	fd_set read_fds;
diff --git a/src/server/server.h b/src/server/server.h
index abb501d..2bfedb4 100644
--- a/src/server/server.h
+++ b/src/server/server.h
@@ -43,7 +43,7 @@ typedef struct connection_s
 	int fd;
 	struct sockaddr_in sin;
 	command_context_t *cmd_ctx;
-	struct service_s *service;
+	struct service *service;
 	int input_pending;
 	void *priv;
 	struct connection_s *next;
@@ -53,7 +53,7 @@ typedef int (*new_connection_handler_t)(connection_t *connection);
 typedef int (*input_handler_t)(connection_t *connection);
 typedef int (*connection_closed_handler_t)(connection_t *connection);
 
-typedef struct service_s
+struct service
 {
 	char *name;
 	enum connection_type type;
@@ -66,8 +66,8 @@ typedef struct service_s
 	input_handler_t input;
 	connection_closed_handler_t connection_closed;
 	void *priv;
-	struct service_s *next;
-} service_t;
+	struct service *next;
+};
 
 int add_service(char *name, enum connection_type type, unsigned short port,
 		int max_connections, new_connection_handler_t new_connection_handler,

commit e01a0be57655683c58e9dd5e66ee30fe3049e8d9
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:06:56 2009 -0800

    telnet_service_t -&gt; struct telnet_service
    
    Remove misleading typedef and redundant suffix from struct telnet_service.

diff --git a/src/server/telnet_server.c b/src/server/telnet_server.c
index 6cb4746..9c61155 100644
--- a/src/server/telnet_server.c
+++ b/src/server/telnet_server.c
@@ -134,7 +134,7 @@ void telnet_log_callback(void *priv, const char *file, unsigned line,
 int telnet_new_connection(connection_t *connection)
 {
 	telnet_connection_t *telnet_connection = malloc(sizeof(telnet_connection_t));
-	telnet_service_t *telnet_service = connection-&gt;service-&gt;priv;
+	struct telnet_service *telnet_service = connection-&gt;service-&gt;priv;
 	int i;
 
 	connection-&gt;priv = telnet_connection;
@@ -589,7 +589,7 @@ int telnet_set_prompt(connection_t *connection, char *prompt)
 
 int telnet_init(char *banner)
 {
-	telnet_service_t *telnet_service = malloc(sizeof(telnet_service_t));
+	struct telnet_service *telnet_service = malloc(sizeof(struct telnet_service));
 
 	if (telnet_port == 0)
 	{
diff --git a/src/server/telnet_server.h b/src/server/telnet_server.h
index 8f0d24a..d6e9222 100644
--- a/src/server/telnet_server.h
+++ b/src/server/telnet_server.h
@@ -63,10 +63,10 @@ typedef struct telnet_connection_s
 	int closed;
 } telnet_connection_t;
 
-typedef struct telnet_service_s
+struct telnet_service
 {
 	char *banner;
-} telnet_service_t;
+};
 
 int telnet_init(char *banner);
 int telnet_register_commands(command_context_t *command_context);

commit 45a165a432eae2eb74b97ec5196736a352923a12
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:06:52 2009 -0800

    gdb_service_t -&gt; struct gdb_service
    
    Remove misleading typedef and redundant suffix from struct gdb_service.

diff --git a/src/server/gdb_server.c b/src/server/gdb_server.c
index 4d20a7d..fe916c2 100644
--- a/src/server/gdb_server.c
+++ b/src/server/gdb_server.c
@@ -726,7 +726,7 @@ int gdb_target_callback_event_handler(struct target_s *target, enum target_event
 int gdb_new_connection(connection_t *connection)
 {
 	struct gdb_connection *gdb_connection = malloc(sizeof(struct gdb_connection));
-	gdb_service_t *gdb_service = connection-&gt;service-&gt;priv;
+	struct gdb_service *gdb_service = connection-&gt;service-&gt;priv;
 	int retval;
 	int initial_ack;
 
@@ -781,7 +781,7 @@ int gdb_new_connection(connection_t *connection)
 
 int gdb_connection_closed(connection_t *connection)
 {
-	gdb_service_t *gdb_service = connection-&gt;service-&gt;priv;
+	struct gdb_service *gdb_service = connection-&gt;service-&gt;priv;
 	struct gdb_connection *gdb_connection = connection-&gt;priv;
 
 	/* we're done forwarding messages. Tear down callback before
@@ -1813,7 +1813,7 @@ int gdb_query_packet(connection_t *connection, target_t *target, char *packet, i
 int gdb_v_packet(connection_t *connection, target_t *target, char *packet, int packet_size)
 {
 	struct gdb_connection *gdb_connection = connection-&gt;priv;
-	gdb_service_t *gdb_service = connection-&gt;service-&gt;priv;
+	struct gdb_service *gdb_service = connection-&gt;service-&gt;priv;
 	int result;
 
 	/* if flash programming disabled - send a empty reply */
@@ -1949,7 +1949,7 @@ int gdb_v_packet(connection_t *connection, target_t *target, char *packet, int p
 
 int gdb_detach(connection_t *connection, target_t *target)
 {
-	gdb_service_t *gdb_service = connection-&gt;service-&gt;priv;
+	struct gdb_service *gdb_service = connection-&gt;service-&gt;priv;
 
 	target_call_event_callbacks(gdb_service-&gt;target, TARGET_EVENT_GDB_DETACH);
 
@@ -1984,7 +1984,7 @@ static void gdb_sig_halted(connection_t *connection)
 
 int gdb_input_inner(connection_t *connection)
 {
-	gdb_service_t *gdb_service = connection-&gt;service-&gt;priv;
+	struct gdb_service *gdb_service = connection-&gt;service-&gt;priv;
 	target_t *target = gdb_service-&gt;target;
 	char *packet = gdb_packet_buffer;
 	int packet_size;
@@ -2197,7 +2197,7 @@ int gdb_input(connection_t *connection)
 
 int gdb_init(void)
 {
-	gdb_service_t *gdb_service;
+	struct gdb_service *gdb_service;
 	target_t *target = all_targets;
 
 	if (!target)
@@ -2216,7 +2216,7 @@ int gdb_init(void)
 	{
 		/* only a single gdb connection when using a pipe */
 
-		gdb_service = malloc(sizeof(gdb_service_t));
+		gdb_service = malloc(sizeof(struct gdb_service));
 		gdb_service-&gt;target = target;
 
 		add_service(&quot;gdb&quot;, CONNECTION_PIPE, 0, 1, gdb_new_connection, gdb_input, gdb_connection_closed, gdb_service);
@@ -2230,7 +2230,7 @@ int gdb_init(void)
 
 		while (target)
 		{
-			gdb_service = malloc(sizeof(gdb_service_t));
+			gdb_service = malloc(sizeof(struct gdb_service));
 			gdb_service-&gt;target = target;
 
 			add_service(&quot;gdb&quot;, CONNECTION_TCP,
diff --git a/src/server/gdb_server.h b/src/server/gdb_server.h
index 239c50e..ee9063b 100644
--- a/src/server/gdb_server.h
+++ b/src/server/gdb_server.h
@@ -49,10 +49,10 @@ struct gdb_connection
 
 };
 
-typedef struct gdb_service_s
+struct gdb_service
 {
 	struct target_s *target;
-} gdb_service_t;
+};
 
 int gdb_init(void);
 int gdb_register_commands(command_context_t *command_context);

commit 53bfd73591037044b391dd9a849e77284a7932d1
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:06:49 2009 -0800

    gdb_connection_t -&gt; struct gdb_connection
    
    Remove misleading typedef and redundant suffix from struct gdb_connection.

diff --git a/src/server/gdb_server.c b/src/server/gdb_server.c
index 761ae40..4d20a7d 100644
--- a/src/server/gdb_server.c
+++ b/src/server/gdb_server.c
@@ -40,7 +40,7 @@
 #define _DEBUG_GDB_IO_
 #endif
 
-static gdb_connection_t *current_gdb_connection;
+static struct gdb_connection *current_gdb_connection;
 
 static int gdb_breakpoint_override;
 static enum breakpoint_type gdb_breakpoint_override_type;
@@ -94,7 +94,7 @@ int check_pending(connection_t *connection, int timeout_s, int *got_data)
 	 */
 	struct timeval tv;
 	fd_set read_fds;
-	gdb_connection_t *gdb_con = connection-&gt;priv;
+	struct gdb_connection *gdb_con = connection-&gt;priv;
 	int t;
 	if (got_data == NULL)
 		got_data=&t;
@@ -130,7 +130,7 @@ int check_pending(connection_t *connection, int timeout_s, int *got_data)
 
 int gdb_get_char(connection_t *connection, int* next_char)
 {
-	gdb_connection_t *gdb_con = connection-&gt;priv;
+	struct gdb_connection *gdb_con = connection-&gt;priv;
 	int retval = ERROR_OK;
 
 #ifdef _DEBUG_GDB_IO_
@@ -238,7 +238,7 @@ int gdb_get_char(connection_t *connection, int* next_char)
 
 int gdb_putback_char(connection_t *connection, int last_char)
 {
-	gdb_connection_t *gdb_con = connection-&gt;priv;
+	struct gdb_connection *gdb_con = connection-&gt;priv;
 
 	if (gdb_con-&gt;buf_p &gt; gdb_con-&gt;buffer)
 	{
@@ -258,7 +258,7 @@ int gdb_putback_char(connection_t *connection, int last_char)
  * succeed. Shudder! */
 int gdb_write(connection_t *connection, void *data, int len)
 {
-	gdb_connection_t *gdb_con = connection-&gt;priv;
+	struct gdb_connection *gdb_con = connection-&gt;priv;
 	if (gdb_con-&gt;closed)
 		return ERROR_SERVER_REMOTE_CLOSED;
 
@@ -290,7 +290,7 @@ int gdb_put_packet_inner(connection_t *connection, char *buffer, int len)
 #endif
 	int reply;
 	int retval;
-	gdb_connection_t *gdb_con = connection-&gt;priv;
+	struct gdb_connection *gdb_con = connection-&gt;priv;
 
 	for (i = 0; i &lt; len; i++)
 		my_checksum += buffer[i];
@@ -424,7 +424,7 @@ int gdb_put_packet_inner(connection_t *connection, char *buffer, int len)
 
 int gdb_put_packet(connection_t *connection, char *buffer, int len)
 {
-	gdb_connection_t *gdb_con = connection-&gt;priv;
+	struct gdb_connection *gdb_con = connection-&gt;priv;
 	gdb_con-&gt;busy = 1;
 	int retval = gdb_put_packet_inner(connection, buffer, len);
 	gdb_con-&gt;busy = 0;
@@ -442,7 +442,7 @@ static __inline__ int fetch_packet(connection_t *connection, int *checksum_ok, i
 	int character;
 	int retval;
 
-	gdb_connection_t *gdb_con = connection-&gt;priv;
+	struct gdb_connection *gdb_con = connection-&gt;priv;
 	my_checksum = 0;
 	int count = 0;
 	count = 0;
@@ -548,7 +548,7 @@ int gdb_get_packet_inner(connection_t *connection, char *buffer, int *len)
 {
 	int character;
 	int retval;
-	gdb_connection_t *gdb_con = connection-&gt;priv;
+	struct gdb_connection *gdb_con = connection-&gt;priv;
 
 	while (1)
 	{
@@ -621,7 +621,7 @@ int gdb_get_packet_inner(connection_t *connection, char *buffer, int *len)
 
 int gdb_get_packet(connection_t *connection, char *buffer, int *len)
 {
-	gdb_connection_t *gdb_con = connection-&gt;priv;
+	struct gdb_connection *gdb_con = connection-&gt;priv;
 	gdb_con-&gt;busy = 1;
 	int retval = gdb_get_packet_inner(connection, buffer, len);
 	gdb_con-&gt;busy = 0;
@@ -660,7 +660,7 @@ int gdb_output(struct command_context_s *context, const char* line)
 
 static void gdb_frontend_halted(struct target_s *target, connection_t *connection)
 {
-	gdb_connection_t *gdb_connection = connection-&gt;priv;
+	struct gdb_connection *gdb_connection = connection-&gt;priv;
 
 	/* In the GDB protocol when we are stepping or continuing execution,
 	 * we have a lingering reply. Upon receiving a halted event
@@ -725,7 +725,7 @@ int gdb_target_callback_event_handler(struct target_s *target, enum target_event
 
 int gdb_new_connection(connection_t *connection)
 {
-	gdb_connection_t *gdb_connection = malloc(sizeof(gdb_connection_t));
+	struct gdb_connection *gdb_connection = malloc(sizeof(struct gdb_connection));
 	gdb_service_t *gdb_service = connection-&gt;service-&gt;priv;
 	int retval;
 	int initial_ack;
@@ -782,7 +782,7 @@ int gdb_new_connection(connection_t *connection)
 int gdb_connection_closed(connection_t *connection)
 {
 	gdb_service_t *gdb_service = connection-&gt;service-&gt;priv;
-	gdb_connection_t *gdb_connection = connection-&gt;priv;
+	struct gdb_connection *gdb_connection = connection-&gt;priv;
 
 	/* we're done forwarding messages. Tear down callback before
 	 * cleaning up connection.
@@ -1557,7 +1557,7 @@ static int compare_bank (const void * a, const void * b)
 int gdb_query_packet(connection_t *connection, target_t *target, char *packet, int packet_size)
 {
 	command_context_t *cmd_ctx = connection-&gt;cmd_ctx;
-	gdb_connection_t *gdb_connection = connection-&gt;priv;
+	struct gdb_connection *gdb_connection = connection-&gt;priv;
 
 	if (strstr(packet, &quot;qRcmd,&quot;))
 	{
@@ -1812,7 +1812,7 @@ int gdb_query_packet(connection_t *connection, target_t *target, char *packet, i
 
 int gdb_v_packet(connection_t *connection, target_t *target, char *packet, int packet_size)
 {
-	gdb_connection_t *gdb_connection = connection-&gt;priv;
+	struct gdb_connection *gdb_connection = connection-&gt;priv;
 	gdb_service_t *gdb_service = connection-&gt;service-&gt;priv;
 	int result;
 
@@ -1960,7 +1960,7 @@ static void gdb_log_callback(void *priv, const char *file, unsigned line,
 		const char *function, const char *string)
 {
 	connection_t *connection = priv;
-	gdb_connection_t *gdb_con = connection-&gt;priv;
+	struct gdb_connection *gdb_con = connection-&gt;priv;
 
 	if (gdb_con-&gt;busy)
 	{
@@ -1989,7 +1989,7 @@ int gdb_input_inner(connection_t *connection)
 	char *packet = gdb_packet_buffer;
 	int packet_size;
 	int retval;
-	gdb_connection_t *gdb_con = connection-&gt;priv;
+	struct gdb_connection *gdb_con = connection-&gt;priv;
 	static int extended_protocol = 0;
 
 	/* drain input buffer */
@@ -2063,7 +2063,7 @@ int gdb_input_inner(connection_t *connection)
 					{
 						int retval = ERROR_OK;
 
-						gdb_connection_t *gdb_con = connection-&gt;priv;
+						struct gdb_connection *gdb_con = connection-&gt;priv;
 						log_add_callback(gdb_log_callback, connection);
 
 						bool nostep = false;
@@ -2183,7 +2183,7 @@ int gdb_input_inner(connection_t *connection)
 int gdb_input(connection_t *connection)
 {
 	int retval = gdb_input_inner(connection);
-	gdb_connection_t *gdb_con = connection-&gt;priv;
+	struct gdb_connection *gdb_con = connection-&gt;priv;
 	if (retval == ERROR_SERVER_REMOTE_CLOSED)
 		return retval;
 
diff --git a/src/server/gdb_server.h b/src/server/gdb_server.h
index 4e334bc..239c50e 100644
--- a/src/server/gdb_server.h
+++ b/src/server/gdb_server.h
@@ -32,7 +32,7 @@ struct image_s;
 
 #define GDB_BUFFER_SIZE	16384
 
-typedef struct gdb_connection_s
+struct gdb_connection
 {
 	char buffer[GDB_BUFFER_SIZE];
 	char *buf_p;
@@ -47,7 +47,7 @@ typedef struct gdb_connection_s
 	               allowing GDB to pick up a fresh set of register values from the target
 	               without modifying the target state. */
 
-} gdb_connection_t;
+};
 
 typedef struct gdb_service_s
 {

commit 43483e5054c78e0fdfaebed5e14c14246af07c97
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 08:02:59 2009 -0800

    remove unused aduc702x structure.
    
    The ADUC702x_FLASH_MMIO structure was completely used, so it must die.

diff --git a/src/flash/aduc702x.c b/src/flash/aduc702x.c
index 255b176..ea9e840 100644
--- a/src/flash/aduc702x.c
+++ b/src/flash/aduc702x.c
@@ -43,17 +43,6 @@ static int aduc702x_set_write_enable(target_t *target, int enable);
 #define ADUC702x_FLASH_FEEPRO		(6*4)
 #define ADUC702x_FLASH_FEEHIDE		(7*4)
 
-typedef struct {
-	uint32_t feesta;
-	uint32_t feemod;
-	uint32_t feecon;
-	uint32_t feedat;
-	uint32_t feeadr;
-	uint32_t feesign;
-	uint32_t feepro;
-	uint32_t feehide;
-} ADUC702x_FLASH_MMIO;
-
 struct aduc702x_flash_bank {
 	working_area_t *write_algorithm;
 };

commit a03c9a8dce92d0df0e995e348edfa1b3ea952f45
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:48:15 2009 -0800

    aduc702x_flash_bank_t -&gt; struct aduc702x_flash_bank
    
    Remove misleading typedef and redundant suffix from struct
    aduc702x_flash_bank.

diff --git a/src/flash/aduc702x.c b/src/flash/aduc702x.c
index c17335e..255b176 100644
--- a/src/flash/aduc702x.c
+++ b/src/flash/aduc702x.c
@@ -54,18 +54,17 @@ typedef struct {
 	uint32_t feehide;
 } ADUC702x_FLASH_MMIO;
 
-typedef struct
-{
+struct aduc702x_flash_bank {
 	working_area_t *write_algorithm;
-} aduc702x_flash_bank_t;
+};
 
 /* flash bank aduc702x 0 0 0 0 &lt;target#&gt;
  * The ADC7019-28 devices all have the same flash layout */
 FLASH_BANK_COMMAND_HANDLER(aduc702x_flash_bank_command)
 {
-	aduc702x_flash_bank_t *nbank;
+	struct aduc702x_flash_bank *nbank;
 
-	nbank = malloc(sizeof(aduc702x_flash_bank_t));
+	nbank = malloc(sizeof(struct aduc702x_flash_bank));
 
         bank-&gt;base = 0x80000;
         bank-&gt;size = 0xF800; // top 4k not accessible
@@ -170,7 +169,7 @@ static int aduc702x_protect(struct flash_bank_s *bank, int set, int first, int l
  */
 static int aduc702x_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
-	aduc702x_flash_bank_t *aduc702x_info = bank-&gt;driver_priv;
+	struct aduc702x_flash_bank *aduc702x_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 	uint32_t buffer_size = 7000;
 	working_area_t *source;

commit 6a374afe71ad947970b5d5bb14fa4b4c856ebfc8
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:42:16 2009 -0800

    tms470_flash_bank_t -&gt; struct tms470_flash_bank
    
    Remove misleading typedef and redundant suffix from struct tms470_flash_bank.

diff --git a/src/flash/tms470.c b/src/flash/tms470.c
index 4149d9c..9f45b47 100644
--- a/src/flash/tms470.c
+++ b/src/flash/tms470.c
@@ -108,7 +108,7 @@ const struct flash_sector TMS470R1A384_BANK2_SECTORS[] = {
 
 static int tms470_read_part_info(struct flash_bank_s *bank)
 {
-	tms470_flash_bank_t *tms470_info = bank-&gt;driver_priv;
+	struct tms470_flash_bank *tms470_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 	uint32_t device_ident_reg;
 	uint32_t silicon_version;
@@ -534,7 +534,7 @@ static int tms470_flash_initialize_internal_state_machine(struct flash_bank_s *b
 {
 	uint32_t fmmac2, fmmac1, fmmaxep, k, delay, glbctrl, sysclk;
 	target_t *target = bank-&gt;target;
-	tms470_flash_bank_t *tms470_info = bank-&gt;driver_priv;
+	struct tms470_flash_bank *tms470_info = bank-&gt;driver_priv;
 	int result = ERROR_OK;
 
 	/*
@@ -832,7 +832,7 @@ static int tms470_register_commands(struct command_context_s *cmd_ctx)
 
 static int tms470_erase(struct flash_bank_s *bank, int first, int last)
 {
-	tms470_flash_bank_t *tms470_info = bank-&gt;driver_priv;
+	struct tms470_flash_bank *tms470_info = bank-&gt;driver_priv;
 	int sector, result = ERROR_OK;
 
 	if (bank-&gt;target-&gt;state != TARGET_HALTED)
@@ -879,7 +879,7 @@ static int tms470_erase(struct flash_bank_s *bank, int first, int last)
 
 static int tms470_protect(struct flash_bank_s *bank, int set, int first, int last)
 {
-	tms470_flash_bank_t *tms470_info = bank-&gt;driver_priv;
+	struct tms470_flash_bank *tms470_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 	uint32_t fmmac2, fmbsea, fmbseb;
 	int sector;
@@ -1040,7 +1040,7 @@ static int tms470_probe(struct flash_bank_s *bank)
 
 static int tms470_auto_probe(struct flash_bank_s *bank)
 {
-	tms470_flash_bank_t *tms470_info = bank-&gt;driver_priv;
+	struct tms470_flash_bank *tms470_info = bank-&gt;driver_priv;
 
 	if (tms470_info-&gt;device_ident_reg)
 		return ERROR_OK;
@@ -1052,7 +1052,7 @@ static int tms470_auto_probe(struct flash_bank_s *bank)
 static int tms470_erase_check(struct flash_bank_s *bank)
 {
 	target_t *target = bank-&gt;target;
-	tms470_flash_bank_t *tms470_info = bank-&gt;driver_priv;
+	struct tms470_flash_bank *tms470_info = bank-&gt;driver_priv;
 	int sector, result = ERROR_OK;
 	uint32_t fmmac2, fmbac2, glbctrl, orig_fmregopt;
 	static uint8_t buffer[64 * 1024];
@@ -1143,7 +1143,7 @@ static int tms470_erase_check(struct flash_bank_s *bank)
 static int tms470_protect_check(struct flash_bank_s *bank)
 {
 	target_t *target = bank-&gt;target;
-	tms470_flash_bank_t *tms470_info = bank-&gt;driver_priv;
+	struct tms470_flash_bank *tms470_info = bank-&gt;driver_priv;
 	int sector, result = ERROR_OK;
 	uint32_t fmmac2, fmbsea, fmbseb;
 
@@ -1191,7 +1191,7 @@ static int tms470_protect_check(struct flash_bank_s *bank)
 static int tms470_info(struct flash_bank_s *bank, char *buf, int buf_size)
 {
 	int used = 0;
-	tms470_flash_bank_t *tms470_info = bank-&gt;driver_priv;
+	struct tms470_flash_bank *tms470_info = bank-&gt;driver_priv;
 
 	if (!tms470_info-&gt;device_ident_reg)
 	{
@@ -1224,14 +1224,14 @@ static int tms470_info(struct flash_bank_s *bank, char *buf, int buf_size)
 
 FLASH_BANK_COMMAND_HANDLER(tms470_flash_bank_command)
 {
-	bank-&gt;driver_priv = malloc(sizeof(tms470_flash_bank_t));
+	bank-&gt;driver_priv = malloc(sizeof(struct tms470_flash_bank));
 
 	if (!bank-&gt;driver_priv)
 	{
 		return ERROR_FLASH_OPERATION_FAILED;
 	}
 
-	(void)memset(bank-&gt;driver_priv, 0, sizeof(tms470_flash_bank_t));
+	(void)memset(bank-&gt;driver_priv, 0, sizeof(struct tms470_flash_bank));
 
 	return ERROR_OK;
 }
diff --git a/src/flash/tms470.h b/src/flash/tms470.h
index ca0f93a..f275e51 100644
--- a/src/flash/tms470.h
+++ b/src/flash/tms470.h
@@ -22,7 +22,7 @@
 
 #include &quot;flash.h&quot;
 
-typedef struct tms470_flash_bank_s
+struct tms470_flash_bank
 {
 	unsigned ordinal;
 
@@ -34,6 +34,6 @@ typedef struct tms470_flash_bank_s
 	uint32_t part_number;
 	char * part_name;
 
-} tms470_flash_bank_t;
+};
 
 #endif /* TMS470_DOT_H */

commit 3c9afaa6454879a48d684338041250f2a1165c93
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:41:51 2009 -0800

    pic32mx_mem_layout_t -&gt; struct pic32mx_mem_layout
    
    Remove misleading typedef and redundant suffix from struct pic32mx_mem_layout.

diff --git a/src/flash/pic32mx.h b/src/flash/pic32mx.h
index 4ece7d0..3a3c979 100644
--- a/src/flash/pic32mx.h
+++ b/src/flash/pic32mx.h
@@ -104,10 +104,10 @@ struct pic32mx_flash_bank
 #define NVMKEY1			0xAA996655
 #define NVMKEY2			0x556699AA
 
-typedef struct pic32mx_mem_layout_s {
+struct pic32mx_mem_layout {
 	uint32_t sector_start;
 	uint32_t sector_size;
-} pic32mx_mem_layout_t;
+};
 
 #endif /* PIC32MX_H */
 

commit 54be77bc79ce05cd1ce4320958d8ce9d131aea09
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:41:28 2009 -0800

    non_cfi_t -&gt; struct non_cfi
    
    Remove misleading typedef and redundant suffix from struct non_cfi.

diff --git a/src/flash/non_cfi.c b/src/flash/non_cfi.c
index 0da8ba3..808e642 100644
--- a/src/flash/non_cfi.c
+++ b/src/flash/non_cfi.c
@@ -32,7 +32,7 @@
 #define ERASE_REGION(num, size) (((size/256) &lt;&lt; 16) | (num-1))
 
 /* non-CFI compatible flashes */
-static non_cfi_t non_cfi_flashes[] = {
+static struct non_cfi non_cfi_flashes[] = {
 	{
 		.mfr = CFI_MFR_SST,
 		.id = 0xd4,
@@ -406,7 +406,7 @@ static non_cfi_t non_cfi_flashes[] = {
 void cfi_fixup_non_cfi(flash_bank_t *bank)
 {
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
-	non_cfi_t *non_cfi = non_cfi_flashes;
+	struct non_cfi *non_cfi = non_cfi_flashes;
 
 	for (non_cfi = non_cfi_flashes; non_cfi-&gt;mfr; non_cfi++)
 	{
diff --git a/src/flash/non_cfi.h b/src/flash/non_cfi.h
index 14a6df7..ef50ae5 100644
--- a/src/flash/non_cfi.h
+++ b/src/flash/non_cfi.h
@@ -22,7 +22,7 @@
 
 #include &quot;flash.h&quot;
 
-typedef struct non_cfi_s
+struct non_cfi
 {
 	uint16_t mfr;
 	uint16_t id;
@@ -33,7 +33,7 @@ typedef struct non_cfi_s
 	uint8_t num_erase_regions;
 	uint32_t erase_region_info[6];
 	uint8_t  status_poll_mask;
-} non_cfi_t;
+};
 
 void cfi_fixup_non_cfi(flash_bank_t *bank);
 

commit d0dfec33b6d6844c3c1b817a464b9f040ce40087
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:41:10 2009 -0800

    nand_block_t -&gt; struct nand_block
    
    Remove misleading typedef and redundant suffix from struct nand_block.

diff --git a/src/flash/nand.c b/src/flash/nand.c
index 7948361..1100205 100644
--- a/src/flash/nand.c
+++ b/src/flash/nand.c
@@ -602,7 +602,7 @@ int nand_probe(struct nand_device_s *nand)
 	}
 
 	nand-&gt;num_blocks = (nand-&gt;device-&gt;chip_size * 1024) / (nand-&gt;erase_size / 1024);
-	nand-&gt;blocks = malloc(sizeof(nand_block_t) * nand-&gt;num_blocks);
+	nand-&gt;blocks = malloc(sizeof(struct nand_block) * nand-&gt;num_blocks);
 
 	for (i = 0; i &lt; nand-&gt;num_blocks; i++)
 	{
diff --git a/src/flash/nand.h b/src/flash/nand.h
index ea31947..c6d4075 100644
--- a/src/flash/nand.h
+++ b/src/flash/nand.h
@@ -53,13 +53,13 @@ struct nand_flash_controller
 
 #define NAND_DEVICE_COMMAND_HANDLER(name) static __NAND_DEVICE_COMMAND(name)
 
-typedef struct nand_block_s
+struct nand_block
 {
 	uint32_t offset;
 	uint32_t size;
 	int is_erased;
 	int is_bad;
-} nand_block_t;
+};
 
 struct nand_oobfree {
 	int offset;
@@ -85,7 +85,7 @@ typedef struct nand_device_s
 	int erase_size;
 	int use_raw;
 	int num_blocks;
-	nand_block_t *blocks;
+	struct nand_block *blocks;
 	struct nand_device_s *next;
 } nand_device_t;
 

commit 92fc7a6fdecac39ebc890ee3c2ae91f3fd50fdc5
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:39:14 2009 -0800

    str9xpec_flash_controller_t -&gt; struct str9xpec_flash_controller
    
    Remove misleading typedef and redundant suffix from struct str9xpec_flash_controller.

diff --git a/src/flash/str9xpec.c b/src/flash/str9xpec.c
index aa19b75..c47b9c5 100644
--- a/src/flash/str9xpec.c
+++ b/src/flash/str9xpec.c
@@ -85,7 +85,7 @@ static int str9xpec_isc_enable(struct flash_bank_s *bank)
 {
 	uint8_t status;
 	struct jtag_tap *tap;
-	str9xpec_flash_controller_t *str9xpec_info = bank-&gt;driver_priv;
+	struct str9xpec_flash_controller *str9xpec_info = bank-&gt;driver_priv;
 
 	tap = str9xpec_info-&gt;tap;
 
@@ -112,7 +112,7 @@ static int str9xpec_isc_disable(struct flash_bank_s *bank)
 {
 	uint8_t status;
 	struct jtag_tap *tap;
-	str9xpec_flash_controller_t *str9xpec_info = bank-&gt;driver_priv;
+	struct str9xpec_flash_controller *str9xpec_info = bank-&gt;driver_priv;
 
 	tap = str9xpec_info-&gt;tap;
 
@@ -143,7 +143,7 @@ static int str9xpec_read_config(struct flash_bank_s *bank)
 	uint8_t status;
 	struct jtag_tap *tap;
 
-	str9xpec_flash_controller_t *str9xpec_info = bank-&gt;driver_priv;
+	struct str9xpec_flash_controller *str9xpec_info = bank-&gt;driver_priv;
 
 	tap = str9xpec_info-&gt;tap;
 
@@ -168,7 +168,7 @@ static int str9xpec_read_config(struct flash_bank_s *bank)
 
 static int str9xpec_build_block_list(struct flash_bank_s *bank)
 {
-	str9xpec_flash_controller_t *str9xpec_info = bank-&gt;driver_priv;
+	struct str9xpec_flash_controller *str9xpec_info = bank-&gt;driver_priv;
 
 	int i;
 	int num_sectors;
@@ -237,7 +237,7 @@ static int str9xpec_build_block_list(struct flash_bank_s *bank)
  */
 FLASH_BANK_COMMAND_HANDLER(str9xpec_flash_bank_command)
 {
-	str9xpec_flash_controller_t *str9xpec_info;
+	struct str9xpec_flash_controller *str9xpec_info;
 	armv4_5_common_t *armv4_5 = NULL;
 	arm7_9_common_t *arm7_9 = NULL;
 	arm_jtag_t *jtag_info = NULL;
@@ -248,7 +248,7 @@ FLASH_BANK_COMMAND_HANDLER(str9xpec_flash_bank_command)
 		return ERROR_FLASH_BANK_INVALID;
 	}
 
-	str9xpec_info = malloc(sizeof(str9xpec_flash_controller_t));
+	str9xpec_info = malloc(sizeof(struct str9xpec_flash_controller));
 	bank-&gt;driver_priv = str9xpec_info;
 
 	/* REVISIT verify that the jtag position of flash controller is
@@ -277,7 +277,7 @@ static int str9xpec_blank_check(struct flash_bank_s *bank, int first, int last)
 	int i;
 	uint8_t *buffer = NULL;
 
-	str9xpec_flash_controller_t *str9xpec_info = bank-&gt;driver_priv;
+	struct str9xpec_flash_controller *str9xpec_info = bank-&gt;driver_priv;
 
 	tap = str9xpec_info-&gt;tap;
 
@@ -341,7 +341,7 @@ static int str9xpec_protect_check(struct flash_bank_s *bank)
 	uint8_t status;
 	int i;
 
-	str9xpec_flash_controller_t *str9xpec_info = bank-&gt;driver_priv;
+	struct str9xpec_flash_controller *str9xpec_info = bank-&gt;driver_priv;
 
 	status = str9xpec_read_config(bank);
 
@@ -366,7 +366,7 @@ static int str9xpec_erase_area(struct flash_bank_s *bank, int first, int last)
 	int i;
 	uint8_t *buffer = NULL;
 
-	str9xpec_flash_controller_t *str9xpec_info = bank-&gt;driver_priv;
+	struct str9xpec_flash_controller *str9xpec_info = bank-&gt;driver_priv;
 
 	tap = str9xpec_info-&gt;tap;
 
@@ -445,7 +445,7 @@ static int str9xpec_lock_device(struct flash_bank_s *bank)
 	struct scan_field field;
 	uint8_t status;
 	struct jtag_tap *tap;
-	str9xpec_flash_controller_t *str9xpec_info = NULL;
+	struct str9xpec_flash_controller *str9xpec_info = NULL;
 
 	str9xpec_info = bank-&gt;driver_priv;
 	tap = str9xpec_info-&gt;tap;
@@ -496,7 +496,7 @@ static int str9xpec_protect(struct flash_bank_s *bank, int set, int first, int l
 	uint8_t status;
 	int i;
 
-	str9xpec_flash_controller_t *str9xpec_info = bank-&gt;driver_priv;
+	struct str9xpec_flash_controller *str9xpec_info = bank-&gt;driver_priv;
 
 	status = str9xpec_read_config(bank);
 
@@ -541,7 +541,7 @@ static int str9xpec_set_address(struct flash_bank_s *bank, uint8_t sector)
 {
 	struct jtag_tap *tap;
 	struct scan_field field;
-	str9xpec_flash_controller_t *str9xpec_info = bank-&gt;driver_priv;
+	struct str9xpec_flash_controller *str9xpec_info = bank-&gt;driver_priv;
 
 	tap = str9xpec_info-&gt;tap;
 
@@ -560,7 +560,7 @@ static int str9xpec_set_address(struct flash_bank_s *bank, uint8_t sector)
 
 static int str9xpec_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
-	str9xpec_flash_controller_t *str9xpec_info = bank-&gt;driver_priv;
+	struct str9xpec_flash_controller *str9xpec_info = bank-&gt;driver_priv;
 	uint32_t dwords_remaining = (count / 8);
 	uint32_t bytes_remaining = (count &amp; 0x00000007);
 	uint32_t bytes_written = 0;
@@ -732,7 +732,7 @@ COMMAND_HANDLER(str9xpec_handle_part_id_command)
 	uint8_t *buffer = NULL;
 	struct jtag_tap *tap;
 	uint32_t idcode;
-	str9xpec_flash_controller_t *str9xpec_info = NULL;
+	struct str9xpec_flash_controller *str9xpec_info = NULL;
 
 	if (argc &lt; 1)
 		return ERROR_COMMAND_SYNTAX_ERROR;
@@ -780,7 +780,7 @@ static int str9xpec_info(struct flash_bank_s *bank, char *buf, int buf_size)
 COMMAND_HANDLER(str9xpec_handle_flash_options_read_command)
 {
 	uint8_t status;
-	str9xpec_flash_controller_t *str9xpec_info = NULL;
+	struct str9xpec_flash_controller *str9xpec_info = NULL;
 
 	if (argc &lt; 1)
 	{
@@ -838,7 +838,7 @@ static int str9xpec_write_options(struct flash_bank_s *bank)
 	struct scan_field field;
 	uint8_t status;
 	struct jtag_tap *tap;
-	str9xpec_flash_controller_t *str9xpec_info = NULL;
+	struct str9xpec_flash_controller *str9xpec_info = NULL;
 
 	str9xpec_info = bank-&gt;driver_priv;
 	tap = str9xpec_info-&gt;tap;
@@ -919,7 +919,7 @@ COMMAND_HANDLER(str9xpec_handle_flash_options_write_command)
 
 COMMAND_HANDLER(str9xpec_handle_flash_options_cmap_command)
 {
-	str9xpec_flash_controller_t *str9xpec_info = NULL;
+	struct str9xpec_flash_controller *str9xpec_info = NULL;
 
 	if (argc &lt; 2)
 	{
@@ -948,7 +948,7 @@ COMMAND_HANDLER(str9xpec_handle_flash_options_cmap_command)
 
 COMMAND_HANDLER(str9xpec_handle_flash_options_lvdthd_command)
 {
-	str9xpec_flash_controller_t *str9xpec_info = NULL;
+	struct str9xpec_flash_controller *str9xpec_info = NULL;
 
 	if (argc &lt; 2)
 	{
@@ -977,7 +977,7 @@ COMMAND_HANDLER(str9xpec_handle_flash_options_lvdthd_command)
 
 COMMAND_HANDLER(str9xpec_handle_flash_options_lvdsel_command)
 {
-	str9xpec_flash_controller_t *str9xpec_info = NULL;
+	struct str9xpec_flash_controller *str9xpec_info = NULL;
 
 	if (argc &lt; 2)
 	{
@@ -1006,7 +1006,7 @@ COMMAND_HANDLER(str9xpec_handle_flash_options_lvdsel_command)
 
 COMMAND_HANDLER(str9xpec_handle_flash_options_lvdwarn_command)
 {
-	str9xpec_flash_controller_t *str9xpec_info = NULL;
+	struct str9xpec_flash_controller *str9xpec_info = NULL;
 
 	if (argc &lt; 2)
 	{
@@ -1084,7 +1084,7 @@ COMMAND_HANDLER(str9xpec_handle_flash_enable_turbo_command)
 	struct jtag_tap *tap0;
 	struct jtag_tap *tap1;
 	struct jtag_tap *tap2;
-	str9xpec_flash_controller_t *str9xpec_info = NULL;
+	struct str9xpec_flash_controller *str9xpec_info = NULL;
 
 	if (argc &lt; 1)
 	{
@@ -1131,7 +1131,7 @@ COMMAND_HANDLER(str9xpec_handle_flash_enable_turbo_command)
 COMMAND_HANDLER(str9xpec_handle_flash_disable_turbo_command)
 {
 	struct jtag_tap *tap;
-	str9xpec_flash_controller_t *str9xpec_info = NULL;
+	struct str9xpec_flash_controller *str9xpec_info = NULL;
 
 	if (argc &lt; 1)
 	{
diff --git a/src/flash/str9xpec.h b/src/flash/str9xpec.h
index ff3b6d9..1c8d41b 100644
--- a/src/flash/str9xpec.h
+++ b/src/flash/str9xpec.h
@@ -26,14 +26,14 @@
 #include &quot;flash.h&quot;
 #include &quot;jtag.h&quot;
 
-typedef struct str9xpec_flash_controller_s
+struct str9xpec_flash_controller
 {
 	struct jtag_tap *tap;
 	uint32_t *sector_bits;
 	int chain_pos;
 	int isc_enable;
 	uint8_t options[8];
-} str9xpec_flash_controller_t;
+};
 
 enum str9xpec_status_codes
 {

commit 6aa82891b60dc4a332ac548c13fc8d207bf171b0
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:39:12 2009 -0800

    str9x_flash_bank_t -&gt; struct str9x_flash_bank
    
    Remove misleading typedef and redundant suffix from struct str9x_flash_bank.

diff --git a/src/flash/str9x.c b/src/flash/str9x.c
index 7117582..77f9ddf 100644
--- a/src/flash/str9x.c
+++ b/src/flash/str9x.c
@@ -35,7 +35,7 @@ static uint32_t bank1start = 0x00080000;
 
 static int str9x_build_block_list(struct flash_bank_s *bank)
 {
-	str9x_flash_bank_t *str9x_info = bank-&gt;driver_priv;
+	struct str9x_flash_bank *str9x_info = bank-&gt;driver_priv;
 
 	int i;
 	int num_sectors;
@@ -118,7 +118,7 @@ static int str9x_build_block_list(struct flash_bank_s *bank)
  */
 FLASH_BANK_COMMAND_HANDLER(str9x_flash_bank_command)
 {
-	str9x_flash_bank_t *str9x_info;
+	struct str9x_flash_bank *str9x_info;
 
 	if (argc &lt; 6)
 	{
@@ -126,7 +126,7 @@ FLASH_BANK_COMMAND_HANDLER(str9x_flash_bank_command)
 		return ERROR_FLASH_BANK_INVALID;
 	}
 
-	str9x_info = malloc(sizeof(str9x_flash_bank_t));
+	str9x_info = malloc(sizeof(struct str9x_flash_bank));
 	bank-&gt;driver_priv = str9x_info;
 
 	str9x_build_block_list(bank);
@@ -139,7 +139,7 @@ FLASH_BANK_COMMAND_HANDLER(str9x_flash_bank_command)
 static int str9x_protect_check(struct flash_bank_s *bank)
 {
 	int retval;
-	str9x_flash_bank_t *str9x_info = bank-&gt;driver_priv;
+	struct str9x_flash_bank *str9x_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 
 	int i;
@@ -348,7 +348,7 @@ static int str9x_protect(struct flash_bank_s *bank,
 static int str9x_write_block(struct flash_bank_s *bank,
 		uint8_t *buffer, uint32_t offset, uint32_t count)
 {
-	str9x_flash_bank_t *str9x_info = bank-&gt;driver_priv;
+	struct str9x_flash_bank *str9x_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 	uint32_t buffer_size = 8192;
 	working_area_t *source;
@@ -632,7 +632,7 @@ static int str9x_info(struct flash_bank_s *bank, char *buf, int buf_size)
 
 COMMAND_HANDLER(str9x_handle_flash_config_command)
 {
-	str9x_flash_bank_t *str9x_info;
+	struct str9x_flash_bank *str9x_info;
 	target_t *target = NULL;
 
 	if (argc &lt; 5)
diff --git a/src/flash/str9x.h b/src/flash/str9x.h
index 8344885..6938514 100644
--- a/src/flash/str9x.h
+++ b/src/flash/str9x.h
@@ -25,13 +25,13 @@
 
 #include &quot;flash.h&quot;
 
-typedef struct str9x_flash_bank_s
+struct str9x_flash_bank
 {
 	uint32_t *sector_bits;
 	int variant;
 	int bank1;
 	working_area_t *write_algorithm;
-} str9x_flash_bank_t;
+};
 
 enum str9x_status_codes
 {

commit 774d71f2cf7bce27a01424fad360cbadebf20459
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:39:09 2009 -0800

    str7x_mem_layout_t -&gt; struct str7x_mem_layout
    
    Remove misleading typedef and redundant suffix from struct str7x_mem_layout.

diff --git a/src/flash/str7x.c b/src/flash/str7x.c
index 5e1c9cb..84a246a 100644
--- a/src/flash/str7x.c
+++ b/src/flash/str7x.c
@@ -29,7 +29,7 @@
 #include &quot;binarybuffer.h&quot;
 
 
-str7x_mem_layout_t mem_layout_str7bank0[] = {
+struct str7x_mem_layout mem_layout_str7bank0[] = {
 	{0x00000000, 0x02000, 0x01},
 	{0x00002000, 0x02000, 0x02},
 	{0x00004000, 0x02000, 0x04},
@@ -40,7 +40,7 @@ str7x_mem_layout_t mem_layout_str7bank0[] = {
 	{0x00030000, 0x10000, 0x80}
 };
 
-str7x_mem_layout_t mem_layout_str7bank1[] = {
+struct str7x_mem_layout mem_layout_str7bank1[] = {
 	{0x00000000, 0x02000, 0x10000},
 	{0x00002000, 0x02000, 0x20000}
 };
diff --git a/src/flash/str7x.h b/src/flash/str7x.h
index 838d46c..ef2d2e3 100644
--- a/src/flash/str7x.h
+++ b/src/flash/str7x.h
@@ -101,10 +101,10 @@ enum str7x_status_codes
 #define FLASH_ERER		0x00000002
 #define FLASH_ERR		0x00000001
 
-typedef struct str7x_mem_layout_s {
+struct str7x_mem_layout {
 	uint32_t sector_start;
 	uint32_t sector_size;
 	uint32_t sector_bit;
-} str7x_mem_layout_t;
+};
 
 #endif /* STR7X_H */

commit 3b09560ae8db9685f03b358709fc63d1bb545628
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:39:06 2009 -0800

    str7x_flash_bank_t -&gt; struct str7x_flash_bank
    
    Remove misleading typedef and redundant suffix from struct str7x_flash_bank.

diff --git a/src/flash/str7x.c b/src/flash/str7x.c
index 1b4056b..5e1c9cb 100644
--- a/src/flash/str7x.c
+++ b/src/flash/str7x.c
@@ -47,13 +47,13 @@ str7x_mem_layout_t mem_layout_str7bank1[] = {
 
 static int str7x_get_flash_adr(struct flash_bank_s *bank, uint32_t reg)
 {
-	str7x_flash_bank_t *str7x_info = bank-&gt;driver_priv;
+	struct str7x_flash_bank *str7x_info = bank-&gt;driver_priv;
 	return (str7x_info-&gt;register_base | reg);
 }
 
 static int str7x_build_block_list(struct flash_bank_s *bank)
 {
-	str7x_flash_bank_t *str7x_info = bank-&gt;driver_priv;
+	struct str7x_flash_bank *str7x_info = bank-&gt;driver_priv;
 
 	int i;
 	int num_sectors;
@@ -111,7 +111,7 @@ static int str7x_build_block_list(struct flash_bank_s *bank)
  */
 FLASH_BANK_COMMAND_HANDLER(str7x_flash_bank_command)
 {
-	str7x_flash_bank_t *str7x_info;
+	struct str7x_flash_bank *str7x_info;
 
 	if (argc &lt; 7)
 	{
@@ -119,7 +119,7 @@ FLASH_BANK_COMMAND_HANDLER(str7x_flash_bank_command)
 		return ERROR_FLASH_BANK_INVALID;
 	}
 
-	str7x_info = malloc(sizeof(str7x_flash_bank_t));
+	str7x_info = malloc(sizeof(struct str7x_flash_bank));
 	bank-&gt;driver_priv = str7x_info;
 
 	/* set default bits for str71x flash */
@@ -176,7 +176,7 @@ static uint32_t str7x_result(struct flash_bank_s *bank)
 
 static int str7x_protect_check(struct flash_bank_s *bank)
 {
-	str7x_flash_bank_t *str7x_info = bank-&gt;driver_priv;
+	struct str7x_flash_bank *str7x_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 
 	int i;
@@ -203,7 +203,7 @@ static int str7x_protect_check(struct flash_bank_s *bank)
 
 static int str7x_erase(struct flash_bank_s *bank, int first, int last)
 {
-	str7x_flash_bank_t *str7x_info = bank-&gt;driver_priv;
+	struct str7x_flash_bank *str7x_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 
 	int i;
@@ -256,7 +256,7 @@ static int str7x_erase(struct flash_bank_s *bank, int first, int last)
 
 static int str7x_protect(struct flash_bank_s *bank, int set, int first, int last)
 {
-	str7x_flash_bank_t *str7x_info = bank-&gt;driver_priv;
+	struct str7x_flash_bank *str7x_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 	int i;
 	uint32_t cmd;
@@ -310,7 +310,7 @@ static int str7x_protect(struct flash_bank_s *bank, int set, int first, int last
 
 static int str7x_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
-	str7x_flash_bank_t *str7x_info = bank-&gt;driver_priv;
+	struct str7x_flash_bank *str7x_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 	uint32_t buffer_size = 8192;
 	working_area_t *source;
@@ -426,7 +426,7 @@ static int str7x_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint32_
 static int str7x_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
 	target_t *target = bank-&gt;target;
-	str7x_flash_bank_t *str7x_info = bank-&gt;driver_priv;
+	struct str7x_flash_bank *str7x_info = bank-&gt;driver_priv;
 	uint32_t dwords_remaining = (count / 8);
 	uint32_t bytes_remaining = (count &amp; 0x00000007);
 	uint32_t address = bank-&gt;base + offset;
@@ -604,7 +604,7 @@ static int str7x_info(struct flash_bank_s *bank, char *buf, int buf_size)
 COMMAND_HANDLER(str7x_handle_disable_jtag_command)
 {
 	target_t *target = NULL;
-	str7x_flash_bank_t *str7x_info = NULL;
+	struct str7x_flash_bank *str7x_info = NULL;
 
 	uint32_t flash_cmd;
 	uint16_t ProtectionLevel = 0;
diff --git a/src/flash/str7x.h b/src/flash/str7x.h
index ecbbc76..838d46c 100644
--- a/src/flash/str7x.h
+++ b/src/flash/str7x.h
@@ -25,14 +25,14 @@
 
 #include &quot;flash.h&quot;
 
-typedef struct str7x_flash_bank_s
+struct str7x_flash_bank
 {
 	uint32_t *sector_bits;
 	uint32_t disable_bit;
 	uint32_t busy_bits;
 	uint32_t register_base;
 	working_area_t *write_algorithm;
-} str7x_flash_bank_t;
+};
 
 enum str7x_status_codes
 {

commit 01b10d65bfcc6eb9a3994b20b1342389edda2df0
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:39:03 2009 -0800

    stm32x_mem_layout_t -&gt; struct stm32x_mem_layout
    
    Remove misleading typedef and redundant suffix from struct stm32x_mem_layout.

diff --git a/src/flash/stm32x.h b/src/flash/stm32x.h
index 471b633..9e1e5b1 100644
--- a/src/flash/stm32x.h
+++ b/src/flash/stm32x.h
@@ -93,9 +93,9 @@ struct stm32x_flash_bank
 #define KEY1			0x45670123
 #define KEY2			0xCDEF89AB
 
-typedef struct stm32x_mem_layout_s {
+struct stm32x_mem_layout {
 	uint32_t sector_start;
 	uint32_t sector_size;
-} stm32x_mem_layout_t;
+};
 
 #endif /* STM32X_H */

commit c7b2cad52dbc59b53d6f1734a443d3ad5e826a42
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:39:01 2009 -0800

    stm32x_flash_bank_t -&gt; struct stm32x_flash_bank
    
    Remove misleading typedef and redundant suffix from struct stm32x_flash_bank.

diff --git a/src/flash/stm32x.c b/src/flash/stm32x.c
index eab9708..1b2486d 100644
--- a/src/flash/stm32x.c
+++ b/src/flash/stm32x.c
@@ -35,7 +35,7 @@ static int stm32x_mass_erase(struct flash_bank_s *bank);
  */
 FLASH_BANK_COMMAND_HANDLER(stm32x_flash_bank_command)
 {
-	stm32x_flash_bank_t *stm32x_info;
+	struct stm32x_flash_bank *stm32x_info;
 
 	if (argc &lt; 6)
 	{
@@ -43,7 +43,7 @@ FLASH_BANK_COMMAND_HANDLER(stm32x_flash_bank_command)
 		return ERROR_FLASH_BANK_INVALID;
 	}
 
-	stm32x_info = malloc(sizeof(stm32x_flash_bank_t));
+	stm32x_info = malloc(sizeof(struct stm32x_flash_bank));
 	bank-&gt;driver_priv = stm32x_info;
 
 	stm32x_info-&gt;write_algorithm = NULL;
@@ -84,7 +84,7 @@ static uint32_t stm32x_wait_status_busy(flash_bank_t *bank, int timeout)
 static int stm32x_read_options(struct flash_bank_s *bank)
 {
 	uint32_t optiondata;
-	stm32x_flash_bank_t *stm32x_info = NULL;
+	struct stm32x_flash_bank *stm32x_info = NULL;
 	target_t *target = bank-&gt;target;
 
 	stm32x_info = bank-&gt;driver_priv;
@@ -111,7 +111,7 @@ static int stm32x_read_options(struct flash_bank_s *bank)
 
 static int stm32x_erase_options(struct flash_bank_s *bank)
 {
-	stm32x_flash_bank_t *stm32x_info = NULL;
+	struct stm32x_flash_bank *stm32x_info = NULL;
 	target_t *target = bank-&gt;target;
 	uint32_t status;
 
@@ -148,7 +148,7 @@ static int stm32x_erase_options(struct flash_bank_s *bank)
 
 static int stm32x_write_options(struct flash_bank_s *bank)
 {
-	stm32x_flash_bank_t *stm32x_info = NULL;
+	struct stm32x_flash_bank *stm32x_info = NULL;
 	target_t *target = bank-&gt;target;
 	uint32_t status;
 
@@ -233,7 +233,7 @@ static int stm32x_write_options(struct flash_bank_s *bank)
 static int stm32x_protect_check(struct flash_bank_s *bank)
 {
 	target_t *target = bank-&gt;target;
-	stm32x_flash_bank_t *stm32x_info = bank-&gt;driver_priv;
+	struct stm32x_flash_bank *stm32x_info = bank-&gt;driver_priv;
 
 	uint32_t protection;
 	int i, s;
@@ -345,7 +345,7 @@ static int stm32x_erase(struct flash_bank_s *bank, int first, int last)
 
 static int stm32x_protect(struct flash_bank_s *bank, int set, int first, int last)
 {
-	stm32x_flash_bank_t *stm32x_info = NULL;
+	struct stm32x_flash_bank *stm32x_info = NULL;
 	target_t *target = bank-&gt;target;
 	uint16_t prot_reg[4] = {0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF};
 	int i, reg, bit;
@@ -432,7 +432,7 @@ static int stm32x_protect(struct flash_bank_s *bank, int set, int first, int las
 
 static int stm32x_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
-	stm32x_flash_bank_t *stm32x_info = bank-&gt;driver_priv;
+	struct stm32x_flash_bank *stm32x_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 	uint32_t buffer_size = 16384;
 	working_area_t *source;
@@ -657,7 +657,7 @@ static int stm32x_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t off
 static int stm32x_probe(struct flash_bank_s *bank)
 {
 	target_t *target = bank-&gt;target;
-	stm32x_flash_bank_t *stm32x_info = bank-&gt;driver_priv;
+	struct stm32x_flash_bank *stm32x_info = bank-&gt;driver_priv;
 	int i;
 	uint16_t num_pages;
 	uint32_t device_id;
@@ -773,7 +773,7 @@ static int stm32x_probe(struct flash_bank_s *bank)
 
 static int stm32x_auto_probe(struct flash_bank_s *bank)
 {
-	stm32x_flash_bank_t *stm32x_info = bank-&gt;driver_priv;
+	struct stm32x_flash_bank *stm32x_info = bank-&gt;driver_priv;
 	if (stm32x_info-&gt;probed)
 		return ERROR_OK;
 	return stm32x_probe(bank);
@@ -895,7 +895,7 @@ static int stm32x_info(struct flash_bank_s *bank, char *buf, int buf_size)
 COMMAND_HANDLER(stm32x_handle_lock_command)
 {
 	target_t *target = NULL;
-	stm32x_flash_bank_t *stm32x_info = NULL;
+	struct stm32x_flash_bank *stm32x_info = NULL;
 
 	if (argc &lt; 1)
 	{
@@ -941,7 +941,7 @@ COMMAND_HANDLER(stm32x_handle_lock_command)
 COMMAND_HANDLER(stm32x_handle_unlock_command)
 {
 	target_t *target = NULL;
-	stm32x_flash_bank_t *stm32x_info = NULL;
+	struct stm32x_flash_bank *stm32x_info = NULL;
 
 	if (argc &lt; 1)
 	{
@@ -985,7 +985,7 @@ COMMAND_HANDLER(stm32x_handle_options_read_command)
 {
 	uint32_t optionbyte;
 	target_t *target = NULL;
-	stm32x_flash_bank_t *stm32x_info = NULL;
+	struct stm32x_flash_bank *stm32x_info = NULL;
 
 	if (argc &lt; 1)
 	{
@@ -1040,7 +1040,7 @@ COMMAND_HANDLER(stm32x_handle_options_read_command)
 COMMAND_HANDLER(stm32x_handle_options_write_command)
 {
 	target_t *target = NULL;
-	stm32x_flash_bank_t *stm32x_info = NULL;
+	struct stm32x_flash_bank *stm32x_info = NULL;
 	uint16_t optionbyte = 0xF8;
 
 	if (argc &lt; 4)
diff --git a/src/flash/stm32x.h b/src/flash/stm32x.h
index 6011762..471b633 100644
--- a/src/flash/stm32x.h
+++ b/src/flash/stm32x.h
@@ -32,13 +32,13 @@ struct stm32x_options
 	uint16_t protection[4];
 };
 
-typedef struct stm32x_flash_bank_s
+struct stm32x_flash_bank
 {
 	struct stm32x_options option_bytes;
 	working_area_t *write_algorithm;
 	int ppage_size;
 	int probed;
-} stm32x_flash_bank_t;
+};
 
 /* stm32x register locations */
 

commit 40273967bf535aefb3eaec9367c50e7799b079bb
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:38:58 2009 -0800

    stm32x_options_t -&gt; struct stm32x_options
    
    Remove misleading typedef and redundant suffix from struct stm32x_options.

diff --git a/src/flash/stm32x.h b/src/flash/stm32x.h
index 5111466..6011762 100644
--- a/src/flash/stm32x.h
+++ b/src/flash/stm32x.h
@@ -25,16 +25,16 @@
 
 #include &quot;flash.h&quot;
 
-typedef struct stm32x_options_s
+struct stm32x_options
 {
 	uint16_t RDP;
 	uint16_t user_options;
 	uint16_t protection[4];
-} stm32x_options_t;
+};
 
 typedef struct stm32x_flash_bank_s
 {
-	stm32x_options_t option_bytes;
+	struct stm32x_options option_bytes;
 	working_area_t *write_algorithm;
 	int ppage_size;
 	int probed;

commit 9059f9f28e4d88c9608ef92723bbd493e106ba67
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:38:55 2009 -0800

    stellaris_flash_bank_t -&gt; struct stellaris_flash_bank
    
    Remove misleading typedef and redundant suffix from struct stellaris_flash_bank.

diff --git a/src/flash/stellaris.c b/src/flash/stellaris.c
index 9bd329d..7799800 100644
--- a/src/flash/stellaris.c
+++ b/src/flash/stellaris.c
@@ -215,7 +215,7 @@ static char * StellarisClassname[5] =
  */
 FLASH_BANK_COMMAND_HANDLER(stellaris_flash_bank_command)
 {
-	stellaris_flash_bank_t *stellaris_info;
+	struct stellaris_flash_bank *stellaris_info;
 
 	if (argc &lt; 6)
 	{
@@ -223,7 +223,7 @@ FLASH_BANK_COMMAND_HANDLER(stellaris_flash_bank_command)
 		return ERROR_FLASH_BANK_INVALID;
 	}
 
-	stellaris_info = calloc(sizeof(stellaris_flash_bank_t), 1);
+	stellaris_info = calloc(sizeof(struct stellaris_flash_bank), 1);
 	bank-&gt;base = 0x0;
 	bank-&gt;driver_priv = stellaris_info;
 
@@ -242,7 +242,7 @@ FLASH_BANK_COMMAND_HANDLER(stellaris_flash_bank_command)
 static int stellaris_info(struct flash_bank_s *bank, char *buf, int buf_size)
 {
 	int printed, device_class;
-	stellaris_flash_bank_t *stellaris_info = bank-&gt;driver_priv;
+	struct stellaris_flash_bank *stellaris_info = bank-&gt;driver_priv;
 
 	stellaris_read_part_info(bank);
 
@@ -363,7 +363,7 @@ static const unsigned rcc_xtal[32] = {
 
 static void stellaris_read_clock_info(flash_bank_t *bank)
 {
-	stellaris_flash_bank_t *stellaris_info = bank-&gt;driver_priv;
+	struct stellaris_flash_bank *stellaris_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 	uint32_t rcc, rcc2, pllcfg, sysdiv, usesysdiv, bypass, oscsrc;
 	unsigned xtal;
@@ -450,7 +450,7 @@ static void stellaris_read_clock_info(flash_bank_t *bank)
 /* Setup the timimg registers */
 static void stellaris_set_flash_mode(flash_bank_t *bank,int mode)
 {
-	stellaris_flash_bank_t *stellaris_info = bank-&gt;driver_priv;
+	struct stellaris_flash_bank *stellaris_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 
 	uint32_t usecrl = (stellaris_info-&gt;mck_freq/1000000ul-1);
@@ -497,7 +497,7 @@ static int stellaris_flash_command(struct flash_bank_s *bank,uint8_t cmd,uint16_
 /* Read device id register, main clock frequency register and fill in driver info structure */
 static int stellaris_read_part_info(struct flash_bank_s *bank)
 {
-	stellaris_flash_bank_t *stellaris_info = bank-&gt;driver_priv;
+	struct stellaris_flash_bank *stellaris_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 	uint32_t did0, did1, ver, fam, status;
 	int i;
@@ -617,7 +617,7 @@ static int stellaris_protect_check(struct flash_bank_s *bank)
 {
 	uint32_t status;
 
-	stellaris_flash_bank_t *stellaris_info = bank-&gt;driver_priv;
+	struct stellaris_flash_bank *stellaris_info = bank-&gt;driver_priv;
 
 	if (bank-&gt;target-&gt;state != TARGET_HALTED)
 	{
@@ -646,7 +646,7 @@ static int stellaris_erase(struct flash_bank_s *bank, int first, int last)
 {
 	int banknr;
 	uint32_t flash_fmc, flash_cris;
-	stellaris_flash_bank_t *stellaris_info = bank-&gt;driver_priv;
+	struct stellaris_flash_bank *stellaris_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 
 	if (bank-&gt;target-&gt;state != TARGET_HALTED)
@@ -717,7 +717,7 @@ static int stellaris_protect(struct flash_bank_s *bank, int set, int first, int
 	uint32_t fmppe, flash_fmc, flash_cris;
 	int lockregion;
 
-	stellaris_flash_bank_t *stellaris_info = bank-&gt;driver_priv;
+	struct stellaris_flash_bank *stellaris_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 
 	if (bank-&gt;target-&gt;state != TARGET_HALTED)
@@ -910,7 +910,7 @@ static int stellaris_write_block(struct flash_bank_s *bank, uint8_t *buffer, uin
 
 static int stellaris_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
-	stellaris_flash_bank_t *stellaris_info = bank-&gt;driver_priv;
+	struct stellaris_flash_bank *stellaris_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 	uint32_t address = offset;
 	uint32_t flash_cris, flash_fmc;
@@ -1061,7 +1061,7 @@ static int stellaris_probe(struct flash_bank_s *bank)
 
 static int stellaris_auto_probe(struct flash_bank_s *bank)
 {
-	stellaris_flash_bank_t *stellaris_info = bank-&gt;driver_priv;
+	struct stellaris_flash_bank *stellaris_info = bank-&gt;driver_priv;
 	if (stellaris_info-&gt;did1)
 		return ERROR_OK;
 	return stellaris_probe(bank);
@@ -1070,7 +1070,7 @@ static int stellaris_auto_probe(struct flash_bank_s *bank)
 static int stellaris_mass_erase(struct flash_bank_s *bank)
 {
 	target_t *target = NULL;
-	stellaris_flash_bank_t *stellaris_info = NULL;
+	struct stellaris_flash_bank *stellaris_info = NULL;
 	uint32_t flash_fmc;
 
 	stellaris_info = bank-&gt;driver_priv;
diff --git a/src/flash/stellaris.h b/src/flash/stellaris.h
index eaf3d48..949a346 100644
--- a/src/flash/stellaris.h
+++ b/src/flash/stellaris.h
@@ -22,7 +22,7 @@
 
 #include &quot;flash.h&quot;
 
-typedef struct stellaris_flash_bank_s
+struct stellaris_flash_bank
 {
 	/* chip id register */
 	uint32_t did0;
@@ -52,7 +52,7 @@ typedef struct stellaris_flash_bank_s
 	uint32_t mck_freq;
 	const char *iosc_desc;
 	const char *mck_desc;
-} stellaris_flash_bank_t;
+};
 
 /* STELLARIS control registers */
 #define SCB_BASE	0x400FE000

commit ed9c4ef3c41ac21d0a08cb7e07ab68d0c7930138
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:38:52 2009 -0800

    s3c24xx_nand_controller_t -&gt; struct s3c24xx_nand_controller
    
    Remove misleading typedef and redundant suffix from struct s3c24xx_nand_controller.

diff --git a/src/flash/s3c2410_nand.c b/src/flash/s3c2410_nand.c
index c57fe93..4d08440 100644
--- a/src/flash/s3c2410_nand.c
+++ b/src/flash/s3c2410_nand.c
@@ -32,7 +32,7 @@
 
 NAND_DEVICE_COMMAND_HANDLER(s3c2410_nand_device_command)
 {
-	s3c24xx_nand_controller_t *info;
+	struct s3c24xx_nand_controller *info;
 	CALL_S3C24XX_DEVICE_COMMAND(nand, &amp;info);
 
 	/* fill in the address fields for the core device */
@@ -46,7 +46,7 @@ NAND_DEVICE_COMMAND_HANDLER(s3c2410_nand_device_command)
 
 static int s3c2410_init(struct nand_device_s *nand)
 {
-	s3c24xx_nand_controller_t *s3c24xx_info = nand-&gt;controller_priv;
+	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
 	target_t *target = s3c24xx_info-&gt;target;
 
 	target_write_u32(target, S3C2410_NFCONF,
@@ -58,7 +58,7 @@ static int s3c2410_init(struct nand_device_s *nand)
 
 static int s3c2410_write_data(struct nand_device_s *nand, uint16_t data)
 {
-	s3c24xx_nand_controller_t *s3c24xx_info = nand-&gt;controller_priv;
+	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
 	target_t *target = s3c24xx_info-&gt;target;
 
 	if (target-&gt;state != TARGET_HALTED) {
@@ -72,7 +72,7 @@ static int s3c2410_write_data(struct nand_device_s *nand, uint16_t data)
 
 static int s3c2410_read_data(struct nand_device_s *nand, void *data)
 {
-	s3c24xx_nand_controller_t *s3c24xx_info = nand-&gt;controller_priv;
+	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
 	target_t *target = s3c24xx_info-&gt;target;
 
 	if (target-&gt;state != TARGET_HALTED) {
@@ -86,7 +86,7 @@ static int s3c2410_read_data(struct nand_device_s *nand, void *data)
 
 static int s3c2410_nand_ready(struct nand_device_s *nand, int timeout)
 {
-	s3c24xx_nand_controller_t *s3c24xx_info = nand-&gt;controller_priv;
+	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
 	target_t *target = s3c24xx_info-&gt;target;
 	uint8_t status;
 
diff --git a/src/flash/s3c2412_nand.c b/src/flash/s3c2412_nand.c
index b41705d..9f456fe 100644
--- a/src/flash/s3c2412_nand.c
+++ b/src/flash/s3c2412_nand.c
@@ -32,7 +32,7 @@
 
 NAND_DEVICE_COMMAND_HANDLER(s3c2412_nand_device_command)
 {
-	s3c24xx_nand_controller_t *info;
+	struct s3c24xx_nand_controller *info;
 	CALL_S3C24XX_DEVICE_COMMAND(nand, &amp;info);
 
 	/* fill in the address fields for the core device */
@@ -46,7 +46,7 @@ NAND_DEVICE_COMMAND_HANDLER(s3c2412_nand_device_command)
 
 static int s3c2412_init(struct nand_device_s *nand)
 {
-	s3c24xx_nand_controller_t *s3c24xx_info = nand-&gt;controller_priv;
+	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
 	target_t *target = s3c24xx_info-&gt;target;
 
 	target_write_u32(target, S3C2410_NFCONF,
diff --git a/src/flash/s3c2440_nand.c b/src/flash/s3c2440_nand.c
index 8c05687..40037c7 100644
--- a/src/flash/s3c2440_nand.c
+++ b/src/flash/s3c2440_nand.c
@@ -33,7 +33,7 @@
 
 NAND_DEVICE_COMMAND_HANDLER(s3c2440_nand_device_command)
 {
-	s3c24xx_nand_controller_t *info;
+	struct s3c24xx_nand_controller *info;
 	CALL_S3C24XX_DEVICE_COMMAND(nand, &amp;info);
 
 	/* fill in the address fields for the core device */
@@ -47,7 +47,7 @@ NAND_DEVICE_COMMAND_HANDLER(s3c2440_nand_device_command)
 
 static int s3c2440_init(struct nand_device_s *nand)
 {
-	s3c24xx_nand_controller_t *s3c24xx_info = nand-&gt;controller_priv;
+	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
 	target_t *target = s3c24xx_info-&gt;target;
 
 	target_write_u32(target, S3C2410_NFCONF,
@@ -63,7 +63,7 @@ static int s3c2440_init(struct nand_device_s *nand)
 
 int s3c2440_nand_ready(struct nand_device_s *nand, int timeout)
 {
-	s3c24xx_nand_controller_t *s3c24xx_info = nand-&gt;controller_priv;
+	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
 	target_t *target = s3c24xx_info-&gt;target;
 	uint8_t status;
 
@@ -89,7 +89,7 @@ int s3c2440_nand_ready(struct nand_device_s *nand, int timeout)
 
 int s3c2440_read_block_data(struct nand_device_s *nand, uint8_t *data, int data_size)
 {
-	s3c24xx_nand_controller_t *s3c24xx_info = nand-&gt;controller_priv;
+	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
 	target_t *target = s3c24xx_info-&gt;target;
 	uint32_t nfdata = s3c24xx_info-&gt;data;
 	uint32_t tmp;
@@ -125,7 +125,7 @@ int s3c2440_read_block_data(struct nand_device_s *nand, uint8_t *data, int data_
 
 int s3c2440_write_block_data(struct nand_device_s *nand, uint8_t *data, int data_size)
 {
-	s3c24xx_nand_controller_t *s3c24xx_info = nand-&gt;controller_priv;
+	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
 	target_t *target = s3c24xx_info-&gt;target;
 	uint32_t nfdata = s3c24xx_info-&gt;data;
 	uint32_t tmp;
diff --git a/src/flash/s3c2443_nand.c b/src/flash/s3c2443_nand.c
index 30549f6..0f08644 100644
--- a/src/flash/s3c2443_nand.c
+++ b/src/flash/s3c2443_nand.c
@@ -33,7 +33,7 @@
 
 NAND_DEVICE_COMMAND_HANDLER(s3c2443_nand_device_command)
 {
-	s3c24xx_nand_controller_t *info;
+	struct s3c24xx_nand_controller *info;
 	CALL_S3C24XX_DEVICE_COMMAND(nand, &amp;info);
 
 	/* fill in the address fields for the core device */
@@ -47,7 +47,7 @@ NAND_DEVICE_COMMAND_HANDLER(s3c2443_nand_device_command)
 
 static int s3c2443_init(struct nand_device_s *nand)
 {
-	s3c24xx_nand_controller_t *s3c24xx_info = nand-&gt;controller_priv;
+	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
 	target_t *target = s3c24xx_info-&gt;target;
 
 	target_write_u32(target, S3C2410_NFCONF,
diff --git a/src/flash/s3c24xx_nand.c b/src/flash/s3c24xx_nand.c
index e2bc005..17de5d4 100644
--- a/src/flash/s3c24xx_nand.c
+++ b/src/flash/s3c24xx_nand.c
@@ -33,9 +33,9 @@
 
 S3C24XX_DEVICE_COMMAND()
 {
-	s3c24xx_nand_controller_t *s3c24xx_info;
+	struct s3c24xx_nand_controller *s3c24xx_info;
 
-	s3c24xx_info = malloc(sizeof(s3c24xx_nand_controller_t));
+	s3c24xx_info = malloc(sizeof(struct s3c24xx_nand_controller));
 	if (s3c24xx_info == NULL) {
 		LOG_ERROR(&quot;no memory for nand controller\n&quot;);
 		return -ENOMEM;
@@ -59,7 +59,7 @@ int s3c24xx_register_commands(struct command_context_s *cmd_ctx)
 
 int s3c24xx_reset(struct nand_device_s *nand)
 {
-	s3c24xx_nand_controller_t *s3c24xx_info = nand-&gt;controller_priv;
+	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
 	target_t *target = s3c24xx_info-&gt;target;
 
 	if (target-&gt;state != TARGET_HALTED) {
@@ -74,7 +74,7 @@ int s3c24xx_reset(struct nand_device_s *nand)
 
 int s3c24xx_command(struct nand_device_s *nand, uint8_t command)
 {
-	s3c24xx_nand_controller_t *s3c24xx_info = nand-&gt;controller_priv;
+	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
 	target_t *target = s3c24xx_info-&gt;target;
 
 	if (target-&gt;state != TARGET_HALTED) {
@@ -89,7 +89,7 @@ int s3c24xx_command(struct nand_device_s *nand, uint8_t command)
 
 int s3c24xx_address(struct nand_device_s *nand, uint8_t address)
 {
-	s3c24xx_nand_controller_t *s3c24xx_info = nand-&gt;controller_priv;
+	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
 	target_t *target = s3c24xx_info-&gt;target;
 
 	if (target-&gt;state != TARGET_HALTED) {
@@ -103,7 +103,7 @@ int s3c24xx_address(struct nand_device_s *nand, uint8_t address)
 
 int s3c24xx_write_data(struct nand_device_s *nand, uint16_t data)
 {
-	s3c24xx_nand_controller_t *s3c24xx_info = nand-&gt;controller_priv;
+	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
 	target_t *target = s3c24xx_info-&gt;target;
 
 	if (target-&gt;state != TARGET_HALTED) {
@@ -117,7 +117,7 @@ int s3c24xx_write_data(struct nand_device_s *nand, uint16_t data)
 
 int s3c24xx_read_data(struct nand_device_s *nand, void *data)
 {
-	s3c24xx_nand_controller_t *s3c24xx_info = nand-&gt;controller_priv;
+	struct s3c24xx_nand_controller *s3c24xx_info = nand-&gt;controller_priv;
 	target_t *target = s3c24xx_info-&gt;target;
 
 	if (target-&gt;state != TARGET_HALTED) {
diff --git a/src/flash/s3c24xx_nand.h b/src/flash/s3c24xx_nand.h
index 3f304a9..6cfad3d 100644
--- a/src/flash/s3c24xx_nand.h
+++ b/src/flash/s3c24xx_nand.h
@@ -30,7 +30,7 @@
 #include &quot;nand.h&quot;
 #include &quot;s3c24xx_regs_nand.h&quot;
 
-typedef struct s3c24xx_nand_controller_s
+struct s3c24xx_nand_controller
 {
 	struct target_s *target;
 
@@ -39,7 +39,7 @@ typedef struct s3c24xx_nand_controller_s
 	uint32_t		 addr;
 	uint32_t		 data;
 	uint32_t		 nfstat;
-} s3c24xx_nand_controller_t;
+};
 
 /* Default to using the un-translated NAND register based address */
 #undef S3C2410_NFREG
@@ -48,7 +48,7 @@ typedef struct s3c24xx_nand_controller_s
 #define S3C24XX_DEVICE_COMMAND() \
 		COMMAND_HELPER(s3c24xx_nand_device_command, \
 				struct nand_device_s *nand, \
-				s3c24xx_nand_controller_t **info)
+				struct s3c24xx_nand_controller **info)
 
 S3C24XX_DEVICE_COMMAND();
 

commit eba5608b5227696e00437543c0226ed04cae12d5
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:38:50 2009 -0800

    pic32mx_flash_bank_t -&gt; struct pic32mx_flash_bank
    
    Remove misleading typedef and redundant suffix from struct pic32mx_flash_bank.

diff --git a/src/flash/pic32mx.c b/src/flash/pic32mx.c
index 18dfa97..3248127 100644
--- a/src/flash/pic32mx.c
+++ b/src/flash/pic32mx.c
@@ -64,7 +64,7 @@ static int pic32mx_write_word(struct flash_bank_s *bank, uint32_t address, uint3
  */
 FLASH_BANK_COMMAND_HANDLER(pic32mx_flash_bank_command)
 {
-	pic32mx_flash_bank_t *pic32mx_info;
+	struct pic32mx_flash_bank *pic32mx_info;
 
 	if (argc &lt; 6)
 	{
@@ -72,7 +72,7 @@ FLASH_BANK_COMMAND_HANDLER(pic32mx_flash_bank_command)
 		return ERROR_FLASH_BANK_INVALID;
 	}
 
-	pic32mx_info = malloc(sizeof(pic32mx_flash_bank_t));
+	pic32mx_info = malloc(sizeof(struct pic32mx_flash_bank));
 	bank-&gt;driver_priv = pic32mx_info;
 
 	pic32mx_info-&gt;write_algorithm = NULL;
@@ -207,7 +207,7 @@ static int pic32mx_erase(struct flash_bank_s *bank, int first, int last)
 
 static int pic32mx_protect(struct flash_bank_s *bank, int set, int first, int last)
 {
-	pic32mx_flash_bank_t *pic32mx_info = NULL;
+	struct pic32mx_flash_bank *pic32mx_info = NULL;
 	target_t *target = bank-&gt;target;
 #if 0
 	uint16_t prot_reg[4] = {0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF};
@@ -306,7 +306,7 @@ static int pic32mx_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint3
 	uint32_t address = bank-&gt;base + offset;
 	int retval = ERROR_OK;
 #if 0
-	pic32mx_flash_bank_t *pic32mx_info = bank-&gt;driver_priv;
+	struct pic32mx_flash_bank *pic32mx_info = bank-&gt;driver_priv;
 	armv7m_algorithm_t armv7m_info;
 
 	uint8_t pic32mx_flash_write_code[] = {
@@ -542,7 +542,7 @@ static int pic32mx_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t of
 static int pic32mx_probe(struct flash_bank_s *bank)
 {
 	target_t *target = bank-&gt;target;
-	pic32mx_flash_bank_t *pic32mx_info = bank-&gt;driver_priv;
+	struct pic32mx_flash_bank *pic32mx_info = bank-&gt;driver_priv;
 	mips32_common_t *mips32 = target-&gt;arch_info;
 	mips_ejtag_t *ejtag_info = &amp;mips32-&gt;ejtag_info;
 	int i;
@@ -624,7 +624,7 @@ static int pic32mx_probe(struct flash_bank_s *bank)
 
 static int pic32mx_auto_probe(struct flash_bank_s *bank)
 {
-	pic32mx_flash_bank_t *pic32mx_info = bank-&gt;driver_priv;
+	struct pic32mx_flash_bank *pic32mx_info = bank-&gt;driver_priv;
 	if (pic32mx_info-&gt;probed)
 		return ERROR_OK;
 	return pic32mx_probe(bank);
@@ -675,7 +675,7 @@ static int pic32mx_info(struct flash_bank_s *bank, char *buf, int buf_size)
 COMMAND_HANDLER(pic32mx_handle_lock_command)
 {
 	target_t *target = NULL;
-	pic32mx_flash_bank_t *pic32mx_info = NULL;
+	struct pic32mx_flash_bank *pic32mx_info = NULL;
 
 	if (argc &lt; 1)
 	{
@@ -721,7 +721,7 @@ COMMAND_HANDLER(pic32mx_handle_lock_command)
 COMMAND_HANDLER(pic32mx_handle_unlock_command)
 {
 	target_t *target = NULL;
-	pic32mx_flash_bank_t *pic32mx_info = NULL;
+	struct pic32mx_flash_bank *pic32mx_info = NULL;
 
 	if (argc &lt; 1)
 	{
diff --git a/src/flash/pic32mx.h b/src/flash/pic32mx.h
index b1c4ef2..4ece7d0 100644
--- a/src/flash/pic32mx.h
+++ b/src/flash/pic32mx.h
@@ -28,13 +28,13 @@
 
 #include &quot;flash.h&quot;
 
-typedef struct pic32mx_flash_bank_s
+struct pic32mx_flash_bank
 {
 	working_area_t *write_algorithm;
 	int devid;
 	int ppage_size;
 	int probed;
-} pic32mx_flash_bank_t;
+};
 
 #define PIC32MX_MANUF_ID	0x029
 

commit 5948e66ee8f2331606c2adce439c5d7ebc77d51f
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:38:47 2009 -0800

    orion_nand_controller_t -&gt; struct orion_nand_controller
    
    Remove misleading typedef and redundant suffix from struct orion_nand_controller.

diff --git a/src/flash/orion_nand.c b/src/flash/orion_nand.c
index 03280c1..82c717a 100644
--- a/src/flash/orion_nand.c
+++ b/src/flash/orion_nand.c
@@ -30,7 +30,7 @@
 #include &quot;armv4_5.h&quot;
 
 
-typedef struct orion_nand_controller_s
+struct orion_nand_controller
 {
 	struct target_s	*target;
 
@@ -39,7 +39,7 @@ typedef struct orion_nand_controller_s
 	uint32_t		cmd;
 	uint32_t		addr;
 	uint32_t		data;
-} orion_nand_controller_t;
+};
 
 #define CHECK_HALTED \
 	do { \
@@ -51,7 +51,7 @@ typedef struct orion_nand_controller_s
 
 static int orion_nand_command(struct nand_device_s *nand, uint8_t command)
 {
-	orion_nand_controller_t *hw = nand-&gt;controller_priv;
+	struct orion_nand_controller *hw = nand-&gt;controller_priv;
 	target_t *target = hw-&gt;target;
 
 	CHECK_HALTED;
@@ -61,7 +61,7 @@ static int orion_nand_command(struct nand_device_s *nand, uint8_t command)
 
 static int orion_nand_address(struct nand_device_s *nand, uint8_t address)
 {
-	orion_nand_controller_t *hw = nand-&gt;controller_priv;
+	struct orion_nand_controller *hw = nand-&gt;controller_priv;
 	target_t *target = hw-&gt;target;
 
 	CHECK_HALTED;
@@ -71,7 +71,7 @@ static int orion_nand_address(struct nand_device_s *nand, uint8_t address)
 
 static int orion_nand_read(struct nand_device_s *nand, void *data)
 {
-	orion_nand_controller_t *hw = nand-&gt;controller_priv;
+	struct orion_nand_controller *hw = nand-&gt;controller_priv;
 	target_t *target = hw-&gt;target;
 
 	CHECK_HALTED;
@@ -81,7 +81,7 @@ static int orion_nand_read(struct nand_device_s *nand, void *data)
 
 static int orion_nand_write(struct nand_device_s *nand, uint16_t data)
 {
-	orion_nand_controller_t *hw = nand-&gt;controller_priv;
+	struct orion_nand_controller *hw = nand-&gt;controller_priv;
 	target_t *target = hw-&gt;target;
 
 	CHECK_HALTED;
@@ -98,7 +98,7 @@ static int orion_nand_slow_block_write(struct nand_device_s *nand, uint8_t *data
 
 static int orion_nand_fast_block_write(struct nand_device_s *nand, uint8_t *data, int size)
 {
-	orion_nand_controller_t *hw = nand-&gt;controller_priv;
+	struct orion_nand_controller *hw = nand-&gt;controller_priv;
 	int retval;
 
 	hw-&gt;io.chunk_size = nand-&gt;page_size;
@@ -127,7 +127,7 @@ static int orion_nand_register_commands(struct command_context_s *cmd_ctx)
 
 NAND_DEVICE_COMMAND_HANDLER(orion_nand_device_command)
 {
-	orion_nand_controller_t *hw;
+	struct orion_nand_controller *hw;
 	uint32_t base;
 	uint8_t ale, cle;
 

commit c7b96a4dc106fc28808f9503d15803e942b941a0
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:38:45 2009 -0800

    ocl_priv_t -&gt; struct ocl_priv
    
    Remove misleading typedef and redundant suffix from struct ocl_priv.

diff --git a/src/flash/ocl.c b/src/flash/ocl.c
index bd7577e..10ac230 100644
--- a/src/flash/ocl.c
+++ b/src/flash/ocl.c
@@ -26,12 +26,12 @@
 #include &quot;embeddedice.h&quot;
 
 
-typedef struct ocl_priv_s
+struct ocl_priv
 {
 	arm_jtag_t *jtag_info;
 	unsigned int buflen;
 	unsigned int bufalign;
-} ocl_priv_t;
+};
 
 static int ocl_erase_check(struct flash_bank_s *bank)
 {
@@ -49,7 +49,7 @@ FLASH_BANK_COMMAND_HANDLER(ocl_flash_bank_command)
 	int retval;
 	armv4_5_common_t *armv4_5;
 	arm7_9_common_t *arm7_9;
-	ocl_priv_t *ocl;
+	struct ocl_priv *ocl;
 
 	if (argc &lt; 6)
 	{
@@ -60,7 +60,7 @@ FLASH_BANK_COMMAND_HANDLER(ocl_flash_bank_command)
 	if ((retval = arm7_9_get_arch_pointers(bank-&gt;target, &amp;armv4_5, &amp;arm7_9)) != ERROR_OK)
 		return retval;
 
-	ocl = bank-&gt;driver_priv = malloc(sizeof(ocl_priv_t));
+	ocl = bank-&gt;driver_priv = malloc(sizeof(struct ocl_priv));
 	ocl-&gt;jtag_info = &amp;arm7_9-&gt;jtag_info;
 	ocl-&gt;buflen = 0;
 	ocl-&gt;bufalign = 1;
@@ -70,7 +70,7 @@ FLASH_BANK_COMMAND_HANDLER(ocl_flash_bank_command)
 
 static int ocl_erase(struct flash_bank_s *bank, int first, int last)
 {
-	ocl_priv_t *ocl = bank-&gt;driver_priv;
+	struct ocl_priv *ocl = bank-&gt;driver_priv;
 	int retval;
 	uint32_t dcc_buffer[3];
 
@@ -130,7 +130,7 @@ static int ocl_protect(struct flash_bank_s *bank, int set, int first, int last)
 
 static int ocl_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
-	ocl_priv_t *ocl = bank-&gt;driver_priv;
+	struct ocl_priv *ocl = bank-&gt;driver_priv;
 	int retval;
 	uint32_t *dcc_buffer;
 	uint32_t *dcc_bufptr;
@@ -237,7 +237,7 @@ static int ocl_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset
 
 static int ocl_probe(struct flash_bank_s *bank)
 {
-	ocl_priv_t *ocl = bank-&gt;driver_priv;
+	struct ocl_priv *ocl = bank-&gt;driver_priv;
 	int retval;
 	uint32_t dcc_buffer[1];
 	int sectsize;
@@ -340,7 +340,7 @@ static int ocl_info(struct flash_bank_s *bank, char *buf, int buf_size)
 
 static int ocl_auto_probe(struct flash_bank_s *bank)
 {
-	ocl_priv_t *ocl = bank-&gt;driver_priv;
+	struct ocl_priv *ocl = bank-&gt;driver_priv;
 
 	if (ocl-&gt;buflen == 0 || ocl-&gt;bufalign == 0)
 		return ERROR_FLASH_BANK_NOT_PROBED;

commit 958ff04b086d60e901bfd9c05cf7b4e3e5af641a
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:38:42 2009 -0800

    nand_info_t -&gt; struct nand_info
    
    Remove misleading typedef and redundant suffix from struct nand_info.

diff --git a/src/flash/nand.c b/src/flash/nand.c
index dba1877..7948361 100644
--- a/src/flash/nand.c
+++ b/src/flash/nand.c
@@ -74,7 +74,7 @@ static command_t *nand_cmd;
  *	256	256 Byte page size
  *	512	512 Byte page size
  */
-static nand_info_t nand_flash_ids[] =
+static struct nand_info nand_flash_ids[] =
 {
 	/* start &quot;museum&quot; IDs */
 	{&quot;NAND 1MiB 5V 8-bit&quot;,		0x6e, 256, 1, 0x1000, 0},
diff --git a/src/flash/nand.h b/src/flash/nand.h
index 93fd34f..ea31947 100644
--- a/src/flash/nand.h
+++ b/src/flash/nand.h
@@ -78,7 +78,7 @@ typedef struct nand_device_s
 	struct nand_flash_controller *controller;
 	void *controller_priv;
 	struct nand_manufacturer *manufacturer;
-	struct nand_info_s *device;
+	struct nand_info *device;
 	int bus_width;
 	int address_cycles;
 	int page_size;
@@ -109,7 +109,7 @@ struct nand_manufacturer
 	char *name;
 };
 
-typedef struct nand_info_s
+struct nand_info
 {
 	char *name;
 	int id;
@@ -117,7 +117,7 @@ typedef struct nand_info_s
 	int chip_size;
 	int erase_size;
 	int options;
-} nand_info_t;
+};
 
 /* Option constants for bizarre disfunctionality and real features
  */

commit f7ca04721300da7ddd4031885e98f3138825ccd1
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:38:39 2009 -0800

    nand_manufacturer_t -&gt; struct nand_manufacturer
    
    Remove misleading typedef and redundant suffix from struct nand_manufacturer.

diff --git a/src/flash/nand.c b/src/flash/nand.c
index b2017c3..dba1877 100644
--- a/src/flash/nand.c
+++ b/src/flash/nand.c
@@ -154,7 +154,7 @@ static nand_info_t nand_flash_ids[] =
 
 /* Manufacturer ID list
  */
-static nand_manufacturer_t nand_manuf_ids[] =
+static struct nand_manufacturer nand_manuf_ids[] =
 {
 	{0x0, &quot;unknown&quot;},
 	{NAND_MFR_TOSHIBA, &quot;Toshiba&quot;},
diff --git a/src/flash/nand.h b/src/flash/nand.h
index 922f08a..93fd34f 100644
--- a/src/flash/nand.h
+++ b/src/flash/nand.h
@@ -77,7 +77,7 @@ typedef struct nand_device_s
 {
 	struct nand_flash_controller *controller;
 	void *controller_priv;
-	struct nand_manufacturer_s *manufacturer;
+	struct nand_manufacturer *manufacturer;
 	struct nand_info_s *device;
 	int bus_width;
 	int address_cycles;
@@ -103,11 +103,11 @@ enum
 	NAND_MFR_MICRON = 0x2c,
 };
 
-typedef struct nand_manufacturer_s
+struct nand_manufacturer
 {
 	int id;
 	char *name;
-} nand_manufacturer_t;
+};
 
 typedef struct nand_info_s
 {

commit 8f4860d13f03c40b28bb32e9cb0f1d650e200ce9
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:38:35 2009 -0800

    nand_ecclayout_t -&gt; struct nand_ecclayout
    
    Remove misleading typedef and redundant suffix from struct nand_ecclayout.

diff --git a/src/flash/nand.c b/src/flash/nand.c
index 1249327..b2017c3 100644
--- a/src/flash/nand.c
+++ b/src/flash/nand.c
@@ -173,7 +173,7 @@ static nand_manufacturer_t nand_manuf_ids[] =
  */
 
 #if 0
-static nand_ecclayout_t nand_oob_8 = {
+static struct nand_ecclayout nand_oob_8 = {
 	.eccbytes = 3,
 	.eccpos = {0, 1, 2},
 	.oobfree = {
@@ -184,7 +184,7 @@ static nand_ecclayout_t nand_oob_8 = {
 };
 #endif
 
-static nand_ecclayout_t nand_oob_16 = {
+static struct nand_ecclayout nand_oob_16 = {
 	.eccbytes = 6,
 	.eccpos = {0, 1, 2, 3, 6, 7},
 	.oobfree = {
@@ -192,7 +192,7 @@ static nand_ecclayout_t nand_oob_16 = {
 		 . length = 8}}
 };
 
-static nand_ecclayout_t nand_oob_64 = {
+static struct nand_ecclayout nand_oob_64 = {
 	.eccbytes = 24,
 	.eccpos = {
 		   40, 41, 42, 43, 44, 45, 46, 47,
diff --git a/src/flash/nand.h b/src/flash/nand.h
index ce7ed9d..922f08a 100644
--- a/src/flash/nand.h
+++ b/src/flash/nand.h
@@ -66,12 +66,12 @@ struct nand_oobfree {
 	int length;
 };
 
-typedef struct nand_ecclayout_s {
+struct nand_ecclayout {
 	int eccbytes;
 	int eccpos[64];
 	int oobavail;
 	struct nand_oobfree oobfree[2];
-} nand_ecclayout_t;
+};
 
 typedef struct nand_device_s
 {

commit 86053523875d18151f3dd0b53bf30e07eec2acf2
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:38:30 2009 -0800

    nand_flash_controller_t -&gt; struct nand_flash_controller
    
    Remove misleading typedef and redundant suffix from struct nand_flash_controller.

diff --git a/src/flash/davinci_nand.c b/src/flash/davinci_nand.c
index b3164ab..d4c1619 100644
--- a/src/flash/davinci_nand.c
+++ b/src/flash/davinci_nand.c
@@ -744,7 +744,7 @@ fail:
 	return ERROR_NAND_OPERATION_FAILED;
 }
 
-nand_flash_controller_t davinci_nand_controller = {
+struct nand_flash_controller davinci_nand_controller = {
 	.name			= &quot;davinci&quot;,
 	.nand_device_command	= davinci_nand_device_command,
 	.register_commands	= davinci_register_commands,
diff --git a/src/flash/lpc3180_nand_controller.c b/src/flash/lpc3180_nand_controller.c
index 319858c..016fa70 100644
--- a/src/flash/lpc3180_nand_controller.c
+++ b/src/flash/lpc3180_nand_controller.c
@@ -882,7 +882,7 @@ static int lpc3180_register_commands(struct command_context_s *cmd_ctx)
 	return ERROR_OK;
 }
 
-nand_flash_controller_t lpc3180_nand_controller = {
+struct nand_flash_controller lpc3180_nand_controller = {
 		.name = &quot;lpc3180&quot;,
 		.nand_device_command = lpc3180_nand_device_command,
 		.register_commands = lpc3180_register_commands,
diff --git a/src/flash/mx3_nand.c b/src/flash/mx3_nand.c
index bce7aa8..5311116 100644
--- a/src/flash/mx3_nand.c
+++ b/src/flash/mx3_nand.c
@@ -868,7 +868,7 @@ static int do_data_output (struct nand_device_s *nand)
 	return ERROR_OK;
 }
 
-nand_flash_controller_t imx31_nand_flash_controller = {
+struct nand_flash_controller imx31_nand_flash_controller = {
 		.name = &quot;imx31&quot;,
 		.nand_device_command = &amp;imx31_nand_device_command,
 		.register_commands = &amp;imx31_register_commands,
diff --git a/src/flash/nand.c b/src/flash/nand.c
index 44207a8..1249327 100644
--- a/src/flash/nand.c
+++ b/src/flash/nand.c
@@ -35,18 +35,18 @@ static int nand_write_page(struct nand_device_s *nand, uint32_t page, uint8_t *d
 
 /* NAND flash controller
  */
-extern nand_flash_controller_t davinci_nand_controller;
-extern nand_flash_controller_t lpc3180_nand_controller;
-extern nand_flash_controller_t orion_nand_controller;
-extern nand_flash_controller_t s3c2410_nand_controller;
-extern nand_flash_controller_t s3c2412_nand_controller;
-extern nand_flash_controller_t s3c2440_nand_controller;
-extern nand_flash_controller_t s3c2443_nand_controller;
-extern nand_flash_controller_t imx31_nand_flash_controller;
-
-/* extern nand_flash_controller_t boundary_scan_nand_controller; */
-
-static nand_flash_controller_t *nand_flash_controllers[] =
+extern struct nand_flash_controller davinci_nand_controller;
+extern struct nand_flash_controller lpc3180_nand_controller;
+extern struct nand_flash_controller orion_nand_controller;
+extern struct nand_flash_controller s3c2410_nand_controller;
+extern struct nand_flash_controller s3c2412_nand_controller;
+extern struct nand_flash_controller s3c2440_nand_controller;
+extern struct nand_flash_controller s3c2443_nand_controller;
+extern struct nand_flash_controller imx31_nand_flash_controller;
+
+/* extern struct nand_flash_controller boundary_scan_nand_controller; */
+
+static struct nand_flash_controller *nand_flash_controllers[] =
 {
 	&amp;davinci_nand_controller,
 	&amp;lpc3180_nand_controller,
diff --git a/src/flash/nand.h b/src/flash/nand.h
index 57076d5..ce7ed9d 100644
--- a/src/flash/nand.h
+++ b/src/flash/nand.h
@@ -32,7 +32,7 @@ struct nand_device_s;
 #define __NAND_DEVICE_COMMAND(name) \
 		COMMAND_HELPER(name, struct nand_device_s *nand)
 
-typedef struct nand_flash_controller_s
+struct nand_flash_controller
 {
 	char *name;
 	__NAND_DEVICE_COMMAND((*nand_device_command));
@@ -49,7 +49,7 @@ typedef struct nand_flash_controller_s
 	int (*read_page)(struct nand_device_s *nand, uint32_t page, uint8_t *data, uint32_t data_size, uint8_t *oob, uint32_t oob_size);
 	int (*controller_ready)(struct nand_device_s *nand, int timeout);
 	int (*nand_ready)(struct nand_device_s *nand, int timeout);
-} nand_flash_controller_t;
+};
 
 #define NAND_DEVICE_COMMAND_HANDLER(name) static __NAND_DEVICE_COMMAND(name)
 
@@ -75,7 +75,7 @@ typedef struct nand_ecclayout_s {
 
 typedef struct nand_device_s
 {
-	nand_flash_controller_t *controller;
+	struct nand_flash_controller *controller;
 	void *controller_priv;
 	struct nand_manufacturer_s *manufacturer;
 	struct nand_info_s *device;
diff --git a/src/flash/orion_nand.c b/src/flash/orion_nand.c
index b112c9e..03280c1 100644
--- a/src/flash/orion_nand.c
+++ b/src/flash/orion_nand.c
@@ -169,7 +169,7 @@ static int orion_nand_init(struct nand_device_s *nand)
 	return ERROR_OK;
 }
 
-nand_flash_controller_t orion_nand_controller =
+struct nand_flash_controller orion_nand_controller =
 {
 	.name			= &quot;orion&quot;,
 	.command		= orion_nand_command,
diff --git a/src/flash/s3c2410_nand.c b/src/flash/s3c2410_nand.c
index 5badf1a..c57fe93 100644
--- a/src/flash/s3c2410_nand.c
+++ b/src/flash/s3c2410_nand.c
@@ -107,7 +107,7 @@ static int s3c2410_nand_ready(struct nand_device_s *nand, int timeout)
 	return 0;
 }
 
-nand_flash_controller_t s3c2410_nand_controller = {
+struct nand_flash_controller s3c2410_nand_controller = {
 		.name = &quot;s3c2410&quot;,
 		.nand_device_command = &amp;s3c2410_nand_device_command,
 		.register_commands = &amp;s3c24xx_register_commands,
diff --git a/src/flash/s3c2412_nand.c b/src/flash/s3c2412_nand.c
index 958f013..b41705d 100644
--- a/src/flash/s3c2412_nand.c
+++ b/src/flash/s3c2412_nand.c
@@ -61,7 +61,7 @@ static int s3c2412_init(struct nand_device_s *nand)
 	return ERROR_OK;
 }
 
-nand_flash_controller_t s3c2412_nand_controller = {
+struct nand_flash_controller s3c2412_nand_controller = {
 		.name = &quot;s3c2412&quot;,
 		.nand_device_command = &amp;s3c2412_nand_device_command,
 		.register_commands = &amp;s3c24xx_register_commands,
diff --git a/src/flash/s3c2440_nand.c b/src/flash/s3c2440_nand.c
index 80020f6..8c05687 100644
--- a/src/flash/s3c2440_nand.c
+++ b/src/flash/s3c2440_nand.c
@@ -153,7 +153,7 @@ int s3c2440_write_block_data(struct nand_device_s *nand, uint8_t *data, int data
 	return ERROR_OK;
 }
 
-nand_flash_controller_t s3c2440_nand_controller = {
+struct nand_flash_controller s3c2440_nand_controller = {
 		.name = &quot;s3c2440&quot;,
 		.nand_device_command = &amp;s3c2440_nand_device_command,
 		.register_commands = &amp;s3c24xx_register_commands,
diff --git a/src/flash/s3c2443_nand.c b/src/flash/s3c2443_nand.c
index af7d9a9..30549f6 100644
--- a/src/flash/s3c2443_nand.c
+++ b/src/flash/s3c2443_nand.c
@@ -62,7 +62,7 @@ static int s3c2443_init(struct nand_device_s *nand)
 	return ERROR_OK;
 }
 
-nand_flash_controller_t s3c2443_nand_controller = {
+struct nand_flash_controller s3c2443_nand_controller = {
 		.name = &quot;s3c2443&quot;,
 		.nand_device_command = &amp;s3c2443_nand_device_command,
 		.register_commands = &amp;s3c24xx_register_commands,

commit 4bc46d61cade59a43d158862dfbe738255f00a81
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:38:27 2009 -0800

    mx3_nf_controller_t -&gt; struct mx3_nf_controller
    
    Remove misleading typedef and redundant suffix from struct mx3_nf_controller.

diff --git a/src/flash/mx3_nand.c b/src/flash/mx3_nand.c
index a51f8c8..bce7aa8 100644
--- a/src/flash/mx3_nand.c
+++ b/src/flash/mx3_nand.c
@@ -63,8 +63,8 @@ static int imx31_controller_ready (struct nand_device_s *nand, int tout);
 
 NAND_DEVICE_COMMAND_HANDLER(imx31_nand_device_command)
 {
-	mx3_nf_controller_t *mx3_nf_info;
-	mx3_nf_info = malloc (sizeof (mx3_nf_controller_t));
+	struct mx3_nf_controller *mx3_nf_info;
+	mx3_nf_info = malloc (sizeof (struct mx3_nf_controller));
 	if (mx3_nf_info == NULL)
 	{
 	    LOG_ERROR (&quot;no memory for nand controller&quot;);
@@ -123,7 +123,7 @@ NAND_DEVICE_COMMAND_HANDLER(imx31_nand_device_command)
 
 static int imx31_init (struct nand_device_s *nand)
 {
-	mx3_nf_controller_t *mx3_nf_info = nand-&gt;controller_priv;
+	struct mx3_nf_controller *mx3_nf_info = nand-&gt;controller_priv;
 	target_t *target = mx3_nf_info-&gt;target;
 
 	{
@@ -266,7 +266,7 @@ static int imx31_init (struct nand_device_s *nand)
 
 static int imx31_read_data (struct nand_device_s *nand, void *data)
 {
-	mx3_nf_controller_t *mx3_nf_info = nand-&gt;controller_priv;
+	struct mx3_nf_controller *mx3_nf_info = nand-&gt;controller_priv;
 	target_t *target = mx3_nf_info-&gt;target;
 	{
 	/*
@@ -337,7 +337,7 @@ static int imx31_reset (struct nand_device_s *nand)
 
 static int imx31_command (struct nand_device_s *nand, uint8_t command)
 {
-	mx3_nf_controller_t *mx3_nf_info = nand-&gt;controller_priv;
+	struct mx3_nf_controller *mx3_nf_info = nand-&gt;controller_priv;
 	target_t *target = mx3_nf_info-&gt;target;
 	{
 	/*
@@ -411,7 +411,7 @@ static int imx31_command (struct nand_device_s *nand, uint8_t command)
 
 static int imx31_address (struct nand_device_s *nand, uint8_t address)
 {
-	mx3_nf_controller_t *mx3_nf_info = nand-&gt;controller_priv;
+	struct mx3_nf_controller *mx3_nf_info = nand-&gt;controller_priv;
 	target_t *target = mx3_nf_info-&gt;target;
 	{
 	/*
@@ -444,7 +444,7 @@ static int imx31_address (struct nand_device_s *nand, uint8_t address)
 static int imx31_controller_ready (struct nand_device_s *nand, int tout)
 {
 	uint16_t poll_complete_status;
-	mx3_nf_controller_t *mx3_nf_info = nand-&gt;controller_priv;
+	struct mx3_nf_controller *mx3_nf_info = nand-&gt;controller_priv;
 	target_t *target = mx3_nf_info-&gt;target;
 
 	{
@@ -476,7 +476,7 @@ static int imx31_write_page (struct nand_device_s *nand, uint32_t page,
 			     uint8_t * data, uint32_t data_size, uint8_t * oob,
 			     uint32_t oob_size)
 {
-	mx3_nf_controller_t *mx3_nf_info = nand-&gt;controller_priv;
+	struct mx3_nf_controller *mx3_nf_info = nand-&gt;controller_priv;
 	target_t *target = mx3_nf_info-&gt;target;
 
 	if (data_size % 2)
@@ -583,7 +583,7 @@ static int imx31_read_page (struct nand_device_s *nand, uint32_t page,
 			    uint8_t * data, uint32_t data_size, uint8_t * oob,
 			    uint32_t oob_size)
 {
-	mx3_nf_controller_t *mx3_nf_info = nand-&gt;controller_priv;
+	struct mx3_nf_controller *mx3_nf_info = nand-&gt;controller_priv;
 	target_t *target = mx3_nf_info-&gt;target;
 
 	if (data_size % 2)
@@ -658,7 +658,7 @@ static int test_iomux_settings (target_t * target, uint32_t address,
 
 static int initialize_nf_controller (struct nand_device_s *nand)
 {
-	mx3_nf_controller_t *mx3_nf_info = nand-&gt;controller_priv;
+	struct mx3_nf_controller *mx3_nf_info = nand-&gt;controller_priv;
 	target_t *target = mx3_nf_info-&gt;target;
 	/*
 	* resets NAND flash controller in zero time ? I dont know.
@@ -786,7 +786,7 @@ static int poll_for_complete_op (target_t * target, const char *text)
 
 static int validate_target_state (struct nand_device_s *nand)
 {
-	mx3_nf_controller_t *mx3_nf_info = nand-&gt;controller_priv;
+	struct mx3_nf_controller *mx3_nf_info = nand-&gt;controller_priv;
 	target_t *target = mx3_nf_info-&gt;target;
 
 	if (target-&gt;state != TARGET_HALTED)
@@ -808,7 +808,7 @@ static int validate_target_state (struct nand_device_s *nand)
 
 static int do_data_output (struct nand_device_s *nand)
 {
-	mx3_nf_controller_t *mx3_nf_info = nand-&gt;controller_priv;
+	struct mx3_nf_controller *mx3_nf_info = nand-&gt;controller_priv;
 	target_t *target = mx3_nf_info-&gt;target;
 	switch (mx3_nf_info-&gt;fin)
 	{
diff --git a/src/flash/mx3_nand.h b/src/flash/mx3_nand.h
index 3193893..1f3529a 100644
--- a/src/flash/mx3_nand.h
+++ b/src/flash/mx3_nand.h
@@ -108,10 +108,10 @@ struct mx3_nf_flags
 	unsigned hw_ecc_enabled:1;
 };
 
-typedef struct mx3_nf_controller_s
+struct mx3_nf_controller
 {
 	struct target_s *target;
 	enum mx_dataout_type optype;
 	enum mx_nf_finalize_action fin;
 	struct mx3_nf_flags flags;
-} mx3_nf_controller_t;
+};

commit 79338ec6c208fc34d2c16d109dea6bf5ae20f860
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:38:24 2009 -0800

    mflash_bank_t -&gt; struct mflash_bank
    
    Remove misleading typedef and redundant suffix from struct mflash_bank.

diff --git a/src/flash/mflash.c b/src/flash/mflash.c
index c846171..5790a95 100644
--- a/src/flash/mflash.c
+++ b/src/flash/mflash.c
@@ -34,7 +34,7 @@ static int pxa270_set_gpio_output_val (struct mflash_gpio_num gpio, uint8_t val)
 
 static command_t *mflash_cmd;
 
-static mflash_bank_t *mflash_bank;
+static struct mflash_bank *mflash_bank;
 
 static struct mflash_gpio_drv pxa270_gpio = {
 	.name = &quot;pxa270&quot;,
@@ -1296,7 +1296,7 @@ COMMAND_HANDLER(mg_bank_cmd)
 		return ERROR_FAIL;
 	}
 
-	mflash_bank = calloc(sizeof(mflash_bank_t), 1);
+	mflash_bank = calloc(sizeof(struct mflash_bank), 1);
 	COMMAND_PARSE_NUMBER(u32, args[1], mflash_bank-&gt;base);
 	/// @todo Verify how this parsing should work, then document it.
 	char *str;
diff --git a/src/flash/mflash.h b/src/flash/mflash.h
index da0c056..59bd1b0 100644
--- a/src/flash/mflash.h
+++ b/src/flash/mflash.h
@@ -130,7 +130,7 @@ struct mg_drv_info {
 	uint32_t tot_sects;
 };
 
-typedef struct mflash_bank_s
+struct mflash_bank
 {
 	uint32_t base;
 
@@ -139,7 +139,7 @@ typedef struct mflash_bank_s
 	struct mflash_gpio_drv *gpio_drv;
 	target_t *target;
 	struct mg_drv_info *drv_info;
-} mflash_bank_t;
+};
 
 int mflash_register_commands(struct command_context_s *cmd_ctx);
 int mflash_init_drivers(struct command_context_s *cmd_ctx);

commit bb6b9988cbd32f5f87e228340172aa1004775df2
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:38:21 2009 -0800

    mg_drv_info_t -&gt; struct mg_drv_info
    
    Remove misleading typedef and redundant suffix from struct mg_drv_info.

diff --git a/src/flash/mflash.c b/src/flash/mflash.c
index 7696f0d..c846171 100644
--- a/src/flash/mflash.c
+++ b/src/flash/mflash.c
@@ -349,7 +349,7 @@ static int mg_dsk_drv_info(void)
 	LOG_INFO(&quot;mflash: read drive info&quot;);
 
 	if (! mflash_bank-&gt;drv_info)
-		mflash_bank-&gt;drv_info = malloc(sizeof(mg_drv_info_t));
+		mflash_bank-&gt;drv_info = malloc(sizeof(struct mg_drv_info));
 
 	target_read_memory(target, mg_buff, 2, sizeof(mg_io_type_drv_info) &gt;&gt; 1,
 			(uint8_t *)&amp;mflash_bank-&gt;drv_info-&gt;drv_id);
diff --git a/src/flash/mflash.h b/src/flash/mflash.h
index c09120b..da0c056 100644
--- a/src/flash/mflash.h
+++ b/src/flash/mflash.h
@@ -125,10 +125,10 @@ typedef struct _mg_pll_t
 	unsigned char  output_div;	/* 2bit divider */
 } mg_pll_t;
 
-typedef struct mg_drv_info_s {
+struct mg_drv_info {
 	mg_io_type_drv_info drv_id;
 	uint32_t tot_sects;
-} mg_drv_info_t;
+};
 
 typedef struct mflash_bank_s
 {
@@ -138,7 +138,7 @@ typedef struct mflash_bank_s
 
 	struct mflash_gpio_drv *gpio_drv;
 	target_t *target;
-	mg_drv_info_t *drv_info;
+	struct mg_drv_info *drv_info;
 } mflash_bank_t;
 
 int mflash_register_commands(struct command_context_s *cmd_ctx);

commit fc01dd6a13167c33491b9ccc1543d34b2e485c32
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:38:17 2009 -0800

    mflash_gpio_drv_t -&gt; struct mflash_gpio_drv
    
    Remove misleading typedef and redundant suffix from struct mflash_gpio_drv.

diff --git a/src/flash/mflash.c b/src/flash/mflash.c
index 84ad3a8..7696f0d 100644
--- a/src/flash/mflash.c
+++ b/src/flash/mflash.c
@@ -36,19 +36,19 @@ static command_t *mflash_cmd;
 
 static mflash_bank_t *mflash_bank;
 
-static mflash_gpio_drv_t pxa270_gpio = {
+static struct mflash_gpio_drv pxa270_gpio = {
 	.name = &quot;pxa270&quot;,
 	.set_gpio_to_output = pxa270_set_gpio_to_output,
 	.set_gpio_output_val = pxa270_set_gpio_output_val
 };
 
-static mflash_gpio_drv_t s3c2440_gpio = {
+static struct mflash_gpio_drv s3c2440_gpio = {
 	.name = &quot;s3c2440&quot;,
 	.set_gpio_to_output = s3c2440_set_gpio_to_output,
 	.set_gpio_output_val = s3c2440_set_gpio_output_val
 };
 
-static mflash_gpio_drv_t *mflash_gpio[] =
+static struct mflash_gpio_drv *mflash_gpio[] =
 {
 		&amp;pxa270_gpio,
 		&amp;s3c2440_gpio,
@@ -199,7 +199,7 @@ static int mg_hdrst(uint8_t level)
 static int mg_init_gpio (void)
 {
 	int ret;
-	mflash_gpio_drv_t *gpio_drv = mflash_bank-&gt;gpio_drv;
+	struct mflash_gpio_drv *gpio_drv = mflash_bank-&gt;gpio_drv;
 
 	ret = gpio_drv-&gt;set_gpio_to_output(mflash_bank-&gt;rst_pin);
 	if (ret != ERROR_OK)
diff --git a/src/flash/mflash.h b/src/flash/mflash.h
index 75fbaa4..c09120b 100644
--- a/src/flash/mflash.h
+++ b/src/flash/mflash.h
@@ -32,12 +32,12 @@ struct mflash_gpio_num
 	signed short num;
 };
 
-typedef struct mflash_gpio_drv_s
+struct mflash_gpio_drv
 {
 	char *name;
 	int (*set_gpio_to_output) (struct mflash_gpio_num gpio);
 	int (*set_gpio_output_val) (struct mflash_gpio_num gpio, uint8_t val);
-} mflash_gpio_drv_t;
+};
 
 typedef struct _mg_io_type_drv_info {
 
@@ -136,7 +136,7 @@ typedef struct mflash_bank_s
 
 	struct mflash_gpio_num rst_pin;
 
-	mflash_gpio_drv_t *gpio_drv;
+	struct mflash_gpio_drv *gpio_drv;
 	target_t *target;
 	mg_drv_info_t *drv_info;
 } mflash_bank_t;

commit a043632a529c0b98bb8771c8815e7681e4ed0f12
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:38:14 2009 -0800

    mflash_gpio_num_t -&gt; struct mflash_gpio_num
    
    Remove misleading typedef and redundant suffix from struct mflash_gpio_num.

diff --git a/src/flash/mflash.c b/src/flash/mflash.c
index 54578da..84ad3a8 100644
--- a/src/flash/mflash.c
+++ b/src/flash/mflash.c
@@ -27,10 +27,10 @@
 #include &quot;log.h&quot;
 
 
-static int s3c2440_set_gpio_to_output (mflash_gpio_num_t gpio);
-static int s3c2440_set_gpio_output_val (mflash_gpio_num_t gpio, uint8_t val);
-static int pxa270_set_gpio_to_output (mflash_gpio_num_t gpio);
-static int pxa270_set_gpio_output_val (mflash_gpio_num_t gpio, uint8_t val);
+static int s3c2440_set_gpio_to_output (struct mflash_gpio_num gpio);
+static int s3c2440_set_gpio_output_val (struct mflash_gpio_num gpio, uint8_t val);
+static int pxa270_set_gpio_to_output (struct mflash_gpio_num gpio);
+static int pxa270_set_gpio_output_val (struct mflash_gpio_num gpio, uint8_t val);
 
 static command_t *mflash_cmd;
 
@@ -64,7 +64,7 @@ static mflash_gpio_drv_t *mflash_gpio[] =
 #define PXA270_GPSR0 0x40E00018
 #define PXA270_GPCR0 0x40E00024
 
-static int pxa270_set_gpio_to_output (mflash_gpio_num_t gpio)
+static int pxa270_set_gpio_to_output (struct mflash_gpio_num gpio)
 {
 	uint32_t addr, value, mask;
 	target_t *target = mflash_bank-&gt;target;
@@ -101,7 +101,7 @@ static int pxa270_set_gpio_to_output (mflash_gpio_num_t gpio)
 	return ret;
 }
 
-static int pxa270_set_gpio_output_val (mflash_gpio_num_t gpio, uint8_t val)
+static int pxa270_set_gpio_output_val (struct mflash_gpio_num gpio, uint8_t val)
 {
 	uint32_t addr, value, mask;
 	target_t *target = mflash_bank-&gt;target;
@@ -130,7 +130,7 @@ static int pxa270_set_gpio_output_val (mflash_gpio_num_t gpio, uint8_t val)
 #define S3C2440_GPJCON 0x560000d0
 #define S3C2440_GPJDAT 0x560000d4
 
-static int s3c2440_set_gpio_to_output (mflash_gpio_num_t gpio)
+static int s3c2440_set_gpio_to_output (struct mflash_gpio_num gpio)
 {
 	uint32_t data, mask, gpio_con;
 	target_t *target = mflash_bank-&gt;target;
@@ -162,7 +162,7 @@ static int s3c2440_set_gpio_to_output (mflash_gpio_num_t gpio)
 	return ret;
 }
 
-static int s3c2440_set_gpio_output_val (mflash_gpio_num_t gpio, uint8_t val)
+static int s3c2440_set_gpio_output_val (struct mflash_gpio_num gpio, uint8_t val)
 {
 	uint32_t data, mask, gpio_dat;
 	target_t *target = mflash_bank-&gt;target;
diff --git a/src/flash/mflash.h b/src/flash/mflash.h
index 1b54307..75fbaa4 100644
--- a/src/flash/mflash.h
+++ b/src/flash/mflash.h
@@ -26,17 +26,17 @@ typedef unsigned long mg_io_uint32;
 typedef unsigned short mg_io_uint16;
 typedef unsigned char mg_io_uint8;
 
-typedef struct mflash_gpio_num_s
+struct mflash_gpio_num
 {
 	char port[2];
 	signed short num;
-} mflash_gpio_num_t;
+};
 
 typedef struct mflash_gpio_drv_s
 {
 	char *name;
-	int (*set_gpio_to_output) (mflash_gpio_num_t gpio);
-	int (*set_gpio_output_val) (mflash_gpio_num_t gpio, uint8_t val);
+	int (*set_gpio_to_output) (struct mflash_gpio_num gpio);
+	int (*set_gpio_output_val) (struct mflash_gpio_num gpio, uint8_t val);
 } mflash_gpio_drv_t;
 
 typedef struct _mg_io_type_drv_info {
@@ -134,7 +134,7 @@ typedef struct mflash_bank_s
 {
 	uint32_t base;
 
-	mflash_gpio_num_t rst_pin;
+	struct mflash_gpio_num rst_pin;
 
 	mflash_gpio_drv_t *gpio_drv;
 	target_t *target;

commit ed1aed8dd9f282fe7a948676453054c15d8ebd4e
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:38:11 2009 -0800

    lpc3180_nand_controller_t -&gt; struct lpc3180_nand_controller
    
    Remove misleading typedef and redundant suffix from struct lpc3180_nand_controller.

diff --git a/src/flash/lpc3180_nand_controller.c b/src/flash/lpc3180_nand_controller.c
index 41cc33e..319858c 100644
--- a/src/flash/lpc3180_nand_controller.c
+++ b/src/flash/lpc3180_nand_controller.c
@@ -47,8 +47,8 @@ NAND_DEVICE_COMMAND_HANDLER(lpc3180_nand_device_command)
 	uint32_t osc_freq;
 	COMMAND_PARSE_NUMBER(u32, args[2], osc_freq);
 
-	lpc3180_nand_controller_t *lpc3180_info;
-	lpc3180_info = malloc(sizeof(lpc3180_nand_controller_t));
+	struct lpc3180_nand_controller *lpc3180_info;
+	lpc3180_info = malloc(sizeof(struct lpc3180_nand_controller));
 	nand-&gt;controller_priv = lpc3180_info;
 
 	lpc3180_info-&gt;target = target;
@@ -94,7 +94,7 @@ static int lpc3180_pll(int fclkin, uint32_t pll_ctrl)
 		return (m / (2 * p)) * (fclkin / n);
 }
 
-static float lpc3180_cycle_time(lpc3180_nand_controller_t *lpc3180_info)
+static float lpc3180_cycle_time(struct lpc3180_nand_controller *lpc3180_info)
 {
 	target_t *target = lpc3180_info-&gt;target;
 	uint32_t sysclk_ctrl, pwr_ctrl, hclkdiv_ctrl, hclkpll_ctrl;
@@ -146,7 +146,7 @@ static float lpc3180_cycle_time(lpc3180_nand_controller_t *lpc3180_info)
 
 static int lpc3180_init(struct nand_device_s *nand)
 {
-	lpc3180_nand_controller_t *lpc3180_info = nand-&gt;controller_priv;
+	struct lpc3180_nand_controller *lpc3180_info = nand-&gt;controller_priv;
 	target_t *target = lpc3180_info-&gt;target;
 	int bus_width = nand-&gt;bus_width ? : 8;
 	int address_cycles = nand-&gt;address_cycles ? : 3;
@@ -276,7 +276,7 @@ static int lpc3180_init(struct nand_device_s *nand)
 
 static int lpc3180_reset(struct nand_device_s *nand)
 {
-	lpc3180_nand_controller_t *lpc3180_info = nand-&gt;controller_priv;
+	struct lpc3180_nand_controller *lpc3180_info = nand-&gt;controller_priv;
 	target_t *target = lpc3180_info-&gt;target;
 
 	if (target-&gt;state != TARGET_HALTED)
@@ -318,7 +318,7 @@ static int lpc3180_reset(struct nand_device_s *nand)
 
 static int lpc3180_command(struct nand_device_s *nand, uint8_t command)
 {
-	lpc3180_nand_controller_t *lpc3180_info = nand-&gt;controller_priv;
+	struct lpc3180_nand_controller *lpc3180_info = nand-&gt;controller_priv;
 	target_t *target = lpc3180_info-&gt;target;
 
 	if (target-&gt;state != TARGET_HALTED)
@@ -348,7 +348,7 @@ static int lpc3180_command(struct nand_device_s *nand, uint8_t command)
 
 static int lpc3180_address(struct nand_device_s *nand, uint8_t address)
 {
-	lpc3180_nand_controller_t *lpc3180_info = nand-&gt;controller_priv;
+	struct lpc3180_nand_controller *lpc3180_info = nand-&gt;controller_priv;
 	target_t *target = lpc3180_info-&gt;target;
 
 	if (target-&gt;state != TARGET_HALTED)
@@ -378,7 +378,7 @@ static int lpc3180_address(struct nand_device_s *nand, uint8_t address)
 
 static int lpc3180_write_data(struct nand_device_s *nand, uint16_t data)
 {
-	lpc3180_nand_controller_t *lpc3180_info = nand-&gt;controller_priv;
+	struct lpc3180_nand_controller *lpc3180_info = nand-&gt;controller_priv;
 	target_t *target = lpc3180_info-&gt;target;
 
 	if (target-&gt;state != TARGET_HALTED)
@@ -408,7 +408,7 @@ static int lpc3180_write_data(struct nand_device_s *nand, uint16_t data)
 
 static int lpc3180_read_data(struct nand_device_s *nand, void *data)
 {
-	lpc3180_nand_controller_t *lpc3180_info = nand-&gt;controller_priv;
+	struct lpc3180_nand_controller *lpc3180_info = nand-&gt;controller_priv;
 	target_t *target = lpc3180_info-&gt;target;
 
 	if (target-&gt;state != TARGET_HALTED)
@@ -470,7 +470,7 @@ static int lpc3180_read_data(struct nand_device_s *nand, void *data)
 
 static int lpc3180_write_page(struct nand_device_s *nand, uint32_t page, uint8_t *data, uint32_t data_size, uint8_t *oob, uint32_t oob_size)
 {
-	lpc3180_nand_controller_t *lpc3180_info = nand-&gt;controller_priv;
+	struct lpc3180_nand_controller *lpc3180_info = nand-&gt;controller_priv;
 	target_t *target = lpc3180_info-&gt;target;
 	int retval;
 	uint8_t status;
@@ -609,7 +609,7 @@ static int lpc3180_write_page(struct nand_device_s *nand, uint32_t page, uint8_t
 
 static int lpc3180_read_page(struct nand_device_s *nand, uint32_t page, uint8_t *data, uint32_t data_size, uint8_t *oob, uint32_t oob_size)
 {
-	lpc3180_nand_controller_t *lpc3180_info = nand-&gt;controller_priv;
+	struct lpc3180_nand_controller *lpc3180_info = nand-&gt;controller_priv;
 	target_t *target = lpc3180_info-&gt;target;
 
 	if (target-&gt;state != TARGET_HALTED)
@@ -756,7 +756,7 @@ static int lpc3180_read_page(struct nand_device_s *nand, uint32_t page, uint8_t
 
 static int lpc3180_controller_ready(struct nand_device_s *nand, int timeout)
 {
-	lpc3180_nand_controller_t *lpc3180_info = nand-&gt;controller_priv;
+	struct lpc3180_nand_controller *lpc3180_info = nand-&gt;controller_priv;
 	target_t *target = lpc3180_info-&gt;target;
 	uint8_t status = 0x0;
 
@@ -790,7 +790,7 @@ static int lpc3180_controller_ready(struct nand_device_s *nand, int timeout)
 
 static int lpc3180_nand_ready(struct nand_device_s *nand, int timeout)
 {
-	lpc3180_nand_controller_t *lpc3180_info = nand-&gt;controller_priv;
+	struct lpc3180_nand_controller *lpc3180_info = nand-&gt;controller_priv;
 	target_t *target = lpc3180_info-&gt;target;
 
 	if (target-&gt;state != TARGET_HALTED)
@@ -830,7 +830,7 @@ static int lpc3180_nand_ready(struct nand_device_s *nand, int timeout)
 
 COMMAND_HANDLER(handle_lpc3180_select_command)
 {
-	lpc3180_nand_controller_t *lpc3180_info = NULL;
+	struct lpc3180_nand_controller *lpc3180_info = NULL;
 	char *selected[] =
 	{
 		&quot;no&quot;, &quot;mlc&quot;, &quot;slc&quot;
diff --git a/src/flash/lpc3180_nand_controller.h b/src/flash/lpc3180_nand_controller.h
index 8352083..6f5d284 100644
--- a/src/flash/lpc3180_nand_controller.h
+++ b/src/flash/lpc3180_nand_controller.h
@@ -29,7 +29,7 @@ enum lpc3180_selected_controller
 	LPC3180_SLC_CONTROLLER,
 };
 
-typedef struct lpc3180_nand_controller_s
+struct lpc3180_nand_controller
 {
 	struct target_s *target;
 	int osc_freq;
@@ -37,6 +37,6 @@ typedef struct lpc3180_nand_controller_s
 	int sw_write_protection;
 	uint32_t sw_wp_lower_bound;
 	uint32_t sw_wp_upper_bound;
-} lpc3180_nand_controller_t;
+};
 
 #endif /*LPC3180_NAND_CONTROLLER_H */

commit b712a4e8b85f3b351f2af93d0988d9983e57d6fe
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:38:08 2009 -0800

    lpc2900_flash_bank_t -&gt; struct lpc2900_flash_bank
    
    Remove misleading typedef and redundant suffix from struct lpc2900_flash_bank.

diff --git a/src/flash/lpc2900.c b/src/flash/lpc2900.c
index 0f972be..5255f56 100644
--- a/src/flash/lpc2900.c
+++ b/src/flash/lpc2900.c
@@ -129,7 +129,7 @@
 /**
  * Private data for \c lpc2900 flash driver.
  */
-typedef struct lpc2900_flash_bank_s
+struct lpc2900_flash_bank
 {
 	/**
 	 * Holds the value read from CHIPID register.
@@ -168,7 +168,7 @@ typedef struct lpc2900_flash_bank_s
 	 */
 	uint32_t max_ram_block;
 
-} lpc2900_flash_bank_t;
+};
 
 
 static uint32_t lpc2900_wait_status(flash_bank_t *bank, uint32_t mask, int timeout);
@@ -231,7 +231,7 @@ static uint32_t lpc2900_wait_status( flash_bank_t *bank,
 static void lpc2900_setup( struct flash_bank_s *bank )
 {
 	uint32_t fcra;
-	lpc2900_flash_bank_t *lpc2900_info = bank-&gt;driver_priv;
+	struct lpc2900_flash_bank *lpc2900_info = bank-&gt;driver_priv;
 
 
 	/* Power up the flash block */
@@ -253,7 +253,7 @@ static void lpc2900_setup( struct flash_bank_s *bank )
  */
 static uint32_t lpc2900_is_ready( struct flash_bank_s *bank )
 {
-	lpc2900_flash_bank_t *lpc2900_info = bank-&gt;driver_priv;
+	struct lpc2900_flash_bank *lpc2900_info = bank-&gt;driver_priv;
 
 	if( lpc2900_info-&gt;chipid != EXPECTED_CHIPID )
 	{
@@ -444,7 +444,7 @@ static int lpc2900_write_index_page( struct flash_bank_s *bank,
 	}
 
 	/* Private info */
-	lpc2900_flash_bank_t *lpc2900_info = bank-&gt;driver_priv;
+	struct lpc2900_flash_bank *lpc2900_info = bank-&gt;driver_priv;
 
 	/* Enable flash block and set the correct CRA clock of 66 kHz */
 	lpc2900_setup( bank );
@@ -593,7 +593,7 @@ COMMAND_HANDLER(lpc2900_handle_read_custom_command)
 	if (ERROR_OK != retval)
 		return retval;
 
-	lpc2900_flash_bank_t *lpc2900_info = bank-&gt;driver_priv;
+	struct lpc2900_flash_bank *lpc2900_info = bank-&gt;driver_priv;
 	lpc2900_info-&gt;risky = 0;
 
 	/* Get target, and check if it's halted */
@@ -664,7 +664,7 @@ COMMAND_HANDLER(lpc2900_handle_password_command)
 	if (ERROR_OK != retval)
 		return retval;
 
-	lpc2900_flash_bank_t *lpc2900_info = bank-&gt;driver_priv;
+	struct lpc2900_flash_bank *lpc2900_info = bank-&gt;driver_priv;
 
 #define ISS_PASSWORD &quot;I_know_what_I_am_doing&quot;
 
@@ -699,7 +699,7 @@ COMMAND_HANDLER(lpc2900_handle_write_custom_command)
 	if (ERROR_OK != retval)
 		return retval;
 
-	lpc2900_flash_bank_t *lpc2900_info = bank-&gt;driver_priv;
+	struct lpc2900_flash_bank *lpc2900_info = bank-&gt;driver_priv;
 
 	/* Check if command execution is allowed. */
 	if( !lpc2900_info-&gt;risky )
@@ -810,7 +810,7 @@ COMMAND_HANDLER(lpc2900_handle_secure_sector_command)
 	if (ERROR_OK != retval)
 		return retval;
 
-	lpc2900_flash_bank_t *lpc2900_info = bank-&gt;driver_priv;
+	struct lpc2900_flash_bank *lpc2900_info = bank-&gt;driver_priv;
 
 	/* Check if command execution is allowed. */
 	if( !lpc2900_info-&gt;risky )
@@ -909,7 +909,7 @@ COMMAND_HANDLER(lpc2900_handle_secure_jtag_command)
 	if (ERROR_OK != retval)
 		return retval;
 
-	lpc2900_flash_bank_t *lpc2900_info = bank-&gt;driver_priv;
+	struct lpc2900_flash_bank *lpc2900_info = bank-&gt;driver_priv;
 
 	/* Check if command execution is allowed. */
 	if( !lpc2900_info-&gt;risky )
@@ -1018,7 +1018,7 @@ static int lpc2900_register_commands(struct command_context_s *cmd_ctx)
 /// Evaluate flash bank command.
 FLASH_BANK_COMMAND_HANDLER(lpc2900_flash_bank_command)
 {
-	lpc2900_flash_bank_t *lpc2900_info;
+	struct lpc2900_flash_bank *lpc2900_info;
 
 	if (argc &lt; 6)
 	{
@@ -1026,7 +1026,7 @@ FLASH_BANK_COMMAND_HANDLER(lpc2900_flash_bank_command)
 		return ERROR_FLASH_BANK_INVALID;
 	}
 
-	lpc2900_info = malloc(sizeof(lpc2900_flash_bank_t));
+	lpc2900_info = malloc(sizeof(struct lpc2900_flash_bank));
 	bank-&gt;driver_priv = lpc2900_info;
 
 	/* Get flash clock.
@@ -1076,7 +1076,7 @@ static int lpc2900_erase(struct flash_bank_s *bank, int first, int last)
 	int sector;
 	int last_unsecured_sector;
 	target_t *target = bank-&gt;target;
-	lpc2900_flash_bank_t *lpc2900_info = bank-&gt;driver_priv;
+	struct lpc2900_flash_bank *lpc2900_info = bank-&gt;driver_priv;
 
 
 	status = lpc2900_is_ready(bank);
@@ -1206,7 +1206,7 @@ static int lpc2900_write(struct flash_bank_s *bank, uint8_t *buffer,
 	uint32_t status;
 	uint32_t num_bytes;
 	target_t *target = bank-&gt;target;
-	lpc2900_flash_bank_t *lpc2900_info = bank-&gt;driver_priv;
+	struct lpc2900_flash_bank *lpc2900_info = bank-&gt;driver_priv;
 	int sector;
 	int retval;
 
@@ -1550,7 +1550,7 @@ static int lpc2900_write(struct flash_bank_s *bank, uint8_t *buffer,
  */
 static int lpc2900_probe(struct flash_bank_s *bank)
 {
-	lpc2900_flash_bank_t *lpc2900_info = bank-&gt;driver_priv;
+	struct lpc2900_flash_bank *lpc2900_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 	int i = 0;
 	uint32_t offset;

commit 12f83f0429a84168f8761a575a12c703025dd598
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:38:05 2009 -0800

    lpc288x_flash_bank_t -&gt; struct lpc288x_flash_bank
    
    Remove misleading typedef and redundant suffix from struct lpc288x_flash_bank.

diff --git a/src/flash/lpc288x.c b/src/flash/lpc288x.c
index d681fbf..fd89600 100644
--- a/src/flash/lpc288x.c
+++ b/src/flash/lpc288x.c
@@ -111,7 +111,7 @@ static uint32_t lpc288x_wait_status_busy(flash_bank_t *bank, int timeout)
 /* Read device id register and fill in driver info structure */
 static int lpc288x_read_part_info(struct flash_bank_s *bank)
 {
-	lpc288x_flash_bank_t *lpc288x_info = bank-&gt;driver_priv;
+	struct lpc288x_flash_bank *lpc288x_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 	uint32_t cidr;
 
@@ -167,7 +167,7 @@ static int lpc288x_protect_check(struct flash_bank_s *bank)
 /* flash_bank LPC288x 0 0 0 0 &lt;target#&gt; &lt;cclk&gt; */
 FLASH_BANK_COMMAND_HANDLER(lpc288x_flash_bank_command)
 {
-	lpc288x_flash_bank_t *lpc288x_info;
+	struct lpc288x_flash_bank *lpc288x_info;
 
 	if (argc &lt; 6)
 	{
@@ -175,7 +175,7 @@ FLASH_BANK_COMMAND_HANDLER(lpc288x_flash_bank_command)
 		return ERROR_FLASH_BANK_INVALID;
 	}
 
-	lpc288x_info = malloc(sizeof(lpc288x_flash_bank_t));
+	lpc288x_info = malloc(sizeof(struct lpc288x_flash_bank));
 	bank-&gt;driver_priv = lpc288x_info;
 
 	/* part wasn't probed for info yet */
@@ -193,7 +193,7 @@ FLASH_BANK_COMMAND_HANDLER(lpc288x_flash_bank_command)
 static void lpc288x_set_flash_clk(struct flash_bank_s *bank)
 {
 	uint32_t clk_time;
-	lpc288x_flash_bank_t *lpc288x_info = bank-&gt;driver_priv;
+	struct lpc288x_flash_bank *lpc288x_info = bank-&gt;driver_priv;
 	clk_time = (lpc288x_info-&gt;cclk / 66000) / 3;
 	target_write_u32(bank-&gt;target, F_CTRL, FC_CS | FC_WEN);
 	target_write_u32(bank-&gt;target, F_CLK_TIME, clk_time);
@@ -219,7 +219,7 @@ static void lpc288x_load_timer(int erase, struct target_s *target)
 
 static uint32_t lpc288x_system_ready(struct flash_bank_s *bank)
 {
-	lpc288x_flash_bank_t *lpc288x_info = bank-&gt;driver_priv;
+	struct lpc288x_flash_bank *lpc288x_info = bank-&gt;driver_priv;
 	if (lpc288x_info-&gt;cidr == 0)
 	{
 		return ERROR_FLASH_BANK_NOT_PROBED;
@@ -405,7 +405,7 @@ static int lpc288x_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t of
 static int lpc288x_probe(struct flash_bank_s *bank)
 {
 	/* we only deal with LPC2888 so flash config is fixed */
-	lpc288x_flash_bank_t *lpc288x_info = bank-&gt;driver_priv;
+	struct lpc288x_flash_bank *lpc288x_info = bank-&gt;driver_priv;
 	int retval;
 
 	if (lpc288x_info-&gt;cidr != 0)
diff --git a/src/flash/lpc288x.h b/src/flash/lpc288x.h
index 506988f..5a71ee0 100644
--- a/src/flash/lpc288x.h
+++ b/src/flash/lpc288x.h
@@ -23,7 +23,7 @@
 
 #include &quot;flash.h&quot;
 
-typedef struct lpc288x_flash_bank_s
+struct lpc288x_flash_bank
 {
 	uint32_t working_area;
 	uint32_t working_area_size;
@@ -34,6 +34,6 @@ typedef struct lpc288x_flash_bank_s
 	uint32_t cclk;
 
 	uint32_t sector_size_break;
-} lpc288x_flash_bank_t;
+};
 
 #endif /* lpc288x_H */

commit a15d4cc75eb7bae55db5f6a156cd15918d574688
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:38:03 2009 -0800

    lpc2000_flash_bank_t -&gt; struct lpc2000_flash_bank
    
    Remove misleading typedef and redundant suffix from struct lpc2000_flash_bank.

diff --git a/src/flash/lpc2000.c b/src/flash/lpc2000.c
index 27eec7f..01b17f5 100644
--- a/src/flash/lpc2000.c
+++ b/src/flash/lpc2000.c
@@ -55,7 +55,7 @@
 
 static int lpc2000_build_sector_list(struct flash_bank_s *bank)
 {
-	lpc2000_flash_bank_t *lpc2000_info = bank-&gt;driver_priv;
+	struct lpc2000_flash_bank *lpc2000_info = bank-&gt;driver_priv;
 	int i;
 	uint32_t offset = 0;
 
@@ -237,7 +237,7 @@ static int lpc2000_build_sector_list(struct flash_bank_s *bank)
 static int lpc2000_iap_call(flash_bank_t *bank, int code, uint32_t param_table[5], uint32_t result_table[4])
 {
 	int retval;
-	lpc2000_flash_bank_t *lpc2000_info = bank-&gt;driver_priv;
+	struct lpc2000_flash_bank *lpc2000_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 	mem_param_t mem_params[2];
 	reg_param_t reg_params[5];
@@ -421,7 +421,7 @@ static int lpc2000_iap_blank_check(struct flash_bank_s *bank, int first, int las
  */
 FLASH_BANK_COMMAND_HANDLER(lpc2000_flash_bank_command)
 {
-	lpc2000_flash_bank_t *lpc2000_info;
+	struct lpc2000_flash_bank *lpc2000_info;
 
 	if (argc &lt; 8)
 	{
@@ -429,7 +429,7 @@ FLASH_BANK_COMMAND_HANDLER(lpc2000_flash_bank_command)
 		return ERROR_FLASH_BANK_INVALID;
 	}
 
-	lpc2000_info = malloc(sizeof(lpc2000_flash_bank_t));
+	lpc2000_info = malloc(sizeof(struct lpc2000_flash_bank));
 	bank-&gt;driver_priv = lpc2000_info;
 
 	if (strcmp(args[6], &quot;lpc2000_v1&quot;) == 0)
@@ -479,7 +479,7 @@ FLASH_BANK_COMMAND_HANDLER(lpc2000_flash_bank_command)
 
 static int lpc2000_erase(struct flash_bank_s *bank, int first, int last)
 {
-	lpc2000_flash_bank_t *lpc2000_info = bank-&gt;driver_priv;
+	struct lpc2000_flash_bank *lpc2000_info = bank-&gt;driver_priv;
 	uint32_t param_table[5];
 	uint32_t result_table[4];
 	int status_code;
@@ -537,7 +537,7 @@ static int lpc2000_protect(struct flash_bank_s *bank, int set, int first, int la
 
 static int lpc2000_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
-	lpc2000_flash_bank_t *lpc2000_info = bank-&gt;driver_priv;
+	struct lpc2000_flash_bank *lpc2000_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 	uint32_t dst_min_alignment;
 	uint32_t bytes_remaining = count;
@@ -730,7 +730,7 @@ static int lpc2000_protect_check(struct flash_bank_s *bank)
 
 static int lpc2000_info(struct flash_bank_s *bank, char *buf, int buf_size)
 {
-	lpc2000_flash_bank_t *lpc2000_info = bank-&gt;driver_priv;
+	struct lpc2000_flash_bank *lpc2000_info = bank-&gt;driver_priv;
 
 	snprintf(buf, buf_size, &quot;lpc2000 flash driver variant: %i, clk: %&quot; PRIi32 &quot;kHz&quot; , lpc2000_info-&gt;variant, lpc2000_info-&gt;cclk);
 
diff --git a/src/flash/lpc2000.h b/src/flash/lpc2000.h
index 007cabe..b93deb6 100644
--- a/src/flash/lpc2000.h
+++ b/src/flash/lpc2000.h
@@ -32,7 +32,7 @@ typedef enum
 	lpc1700
 } lpc2000_variant;
 
-typedef struct lpc2000_flash_bank_s
+struct lpc2000_flash_bank
 {
 	lpc2000_variant variant;
 	struct working_area_s *iap_working_area;
@@ -43,7 +43,7 @@ typedef struct lpc2000_flash_bank_s
 	int calc_checksum;
 	uint32_t cmd51_max_buffer;
 	int checksum_vector;
-} lpc2000_flash_bank_t;
+};
 
 enum lpc2000_status_codes
 {

commit 632fd663a821047df9a9b965ec1c35d6b034ebba
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:38:01 2009 -0800

    flash_driver_t -&gt; struct flash_driver
    
    Remove misleading typedef and redundant suffix from struct flash_driver.

diff --git a/src/ecosboard.c b/src/ecosboard.c
index b0f9525..8d85fe6 100644
--- a/src/ecosboard.c
+++ b/src/ecosboard.c
@@ -114,7 +114,7 @@ static bool writeLog = true;
 char hwaddr[512];
 
 
-extern flash_driver_t *flash_drivers[];
+extern struct flash_driver *flash_drivers[];
 extern target_type_t *target_types[];
 
 #ifdef CYGPKG_PROFILE_GPROF
diff --git a/src/flash/aduc702x.c b/src/flash/aduc702x.c
index 61ea36a..c17335e 100644
--- a/src/flash/aduc702x.c
+++ b/src/flash/aduc702x.c
@@ -422,7 +422,7 @@ static int aduc702x_check_flash_completion(target_t* target, unsigned int timeou
         else return ERROR_OK;
 }
 
-flash_driver_t aduc702x_flash = {
+struct flash_driver aduc702x_flash = {
 		.name = &quot;aduc702x&quot;,
 		.flash_bank_command = &amp;aduc702x_flash_bank_command,
 		.erase = &amp;aduc702x_erase,
diff --git a/src/flash/at91sam3.c b/src/flash/at91sam3.c
index 7e6b456..335f8ab 100644
--- a/src/flash/at91sam3.c
+++ b/src/flash/at91sam3.c
@@ -2500,7 +2500,7 @@ sam3_register_commands(struct command_context_s *cmd_ctx)
 	return ERROR_OK;
 }
 
-flash_driver_t at91sam3_flash = {
+struct flash_driver at91sam3_flash = {
 		.name = &quot;at91sam3&quot;,
 		.register_commands = &amp;sam3_register_commands,
 		.flash_bank_command = &amp;sam3_flash_bank_command,
diff --git a/src/flash/at91sam3.h b/src/flash/at91sam3.h
index cea4c3a..4fa7f46 100644
--- a/src/flash/at91sam3.h
+++ b/src/flash/at91sam3.h
@@ -20,4 +20,4 @@
 
 
 // nothing to do here other then export this.
-extern flash_driver_t at91sam3_flash;
+extern struct flash_driver at91sam3_flash;
diff --git a/src/flash/at91sam7.c b/src/flash/at91sam7.c
index fd84e23..c0b516c 100644
--- a/src/flash/at91sam7.c
+++ b/src/flash/at91sam7.c
@@ -1191,7 +1191,7 @@ static int at91sam7_register_commands(struct command_context_s *cmd_ctx)
 	return ERROR_OK;
 }
 
-flash_driver_t at91sam7_flash = {
+struct flash_driver at91sam7_flash = {
 		.name = &quot;at91sam7&quot;,
 		.register_commands = &amp;at91sam7_register_commands,
 		.flash_bank_command = &amp;at91sam7_flash_bank_command,
diff --git a/src/flash/avrf.c b/src/flash/avrf.c
index fec21cb..8dd4339 100644
--- a/src/flash/avrf.c
+++ b/src/flash/avrf.c
@@ -461,7 +461,7 @@ static int avrf_register_commands(struct command_context_s *cmd_ctx)
 	return ERROR_OK;
 }
 
-flash_driver_t avr_flash = {
+struct flash_driver avr_flash = {
 		.name = &quot;avr&quot;,
 		.register_commands = &amp;avrf_register_commands,
 		.flash_bank_command = &amp;avrf_flash_bank_command,
diff --git a/src/flash/cfi.c b/src/flash/cfi.c
index a3187fe..3fa4917 100644
--- a/src/flash/cfi.c
+++ b/src/flash/cfi.c
@@ -2626,7 +2626,7 @@ static int cfi_info(struct flash_bank_s *bank, char *buf, int buf_size)
 	return ERROR_OK;
 }
 
-flash_driver_t cfi_flash = {
+struct flash_driver cfi_flash = {
 		.name = &quot;cfi&quot;,
 		.register_commands = &amp;cfi_register_commands,
 		.flash_bank_command = &amp;cfi_flash_bank_command,
diff --git a/src/flash/ecos.c b/src/flash/ecos.c
index b508cb1..5a0d7ec 100644
--- a/src/flash/ecos.c
+++ b/src/flash/ecos.c
@@ -435,7 +435,7 @@ static int ecosflash_handle_gpnvm_command(struct command_context_s *cmd_ctx, cha
 }
 #endif
 
-flash_driver_t ecosflash_flash = {
+struct flash_driver ecosflash_flash = {
 		.name = &quot;ecosflash&quot;,
 		.register_commands = &amp;ecosflash_register_commands,
 		.flash_bank_command = &amp;ecosflash_flash_bank_command,
diff --git a/src/flash/faux.c b/src/flash/faux.c
index b7622f3..52d3728 100644
--- a/src/flash/faux.c
+++ b/src/flash/faux.c
@@ -128,7 +128,7 @@ static int faux_probe(struct flash_bank_s *bank)
 	return ERROR_OK;
 }
 
-flash_driver_t faux_flash = {
+struct flash_driver faux_flash = {
 		.name = &quot;faux&quot;,
 		.register_commands = &amp;faux_register_commands,
 		.flash_bank_command = &amp;faux_flash_bank_command,
diff --git a/src/flash/flash.c b/src/flash/flash.c
index 2abd8c4..22e2721 100644
--- a/src/flash/flash.c
+++ b/src/flash/flash.c
@@ -35,26 +35,26 @@ static int flash_write_unlock(target_t *target, image_t *image, uint32_t *writte
 
 /* flash drivers
  */
-extern flash_driver_t lpc2000_flash;
-extern flash_driver_t lpc288x_flash;
-extern flash_driver_t lpc2900_flash;
-extern flash_driver_t cfi_flash;
-extern flash_driver_t at91sam3_flash;
-extern flash_driver_t at91sam7_flash;
-extern flash_driver_t str7x_flash;
-extern flash_driver_t str9x_flash;
-extern flash_driver_t aduc702x_flash;
-extern flash_driver_t stellaris_flash;
-extern flash_driver_t str9xpec_flash;
-extern flash_driver_t stm32x_flash;
-extern flash_driver_t tms470_flash;
-extern flash_driver_t ecosflash_flash;
-extern flash_driver_t ocl_flash;
-extern flash_driver_t pic32mx_flash;
-extern flash_driver_t avr_flash;
-extern flash_driver_t faux_flash;
-
-flash_driver_t *flash_drivers[] = {
+extern struct flash_driver lpc2000_flash;
+extern struct flash_driver lpc288x_flash;
+extern struct flash_driver lpc2900_flash;
+extern struct flash_driver cfi_flash;
+extern struct flash_driver at91sam3_flash;
+extern struct flash_driver at91sam7_flash;
+extern struct flash_driver str7x_flash;
+extern struct flash_driver str9x_flash;
+extern struct flash_driver aduc702x_flash;
+extern struct flash_driver stellaris_flash;
+extern struct flash_driver str9xpec_flash;
+extern struct flash_driver stm32x_flash;
+extern struct flash_driver tms470_flash;
+extern struct flash_driver ecosflash_flash;
+extern struct flash_driver ocl_flash;
+extern struct flash_driver pic32mx_flash;
+extern struct flash_driver avr_flash;
+extern struct flash_driver faux_flash;
+
+struct flash_driver *flash_drivers[] = {
 	&amp;lpc2000_flash,
 	&amp;lpc288x_flash,
 	&amp;lpc2900_flash,
diff --git a/src/flash/flash.h b/src/flash/flash.h
index d4abcde..9cd5923 100644
--- a/src/flash/flash.h
+++ b/src/flash/flash.h
@@ -82,7 +82,7 @@ struct flash_bank_s;
  * corresponding static &lt;code&gt;flash_driver_&lt;i&gt;callback&lt;/i&gt;()&lt;/code&gt;
  * routine in flash.c.
  */
-typedef struct flash_driver_s
+struct flash_driver
 {
 	/**
 	 * Gives a human-readable name of this flash driver,
@@ -224,7 +224,7 @@ typedef struct flash_driver_s
 	 * @returns ERROR_OK if successful; otherwise, an error code.
 	 */
 	int (*auto_probe)(struct flash_bank_s *bank);
-} flash_driver_t;
+};
 
 #define FLASH_BANK_COMMAND_HANDLER(name) static __FLASH_BANK_COMMAND(name)
 
@@ -242,7 +242,7 @@ typedef struct flash_bank_s
 {
 	struct target_s *target; /**&lt; Target to which this bank belongs. */
 
-	flash_driver_t *driver; /**&lt; Driver for this bank. */
+	struct flash_driver *driver; /**&lt; Driver for this bank. */
 	void *driver_priv; /**&lt; Private driver storage pointer */
 
 	int bank_number; /**&lt; The 'bank' (or chip number) of this instance. */
diff --git a/src/flash/lpc2000.c b/src/flash/lpc2000.c
index 308a25c..27eec7f 100644
--- a/src/flash/lpc2000.c
+++ b/src/flash/lpc2000.c
@@ -788,7 +788,7 @@ static int lpc2000_register_commands(struct command_context_s *cmd_ctx)
 	return ERROR_OK;
 }
 
-flash_driver_t lpc2000_flash = {
+struct flash_driver lpc2000_flash = {
 		.name = &quot;lpc2000&quot;,
 		.register_commands = &amp;lpc2000_register_commands,
 		.flash_bank_command = &amp;lpc2000_flash_bank_command,
diff --git a/src/flash/lpc288x.c b/src/flash/lpc288x.c
index 52d31a8..d681fbf 100644
--- a/src/flash/lpc288x.c
+++ b/src/flash/lpc288x.c
@@ -471,7 +471,7 @@ static int lpc288x_protect(struct flash_bank_s *bank, int set, int first, int la
 	return ERROR_OK;
 }
 
-flash_driver_t lpc288x_flash = {
+struct flash_driver lpc288x_flash = {
 		.name = &quot;lpc288x&quot;,
 		.flash_bank_command = &amp;lpc288x_flash_bank_command,
 		.erase = &amp;lpc288x_erase,
diff --git a/src/flash/lpc2900.c b/src/flash/lpc2900.c
index fd265bd..0f972be 100644
--- a/src/flash/lpc2900.c
+++ b/src/flash/lpc2900.c
@@ -1830,7 +1830,7 @@ static int lpc2900_info(struct flash_bank_s *bank, char *buf, int buf_size)
 }
 
 
-flash_driver_t lpc2900_flash =
+struct flash_driver lpc2900_flash =
 {
 	.name               = &quot;lpc2900&quot;,
 	.register_commands  = lpc2900_register_commands,
diff --git a/src/flash/ocl.c b/src/flash/ocl.c
index 239f9f5..bd7577e 100644
--- a/src/flash/ocl.c
+++ b/src/flash/ocl.c
@@ -348,7 +348,7 @@ static int ocl_auto_probe(struct flash_bank_s *bank)
 	return ERROR_OK;
 }
 
-flash_driver_t ocl_flash = {
+struct flash_driver ocl_flash = {
 		.name = &quot;ocl&quot;,
 		.flash_bank_command = &amp;ocl_flash_bank_command,
 		.erase = &amp;ocl_erase,
diff --git a/src/flash/pic32mx.c b/src/flash/pic32mx.c
index 438630a..18dfa97 100644
--- a/src/flash/pic32mx.c
+++ b/src/flash/pic32mx.c
@@ -904,7 +904,7 @@ static int pic32mx_register_commands(struct command_context_s *cmd_ctx)
 	return ERROR_OK;
 }
 
-flash_driver_t pic32mx_flash = {
+struct flash_driver pic32mx_flash = {
 		.name = &quot;pic32mx&quot;,
 		.register_commands = &amp;pic32mx_register_commands,
 		.flash_bank_command = &amp;pic32mx_flash_bank_command,
diff --git a/src/flash/stellaris.c b/src/flash/stellaris.c
index dc35c59..9bd329d 100644
--- a/src/flash/stellaris.c
+++ b/src/flash/stellaris.c
@@ -1172,7 +1172,7 @@ static int stellaris_register_commands(struct command_context_s *cmd_ctx)
 }
 
 
-flash_driver_t stellaris_flash = {
+struct flash_driver stellaris_flash = {
 		.name = &quot;stellaris&quot;,
 		.register_commands = &amp;stellaris_register_commands,
 		.flash_bank_command = &amp;stellaris_flash_bank_command,
diff --git a/src/flash/stm32x.c b/src/flash/stm32x.c
index 8725fad..eab9708 100644
--- a/src/flash/stm32x.c
+++ b/src/flash/stm32x.c
@@ -1205,7 +1205,7 @@ static int stm32x_register_commands(struct command_context_s *cmd_ctx)
 	return ERROR_OK;
 }
 
-flash_driver_t stm32x_flash = {
+struct flash_driver stm32x_flash = {
 		.name = &quot;stm32x&quot;,
 		.register_commands = &amp;stm32x_register_commands,
 		.flash_bank_command = &amp;stm32x_flash_bank_command,
diff --git a/src/flash/str7x.c b/src/flash/str7x.c
index dbb5872..1b4056b 100644
--- a/src/flash/str7x.c
+++ b/src/flash/str7x.c
@@ -683,7 +683,7 @@ static int str7x_register_commands(struct command_context_s *cmd_ctx)
 	return ERROR_OK;
 }
 
-flash_driver_t str7x_flash = {
+struct flash_driver str7x_flash = {
 		.name = &quot;str7x&quot;,
 		.register_commands = &amp;str7x_register_commands,
 		.flash_bank_command = &amp;str7x_flash_bank_command,
diff --git a/src/flash/str9x.c b/src/flash/str9x.c
index caabd99..7117582 100644
--- a/src/flash/str9x.c
+++ b/src/flash/str9x.c
@@ -687,7 +687,7 @@ static int str9x_register_commands(struct command_context_s *cmd_ctx)
 	return ERROR_OK;
 }
 
-flash_driver_t str9x_flash = {
+struct flash_driver str9x_flash = {
 		.name = &quot;str9x&quot;,
 		.register_commands = &amp;str9x_register_commands,
 		.flash_bank_command = &amp;str9x_flash_bank_command,
diff --git a/src/flash/str9xpec.c b/src/flash/str9xpec.c
index 6b85e6a..aa19b75 100644
--- a/src/flash/str9xpec.c
+++ b/src/flash/str9xpec.c
@@ -1205,7 +1205,7 @@ static int str9xpec_register_commands(struct command_context_s *cmd_ctx)
 	return ERROR_OK;
 }
 
-flash_driver_t str9xpec_flash = {
+struct flash_driver str9xpec_flash = {
 		.name = &quot;str9xpec&quot;,
 		.register_commands = &amp;str9xpec_register_commands,
 		.flash_bank_command = &amp;str9xpec_flash_bank_command,
diff --git a/src/flash/tms470.c b/src/flash/tms470.c
index 75b233d..4149d9c 100644
--- a/src/flash/tms470.c
+++ b/src/flash/tms470.c
@@ -1236,7 +1236,7 @@ FLASH_BANK_COMMAND_HANDLER(tms470_flash_bank_command)
 	return ERROR_OK;
 }
 
-flash_driver_t tms470_flash = {
+struct flash_driver tms470_flash = {
 		.name = &quot;tms470&quot;,
 		.register_commands = &amp;tms470_register_commands,
 		.flash_bank_command = &amp;tms470_flash_bank_command,

commit fb59ec739a3ae79937020dc2fe5413be0e73e8d3
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:37:54 2009 -0800

    flash_sector_t -&gt; struct flash_sector
    
    Remove misleading typedef and redundant suffix from struct flash_sector.

diff --git a/src/flash/aduc702x.c b/src/flash/aduc702x.c
index 0e862e9..61ea36a 100644
--- a/src/flash/aduc702x.c
+++ b/src/flash/aduc702x.c
@@ -85,7 +85,7 @@ static int aduc702x_build_sector_list(struct flash_bank_s *bank)
 
         // sector size is 512
         bank-&gt;num_sectors = bank-&gt;size / 512;
-        bank-&gt;sectors = malloc(sizeof(flash_sector_t) * bank-&gt;num_sectors);
+        bank-&gt;sectors = malloc(sizeof(struct flash_sector) * bank-&gt;num_sectors);
         for (i = 0; i &lt; bank-&gt;num_sectors; ++i)
         {
                 bank-&gt;sectors[i].offset = offset;
diff --git a/src/flash/at91sam7.c b/src/flash/at91sam7.c
index ede5491..fd84e23 100644
--- a/src/flash/at91sam7.c
+++ b/src/flash/at91sam7.c
@@ -551,7 +551,7 @@ static int at91sam7_read_part_info(struct flash_bank_s *bank)
 		t_bank-&gt;num_sectors = sectors_num;
 
 		/* allocate sectors */
-		t_bank-&gt;sectors = malloc(sectors_num * sizeof(flash_sector_t));
+		t_bank-&gt;sectors = malloc(sectors_num * sizeof(struct flash_sector));
 		for (sec = 0; sec &lt; sectors_num; sec++)
 		{
 			t_bank-&gt;sectors[sec].offset = sec * pages_per_sector * page_size;
@@ -804,7 +804,7 @@ FLASH_BANK_COMMAND_HANDLER(at91sam7_flash_bank_command)
 		t_bank-&gt;num_sectors = num_sectors;
 
 		/* allocate sectors */
-		t_bank-&gt;sectors = malloc(num_sectors * sizeof(flash_sector_t));
+		t_bank-&gt;sectors = malloc(num_sectors * sizeof(struct flash_sector));
 		for (sec = 0; sec &lt; num_sectors; sec++)
 		{
 			t_bank-&gt;sectors[sec].offset = sec * pages_per_sector * page_size;
diff --git a/src/flash/avrf.c b/src/flash/avrf.c
index 7a7eddd..fec21cb 100644
--- a/src/flash/avrf.c
+++ b/src/flash/avrf.c
@@ -306,7 +306,7 @@ static int avrf_probe(struct flash_bank_s *bank)
 		bank-&gt;base = 0x00000000;
 		bank-&gt;size = (avr_info-&gt;flash_page_size * avr_info-&gt;flash_page_num);
 		bank-&gt;num_sectors = avr_info-&gt;flash_page_num;
-		bank-&gt;sectors = malloc(sizeof(flash_sector_t) * avr_info-&gt;flash_page_num);
+		bank-&gt;sectors = malloc(sizeof(struct flash_sector) * avr_info-&gt;flash_page_num);
 
 		for (i = 0; i &lt; avr_info-&gt;flash_page_num; i++)
 		{
diff --git a/src/flash/cfi.c b/src/flash/cfi.c
index 8c20e47..a3187fe 100644
--- a/src/flash/cfi.c
+++ b/src/flash/cfi.c
@@ -2391,7 +2391,7 @@ static int cfi_probe(struct flash_bank_s *bank)
 	{
 		/* a device might have only one erase block, spanning the whole device */
 		bank-&gt;num_sectors = 1;
-		bank-&gt;sectors = malloc(sizeof(flash_sector_t));
+		bank-&gt;sectors = malloc(sizeof(struct flash_sector));
 
 		bank-&gt;sectors[sector].offset = 0x0;
 		bank-&gt;sectors[sector].size = bank-&gt;size;
@@ -2408,7 +2408,7 @@ static int cfi_probe(struct flash_bank_s *bank)
 		}
 
 		bank-&gt;num_sectors = num_sectors;
-		bank-&gt;sectors = malloc(sizeof(flash_sector_t) * num_sectors);
+		bank-&gt;sectors = malloc(sizeof(struct flash_sector) * num_sectors);
 
 		for (i = 0; i &lt; cfi_info-&gt;num_erase_regions; i++)
 		{
diff --git a/src/flash/ecos.c b/src/flash/ecos.c
index 2154da0..b508cb1 100644
--- a/src/flash/ecos.c
+++ b/src/flash/ecos.c
@@ -130,7 +130,7 @@ FLASH_BANK_COMMAND_HANDLER(ecosflash_flash_bank_command)
 	int i = 0;
 	uint32_t offset = 0;
 	bank-&gt;num_sectors = bank-&gt;size/sectorSize;
-	bank-&gt;sectors = malloc(sizeof(flash_sector_t) * bank-&gt;num_sectors);
+	bank-&gt;sectors = malloc(sizeof(struct flash_sector) * bank-&gt;num_sectors);
 	for (i = 0; i &lt; bank-&gt;num_sectors; i++)
 	{
 		bank-&gt;sectors[i].offset = offset;
diff --git a/src/flash/faux.c b/src/flash/faux.c
index d0f3f70..b7622f3 100644
--- a/src/flash/faux.c
+++ b/src/flash/faux.c
@@ -66,7 +66,7 @@ FLASH_BANK_COMMAND_HANDLER(faux_flash_bank_command)
 	int i = 0;
 	uint32_t offset = 0;
 	bank-&gt;num_sectors = bank-&gt;size/sectorSize;
-	bank-&gt;sectors = malloc(sizeof(flash_sector_t) * bank-&gt;num_sectors);
+	bank-&gt;sectors = malloc(sizeof(struct flash_sector) * bank-&gt;num_sectors);
 	for (i = 0; i &lt; bank-&gt;num_sectors; i++)
 	{
 		bank-&gt;sectors[i].offset = offset;
diff --git a/src/flash/flash.h b/src/flash/flash.h
index 7afb132..d4abcde 100644
--- a/src/flash/flash.h
+++ b/src/flash/flash.h
@@ -38,7 +38,7 @@ struct image_s;
  * within a flash bank.  A single bank typically consists of multiple
  * sectors, each of which can be erased and protected independently.
  */
-typedef struct flash_sector_s
+struct flash_sector
 {
 	/// Bus offset from start of the flash chip (in bytes).
 	uint32_t offset;
@@ -55,7 +55,7 @@ typedef struct flash_sector_s
 	 * @c flash_driver_s::protect_check.
 	 */
 	int is_protected;
-} flash_sector_t;
+};
 
 struct flash_bank_s;
 
@@ -259,7 +259,7 @@ typedef struct flash_bank_s
 	 */
 	int num_sectors;
 	/// Array of sectors, allocated and initilized by the flash driver
-	flash_sector_t *sectors;
+	struct flash_sector *sectors;
 
 	struct flash_bank_s *next; /**&lt; The next flash bank on this chip */
 } flash_bank_t;
diff --git a/src/flash/lpc2000.c b/src/flash/lpc2000.c
index 0481355..308a25c 100644
--- a/src/flash/lpc2000.c
+++ b/src/flash/lpc2000.c
@@ -68,7 +68,7 @@ static int lpc2000_build_sector_list(struct flash_bank_s *bank)
 		if (bank-&gt;size == 128 * 1024)
 		{
 			bank-&gt;num_sectors = 16;
-			bank-&gt;sectors = malloc(sizeof(flash_sector_t) * 16);
+			bank-&gt;sectors = malloc(sizeof(struct flash_sector) * 16);
 			for (i = 0; i &lt; 16; i++)
 			{
 				bank-&gt;sectors[i].offset = offset;
@@ -81,7 +81,7 @@ static int lpc2000_build_sector_list(struct flash_bank_s *bank)
 		else if (bank-&gt;size == 256 * 1024)
 		{
 			bank-&gt;num_sectors = 18;
-			bank-&gt;sectors = malloc(sizeof(flash_sector_t) * 18);
+			bank-&gt;sectors = malloc(sizeof(struct flash_sector) * 18);
 
 			for (i = 0; i &lt; 8; i++)
 			{
@@ -152,7 +152,7 @@ static int lpc2000_build_sector_list(struct flash_bank_s *bank)
 				break;
 		}
 
-		bank-&gt;sectors = malloc(sizeof(flash_sector_t) * bank-&gt;num_sectors);
+		bank-&gt;sectors = malloc(sizeof(struct flash_sector) * bank-&gt;num_sectors);
 
 		for (i = 0; i &lt; bank-&gt;num_sectors; i++)
 		{
@@ -206,7 +206,7 @@ static int lpc2000_build_sector_list(struct flash_bank_s *bank)
 				exit(-1);
 		}
 
-		bank-&gt;sectors = malloc(sizeof(flash_sector_t) * bank-&gt;num_sectors);
+		bank-&gt;sectors = malloc(sizeof(struct flash_sector) * bank-&gt;num_sectors);
 
 		for(i = 0; i &lt; bank-&gt;num_sectors; i++)
 		{
diff --git a/src/flash/lpc288x.c b/src/flash/lpc288x.c
index 3c3e1e4..52d31a8 100644
--- a/src/flash/lpc288x.c
+++ b/src/flash/lpc288x.c
@@ -137,7 +137,7 @@ static int lpc288x_read_part_info(struct flash_bank_s *bank)
 	/* setup the sector info... */
 	offset = bank-&gt;base;
 	bank-&gt;num_sectors = 23;
-	bank-&gt;sectors = malloc(sizeof(flash_sector_t) * 23);
+	bank-&gt;sectors = malloc(sizeof(struct flash_sector) * 23);
 
 	for (i = 0; i &lt; 15; i++)
 	{
diff --git a/src/flash/lpc2900.c b/src/flash/lpc2900.c
index 8359379..fd265bd 100644
--- a/src/flash/lpc2900.c
+++ b/src/flash/lpc2900.c
@@ -1702,7 +1702,7 @@ static int lpc2900_probe(struct flash_bank_s *bank)
 	 * the logical flash number are translated into the physical flash numbers
 	 * of the device.
 	 */
-	bank-&gt;sectors = malloc(sizeof(flash_sector_t) * bank-&gt;num_sectors);
+	bank-&gt;sectors = malloc(sizeof(struct flash_sector) * bank-&gt;num_sectors);
 
 	offset = 0;
 	for (i = 0; i &lt; bank-&gt;num_sectors; i++)
diff --git a/src/flash/ocl.c b/src/flash/ocl.c
index 63e9282..239f9f5 100644
--- a/src/flash/ocl.c
+++ b/src/flash/ocl.c
@@ -290,7 +290,7 @@ static int ocl_probe(struct flash_bank_s *bank)
 	ocl-&gt;buflen = dcc_buffer[0] &amp; 0xffff;
 	ocl-&gt;bufalign = dcc_buffer[0] &gt;&gt; 16;
 
-	bank-&gt;sectors = realloc(bank-&gt;sectors, sizeof(flash_sector_t)*bank-&gt;num_sectors);
+	bank-&gt;sectors = realloc(bank-&gt;sectors, sizeof(struct flash_sector)*bank-&gt;num_sectors);
 	if (bank-&gt;num_sectors == 0)
 	{
 		LOG_ERROR(&quot;number of sectors shall be non zero value&quot;);
diff --git a/src/flash/pic32mx.c b/src/flash/pic32mx.c
index 1408fe9..438630a 100644
--- a/src/flash/pic32mx.c
+++ b/src/flash/pic32mx.c
@@ -607,7 +607,7 @@ static int pic32mx_probe(struct flash_bank_s *bank)
 	bank-&gt;num_sectors = num_pages;
 	bank-&gt;chip_width = 4;
 	bank-&gt;bus_width  = 4;
-	bank-&gt;sectors = malloc(sizeof(flash_sector_t) * num_pages);
+	bank-&gt;sectors = malloc(sizeof(struct flash_sector) * num_pages);
 
 	for (i = 0; i &lt; num_pages; i++)
 	{
diff --git a/src/flash/stellaris.c b/src/flash/stellaris.c
index d66b9a8..dc35c59 100644
--- a/src/flash/stellaris.c
+++ b/src/flash/stellaris.c
@@ -592,7 +592,7 @@ static int stellaris_read_part_info(struct flash_bank_s *bank)
 
 	/* provide this for the benefit of the higher flash driver layers */
 	bank-&gt;num_sectors = stellaris_info-&gt;num_pages;
-	bank-&gt;sectors = malloc(sizeof(flash_sector_t) * bank-&gt;num_sectors);
+	bank-&gt;sectors = malloc(sizeof(struct flash_sector) * bank-&gt;num_sectors);
 	for (i = 0; i &lt; bank-&gt;num_sectors; i++)
 	{
 		bank-&gt;sectors[i].offset = i * stellaris_info-&gt;pagesize;
diff --git a/src/flash/stm32x.c b/src/flash/stm32x.c
index 41b9008..8725fad 100644
--- a/src/flash/stm32x.c
+++ b/src/flash/stm32x.c
@@ -756,7 +756,7 @@ static int stm32x_probe(struct flash_bank_s *bank)
 	bank-&gt;base = 0x08000000;
 	bank-&gt;size = (num_pages * page_size);
 	bank-&gt;num_sectors = num_pages;
-	bank-&gt;sectors = malloc(sizeof(flash_sector_t) * num_pages);
+	bank-&gt;sectors = malloc(sizeof(struct flash_sector) * num_pages);
 
 	for (i = 0; i &lt; num_pages; i++)
 	{
diff --git a/src/flash/str7x.c b/src/flash/str7x.c
index 9738180..dbb5872 100644
--- a/src/flash/str7x.c
+++ b/src/flash/str7x.c
@@ -81,7 +81,7 @@ static int str7x_build_block_list(struct flash_bank_s *bank)
 	num_sectors = b0_sectors + b1_sectors;
 
 	bank-&gt;num_sectors = num_sectors;
-	bank-&gt;sectors = malloc(sizeof(flash_sector_t) * num_sectors);
+	bank-&gt;sectors = malloc(sizeof(struct flash_sector) * num_sectors);
 	str7x_info-&gt;sector_bits = malloc(sizeof(uint32_t) * num_sectors);
 
 	num_sectors = 0;
diff --git a/src/flash/str9x.c b/src/flash/str9x.c
index cdee571..caabd99 100644
--- a/src/flash/str9x.c
+++ b/src/flash/str9x.c
@@ -83,7 +83,7 @@ static int str9x_build_block_list(struct flash_bank_s *bank)
 	num_sectors = b0_sectors + b1_sectors;
 
 	bank-&gt;num_sectors = num_sectors;
-	bank-&gt;sectors = malloc(sizeof(flash_sector_t) * num_sectors);
+	bank-&gt;sectors = malloc(sizeof(struct flash_sector) * num_sectors);
 	str9x_info-&gt;sector_bits = malloc(sizeof(uint32_t) * num_sectors);
 
 	num_sectors = 0;
diff --git a/src/flash/str9xpec.c b/src/flash/str9xpec.c
index 83566df..6b85e6a 100644
--- a/src/flash/str9xpec.c
+++ b/src/flash/str9xpec.c
@@ -205,7 +205,7 @@ static int str9xpec_build_block_list(struct flash_bank_s *bank)
 	num_sectors = b0_sectors + b1_sectors;
 
 	bank-&gt;num_sectors = num_sectors;
-	bank-&gt;sectors = malloc(sizeof(flash_sector_t) * num_sectors);
+	bank-&gt;sectors = malloc(sizeof(struct flash_sector) * num_sectors);
 	str9xpec_info-&gt;sector_bits = malloc(sizeof(uint32_t) * num_sectors);
 
 	num_sectors = 0;
diff --git a/src/flash/tms470.c b/src/flash/tms470.c
index d33ccd6..75b233d 100644
--- a/src/flash/tms470.c
+++ b/src/flash/tms470.c
@@ -28,7 +28,7 @@
                       Internal Support, Helpers
    ---------------------------------------------------------------------- */
 
-const flash_sector_t TMS470R1A256_SECTORS[] = {
+const struct flash_sector TMS470R1A256_SECTORS[] = {
 	{0x00000000, 0x00002000, -1, -1},
 	{0x00002000, 0x00002000, -1, -1},
 	{0x00004000, 0x00002000, -1, -1},
@@ -48,7 +48,7 @@ const flash_sector_t TMS470R1A256_SECTORS[] = {
 #define TMS470R1A256_NUM_SECTORS \
 	(sizeof(TMS470R1A256_SECTORS)/sizeof(TMS470R1A256_SECTORS[0]))
 
-const flash_sector_t TMS470R1A288_BANK0_SECTORS[] = {
+const struct flash_sector TMS470R1A288_BANK0_SECTORS[] = {
 	{0x00000000, 0x00002000, -1, -1},
 	{0x00002000, 0x00002000, -1, -1},
 	{0x00004000, 0x00002000, -1, -1},
@@ -58,7 +58,7 @@ const flash_sector_t TMS470R1A288_BANK0_SECTORS[] = {
 #define TMS470R1A288_BANK0_NUM_SECTORS \
 	(sizeof(TMS470R1A288_BANK0_SECTORS)/sizeof(TMS470R1A288_BANK0_SECTORS[0]))
 
-const flash_sector_t TMS470R1A288_BANK1_SECTORS[] = {
+const struct flash_sector TMS470R1A288_BANK1_SECTORS[] = {
 	{0x00040000, 0x00010000, -1, -1},
 	{0x00050000, 0x00010000, -1, -1},
 	{0x00060000, 0x00010000, -1, -1},
@@ -68,7 +68,7 @@ const flash_sector_t TMS470R1A288_BANK1_SECTORS[] = {
 #define TMS470R1A288_BANK1_NUM_SECTORS \
 	(sizeof(TMS470R1A288_BANK1_SECTORS)/sizeof(TMS470R1A288_BANK1_SECTORS[0]))
 
-const flash_sector_t TMS470R1A384_BANK0_SECTORS[] = {
+const struct flash_sector TMS470R1A384_BANK0_SECTORS[] = {
 	{0x00000000, 0x00002000, -1, -1},
 	{0x00002000, 0x00002000, -1, -1},
 	{0x00004000, 0x00004000, -1, -1},
@@ -84,7 +84,7 @@ const flash_sector_t TMS470R1A384_BANK0_SECTORS[] = {
 #define TMS470R1A384_BANK0_NUM_SECTORS \
 	(sizeof(TMS470R1A384_BANK0_SECTORS)/sizeof(TMS470R1A384_BANK0_SECTORS[0]))
 
-const flash_sector_t TMS470R1A384_BANK1_SECTORS[] = {
+const struct flash_sector TMS470R1A384_BANK1_SECTORS[] = {
 	{0x00020000, 0x00008000, -1, -1},
 	{0x00028000, 0x00008000, -1, -1},
 	{0x00030000, 0x00008000, -1, -1},
@@ -94,7 +94,7 @@ const flash_sector_t TMS470R1A384_BANK1_SECTORS[] = {
 #define TMS470R1A384_BANK1_NUM_SECTORS \
 	(sizeof(TMS470R1A384_BANK1_SECTORS)/sizeof(TMS470R1A384_BANK1_SECTORS[0]))
 
-const flash_sector_t TMS470R1A384_BANK2_SECTORS[] = {
+const struct flash_sector TMS470R1A384_BANK2_SECTORS[] = {
 	{0x00040000, 0x00008000, -1, -1},
 	{0x00048000, 0x00008000, -1, -1},
 	{0x00050000, 0x00008000, -1, -1},

commit 98d7ed8523f4324b21963d6b15391df91680a658
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:37:48 2009 -0800

    faux_flash_bank_t -&gt; struct faux_flash_bank
    
    Remove misleading typedef and redundant suffix from struct faux_flash_bank.

diff --git a/src/flash/faux.c b/src/flash/faux.c
index b997b87..d0f3f70 100644
--- a/src/flash/faux.c
+++ b/src/flash/faux.c
@@ -25,12 +25,12 @@
 #include &quot;image.h&quot;
 
 
-typedef struct faux_flash_bank_s
+struct faux_flash_bank
 {
 	struct target_s *target;
 	uint8_t *memory;
 	uint32_t start_address;
-} faux_flash_bank_t;
+};
 
 static const int sectorSize = 0x10000;
 
@@ -39,7 +39,7 @@ static const int sectorSize = 0x10000;
  */
 FLASH_BANK_COMMAND_HANDLER(faux_flash_bank_command)
 {
-	faux_flash_bank_t *info;
+	struct faux_flash_bank *info;
 
 	if (argc &lt; 6)
 	{
@@ -47,7 +47,7 @@ FLASH_BANK_COMMAND_HANDLER(faux_flash_bank_command)
 		return ERROR_FLASH_BANK_INVALID;
 	}
 
-	info = malloc(sizeof(faux_flash_bank_t));
+	info = malloc(sizeof(struct faux_flash_bank));
 	if (info == NULL)
 	{
 		LOG_ERROR(&quot;no memory for flash bank info&quot;);
@@ -94,7 +94,7 @@ static int faux_register_commands(struct command_context_s *cmd_ctx)
 
 static int faux_erase(struct flash_bank_s *bank, int first, int last)
 {
-	faux_flash_bank_t *info = bank-&gt;driver_priv;
+	struct faux_flash_bank *info = bank-&gt;driver_priv;
 	memset(info-&gt;memory + first*sectorSize, 0xff, sectorSize*(last-first + 1));
 	return ERROR_OK;
 }
@@ -107,7 +107,7 @@ static int faux_protect(struct flash_bank_s *bank, int set, int first, int last)
 
 static int faux_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
-	faux_flash_bank_t *info = bank-&gt;driver_priv;
+	struct faux_flash_bank *info = bank-&gt;driver_priv;
 	memcpy(info-&gt;memory + offset, buffer, count);
 	return ERROR_OK;
 }

commit de1781b7fa5aa73ba4c74dcc14e449acb44182ec
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:37:45 2009 -0800

    ecosflash_flash_bank_t -&gt; struct ecosflash_flash_bank
    
    Remove misleading typedef and redundant suffix from struct ecosflash_flash_bank.

diff --git a/src/flash/ecos.c b/src/flash/ecos.c
index 2c3190a..2154da0 100644
--- a/src/flash/ecos.c
+++ b/src/flash/ecos.c
@@ -33,14 +33,14 @@ static uint32_t ecosflash_wait_status_busy(flash_bank_t *bank, uint32_t waitbits
 static int ecosflash_handle_gpnvm_command(struct command_context_s *cmd_ctx, char *cmd, char **args, int argc);
 #endif
 
-typedef struct ecosflash_flash_bank_s
+struct ecosflash_flash_bank
 {
 	struct target_s *target;
 	working_area_t *write_algorithm;
 	working_area_t *erase_check_algorithm;
 	char *driverPath;
 	uint32_t start_address;
-} ecosflash_flash_bank_t;
+};
 
 static const int sectorSize = 0x10000;
 
@@ -106,7 +106,7 @@ flash_errmsg(int err)
  */
 FLASH_BANK_COMMAND_HANDLER(ecosflash_flash_bank_command)
 {
-	ecosflash_flash_bank_t *info;
+	struct ecosflash_flash_bank *info;
 
 	if (argc &lt; 7)
 	{
@@ -114,7 +114,7 @@ FLASH_BANK_COMMAND_HANDLER(ecosflash_flash_bank_command)
 		return ERROR_FLASH_BANK_INVALID;
 	}
 
-	info = malloc(sizeof(ecosflash_flash_bank_t));
+	info = malloc(sizeof(struct ecosflash_flash_bank));
 	if (info == NULL)
 	{
 		LOG_ERROR(&quot;no memory for flash bank info&quot;);
@@ -149,7 +149,7 @@ FLASH_BANK_COMMAND_HANDLER(ecosflash_flash_bank_command)
 	return ERROR_OK;
 }
 
-static int loadDriver(ecosflash_flash_bank_t *info)
+static int loadDriver(struct ecosflash_flash_bank *info)
 {
 	uint32_t buf_cnt;
 	uint32_t image_size;
@@ -198,7 +198,7 @@ static int const OFFSET_FLASH_SIZE = 0x8;
 static int const OFFSET_GET_WORKAREA = 0x18;
 static int const OFFSET_GET_WORKAREA_SIZE = 0x4;
 
-static int runCode(ecosflash_flash_bank_t *info,
+static int runCode(struct ecosflash_flash_bank *info,
 		uint32_t codeStart, uint32_t codeStop, uint32_t r0, uint32_t r1, uint32_t r2,
 		uint32_t *result,
 		/* timeout in ms */
@@ -239,7 +239,7 @@ static int runCode(ecosflash_flash_bank_t *info,
 	return ERROR_OK;
 }
 
-static int eCosBoard_erase(ecosflash_flash_bank_t *info, uint32_t address, uint32_t len)
+static int eCosBoard_erase(struct ecosflash_flash_bank *info, uint32_t address, uint32_t len)
 {
 	int retval;
 	int timeout = (len / 20480 + 1) * 1000; /*asume 20 KB/s*/
@@ -270,7 +270,7 @@ static int eCosBoard_erase(ecosflash_flash_bank_t *info, uint32_t address, uint3
 	return ERROR_OK;
 }
 
-static int eCosBoard_flash(ecosflash_flash_bank_t *info, void *data, uint32_t address, uint32_t len)
+static int eCosBoard_flash(struct ecosflash_flash_bank *info, void *data, uint32_t address, uint32_t len)
 {
 	target_t *target = info-&gt;target;
 	const int chunk = 8192;
@@ -344,7 +344,7 @@ static int ecosflash_register_commands(struct command_context_s *cmd_ctx)
 #if 0
 static void command(flash_bank_t *bank, uint8_t cmd, uint8_t *cmd_buf)
 {
-	ecosflash_flash_bank_t *info = bank-&gt;driver_priv;
+	struct ecosflash_flash_bank *info = bank-&gt;driver_priv;
 	int i;
 
 	if (info-&gt;target-&gt;endianness == TARGET_LITTLE_ENDIAN)
@@ -385,7 +385,7 @@ static uint32_t ecosflash_address(struct flash_bank_s *bank, uint32_t address)
 static int ecosflash_erase(struct flash_bank_s *bank, int first, int last)
 {
 	struct flash_bank_s *c = bank;
-	ecosflash_flash_bank_t *info = bank-&gt;driver_priv;
+	struct ecosflash_flash_bank *info = bank-&gt;driver_priv;
 	return eCosBoard_erase(info, c-&gt;base + first*sectorSize, sectorSize*(last-first + 1));
 }
 
@@ -396,7 +396,7 @@ static int ecosflash_protect(struct flash_bank_s *bank, int set, int first, int
 
 static int ecosflash_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
-	ecosflash_flash_bank_t *info = bank-&gt;driver_priv;
+	struct ecosflash_flash_bank *info = bank-&gt;driver_priv;
 	struct flash_bank_s *c = bank;
 	return eCosBoard_flash(info, buffer, c-&gt;base + offset, count);
 }
@@ -408,7 +408,7 @@ static int ecosflash_protect_check(struct flash_bank_s *bank)
 
 static int ecosflash_info(struct flash_bank_s *bank, char *buf, int buf_size)
 {
-	ecosflash_flash_bank_t *info = bank-&gt;driver_priv;
+	struct ecosflash_flash_bank *info = bank-&gt;driver_priv;
 	snprintf(buf, buf_size, &quot;eCos flash driver: %s&quot;, info-&gt;driverPath);
 	return ERROR_OK;
 }

commit 453a103f48242b2b48031c7d268782df0347f81f
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:37:43 2009 -0800

    cfi_fixup_t -&gt; struct cfi_fixup
    
    Remove misleading typedef and redundant suffix from struct cfi_fixup.

diff --git a/src/flash/cfi.c b/src/flash/cfi.c
index 5cfac15..8c20e47 100644
--- a/src/flash/cfi.c
+++ b/src/flash/cfi.c
@@ -47,7 +47,7 @@ static void cfi_fixup_0002_unlock_addresses(flash_bank_t *flash, void *param);
 static void cfi_fixup_atmel_reversed_erase_regions(flash_bank_t *flash, void *param);
 
 /* fixup after reading cmdset 0002 primary query table */
-static const cfi_fixup_t cfi_0002_fixups[] = {
+static const struct cfi_fixup cfi_0002_fixups[] = {
 	{CFI_MFR_SST, 0x00D4, cfi_fixup_0002_unlock_addresses, &amp;cfi_unlock_addresses[CFI_UNLOCK_5555_2AAA]},
 	{CFI_MFR_SST, 0x00D5, cfi_fixup_0002_unlock_addresses, &amp;cfi_unlock_addresses[CFI_UNLOCK_5555_2AAA]},
 	{CFI_MFR_SST, 0x00D6, cfi_fixup_0002_unlock_addresses, &amp;cfi_unlock_addresses[CFI_UNLOCK_5555_2AAA]},
@@ -63,14 +63,14 @@ static const cfi_fixup_t cfi_0002_fixups[] = {
 };
 
 /* fixup after reading cmdset 0001 primary query table */
-static const cfi_fixup_t cfi_0001_fixups[] = {
+static const struct cfi_fixup cfi_0001_fixups[] = {
 	{0, 0, NULL, NULL}
 };
 
-static void cfi_fixup(flash_bank_t *bank, const cfi_fixup_t *fixups)
+static void cfi_fixup(flash_bank_t *bank, const struct cfi_fixup *fixups)
 {
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
-	const cfi_fixup_t *f;
+	const struct cfi_fixup *f;
 
 	for (f = fixups; f-&gt;fixup; f++)
 	{
diff --git a/src/flash/cfi.h b/src/flash/cfi.h
index 73f8ea1..7763aff 100644
--- a/src/flash/cfi.h
+++ b/src/flash/cfi.h
@@ -142,13 +142,13 @@ struct cfi_unlock_addresses
 	uint32_t unlock2;
 };
 
-typedef struct cfi_fixup_s
+struct cfi_fixup
 {
 	uint16_t mfr;
 	uint16_t id;
 	void (*fixup)(flash_bank_t *flash, void *param);
 	void *param;
-} cfi_fixup_t;
+};
 
 #define CFI_MFR_AMD		0x0001
 #define CFI_MFR_FUJITSU	0x0004

commit 4c28cc68edfb6a3ced1e31fae8a91fbbbc2f02cf
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:37:40 2009 -0800

    cfi_unlock_addresses_t -&gt; struct cfi_unlock_addresses
    
    Remove misleading typedef and redundant suffix from struct cfi_unlock_addresses.

diff --git a/src/flash/cfi.c b/src/flash/cfi.c
index ad311d4..5cfac15 100644
--- a/src/flash/cfi.c
+++ b/src/flash/cfi.c
@@ -35,7 +35,7 @@
 /* defines internal maximum size for code fragment in cfi_intel_write_block() */
 #define CFI_MAX_INTEL_CODESIZE 256
 
-static cfi_unlock_addresses_t cfi_unlock_addresses[] =
+static struct cfi_unlock_addresses cfi_unlock_addresses[] =
 {
 	[CFI_UNLOCK_555_2AA] = { .unlock1 = 0x555, .unlock2 = 0x2aa },
 	[CFI_UNLOCK_5555_2AAA] = { .unlock1 = 0x5555, .unlock2 = 0x2aaa },
@@ -2111,7 +2111,7 @@ static void cfi_fixup_0002_unlock_addresses(flash_bank_t *bank, void *param)
 {
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	struct cfi_spansion_pri_ext *pri_ext = cfi_info-&gt;pri_ext;
-	cfi_unlock_addresses_t *unlock_addresses = param;
+	struct cfi_unlock_addresses *unlock_addresses = param;
 
 	pri_ext-&gt;_unlock1 = unlock_addresses-&gt;unlock1;
 	pri_ext-&gt;_unlock2 = unlock_addresses-&gt;unlock2;
diff --git a/src/flash/cfi.h b/src/flash/cfi.h
index 78fdd4d..73f8ea1 100644
--- a/src/flash/cfi.h
+++ b/src/flash/cfi.h
@@ -136,11 +136,11 @@ enum {
 	CFI_UNLOCK_5555_2AAA,
 };
 
-typedef struct cfi_unlock_addresses_s
+struct cfi_unlock_addresses
 {
 	uint32_t unlock1;
 	uint32_t unlock2;
-} cfi_unlock_addresses_t;
+};
 
 typedef struct cfi_fixup_s
 {

commit 0139e7d51abfba861ff9d3c8c1bc1b12e79c696a
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:32:35 2009 -0800

    cfi_spansion_pri_ext_t -&gt; struct cfi_spansion_pri_ext
    
    Remove misleading typedef and redundant suffix from struct cfi_spansion_pri_ext.

diff --git a/src/flash/cfi.c b/src/flash/cfi.c
index fe80c74..ad311d4 100644
--- a/src/flash/cfi.c
+++ b/src/flash/cfi.c
@@ -382,7 +382,7 @@ static int cfi_read_spansion_pri_ext(flash_bank_t *bank)
 {
 	int retval;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
-	cfi_spansion_pri_ext_t *pri_ext = malloc(sizeof(cfi_spansion_pri_ext_t));
+	struct cfi_spansion_pri_ext *pri_ext = malloc(sizeof(struct cfi_spansion_pri_ext));
 	target_t *target = bank-&gt;target;
 	uint8_t command[8];
 
@@ -448,7 +448,7 @@ static int cfi_read_atmel_pri_ext(flash_bank_t *bank)
 	int retval;
 	struct cfi_atmel_pri_ext atmel_pri_ext;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
-	cfi_spansion_pri_ext_t *pri_ext = malloc(sizeof(cfi_spansion_pri_ext_t));
+	struct cfi_spansion_pri_ext *pri_ext = malloc(sizeof(struct cfi_spansion_pri_ext));
 	target_t *target = bank-&gt;target;
 	uint8_t command[8];
 
@@ -457,7 +457,7 @@ static int cfi_read_atmel_pri_ext(flash_bank_t *bank)
 	 * We read the atmel table, and prepare a valid AMD/Spansion query table.
 	 */
 
-	memset(pri_ext, 0, sizeof(cfi_spansion_pri_ext_t));
+	memset(pri_ext, 0, sizeof(struct cfi_spansion_pri_ext));
 
 	cfi_info-&gt;pri_ext = pri_ext;
 
@@ -528,7 +528,7 @@ static int cfi_spansion_info(struct flash_bank_s *bank, char *buf, int buf_size)
 {
 	int printed;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
-	cfi_spansion_pri_ext_t *pri_ext = cfi_info-&gt;pri_ext;
+	struct cfi_spansion_pri_ext *pri_ext = cfi_info-&gt;pri_ext;
 
 	printed = snprintf(buf, buf_size, &quot;\nSpansion primary algorithm extend information:\n&quot;);
 	buf += printed;
@@ -700,7 +700,7 @@ static int cfi_spansion_erase(struct flash_bank_s *bank, int first, int last)
 {
 	int retval;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
-	cfi_spansion_pri_ext_t *pri_ext = cfi_info-&gt;pri_ext;
+	struct cfi_spansion_pri_ext *pri_ext = cfi_info-&gt;pri_ext;
 	target_t *target = bank-&gt;target;
 	uint8_t command[8];
 	int i;
@@ -1263,7 +1263,7 @@ cleanup:
 static int cfi_spansion_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint32_t address, uint32_t count)
 {
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
-	cfi_spansion_pri_ext_t *pri_ext = cfi_info-&gt;pri_ext;
+	struct cfi_spansion_pri_ext *pri_ext = cfi_info-&gt;pri_ext;
 	target_t *target = bank-&gt;target;
 	reg_param_t reg_params[10];
 	armv4_5_algorithm_t armv4_5_info;
@@ -1690,7 +1690,7 @@ static int cfi_spansion_write_word(struct flash_bank_s *bank, uint8_t *word, uin
 {
 	int retval;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
-	cfi_spansion_pri_ext_t *pri_ext = cfi_info-&gt;pri_ext;
+	struct cfi_spansion_pri_ext *pri_ext = cfi_info-&gt;pri_ext;
 	target_t *target = bank-&gt;target;
 	uint8_t command[8];
 
@@ -1738,7 +1738,7 @@ static int cfi_spansion_write_words(struct flash_bank_s *bank, uint8_t *word, ui
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 	uint8_t command[8];
-	cfi_spansion_pri_ext_t *pri_ext = cfi_info-&gt;pri_ext;
+	struct cfi_spansion_pri_ext *pri_ext = cfi_info-&gt;pri_ext;
 
 	/* Calculate buffer size and boundary mask */
 	uint32_t buffersize = (1UL &lt;&lt; cfi_info-&gt;max_buf_write_size) * (bank-&gt;bus_width / bank-&gt;chip_width);
@@ -2079,7 +2079,7 @@ static void cfi_fixup_atmel_reversed_erase_regions(flash_bank_t *bank, void *par
 {
 	(void) param;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
-	cfi_spansion_pri_ext_t *pri_ext = cfi_info-&gt;pri_ext;
+	struct cfi_spansion_pri_ext *pri_ext = cfi_info-&gt;pri_ext;
 
 	pri_ext-&gt;_reversed_geometry = 1;
 }
@@ -2088,7 +2088,7 @@ static void cfi_fixup_0002_erase_regions(flash_bank_t *bank, void *param)
 {
 	int i;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
-	cfi_spansion_pri_ext_t *pri_ext = cfi_info-&gt;pri_ext;
+	struct cfi_spansion_pri_ext *pri_ext = cfi_info-&gt;pri_ext;
 	(void) param;
 
 	if ((pri_ext-&gt;_reversed_geometry) || (pri_ext-&gt;TopBottom == 3))
@@ -2110,7 +2110,7 @@ static void cfi_fixup_0002_erase_regions(flash_bank_t *bank, void *param)
 static void cfi_fixup_0002_unlock_addresses(flash_bank_t *bank, void *param)
 {
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
-	cfi_spansion_pri_ext_t *pri_ext = cfi_info-&gt;pri_ext;
+	struct cfi_spansion_pri_ext *pri_ext = cfi_info-&gt;pri_ext;
 	cfi_unlock_addresses_t *unlock_addresses = param;
 
 	pri_ext-&gt;_unlock1 = unlock_addresses-&gt;unlock1;
@@ -2481,7 +2481,7 @@ static int cfi_spansion_protect_check(struct flash_bank_s *bank)
 {
 	int retval;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
-	cfi_spansion_pri_ext_t *pri_ext = cfi_info-&gt;pri_ext;
+	struct cfi_spansion_pri_ext *pri_ext = cfi_info-&gt;pri_ext;
 	target_t *target = bank-&gt;target;
 	uint8_t command[8];
 	int i;
diff --git a/src/flash/cfi.h b/src/flash/cfi.h
index 565f8ef..78fdd4d 100644
--- a/src/flash/cfi.h
+++ b/src/flash/cfi.h
@@ -96,7 +96,7 @@ struct cfi_intel_pri_ext
 /* Spansion primary extended query table as defined for and used by
  * the linux kernel cfi driver (as of 2.6.15)
  */
-typedef struct cfi_spansion_pri_ext_s
+struct cfi_spansion_pri_ext
 {
 	uint8_t  pri[3];
 	uint8_t  major_version;
@@ -115,7 +115,7 @@ typedef struct cfi_spansion_pri_ext_s
 	int _reversed_geometry;
 	uint32_t _unlock1;
 	uint32_t _unlock2;
-} cfi_spansion_pri_ext_t;
+};
 
 /* Atmel primary extended query table as defined for and used by
  * the linux kernel cfi driver (as of 2.6.20+)
diff --git a/src/flash/non_cfi.c b/src/flash/non_cfi.c
index 515b0be..0da8ba3 100644
--- a/src/flash/non_cfi.c
+++ b/src/flash/non_cfi.c
@@ -456,7 +456,7 @@ void cfi_fixup_non_cfi(flash_bank_t *bank)
 
 	if (cfi_info-&gt;pri_id == 0x2)
 	{
-		cfi_spansion_pri_ext_t *pri_ext = malloc(sizeof(cfi_spansion_pri_ext_t));
+		struct cfi_spansion_pri_ext *pri_ext = malloc(sizeof(struct cfi_spansion_pri_ext));
 
 		pri_ext-&gt;pri[0] = 'P';
 		pri_ext-&gt;pri[1] = 'R';

commit 2ded74115d2b1dcea5a1c1a327a0da159cf1b962
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:32:27 2009 -0800

    cfi_atmel_pri_ext_t -&gt; struct cfi_atmel_pri_ext
    
    Remove misleading typedef and redundant suffix from struct cfi_atmel_pri_ext.

diff --git a/src/flash/cfi.c b/src/flash/cfi.c
index 39eb16c..fe80c74 100644
--- a/src/flash/cfi.c
+++ b/src/flash/cfi.c
@@ -446,7 +446,7 @@ static int cfi_read_spansion_pri_ext(flash_bank_t *bank)
 static int cfi_read_atmel_pri_ext(flash_bank_t *bank)
 {
 	int retval;
-	cfi_atmel_pri_ext_t atmel_pri_ext;
+	struct cfi_atmel_pri_ext atmel_pri_ext;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	cfi_spansion_pri_ext_t *pri_ext = malloc(sizeof(cfi_spansion_pri_ext_t));
 	target_t *target = bank-&gt;target;
diff --git a/src/flash/cfi.h b/src/flash/cfi.h
index 89ddc40..565f8ef 100644
--- a/src/flash/cfi.h
+++ b/src/flash/cfi.h
@@ -120,7 +120,7 @@ typedef struct cfi_spansion_pri_ext_s
 /* Atmel primary extended query table as defined for and used by
  * the linux kernel cfi driver (as of 2.6.20+)
  */
-typedef struct cfi_atmel_pri_ext_s
+struct cfi_atmel_pri_ext
 {
 	uint8_t pri[3];
 	uint8_t major_version;
@@ -129,7 +129,7 @@ typedef struct cfi_atmel_pri_ext_s
 	uint8_t bottom_boot;
 	uint8_t burst_mode;
 	uint8_t page_mode;
-} cfi_atmel_pri_ext_t;
+};
 
 enum {
 	CFI_UNLOCK_555_2AA,

commit 1f328f2885f370aa9f79d2ed08515821bc8d856a
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:32:19 2009 -0800

    cfi_intel_pri_ext_t -&gt; struct cfi_intel_pri_ext
    
    Remove misleading typedef and redundant suffix from struct cfi_intel_pri_ext.

diff --git a/src/flash/cfi.c b/src/flash/cfi.c
index a50a349..39eb16c 100644
--- a/src/flash/cfi.c
+++ b/src/flash/cfi.c
@@ -316,7 +316,7 @@ static int cfi_read_intel_pri_ext(flash_bank_t *bank)
 {
 	int retval;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
-	cfi_intel_pri_ext_t *pri_ext = malloc(sizeof(cfi_intel_pri_ext_t));
+	struct cfi_intel_pri_ext *pri_ext = malloc(sizeof(struct cfi_intel_pri_ext));
 	target_t *target = bank-&gt;target;
 	uint8_t command[8];
 
@@ -563,7 +563,7 @@ static int cfi_intel_info(struct flash_bank_s *bank, char *buf, int buf_size)
 {
 	int printed;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
-	cfi_intel_pri_ext_t *pri_ext = cfi_info-&gt;pri_ext;
+	struct cfi_intel_pri_ext *pri_ext = cfi_info-&gt;pri_ext;
 
 	printed = snprintf(buf, buf_size, &quot;\nintel primary algorithm extend information:\n&quot;);
 	buf += printed;
@@ -801,7 +801,7 @@ static int cfi_intel_protect(struct flash_bank_s *bank, int set, int first, int
 {
 	int retval;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
-	cfi_intel_pri_ext_t *pri_ext = cfi_info-&gt;pri_ext;
+	struct cfi_intel_pri_ext *pri_ext = cfi_info-&gt;pri_ext;
 	target_t *target = bank-&gt;target;
 	uint8_t command[8];
 	int retry = 0;
@@ -2448,7 +2448,7 @@ static int cfi_intel_protect_check(struct flash_bank_s *bank)
 {
 	int retval;
 	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
-	cfi_intel_pri_ext_t *pri_ext = cfi_info-&gt;pri_ext;
+	struct cfi_intel_pri_ext *pri_ext = cfi_info-&gt;pri_ext;
 	target_t *target = bank-&gt;target;
 	uint8_t command[CFI_MAX_BUS_WIDTH];
 	int i;
diff --git a/src/flash/cfi.h b/src/flash/cfi.h
index 9cf7d58..89ddc40 100644
--- a/src/flash/cfi.h
+++ b/src/flash/cfi.h
@@ -76,7 +76,7 @@ struct cfi_flash_bank
  * as defined for the Advanced+ Boot Block Flash Memory (C3)
  * and used by the linux kernel cfi driver (as of 2.6.14)
  */
-typedef struct cfi_intel_pri_ext_s
+struct cfi_intel_pri_ext
 {
 	char pri[3];
 	uint8_t major_version;
@@ -91,7 +91,7 @@ typedef struct cfi_intel_pri_ext_s
 	uint8_t fact_prot_reg_size;
 	uint8_t user_prot_reg_size;
 	uint8_t extra[0];
-} cfi_intel_pri_ext_t;
+};
 
 /* Spansion primary extended query table as defined for and used by
  * the linux kernel cfi driver (as of 2.6.15)

commit 3be0edbc5e5b121caee3ebdf987f5e9c47d4257e
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:31:42 2009 -0800

    cfi_flash_bank_t -&gt; struct cfi_flash_bank
    
    Remove misleading typedef and redundant suffix from struct cfi_flash_bank.

diff --git a/src/flash/cfi.c b/src/flash/cfi.c
index 88f57df..a50a349 100644
--- a/src/flash/cfi.c
+++ b/src/flash/cfi.c
@@ -69,7 +69,7 @@ static const cfi_fixup_t cfi_0001_fixups[] = {
 
 static void cfi_fixup(flash_bank_t *bank, const cfi_fixup_t *fixups)
 {
-	cfi_flash_bank_t *cfi_info = bank-&gt;driver_priv;
+	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	const cfi_fixup_t *f;
 
 	for (f = fixups; f-&gt;fixup; f++)
@@ -85,7 +85,7 @@ static void cfi_fixup(flash_bank_t *bank, const cfi_fixup_t *fixups)
 /* inline uint32_t flash_address(flash_bank_t *bank, int sector, uint32_t offset) */
 static __inline__ uint32_t flash_address(flash_bank_t *bank, int sector, uint32_t offset)
 {
-	cfi_flash_bank_t *cfi_info = bank-&gt;driver_priv;
+	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 
 	if (cfi_info-&gt;x16_as_x8) offset *= 2;
 
@@ -179,7 +179,7 @@ static uint8_t cfi_get_u8(flash_bank_t *bank, int sector, uint32_t offset)
 static uint16_t cfi_query_u16(flash_bank_t *bank, int sector, uint32_t offset)
 {
 	target_t *target = bank-&gt;target;
-	cfi_flash_bank_t *cfi_info = bank-&gt;driver_priv;
+	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	uint8_t data[CFI_MAX_BUS_WIDTH * 2];
 
 	if (cfi_info-&gt;x16_as_x8)
@@ -201,7 +201,7 @@ static uint16_t cfi_query_u16(flash_bank_t *bank, int sector, uint32_t offset)
 static uint32_t cfi_query_u32(flash_bank_t *bank, int sector, uint32_t offset)
 {
 	target_t *target = bank-&gt;target;
-	cfi_flash_bank_t *cfi_info = bank-&gt;driver_priv;
+	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	uint8_t data[CFI_MAX_BUS_WIDTH * 4];
 
 	if (cfi_info-&gt;x16_as_x8)
@@ -280,7 +280,7 @@ uint8_t cfi_intel_wait_status_busy(flash_bank_t *bank, int timeout)
 int cfi_spansion_wait_status_busy(flash_bank_t *bank, int timeout)
 {
 	uint8_t status, oldstatus;
-	cfi_flash_bank_t *cfi_info = bank-&gt;driver_priv;
+	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 
 	oldstatus = cfi_get_u8(bank, 0, 0x0);
 
@@ -315,7 +315,7 @@ int cfi_spansion_wait_status_busy(flash_bank_t *bank, int timeout)
 static int cfi_read_intel_pri_ext(flash_bank_t *bank)
 {
 	int retval;
-	cfi_flash_bank_t *cfi_info = bank-&gt;driver_priv;
+	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	cfi_intel_pri_ext_t *pri_ext = malloc(sizeof(cfi_intel_pri_ext_t));
 	target_t *target = bank-&gt;target;
 	uint8_t command[8];
@@ -381,7 +381,7 @@ static int cfi_read_intel_pri_ext(flash_bank_t *bank)
 static int cfi_read_spansion_pri_ext(flash_bank_t *bank)
 {
 	int retval;
-	cfi_flash_bank_t *cfi_info = bank-&gt;driver_priv;
+	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	cfi_spansion_pri_ext_t *pri_ext = malloc(sizeof(cfi_spansion_pri_ext_t));
 	target_t *target = bank-&gt;target;
 	uint8_t command[8];
@@ -447,7 +447,7 @@ static int cfi_read_atmel_pri_ext(flash_bank_t *bank)
 {
 	int retval;
 	cfi_atmel_pri_ext_t atmel_pri_ext;
-	cfi_flash_bank_t *cfi_info = bank-&gt;driver_priv;
+	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	cfi_spansion_pri_ext_t *pri_ext = malloc(sizeof(cfi_spansion_pri_ext_t));
 	target_t *target = bank-&gt;target;
 	uint8_t command[8];
@@ -512,7 +512,7 @@ static int cfi_read_atmel_pri_ext(flash_bank_t *bank)
 
 static int cfi_read_0002_pri_ext(flash_bank_t *bank)
 {
-	cfi_flash_bank_t *cfi_info = bank-&gt;driver_priv;
+	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 
 	if (cfi_info-&gt;manufacturer == CFI_MFR_ATMEL)
 	{
@@ -527,7 +527,7 @@ static int cfi_read_0002_pri_ext(flash_bank_t *bank)
 static int cfi_spansion_info(struct flash_bank_s *bank, char *buf, int buf_size)
 {
 	int printed;
-	cfi_flash_bank_t *cfi_info = bank-&gt;driver_priv;
+	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	cfi_spansion_pri_ext_t *pri_ext = cfi_info-&gt;pri_ext;
 
 	printed = snprintf(buf, buf_size, &quot;\nSpansion primary algorithm extend information:\n&quot;);
@@ -562,7 +562,7 @@ static int cfi_spansion_info(struct flash_bank_s *bank, char *buf, int buf_size)
 static int cfi_intel_info(struct flash_bank_s *bank, char *buf, int buf_size)
 {
 	int printed;
-	cfi_flash_bank_t *cfi_info = bank-&gt;driver_priv;
+	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	cfi_intel_pri_ext_t *pri_ext = cfi_info-&gt;pri_ext;
 
 	printed = snprintf(buf, buf_size, &quot;\nintel primary algorithm extend information:\n&quot;);
@@ -603,7 +603,7 @@ static int cfi_register_commands(struct command_context_s *cmd_ctx)
  */
 FLASH_BANK_COMMAND_HANDLER(cfi_flash_bank_command)
 {
-	cfi_flash_bank_t *cfi_info;
+	struct cfi_flash_bank *cfi_info;
 
 	if (argc &lt; 6)
 	{
@@ -622,7 +622,7 @@ FLASH_BANK_COMMAND_HANDLER(cfi_flash_bank_command)
 		return ERROR_FLASH_BANK_INVALID;
 	}
 
-	cfi_info = malloc(sizeof(cfi_flash_bank_t));
+	cfi_info = malloc(sizeof(struct cfi_flash_bank));
 	cfi_info-&gt;probed = 0;
 	bank-&gt;driver_priv = cfi_info;
 
@@ -655,7 +655,7 @@ FLASH_BANK_COMMAND_HANDLER(cfi_flash_bank_command)
 static int cfi_intel_erase(struct flash_bank_s *bank, int first, int last)
 {
 	int retval;
-	cfi_flash_bank_t *cfi_info = bank-&gt;driver_priv;
+	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 	uint8_t command[8];
 	int i;
@@ -699,7 +699,7 @@ static int cfi_intel_erase(struct flash_bank_s *bank, int first, int last)
 static int cfi_spansion_erase(struct flash_bank_s *bank, int first, int last)
 {
 	int retval;
-	cfi_flash_bank_t *cfi_info = bank-&gt;driver_priv;
+	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	cfi_spansion_pri_ext_t *pri_ext = cfi_info-&gt;pri_ext;
 	target_t *target = bank-&gt;target;
 	uint8_t command[8];
@@ -764,7 +764,7 @@ static int cfi_spansion_erase(struct flash_bank_s *bank, int first, int last)
 
 static int cfi_erase(struct flash_bank_s *bank, int first, int last)
 {
-	cfi_flash_bank_t *cfi_info = bank-&gt;driver_priv;
+	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 
 	if (bank-&gt;target-&gt;state != TARGET_HALTED)
 	{
@@ -800,7 +800,7 @@ static int cfi_erase(struct flash_bank_s *bank, int first, int last)
 static int cfi_intel_protect(struct flash_bank_s *bank, int set, int first, int last)
 {
 	int retval;
-	cfi_flash_bank_t *cfi_info = bank-&gt;driver_priv;
+	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	cfi_intel_pri_ext_t *pri_ext = cfi_info-&gt;pri_ext;
 	target_t *target = bank-&gt;target;
 	uint8_t command[8];
@@ -916,7 +916,7 @@ static int cfi_intel_protect(struct flash_bank_s *bank, int set, int first, int
 
 static int cfi_protect(struct flash_bank_s *bank, int set, int first, int last)
 {
-	cfi_flash_bank_t *cfi_info = bank-&gt;driver_priv;
+	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 
 	if (bank-&gt;target-&gt;state != TARGET_HALTED)
 	{
@@ -1018,7 +1018,7 @@ static uint32_t cfi_command_val(flash_bank_t *bank, uint8_t cmd)
 
 static int cfi_intel_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint32_t address, uint32_t count)
 {
-	cfi_flash_bank_t *cfi_info = bank-&gt;driver_priv;
+	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 	reg_param_t reg_params[7];
 	armv4_5_algorithm_t armv4_5_info;
@@ -1262,7 +1262,7 @@ cleanup:
 
 static int cfi_spansion_write_block(struct flash_bank_s *bank, uint8_t *buffer, uint32_t address, uint32_t count)
 {
-	cfi_flash_bank_t *cfi_info = bank-&gt;driver_priv;
+	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	cfi_spansion_pri_ext_t *pri_ext = cfi_info-&gt;pri_ext;
 	target_t *target = bank-&gt;target;
 	reg_param_t reg_params[10];
@@ -1562,7 +1562,7 @@ static int cfi_spansion_write_block(struct flash_bank_s *bank, uint8_t *buffer,
 static int cfi_intel_write_word(struct flash_bank_s *bank, uint8_t *word, uint32_t address)
 {
 	int retval;
-	cfi_flash_bank_t *cfi_info = bank-&gt;driver_priv;
+	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 	uint8_t command[8];
 
@@ -1596,7 +1596,7 @@ static int cfi_intel_write_word(struct flash_bank_s *bank, uint8_t *word, uint32
 static int cfi_intel_write_words(struct flash_bank_s *bank, uint8_t *word, uint32_t wordcount, uint32_t address)
 {
 	int retval;
-	cfi_flash_bank_t *cfi_info = bank-&gt;driver_priv;
+	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 	uint8_t command[8];
 
@@ -1689,7 +1689,7 @@ static int cfi_intel_write_words(struct flash_bank_s *bank, uint8_t *word, uint3
 static int cfi_spansion_write_word(struct flash_bank_s *bank, uint8_t *word, uint32_t address)
 {
 	int retval;
-	cfi_flash_bank_t *cfi_info = bank-&gt;driver_priv;
+	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	cfi_spansion_pri_ext_t *pri_ext = cfi_info-&gt;pri_ext;
 	target_t *target = bank-&gt;target;
 	uint8_t command[8];
@@ -1735,7 +1735,7 @@ static int cfi_spansion_write_word(struct flash_bank_s *bank, uint8_t *word, uin
 static int cfi_spansion_write_words(struct flash_bank_s *bank, uint8_t *word, uint32_t wordcount, uint32_t address)
 {
 	int retval;
-	cfi_flash_bank_t *cfi_info = bank-&gt;driver_priv;
+	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 	uint8_t command[8];
 	cfi_spansion_pri_ext_t *pri_ext = cfi_info-&gt;pri_ext;
@@ -1826,7 +1826,7 @@ static int cfi_spansion_write_words(struct flash_bank_s *bank, uint8_t *word, ui
 
 static int cfi_write_word(struct flash_bank_s *bank, uint8_t *word, uint32_t address)
 {
-	cfi_flash_bank_t *cfi_info = bank-&gt;driver_priv;
+	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 
 	switch (cfi_info-&gt;pri_id)
 	{
@@ -1847,7 +1847,7 @@ static int cfi_write_word(struct flash_bank_s *bank, uint8_t *word, uint32_t add
 
 static int cfi_write_words(struct flash_bank_s *bank, uint8_t *word, uint32_t wordcount, uint32_t address)
 {
-	cfi_flash_bank_t *cfi_info = bank-&gt;driver_priv;
+	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 
 	switch (cfi_info-&gt;pri_id)
 	{
@@ -1868,7 +1868,7 @@ static int cfi_write_words(struct flash_bank_s *bank, uint8_t *word, uint32_t wo
 
 int cfi_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
-	cfi_flash_bank_t *cfi_info = bank-&gt;driver_priv;
+	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 	uint32_t address = bank-&gt;base + offset;	/* address of first byte to be programmed */
 	uint32_t write_p, copy_p;
@@ -2078,7 +2078,7 @@ int cfi_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint3
 static void cfi_fixup_atmel_reversed_erase_regions(flash_bank_t *bank, void *param)
 {
 	(void) param;
-	cfi_flash_bank_t *cfi_info = bank-&gt;driver_priv;
+	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	cfi_spansion_pri_ext_t *pri_ext = cfi_info-&gt;pri_ext;
 
 	pri_ext-&gt;_reversed_geometry = 1;
@@ -2087,7 +2087,7 @@ static void cfi_fixup_atmel_reversed_erase_regions(flash_bank_t *bank, void *par
 static void cfi_fixup_0002_erase_regions(flash_bank_t *bank, void *param)
 {
 	int i;
-	cfi_flash_bank_t *cfi_info = bank-&gt;driver_priv;
+	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	cfi_spansion_pri_ext_t *pri_ext = cfi_info-&gt;pri_ext;
 	(void) param;
 
@@ -2109,7 +2109,7 @@ static void cfi_fixup_0002_erase_regions(flash_bank_t *bank, void *param)
 
 static void cfi_fixup_0002_unlock_addresses(flash_bank_t *bank, void *param)
 {
-	cfi_flash_bank_t *cfi_info = bank-&gt;driver_priv;
+	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	cfi_spansion_pri_ext_t *pri_ext = cfi_info-&gt;pri_ext;
 	cfi_unlock_addresses_t *unlock_addresses = param;
 
@@ -2120,7 +2120,7 @@ static void cfi_fixup_0002_unlock_addresses(flash_bank_t *bank, void *param)
 
 static int cfi_query_string(struct flash_bank_s *bank, int address)
 {
-	cfi_flash_bank_t *cfi_info = bank-&gt;driver_priv;
+	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 	int retval;
 	uint8_t command[8];
@@ -2158,7 +2158,7 @@ static int cfi_query_string(struct flash_bank_s *bank, int address)
 
 static int cfi_probe(struct flash_bank_s *bank)
 {
-	cfi_flash_bank_t *cfi_info = bank-&gt;driver_priv;
+	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 	uint8_t command[8];
 	int num_sectors = 0;
@@ -2437,7 +2437,7 @@ static int cfi_probe(struct flash_bank_s *bank)
 
 static int cfi_auto_probe(struct flash_bank_s *bank)
 {
-	cfi_flash_bank_t *cfi_info = bank-&gt;driver_priv;
+	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	if (cfi_info-&gt;probed)
 		return ERROR_OK;
 	return cfi_probe(bank);
@@ -2447,7 +2447,7 @@ static int cfi_auto_probe(struct flash_bank_s *bank)
 static int cfi_intel_protect_check(struct flash_bank_s *bank)
 {
 	int retval;
-	cfi_flash_bank_t *cfi_info = bank-&gt;driver_priv;
+	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	cfi_intel_pri_ext_t *pri_ext = cfi_info-&gt;pri_ext;
 	target_t *target = bank-&gt;target;
 	uint8_t command[CFI_MAX_BUS_WIDTH];
@@ -2480,7 +2480,7 @@ static int cfi_intel_protect_check(struct flash_bank_s *bank)
 static int cfi_spansion_protect_check(struct flash_bank_s *bank)
 {
 	int retval;
-	cfi_flash_bank_t *cfi_info = bank-&gt;driver_priv;
+	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	cfi_spansion_pri_ext_t *pri_ext = cfi_info-&gt;pri_ext;
 	target_t *target = bank-&gt;target;
 	uint8_t command[8];
@@ -2520,7 +2520,7 @@ static int cfi_spansion_protect_check(struct flash_bank_s *bank)
 
 static int cfi_protect_check(struct flash_bank_s *bank)
 {
-	cfi_flash_bank_t *cfi_info = bank-&gt;driver_priv;
+	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 
 	if (bank-&gt;target-&gt;state != TARGET_HALTED)
 	{
@@ -2551,7 +2551,7 @@ static int cfi_protect_check(struct flash_bank_s *bank)
 static int cfi_info(struct flash_bank_s *bank, char *buf, int buf_size)
 {
 	int printed;
-	cfi_flash_bank_t *cfi_info = bank-&gt;driver_priv;
+	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 
 	if (cfi_info-&gt;qry[0] == (char)-1)
 	{
diff --git a/src/flash/cfi.h b/src/flash/cfi.h
index eab2dcd..9cf7d58 100644
--- a/src/flash/cfi.h
+++ b/src/flash/cfi.h
@@ -25,7 +25,7 @@
 #define CFI_STATUS_POLL_MASK_DQ5_DQ6_DQ7 0xE0 /* DQ5..DQ7 */
 #define CFI_STATUS_POLL_MASK_DQ6_DQ7     0xC0 /* DQ6..DQ7 */
 
-typedef struct cfi_flash_bank_s
+struct cfi_flash_bank
 {
 	working_area_t *write_algorithm;
 
@@ -70,7 +70,7 @@ typedef struct cfi_flash_bank_s
 
 	void *pri_ext;
 	void *alt_ext;
-} cfi_flash_bank_t;
+};
 
 /* Intel primary extended query table
  * as defined for the Advanced+ Boot Block Flash Memory (C3)
diff --git a/src/flash/non_cfi.c b/src/flash/non_cfi.c
index 34acd2a..515b0be 100644
--- a/src/flash/non_cfi.c
+++ b/src/flash/non_cfi.c
@@ -405,7 +405,7 @@ static non_cfi_t non_cfi_flashes[] = {
 
 void cfi_fixup_non_cfi(flash_bank_t *bank)
 {
-	cfi_flash_bank_t *cfi_info = bank-&gt;driver_priv;
+	struct cfi_flash_bank *cfi_info = bank-&gt;driver_priv;
 	non_cfi_t *non_cfi = non_cfi_flashes;
 
 	for (non_cfi = non_cfi_flashes; non_cfi-&gt;mfr; non_cfi++)

commit a7a8a1c9e2e86902a3a5864cd257e01e0b3f6da6
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:31:10 2009 -0800

    avrf_flash_bank_t -&gt; struct avrf_flash_bank
    
    Remove misleading typedef and redundant suffix from struct avrf_flash_bank.

diff --git a/src/flash/avrf.c b/src/flash/avrf.c
index 07b54c5..7a7eddd 100644
--- a/src/flash/avrf.c
+++ b/src/flash/avrf.c
@@ -182,7 +182,7 @@ static int avr_jtagprg_writeflashpage(avr_common_t *avr, uint8_t *page_buf, uint
 
 FLASH_BANK_COMMAND_HANDLER(avrf_flash_bank_command)
 {
-	avrf_flash_bank_t *avrf_info;
+	struct avrf_flash_bank *avrf_info;
 
 	if (argc &lt; 6)
 	{
@@ -190,7 +190,7 @@ FLASH_BANK_COMMAND_HANDLER(avrf_flash_bank_command)
 		return ERROR_FLASH_BANK_INVALID;
 	}
 
-	avrf_info = malloc(sizeof(avrf_flash_bank_t));
+	avrf_info = malloc(sizeof(struct avrf_flash_bank));
 	bank-&gt;driver_priv = avrf_info;
 
 	avrf_info-&gt;probed = 0;
@@ -264,7 +264,7 @@ static int avrf_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offse
 static int avrf_probe(struct flash_bank_s *bank)
 {
 	target_t *target = bank-&gt;target;
-	avrf_flash_bank_t *avrf_info = bank-&gt;driver_priv;
+	struct avrf_flash_bank *avrf_info = bank-&gt;driver_priv;
 	avr_common_t *avr = target-&gt;arch_info;
 	struct avrf_type *avr_info = NULL;
 	int i;
@@ -331,7 +331,7 @@ static int avrf_probe(struct flash_bank_s *bank)
 
 static int avrf_auto_probe(struct flash_bank_s *bank)
 {
-	avrf_flash_bank_t *avrf_info = bank-&gt;driver_priv;
+	struct avrf_flash_bank *avrf_info = bank-&gt;driver_priv;
 	if (avrf_info-&gt;probed)
 		return ERROR_OK;
 	return avrf_probe(bank);
diff --git a/src/flash/avrf.h b/src/flash/avrf.h
index abb001c..e75d9d7 100644
--- a/src/flash/avrf.h
+++ b/src/flash/avrf.h
@@ -32,10 +32,10 @@ struct avrf_type
 	int eeprom_page_num;
 };
 
-typedef struct avrf_flash_bank_s
+struct avrf_flash_bank
 {
 	int ppage_size;
 	int probed;
-} avrf_flash_bank_t;
+};
 
 #endif /* AVRF_H */

commit 6ca63ee756ea0772a60760da37867ca982b0b049
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:30:58 2009 -0800

    avrf_type_t -&gt; struct avrf_type
    
    Remove misleading typedef and redundant suffix from struct avrf_type.

diff --git a/src/flash/avrf.c b/src/flash/avrf.c
index 8bbb616..07b54c5 100644
--- a/src/flash/avrf.c
+++ b/src/flash/avrf.c
@@ -50,7 +50,7 @@
 #define AVR_JTAG_REG_ProgrammingCommand_Len			15
 #define AVR_JTAG_REG_FlashDataByte_Len				16
 
-avrf_type_t avft_chips_info[] =
+struct avrf_type avft_chips_info[] =
 {
 //	 name,			chip_id,	flash_page_size,	flash_page_num,	eeprom_page_size,	eeprom_page_num
 	{&quot;atmega128&quot;,	0x9702,		256,				512,			8,					512},
@@ -266,7 +266,7 @@ static int avrf_probe(struct flash_bank_s *bank)
 	target_t *target = bank-&gt;target;
 	avrf_flash_bank_t *avrf_info = bank-&gt;driver_priv;
 	avr_common_t *avr = target-&gt;arch_info;
-	avrf_type_t *avr_info = NULL;
+	struct avrf_type *avr_info = NULL;
 	int i;
 	uint32_t device_id;
 
@@ -347,7 +347,7 @@ static int avrf_info(struct flash_bank_s *bank, char *buf, int buf_size)
 {
 	target_t *target = bank-&gt;target;
 	avr_common_t *avr = target-&gt;arch_info;
-	avrf_type_t *avr_info = NULL;
+	struct avrf_type *avr_info = NULL;
 	int i;
 	uint32_t device_id;
 
diff --git a/src/flash/avrf.h b/src/flash/avrf.h
index bcd3b72..abb001c 100644
--- a/src/flash/avrf.h
+++ b/src/flash/avrf.h
@@ -22,7 +22,7 @@
 
 #include &quot;types.h&quot;
 
-typedef struct avrf_type_s
+struct avrf_type
 {
 	char name[15];
 	uint16_t chip_id;
@@ -30,7 +30,7 @@ typedef struct avrf_type_s
 	int flash_page_num;
 	int eeprom_page_size;
 	int eeprom_page_num;
-} avrf_type_t;
+};
 
 typedef struct avrf_flash_bank_s
 {

commit 3877201581c96a02d0e49b74050272ae77753cf1
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 07:30:41 2009 -0800

    at91sam7_flash_bank_t -&gt; struct at91sam7_flash_bank
    
    Remove misleading typedef and redundant suffix from struct at91sam7_flash_bank.

diff --git a/src/flash/at91sam7.c b/src/flash/at91sam7.c
index 266be06..ede5491 100644
--- a/src/flash/at91sam7.c
+++ b/src/flash/at91sam7.c
@@ -99,7 +99,7 @@ static uint32_t at91sam7_get_flash_status(target_t *target, int bank_number)
 /* Read clock configuration and set at91sam7_info-&gt;mck_freq */
 static void at91sam7_read_clock_info(flash_bank_t *bank)
 {
-	at91sam7_flash_bank_t *at91sam7_info = bank-&gt;driver_priv;
+	struct at91sam7_flash_bank *at91sam7_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 	uint32_t mckr, mcfr, pllr, mor;
 	unsigned long tmp = 0, mainfreq;
@@ -179,7 +179,7 @@ static void at91sam7_read_clock_info(flash_bank_t *bank)
 static void at91sam7_set_flash_mode(flash_bank_t *bank, int mode)
 {
 	uint32_t fmr, fmcn = 0, fws = 0;
-	at91sam7_flash_bank_t *at91sam7_info = bank-&gt;driver_priv;
+	struct at91sam7_flash_bank *at91sam7_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 
 	if (mode &amp;&amp; (mode != at91sam7_info-&gt;flashmode))
@@ -254,7 +254,7 @@ static uint32_t at91sam7_wait_status_busy(flash_bank_t *bank, uint32_t waitbits,
 static int at91sam7_flash_command(struct flash_bank_s *bank, uint8_t cmd, uint16_t pagen)
 {
 	uint32_t fcr;
-	at91sam7_flash_bank_t *at91sam7_info = bank-&gt;driver_priv;
+	struct at91sam7_flash_bank *at91sam7_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 
 	fcr = (0x5A &lt;&lt; 24) | ((pagen&amp;0x3FF) &lt;&lt; 8) | cmd;
@@ -283,7 +283,7 @@ static int at91sam7_flash_command(struct flash_bank_s *bank, uint8_t cmd, uint16
 static int at91sam7_read_part_info(struct flash_bank_s *bank)
 {
 	flash_bank_t *t_bank = bank;
-	at91sam7_flash_bank_t *at91sam7_info;
+	struct at91sam7_flash_bank *at91sam7_info;
 	target_t *target = t_bank-&gt;target;
 
 	uint16_t bnk, sec;
@@ -535,7 +535,7 @@ static int at91sam7_read_part_info(struct flash_bank_s *bank)
 			flash_bank_t *fb = malloc(sizeof(flash_bank_t));
 			fb-&gt;target = target;
 			fb-&gt;driver = bank-&gt;driver;
-			fb-&gt;driver_priv = malloc(sizeof(at91sam7_flash_bank_t));
+			fb-&gt;driver_priv = malloc(sizeof(struct at91sam7_flash_bank));
 			fb-&gt;next = NULL;
 
 			/* link created bank in 'flash_banks' list and redirect t_bank */
@@ -666,7 +666,7 @@ static int at91sam7_protect_check(struct flash_bank_s *bank)
 	uint8_t lock_pos, gpnvm_pos;
 	uint32_t status;
 
-	at91sam7_flash_bank_t *at91sam7_info = bank-&gt;driver_priv;
+	struct at91sam7_flash_bank *at91sam7_info = bank-&gt;driver_priv;
 
 	if (at91sam7_info-&gt;cidr == 0)
 	{
@@ -714,7 +714,7 @@ static int at91sam7_protect_check(struct flash_bank_s *bank)
 FLASH_BANK_COMMAND_HANDLER(at91sam7_flash_bank_command)
 {
 	flash_bank_t *t_bank = bank;
-	at91sam7_flash_bank_t *at91sam7_info;
+	struct at91sam7_flash_bank *at91sam7_info;
 	target_t *target = t_bank-&gt;target;
 
 	uint32_t base_address;
@@ -734,7 +734,7 @@ FLASH_BANK_COMMAND_HANDLER(at91sam7_flash_bank_command)
 
 	int bnk, sec;
 
-	at91sam7_info = malloc(sizeof(at91sam7_flash_bank_t));
+	at91sam7_info = malloc(sizeof(struct at91sam7_flash_bank));
 	t_bank-&gt;driver_priv = at91sam7_info;
 
 	/* part wasn't probed for info yet */
@@ -788,7 +788,7 @@ FLASH_BANK_COMMAND_HANDLER(at91sam7_flash_bank_command)
 			flash_bank_t *fb = malloc(sizeof(flash_bank_t));
 			fb-&gt;target = target;
 			fb-&gt;driver = bank-&gt;driver;
-			fb-&gt;driver_priv = malloc(sizeof(at91sam7_flash_bank_t));
+			fb-&gt;driver_priv = malloc(sizeof(struct at91sam7_flash_bank));
 			fb-&gt;next = NULL;
 
 			/* link created bank in 'flash_banks' list and redirect t_bank */
@@ -829,7 +829,7 @@ FLASH_BANK_COMMAND_HANDLER(at91sam7_flash_bank_command)
 
 static int at91sam7_erase(struct flash_bank_s *bank, int first, int last)
 {
-	at91sam7_flash_bank_t *at91sam7_info = bank-&gt;driver_priv;
+	struct at91sam7_flash_bank *at91sam7_info = bank-&gt;driver_priv;
 	int sec;
 	uint32_t nbytes, pos;
 	uint8_t *buffer;
@@ -901,7 +901,7 @@ static int at91sam7_protect(struct flash_bank_s *bank, int set, int first, int l
 	int sector;
 	uint32_t pagen;
 
-	at91sam7_flash_bank_t *at91sam7_info = bank-&gt;driver_priv;
+	struct at91sam7_flash_bank *at91sam7_info = bank-&gt;driver_priv;
 
 	if (at91sam7_info-&gt;cidr == 0)
 	{
@@ -948,7 +948,7 @@ static int at91sam7_protect(struct flash_bank_s *bank, int set, int first, int l
 static int at91sam7_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t offset, uint32_t count)
 {
 	int retval;
-	at91sam7_flash_bank_t *at91sam7_info = bank-&gt;driver_priv;
+	struct at91sam7_flash_bank *at91sam7_info = bank-&gt;driver_priv;
 	target_t *target = bank-&gt;target;
 	uint32_t dst_min_alignment, wcount, bytes_remaining = count;
 	uint32_t first_page, last_page, pagen, buffer_pos;
@@ -1036,7 +1036,7 @@ static int at91sam7_probe(struct flash_bank_s *bank)
 static int at91sam7_info(struct flash_bank_s *bank, char *buf, int buf_size)
 {
 	int printed;
-	at91sam7_flash_bank_t *at91sam7_info = bank-&gt;driver_priv;
+	struct at91sam7_flash_bank *at91sam7_info = bank-&gt;driver_priv;
 
 	if (at91sam7_info-&gt;cidr == 0)
 	{
@@ -1104,7 +1104,7 @@ COMMAND_HANDLER(at91sam7_handle_gpnvm_command)
 	int bit;
 	uint8_t  flashcmd;
 	uint32_t status;
-	at91sam7_flash_bank_t *at91sam7_info;
+	struct at91sam7_flash_bank *at91sam7_info;
 	int retval;
 
 	if (argc != 2)
diff --git a/src/flash/at91sam7.h b/src/flash/at91sam7.h
index a45e2ff..4510686 100644
--- a/src/flash/at91sam7.h
+++ b/src/flash/at91sam7.h
@@ -25,7 +25,7 @@
 
 #include &quot;flash.h&quot;
 
-typedef struct at91sam7_flash_bank_s
+struct at91sam7_flash_bank
 {
 	/* chip id register */
 	uint32_t cidr;
@@ -67,7 +67,7 @@ typedef struct at91sam7_flash_bank_s
 	/* external clock frequency */
 	uint32_t ext_freq;
 
-} at91sam7_flash_bank_t;
+};
 
 
 /* AT91SAM7 control registers */

commit 246068fd8985b293d7109058f83c57f6c22a4336
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 06:15:31 2009 -0800

    jtag_command_t -&gt; struct jtag_command
    
    Remove useless typedef from struct jtag_command.

diff --git a/src/jtag/amt_jtagaccel.c b/src/jtag/amt_jtagaccel.c
index 306216a..87d9cd3 100644
--- a/src/jtag/amt_jtagaccel.c
+++ b/src/jtag/amt_jtagaccel.c
@@ -289,7 +289,7 @@ static void amt_jtagaccel_scan(bool ir_scan, enum scan_type type, uint8_t *buffe
 
 static int amt_jtagaccel_execute_queue(void)
 {
-	jtag_command_t *cmd = jtag_command_queue; /* currently processed command */
+	struct jtag_command *cmd = jtag_command_queue; /* currently processed command */
 	int scan_size;
 	enum scan_type type;
 	uint8_t *buffer;
diff --git a/src/jtag/arm-jtag-ew.c b/src/jtag/arm-jtag-ew.c
index 9befe09..d2e3ff7 100644
--- a/src/jtag/arm-jtag-ew.c
+++ b/src/jtag/arm-jtag-ew.c
@@ -122,7 +122,7 @@ struct jtag_interface armjtagew_interface =
 
 static int armjtagew_execute_queue(void)
 {
-	jtag_command_t *cmd = jtag_command_queue;
+	struct jtag_command *cmd = jtag_command_queue;
 	int scan_size;
 	enum scan_type type;
 	uint8_t *buffer;
diff --git a/src/jtag/bitbang.c b/src/jtag/bitbang.c
index 7c02628..69c1729 100644
--- a/src/jtag/bitbang.c
+++ b/src/jtag/bitbang.c
@@ -230,7 +230,7 @@ static void bitbang_scan(bool ir_scan, enum scan_type type, uint8_t *buffer, int
 
 int bitbang_execute_queue(void)
 {
-	jtag_command_t *cmd = jtag_command_queue; /* currently processed command */
+	struct jtag_command *cmd = jtag_command_queue; /* currently processed command */
 	int scan_size;
 	enum scan_type type;
 	uint8_t *buffer;
diff --git a/src/jtag/bitq.c b/src/jtag/bitq.c
index 1c00228..74555d2 100644
--- a/src/jtag/bitq.c
+++ b/src/jtag/bitq.c
@@ -29,7 +29,7 @@ struct bitq_interface* bitq_interface;       /* low level bit queue interface */
 
 /* state of input queue */
 struct bitq_state {
-	jtag_command_t *cmd; /* command currently processed */
+	struct jtag_command *cmd; /* command currently processed */
 	int field_idx; /* index of field currently being processed */
 	int bit_pos; /* position of bit curently being processed */
 	int status; /* processing status */
@@ -290,7 +290,7 @@ void bitq_scan(struct scan_command* cmd)
 
 int bitq_execute_queue(void)
 {
-	jtag_command_t* cmd = jtag_command_queue; /* currently processed command */
+	struct jtag_command* cmd = jtag_command_queue; /* currently processed command */
 
 	bitq_in_state.cmd = jtag_command_queue;
 	bitq_in_state.field_idx = 0;
diff --git a/src/jtag/commands.c b/src/jtag/commands.c
index c092eec..ccd6d0f 100644
--- a/src/jtag/commands.c
+++ b/src/jtag/commands.c
@@ -42,15 +42,15 @@ struct cmd_queue_page {
 #define CMD_QUEUE_PAGE_SIZE (1024 * 1024)
 static struct cmd_queue_page *cmd_queue_pages = NULL;
 
-jtag_command_t *jtag_command_queue = NULL;
-static jtag_command_t **next_command_pointer = &amp;jtag_command_queue;
+struct jtag_command *jtag_command_queue = NULL;
+static struct jtag_command **next_command_pointer = &amp;jtag_command_queue;
 
-void jtag_queue_command(jtag_command_t * cmd)
+void jtag_queue_command(struct jtag_command * cmd)
 {
 	// this command goes on the end, so ensure the queue terminates
 	cmd-&gt;next = NULL;
 
-	jtag_command_t **last_cmd = next_command_pointer;
+	struct jtag_command **last_cmd = next_command_pointer;
 	assert(NULL != last_cmd);
 	assert(NULL == *last_cmd);
 	*last_cmd = cmd;
diff --git a/src/jtag/commands.h b/src/jtag/commands.h
index 150f033..967a834 100644
--- a/src/jtag/commands.h
+++ b/src/jtag/commands.h
@@ -129,20 +129,19 @@ enum jtag_command_type {
 	JTAG_STABLECLOCKS = 8
 };
 
-typedef struct jtag_command_s
-{
+struct jtag_command {
 	union jtag_command_container cmd;
 	enum jtag_command_type   type;
-	struct jtag_command_s*   next;
-} jtag_command_t;
+	struct jtag_command *next;
+};
 
 /// The current queue of jtag_command_s structures.
-extern jtag_command_t* jtag_command_queue;
+extern struct jtag_command* jtag_command_queue;
 
 void* cmd_queue_alloc(size_t size);
 void cmd_queue_free(void);
 
-void jtag_queue_command(jtag_command_t *cmd);
+void jtag_queue_command(struct jtag_command *cmd);
 void jtag_command_queue_reset(void);
 
 enum scan_type jtag_scan_type(const struct scan_command* cmd);
diff --git a/src/jtag/driver.c b/src/jtag/driver.c
index 5e8c6be..6469358 100644
--- a/src/jtag/driver.c
+++ b/src/jtag/driver.c
@@ -77,7 +77,7 @@ int interface_jtag_add_ir_scan(int in_num_fields, const struct scan_field *in_fi
 {
 	size_t num_taps = jtag_tap_count_enabled();
 
-	jtag_command_t * cmd		= cmd_queue_alloc(sizeof(jtag_command_t));
+	struct jtag_command * cmd		= cmd_queue_alloc(sizeof(struct jtag_command));
 	struct scan_command * scan		= cmd_queue_alloc(sizeof(struct scan_command));
 	struct scan_field * out_fields	= cmd_queue_alloc(num_taps  * sizeof(struct scan_field));
 
@@ -150,7 +150,7 @@ int interface_jtag_add_ir_scan(int in_num_fields, const struct scan_field *in_fi
 int interface_jtag_add_plain_ir_scan(int in_num_fields, const struct scan_field *in_fields, tap_state_t state)
 {
 
-	jtag_command_t * cmd		= cmd_queue_alloc(sizeof(jtag_command_t));
+	struct jtag_command * cmd		= cmd_queue_alloc(sizeof(struct jtag_command));
 	struct scan_command * scan		= cmd_queue_alloc(sizeof(struct scan_command));
 	struct scan_field * out_fields	= cmd_queue_alloc(in_num_fields * sizeof(struct scan_field));
 
@@ -188,7 +188,7 @@ int interface_jtag_add_dr_scan(int in_num_fields, const struct scan_field *in_fi
 			bypass_devices++;
 	}
 
-	jtag_command_t * cmd		= cmd_queue_alloc(sizeof(jtag_command_t));
+	struct jtag_command * cmd		= cmd_queue_alloc(sizeof(struct jtag_command));
 	struct scan_command * scan		= cmd_queue_alloc(sizeof(struct scan_command));
 	struct scan_field * out_fields	= cmd_queue_alloc((in_num_fields + bypass_devices) * sizeof(struct scan_field));
 
@@ -278,7 +278,7 @@ void interface_jtag_add_dr_out(struct jtag_tap *target_tap,
 	}
 
 
-	jtag_command_t * cmd		= cmd_queue_alloc(sizeof(jtag_command_t));
+	struct jtag_command * cmd		= cmd_queue_alloc(sizeof(struct jtag_command));
 	struct scan_command * scan		= cmd_queue_alloc(sizeof(struct scan_command));
 	struct scan_field * out_fields	= cmd_queue_alloc((in_num_fields + bypass_devices) * sizeof(struct scan_field));
 
@@ -346,7 +346,7 @@ void interface_jtag_add_dr_out(struct jtag_tap *target_tap,
  */
 int interface_jtag_add_plain_dr_scan(int in_num_fields, const struct scan_field *in_fields, tap_state_t state)
 {
-	jtag_command_t * cmd		= cmd_queue_alloc(sizeof(jtag_command_t));
+	struct jtag_command * cmd		= cmd_queue_alloc(sizeof(struct jtag_command));
 	struct scan_command * scan		= cmd_queue_alloc(sizeof(struct scan_command));
 	struct scan_field * out_fields	= cmd_queue_alloc(in_num_fields * sizeof(struct scan_field));
 
@@ -371,7 +371,7 @@ int interface_jtag_add_tlr(void)
 	tap_state_t state = TAP_RESET;
 
 	/* allocate memory for a new list member */
-	jtag_command_t * cmd = cmd_queue_alloc(sizeof(jtag_command_t));
+	struct jtag_command * cmd = cmd_queue_alloc(sizeof(struct jtag_command));
 
 	jtag_queue_command(cmd);
 
@@ -386,7 +386,7 @@ int interface_jtag_add_tlr(void)
 int interface_jtag_add_pathmove(int num_states, const tap_state_t *path)
 {
 	/* allocate memory for a new list member */
-	jtag_command_t * cmd = cmd_queue_alloc(sizeof(jtag_command_t));
+	struct jtag_command * cmd = cmd_queue_alloc(sizeof(struct jtag_command));
 
 	jtag_queue_command(cmd);
 
@@ -405,7 +405,7 @@ int interface_jtag_add_pathmove(int num_states, const tap_state_t *path)
 int interface_jtag_add_runtest(int num_cycles, tap_state_t state)
 {
 	/* allocate memory for a new list member */
-	jtag_command_t * cmd = cmd_queue_alloc(sizeof(jtag_command_t));
+	struct jtag_command * cmd = cmd_queue_alloc(sizeof(struct jtag_command));
 
 	jtag_queue_command(cmd);
 
@@ -421,7 +421,7 @@ int interface_jtag_add_runtest(int num_cycles, tap_state_t state)
 int interface_jtag_add_clocks(int num_cycles)
 {
 	/* allocate memory for a new list member */
-	jtag_command_t * cmd = cmd_queue_alloc(sizeof(jtag_command_t));
+	struct jtag_command * cmd = cmd_queue_alloc(sizeof(struct jtag_command));
 
 	jtag_queue_command(cmd);
 
@@ -436,7 +436,7 @@ int interface_jtag_add_clocks(int num_cycles)
 int interface_jtag_add_reset(int req_trst, int req_srst)
 {
 	/* allocate memory for a new list member */
-	jtag_command_t * cmd = cmd_queue_alloc(sizeof(jtag_command_t));
+	struct jtag_command * cmd = cmd_queue_alloc(sizeof(struct jtag_command));
 
 	jtag_queue_command(cmd);
 
@@ -452,7 +452,7 @@ int interface_jtag_add_reset(int req_trst, int req_srst)
 int interface_jtag_add_sleep(uint32_t us)
 {
 	/* allocate memory for a new list member */
-	jtag_command_t * cmd = cmd_queue_alloc(sizeof(jtag_command_t));
+	struct jtag_command * cmd = cmd_queue_alloc(sizeof(struct jtag_command));
 
 	jtag_queue_command(cmd);
 
diff --git a/src/jtag/ft2232.c b/src/jtag/ft2232.c
index 18bb955..3e7dd2a 100644
--- a/src/jtag/ft2232.c
+++ b/src/jtag/ft2232.c
@@ -100,7 +100,7 @@
  *
  * @returns ERROR_OK on success, or ERROR_JTAG_QUEUE_FAILED on failure.
  */
-static int ft2232_stableclocks(int num_cycles, jtag_command_t* cmd);
+static int ft2232_stableclocks(int num_cycles, struct jtag_command* cmd);
 
 static char *       ft2232_device_desc_A = NULL;
 static char*        ft2232_device_desc = NULL;
@@ -196,7 +196,7 @@ static struct ftdi_context ftdic;
 static enum ftdi_chip_type ftdi_device;
 #endif
 
-static jtag_command_t* first_unsent;        /* next command that has to be sent */
+static struct jtag_command* first_unsent;        /* next command that has to be sent */
 static int             require_send;
 
 /*	<A HREF="http://urjtag.wiki.sourceforge.net/Cable">http://urjtag.wiki.sourceforge.net/Cable</A> + FT2232 says:
@@ -617,9 +617,9 @@ static void ft2232_debug_dump_buffer(void)
 		LOG_DEBUG(&quot;%s&quot;, line);
 }
 
-static int ft2232_send_and_recv(jtag_command_t* first, jtag_command_t* last)
+static int ft2232_send_and_recv(struct jtag_command* first, struct jtag_command* last)
 {
-	jtag_command_t* cmd;
+	struct jtag_command* cmd;
 	uint8_t* buffer;
 	int scan_size;
 	enum scan_type  type;
@@ -1491,7 +1491,7 @@ static void sheevaplug_reset(int trst, int srst)
 	LOG_DEBUG(&quot;trst: %i, srst: %i, high_output: 0x%2.2x, high_direction: 0x%2.2x&quot;, trst, srst, high_output, high_direction);
 }
 
-static int ft2232_execute_runtest(jtag_command_t *cmd)
+static int ft2232_execute_runtest(struct jtag_command *cmd)
 {
 	int retval;
 	int i;
@@ -1555,7 +1555,7 @@ static int ft2232_execute_runtest(jtag_command_t *cmd)
 	return retval;
 }
 
-static int ft2232_execute_statemove(jtag_command_t *cmd)
+static int ft2232_execute_statemove(struct jtag_command *cmd)
 {
 	int	predicted_size = 0;
 	int	retval = ERROR_OK;
@@ -1592,7 +1592,7 @@ static int ft2232_execute_statemove(jtag_command_t *cmd)
 	return retval;
 }
 
-static int ft2232_execute_pathmove(jtag_command_t *cmd)
+static int ft2232_execute_pathmove(struct jtag_command *cmd)
 {
 	int	predicted_size = 0;
 	int	retval = ERROR_OK;
@@ -1621,7 +1621,7 @@ static int ft2232_execute_pathmove(jtag_command_t *cmd)
 	return retval;
 }
 
-static int ft2232_execute_scan(jtag_command_t *cmd)
+static int ft2232_execute_scan(struct jtag_command *cmd)
 {
 	uint8_t* buffer;
 	int scan_size;				/* size of IR or DR scan */
@@ -1676,7 +1676,7 @@ static int ft2232_execute_scan(jtag_command_t *cmd)
 
 }
 
-static int ft2232_execute_reset(jtag_command_t *cmd)
+static int ft2232_execute_reset(struct jtag_command *cmd)
 {
 	int retval;
 	int predicted_size = 0;
@@ -1708,7 +1708,7 @@ static int ft2232_execute_reset(jtag_command_t *cmd)
 	return retval;
 }
 
-static int ft2232_execute_sleep(jtag_command_t *cmd)
+static int ft2232_execute_sleep(struct jtag_command *cmd)
 {
 	int retval;
 	retval = ERROR_OK;
@@ -1725,7 +1725,7 @@ static int ft2232_execute_sleep(jtag_command_t *cmd)
 	return retval;
 }
 
-static int ft2232_execute_stableclocks(jtag_command_t *cmd)
+static int ft2232_execute_stableclocks(struct jtag_command *cmd)
 {
 	int retval;
 	retval = ERROR_OK;
@@ -1741,7 +1741,7 @@ static int ft2232_execute_stableclocks(jtag_command_t *cmd)
 	return retval;
 }
 
-static int ft2232_execute_command(jtag_command_t *cmd)
+static int ft2232_execute_command(struct jtag_command *cmd)
 {
 	int retval;
 	retval = ERROR_OK;
@@ -1764,7 +1764,7 @@ static int ft2232_execute_command(jtag_command_t *cmd)
 
 static int ft2232_execute_queue(void)
 {
-	jtag_command_t* cmd = jtag_command_queue;	/* currently processed command */
+	struct jtag_command* cmd = jtag_command_queue;	/* currently processed command */
 	int retval;
 
 	first_unsent = cmd;		/* next command that has to be sent */
@@ -2903,7 +2903,7 @@ COMMAND_HANDLER(ft2232_handle_latency_command)
 	return ERROR_OK;
 }
 
-static int ft2232_stableclocks(int num_cycles, jtag_command_t* cmd)
+static int ft2232_stableclocks(int num_cycles, struct jtag_command* cmd)
 {
 	int retval = 0;
 
diff --git a/src/jtag/gw16012.c b/src/jtag/gw16012.c
index eb47187..1c5f654 100644
--- a/src/jtag/gw16012.c
+++ b/src/jtag/gw16012.c
@@ -312,7 +312,7 @@ static void gw16012_scan(bool ir_scan, enum scan_type type, uint8_t *buffer, int
 
 static int gw16012_execute_queue(void)
 {
-	jtag_command_t *cmd = jtag_command_queue; /* currently processed command */
+	struct jtag_command *cmd = jtag_command_queue; /* currently processed command */
 	int scan_size;
 	enum scan_type type;
 	uint8_t *buffer;
diff --git a/src/jtag/jlink.c b/src/jtag/jlink.c
index 140949a..9677f0e 100644
--- a/src/jtag/jlink.c
+++ b/src/jtag/jlink.c
@@ -150,7 +150,7 @@ struct jtag_interface jlink_interface =
 	.quit = jlink_quit
 };
 
-static void jlink_execute_runtest(jtag_command_t *cmd)
+static void jlink_execute_runtest(struct jtag_command *cmd)
 {
 	DEBUG_JTAG_IO(&quot;runtest %i cycles, end in %i&quot;,
 			cmd-&gt;cmd.runtest-&gt;num_cycles,
@@ -161,7 +161,7 @@ static void jlink_execute_runtest(jtag_command_t *cmd)
 	jlink_runtest(cmd-&gt;cmd.runtest-&gt;num_cycles);
 }
 
-static void jlink_execute_statemove(jtag_command_t *cmd)
+static void jlink_execute_statemove(struct jtag_command *cmd)
 {
 	DEBUG_JTAG_IO(&quot;statemove end in %i&quot;, cmd-&gt;cmd.statemove-&gt;end_state);
 
@@ -169,7 +169,7 @@ static void jlink_execute_statemove(jtag_command_t *cmd)
 	jlink_state_move();
 }
 
-static void jlink_execute_pathmove(jtag_command_t *cmd)
+static void jlink_execute_pathmove(struct jtag_command *cmd)
 {
 	DEBUG_JTAG_IO(&quot;pathmove: %i states, end in %i&quot;,
 		cmd-&gt;cmd.pathmove-&gt;num_states,
@@ -179,7 +179,7 @@ static void jlink_execute_pathmove(jtag_command_t *cmd)
 			cmd-&gt;cmd.pathmove-&gt;path);
 }
 
-static void jlink_execute_scan(jtag_command_t *cmd)
+static void jlink_execute_scan(struct jtag_command *cmd)
 {
 	int scan_size;
 	enum scan_type type;
@@ -200,7 +200,7 @@ static void jlink_execute_scan(jtag_command_t *cmd)
 			type, buffer, scan_size, cmd-&gt;cmd.scan);
 }
 
-static void jlink_execute_reset(jtag_command_t *cmd)
+static void jlink_execute_reset(struct jtag_command *cmd)
 {
 	DEBUG_JTAG_IO(&quot;reset trst: %i srst %i&quot;,
 			cmd-&gt;cmd.reset-&gt;trst, cmd-&gt;cmd.reset-&gt;srst);
@@ -210,14 +210,14 @@ static void jlink_execute_reset(jtag_command_t *cmd)
 	jlink_tap_execute();
 }
 
-static void jlink_execute_sleep(jtag_command_t *cmd)
+static void jlink_execute_sleep(struct jtag_command *cmd)
 {
 	DEBUG_JTAG_IO(&quot;sleep %i&quot;, cmd-&gt;cmd.sleep-&gt;us);
 	jlink_tap_execute();
 	jtag_sleep(cmd-&gt;cmd.sleep-&gt;us);
 }
 
-static void jlink_execute_command(jtag_command_t *cmd)
+static void jlink_execute_command(struct jtag_command *cmd)
 {
 	switch (cmd-&gt;type)
 	{
@@ -235,7 +235,7 @@ static void jlink_execute_command(jtag_command_t *cmd)
 
 static int jlink_execute_queue(void)
 {
-	jtag_command_t *cmd = jtag_command_queue;
+	struct jtag_command *cmd = jtag_command_queue;
 
 	while (cmd != NULL)
 	{
diff --git a/src/jtag/usbprog.c b/src/jtag/usbprog.c
index 9eda6e0..7abb0ca 100644
--- a/src/jtag/usbprog.c
+++ b/src/jtag/usbprog.c
@@ -127,7 +127,7 @@ static int usbprog_register_commands(struct command_context_s *cmd_ctx)
 
 static int usbprog_execute_queue(void)
 {
-	jtag_command_t *cmd = jtag_command_queue; /* currently processed command */
+	struct jtag_command *cmd = jtag_command_queue; /* currently processed command */
 	int scan_size;
 	enum scan_type type;
 	uint8_t *buffer;
diff --git a/src/jtag/vsllink.c b/src/jtag/vsllink.c
index 8ee6292..c404476 100644
--- a/src/jtag/vsllink.c
+++ b/src/jtag/vsllink.c
@@ -250,7 +250,7 @@ static void reset_command_pointer(void)
 
 static int vsllink_execute_queue(void)
 {
-	jtag_command_t *cmd = jtag_command_queue;
+	struct jtag_command *cmd = jtag_command_queue;
 	int scan_size;
 	enum scan_type type;
 	uint8_t *buffer;

commit 1053c32d9ecc95ce946bbbf49cccfe800881f9aa
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 06:03:59 2009 -0800

    jtag_command_container_t -&gt; union jtag_command_container
    
    Remove misleading typedef from union jtag_container.

diff --git a/src/jtag/commands.h b/src/jtag/commands.h
index 5c27443..150f033 100644
--- a/src/jtag/commands.h
+++ b/src/jtag/commands.h
@@ -104,8 +104,7 @@ struct sleep_command {
  * Defines a container type that hold a pointer to a JTAG command
  * structure of any defined type.
  */
-typedef union jtag_command_container_u
-{
+union jtag_command_container {
 	struct scan_command*         scan;
 	struct statemove_command*    statemove;
 	struct pathmove_command*     pathmove;
@@ -114,10 +113,10 @@ typedef union jtag_command_container_u
 	struct reset_command*        reset;
 	struct end_state_command*    end_state;
 	struct sleep_command* sleep;
-} jtag_command_container_t;
+};
 
 /**
- * The type of the @c jtag_command_container_u contained by a
+ * The type of the @c jtag_command_container contained by a
  * @c jtag_command_s structure.
  */
 enum jtag_command_type {
@@ -132,7 +131,7 @@ enum jtag_command_type {
 
 typedef struct jtag_command_s
 {
-	jtag_command_container_t cmd;
+	union jtag_command_container cmd;
 	enum jtag_command_type   type;
 	struct jtag_command_s*   next;
 } jtag_command_t;

commit 22b220ad7f42ea288b1762692d079ecbde10ba24
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 06:01:19 2009 -0800

    sleep_command_t -&gt; struct sleep_command
    
    Remove misleading typedef from struct sleep_command.

diff --git a/src/jtag/commands.h b/src/jtag/commands.h
index 9d0747a..5c27443 100644
--- a/src/jtag/commands.h
+++ b/src/jtag/commands.h
@@ -95,11 +95,10 @@ struct end_state_command {
 	tap_state_t end_state;
 };
 
-typedef struct sleep_command_s
-{
+struct sleep_command {
 	/// number of microseconds to sleep
 	uint32_t us;
-} sleep_command_t;
+};
 
 /**
  * Defines a container type that hold a pointer to a JTAG command
@@ -114,7 +113,7 @@ typedef union jtag_command_container_u
 	struct stableclocks_command* stableclocks;
 	struct reset_command*        reset;
 	struct end_state_command*    end_state;
-	sleep_command_t* sleep;
+	struct sleep_command* sleep;
 } jtag_command_container_t;
 
 /**
diff --git a/src/jtag/driver.c b/src/jtag/driver.c
index 42403a0..5e8c6be 100644
--- a/src/jtag/driver.c
+++ b/src/jtag/driver.c
@@ -458,7 +458,7 @@ int interface_jtag_add_sleep(uint32_t us)
 
 	cmd-&gt;type = JTAG_SLEEP;
 
-	cmd-&gt;cmd.sleep = cmd_queue_alloc(sizeof(sleep_command_t));
+	cmd-&gt;cmd.sleep = cmd_queue_alloc(sizeof(struct sleep_command));
 	cmd-&gt;cmd.sleep-&gt;us = us;
 
 	return ERROR_OK;

commit cf2e402d71fa39dc8138985027b7ab8f4d510e81
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 05:59:48 2009 -0800

    end_state_command_t -&gt; struct end_state_command
    
    Remove misleading typedef from struct end_state_command.

diff --git a/src/jtag/commands.h b/src/jtag/commands.h
index 0a4d723..9d0747a 100644
--- a/src/jtag/commands.h
+++ b/src/jtag/commands.h
@@ -90,11 +90,10 @@ struct reset_command {
 	int srst;
 };
 
-typedef struct end_state_command_s
-{
+struct end_state_command {
 	/// state in which JTAG commands should finish
 	tap_state_t end_state;
-} end_state_command_t;
+};
 
 typedef struct sleep_command_s
 {
@@ -114,7 +113,7 @@ typedef union jtag_command_container_u
 	struct runtest_command*      runtest;
 	struct stableclocks_command* stableclocks;
 	struct reset_command*        reset;
-	end_state_command_t*    end_state;
+	struct end_state_command*    end_state;
 	sleep_command_t* sleep;
 } jtag_command_container_t;
 

commit 8cc8c0544f3f24772d6644df16d5a70d4ffe8b4a
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 05:57:47 2009 -0800

    reset_command_t -&gt; struct reset_command
    
    Remove misleading typedef from struct reset_command.

diff --git a/src/jtag/commands.h b/src/jtag/commands.h
index 509ca5a..0a4d723 100644
--- a/src/jtag/commands.h
+++ b/src/jtag/commands.h
@@ -83,13 +83,12 @@ struct stableclocks_command {
 };
 
 
-typedef struct reset_command_s
-{
+struct reset_command {
 	/// Set TRST output: 0 = deassert, 1 = assert, -1 = no change
 	int trst;
 	/// Set SRST output: 0 = deassert, 1 = assert, -1 = no change
 	int srst;
-} reset_command_t;
+};
 
 typedef struct end_state_command_s
 {
@@ -114,7 +113,7 @@ typedef union jtag_command_container_u
 	struct pathmove_command*     pathmove;
 	struct runtest_command*      runtest;
 	struct stableclocks_command* stableclocks;
-	reset_command_t*        reset;
+	struct reset_command*        reset;
 	end_state_command_t*    end_state;
 	sleep_command_t* sleep;
 } jtag_command_container_t;
diff --git a/src/jtag/driver.c b/src/jtag/driver.c
index 1f28d18..42403a0 100644
--- a/src/jtag/driver.c
+++ b/src/jtag/driver.c
@@ -442,7 +442,7 @@ int interface_jtag_add_reset(int req_trst, int req_srst)
 
 	cmd-&gt;type = JTAG_RESET;
 
-	cmd-&gt;cmd.reset = cmd_queue_alloc(sizeof(reset_command_t));
+	cmd-&gt;cmd.reset = cmd_queue_alloc(sizeof(struct reset_command));
 	cmd-&gt;cmd.reset-&gt;trst = req_trst;
 	cmd-&gt;cmd.reset-&gt;srst = req_srst;
 

commit 2fecae46f62ca98657d650de9fc73d44247971e8
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 05:56:26 2009 -0800

    stableclocks_command_t -&gt; struct stableclocks_command
    
    Remove misleading typedef from struct stableclocks_command.

diff --git a/src/jtag/commands.h b/src/jtag/commands.h
index f43a414..509ca5a 100644
--- a/src/jtag/commands.h
+++ b/src/jtag/commands.h
@@ -77,11 +77,10 @@ struct runtest_command {
 };
 
 
-typedef struct stableclocks_command_s
-{
+struct stableclocks_command {
 	/// number of clock cycles that should be sent
 	int num_cycles;
-} stableclocks_command_t;
+};
 
 
 typedef struct reset_command_s
@@ -114,7 +113,7 @@ typedef union jtag_command_container_u
 	struct statemove_command*    statemove;
 	struct pathmove_command*     pathmove;
 	struct runtest_command*      runtest;
-	stableclocks_command_t* stableclocks;
+	struct stableclocks_command* stableclocks;
 	reset_command_t*        reset;
 	end_state_command_t*    end_state;
 	sleep_command_t* sleep;
diff --git a/src/jtag/driver.c b/src/jtag/driver.c
index 71cde0e..1f28d18 100644
--- a/src/jtag/driver.c
+++ b/src/jtag/driver.c
@@ -427,7 +427,7 @@ int interface_jtag_add_clocks(int num_cycles)
 
 	cmd-&gt;type = JTAG_STABLECLOCKS;
 
-	cmd-&gt;cmd.stableclocks = cmd_queue_alloc(sizeof(stableclocks_command_t));
+	cmd-&gt;cmd.stableclocks = cmd_queue_alloc(sizeof(struct stableclocks_command));
 	cmd-&gt;cmd.stableclocks-&gt;num_cycles = num_cycles;
 
 	return ERROR_OK;

commit 5f6d8ecf8c2cf1427a8677155843081d07ff57c4
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 05:55:29 2009 -0800

    runtest_command_t -&gt; struct runtest_command
    
    Remove misleading typedef from struct runtest_command.

diff --git a/src/jtag/commands.h b/src/jtag/commands.h
index f5793de..f43a414 100644
--- a/src/jtag/commands.h
+++ b/src/jtag/commands.h
@@ -69,13 +69,12 @@ struct pathmove_command {
 	tap_state_t* path;
 };
 
-typedef struct runtest_command_s
-{
+struct runtest_command {
 	/// number of cycles to spend in Run-Test/Idle state
 	int num_cycles;
 	/// state in which JTAG commands should finish
 	tap_state_t end_state;
-} runtest_command_t;
+};
 
 
 typedef struct stableclocks_command_s
@@ -114,7 +113,7 @@ typedef union jtag_command_container_u
 	struct scan_command*         scan;
 	struct statemove_command*    statemove;
 	struct pathmove_command*     pathmove;
-	runtest_command_t*      runtest;
+	struct runtest_command*      runtest;
 	stableclocks_command_t* stableclocks;
 	reset_command_t*        reset;
 	end_state_command_t*    end_state;
diff --git a/src/jtag/driver.c b/src/jtag/driver.c
index 83ac56c..71cde0e 100644
--- a/src/jtag/driver.c
+++ b/src/jtag/driver.c
@@ -411,7 +411,7 @@ int interface_jtag_add_runtest(int num_cycles, tap_state_t state)
 
 	cmd-&gt;type = JTAG_RUNTEST;
 
-	cmd-&gt;cmd.runtest = cmd_queue_alloc(sizeof(runtest_command_t));
+	cmd-&gt;cmd.runtest = cmd_queue_alloc(sizeof(struct runtest_command));
 	cmd-&gt;cmd.runtest-&gt;num_cycles = num_cycles;
 	cmd-&gt;cmd.runtest-&gt;end_state = state;
 

commit c07f0600ff3c77a00efaf4bdcd4dc3691f0421f6
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 05:54:16 2009 -0800

    pathmove_command_t -&gt; struct pathmove_command
    
    Remove misleading typedef from struct pathmove_command.

diff --git a/src/jtag/bitbang.c b/src/jtag/bitbang.c
index d62a5cd..7c02628 100644
--- a/src/jtag/bitbang.c
+++ b/src/jtag/bitbang.c
@@ -91,7 +91,7 @@ static void bitbang_state_move(int skip)
 	tap_set_state(tap_get_end_state());
 }
 
-static void bitbang_path_move(pathmove_command_t *cmd)
+static void bitbang_path_move(struct pathmove_command *cmd)
 {
 	int num_states = cmd-&gt;num_states;
 	int state_count;
diff --git a/src/jtag/bitq.c b/src/jtag/bitq.c
index ee7a073..1c00228 100644
--- a/src/jtag/bitq.c
+++ b/src/jtag/bitq.c
@@ -178,7 +178,7 @@ void bitq_state_move(tap_state_t new_state)
 }
 
 
-void bitq_path_move(pathmove_command_t* cmd)
+void bitq_path_move(struct pathmove_command* cmd)
 {
 	int i;
 
diff --git a/src/jtag/commands.h b/src/jtag/commands.h
index 858f7aa..f5793de 100644
--- a/src/jtag/commands.h
+++ b/src/jtag/commands.h
@@ -62,13 +62,12 @@ struct statemove_command {
 	tap_state_t end_state;
 };
 
-typedef struct pathmove_command_s
-{
+struct pathmove_command {
 	/// number of states in *path
 	int num_states;
 	/// states that have to be passed
 	tap_state_t* path;
-} pathmove_command_t;
+};
 
 typedef struct runtest_command_s
 {
@@ -114,7 +113,7 @@ typedef union jtag_command_container_u
 {
 	struct scan_command*         scan;
 	struct statemove_command*    statemove;
-	pathmove_command_t*     pathmove;
+	struct pathmove_command*     pathmove;
 	runtest_command_t*      runtest;
 	stableclocks_command_t* stableclocks;
 	reset_command_t*        reset;
diff --git a/src/jtag/driver.c b/src/jtag/driver.c
index 6f20573..83ac56c 100644
--- a/src/jtag/driver.c
+++ b/src/jtag/driver.c
@@ -392,7 +392,7 @@ int interface_jtag_add_pathmove(int num_states, const tap_state_t *path)
 
 	cmd-&gt;type = JTAG_PATHMOVE;
 
-	cmd-&gt;cmd.pathmove = cmd_queue_alloc(sizeof(pathmove_command_t));
+	cmd-&gt;cmd.pathmove = cmd_queue_alloc(sizeof(struct pathmove_command));
 	cmd-&gt;cmd.pathmove-&gt;num_states = num_states;
 	cmd-&gt;cmd.pathmove-&gt;path = cmd_queue_alloc(sizeof(tap_state_t) * num_states);
 
diff --git a/src/jtag/gw16012.c b/src/jtag/gw16012.c
index dfc07be..eb47187 100644
--- a/src/jtag/gw16012.c
+++ b/src/jtag/gw16012.c
@@ -183,7 +183,7 @@ static void gw16012_state_move(void)
 	tap_set_state(tap_get_end_state());
 }
 
-static void gw16012_path_move(pathmove_command_t *cmd)
+static void gw16012_path_move(struct pathmove_command *cmd)
 {
 	int num_states = cmd-&gt;num_states;
 	int state_count;
diff --git a/src/jtag/rlink/rlink.c b/src/jtag/rlink/rlink.c
index db91698..bc35457 100644
--- a/src/jtag/rlink/rlink.c
+++ b/src/jtag/rlink/rlink.c
@@ -929,7 +929,7 @@ void rlink_state_move(void) {
 }
 
 static
-void rlink_path_move(pathmove_command_t *cmd)
+void rlink_path_move(struct pathmove_command *cmd)
 {
 	int num_states = cmd-&gt;num_states;
 	int state_count;
diff --git a/src/jtag/usbprog.c b/src/jtag/usbprog.c
index 06a9673..9eda6e0 100644
--- a/src/jtag/usbprog.c
+++ b/src/jtag/usbprog.c
@@ -57,7 +57,7 @@ static int usbprog_quit(void);
 
 static void usbprog_end_state(tap_state_t state);
 static void usbprog_state_move(void);
-static void usbprog_path_move(pathmove_command_t *cmd);
+static void usbprog_path_move(struct pathmove_command *cmd);
 static void usbprog_runtest(int num_cycles);
 static void usbprog_scan(bool ir_scan, enum scan_type type, uint8_t *buffer, int scan_size);
 
@@ -249,7 +249,7 @@ static void usbprog_state_move(void)
 	tap_set_state(tap_get_end_state());
 }
 
-static void usbprog_path_move(pathmove_command_t *cmd)
+static void usbprog_path_move(struct pathmove_command *cmd)
 {
 	int num_states = cmd-&gt;num_states;
 	int state_count;

commit af3f4a0bbefd796bd40602ae28f66dd373272e6a
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 05:52:51 2009 -0800

    statemove_command_t -&gt; struct statemove_command
    
    Remove misleading typedef from struct statemove_command.

diff --git a/src/jtag/commands.h b/src/jtag/commands.h
index d13a9ab..858f7aa 100644
--- a/src/jtag/commands.h
+++ b/src/jtag/commands.h
@@ -57,11 +57,10 @@ struct scan_command {
 	tap_state_t end_state;
 };
 
-typedef struct statemove_command_s
-{
+struct statemove_command {
 	/// state in which JTAG commands should finish
 	tap_state_t end_state;
-} statemove_command_t;
+};
 
 typedef struct pathmove_command_s
 {
@@ -114,7 +113,7 @@ typedef struct sleep_command_s
 typedef union jtag_command_container_u
 {
 	struct scan_command*         scan;
-	statemove_command_t*    statemove;
+	struct statemove_command*    statemove;
 	pathmove_command_t*     pathmove;
 	runtest_command_t*      runtest;
 	stableclocks_command_t* stableclocks;
diff --git a/src/jtag/driver.c b/src/jtag/driver.c
index d50ae90..6f20573 100644
--- a/src/jtag/driver.c
+++ b/src/jtag/driver.c
@@ -377,7 +377,7 @@ int interface_jtag_add_tlr(void)
 
 	cmd-&gt;type = JTAG_STATEMOVE;
 
-	cmd-&gt;cmd.statemove = cmd_queue_alloc(sizeof(statemove_command_t));
+	cmd-&gt;cmd.statemove = cmd_queue_alloc(sizeof(struct statemove_command));
 	cmd-&gt;cmd.statemove-&gt;end_state = state;
 
 	return ERROR_OK;

commit e11c5a3b42a2a39c5b24c9a19ba03f7b16caf3d7
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 05:51:03 2009 -0800

    cmd_queue_page_t -&gt; struct cmd_queue_page
    
    Remove misleading typedef from struct cmd_queue_page.

diff --git a/src/jtag/commands.c b/src/jtag/commands.c
index 64bb993..c092eec 100644
--- a/src/jtag/commands.c
+++ b/src/jtag/commands.c
@@ -33,15 +33,14 @@
 
 #include &quot;commands.h&quot;
 
-typedef struct cmd_queue_page_s
-{
+struct cmd_queue_page {
 	void *address;
 	size_t used;
-	struct cmd_queue_page_s *next;
-} cmd_queue_page_t;
+	struct cmd_queue_page *next;
+};
 
 #define CMD_QUEUE_PAGE_SIZE (1024 * 1024)
-static cmd_queue_page_t *cmd_queue_pages = NULL;
+static struct cmd_queue_page *cmd_queue_pages = NULL;
 
 jtag_command_t *jtag_command_queue = NULL;
 static jtag_command_t **next_command_pointer = &amp;jtag_command_queue;
@@ -62,7 +61,7 @@ void jtag_queue_command(jtag_command_t * cmd)
 
 void* cmd_queue_alloc(size_t size)
 {
-	cmd_queue_page_t **p_page = &amp;cmd_queue_pages;
+	struct cmd_queue_page **p_page = &amp;cmd_queue_pages;
 	int offset;
 	uint8_t *t;
 
@@ -108,7 +107,7 @@ void* cmd_queue_alloc(size_t size)
 
 	if (!*p_page)
 	{
-		*p_page = malloc(sizeof(cmd_queue_page_t));
+		*p_page = malloc(sizeof(struct cmd_queue_page));
 		(*p_page)-&gt;used = 0;
 		(*p_page)-&gt;address = malloc(CMD_QUEUE_PAGE_SIZE);
 		(*p_page)-&gt;next = NULL;
@@ -123,11 +122,11 @@ void* cmd_queue_alloc(size_t size)
 
 void cmd_queue_free(void)
 {
-	cmd_queue_page_t *page = cmd_queue_pages;
+	struct cmd_queue_page *page = cmd_queue_pages;
 
 	while (page)
 	{
-		cmd_queue_page_t *last = page;
+		struct cmd_queue_page *last = page;
 		free(page-&gt;address);
 		page = page-&gt;next;
 		free(last);

commit 2ddeec9db5a8771c948294b7194778a95295b7a0
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 05:30:28 2009 -0800

    scan_command_t -&gt; struct scan_command
    
    Remove misleading typedef on struct scan_command.

diff --git a/src/jtag/arm-jtag-ew.c b/src/jtag/arm-jtag-ew.c
index 3863e43..9befe09 100644
--- a/src/jtag/arm-jtag-ew.c
+++ b/src/jtag/arm-jtag-ew.c
@@ -71,7 +71,7 @@ static void armjtagew_end_state(tap_state_t state);
 static void armjtagew_state_move(void);
 static void armjtagew_path_move(int num_states, tap_state_t *path);
 static void armjtagew_runtest(int num_cycles);
-static void armjtagew_scan(bool ir_scan, enum scan_type type, uint8_t *buffer, int scan_size, scan_command_t *command);
+static void armjtagew_scan(bool ir_scan, enum scan_type type, uint8_t *buffer, int scan_size, struct scan_command *command);
 static void armjtagew_reset(int trst, int srst);
 //static void armjtagew_simple_command(uint8_t command);
 static int armjtagew_get_status(void);
@@ -81,7 +81,7 @@ static void armjtagew_tap_init(void);
 static int armjtagew_tap_execute(void);
 static void armjtagew_tap_ensure_space(int scans, int bits);
 static void armjtagew_tap_append_step(int tms, int tdi);
-static void armjtagew_tap_append_scan(int length, uint8_t *buffer, scan_command_t *command);
+static void armjtagew_tap_append_scan(int length, uint8_t *buffer, struct scan_command *command);
 
 /* ARM-JTAG-EW lowlevel functions */
 struct armjtagew {
@@ -382,7 +382,7 @@ static void armjtagew_runtest(int num_cycles)
 	}
 }
 
-static void armjtagew_scan(bool ir_scan, enum scan_type type, uint8_t *buffer, int scan_size, scan_command_t *command)
+static void armjtagew_scan(bool ir_scan, enum scan_type type, uint8_t *buffer, int scan_size, struct scan_command *command)
 {
 	tap_state_t saved_end_state;
 
@@ -545,7 +545,7 @@ static uint8_t tdo_buffer[ARMJTAGEW_TAP_BUFFER_SIZE];
 struct pending_scan_result {
 	int first;	/* First bit position in tdo_buffer to read */
 	int length; /* Number of bits to read */
-	scan_command_t *command; /* Corresponding scan command */
+	struct scan_command *command; /* Corresponding scan command */
 	uint8_t *buffer;
 };
 
@@ -609,7 +609,7 @@ static void armjtagew_tap_append_step(int tms, int tdi)
 	}
 }
 
-void armjtagew_tap_append_scan(int length, uint8_t *buffer, scan_command_t *command)
+void armjtagew_tap_append_scan(int length, uint8_t *buffer, struct scan_command *command)
 {
 	struct pending_scan_result *pending_scan_result = &amp;pending_scan_results_buffer[pending_scan_results_length];
 	int i;
@@ -686,7 +686,7 @@ static int armjtagew_tap_execute(void)
 				uint8_t *buffer = pending_scan_result-&gt;buffer;
 				int length = pending_scan_result-&gt;length;
 				int first = pending_scan_result-&gt;first;
-				scan_command_t *command = pending_scan_result-&gt;command;
+				struct scan_command *command = pending_scan_result-&gt;command;
 
 				/* Copy to buffer */
 				buf_set_buf(tdo_buffer, first, buffer, 0, length);
diff --git a/src/jtag/bitq.c b/src/jtag/bitq.c
index 145324c..ee7a073 100644
--- a/src/jtag/bitq.c
+++ b/src/jtag/bitq.c
@@ -272,7 +272,7 @@ void bitq_scan_field(struct scan_field* field, int pause)
 }
 
 
-void bitq_scan(scan_command_t* cmd)
+void bitq_scan(struct scan_command* cmd)
 {
 	int i;
 
diff --git a/src/jtag/commands.c b/src/jtag/commands.c
index 70e30ab..64bb993 100644
--- a/src/jtag/commands.c
+++ b/src/jtag/commands.c
@@ -144,7 +144,7 @@ void jtag_command_queue_reset(void)
 	next_command_pointer = &amp;jtag_command_queue;
 }
 
-enum scan_type jtag_scan_type(const scan_command_t *cmd)
+enum scan_type jtag_scan_type(const struct scan_command *cmd)
 {
 	int i;
 	int type = 0;
@@ -160,7 +160,7 @@ enum scan_type jtag_scan_type(const scan_command_t *cmd)
 	return type;
 }
 
-int jtag_scan_size(const scan_command_t *cmd)
+int jtag_scan_size(const struct scan_command *cmd)
 {
 	int bit_count = 0;
 	int i;
@@ -174,7 +174,7 @@ int jtag_scan_size(const scan_command_t *cmd)
 	return bit_count;
 }
 
-int jtag_build_buffer(const scan_command_t *cmd, uint8_t **buffer)
+int jtag_build_buffer(const struct scan_command *cmd, uint8_t **buffer)
 {
 	int bit_count = 0;
 	int i;
@@ -219,7 +219,7 @@ int jtag_build_buffer(const scan_command_t *cmd, uint8_t **buffer)
 	return bit_count;
 }
 
-int jtag_read_buffer(uint8_t *buffer, const scan_command_t *cmd)
+int jtag_read_buffer(uint8_t *buffer, const struct scan_command *cmd)
 {
 	int i;
 	int bit_count = 0;
diff --git a/src/jtag/commands.h b/src/jtag/commands.h
index ac440db..d13a9ab 100644
--- a/src/jtag/commands.h
+++ b/src/jtag/commands.h
@@ -46,8 +46,7 @@ enum scan_type {
  * The scan_command provide a means of encapsulating a set of scan_field_s
  * structures that should be scanned in/out to the device.
  */
-typedef struct scan_command_s
-{
+struct scan_command {
 	/// instruction/not data scan
 	bool ir_scan;
 	/// number of fields in *fields array
@@ -56,7 +55,7 @@ typedef struct scan_command_s
 	struct scan_field* fields;
 	/// state in which JTAG commands should finish
 	tap_state_t end_state;
-} scan_command_t;
+};
 
 typedef struct statemove_command_s
 {
@@ -114,7 +113,7 @@ typedef struct sleep_command_s
  */
 typedef union jtag_command_container_u
 {
-	scan_command_t*         scan;
+	struct scan_command*         scan;
 	statemove_command_t*    statemove;
 	pathmove_command_t*     pathmove;
 	runtest_command_t*      runtest;
@@ -154,9 +153,9 @@ void cmd_queue_free(void);
 void jtag_queue_command(jtag_command_t *cmd);
 void jtag_command_queue_reset(void);
 
-enum scan_type jtag_scan_type(const scan_command_t* cmd);
-int jtag_scan_size(const scan_command_t* cmd);
-int jtag_read_buffer(uint8_t* buffer, const scan_command_t* cmd);
-int jtag_build_buffer(const scan_command_t* cmd, uint8_t** buffer);
+enum scan_type jtag_scan_type(const struct scan_command* cmd);
+int jtag_scan_size(const struct scan_command* cmd);
+int jtag_read_buffer(uint8_t* buffer, const struct scan_command* cmd);
+int jtag_build_buffer(const struct scan_command* cmd, uint8_t** buffer);
 
 #endif // JTAG_COMMANDS_H
diff --git a/src/jtag/driver.c b/src/jtag/driver.c
index de7b789..d50ae90 100644
--- a/src/jtag/driver.c
+++ b/src/jtag/driver.c
@@ -78,7 +78,7 @@ int interface_jtag_add_ir_scan(int in_num_fields, const struct scan_field *in_fi
 	size_t num_taps = jtag_tap_count_enabled();
 
 	jtag_command_t * cmd		= cmd_queue_alloc(sizeof(jtag_command_t));
-	scan_command_t * scan		= cmd_queue_alloc(sizeof(scan_command_t));
+	struct scan_command * scan		= cmd_queue_alloc(sizeof(struct scan_command));
 	struct scan_field * out_fields	= cmd_queue_alloc(num_taps  * sizeof(struct scan_field));
 
 	jtag_queue_command(cmd);
@@ -151,7 +151,7 @@ int interface_jtag_add_plain_ir_scan(int in_num_fields, const struct scan_field
 {
 
 	jtag_command_t * cmd		= cmd_queue_alloc(sizeof(jtag_command_t));
-	scan_command_t * scan		= cmd_queue_alloc(sizeof(scan_command_t));
+	struct scan_command * scan		= cmd_queue_alloc(sizeof(struct scan_command));
 	struct scan_field * out_fields	= cmd_queue_alloc(in_num_fields * sizeof(struct scan_field));
 
 	jtag_queue_command(cmd);
@@ -189,7 +189,7 @@ int interface_jtag_add_dr_scan(int in_num_fields, const struct scan_field *in_fi
 	}
 
 	jtag_command_t * cmd		= cmd_queue_alloc(sizeof(jtag_command_t));
-	scan_command_t * scan		= cmd_queue_alloc(sizeof(scan_command_t));
+	struct scan_command * scan		= cmd_queue_alloc(sizeof(struct scan_command));
 	struct scan_field * out_fields	= cmd_queue_alloc((in_num_fields + bypass_devices) * sizeof(struct scan_field));
 
 	jtag_queue_command(cmd);
@@ -279,7 +279,7 @@ void interface_jtag_add_dr_out(struct jtag_tap *target_tap,
 
 
 	jtag_command_t * cmd		= cmd_queue_alloc(sizeof(jtag_command_t));
-	scan_command_t * scan		= cmd_queue_alloc(sizeof(scan_command_t));
+	struct scan_command * scan		= cmd_queue_alloc(sizeof(struct scan_command));
 	struct scan_field * out_fields	= cmd_queue_alloc((in_num_fields + bypass_devices) * sizeof(struct scan_field));
 
 	jtag_queue_command(cmd);
@@ -347,7 +347,7 @@ void interface_jtag_add_dr_out(struct jtag_tap *target_tap,
 int interface_jtag_add_plain_dr_scan(int in_num_fields, const struct scan_field *in_fields, tap_state_t state)
 {
 	jtag_command_t * cmd		= cmd_queue_alloc(sizeof(jtag_command_t));
-	scan_command_t * scan		= cmd_queue_alloc(sizeof(scan_command_t));
+	struct scan_command * scan		= cmd_queue_alloc(sizeof(struct scan_command));
 	struct scan_field * out_fields	= cmd_queue_alloc(in_num_fields * sizeof(struct scan_field));
 
 	jtag_queue_command(cmd);
diff --git a/src/jtag/ft2232.c b/src/jtag/ft2232.c
index e6498e9..18bb955 100644
--- a/src/jtag/ft2232.c
+++ b/src/jtag/ft2232.c
@@ -956,7 +956,7 @@ static void ft2232_add_scan(bool ir_scan, enum scan_type type, uint8_t* buffer,
 	}
 }
 
-static int ft2232_large_scan(scan_command_t* cmd, enum scan_type type, uint8_t* buffer, int scan_size)
+static int ft2232_large_scan(struct scan_command* cmd, enum scan_type type, uint8_t* buffer, int scan_size)
 {
 	int num_bytes = (scan_size + 7) / 8;
 	int bits_left = scan_size;
diff --git a/src/jtag/jlink.c b/src/jtag/jlink.c
index 78efc5e..140949a 100644
--- a/src/jtag/jlink.c
+++ b/src/jtag/jlink.c
@@ -100,7 +100,7 @@ static void jlink_end_state(tap_state_t state);
 static void jlink_state_move(void);
 static void jlink_path_move(int num_states, tap_state_t *path);
 static void jlink_runtest(int num_cycles);
-static void jlink_scan(bool ir_scan, enum scan_type type, uint8_t *buffer, int scan_size, scan_command_t *command);
+static void jlink_scan(bool ir_scan, enum scan_type type, uint8_t *buffer, int scan_size, struct scan_command *command);
 static void jlink_reset(int trst, int srst);
 static void jlink_simple_command(uint8_t command);
 static int jlink_get_status(void);
@@ -110,7 +110,7 @@ static void jlink_tap_init(void);
 static int jlink_tap_execute(void);
 static void jlink_tap_ensure_space(int scans, int bits);
 static void jlink_tap_append_step(int tms, int tdi);
-static void jlink_tap_append_scan(int length, uint8_t *buffer, scan_command_t *command);
+static void jlink_tap_append_scan(int length, uint8_t *buffer, struct scan_command *command);
 
 /* Jlink lowlevel functions */
 struct jlink {
@@ -449,7 +449,7 @@ static void jlink_runtest(int num_cycles)
 	}
 }
 
-static void jlink_scan(bool ir_scan, enum scan_type type, uint8_t *buffer, int scan_size, scan_command_t *command)
+static void jlink_scan(bool ir_scan, enum scan_type type, uint8_t *buffer, int scan_size, struct scan_command *command)
 {
 	tap_state_t saved_end_state;
 
@@ -677,7 +677,7 @@ static uint8_t tdo_buffer[JLINK_TAP_BUFFER_SIZE];
 struct pending_scan_result {
 	int first;	/* First bit position in tdo_buffer to read */
 	int length; /* Number of bits to read */
-	scan_command_t *command; /* Corresponding scan command */
+	struct scan_command *command; /* Corresponding scan command */
 	uint8_t *buffer;
 };
 
@@ -736,7 +736,7 @@ static void jlink_tap_append_step(int tms, int tdi)
 	tap_length++;
 }
 
-static void jlink_tap_append_scan(int length, uint8_t *buffer, scan_command_t *command)
+static void jlink_tap_append_scan(int length, uint8_t *buffer, struct scan_command *command)
 {
 	struct pending_scan_result *pending_scan_result =
 		&amp;pending_scan_results_buffer[pending_scan_results_length];
@@ -804,7 +804,7 @@ static int jlink_tap_execute(void)
 		uint8_t *buffer = pending_scan_result-&gt;buffer;
 		int length = pending_scan_result-&gt;length;
 		int first = pending_scan_result-&gt;first;
-		scan_command_t *command = pending_scan_result-&gt;command;
+		struct scan_command *command = pending_scan_result-&gt;command;
 
 		/* Copy to buffer */
 		buf_set_buf(tdo_buffer, first, buffer, 0, length);
diff --git a/src/jtag/vsllink.c b/src/jtag/vsllink.c
index 7baa1ac..8ee6292 100644
--- a/src/jtag/vsllink.c
+++ b/src/jtag/vsllink.c
@@ -165,7 +165,7 @@ static uint8_t VSLLINK_BIT_MSK[8] =
 struct pending_scan_result {
 	int offset;
 	int length; /* Number of bits to read */
-	scan_command_t *command; /* Corresponding scan command */
+	struct scan_command *command; /* Corresponding scan command */
 	uint8_t *buffer;
 };
 
@@ -186,9 +186,9 @@ static void vsllink_runtest(int num_cycles);
 static void vsllink_stableclocks_dma(int num_cycles, int tms);
 static void vsllink_stableclocks_normal(int num_cycles, int tms);
 static void (*vsllink_stableclocks)(int num_cycles, int tms);
-static void vsllink_scan_dma(bool ir_scan, enum scan_type type, uint8_t *buffer, int scan_size, scan_command_t *command);
-static void vsllink_scan_normal(bool ir_scan, enum scan_type type, uint8_t *buffer, int scan_size, scan_command_t *command);
-static void (*vsllink_scan)(bool ir_scan, enum scan_type type, uint8_t *buffer, int scan_size, scan_command_t *command);
+static void vsllink_scan_dma(bool ir_scan, enum scan_type type, uint8_t *buffer, int scan_size, struct scan_command *command);
+static void vsllink_scan_normal(bool ir_scan, enum scan_type type, uint8_t *buffer, int scan_size, struct scan_command *command);
+static void (*vsllink_scan)(bool ir_scan, enum scan_type type, uint8_t *buffer, int scan_size, struct scan_command *command);
 static void vsllink_reset(int trst, int srst);
 static void vsllink_simple_command(uint8_t command);
 static int vsllink_connect(void);
@@ -205,8 +205,8 @@ static int (*vsllink_tap_execute)(void);
 static void vsllink_tap_ensure_space_dma(int scans, int length);
 static void vsllink_tap_ensure_space_normal(int scans, int length);
 static void (*vsllink_tap_ensure_space)(int scans, int length);
-static void vsllink_tap_append_scan_dma(int length, uint8_t *buffer, scan_command_t *command);
-static void vsllink_tap_append_scan_normal(int length, uint8_t *buffer, scan_command_t *command, int offset);
+static void vsllink_tap_append_scan_dma(int length, uint8_t *buffer, struct scan_command *command);
+static void vsllink_tap_append_scan_normal(int length, uint8_t *buffer, struct scan_command *command, int offset);
 
 /* VSLLink lowlevel functions */
 struct vsllink {
@@ -1137,7 +1137,7 @@ static void vsllink_runtest(int num_cycles)
 	}
 }
 
-static void vsllink_scan_normal(bool ir_scan, enum scan_type type, uint8_t *buffer, int scan_size, scan_command_t *command)
+static void vsllink_scan_normal(bool ir_scan, enum scan_type type, uint8_t *buffer, int scan_size, struct scan_command *command)
 {
 	tap_state_t saved_end_state;
 	uint8_t bits_left, tms_tmp, tdi_len;
@@ -1253,7 +1253,7 @@ static void vsllink_scan_normal(bool ir_scan, enum scan_type type, uint8_t *buff
 
 	tap_set_state(tap_get_end_state());
 }
-static void vsllink_scan_dma(bool ir_scan, enum scan_type type, uint8_t *buffer, int scan_size, scan_command_t *command)
+static void vsllink_scan_dma(bool ir_scan, enum scan_type type, uint8_t *buffer, int scan_size, struct scan_command *command)
 {
 	tap_state_t saved_end_state;
 
@@ -1483,7 +1483,7 @@ static void vsllink_tap_append_step(int tms, int tdi)
 	}
 }
 
-static void vsllink_tap_append_scan_normal(int length, uint8_t *buffer, scan_command_t *command, int offset)
+static void vsllink_tap_append_scan_normal(int length, uint8_t *buffer, struct scan_command *command, int offset)
 {
 	struct pending_scan_result *pending_scan_result = &amp;pending_scan_results_buffer[pending_scan_results_length];
 	int i;
@@ -1508,7 +1508,7 @@ static void vsllink_tap_append_scan_normal(int length, uint8_t *buffer, scan_com
 
 	pending_scan_results_length++;
 }
-static void vsllink_tap_append_scan_dma(int length, uint8_t *buffer, scan_command_t *command)
+static void vsllink_tap_append_scan_dma(int length, uint8_t *buffer, struct scan_command *command)
 {
 	struct pending_scan_result *pending_scan_result;
 	int len_tmp, len_all, i;
@@ -1592,7 +1592,7 @@ static int vsllink_tap_execute_normal(void)
 				uint8_t *buffer = pending_scan_result-&gt;buffer;
 				int length = pending_scan_result-&gt;length;
 				int offset = pending_scan_result-&gt;offset;
-				scan_command_t *command = pending_scan_result-&gt;command;
+				struct scan_command *command = pending_scan_result-&gt;command;
 
 				if (buffer != NULL)
 				{
@@ -1666,7 +1666,7 @@ static int vsllink_tap_execute_dma(void)
 				int length = pending_scan_result-&gt;length;
 				int first = pending_scan_result-&gt;offset;
 
-				scan_command_t *command = pending_scan_result-&gt;command;
+				struct scan_command *command = pending_scan_result-&gt;command;
 				buf_set_buf(vsllink_usb_in_buffer, first, buffer, 0, length);
 
 				DEBUG_JTAG_IO(&quot;JTAG scan read(%d bits, from %d bits):&quot;, length, first);

commit 4a29f8e21d4932ddf6523ccf23463d8636ad05a9
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 05:26:43 2009 -0800

    more vsllink typedef cleanup
    
    Remove useless typedef for struct insert_insignification_operation.

diff --git a/src/jtag/vsllink.c b/src/jtag/vsllink.c
index 5325d77..7baa1ac 100644
--- a/src/jtag/vsllink.c
+++ b/src/jtag/vsllink.c
@@ -105,13 +105,12 @@ static uint8_t VSLLINK_tap_move[6][6] =
 	{0xfe, 0x60, 0x38, 0x5c, 0x40, 0x5e}	/* PI  */
 };
 
-typedef struct insert_insignificant_operation
-{
+struct insert_insignificant_operation {
 	unsigned char insert_value;
 	unsigned char insert_position;
-}insert_insignificant_operation_t;
+};
 
-static insert_insignificant_operation_t VSLLINK_TAP_MOVE_INSERT_INSIGNIFICANT[6][6] =
+static struct insert_insignificant_operation VSLLINK_TAP_MOVE_INSERT_INSIGNIFICANT[6][6] =
 {
 /*	 stuff	offset   */
 	{/*	TLR	*/
@@ -594,7 +593,7 @@ static void vsllink_append_tms(void)
 {
 	uint8_t tms_scan = VSLLINK_TAP_MOVE(tap_get_state(), tap_get_end_state());
 	uint16_t tms2;
-	insert_insignificant_operation_t *insert = \
+	struct insert_insignificant_operation *insert = \
 		&amp;VSLLINK_TAP_MOVE_INSERT_INSIGNIFICANT[tap_move_ndx(tap_get_state())][tap_move_ndx(tap_get_end_state())];
 
 	if (((tap_get_state() != TAP_RESET) &amp;&amp; (tap_get_state() != TAP_IDLE) &amp;&amp; (tap_get_state() != TAP_DRPAUSE) &amp;&amp; (tap_get_state() != TAP_IRPAUSE)) || \
@@ -655,7 +654,7 @@ static void vsllink_state_move_normal(void)
 static void vsllink_state_move_dma(void)
 {
 	int i, insert_length = (tap_length % 8) ? (8 - (tap_length % 8)) : 0;
-	insert_insignificant_operation_t *insert = \
+	struct insert_insignificant_operation *insert = \
 		&amp;VSLLINK_TAP_MOVE_INSERT_INSIGNIFICANT[tap_move_ndx(tap_get_state())][tap_move_ndx(tap_get_end_state())];
 	uint8_t tms_scan = VSLLINK_TAP_MOVE(tap_get_state(), tap_get_end_state());
 

commit 7c0ba75eae7162147e7cb6e55fa709f014f2abf4
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 05:24:56 2009 -0800

    vsllink_jtag_t -&gt; struct vsllink
    
    Remove misleading typedef and redundant suffix.

diff --git a/src/jtag/vsllink.c b/src/jtag/vsllink.c
index 7705e54..5325d77 100644
--- a/src/jtag/vsllink.c
+++ b/src/jtag/vsllink.c
@@ -210,16 +210,15 @@ static void vsllink_tap_append_scan_dma(int length, uint8_t *buffer, scan_comman
 static void vsllink_tap_append_scan_normal(int length, uint8_t *buffer, scan_command_t *command, int offset);
 
 /* VSLLink lowlevel functions */
-typedef struct vsllink_jtag
-{
+struct vsllink {
 	struct usb_dev_handle* usb_handle;
-} vsllink_jtag_t;
+};
 
-static vsllink_jtag_t *vsllink_usb_open(void);
-static void vsllink_usb_close(vsllink_jtag_t *vsllink_jtag);
-static int vsllink_usb_message(vsllink_jtag_t *vsllink_jtag, int out_length, int in_length);
-static int vsllink_usb_write(vsllink_jtag_t *vsllink_jtag, int out_length);
-static int vsllink_usb_read(vsllink_jtag_t *vsllink_jtag);
+static struct vsllink *vsllink_usb_open(void);
+static void vsllink_usb_close(struct vsllink *vsllink);
+static int vsllink_usb_message(struct vsllink *vsllink, int out_length, int in_length);
+static int vsllink_usb_write(struct vsllink *vsllink, int out_length);
+static int vsllink_usb_read(struct vsllink *vsllink);
 
 #if defined _DEBUG_USB_COMMS_ || defined _DEBUG_JTAG_IO_
 static void vsllink_debug_buffer(uint8_t *buffer, int length);
@@ -235,7 +234,7 @@ static uint8_t *tdi_buffer = NULL;
 static uint8_t *tdo_buffer = NULL;
 static int last_tms;
 
-static vsllink_jtag_t* vsllink_jtag_handle = NULL;
+static struct vsllink* vsllink_handle = NULL;
 
 static void reset_command_pointer(void)
 {
@@ -369,7 +368,7 @@ static int vsllink_speed(int speed)
 	vsllink_usb_out_buffer[1] = (speed &gt;&gt; 0) &amp; 0xff;
 	vsllink_usb_out_buffer[2] = (speed &gt;&gt; 8) &amp; 0xFF;
 
-	result = vsllink_usb_write(vsllink_jtag_handle, 3);
+	result = vsllink_usb_write(vsllink_handle, 3);
 
 	if (result == 3)
 	{
@@ -412,9 +411,9 @@ static int vsllink_init(void)
 		exit(-1);
 	}
 
-	vsllink_jtag_handle = vsllink_usb_open();
+	vsllink_handle = vsllink_usb_open();
 
-	if (vsllink_jtag_handle == 0)
+	if (vsllink_handle == 0)
 	{
 		LOG_ERROR(&quot;Can't find USB JTAG Interface! Please check connection and permissions.&quot;);
 		return ERROR_JTAG_INIT_FAILED;
@@ -427,7 +426,7 @@ static int vsllink_init(void)
 	while (check_cnt &lt; 5)
 	{
 		vsllink_simple_command(0x00);
-		result = vsllink_usb_read(vsllink_jtag_handle);
+		result = vsllink_usb_read(vsllink_handle);
 
 		if (result &gt; 2)
 		{
@@ -516,7 +515,7 @@ static int vsllink_init(void)
 	vsllink_usb_out_buffer[0] = VSLLINK_CMD_SET_PORTDIR;
 	vsllink_usb_out_buffer[1] = JTAG_PINMSK_SRST | JTAG_PINMSK_TRST | JTAG_PINMSK_USR1 | JTAG_PINMSK_USR2;
 	vsllink_usb_out_buffer[2] = JTAG_PINMSK_SRST | JTAG_PINMSK_TRST;
-	if (vsllink_usb_write(vsllink_jtag_handle, 3) != 3)
+	if (vsllink_usb_write(vsllink_handle, 3) != 3)
 	{
 		LOG_ERROR(&quot;VSLLink USB send data error&quot;);
 		exit(-1);
@@ -539,7 +538,7 @@ static int vsllink_quit(void)
 		vsllink_usb_out_buffer[0] = VSLLINK_CMD_SET_PORTDIR;
 		vsllink_usb_out_buffer[1] = JTAG_PINMSK_SRST | JTAG_PINMSK_TRST | JTAG_PINMSK_USR1 | JTAG_PINMSK_USR2;
 		vsllink_usb_out_buffer[2] = 0;
-		if (vsllink_usb_write(vsllink_jtag_handle, 3) != 3)
+		if (vsllink_usb_write(vsllink_handle, 3) != 3)
 		{
 			LOG_ERROR(&quot;VSLLink USB send data error&quot;);
 			exit(-1);
@@ -547,8 +546,8 @@ static int vsllink_quit(void)
 
 		// disconnect
 		vsllink_disconnect();
-		vsllink_usb_close(vsllink_jtag_handle);
-		vsllink_jtag_handle = NULL;
+		vsllink_usb_close(vsllink_handle);
+		vsllink_handle = NULL;
 	}
 
 	if (vsllink_usb_in_buffer != NULL)
@@ -579,8 +578,8 @@ static int vsllink_connect(void)
 
 	vsllink_usb_out_buffer[0] = VSLLINK_CMD_CONN;
 	vsllink_usb_out_buffer[1] = vsllink_mode;
-	vsllink_usb_message(vsllink_jtag_handle, 2, 0);
-	if (vsllink_usb_read(vsllink_jtag_handle) &gt; 2)
+	vsllink_usb_message(vsllink_handle, 2, 0);
+	if (vsllink_usb_read(vsllink_handle) &gt; 2)
 	{
 		strncpy(vsllink_str, (char *)vsllink_usb_in_buffer + 2, sizeof(vsllink_str));
 		LOG_INFO(&quot;%s&quot;, vsllink_str);
@@ -1302,7 +1301,7 @@ static void vsllink_reset(int trst, int srst)
 		vsllink_usb_out_buffer[2] |= JTAG_PINMSK_TRST;
 	}
 
-	result = vsllink_usb_write(vsllink_jtag_handle, 3);
+	result = vsllink_usb_write(vsllink_handle, 3);
 	if (result != 3)
 	{
 		LOG_ERROR(&quot;VSLLink command VSLLINK_CMD_SET_PORT failed (%d)&quot;, result);
@@ -1316,7 +1315,7 @@ static void vsllink_simple_command(uint8_t command)
 	DEBUG_JTAG_IO(&quot;0x%02x&quot;, command);
 
 	vsllink_usb_out_buffer[0] = command;
-	result = vsllink_usb_write(vsllink_jtag_handle, 1);
+	result = vsllink_usb_write(vsllink_handle, 1);
 
 	if (result != 1)
 	{
@@ -1584,7 +1583,7 @@ static int vsllink_tap_execute_normal(void)
 			vsllink_usb_out_buffer[2] = (vsllink_usb_out_buffer_idx &gt;&gt; 8) &amp; 0xff;
 		}
 
-		result = vsllink_usb_message(vsllink_jtag_handle, vsllink_usb_out_buffer_idx, vsllink_usb_in_want_length);
+		result = vsllink_usb_message(vsllink_handle, vsllink_usb_out_buffer_idx, vsllink_usb_in_want_length);
 
 		if (result == vsllink_usb_in_want_length)
 		{
@@ -1658,7 +1657,7 @@ static int vsllink_tap_execute_dma(void)
 		memcpy(&amp;vsllink_usb_out_buffer[3], tdi_buffer, byte_length);
 		memcpy(&amp;vsllink_usb_out_buffer[3 + byte_length], tms_buffer, byte_length);
 
-		result = vsllink_usb_message(vsllink_jtag_handle, 3 + 2 * byte_length, byte_length);
+		result = vsllink_usb_message(vsllink_handle, 3 + 2 * byte_length, byte_length);
 		if (result == byte_length)
 		{
 			for (i = 0; i &lt; pending_scan_results_length; i++)
@@ -1703,16 +1702,16 @@ static int vsllink_tap_execute_dma(void)
 /*****************************************************************************/
 /* VSLLink USB low-level functions */
 
-static vsllink_jtag_t* vsllink_usb_open(void)
+static struct vsllink* vsllink_usb_open(void)
 {
 	struct usb_bus *busses;
 	struct usb_bus *bus;
 	struct usb_device *dev;
 	int ret;
 
-	vsllink_jtag_t *result;
+	struct vsllink *result;
 
-	result = (vsllink_jtag_t*) malloc(sizeof(vsllink_jtag_t));
+	result = (struct vsllink*) malloc(sizeof(struct vsllink));
 
 	usb_init();
 	usb_find_busses();
@@ -1720,7 +1719,7 @@ static vsllink_jtag_t* vsllink_usb_open(void)
 
 	busses = usb_get_busses();
 
-	/* find vsllink_jtag device in usb bus */
+	/* find vsllink device in usb bus */
 
 	for (bus = busses; bus; bus = bus-&gt;next)
 	{
@@ -1765,38 +1764,38 @@ static vsllink_jtag_t* vsllink_usb_open(void)
 	return NULL;
 }
 
-static void vsllink_usb_close(vsllink_jtag_t *vsllink_jtag)
+static void vsllink_usb_close(struct vsllink *vsllink)
 {
 	int ret;
 
-	ret = usb_release_interface(vsllink_jtag-&gt;usb_handle, vsllink_usb_interface);
+	ret = usb_release_interface(vsllink-&gt;usb_handle, vsllink_usb_interface);
 	if (ret != 0)
 	{
 		LOG_ERROR(&quot;fail to release interface %d, %d returned&quot;, vsllink_usb_interface, ret);
 		exit(-1);
 	}
 
-	ret = usb_close(vsllink_jtag-&gt;usb_handle);
+	ret = usb_close(vsllink-&gt;usb_handle);
 	if (ret != 0)
 	{
 		LOG_ERROR(&quot;fail to close usb, %d returned&quot;, ret);
 		exit(-1);
 	}
 
-	free(vsllink_jtag);
+	free(vsllink);
 }
 
 /* Send a message and receive the reply. */
-static int vsllink_usb_message(vsllink_jtag_t *vsllink_jtag, int out_length, int in_length)
+static int vsllink_usb_message(struct vsllink *vsllink, int out_length, int in_length)
 {
 	int result;
 
-	result = vsllink_usb_write(vsllink_jtag, out_length);
+	result = vsllink_usb_write(vsllink, out_length);
 	if (result == out_length)
 	{
 		if (in_length &gt; 0)
 		{
-			result = vsllink_usb_read(vsllink_jtag);
+			result = vsllink_usb_read(vsllink);
 			if (result == in_length)
 			{
 				return result;
@@ -1817,17 +1816,17 @@ static int vsllink_usb_message(vsllink_jtag_t *vsllink_jtag, int out_length, int
 }
 
 /* Write data from out_buffer to USB. */
-static int vsllink_usb_write(vsllink_jtag_t *vsllink_jtag, int out_length)
+static int vsllink_usb_write(struct vsllink *vsllink, int out_length)
 {
 	int result;
 
 	if (out_length &gt; VSLLINK_BufferSize)
 	{
-		LOG_ERROR(&quot;vsllink_jtag_write illegal out_length=%d (max=%d)&quot;, out_length, VSLLINK_BufferSize);
+		LOG_ERROR(&quot;vsllink_write illegal out_length=%d (max=%d)&quot;, out_length, VSLLINK_BufferSize);
 		return -1;
 	}
 
-	result = usb_bulk_write(vsllink_jtag-&gt;usb_handle, vsllink_usb_bulkout, \
+	result = usb_bulk_write(vsllink-&gt;usb_handle, vsllink_usb_bulkout, \
 		(char *)vsllink_usb_out_buffer, out_length, VSLLINK_USB_TIMEOUT);
 
 	DEBUG_JTAG_IO(&quot;vsllink_usb_write, out_length = %d, result = %d&quot;, out_length, result);
@@ -1845,9 +1844,9 @@ static int vsllink_usb_write(vsllink_jtag_t *vsllink_jtag, int out_length)
 }
 
 /* Read data from USB into in_buffer. */
-static int vsllink_usb_read(vsllink_jtag_t *vsllink_jtag)
+static int vsllink_usb_read(struct vsllink *vsllink)
 {
-	int result = usb_bulk_read(vsllink_jtag-&gt;usb_handle, vsllink_usb_bulkin, \
+	int result = usb_bulk_read(vsllink-&gt;usb_handle, vsllink_usb_bulkin, \
 		(char *)vsllink_usb_in_buffer, VSLLINK_BufferSize, VSLLINK_USB_TIMEOUT);
 
 	DEBUG_JTAG_IO(&quot;vsllink_usb_read, result = %d&quot;, result);

commit ffc77b61ddb4407f6c6dcd6188a07d5c630a2780
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 05:23:12 2009 -0800

    presto_t -&gt; struct presto
    
    Remove useless typedef.

diff --git a/src/jtag/presto.c b/src/jtag/presto.c
index 29066b1..154e3e1 100644
--- a/src/jtag/presto.c
+++ b/src/jtag/presto.c
@@ -86,8 +86,7 @@ static struct bitq_interface presto_bitq =
 
 #define BUFFER_SIZE (64*62)
 
-typedef struct presto_s
-{
+struct presto {
 #if BUILD_PRESTO_FTD2XX == 1
 	FT_HANDLE handle;
 	FT_STATUS status;
@@ -117,11 +116,10 @@ typedef struct presto_s
 	int jtag_tdi_count;
 
 	int jtag_speed;
+};
 
-} presto_t;
-
-static presto_t presto_state;
-static presto_t *presto = &amp;presto_state;
+static struct presto presto_state;
+static struct presto *presto = &amp;presto_state;
 
 static uint8_t presto_init_seq[] =
 {

commit a3f1c87eb72a8c91c54999e04349253159c1bdfd
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 05:17:18 2009 -0800

    ft2232_device_t -&gt; struct ft2232_device
    
    Remove misleading typedef from ft2232_device; it was barely used.

diff --git a/src/jtag/ft2232.c b/src/jtag/ft2232.c
index 6f8dd0d..e6498e9 100644
--- a/src/jtag/ft2232.c
+++ b/src/jtag/ft2232.c
@@ -114,13 +114,12 @@ static unsigned		ft2232_max_tck = FTDI_2232C_MAX_TCK;
 static uint16_t ft2232_vid[MAX_USB_IDS + 1] = { 0x0403, 0 };
 static uint16_t ft2232_pid[MAX_USB_IDS + 1] = { 0x6010, 0 };
 
-typedef struct ft2232_layout_s
-{
+struct ft2232_layout {
 	char* name;
 	int (*init)(void);
 	void (*reset)(int trst, int srst);
 	void (*blink)(void);
-} ft2232_layout_t;
+};
 
 /* init procedures for supported layouts */
 static int usbjtag_init(void);
@@ -158,7 +157,7 @@ static void turtle_jtag_blink(void);
 static void signalyzer_h_blink(void);
 static void ktlink_blink(void);
 
-static const ft2232_layout_t  ft2232_layouts[] =
+static const struct ft2232_layout  ft2232_layouts[] =
 {
 	{ &quot;usbjtag&quot;,              usbjtag_init,              usbjtag_reset,      NULL                    },
 	{ &quot;jtagkey&quot;,              jtagkey_init,              jtagkey_reset,      NULL                    },
@@ -183,7 +182,7 @@ static const ft2232_layout_t  ft2232_layouts[] =
 
 static uint8_t                  nTRST, nTRSTnOE, nSRST, nSRSTnOE;
 
-static const ft2232_layout_t *layout;
+static const struct ft2232_layout *layout;
 static uint8_t                  low_output     = 0x0;
 static uint8_t                  low_direction  = 0x0;
 static uint8_t                  high_output    = 0x0;
@@ -2060,7 +2059,7 @@ static int ft2232_init(void)
 	uint8_t  buf[1];
 	int retval;
 	uint32_t bytes_written;
-	const ft2232_layout_t* cur_layout = ft2232_layouts;
+	const struct ft2232_layout* cur_layout = ft2232_layouts;
 	int i;
 
 	if (tap_get_tms_path_len(TAP_IRPAUSE,TAP_IRPAUSE) == 7)

commit 4bc155398e88c9cc4393e4113496d088b7ff7ab0
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 05:14:36 2009 -0800

    jlink_jtag_t -&gt; struct jlink
    
    Remove misleading typedef and redundant suffix.

diff --git a/src/jtag/jlink.c b/src/jtag/jlink.c
index 0b21c88..78efc5e 100644
--- a/src/jtag/jlink.c
+++ b/src/jtag/jlink.c
@@ -113,17 +113,16 @@ static void jlink_tap_append_step(int tms, int tdi);
 static void jlink_tap_append_scan(int length, uint8_t *buffer, scan_command_t *command);
 
 /* Jlink lowlevel functions */
-typedef struct jlink_jtag
-{
+struct jlink {
 	struct usb_dev_handle* usb_handle;
-} jlink_jtag_t;
+};
 
-static jlink_jtag_t *jlink_usb_open(void);
-static void jlink_usb_close(jlink_jtag_t *jlink_jtag);
-static int jlink_usb_message(jlink_jtag_t *jlink_jtag, int out_length, int in_length);
-static int jlink_usb_write(jlink_jtag_t *jlink_jtag, int out_length);
-static int jlink_usb_read(jlink_jtag_t *jlink_jtag, int expected_size);
-static int jlink_usb_read_emu_result(jlink_jtag_t *jlink_jtag);
+static struct jlink *jlink_usb_open(void);
+static void jlink_usb_close(struct jlink *jlink);
+static int jlink_usb_message(struct jlink *jlink, int out_length, int in_length);
+static int jlink_usb_write(struct jlink *jlink, int out_length);
+static int jlink_usb_read(struct jlink *jlink, int expected_size);
+static int jlink_usb_read_emu_result(struct jlink *jlink);
 
 /* helper functions */
 static int jlink_get_version_info(void);
@@ -134,7 +133,7 @@ static void jlink_debug_buffer(uint8_t *buffer, int length);
 
 static enum tap_state jlink_last_state = TAP_RESET;
 
-static jlink_jtag_t* jlink_jtag_handle;
+static struct jlink* jlink_handle;
 
 /***************************************************************************/
 /* External interface implementation */
@@ -267,7 +266,7 @@ static int jlink_speed(int speed)
 	usb_out_buffer[1] = (speed &gt;&gt; 0) &amp; 0xff;
 	usb_out_buffer[2] = (speed &gt;&gt; 8) &amp; 0xff;
 
-	result = jlink_usb_write(jlink_jtag_handle, 3);
+	result = jlink_usb_write(jlink_handle, 3);
 	if (result != 3)
 	{
 		LOG_ERROR(&quot;J-Link setting speed failed (%d)&quot;, result);
@@ -307,9 +306,9 @@ static int jlink_init(void)
 {
 	int i;
 
-	jlink_jtag_handle = jlink_usb_open();
+	jlink_handle = jlink_usb_open();
 
-	if (jlink_jtag_handle == 0)
+	if (jlink_handle == 0)
 	{
 		LOG_ERROR(&quot;Cannot find jlink Interface! Please check connection and permissions.&quot;);
 		return ERROR_JTAG_INIT_FAILED;
@@ -357,7 +356,7 @@ static int jlink_init(void)
 
 static int jlink_quit(void)
 {
-	jlink_usb_close(jlink_jtag_handle);
+	jlink_usb_close(jlink_handle);
 	return ERROR_OK;
 }
 
@@ -513,7 +512,7 @@ static void jlink_simple_command(uint8_t command)
 	DEBUG_JTAG_IO(&quot;0x%02x&quot;, command);
 
 	usb_out_buffer[0] = command;
-	result = jlink_usb_write(jlink_jtag_handle, 1);
+	result = jlink_usb_write(jlink_handle, 1);
 
 	if (result != 1)
 	{
@@ -527,7 +526,7 @@ static int jlink_get_status(void)
 
 	jlink_simple_command(EMU_CMD_GET_STATE);
 
-	result = jlink_usb_read(jlink_jtag_handle, 8);
+	result = jlink_usb_read(jlink_handle, 8);
 	if (result != 8)
 	{
 		LOG_ERROR(&quot;J-Link command EMU_CMD_GET_STATE failed (%d)\n&quot;, result);
@@ -555,7 +554,7 @@ static int jlink_get_version_info(void)
 	/* query hardware version */
 	jlink_simple_command(EMU_CMD_VERSION);
 
-	result = jlink_usb_read(jlink_jtag_handle, 2);
+	result = jlink_usb_read(jlink_handle, 2);
 	if (2 != result)
 	{
 		LOG_ERROR(&quot;J-Link command EMU_CMD_VERSION failed (%d)\n&quot;, result);
@@ -569,7 +568,7 @@ static int jlink_get_version_info(void)
 		len = JLINK_IN_BUFFER_SIZE;
 	}
 
-	result = jlink_usb_read(jlink_jtag_handle, len);
+	result = jlink_usb_read(jlink_handle, len);
 	if (result != len)
 	{
 		LOG_ERROR(&quot;J-Link command EMU_CMD_VERSION failed (%d)\n&quot;, result);
@@ -582,7 +581,7 @@ static int jlink_get_version_info(void)
 	/* query hardware capabilities */
 	jlink_simple_command(EMU_CMD_GET_CAPS);
 
-	result = jlink_usb_read(jlink_jtag_handle, 4);
+	result = jlink_usb_read(jlink_handle, 4);
 	if (4 != result)
 	{
 		LOG_ERROR(&quot;J-Link command EMU_CMD_GET_CAPS failed (%d)\n&quot;, result);
@@ -597,7 +596,7 @@ static int jlink_get_version_info(void)
 		/* query hardware version */
 		jlink_simple_command(EMU_CMD_GET_HW_VERSION);
 
-		result = jlink_usb_read(jlink_jtag_handle, 4);
+		result = jlink_usb_read(jlink_handle, 4);
 		if (4 != result)
 		{
 			LOG_ERROR(&quot;J-Link command EMU_CMD_GET_HW_VERSION failed (%d)\n&quot;, result);
@@ -617,7 +616,7 @@ static int jlink_get_version_info(void)
 		/* query hardware maximum memory block */
 		jlink_simple_command(EMU_CMD_GET_MAX_MEM_BLOCK);
 
-		result = jlink_usb_read(jlink_jtag_handle, 4);
+		result = jlink_usb_read(jlink_handle, 4);
 		if (4 != result)
 		{
 			LOG_ERROR(&quot;J-Link command EMU_CMD_GET_MAX_MEM_BLOCK failed (%d)\n&quot;, result);
@@ -789,7 +788,7 @@ static int jlink_tap_execute(void)
 	jlink_last_state = jtag_debug_state_machine(tms_buffer, tdi_buffer,
 			tap_length, jlink_last_state);
 
-	result = jlink_usb_message(jlink_jtag_handle, 4 + 2 * byte_length, byte_length);
+	result = jlink_usb_message(jlink_handle, 4 + 2 * byte_length, byte_length);
 	if (result != byte_length)
 	{
 		LOG_ERROR(&quot;jlink_tap_execute, wrong result %d (expected %d)&quot;, result, byte_length);
@@ -843,7 +842,7 @@ static struct usb_device* find_jlink_device(void)
 
 	busses = usb_get_busses();
 
-	/* find jlink_jtag device in usb bus */
+	/* find jlink device in usb bus */
 
 	for (bus = busses; bus; bus = bus-&gt;next)
 	{
@@ -861,13 +860,13 @@ static struct usb_device* find_jlink_device(void)
 /*****************************************************************************/
 /* JLink USB low-level functions */
 
-static jlink_jtag_t* jlink_usb_open()
+static struct jlink* jlink_usb_open()
 {
 	struct usb_device *dev;
 
-	jlink_jtag_t *result;
+	struct jlink *result;
 
-	result = (jlink_jtag_t*) malloc(sizeof(jlink_jtag_t));
+	result = (struct jlink*) malloc(sizeof(struct jlink));
 
 	usb_init();
 
@@ -952,18 +951,18 @@ static jlink_jtag_t* jlink_usb_open()
 	return NULL;
 }
 
-static void jlink_usb_close(jlink_jtag_t *jlink_jtag)
+static void jlink_usb_close(struct jlink *jlink)
 {
-	usb_close(jlink_jtag-&gt;usb_handle);
-	free(jlink_jtag);
+	usb_close(jlink-&gt;usb_handle);
+	free(jlink);
 }
 
 /* Send a message and receive the reply. */
-static int jlink_usb_message(jlink_jtag_t *jlink_jtag, int out_length, int in_length)
+static int jlink_usb_message(struct jlink *jlink, int out_length, int in_length)
 {
 	int result;
 
-	result = jlink_usb_write(jlink_jtag, out_length);
+	result = jlink_usb_write(jlink, out_length);
 	if (result != out_length)
 	{
 		LOG_ERROR(&quot;usb_bulk_write failed (requested=%d, result=%d)&quot;,
@@ -971,7 +970,7 @@ static int jlink_usb_message(jlink_jtag_t *jlink_jtag, int out_length, int in_le
 		return ERROR_JTAG_DEVICE_ERROR;
 	}
 
-	result = jlink_usb_read(jlink_jtag, in_length);
+	result = jlink_usb_read(jlink, in_length);
 	if ((result != in_length) &amp;&amp; (result != (in_length + 1)))
 	{
 		LOG_ERROR(&quot;usb_bulk_read failed (requested=%d, result=%d)&quot;,
@@ -986,12 +985,12 @@ static int jlink_usb_message(jlink_jtag_t *jlink_jtag, int out_length, int in_le
 	if (result == in_length)
 	{
 		/* Must read the result from the EMU too */
-		result2 = jlink_usb_read_emu_result(jlink_jtag);
+		result2 = jlink_usb_read_emu_result(jlink);
 		if (1 != result2)
 		{
 			LOG_ERROR(&quot;jlink_usb_read_emu_result retried requested = 1, result=%d, in_length=%i&quot;, result2,in_length);
 			/* Try again once, should only happen if (in_length%64 == 0) */
-			result2 = jlink_usb_read_emu_result(jlink_jtag);
+			result2 = jlink_usb_read_emu_result(jlink);
 			if (1 != result2)
 			{
 				LOG_ERROR(&quot;jlink_usb_read_emu_result failed &quot;
@@ -1059,17 +1058,17 @@ static inline int usb_bulk_read_ex(usb_dev_handle *dev, int ep,
 }
 
 /* Write data from out_buffer to USB. */
-static int jlink_usb_write(jlink_jtag_t *jlink_jtag, int out_length)
+static int jlink_usb_write(struct jlink *jlink, int out_length)
 {
 	int result;
 
 	if (out_length &gt; JLINK_OUT_BUFFER_SIZE)
 	{
-		LOG_ERROR(&quot;jlink_jtag_write illegal out_length=%d (max=%d)&quot;, out_length, JLINK_OUT_BUFFER_SIZE);
+		LOG_ERROR(&quot;jlink_write illegal out_length=%d (max=%d)&quot;, out_length, JLINK_OUT_BUFFER_SIZE);
 		return -1;
 	}
 
-	result = usb_bulk_write_ex(jlink_jtag-&gt;usb_handle, jlink_write_ep,
+	result = usb_bulk_write_ex(jlink-&gt;usb_handle, jlink_write_ep,
 		(char *)usb_out_buffer, out_length, JLINK_USB_TIMEOUT);
 
 	DEBUG_JTAG_IO(&quot;jlink_usb_write, out_length = %d, result = %d&quot;, out_length, result);
@@ -1081,9 +1080,9 @@ static int jlink_usb_write(jlink_jtag_t *jlink_jtag, int out_length)
 }
 
 /* Read data from USB into in_buffer. */
-static int jlink_usb_read(jlink_jtag_t *jlink_jtag, int expected_size)
+static int jlink_usb_read(struct jlink *jlink, int expected_size)
 {
-	int result = usb_bulk_read_ex(jlink_jtag-&gt;usb_handle, jlink_read_ep,
+	int result = usb_bulk_read_ex(jlink-&gt;usb_handle, jlink_read_ep,
 		(char *)usb_in_buffer, expected_size, JLINK_USB_TIMEOUT);
 
 	DEBUG_JTAG_IO(&quot;jlink_usb_read, result = %d&quot;, result);
@@ -1095,9 +1094,9 @@ static int jlink_usb_read(jlink_jtag_t *jlink_jtag, int expected_size)
 }
 
 /* Read the result from the previous EMU cmd into result_buffer. */
-static int jlink_usb_read_emu_result(jlink_jtag_t *jlink_jtag)
+static int jlink_usb_read_emu_result(struct jlink *jlink)
 {
-	int result = usb_bulk_read_ex(jlink_jtag-&gt;usb_handle, jlink_read_ep,
+	int result = usb_bulk_read_ex(jlink-&gt;usb_handle, jlink_read_ep,
 		(char *)usb_emu_result_buffer, 1 /* JLINK_EMU_RESULT_BUFFER_SIZE */,
 		JLINK_USB_TIMEOUT);
 

commit 9036fdd589b20f7a5f2757a1ad01ca7e47a68fab
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 04:57:03 2009 -0800

    cable_t -&gt; struct cable
    
    Remove useless typedef and redundant suffix from parport struct cable.

diff --git a/src/jtag/parport.c b/src/jtag/parport.c
index d4d9b22..b9396a9 100644
--- a/src/jtag/parport.c
+++ b/src/jtag/parport.c
@@ -59,8 +59,7 @@
 
 /* parallel port cable description
  */
-typedef struct cable_s
-{
+struct cable {
 	char* name;
 	uint8_t TDO_MASK;	/* status port bit containing current TDO value */
 	uint8_t TRST_MASK;	/* data port bit for TRST */
@@ -73,9 +72,9 @@ typedef struct cable_s
 	uint8_t PORT_INIT;	/* initialize data port with this value */
 	uint8_t PORT_EXIT;	/* de-initialize data port with this value */
 	uint8_t LED_MASK;	/* data port bit for LED */
-} cable_t;
+};
 
-static cable_t cables[] =
+static struct cable cables[] =
 {
 	/* name					tdo   trst  tms   tck   tdi   srst  o_inv i_inv init  exit  led */
 	{ &quot;wiggler&quot;,			0x80, 0x10, 0x02, 0x04, 0x08, 0x01, 0x01, 0x80, 0x80, 0x80, 0x00 },
@@ -110,7 +109,7 @@ static int wait_states;
 
 /* interface variables
  */
-static cable_t* cable;
+static struct cable* cable;
 static uint8_t dataport_value = 0x0;
 
 #if PARPORT_USE_PPDEV == 1
@@ -264,7 +263,7 @@ static struct bitbang_interface parport_bitbang = {
 
 static int parport_init(void)
 {
-	cable_t *cur_cable;
+	struct cable *cur_cable;
 #if PARPORT_USE_PPDEV == 1
 	char buffer[256];
 	int i = 0;

commit e1c26950c03b09efe42b8a25dd83f1e50e22a507
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 04:50:26 2009 -0800

    pending_scan_result_t -&gt; struct pending_scan_result
    
    Remove misleading typedef from struct struct pending_scan_result.
    Future patches need to remove these duplicated types and code.

diff --git a/src/jtag/arm-jtag-ew.c b/src/jtag/arm-jtag-ew.c
index 531d605..3863e43 100644
--- a/src/jtag/arm-jtag-ew.c
+++ b/src/jtag/arm-jtag-ew.c
@@ -542,18 +542,17 @@ static uint8_t tms_buffer[ARMJTAGEW_TAP_BUFFER_SIZE];
 static uint8_t tdi_buffer[ARMJTAGEW_TAP_BUFFER_SIZE];
 static uint8_t tdo_buffer[ARMJTAGEW_TAP_BUFFER_SIZE];
 
-typedef struct
-{
+struct pending_scan_result {
 	int first;	/* First bit position in tdo_buffer to read */
 	int length; /* Number of bits to read */
 	scan_command_t *command; /* Corresponding scan command */
 	uint8_t *buffer;
-} pending_scan_result_t;
+};
 
 #define MAX_PENDING_SCAN_RESULTS 256
 
 static int pending_scan_results_length;
-static pending_scan_result_t pending_scan_results_buffer[MAX_PENDING_SCAN_RESULTS];
+static struct pending_scan_result pending_scan_results_buffer[MAX_PENDING_SCAN_RESULTS];
 
 static int last_tms;
 
@@ -612,7 +611,7 @@ static void armjtagew_tap_append_step(int tms, int tdi)
 
 void armjtagew_tap_append_scan(int length, uint8_t *buffer, scan_command_t *command)
 {
-	pending_scan_result_t *pending_scan_result = &amp;pending_scan_results_buffer[pending_scan_results_length];
+	struct pending_scan_result *pending_scan_result = &amp;pending_scan_results_buffer[pending_scan_results_length];
 	int i;
 
 	pending_scan_result-&gt;first = tap_length;
@@ -683,7 +682,7 @@ static int armjtagew_tap_execute(void)
 
 			for (i = 0; i &lt; pending_scan_results_length; i++)
 			{
-				pending_scan_result_t *pending_scan_result = &amp;pending_scan_results_buffer[i];
+				struct pending_scan_result *pending_scan_result = &amp;pending_scan_results_buffer[i];
 				uint8_t *buffer = pending_scan_result-&gt;buffer;
 				int length = pending_scan_result-&gt;length;
 				int first = pending_scan_result-&gt;first;
diff --git a/src/jtag/jlink.c b/src/jtag/jlink.c
index 8d9aa8f..0b21c88 100644
--- a/src/jtag/jlink.c
+++ b/src/jtag/jlink.c
@@ -675,18 +675,17 @@ static uint8_t tms_buffer[JLINK_TAP_BUFFER_SIZE];
 static uint8_t tdi_buffer[JLINK_TAP_BUFFER_SIZE];
 static uint8_t tdo_buffer[JLINK_TAP_BUFFER_SIZE];
 
-typedef struct
-{
+struct pending_scan_result {
 	int first;	/* First bit position in tdo_buffer to read */
 	int length; /* Number of bits to read */
 	scan_command_t *command; /* Corresponding scan command */
 	uint8_t *buffer;
-} pending_scan_result_t;
+};
 
 #define MAX_PENDING_SCAN_RESULTS 256
 
 static int pending_scan_results_length;
-static pending_scan_result_t pending_scan_results_buffer[MAX_PENDING_SCAN_RESULTS];
+static struct pending_scan_result pending_scan_results_buffer[MAX_PENDING_SCAN_RESULTS];
 
 static void jlink_tap_init(void)
 {
@@ -740,7 +739,7 @@ static void jlink_tap_append_step(int tms, int tdi)
 
 static void jlink_tap_append_scan(int length, uint8_t *buffer, scan_command_t *command)
 {
-	pending_scan_result_t *pending_scan_result =
+	struct pending_scan_result *pending_scan_result =
 		&amp;pending_scan_results_buffer[pending_scan_results_length];
 	int i;
 
@@ -802,7 +801,7 @@ static int jlink_tap_execute(void)
 
 	for (i = 0; i &lt; pending_scan_results_length; i++)
 	{
-		pending_scan_result_t *pending_scan_result = &amp;pending_scan_results_buffer[i];
+		struct pending_scan_result *pending_scan_result = &amp;pending_scan_results_buffer[i];
 		uint8_t *buffer = pending_scan_result-&gt;buffer;
 		int length = pending_scan_result-&gt;length;
 		int first = pending_scan_result-&gt;first;
diff --git a/src/jtag/vsllink.c b/src/jtag/vsllink.c
index f462f07..7705e54 100644
--- a/src/jtag/vsllink.c
+++ b/src/jtag/vsllink.c
@@ -163,18 +163,17 @@ static uint8_t VSLLINK_BIT_MSK[8] =
 	0x00, 0x01, 0x03, 0x07, 0x0f, 0x1f, 0x3f, 0x7f
 };
 
-typedef struct
-{
+struct pending_scan_result {
 	int offset;
 	int length; /* Number of bits to read */
 	scan_command_t *command; /* Corresponding scan command */
 	uint8_t *buffer;
-} pending_scan_result_t;
+};
 
 #define MAX_PENDING_SCAN_RESULTS 256
 
 static int pending_scan_results_length;
-static pending_scan_result_t pending_scan_results_buffer[MAX_PENDING_SCAN_RESULTS];
+static struct pending_scan_result pending_scan_results_buffer[MAX_PENDING_SCAN_RESULTS];
 
 /* Queue command functions */
 static void vsllink_end_state(tap_state_t state);
@@ -1488,7 +1487,7 @@ static void vsllink_tap_append_step(int tms, int tdi)
 
 static void vsllink_tap_append_scan_normal(int length, uint8_t *buffer, scan_command_t *command, int offset)
 {
-	pending_scan_result_t *pending_scan_result = &amp;pending_scan_results_buffer[pending_scan_results_length];
+	struct pending_scan_result *pending_scan_result = &amp;pending_scan_results_buffer[pending_scan_results_length];
 	int i;
 
 	if (offset &gt; 0)
@@ -1513,7 +1512,7 @@ static void vsllink_tap_append_scan_normal(int length, uint8_t *buffer, scan_com
 }
 static void vsllink_tap_append_scan_dma(int length, uint8_t *buffer, scan_command_t *command)
 {
-	pending_scan_result_t *pending_scan_result;
+	struct pending_scan_result *pending_scan_result;
 	int len_tmp, len_all, i;
 
 	len_all = 0;
@@ -1591,7 +1590,7 @@ static int vsllink_tap_execute_normal(void)
 		{
 			for (i = 0; i &lt; pending_scan_results_length; i++)
 			{
-				pending_scan_result_t *pending_scan_result = &amp;pending_scan_results_buffer[i];
+				struct pending_scan_result *pending_scan_result = &amp;pending_scan_results_buffer[i];
 				uint8_t *buffer = pending_scan_result-&gt;buffer;
 				int length = pending_scan_result-&gt;length;
 				int offset = pending_scan_result-&gt;offset;
@@ -1664,7 +1663,7 @@ static int vsllink_tap_execute_dma(void)
 		{
 			for (i = 0; i &lt; pending_scan_results_length; i++)
 			{
-				pending_scan_result_t *pending_scan_result = &amp;pending_scan_results_buffer[i];
+				struct pending_scan_result *pending_scan_result = &amp;pending_scan_results_buffer[i];
 				uint8_t *buffer = pending_scan_result-&gt;buffer;
 				int length = pending_scan_result-&gt;length;
 				int first = pending_scan_result-&gt;offset;

commit 8bbb279c2820e8d0b3c95e0de0289be933ccea92
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 04:33:32 2009 -0800

    armjtagew_jtag_t -&gt; struct armjtagew
    
    Remove useless typedef and redundant suffix from struct armjtatew_jtag.

diff --git a/src/jtag/arm-jtag-ew.c b/src/jtag/arm-jtag-ew.c
index e337260..531d605 100644
--- a/src/jtag/arm-jtag-ew.c
+++ b/src/jtag/arm-jtag-ew.c
@@ -84,16 +84,15 @@ static void armjtagew_tap_append_step(int tms, int tdi);
 static void armjtagew_tap_append_scan(int length, uint8_t *buffer, scan_command_t *command);
 
 /* ARM-JTAG-EW lowlevel functions */
-typedef struct armjtagew_jtag
-{
+struct armjtagew {
 	struct usb_dev_handle* usb_handle;
-} armjtagew_jtag_t;
+};
 
-static armjtagew_jtag_t *armjtagew_usb_open(void);
-static void armjtagew_usb_close(armjtagew_jtag_t *armjtagew_jtag);
-static int armjtagew_usb_message(armjtagew_jtag_t *armjtagew_jtag, int out_length, int in_length);
-static int armjtagew_usb_write(armjtagew_jtag_t *armjtagew_jtag, int out_length);
-static int armjtagew_usb_read(armjtagew_jtag_t *armjtagew_jtag, int exp_in_length);
+static struct armjtagew *armjtagew_usb_open(void);
+static void armjtagew_usb_close(struct armjtagew *armjtagew);
+static int armjtagew_usb_message(struct armjtagew *armjtagew, int out_length, int in_length);
+static int armjtagew_usb_write(struct armjtagew *armjtagew, int out_length);
+static int armjtagew_usb_read(struct armjtagew *armjtagew, int exp_in_length);
 
 /* helper functions */
 static int armjtagew_get_version_info(void);
@@ -102,7 +101,7 @@ static int armjtagew_get_version_info(void);
 static void armjtagew_debug_buffer(uint8_t *buffer, int length);
 #endif
 
-static armjtagew_jtag_t* armjtagew_jtag_handle;
+static struct armjtagew* armjtagew_handle;
 
 
 
@@ -209,7 +208,7 @@ static int armjtagew_speed(int speed)
     usb_out_buffer[0] = CMD_SET_TCK_FREQUENCY;
 	buf_set_u32(usb_out_buffer + 1, 0, 32, speed);
 
-    result = armjtagew_usb_message(armjtagew_jtag_handle, 4, 4);
+    result = armjtagew_usb_message(armjtagew_handle, 4, 4);
 
     if (result &lt; 0)
     {
@@ -218,7 +217,7 @@ static int armjtagew_speed(int speed)
     }
 
 	usb_out_buffer[0] = CMD_GET_TCK_FREQUENCY;
-    result = armjtagew_usb_message(armjtagew_jtag_handle, 1, 4);
+    result = armjtagew_usb_message(armjtagew_handle, 1, 4);
 	speed_real = (int)buf_get_u32(usb_in_buffer,0,32);
 	if (result &lt; 0)
 	{
@@ -252,9 +251,9 @@ static int armjtagew_init(void)
 {
 	int check_cnt;
 
-	armjtagew_jtag_handle = armjtagew_usb_open();
+	armjtagew_handle = armjtagew_usb_open();
 
-	if (armjtagew_jtag_handle == 0)
+	if (armjtagew_handle == 0)
 	{
 		LOG_ERROR(&quot;Cannot find ARM-JTAG-EW Interface! Please check connection and permissions.&quot;);
 		return ERROR_JTAG_INIT_FAILED;
@@ -288,7 +287,7 @@ static int armjtagew_init(void)
 
 static int armjtagew_quit(void)
 {
-	armjtagew_usb_close(armjtagew_jtag_handle);
+	armjtagew_usb_close(armjtagew_handle);
 	return ERROR_OK;
 }
 
@@ -452,7 +451,7 @@ static void armjtagew_reset(int trst, int srst)
 	usb_out_buffer[1] = val;
 	usb_out_buffer[2] = outp_en;
 	usb_out_buffer[3] = change_mask;
-	result = armjtagew_usb_write(armjtagew_jtag_handle, 4);
+	result = armjtagew_usb_write(armjtagew_handle, 4);
 	if (result != 4)
 	{
 		LOG_ERROR(&quot;ARM-JTAG-EW TRST/SRST pin set failed failed (%d)&quot;, result);
@@ -465,7 +464,7 @@ static int armjtagew_get_status(void)
 	int result;
 
 	usb_out_buffer[0] = CMD_GET_TAPHW_STATE;
-	result = armjtagew_usb_message(armjtagew_jtag_handle, 1, 12);
+	result = armjtagew_usb_message(armjtagew_handle, 1, 12);
 
 	if (result == 0)
 	{
@@ -500,7 +499,7 @@ static int armjtagew_get_version_info(void)
 
 	/* query hardware version */
 	usb_out_buffer[0] = CMD_GET_VERSION;
-	result = armjtagew_usb_message(armjtagew_jtag_handle, 1, 4 + 15 + 256);
+	result = armjtagew_usb_message(armjtagew_handle, 1, 4 + 15 + 256);
 
 	if (result != 0)
 	{
@@ -665,7 +664,7 @@ static int armjtagew_tap_execute(void)
 			usb_out_buffer[tdi_offset + i] = flip_u32(tdi_buffer[i],8);
 		}
 
-		result = armjtagew_usb_message(armjtagew_jtag_handle, 3 + 2 * byte_length, byte_length + 4);
+		result = armjtagew_usb_message(armjtagew_handle, 3 + 2 * byte_length, byte_length + 4);
 
 		if (result == 0)
 		{
@@ -726,15 +725,15 @@ static int armjtagew_tap_execute(void)
 /*****************************************************************************/
 /* JLink USB low-level functions */
 
-static armjtagew_jtag_t* armjtagew_usb_open()
+static struct armjtagew* armjtagew_usb_open()
 {
 	struct usb_bus *busses;
 	struct usb_bus *bus;
 	struct usb_device *dev;
 
-	armjtagew_jtag_t *result;
+	struct armjtagew *result;
 
-	result = (armjtagew_jtag_t*) malloc(sizeof(armjtagew_jtag_t));
+	result = (struct armjtagew*) malloc(sizeof(struct armjtagew));
 
 	usb_init();
 	usb_find_busses();
@@ -742,7 +741,7 @@ static armjtagew_jtag_t* armjtagew_usb_open()
 
 	busses = usb_get_busses();
 
-	/* find armjtagew_jtag device in usb bus */
+	/* find armjtagew device in usb bus */
 
 	for (bus = busses; bus; bus = bus-&gt;next)
 	{
@@ -774,21 +773,21 @@ static armjtagew_jtag_t* armjtagew_usb_open()
 	return NULL;
 }
 
-static void armjtagew_usb_close(armjtagew_jtag_t *armjtagew_jtag)
+static void armjtagew_usb_close(struct armjtagew *armjtagew)
 {
-	usb_close(armjtagew_jtag-&gt;usb_handle);
-	free(armjtagew_jtag);
+	usb_close(armjtagew-&gt;usb_handle);
+	free(armjtagew);
 }
 
 /* Send a message and receive the reply. */
-static int armjtagew_usb_message(armjtagew_jtag_t *armjtagew_jtag, int out_length, int in_length)
+static int armjtagew_usb_message(struct armjtagew *armjtagew, int out_length, int in_length)
 {
 	int result;
 
-	result = armjtagew_usb_write(armjtagew_jtag, out_length);
+	result = armjtagew_usb_write(armjtagew, out_length);
 	if (result == out_length)
 	{
-		result = armjtagew_usb_read(armjtagew_jtag, in_length);
+		result = armjtagew_usb_read(armjtagew, in_length);
 		if (result != in_length)
 		{
 			LOG_ERROR(&quot;usb_bulk_read failed (requested=%d, result=%d)&quot;, in_length, result);
@@ -804,17 +803,17 @@ static int armjtagew_usb_message(armjtagew_jtag_t *armjtagew_jtag, int out_lengt
 }
 
 /* Write data from out_buffer to USB. */
-static int armjtagew_usb_write(armjtagew_jtag_t *armjtagew_jtag, int out_length)
+static int armjtagew_usb_write(struct armjtagew *armjtagew, int out_length)
 {
 	int result;
 
 	if (out_length &gt; ARMJTAGEW_OUT_BUFFER_SIZE)
 	{
-		LOG_ERROR(&quot;armjtagew_jtag_write illegal out_length=%d (max=%d)&quot;, out_length, ARMJTAGEW_OUT_BUFFER_SIZE);
+		LOG_ERROR(&quot;armjtagew_write illegal out_length=%d (max=%d)&quot;, out_length, ARMJTAGEW_OUT_BUFFER_SIZE);
 		return -1;
 	}
 
-	result = usb_bulk_write(armjtagew_jtag-&gt;usb_handle, ARMJTAGEW_EPT_BULK_OUT, \
+	result = usb_bulk_write(armjtagew-&gt;usb_handle, ARMJTAGEW_EPT_BULK_OUT, \
 		(char*)usb_out_buffer, out_length, ARMJTAGEW_USB_TIMEOUT);
 
 	DEBUG_JTAG_IO(&quot;armjtagew_usb_write, out_length = %d, result = %d&quot;, out_length, result);
@@ -826,9 +825,9 @@ static int armjtagew_usb_write(armjtagew_jtag_t *armjtagew_jtag, int out_length)
 }
 
 /* Read data from USB into in_buffer. */
-static int armjtagew_usb_read(armjtagew_jtag_t *armjtagew_jtag, int exp_in_length)
+static int armjtagew_usb_read(struct armjtagew *armjtagew, int exp_in_length)
 {
-	int result = usb_bulk_read(armjtagew_jtag-&gt;usb_handle, ARMJTAGEW_EPT_BULK_IN, \
+	int result = usb_bulk_read(armjtagew-&gt;usb_handle, ARMJTAGEW_EPT_BULK_IN, \
 		(char*)usb_in_buffer, exp_in_length, ARMJTAGEW_USB_TIMEOUT);
 
 	DEBUG_JTAG_IO(&quot;armjtagew_usb_read, result = %d&quot;, result);

commit 5874d5f2ea2ef9bd7d759d47ed868269ba99ab65
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 04:28:41 2009 -0800

    use struct jtag_tap_event_action
    
    Remove useless typedef and redundant suffix from jtag_tap_event_action.

diff --git a/src/jtag/jtag.h b/src/jtag/jtag.h
index 713823a..e3f8148 100644
--- a/src/jtag/jtag.h
+++ b/src/jtag/jtag.h
@@ -143,8 +143,6 @@ struct scan_field {
 	uint8_t intmp[4];
 };
 
-typedef struct jtag_tap_event_action_s jtag_tap_event_action_t;
-
 struct jtag_tap {
 	const char* chip;
 	const char* tapname;
@@ -174,7 +172,7 @@ struct jtag_tap {
 	/// Bypass register selected
 	int bypass;
 
-	jtag_tap_event_action_t *event_action;
+	struct jtag_tap_event_action *event_action;
 
 	struct jtag_tap* next_tap;
 };
@@ -220,11 +218,11 @@ enum jtag_event {
 	JTAG_TAP_EVENT_DISABLE,
 };
 
-struct jtag_tap_event_action_s
+struct jtag_tap_event_action
 {
 	enum jtag_event		event;
 	Jim_Obj*                 body;
-	jtag_tap_event_action_t* next;
+	struct jtag_tap_event_action* next;
 };
 
 /**
diff --git a/src/jtag/tcl.c b/src/jtag/tcl.c
index 3c9ef0e..9d6169c 100644
--- a/src/jtag/tcl.c
+++ b/src/jtag/tcl.c
@@ -103,7 +103,7 @@ static int jtag_tap_configure_cmd(Jim_GetOptInfo *goi, struct jtag_tap * tap)
 				}
 
 				{
-					jtag_tap_event_action_t *jteap;
+					struct jtag_tap_event_action *jteap;
 
 					jteap = tap-&gt;event_action;
 					/* replace existing? */
@@ -337,7 +337,7 @@ static int jim_newtap_cmd(Jim_GetOptInfo *goi)
 
 static void jtag_tap_handle_event(struct jtag_tap *tap, enum jtag_event e)
 {
-	jtag_tap_event_action_t * jteap;
+	struct jtag_tap_event_action * jteap;
 
 	for (jteap = tap-&gt;event_action; jteap != NULL; jteap = jteap-&gt;next) {
 		if (jteap-&gt;event == e) {

commit 363d72a48457e03d2ffdbf9154b8ba3fdb9197d0
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 04:23:43 2009 -0800

    jtag_event_callback_t -&gt; struct jtag_event_callback
    
    Remove useless typedef and redundant suffix from jtag_event_callback.
    Add documentation for the structure.

diff --git a/src/jtag/core.c b/src/jtag/core.c
index 3684e06..1c2e265 100644
--- a/src/jtag/core.c
+++ b/src/jtag/core.c
@@ -98,15 +98,21 @@ static int jtag_ntrst_delay = 0; /* default to no nTRST delay */
 static int jtag_nsrst_assert_width = 0; /* width of assertion */
 static int jtag_ntrst_assert_width = 0; /* width of assertion */
 
-typedef struct jtag_event_callback_s
-{
-	jtag_event_handler_t          callback;
-	void*                         priv;
-	struct jtag_event_callback_s* next;
-} jtag_event_callback_t;
+/**
+ * Contains a single callback along with a pointer that will be passed
+ * when an event occurs.
+ */
+struct jtag_event_callback {
+	/// a event callback
+	jtag_event_handler_t callback;
+	/// the private data to pass to the callback
+	void* priv;
+	/// the next callback
+	struct jtag_event_callback* next;
+};
 
 /* callbacks to inform high-level handlers about JTAG state changes */
-static jtag_event_callback_t *jtag_event_callbacks;
+static struct jtag_event_callback *jtag_event_callbacks;
 
 /* speed in kHz*/
 static int speed_khz = 0;
@@ -269,7 +275,7 @@ const char *jtag_tap_name(const struct jtag_tap *tap)
 
 int jtag_register_event_callback(jtag_event_handler_t callback, void *priv)
 {
-	jtag_event_callback_t **callbacks_p = &amp;jtag_event_callbacks;
+	struct jtag_event_callback **callbacks_p = &amp;jtag_event_callbacks;
 
 	if (callback == NULL)
 	{
@@ -283,7 +289,7 @@ int jtag_register_event_callback(jtag_event_handler_t callback, void *priv)
 		callbacks_p = &amp;((*callbacks_p)-&gt;next);
 	}
 
-	(*callbacks_p) = malloc(sizeof(jtag_event_callback_t));
+	(*callbacks_p) = malloc(sizeof(struct jtag_event_callback));
 	(*callbacks_p)-&gt;callback = callback;
 	(*callbacks_p)-&gt;priv = priv;
 	(*callbacks_p)-&gt;next = NULL;
@@ -293,8 +299,8 @@ int jtag_register_event_callback(jtag_event_handler_t callback, void *priv)
 
 int jtag_unregister_event_callback(jtag_event_handler_t callback, void *priv)
 {
-	jtag_event_callback_t **callbacks_p;
-	jtag_event_callback_t **next;
+	struct jtag_event_callback **callbacks_p;
+	struct jtag_event_callback **next;
 
 	if (callback == NULL)
 	{
@@ -322,13 +328,13 @@ int jtag_unregister_event_callback(jtag_event_handler_t callback, void *priv)
 
 int jtag_call_event_callbacks(enum jtag_event event)
 {
-	jtag_event_callback_t *callback = jtag_event_callbacks;
+	struct jtag_event_callback *callback = jtag_event_callbacks;
 
 	LOG_DEBUG(&quot;jtag event: %s&quot;, jtag_event_strings[event]);
 
 	while (callback)
 	{
-		jtag_event_callback_t *next;
+		struct jtag_event_callback *next;
 
 		/* callback may remove itself */
 		next = callback-&gt;next;

commit 9f535f9af7c6b7e8843033049a6da0f6d76d513b
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 04:14:50 2009 -0800

    jtag_interface_t -&gt; struct jtag_interface
    
    Remove useless typedef and redundant suffix from struct jtag_interface.

diff --git a/src/jtag/amt_jtagaccel.c b/src/jtag/amt_jtagaccel.c
index a34387f..306216a 100644
--- a/src/jtag/amt_jtagaccel.c
+++ b/src/jtag/amt_jtagaccel.c
@@ -552,7 +552,7 @@ static int amt_jtagaccel_register_commands(struct command_context_s *cmd_ctx)
 	return ERROR_OK;
 }
 
-jtag_interface_t amt_jtagaccel_interface = {
+struct jtag_interface amt_jtagaccel_interface = {
 		.name = &quot;amt_jtagaccel&quot;,
 		.register_commands = &amp;amt_jtagaccel_register_commands,
 		.init = &amp;amt_jtagaccel_init,
diff --git a/src/jtag/arm-jtag-ew.c b/src/jtag/arm-jtag-ew.c
index fa18ef0..e337260 100644
--- a/src/jtag/arm-jtag-ew.c
+++ b/src/jtag/arm-jtag-ew.c
@@ -109,7 +109,7 @@ static armjtagew_jtag_t* armjtagew_jtag_handle;
 /***************************************************************************/
 /* External interface implementation */
 
-jtag_interface_t armjtagew_interface =
+struct jtag_interface armjtagew_interface =
 {
 	.name = &quot;arm-jtag-ew&quot;,
 	.execute_queue = armjtagew_execute_queue,
diff --git a/src/jtag/at91rm9200.c b/src/jtag/at91rm9200.c
index 52869a3..7062575 100644
--- a/src/jtag/at91rm9200.c
+++ b/src/jtag/at91rm9200.c
@@ -122,7 +122,7 @@ static int at91rm9200_register_commands(struct command_context_s *cmd_ctx);
 static int at91rm9200_init(void);
 static int at91rm9200_quit(void);
 
-jtag_interface_t at91rm9200_interface =
+struct jtag_interface at91rm9200_interface =
 {
 	.name = &quot;at91rm9200&quot;,
 
diff --git a/src/jtag/core.c b/src/jtag/core.c
index 48af040..3684e06 100644
--- a/src/jtag/core.c
+++ b/src/jtag/core.c
@@ -115,10 +115,10 @@ static int rclk_fallback_speed_khz = 0;
 static enum {CLOCK_MODE_SPEED, CLOCK_MODE_KHZ, CLOCK_MODE_RCLK} clock_mode;
 static int jtag_speed = 0;
 
-static struct jtag_interface_s *jtag = NULL;
+static struct jtag_interface *jtag = NULL;
 
 /* configuration */
-jtag_interface_t *jtag_interface = NULL;
+struct jtag_interface *jtag_interface = NULL;
 
 void jtag_set_error(int error)
 {
diff --git a/src/jtag/dummy.c b/src/jtag/dummy.c
index 5fc9251..ce3cca3 100644
--- a/src/jtag/dummy.c
+++ b/src/jtag/dummy.c
@@ -46,7 +46,7 @@ static int dummy_speed_div(int speed, int *khz);
 /* The dummy driver is used to easily check the code path
  * where the target is unresponsive.
  */
-jtag_interface_t dummy_interface =
+struct jtag_interface dummy_interface =
 {
 	.name = &quot;dummy&quot;,
 
diff --git a/src/jtag/ep93xx.c b/src/jtag/ep93xx.c
index 50e2ad3..6ae823e 100644
--- a/src/jtag/ep93xx.c
+++ b/src/jtag/ep93xx.c
@@ -53,7 +53,7 @@ static int ep93xx_quit(void);
 
 struct timespec ep93xx_zzzz;
 
-jtag_interface_t ep93xx_interface =
+struct jtag_interface ep93xx_interface =
 {
 	.name = &quot;ep93xx&quot;,
 
diff --git a/src/jtag/ft2232.c b/src/jtag/ft2232.c
index 39036bc..6f8dd0d 100644
--- a/src/jtag/ft2232.c
+++ b/src/jtag/ft2232.c
@@ -3993,7 +3993,7 @@ static int ft2232_register_commands(struct command_context_s* cmd_ctx)
 }
 
 
-jtag_interface_t ft2232_interface = {
+struct jtag_interface ft2232_interface = {
 		.name = &quot;ft2232&quot;,
 		.register_commands = &amp;ft2232_register_commands,
 		.init = &amp;ft2232_init,
diff --git a/src/jtag/gw16012.c b/src/jtag/gw16012.c
index 07188f4..dfc07be 100644
--- a/src/jtag/gw16012.c
+++ b/src/jtag/gw16012.c
@@ -571,7 +571,7 @@ static int gw16012_register_commands(struct command_context_s *cmd_ctx)
 	return ERROR_OK;
 }
 
-jtag_interface_t gw16012_interface = {
+struct jtag_interface gw16012_interface = {
 		.name = &quot;gw16012&quot;,
 		.register_commands = &amp;gw16012_register_commands,
 		.init = &amp;gw16012_init,
diff --git a/src/jtag/interface.h b/src/jtag/interface.h
index afe2108..5727298 100644
--- a/src/jtag/interface.h
+++ b/src/jtag/interface.h
@@ -184,8 +184,7 @@ static inline tap_state_t jtag_debug_state_machine(const void *tms_buf,
 }
 #endif // _DEBUG_JTAG_IO_
 
-typedef struct jtag_interface_s
-{
+struct jtag_interface {
 	/// The name of the JTAG interface driver.
 	char* name;
 
@@ -271,7 +270,7 @@ typedef struct jtag_interface_s
 	 * @returns ERROR_OK on success, or an error code on failure.
 	 */
 	int (*srst_asserted)(int* srst_asserted);
-} jtag_interface_t;
+};
 
 
 #endif // OPENOCD_JTAG_INTERFACE_H
diff --git a/src/jtag/interfaces.c b/src/jtag/interfaces.c
index 778c4e3..643e111 100644
--- a/src/jtag/interfaces.c
+++ b/src/jtag/interfaces.c
@@ -42,51 +42,51 @@
  */
 
 #if BUILD_ZY1000 == 1
-extern jtag_interface_t zy1000_interface;
+extern struct jtag_interface zy1000_interface;
 #elif defined(BUILD_MINIDRIVER_DUMMY)
-extern jtag_interface_t minidummy_interface;
+extern struct jtag_interface minidummy_interface;
 #else // standard drivers
 #if BUILD_PARPORT == 1
-extern jtag_interface_t parport_interface;
+extern struct jtag_interface parport_interface;
 #endif
 #if BUILD_DUMMY == 1
-extern jtag_interface_t dummy_interface;
+extern struct jtag_interface dummy_interface;
 #endif
 #if BUILD_FT2232_FTD2XX == 1
-extern jtag_interface_t ft2232_interface;
+extern struct jtag_interface ft2232_interface;
 #endif
 #if BUILD_FT2232_LIBFTDI == 1
-extern jtag_interface_t ft2232_interface;
+extern struct jtag_interface ft2232_interface;
 #endif
 #if BUILD_AMTJTAGACCEL == 1
-extern jtag_interface_t amt_jtagaccel_interface;
+extern struct jtag_interface amt_jtagaccel_interface;
 #endif
 #if BUILD_EP93XX == 1
-extern jtag_interface_t ep93xx_interface;
+extern struct jtag_interface ep93xx_interface;
 #endif
 #if BUILD_AT91RM9200 == 1
-extern jtag_interface_t at91rm9200_interface;
+extern struct jtag_interface at91rm9200_interface;
 #endif
 #if BUILD_GW16012 == 1
-extern jtag_interface_t gw16012_interface;
+extern struct jtag_interface gw16012_interface;
 #endif
 #if BUILD_PRESTO_LIBFTDI == 1 || BUILD_PRESTO_FTD2XX == 1
-extern jtag_interface_t presto_interface;
+extern struct jtag_interface presto_interface;
 #endif
 #if BUILD_USBPROG == 1
-extern jtag_interface_t usbprog_interface;
+extern struct jtag_interface usbprog_interface;
 #endif
 #if BUILD_JLINK == 1
-extern jtag_interface_t jlink_interface;
+extern struct jtag_interface jlink_interface;
 #endif
 #if BUILD_VSLLINK == 1
-extern jtag_interface_t vsllink_interface;
+extern struct jtag_interface vsllink_interface;
 #endif
 #if BUILD_RLINK == 1
-extern jtag_interface_t rlink_interface;
+extern struct jtag_interface rlink_interface;
 #endif
 #if BUILD_ARMJTAGEW == 1
-extern jtag_interface_t armjtagew_interface;
+extern struct jtag_interface armjtagew_interface;
 #endif
 #endif // standard drivers
 
@@ -97,7 +97,7 @@ extern jtag_interface_t armjtagew_interface;
  * The list should be defined to contain either one minidriver interface
  * or some number of standard driver interfaces, never both.
  */
-jtag_interface_t *jtag_interfaces[] = {
+struct jtag_interface *jtag_interfaces[] = {
 #if BUILD_ZY1000 == 1
 		&amp;zy1000_interface,
 #elif defined(BUILD_MINIDRIVER_DUMMY)
diff --git a/src/jtag/interfaces.h b/src/jtag/interfaces.h
index a32d3f9..38f1e71 100644
--- a/src/jtag/interfaces.h
+++ b/src/jtag/interfaces.h
@@ -40,6 +40,6 @@
 /// Dynamically load all JTAG interface modules from specified directory.
 void jtag_interface_modules_load(const char *path);
 
-extern jtag_interface_t *jtag_interfaces[];
+extern struct jtag_interface *jtag_interfaces[];
 
 #endif // OPENOCD_JTAG_INTERFACES_H
diff --git a/src/jtag/jlink.c b/src/jtag/jlink.c
index 5cf944c..8d9aa8f 100644
--- a/src/jtag/jlink.c
+++ b/src/jtag/jlink.c
@@ -139,7 +139,7 @@ static jlink_jtag_t* jlink_jtag_handle;
 /***************************************************************************/
 /* External interface implementation */
 
-jtag_interface_t jlink_interface =
+struct jtag_interface jlink_interface =
 {
 	.name = &quot;jlink&quot;,
 	.execute_queue = jlink_execute_queue,
diff --git a/src/jtag/minidummy/minidummy.c b/src/jtag/minidummy/minidummy.c
index af98ec5..b01f593 100644
--- a/src/jtag/minidummy/minidummy.c
+++ b/src/jtag/minidummy/minidummy.c
@@ -27,7 +27,7 @@
 
 
 
-jtag_interface_t minidummy_interface =
+struct jtag_interface minidummy_interface =
 {
 	.name = &quot;minidummy&quot;,
 	.execute_queue = NULL,
diff --git a/src/jtag/parport.c b/src/jtag/parport.c
index 8906970..d4d9b22 100644
--- a/src/jtag/parport.c
+++ b/src/jtag/parport.c
@@ -510,7 +510,7 @@ static int parport_register_commands(struct command_context_s *cmd_ctx)
 	return ERROR_OK;
 }
 
-jtag_interface_t parport_interface = {
+struct jtag_interface parport_interface = {
 	.name =			&quot;parport&quot;,
 	.register_commands =	parport_register_commands,
 	.init =			parport_init,
diff --git a/src/jtag/presto.c b/src/jtag/presto.c
index b870377..29066b1 100644
--- a/src/jtag/presto.c
+++ b/src/jtag/presto.c
@@ -46,7 +46,7 @@ static int presto_jtag_register_commands(struct command_context_s *cmd_ctx);
 static int presto_jtag_init(void);
 static int presto_jtag_quit(void);
 
-jtag_interface_t presto_interface =
+struct jtag_interface presto_interface =
 {
 	.name = &quot;presto&quot;,
 	.execute_queue = bitq_execute_queue,
diff --git a/src/jtag/rlink/rlink.c b/src/jtag/rlink/rlink.c
index 3c85789..db91698 100644
--- a/src/jtag/rlink/rlink.c
+++ b/src/jtag/rlink/rlink.c
@@ -1878,7 +1878,7 @@ int rlink_quit(void)
 }
 
 
-jtag_interface_t rlink_interface =
+struct jtag_interface rlink_interface =
 {
 	.name = &quot;rlink&quot;,
 	.init = rlink_init,
diff --git a/src/jtag/tcl.c b/src/jtag/tcl.c
index 04b3ed2..3c9ef0e 100644
--- a/src/jtag/tcl.c
+++ b/src/jtag/tcl.c
@@ -49,7 +49,7 @@ static const Jim_Nvp nvp_jtag_tap_event[] = {
 	{ .name = NULL, .value = -1 }
 };
 
-extern jtag_interface_t *jtag_interface;
+extern struct jtag_interface *jtag_interface;
 
 enum jtag_tap_cfg_param {
 	JCFG_EVENT
diff --git a/src/jtag/usbprog.c b/src/jtag/usbprog.c
index 6c41664..06a9673 100644
--- a/src/jtag/usbprog.c
+++ b/src/jtag/usbprog.c
@@ -61,7 +61,7 @@ static void usbprog_path_move(pathmove_command_t *cmd);
 static void usbprog_runtest(int num_cycles);
 static void usbprog_scan(bool ir_scan, enum scan_type type, uint8_t *buffer, int scan_size);
 
-jtag_interface_t usbprog_interface =
+struct jtag_interface usbprog_interface =
 {
 	.name = &quot;usbprog&quot;,
 	.execute_queue = usbprog_execute_queue,
diff --git a/src/jtag/vsllink.c b/src/jtag/vsllink.c
index decca16..f462f07 100644
--- a/src/jtag/vsllink.c
+++ b/src/jtag/vsllink.c
@@ -1907,7 +1907,7 @@ static int vsllink_register_commands(struct command_context_s *cmd_ctx)
 	return ERROR_OK;
 }
 
-jtag_interface_t vsllink_interface = {
+struct jtag_interface vsllink_interface = {
 		.name = &quot;vsllink&quot;,
 		.register_commands = &amp;vsllink_register_commands,
 		.init = &amp;vsllink_init,
diff --git a/src/jtag/zy1000/zy1000.c b/src/jtag/zy1000/zy1000.c
index 1a926ca..8f4d5e5 100644
--- a/src/jtag/zy1000/zy1000.c
+++ b/src/jtag/zy1000/zy1000.c
@@ -110,7 +110,7 @@ static int zy1000_power_dropout(int *dropout)
 }
 
 
-jtag_interface_t zy1000_interface =
+struct jtag_interface zy1000_interface =
 {
 	.name = &quot;ZY1000&quot;,
 	.execute_queue = NULL,

commit bee796b5b07a0f83ed0ad2360bad70d8409e1109
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 04:10:56 2009 -0800

    bitbang_interface_t -&gt; struct bitbang_interface
    
    Removes another useless typedef and suffix.

diff --git a/src/jtag/at91rm9200.c b/src/jtag/at91rm9200.c
index d5dfbed..52869a3 100644
--- a/src/jtag/at91rm9200.c
+++ b/src/jtag/at91rm9200.c
@@ -134,7 +134,7 @@ jtag_interface_t at91rm9200_interface =
 	.quit = at91rm9200_quit,
 };
 
-static bitbang_interface_t at91rm9200_bitbang =
+static struct bitbang_interface at91rm9200_bitbang =
 {
 	.read = at91rm9200_read,
 	.write = at91rm9200_write,
diff --git a/src/jtag/bitbang.c b/src/jtag/bitbang.c
index 96b4daf..d62a5cd 100644
--- a/src/jtag/bitbang.c
+++ b/src/jtag/bitbang.c
@@ -39,7 +39,7 @@
 static void bitbang_stableclocks(int num_cycles);
 
 
-bitbang_interface_t *bitbang_interface;
+struct bitbang_interface *bitbang_interface;
 
 /* DANGER!!!! clock absolutely *MUST* be 0 in idle or reset won't work!
  *
diff --git a/src/jtag/bitbang.h b/src/jtag/bitbang.h
index 060b689..db5c4cb 100644
--- a/src/jtag/bitbang.h
+++ b/src/jtag/bitbang.h
@@ -23,18 +23,17 @@
 #ifndef BITBANG_H
 #define BITBANG_H
 
-typedef struct bitbang_interface_s
-{
+struct bitbang_interface {
 	/* low level callbacks (for bitbang)
 	 */
 	int (*read)(void);
 	void (*write)(int tck, int tms, int tdi);
 	void (*reset)(int trst, int srst);
 	void (*blink)(int on);
-} bitbang_interface_t;
-
-extern bitbang_interface_t *bitbang_interface;
+};
 
 int bitbang_execute_queue(void);
 
+extern struct bitbang_interface *bitbang_interface;
+
 #endif /* BITBANG_H */
diff --git a/src/jtag/dummy.c b/src/jtag/dummy.c
index e840da2..5fc9251 100644
--- a/src/jtag/dummy.c
+++ b/src/jtag/dummy.c
@@ -66,7 +66,7 @@ static void dummy_write(int tck, int tms, int tdi);
 static void dummy_reset(int trst, int srst);
 static void dummy_led(int on);
 
-static bitbang_interface_t dummy_bitbang =
+static struct bitbang_interface dummy_bitbang =
 {
 	.read = dummy_read,
 	.write = dummy_write,
diff --git a/src/jtag/ep93xx.c b/src/jtag/ep93xx.c
index d380e5f..50e2ad3 100644
--- a/src/jtag/ep93xx.c
+++ b/src/jtag/ep93xx.c
@@ -65,7 +65,7 @@ jtag_interface_t ep93xx_interface =
 	.quit = ep93xx_quit,
 };
 
-static bitbang_interface_t ep93xx_bitbang =
+static struct bitbang_interface ep93xx_bitbang =
 {
 	.read = ep93xx_read,
 	.write = ep93xx_write,
diff --git a/src/jtag/parport.c b/src/jtag/parport.c
index a18b3f6..8906970 100644
--- a/src/jtag/parport.c
+++ b/src/jtag/parport.c
@@ -255,7 +255,7 @@ static int parport_get_giveio_access(void)
 }
 #endif
 
-static bitbang_interface_t parport_bitbang = {
+static struct bitbang_interface parport_bitbang = {
 		.read = &amp;parport_read,
 		.write = &amp;parport_write,
 		.reset = &amp;parport_reset,

commit c20b779b891f9d0fd031880841b269fbe8582579
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 04:08:19 2009 -0800

    bitq_interface_t -&gt; struct biq_interface
    
    Remove useless typedef and redundant suffix.

diff --git a/src/jtag/bitq.c b/src/jtag/bitq.c
index 56cc31e..145324c 100644
--- a/src/jtag/bitq.c
+++ b/src/jtag/bitq.c
@@ -25,7 +25,7 @@
 #include &quot;interface.h&quot;
 
 
-bitq_interface_t* bitq_interface;       /* low level bit queue interface */
+struct bitq_interface* bitq_interface;       /* low level bit queue interface */
 
 /* state of input queue */
 struct bitq_state {
diff --git a/src/jtag/bitq.h b/src/jtag/bitq.h
index d0774f1..48b47db 100644
--- a/src/jtag/bitq.h
+++ b/src/jtag/bitq.h
@@ -22,10 +22,8 @@
 
 #include &quot;commands.h&quot;
 
-typedef struct bitq_interface_s
-{
-	/* functions enqueueing low level IO requests
-	*/
+struct bitq_interface {
+	// function to enqueueing low level IO requests
 	int (*out)(int tms, int tdi, int tdo_req);
 	int (*flush)(void);
 
@@ -37,9 +35,9 @@ typedef struct bitq_interface_s
 	 */
 	int (*in_rdy)(void);
 	int (*in)(void);
-} bitq_interface_t;
+};
 
-extern bitq_interface_t *bitq_interface;
+extern struct bitq_interface *bitq_interface;
 
 int bitq_execute_queue(void);
 
diff --git a/src/jtag/presto.c b/src/jtag/presto.c
index 8789bed..b870377 100644
--- a/src/jtag/presto.c
+++ b/src/jtag/presto.c
@@ -65,7 +65,7 @@ static int presto_bitq_reset(int trst, int srst);
 static int presto_bitq_in_rdy(void);
 static int presto_bitq_in(void);
 
-static bitq_interface_t presto_bitq =
+static struct bitq_interface presto_bitq =
 {
 	.out = presto_bitq_out,
 	.flush = presto_bitq_flush,

commit ff3150922b676223ad1acc4bcd127aa9fe03fa31
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 04:00:59 2009 -0800

    encapsulate bitq_state structure
    
    Move the bitq_state structure from the header to source file, as it
    is used internally.
    
    Also removes its silly typedef.

diff --git a/src/jtag/bitq.c b/src/jtag/bitq.c
index 8ddde81..56cc31e 100644
--- a/src/jtag/bitq.c
+++ b/src/jtag/bitq.c
@@ -27,7 +27,14 @@
 
 bitq_interface_t* bitq_interface;       /* low level bit queue interface */
 
-static bitq_state_t      bitq_in_state;        /* state of input queue */
+/* state of input queue */
+struct bitq_state {
+	jtag_command_t *cmd; /* command currently processed */
+	int field_idx; /* index of field currently being processed */
+	int bit_pos; /* position of bit curently being processed */
+	int status; /* processing status */
+};
+static struct bitq_state bitq_in_state;
 
 static uint8_t* bitq_in_buffer;                     /* buffer dynamically reallocated as needed */
 static int     bitq_in_bufsize = 32; /* min. buffer size */
diff --git a/src/jtag/bitq.h b/src/jtag/bitq.h
index 15b2d5c..d0774f1 100644
--- a/src/jtag/bitq.h
+++ b/src/jtag/bitq.h
@@ -39,15 +39,6 @@ typedef struct bitq_interface_s
 	int (*in)(void);
 } bitq_interface_t;
 
-typedef struct bitq_state_s
-{
-  jtag_command_t *cmd; /* command currently processed */
-  int field_idx; /* index of field currently being processed */
-  int bit_pos; /* position of bit curently being processed */
-
-  int status; /* processing status */
-} bitq_state_t;
-
 extern bitq_interface_t *bitq_interface;
 
 int bitq_execute_queue(void);

commit d0809ac060b35a04e7f0bceb96e1868663bd18df
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 03:28:03 2009 -0800

    scan_field_t -&gt; struct scan_field
    
    Remove useless structure typedef.

diff --git a/src/flash/str9xpec.c b/src/flash/str9xpec.c
index eabe21f..83566df 100644
--- a/src/flash/str9xpec.c
+++ b/src/flash/str9xpec.c
@@ -40,7 +40,7 @@ int str9xpec_set_instr(struct jtag_tap *tap, uint32_t new_instr, tap_state_t end
 
 	if (buf_get_u32(tap-&gt;cur_instr, 0, tap-&gt;ir_length) != new_instr)
 	{
-		scan_field_t field;
+		struct scan_field field;
 
 		field.tap = tap;
 		field.num_bits = tap-&gt;ir_length;
@@ -58,7 +58,7 @@ int str9xpec_set_instr(struct jtag_tap *tap, uint32_t new_instr, tap_state_t end
 
 static uint8_t str9xpec_isc_status(struct jtag_tap *tap)
 {
-	scan_field_t field;
+	struct scan_field field;
 	uint8_t status;
 
 	if (str9xpec_set_instr(tap, ISC_NOOP, TAP_IRPAUSE) != ERROR_OK)
@@ -139,7 +139,7 @@ static int str9xpec_isc_disable(struct flash_bank_s *bank)
 
 static int str9xpec_read_config(struct flash_bank_s *bank)
 {
-	scan_field_t field;
+	struct scan_field field;
 	uint8_t status;
 	struct jtag_tap *tap;
 
@@ -271,7 +271,7 @@ FLASH_BANK_COMMAND_HANDLER(str9xpec_flash_bank_command)
 
 static int str9xpec_blank_check(struct flash_bank_s *bank, int first, int last)
 {
-	scan_field_t field;
+	struct scan_field field;
 	uint8_t status;
 	struct jtag_tap *tap;
 	int i;
@@ -360,7 +360,7 @@ static int str9xpec_protect_check(struct flash_bank_s *bank)
 
 static int str9xpec_erase_area(struct flash_bank_s *bank, int first, int last)
 {
-	scan_field_t field;
+	struct scan_field field;
 	uint8_t status;
 	struct jtag_tap *tap;
 	int i;
@@ -442,7 +442,7 @@ static int str9xpec_erase(struct flash_bank_s *bank, int first, int last)
 
 static int str9xpec_lock_device(struct flash_bank_s *bank)
 {
-	scan_field_t field;
+	struct scan_field field;
 	uint8_t status;
 	struct jtag_tap *tap;
 	str9xpec_flash_controller_t *str9xpec_info = NULL;
@@ -540,7 +540,7 @@ static int str9xpec_protect(struct flash_bank_s *bank, int set, int first, int l
 static int str9xpec_set_address(struct flash_bank_s *bank, uint8_t sector)
 {
 	struct jtag_tap *tap;
-	scan_field_t field;
+	struct scan_field field;
 	str9xpec_flash_controller_t *str9xpec_info = bank-&gt;driver_priv;
 
 	tap = str9xpec_info-&gt;tap;
@@ -567,7 +567,7 @@ static int str9xpec_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t o
 	uint8_t status;
 	uint32_t check_address = offset;
 	struct jtag_tap *tap;
-	scan_field_t field;
+	struct scan_field field;
 	uint8_t *scanbuf;
 	int i;
 	int first_sector = 0;
@@ -728,7 +728,7 @@ static int str9xpec_probe(struct flash_bank_s *bank)
 
 COMMAND_HANDLER(str9xpec_handle_part_id_command)
 {
-	scan_field_t field;
+	struct scan_field field;
 	uint8_t *buffer = NULL;
 	struct jtag_tap *tap;
 	uint32_t idcode;
@@ -835,7 +835,7 @@ COMMAND_HANDLER(str9xpec_handle_flash_options_read_command)
 
 static int str9xpec_write_options(struct flash_bank_s *bank)
 {
-	scan_field_t field;
+	struct scan_field field;
 	uint8_t status;
 	struct jtag_tap *tap;
 	str9xpec_flash_controller_t *str9xpec_info = NULL;
diff --git a/src/jtag/bitq.c b/src/jtag/bitq.c
index cb7b511..8ddde81 100644
--- a/src/jtag/bitq.c
+++ b/src/jtag/bitq.c
@@ -44,7 +44,7 @@ void bitq_in_proc(void)
 	static int    in_idx;   /* index of byte being scanned */
 	static uint8_t     in_mask;  /* mask of next bit to be scanned */
 
-	scan_field_t* field;
+	struct scan_field* field;
 	int           tdo;
 
 	/* loop through the queue */
@@ -213,7 +213,7 @@ void bitq_runtest(int num_cycles)
 }
 
 
-void bitq_scan_field(scan_field_t* field, int pause)
+void bitq_scan_field(struct scan_field* field, int pause)
 {
 	int bit_cnt;
 	int tdo_req;
diff --git a/src/jtag/commands.h b/src/jtag/commands.h
index 5a76a8f..ac440db 100644
--- a/src/jtag/commands.h
+++ b/src/jtag/commands.h
@@ -53,7 +53,7 @@ typedef struct scan_command_s
 	/// number of fields in *fields array
 	int num_fields;
 	/// pointer to an array of data scan fields
-	scan_field_t* fields;
+	struct scan_field* fields;
 	/// state in which JTAG commands should finish
 	tap_state_t end_state;
 } scan_command_t;
diff --git a/src/jtag/core.c b/src/jtag/core.c
index 9eee5e1..48af040 100644
--- a/src/jtag/core.c
+++ b/src/jtag/core.c
@@ -43,8 +43,8 @@
 /// The number of JTAG queue flushes (for profiling and debugging purposes).
 static int jtag_flush_queue_count;
 
-static void jtag_add_scan_check(void (*jtag_add_scan)(int in_num_fields, const scan_field_t *in_fields, tap_state_t state),
-		int in_num_fields, scan_field_t *in_fields, tap_state_t state);
+static void jtag_add_scan_check(void (*jtag_add_scan)(int in_num_fields, const struct scan_field *in_fields, tap_state_t state),
+		int in_num_fields, struct scan_field *in_fields, tap_state_t state);
 
 /**
  * The jtag_error variable is set when an error occurs while executing
@@ -353,12 +353,12 @@ static void jtag_prelude(tap_state_t state)
 	cmd_queue_cur_state = state;
 }
 
-void jtag_alloc_in_value32(scan_field_t *field)
+void jtag_alloc_in_value32(struct scan_field *field)
 {
 	interface_jtag_alloc_in_value32(field);
 }
 
-void jtag_add_ir_scan_noverify(int in_count, const scan_field_t *in_fields,
+void jtag_add_ir_scan_noverify(int in_count, const struct scan_field *in_fields,
 		tap_state_t state)
 {
 	jtag_prelude(state);
@@ -368,7 +368,7 @@ void jtag_add_ir_scan_noverify(int in_count, const scan_field_t *in_fields,
 }
 
 
-void jtag_add_ir_scan(int in_num_fields, scan_field_t *in_fields, tap_state_t state)
+void jtag_add_ir_scan(int in_num_fields, struct scan_field *in_fields, tap_state_t state)
 {
 	assert(state != TAP_RESET);
 
@@ -391,7 +391,7 @@ void jtag_add_ir_scan(int in_num_fields, scan_field_t *in_fields, tap_state_t st
 	}
 }
 
-void jtag_add_plain_ir_scan(int in_num_fields, const scan_field_t *in_fields,
+void jtag_add_plain_ir_scan(int in_num_fields, const struct scan_field *in_fields,
 		tap_state_t state)
 {
 	assert(state != TAP_RESET);
@@ -423,12 +423,12 @@ static int jtag_check_value_mask_callback(jtag_callback_data_t data0, jtag_callb
 	return jtag_check_value_inner((uint8_t *)data0, (uint8_t *)data1, (uint8_t *)data2, (int)data3);
 }
 
-static void jtag_add_scan_check(void (*jtag_add_scan)(int in_num_fields, const scan_field_t *in_fields, tap_state_t state),
-		int in_num_fields, scan_field_t *in_fields, tap_state_t state)
+static void jtag_add_scan_check(void (*jtag_add_scan)(int in_num_fields, const struct scan_field *in_fields, tap_state_t state),
+		int in_num_fields, struct scan_field *in_fields, tap_state_t state)
 {
 	for (int i = 0; i &lt; in_num_fields; i++)
 	{
-		struct scan_field_s *field = &amp;in_fields[i];
+		struct scan_field *field = &amp;in_fields[i];
 		field-&gt;allocated = 0;
 		field-&gt;modified = 0;
 		if (field-&gt;check_value || field-&gt;in_value)
@@ -460,7 +460,7 @@ static void jtag_add_scan_check(void (*jtag_add_scan)(int in_num_fields, const s
 	}
 }
 
-void jtag_add_dr_scan_check(int in_num_fields, scan_field_t *in_fields, tap_state_t state)
+void jtag_add_dr_scan_check(int in_num_fields, struct scan_field *in_fields, tap_state_t state)
 {
 	if (jtag_verify)
 	{
@@ -472,7 +472,7 @@ void jtag_add_dr_scan_check(int in_num_fields, scan_field_t *in_fields, tap_stat
 }
 
 
-void jtag_add_dr_scan(int in_num_fields, const scan_field_t *in_fields,
+void jtag_add_dr_scan(int in_num_fields, const struct scan_field *in_fields,
 		tap_state_t state)
 {
 	assert(state != TAP_RESET);
@@ -484,7 +484,7 @@ void jtag_add_dr_scan(int in_num_fields, const scan_field_t *in_fields,
 	jtag_set_error(retval);
 }
 
-void jtag_add_plain_dr_scan(int in_num_fields, const scan_field_t *in_fields,
+void jtag_add_plain_dr_scan(int in_num_fields, const struct scan_field *in_fields,
 		tap_state_t state)
 {
 	assert(state != TAP_RESET);
@@ -806,7 +806,7 @@ static int jtag_check_value_inner(uint8_t *captured, uint8_t *in_check_value,
 	return retval;
 }
 
-void jtag_check_value_mask(scan_field_t *field, uint8_t *value, uint8_t *mask)
+void jtag_check_value_mask(struct scan_field *field, uint8_t *value, uint8_t *mask)
 {
 	assert(field-&gt;in_value != NULL);
 
@@ -895,7 +895,7 @@ void jtag_sleep(uint32_t us)
 
 static int jtag_examine_chain_execute(uint8_t *idcode_buffer, unsigned num_idcode)
 {
-	scan_field_t field = {
+	struct scan_field field = {
 			.tap = NULL,
 			.num_bits = num_idcode * 32,
 			.out_value = idcode_buffer,
@@ -1171,7 +1171,7 @@ static int jtag_validate_ircapture(void)
 	struct jtag_tap *tap;
 	int total_ir_length = 0;
 	uint8_t *ir_test = NULL;
-	scan_field_t field;
+	struct scan_field field;
 	int val;
 	int chain_pos = 0;
 	int retval;
diff --git a/src/jtag/driver.c b/src/jtag/driver.c
index da48fdc..de7b789 100644
--- a/src/jtag/driver.c
+++ b/src/jtag/driver.c
@@ -56,11 +56,11 @@ static void jtag_callback_queue_reset(void)
 }
 
 /**
- * Copy a scan_field_t for insertion into the queue.
+ * Copy a struct scan_field for insertion into the queue.
  *
  * This allocates a new copy of out_value using cmd_queue_alloc.
  */
-static void cmd_queue_scan_field_clone(scan_field_t * dst, const scan_field_t * src)
+static void cmd_queue_scan_field_clone(struct scan_field * dst, const struct scan_field * src)
 {
 	dst-&gt;tap		= src-&gt;tap;
 	dst-&gt;num_bits	= src-&gt;num_bits;
@@ -73,13 +73,13 @@ static void cmd_queue_scan_field_clone(scan_field_t * dst, const scan_field_t *
  * see jtag_add_ir_scan()
  *
  */
-int interface_jtag_add_ir_scan(int in_num_fields, const scan_field_t *in_fields, tap_state_t state)
+int interface_jtag_add_ir_scan(int in_num_fields, const struct scan_field *in_fields, tap_state_t state)
 {
 	size_t num_taps = jtag_tap_count_enabled();
 
 	jtag_command_t * cmd		= cmd_queue_alloc(sizeof(jtag_command_t));
 	scan_command_t * scan		= cmd_queue_alloc(sizeof(scan_command_t));
-	scan_field_t * out_fields	= cmd_queue_alloc(num_taps  * sizeof(scan_field_t));
+	struct scan_field * out_fields	= cmd_queue_alloc(num_taps  * sizeof(struct scan_field));
 
 	jtag_queue_command(cmd);
 
@@ -92,7 +92,7 @@ int interface_jtag_add_ir_scan(int in_num_fields, const scan_field_t *in_fields,
 	scan-&gt;end_state			= state;
 
 
-	scan_field_t * field = out_fields;	/* keep track where we insert data */
+	struct scan_field * field = out_fields;	/* keep track where we insert data */
 
 	/* loop over all enabled TAPs */
 
@@ -147,12 +147,12 @@ int interface_jtag_add_ir_scan(int in_num_fields, const scan_field_t *in_fields,
  * see jtag_add_plain_ir_scan()
  *
  */
-int interface_jtag_add_plain_ir_scan(int in_num_fields, const scan_field_t *in_fields, tap_state_t state)
+int interface_jtag_add_plain_ir_scan(int in_num_fields, const struct scan_field *in_fields, tap_state_t state)
 {
 
 	jtag_command_t * cmd		= cmd_queue_alloc(sizeof(jtag_command_t));
 	scan_command_t * scan		= cmd_queue_alloc(sizeof(scan_command_t));
-	scan_field_t * out_fields	= cmd_queue_alloc(in_num_fields * sizeof(scan_field_t));
+	struct scan_field * out_fields	= cmd_queue_alloc(in_num_fields * sizeof(struct scan_field));
 
 	jtag_queue_command(cmd);
 
@@ -176,7 +176,7 @@ int interface_jtag_add_plain_ir_scan(int in_num_fields, const scan_field_t *in_f
  * see jtag_add_dr_scan()
  *
  */
-int interface_jtag_add_dr_scan(int in_num_fields, const scan_field_t *in_fields, tap_state_t state)
+int interface_jtag_add_dr_scan(int in_num_fields, const struct scan_field *in_fields, tap_state_t state)
 {
 	/* count devices in bypass */
 
@@ -190,7 +190,7 @@ int interface_jtag_add_dr_scan(int in_num_fields, const scan_field_t *in_fields,
 
 	jtag_command_t * cmd		= cmd_queue_alloc(sizeof(jtag_command_t));
 	scan_command_t * scan		= cmd_queue_alloc(sizeof(scan_command_t));
-	scan_field_t * out_fields	= cmd_queue_alloc((in_num_fields + bypass_devices) * sizeof(scan_field_t));
+	struct scan_field * out_fields	= cmd_queue_alloc((in_num_fields + bypass_devices) * sizeof(struct scan_field));
 
 	jtag_queue_command(cmd);
 
@@ -203,7 +203,7 @@ int interface_jtag_add_dr_scan(int in_num_fields, const scan_field_t *in_fields,
 	scan-&gt;end_state			= state;
 
 
-	scan_field_t * field = out_fields;	/* keep track where we insert data */
+	struct scan_field * field = out_fields;	/* keep track where we insert data */
 
 	/* loop over all enabled TAPs */
 
@@ -213,7 +213,7 @@ int interface_jtag_add_dr_scan(int in_num_fields, const scan_field_t *in_fields,
 
 		if (!tap-&gt;bypass)
 		{
-			scan_field_t * start_field = field;	/* keep initial position for assert() */
+			struct scan_field * start_field = field;	/* keep initial position for assert() */
 
 			for (int j = 0; j &lt; in_num_fields; j++)
 			{
@@ -280,7 +280,7 @@ void interface_jtag_add_dr_out(struct jtag_tap *target_tap,
 
 	jtag_command_t * cmd		= cmd_queue_alloc(sizeof(jtag_command_t));
 	scan_command_t * scan		= cmd_queue_alloc(sizeof(scan_command_t));
-	scan_field_t * out_fields	= cmd_queue_alloc((in_num_fields + bypass_devices) * sizeof(scan_field_t));
+	struct scan_field * out_fields	= cmd_queue_alloc((in_num_fields + bypass_devices) * sizeof(struct scan_field));
 
 	jtag_queue_command(cmd);
 
@@ -295,7 +295,7 @@ void interface_jtag_add_dr_out(struct jtag_tap *target_tap,
 
 	bool target_tap_match	= false;
 
-	scan_field_t * field = out_fields;	/* keep track where we insert data */
+	struct scan_field * field = out_fields;	/* keep track where we insert data */
 
 	/* loop over all enabled TAPs */
 
@@ -344,11 +344,11 @@ void interface_jtag_add_dr_out(struct jtag_tap *target_tap,
  * see jtag_add_plain_dr_scan()
  *
  */
-int interface_jtag_add_plain_dr_scan(int in_num_fields, const scan_field_t *in_fields, tap_state_t state)
+int interface_jtag_add_plain_dr_scan(int in_num_fields, const struct scan_field *in_fields, tap_state_t state)
 {
 	jtag_command_t * cmd		= cmd_queue_alloc(sizeof(jtag_command_t));
 	scan_command_t * scan		= cmd_queue_alloc(sizeof(scan_command_t));
-	scan_field_t * out_fields	= cmd_queue_alloc(in_num_fields * sizeof(scan_field_t));
+	struct scan_field * out_fields	= cmd_queue_alloc(in_num_fields * sizeof(struct scan_field));
 
 	jtag_queue_command(cmd);
 
diff --git a/src/jtag/jtag.h b/src/jtag/jtag.h
index 5224b6c..713823a 100644
--- a/src/jtag/jtag.h
+++ b/src/jtag/jtag.h
@@ -119,8 +119,7 @@ extern tap_state_t cmd_queue_cur_state;
  *
  * The allocated, modified, and intmp fields are internal work space.
  */
-typedef struct scan_field_s
-{
+struct scan_field {
 	/// A pointer to the tap structure to which this field refers.
 	struct jtag_tap* tap;
 
@@ -142,7 +141,7 @@ typedef struct scan_field_s
 	int modified;
 	/// temporary storage for performing value checks synchronously
 	uint8_t intmp[4];
-} scan_field_t;
+};
 
 typedef struct jtag_tap_event_action_s jtag_tap_event_action_t;
 
@@ -360,20 +359,20 @@ int jtag_init_inner(struct command_context_s *cmd_ctx);
  *
  */
 void jtag_add_ir_scan(int num_fields,
-		scan_field_t* fields, tap_state_t endstate);
+		struct scan_field* fields, tap_state_t endstate);
 /**
  * The same as jtag_add_ir_scan except no verification is performed out
  * the output values.
  */
 void jtag_add_ir_scan_noverify(int num_fields,
-		const scan_field_t *fields, tap_state_t state);
+		const struct scan_field *fields, tap_state_t state);
 /**
  * Duplicate the scan fields passed into the function into an IR SCAN
  * command.  This function assumes that the caller handles extra fields
  * for bypassed TAPs.
  */
 void jtag_add_plain_ir_scan(int num_fields,
-		const scan_field_t* fields, tap_state_t endstate);
+		const struct scan_field* fields, tap_state_t endstate);
 
 
 /**
@@ -385,7 +384,7 @@ void jtag_add_plain_ir_scan(int num_fields,
  * allocation method is used, for the synchronous case the temporary 32
  * bits come from the input field itself.
  */
-void jtag_alloc_in_value32(scan_field_t *field);
+void jtag_alloc_in_value32(struct scan_field *field);
 
 /**
  * Generate a DR SCAN using the fields passed to the function.
@@ -394,17 +393,17 @@ void jtag_alloc_in_value32(scan_field_t *field);
  * 1-bit field.  The bypass status of TAPs is set by jtag_add_ir_scan().
  */
 void jtag_add_dr_scan(int num_fields,
-		const scan_field_t* fields, tap_state_t endstate);
+		const struct scan_field* fields, tap_state_t endstate);
 /// A version of jtag_add_dr_scan() that uses the check_value/mask fields
 void jtag_add_dr_scan_check(int num_fields,
-		scan_field_t* fields, tap_state_t endstate);
+		struct scan_field* fields, tap_state_t endstate);
 /**
  * Duplicate the scan fields passed into the function into a DR SCAN
  * command.  Unlike jtag_add_dr_scan(), this function assumes that the
  * caller handles extra fields for bypassed TAPs.
  */
 void jtag_add_plain_dr_scan(int num_fields,
-		const scan_field_t* fields, tap_state_t endstate);
+		const struct scan_field* fields, tap_state_t endstate);
 
 /**
  * Defines the type of data passed to the jtag_callback_t interface.
@@ -652,7 +651,7 @@ int jtag_srst_asserted(int* srst_asserted);
  * @param mask Pointer to scan mask; may be NULL.
  * @returns Nothing, but calls jtag_set_error() on any error.
  */
-void jtag_check_value_mask(scan_field_t *field, uint8_t *value, uint8_t *mask);
+void jtag_check_value_mask(struct scan_field *field, uint8_t *value, uint8_t *mask);
 
 void jtag_sleep(uint32_t us);
 
diff --git a/src/jtag/minidriver.h b/src/jtag/minidriver.h
index 47400d1..49931b7 100644
--- a/src/jtag/minidriver.h
+++ b/src/jtag/minidriver.h
@@ -48,12 +48,12 @@
 
 #include &quot;jtag_minidriver.h&quot;
 
-static inline void interface_jtag_alloc_in_value32(scan_field_t *field)
+static inline void interface_jtag_alloc_in_value32(struct scan_field *field)
 {
 	field-&gt;in_value = field-&gt;intmp;
 }
 
-static inline void interface_jtag_add_scan_check_alloc(scan_field_t *field)
+static inline void interface_jtag_add_scan_check_alloc(struct scan_field *field)
 {
 	/* We're executing this synchronously, so try to use local storage. */
 	if (field-&gt;num_bits &gt; 32)
@@ -70,12 +70,12 @@ static inline void interface_jtag_add_scan_check_alloc(scan_field_t *field)
 
 #include &quot;commands.h&quot;
 
-static inline void interface_jtag_alloc_in_value32(scan_field_t *field)
+static inline void interface_jtag_alloc_in_value32(struct scan_field *field)
 {
 	field-&gt;in_value = (uint8_t *)cmd_queue_alloc(4);
 }
 
-static inline void interface_jtag_add_scan_check_alloc(scan_field_t *field)
+static inline void interface_jtag_add_scan_check_alloc(struct scan_field *field)
 {
 	unsigned num_bytes = TAP_SCAN_BYTES(field-&gt;num_bits);
 	field-&gt;in_value = (uint8_t *)cmd_queue_alloc(num_bytes);
@@ -94,17 +94,17 @@ void interface_jtag_add_callback4(jtag_callback_t f, jtag_callback_data_t data0,
 #endif
 
 int interface_jtag_add_ir_scan(
-		int num_fields, const scan_field_t* fields,
+		int num_fields, const struct scan_field* fields,
 		tap_state_t endstate);
 int interface_jtag_add_plain_ir_scan(
-		int num_fields, const scan_field_t* fields,
+		int num_fields, const struct scan_field* fields,
 		tap_state_t endstate);
 
 int interface_jtag_add_dr_scan(
-		int num_fields, const scan_field_t* fields,
+		int num_fields, const struct scan_field* fields,
 		tap_state_t endstate);
 int interface_jtag_add_plain_dr_scan(
-		int num_fields, const scan_field_t* fields,
+		int num_fields, const struct scan_field* fields,
 		tap_state_t endstate);
 
 int interface_jtag_add_tlr(void);
diff --git a/src/jtag/minidummy/minidummy.c b/src/jtag/minidummy/minidummy.c
index 4e21cc4..af98ec5 100644
--- a/src/jtag/minidummy/minidummy.c
+++ b/src/jtag/minidummy/minidummy.c
@@ -59,7 +59,7 @@ int interface_jtag_execute_queue(void)
 
 extern int jtag_check_value(uint8_t *captured, void *priv);
 
-int interface_jtag_add_ir_scan(int num_fields, const scan_field_t *fields, tap_state_t state)
+int interface_jtag_add_ir_scan(int num_fields, const struct scan_field *fields, tap_state_t state)
 {
 	/* synchronously do the operation here */
 
@@ -71,7 +71,7 @@ int interface_jtag_add_ir_scan(int num_fields, const scan_field_t *fields, tap_s
 
 
 
-int interface_jtag_add_plain_ir_scan(int num_fields, const scan_field_t *fields, tap_state_t state)
+int interface_jtag_add_plain_ir_scan(int num_fields, const struct scan_field *fields, tap_state_t state)
 {
 	/* synchronously do the operation here */
 
@@ -80,14 +80,14 @@ int interface_jtag_add_plain_ir_scan(int num_fields, const scan_field_t *fields,
 
 /*extern jtag_command_t **jtag_get_last_command_p(void);*/
 
-int interface_jtag_add_dr_scan(int num_fields, const scan_field_t *fields, tap_state_t state)
+int interface_jtag_add_dr_scan(int num_fields, const struct scan_field *fields, tap_state_t state)
 {
 	/* synchronously do the operation here */
 
 	return ERROR_OK;
 }
 
-int interface_jtag_add_plain_dr_scan(int num_fields, const scan_field_t *fields, tap_state_t state)
+int interface_jtag_add_plain_dr_scan(int num_fields, const struct scan_field *fields, tap_state_t state)
 {
 	/* synchronously do the operation here */
 
diff --git a/src/jtag/tcl.c b/src/jtag/tcl.c
index abf875a..04b3ed2 100644
--- a/src/jtag/tcl.c
+++ b/src/jtag/tcl.c
@@ -1078,7 +1078,7 @@ static bool scan_is_safe(tap_state_t state)
 COMMAND_HANDLER(handle_irscan_command)
 {
 	int i;
-	scan_field_t *fields;
+	struct scan_field *fields;
 	struct jtag_tap *tap;
 	tap_state_t endstate;
 
@@ -1108,7 +1108,7 @@ COMMAND_HANDLER(handle_irscan_command)
 	}
 
 	int num_fields = argc / 2;
-	size_t fields_len = sizeof(scan_field_t) * num_fields;
+	size_t fields_len = sizeof(struct scan_field) * num_fields;
 	fields = malloc(fields_len);
 	memset(fields, 0, fields_len);
 
@@ -1159,7 +1159,7 @@ error_return:
 static int Jim_Command_drscan(Jim_Interp *interp, int argc, Jim_Obj *const *args)
 {
 	int retval;
-	scan_field_t *fields;
+	struct scan_field *fields;
 	int num_fields;
 	int field_count = 0;
 	int i, e;
@@ -1245,7 +1245,7 @@ static int Jim_Command_drscan(Jim_Interp *interp, int argc, Jim_Obj *const *args
 	}
 
 	num_fields = (argc-2)/2;
-	fields = malloc(sizeof(scan_field_t) * num_fields);
+	fields = malloc(sizeof(struct scan_field) * num_fields);
 	for (i = 2; i &lt; argc; i += 2)
 	{
 		long bits;
diff --git a/src/jtag/zy1000/zy1000.c b/src/jtag/zy1000/zy1000.c
index 8619258..1a926ca 100644
--- a/src/jtag/zy1000/zy1000.c
+++ b/src/jtag/zy1000/zy1000.c
@@ -462,7 +462,7 @@ static void gotoEndState(tap_state_t end_state)
 	setCurrentState(end_state);
 }
 
-static __inline void scanFields(int num_fields, const scan_field_t *fields, tap_state_t shiftState, int pause)
+static __inline void scanFields(int num_fields, const struct scan_field *fields, tap_state_t shiftState, int pause)
 {
 	int i;
 	int j;
@@ -532,7 +532,7 @@ static __inline void scanFields(int num_fields, const scan_field_t *fields, tap_
 	}
 }
 
-int interface_jtag_add_ir_scan(int num_fields, const scan_field_t *fields, tap_state_t state)
+int interface_jtag_add_ir_scan(int num_fields, const struct scan_field *fields, tap_state_t state)
 {
 
 	int j;
@@ -568,7 +568,7 @@ int interface_jtag_add_ir_scan(int num_fields, const scan_field_t *fields, tap_s
 			/* if a device isn't listed, set it to BYPASS */
 			uint8_t ones[]={0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff};
 
-			scan_field_t tmp;
+			struct scan_field tmp;
 			memset(&amp;tmp, 0, sizeof(tmp));
 			tmp.out_value = ones;
 			tmp.num_bits = scan_size;
@@ -587,7 +587,7 @@ int interface_jtag_add_ir_scan(int num_fields, const scan_field_t *fields, tap_s
 
 
 
-int interface_jtag_add_plain_ir_scan(int num_fields, const scan_field_t *fields, tap_state_t state)
+int interface_jtag_add_plain_ir_scan(int num_fields, const struct scan_field *fields, tap_state_t state)
 {
 	scanFields(num_fields, fields, TAP_IRSHIFT, 1);
 	gotoEndState(state);
@@ -597,7 +597,7 @@ int interface_jtag_add_plain_ir_scan(int num_fields, const scan_field_t *fields,
 
 /*extern jtag_command_t **jtag_get_last_command_p(void);*/
 
-int interface_jtag_add_dr_scan(int num_fields, const scan_field_t *fields, tap_state_t state)
+int interface_jtag_add_dr_scan(int num_fields, const struct scan_field *fields, tap_state_t state)
 {
 
 	int j;
@@ -619,7 +619,7 @@ int interface_jtag_add_dr_scan(int num_fields, const scan_field_t *fields, tap_s
 		}
 		if (!found)
 		{
-			scan_field_t tmp;
+			struct scan_field tmp;
 			/* program the scan field to 1 bit length, and ignore it's value */
 			tmp.num_bits = 1;
 			tmp.out_value = NULL;
@@ -635,7 +635,7 @@ int interface_jtag_add_dr_scan(int num_fields, const scan_field_t *fields, tap_s
 	return ERROR_OK;
 }
 
-int interface_jtag_add_plain_dr_scan(int num_fields, const scan_field_t *fields, tap_state_t state)
+int interface_jtag_add_plain_dr_scan(int num_fields, const struct scan_field *fields, tap_state_t state)
 {
 	scanFields(num_fields, fields, TAP_DRSHIFT, 1);
 	gotoEndState(state);
diff --git a/src/pld/virtex2.c b/src/pld/virtex2.c
index 2d06a0e..56b4eee 100644
--- a/src/pld/virtex2.c
+++ b/src/pld/virtex2.c
@@ -33,7 +33,7 @@ static int virtex2_set_instr(struct jtag_tap *tap, uint32_t new_instr)
 
 	if (buf_get_u32(tap-&gt;cur_instr, 0, tap-&gt;ir_length) != new_instr)
 	{
-		scan_field_t field;
+		struct scan_field field;
 
 		field.tap = tap;
 		field.num_bits = tap-&gt;ir_length;
@@ -53,7 +53,7 @@ static int virtex2_send_32(struct pld_device_s *pld_device,
 		int num_words, uint32_t *words)
 {
 	virtex2_pld_device_t *virtex2_info = pld_device-&gt;driver_priv;
-	scan_field_t scan_field;
+	struct scan_field scan_field;
 	uint8_t *values;
 	int i;
 
@@ -86,7 +86,7 @@ static int virtex2_receive_32(struct pld_device_s *pld_device,
 		int num_words, uint32_t *words)
 {
 	virtex2_pld_device_t *virtex2_info = pld_device-&gt;driver_priv;
-	scan_field_t scan_field;
+	struct scan_field scan_field;
 
 	scan_field.tap = virtex2_info-&gt;tap;
 	scan_field.num_bits = 32;
@@ -137,7 +137,7 @@ static int virtex2_load(struct pld_device_s *pld_device, const char *filename)
 	xilinx_bit_file_t bit_file;
 	int retval;
 	unsigned int i;
-	scan_field_t field;
+	struct scan_field field;
 
 	field.tap = virtex2_info-&gt;tap;
 	field.in_value = NULL;
diff --git a/src/svf/svf.c b/src/svf/svf.c
index 4dea968..348145d 100644
--- a/src/svf/svf.c
+++ b/src/svf/svf.c
@@ -764,7 +764,7 @@ static int svf_run_command(struct command_context_s *cmd_ctx, char *cmd_str)
 	// for XXR
 	svf_xxr_para_t *xxr_para_tmp;
 	uint8_t **pbuffer_tmp;
-	scan_field_t field;
+	struct scan_field field;
 	// for STATE
 	tap_state_t *path = NULL, state;
 
diff --git a/src/target/arm11.c b/src/target/arm11.c
index 1dc1834..2318548 100644
--- a/src/target/arm11.c
+++ b/src/target/arm11.c
@@ -360,7 +360,7 @@ static int arm11_on_enter_debug_state(arm11_common_t *arm11)
 
 		arm11_add_IR(arm11, ARM11_INTEST, ARM11_TAP_DEFAULT);
 
-		scan_field_t	chain5_fields[3];
+		struct scan_field	chain5_fields[3];
 
 		arm11_setup_field(arm11, 32, NULL, &amp;R(WDTR),	chain5_fields + 0);
 		arm11_setup_field(arm11,  1, NULL, NULL,		chain5_fields + 1);
@@ -637,7 +637,7 @@ static int arm11_leave_debug_state(arm11_common_t *arm11)
 
 		arm11_add_IR(arm11, ARM11_EXTEST, ARM11_TAP_DEFAULT);
 
-		scan_field_t	chain5_fields[3];
+		struct scan_field	chain5_fields[3];
 
 		uint8_t			Ready		= 0;	/* ignored */
 		uint8_t			Valid		= 0;	/* ignored */
@@ -1821,7 +1821,7 @@ static int arm11_examine(struct target_s *target)
 
 	arm11_add_IR(arm11, ARM11_IDCODE, ARM11_TAP_DEFAULT);
 
-	scan_field_t		idcode_field;
+	struct scan_field		idcode_field;
 
 	arm11_setup_field(arm11, 32, NULL, &amp;arm11-&gt;device_id, &amp;idcode_field);
 
@@ -1833,7 +1833,7 @@ static int arm11_examine(struct target_s *target)
 
 	arm11_add_IR(arm11, ARM11_INTEST, ARM11_TAP_DEFAULT);
 
-	scan_field_t		chain0_fields[2];
+	struct scan_field		chain0_fields[2];
 
 	arm11_setup_field(arm11, 32, NULL,	&amp;arm11-&gt;didr,		chain0_fields + 0);
 	arm11_setup_field(arm11,  8, NULL,	&amp;arm11-&gt;implementor,	chain0_fields + 1);
diff --git a/src/target/arm11_dbgtap.c b/src/target/arm11_dbgtap.c
index 369576c..6154f34 100644
--- a/src/target/arm11_dbgtap.c
+++ b/src/target/arm11_dbgtap.c
@@ -47,7 +47,7 @@ static const tap_state_t arm11_move_pi_to_si_via_ci[] =
 };
 
 
-int arm11_add_ir_scan_vc(int num_fields, scan_field_t *fields, tap_state_t state)
+int arm11_add_ir_scan_vc(int num_fields, struct scan_field *fields, tap_state_t state)
 {
 	if (cmd_queue_cur_state == TAP_IRPAUSE)
 		jtag_add_pathmove(asizeof(arm11_move_pi_to_si_via_ci), arm11_move_pi_to_si_via_ci);
@@ -61,7 +61,7 @@ static const tap_state_t arm11_move_pd_to_sd_via_cd[] =
 	TAP_DREXIT2, TAP_DRUPDATE, TAP_DRSELECT, TAP_DRCAPTURE, TAP_DRSHIFT
 };
 
-int arm11_add_dr_scan_vc(int num_fields, scan_field_t *fields, tap_state_t state)
+int arm11_add_dr_scan_vc(int num_fields, struct scan_field *fields, tap_state_t state)
 {
 	if (cmd_queue_cur_state == TAP_DRPAUSE)
 		jtag_add_pathmove(asizeof(arm11_move_pd_to_sd_via_cd), arm11_move_pd_to_sd_via_cd);
@@ -71,7 +71,7 @@ int arm11_add_dr_scan_vc(int num_fields, scan_field_t *fields, tap_state_t state
 }
 
 
-/** Code de-clutter: Construct scan_field_t to write out a value
+/** Code de-clutter: Construct struct scan_field to write out a value
  *
  * \param arm11			Target state variable.
  * \param num_bits		Length of the data field
@@ -81,7 +81,7 @@ int arm11_add_dr_scan_vc(int num_fields, scan_field_t *fields, tap_state_t state
  *						&lt;em &gt; (data is written when the JTAG queue is executed)&lt;/em&gt;
  * \param field			target data structure that will be initialized
  */
-void arm11_setup_field(arm11_common_t * arm11, int num_bits, void * out_data, void * in_data, scan_field_t * field)
+void arm11_setup_field(arm11_common_t * arm11, int num_bits, void * out_data, void * in_data, struct scan_field * field)
 {
 	field-&gt;tap   			= arm11-&gt;target-&gt;tap;
 	field-&gt;num_bits			= num_bits;
@@ -111,7 +111,7 @@ void arm11_add_IR(arm11_common_t * arm11, uint8_t instr, tap_state_t state)
 
 	JTAG_DEBUG(&quot;IR &lt;= 0x%02x&quot;, instr);
 
-	scan_field_t field;
+	struct scan_field field;
 
 	arm11_setup_field(arm11, 5, &amp;instr, NULL, &amp;field);
 
@@ -119,7 +119,7 @@ void arm11_add_IR(arm11_common_t * arm11, uint8_t instr, tap_state_t state)
 }
 
 /** Verify shifted out data from Scan Chain Register (SCREG)
- *  Used as parameter to scan_field_t::in_handler in
+ *  Used as parameter to struct scan_field::in_handler in
  *  arm11_add_debug_SCAN_N().
  *
  */
@@ -167,7 +167,7 @@ int arm11_add_debug_SCAN_N(arm11_common_t * arm11, uint8_t chain, tap_state_t st
 
 	arm11_add_IR(arm11, ARM11_SCAN_N, ARM11_TAP_DEFAULT);
 
-	scan_field_t		field;
+	struct scan_field		field;
 
 	uint8_t tmp[1];
 	arm11_setup_field(arm11, 5, &amp;chain, &amp;tmp, &amp;field);
@@ -202,7 +202,7 @@ void arm11_add_debug_INST(arm11_common_t * arm11, uint32_t inst, uint8_t * flag,
 {
 	JTAG_DEBUG(&quot;INST &lt;= 0x%08x&quot;, inst);
 
-	scan_field_t		itr[2];
+	struct scan_field		itr[2];
 
 	arm11_setup_field(arm11, 32,    &amp;inst,	NULL, itr + 0);
 	arm11_setup_field(arm11, 1,	    NULL,	flag, itr + 1);
@@ -230,7 +230,7 @@ int arm11_read_DSCR(arm11_common_t * arm11, uint32_t *value)
 	arm11_add_IR(arm11, ARM11_INTEST, ARM11_TAP_DEFAULT);
 
 	uint32_t				dscr;
-	scan_field_t	chain1_field;
+	struct scan_field	chain1_field;
 
 	arm11_setup_field(arm11, 32, NULL, &amp;dscr, &amp;chain1_field);
 
@@ -266,7 +266,7 @@ int arm11_write_DSCR(arm11_common_t * arm11, uint32_t dscr)
 
 	arm11_add_IR(arm11, ARM11_EXTEST, ARM11_TAP_DEFAULT);
 
-	scan_field_t		    chain1_field;
+	struct scan_field		    chain1_field;
 
 	arm11_setup_field(arm11, 32, &amp;dscr, NULL, &amp;chain1_field);
 
@@ -451,7 +451,7 @@ int arm11_run_instr_data_to_core(arm11_common_t * arm11, uint32_t opcode, uint32
 
 	arm11_add_IR(arm11, ARM11_EXTEST, ARM11_TAP_DEFAULT);
 
-	scan_field_t	chain5_fields[3];
+	struct scan_field	chain5_fields[3];
 
 	uint32_t				Data;
 	uint8_t				Ready;
@@ -578,7 +578,7 @@ int arm11_run_instr_data_to_core_noack(arm11_common_t * arm11, uint32_t opcode,
 
 	arm11_add_IR(arm11, ARM11_EXTEST, ARM11_TAP_DEFAULT);
 
-	scan_field_t	chain5_fields[3];
+	struct scan_field	chain5_fields[3];
 
 	arm11_setup_field(arm11, 32,    NULL/*&amp;Data*/,  NULL,				chain5_fields + 0);
 	arm11_setup_field(arm11,  1,    NULL,			NULL /*&amp;Ready*/,	chain5_fields + 1);
@@ -682,7 +682,7 @@ int arm11_run_instr_data_from_core(arm11_common_t * arm11, uint32_t opcode, uint
 
 	arm11_add_IR(arm11, ARM11_INTEST, ARM11_TAP_DEFAULT);
 
-	scan_field_t	chain5_fields[3];
+	struct scan_field	chain5_fields[3];
 
 	uint32_t			Data;
 	uint8_t			Ready;
@@ -799,7 +799,7 @@ int arm11_sc7_run(arm11_common_t * arm11, arm11_sc7_action_t * actions, size_t c
 
 	arm11_add_IR(arm11, ARM11_EXTEST, ARM11_TAP_DEFAULT);
 
-	scan_field_t	chain7_fields[3];
+	struct scan_field	chain7_fields[3];
 
 	uint8_t				nRW;
 	uint32_t				DataOut;
@@ -959,7 +959,7 @@ int arm11_write_etm(arm11_common_t * arm11, uint8_t address, uint32_t value)
 	/* Uses INTEST for read and write */
 	arm11_add_IR(arm11, ARM11_INTEST, ARM11_TAP_DEFAULT);
 
-	scan_field_t		chain6_fields[3];
+	struct scan_field		chain6_fields[3];
 
 	uint8_t				nRW			= 1;
 
@@ -993,7 +993,7 @@ int arm11_read_etm(arm11_common_t * arm11, uint8_t address, uint32_t * value)
 	/* Uses INTEST for read and write */
 	arm11_add_IR(arm11, ARM11_INTEST, ARM11_TAP_DEFAULT);
 
-	scan_field_t		chain6_fields[3];
+	struct scan_field		chain6_fields[3];
 
 	uint8_t				nRW			= 0;
 
diff --git a/src/target/arm11_dbgtap.h b/src/target/arm11_dbgtap.h
index f8a793f..fb37faa 100644
--- a/src/target/arm11_dbgtap.h
+++ b/src/target/arm11_dbgtap.h
@@ -6,7 +6,7 @@
 /* ARM11 internals */
 
 void arm11_setup_field(arm11_common_t *arm11, int num_bits,
-		void *in_data, void *out_data, scan_field_t *field);
+		void *in_data, void *out_data, struct scan_field *field);
 void arm11_add_IR(arm11_common_t *arm11,
 		uint8_t instr, tap_state_t state);
 int arm11_add_debug_SCAN_N(arm11_common_t *arm11,
@@ -36,9 +36,9 @@ int arm11_run_instr_data_from_core_via_r0(arm11_common_t *arm11,
 int arm11_run_instr_data_to_core_via_r0(arm11_common_t *arm11,
 		uint32_t opcode, uint32_t data);
 
-int arm11_add_dr_scan_vc(int num_fields, scan_field_t *fields,
+int arm11_add_dr_scan_vc(int num_fields, struct scan_field *fields,
 		tap_state_t state);
-int arm11_add_ir_scan_vc(int num_fields, scan_field_t *fields,
+int arm11_add_ir_scan_vc(int num_fields, struct scan_field *fields,
 		tap_state_t state);
 
 /**
diff --git a/src/target/arm720t.c b/src/target/arm720t.c
index 4e09228..01ccf30 100644
--- a/src/target/arm720t.c
+++ b/src/target/arm720t.c
@@ -44,7 +44,7 @@ static int arm720t_scan_cp15(target_t *target,
 	int retval;
 	struct arm720t_common_s *arm720t = target_to_arm720(target);
 	arm_jtag_t *jtag_info;
-	scan_field_t fields[2];
+	struct scan_field fields[2];
 	uint8_t out_buf[4];
 	uint8_t instruction_buf = instruction;
 
diff --git a/src/target/arm7tdmi.c b/src/target/arm7tdmi.c
index 8bf4680..90e7526 100644
--- a/src/target/arm7tdmi.c
+++ b/src/target/arm7tdmi.c
@@ -50,7 +50,7 @@ static int arm7tdmi_examine_debug_reason(target_t *target)
 	if ((target-&gt;debug_reason != DBG_REASON_DBGRQ)
 			&amp;&amp; (target-&gt;debug_reason != DBG_REASON_SINGLESTEP))
 	{
-		scan_field_t fields[2];
+		struct scan_field fields[2];
 		uint8_t databus[4];
 		uint8_t breakpoint;
 
@@ -130,7 +130,7 @@ static __inline int arm7tdmi_clock_out(arm_jtag_t *jtag_info,
 static int arm7tdmi_clock_data_in(arm_jtag_t *jtag_info, uint32_t *in)
 {
 	int retval = ERROR_OK;
-	scan_field_t fields[2];
+	struct scan_field fields[2];
 
 	jtag_set_end_state(TAP_DRPAUSE);
 	if ((retval = arm_jtag_scann(jtag_info, 0x1)) != ERROR_OK)
@@ -217,7 +217,7 @@ static int arm7tdmi_clock_data_in_endianness(arm_jtag_t *jtag_info,
 		void *in, int size, int be)
 {
 	int retval = ERROR_OK;
-	scan_field_t fields[2];
+	struct scan_field fields[2];
 
 	jtag_set_end_state(TAP_DRPAUSE);
 	if ((retval = arm_jtag_scann(jtag_info, 0x1)) != ERROR_OK)
diff --git a/src/target/arm920t.c b/src/target/arm920t.c
index 9fe8fc4..ca7728b 100644
--- a/src/target/arm920t.c
+++ b/src/target/arm920t.c
@@ -56,7 +56,7 @@ static int arm920t_read_cp15_physical(target_t *target,
 {
 	struct arm920t_common_s *arm920t = target_to_arm920(target);
 	arm_jtag_t *jtag_info;
-	scan_field_t fields[4];
+	struct scan_field fields[4];
 	uint8_t access_type_buf = 1;
 	uint8_t reg_addr_buf = reg_addr &amp; 0x3f;
 	uint8_t nr_w_buf = 0;
@@ -108,7 +108,7 @@ static int arm920t_write_cp15_physical(target_t *target,
 {
 	struct arm920t_common_s *arm920t = target_to_arm920(target);
 	arm_jtag_t *jtag_info;
-	scan_field_t fields[4];
+	struct scan_field fields[4];
 	uint8_t access_type_buf = 1;
 	uint8_t reg_addr_buf = reg_addr &amp; 0x3f;
 	uint8_t nr_w_buf = 1;
@@ -157,7 +157,7 @@ static int arm920t_execute_cp15(target_t *target, uint32_t cp15_opcode,
 	int retval;
 	struct arm920t_common_s *arm920t = target_to_arm920(target);
 	arm_jtag_t *jtag_info;
-	scan_field_t fields[4];
+	struct scan_field fields[4];
 	uint8_t access_type_buf = 0;		/* interpreted access */
 	uint8_t reg_addr_buf = 0x0;
 	uint8_t nr_w_buf = 0;
diff --git a/src/target/arm926ejs.c b/src/target/arm926ejs.c
index c8120b6..25c44a0 100644
--- a/src/target/arm926ejs.c
+++ b/src/target/arm926ejs.c
@@ -54,7 +54,7 @@ static int arm926ejs_cp15_read(target_t *target, uint32_t op1, uint32_t op2,
 	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	uint32_t address = ARM926EJS_CP15_ADDR(op1, op2, CRn, CRm);
-	scan_field_t fields[4];
+	struct scan_field fields[4];
 	uint8_t address_buf[2];
 	uint8_t nr_w_buf = 0;
 	uint8_t access = 1;
@@ -146,7 +146,7 @@ static int arm926ejs_cp15_write(target_t *target, uint32_t op1, uint32_t op2,
 	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
 	uint32_t address = ARM926EJS_CP15_ADDR(op1, op2, CRn, CRm);
-	scan_field_t fields[4];
+	struct scan_field fields[4];
 	uint8_t value_buf[4];
 	uint8_t address_buf[2];
 	uint8_t nr_w_buf = 1;
diff --git a/src/target/arm966e.c b/src/target/arm966e.c
index b1fea08..d3ae9b2 100644
--- a/src/target/arm966e.c
+++ b/src/target/arm966e.c
@@ -72,7 +72,7 @@ static int arm966e_read_cp15(target_t *target, int reg_addr, uint32_t *value)
 	int retval = ERROR_OK;
 	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
-	scan_field_t fields[3];
+	struct scan_field fields[3];
 	uint8_t reg_addr_buf = reg_addr &amp; 0x3f;
 	uint8_t nr_w_buf = 0;
 
@@ -124,7 +124,7 @@ int arm966e_write_cp15(target_t *target, int reg_addr, uint32_t value)
 	int retval = ERROR_OK;
 	struct arm7_9_common_s *arm7_9 = target_to_arm7_9(target);
 	arm_jtag_t *jtag_info = &amp;arm7_9-&gt;jtag_info;
-	scan_field_t fields[3];
+	struct scan_field fields[3];
 	uint8_t reg_addr_buf = reg_addr &amp; 0x3f;
 	uint8_t nr_w_buf = 1;
 	uint8_t value_buf[4];
diff --git a/src/target/arm9tdmi.c b/src/target/arm9tdmi.c
index 56ce365..d1d4a8d 100644
--- a/src/target/arm9tdmi.c
+++ b/src/target/arm9tdmi.c
@@ -66,7 +66,7 @@ int arm9tdmi_examine_debug_reason(target_t *target)
 	if ((target-&gt;debug_reason != DBG_REASON_DBGRQ)
 			&amp;&amp; (target-&gt;debug_reason != DBG_REASON_SINGLESTEP))
 	{
-		scan_field_t fields[3];
+		struct scan_field fields[3];
 		uint8_t databus[4];
 		uint8_t instructionbus[4];
 		uint8_t debug_reason;
@@ -128,7 +128,7 @@ int arm9tdmi_clock_out(arm_jtag_t *jtag_info, uint32_t instr,
 		uint32_t out, uint32_t *in, int sysspeed)
 {
 	int retval = ERROR_OK;
-	scan_field_t fields[3];
+	struct scan_field fields[3];
 	uint8_t out_buf[4];
 	uint8_t instr_buf[4];
 	uint8_t sysspeed_buf = 0x0;
@@ -201,7 +201,7 @@ int arm9tdmi_clock_out(arm_jtag_t *jtag_info, uint32_t instr,
 int arm9tdmi_clock_data_in(arm_jtag_t *jtag_info, uint32_t *in)
 {
 	int retval = ERROR_OK;;
-	scan_field_t fields[3];
+	struct scan_field fields[3];
 
 	jtag_set_end_state(TAP_DRPAUSE);
 	if ((retval = arm_jtag_scann(jtag_info, 0x1)) != ERROR_OK)
@@ -273,7 +273,7 @@ int arm9tdmi_clock_data_in_endianness(arm_jtag_t *jtag_info,
 		void *in, int size, int be)
 {
 	int retval = ERROR_OK;
-	scan_field_t fields[3];
+	struct scan_field fields[3];
 
 	jtag_set_end_state(TAP_DRPAUSE);
 	if ((retval = arm_jtag_scann(jtag_info, 0x1)) != ERROR_OK)
diff --git a/src/target/arm_adi_v5.c b/src/target/arm_adi_v5.c
index 4a7a37c..7fc22d0 100644
--- a/src/target/arm_adi_v5.c
+++ b/src/target/arm_adi_v5.c
@@ -74,7 +74,7 @@ static uint32_t max_tar_block_size(uint32_t tar_autoincr_block, uint32_t address
 int adi_jtag_dp_scan(swjdp_common_t *swjdp, uint8_t instr, uint8_t reg_addr, uint8_t RnW, uint8_t *outvalue, uint8_t *invalue, uint8_t *ack)
 {
 	arm_jtag_t *jtag_info = swjdp-&gt;jtag_info;
-	scan_field_t fields[2];
+	struct scan_field fields[2];
 	uint8_t out_addr_buf;
 
 	jtag_set_end_state(TAP_IDLE);
@@ -104,7 +104,7 @@ int adi_jtag_dp_scan(swjdp_common_t *swjdp, uint8_t instr, uint8_t reg_addr, uin
 int adi_jtag_dp_scan_u32(swjdp_common_t *swjdp, uint8_t instr, uint8_t reg_addr, uint8_t RnW, uint32_t outvalue, uint32_t *invalue, uint8_t *ack)
 {
 	arm_jtag_t *jtag_info = swjdp-&gt;jtag_info;
-	scan_field_t fields[2];
+	struct scan_field fields[2];
 	uint8_t out_value_buf[4];
 	uint8_t out_addr_buf;
 
diff --git a/src/target/arm_jtag.c b/src/target/arm_jtag.c
index bcd4faa..4b5bd39 100644
--- a/src/target/arm_jtag.c
+++ b/src/target/arm_jtag.c
@@ -40,7 +40,7 @@ int arm_jtag_set_instr(arm_jtag_t *jtag_info, uint32_t new_instr,  void *no_veri
 
 	if (buf_get_u32(tap-&gt;cur_instr, 0, tap-&gt;ir_length) != new_instr)
 	{
-		scan_field_t field;
+		struct scan_field field;
 		uint8_t t[4];
 
 		field.tap = tap;
diff --git a/src/target/avrt.c b/src/target/avrt.c
index bff2418..4a1024f 100644
--- a/src/target/avrt.c
+++ b/src/target/avrt.c
@@ -200,7 +200,7 @@ int mcu_write_ir(struct jtag_tap *tap, uint8_t *ir_in, uint8_t *ir_out, int ir_l
 	}
 
 	{
-		scan_field_t field[1];
+		struct scan_field field[1];
 
 		field[0].tap = tap;
 		field[0].num_bits = tap-&gt;ir_length;
@@ -221,7 +221,7 @@ int mcu_write_dr(struct jtag_tap *tap, uint8_t *dr_in, uint8_t *dr_out, int dr_l
 	}
 
 	{
-		scan_field_t field[1];
+		struct scan_field field[1];
 
 		field[0].tap = tap;
 		field[0].num_bits = dr_len;
diff --git a/src/target/embeddedice.c b/src/target/embeddedice.c
index 7b20e12..a1eac13 100644
--- a/src/target/embeddedice.c
+++ b/src/target/embeddedice.c
@@ -333,7 +333,7 @@ int embeddedice_read_reg_w_check(reg_t *reg,
 {
 	embeddedice_reg_t *ice_reg = reg-&gt;arch_info;
 	uint8_t reg_addr = ice_reg-&gt;addr &amp; 0x1f;
-	scan_field_t fields[3];
+	struct scan_field fields[3];
 	uint8_t field1_out[1];
 	uint8_t field2_out[1];
 
@@ -398,7 +398,7 @@ int embeddedice_read_reg_w_check(reg_t *reg,
  */
 int embeddedice_receive(arm_jtag_t *jtag_info, uint32_t *data, uint32_t size)
 {
-	scan_field_t fields[3];
+	struct scan_field fields[3];
 	uint8_t field1_out[1];
 	uint8_t field2_out[1];
 
@@ -519,7 +519,7 @@ void embeddedice_store_reg(reg_t *reg)
  */
 int embeddedice_send(arm_jtag_t *jtag_info, uint32_t *data, uint32_t size)
 {
-	scan_field_t fields[3];
+	struct scan_field fields[3];
 	uint8_t field0_out[4];
 	uint8_t field1_out[1];
 	uint8_t field2_out[1];
@@ -564,7 +564,7 @@ int embeddedice_send(arm_jtag_t *jtag_info, uint32_t *data, uint32_t size)
  */
 int embeddedice_handshake(arm_jtag_t *jtag_info, int hsbit, uint32_t timeout)
 {
-	scan_field_t fields[3];
+	struct scan_field fields[3];
 	uint8_t field0_in[4];
 	uint8_t field1_out[1];
 	uint8_t field2_out[1];
diff --git a/src/target/etb.c b/src/target/etb.c
index 3ad7397..1315b71 100644
--- a/src/target/etb.c
+++ b/src/target/etb.c
@@ -52,7 +52,7 @@ static int etb_set_instr(etb_t *etb, uint32_t new_instr)
 
 	if (buf_get_u32(tap-&gt;cur_instr, 0, tap-&gt;ir_length) != new_instr)
 	{
-		scan_field_t field;
+		struct scan_field field;
 
 		field.tap = tap;
 		field.num_bits = tap-&gt;ir_length;
@@ -73,7 +73,7 @@ static int etb_scann(etb_t *etb, uint32_t new_scan_chain)
 {
 	if (etb-&gt;cur_scan_chain != new_scan_chain)
 	{
-		scan_field_t field;
+		struct scan_field field;
 
 		field.tap = etb-&gt;tap;
 		field.num_bits = 5;
@@ -173,7 +173,7 @@ static void etb_getbuf(jtag_callback_data_t arg)
 
 static int etb_read_ram(etb_t *etb, uint32_t *data, int num_frames)
 {
-	scan_field_t fields[3];
+	struct scan_field fields[3];
 	int i;
 
 	jtag_set_end_state(TAP_IDLE);
@@ -229,7 +229,7 @@ static int etb_read_reg_w_check(reg_t *reg,
 {
 	etb_reg_t *etb_reg = reg-&gt;arch_info;
 	uint8_t reg_addr = etb_reg-&gt;addr &amp; 0x7f;
-	scan_field_t fields[3];
+	struct scan_field fields[3];
 
 	LOG_DEBUG(&quot;%i&quot;, (int)(etb_reg-&gt;addr));
 
@@ -315,7 +315,7 @@ static int etb_write_reg(reg_t *reg, uint32_t value)
 {
 	etb_reg_t *etb_reg = reg-&gt;arch_info;
 	uint8_t reg_addr = etb_reg-&gt;addr &amp; 0x7f;
-	scan_field_t fields[3];
+	struct scan_field fields[3];
 
 	LOG_DEBUG(&quot;%i: 0x%8.8&quot; PRIx32 &quot;&quot;, (int)(etb_reg-&gt;addr), value);
 
diff --git a/src/target/etm.c b/src/target/etm.c
index 6d34f6c..01a9b71 100644
--- a/src/target/etm.c
+++ b/src/target/etm.c
@@ -492,7 +492,7 @@ static int etm_read_reg_w_check(reg_t *reg,
 	etm_reg_t *etm_reg = reg-&gt;arch_info;
 	const struct etm_reg_info *r = etm_reg-&gt;reg_info;
 	uint8_t reg_addr = r-&gt;addr &amp; 0x7f;
-	scan_field_t fields[3];
+	struct scan_field fields[3];
 
 	if (etm_reg-&gt;reg_info-&gt;mode == WO) {
 		LOG_ERROR(&quot;BUG: can't read write-only register %s&quot;, r-&gt;name);
@@ -578,7 +578,7 @@ static int etm_write_reg(reg_t *reg, uint32_t value)
 	etm_reg_t *etm_reg = reg-&gt;arch_info;
 	const struct etm_reg_info *r = etm_reg-&gt;reg_info;
 	uint8_t reg_addr = r-&gt;addr &amp; 0x7f;
-	scan_field_t fields[3];
+	struct scan_field fields[3];
 
 	if (etm_reg-&gt;reg_info-&gt;mode == RO) {
 		LOG_ERROR(&quot;BUG: can't write read--only register %s&quot;, r-&gt;name);
diff --git a/src/target/feroceon.c b/src/target/feroceon.c
index e1dc068..b157dc3 100644
--- a/src/target/feroceon.c
+++ b/src/target/feroceon.c
@@ -71,7 +71,7 @@ int feroceon_assert_reset(target_t *target)
 
 int feroceon_dummy_clock_out(arm_jtag_t *jtag_info, uint32_t instr)
 {
-	scan_field_t fields[3];
+	struct scan_field fields[3];
 	uint8_t out_buf[4];
 	uint8_t instr_buf[4];
 	uint8_t sysspeed_buf = 0x0;
diff --git a/src/target/mips_ejtag.c b/src/target/mips_ejtag.c
index 021e3ab..d23411f 100644
--- a/src/target/mips_ejtag.c
+++ b/src/target/mips_ejtag.c
@@ -37,7 +37,7 @@ int mips_ejtag_set_instr(mips_ejtag_t *ejtag_info, int new_instr, void *delete_m
 
 	if (buf_get_u32(tap-&gt;cur_instr, 0, tap-&gt;ir_length) != (uint32_t)new_instr)
 	{
-		scan_field_t field;
+		struct scan_field field;
 		uint8_t t[4];
 
 		field.tap = tap;
@@ -54,7 +54,7 @@ int mips_ejtag_set_instr(mips_ejtag_t *ejtag_info, int new_instr, void *delete_m
 
 int mips_ejtag_get_idcode(mips_ejtag_t *ejtag_info, uint32_t *idcode)
 {
-	scan_field_t field;
+	struct scan_field field;
 
 	jtag_set_end_state(TAP_IDLE);
 
@@ -77,7 +77,7 @@ int mips_ejtag_get_idcode(mips_ejtag_t *ejtag_info, uint32_t *idcode)
 
 int mips_ejtag_get_impcode(mips_ejtag_t *ejtag_info, uint32_t *impcode)
 {
-	scan_field_t field;
+	struct scan_field field;
 
 	jtag_set_end_state(TAP_IDLE);
 
@@ -105,7 +105,7 @@ int mips_ejtag_drscan_32(mips_ejtag_t *ejtag_info, uint32_t *data)
 
 	if (tap == NULL)
 		return ERROR_FAIL;
-	scan_field_t field;
+	struct scan_field field;
 	uint8_t t[4], r[4];
 	int retval;
 
diff --git a/src/target/xscale.c b/src/target/xscale.c
index c4d22b1..3540f6a 100644
--- a/src/target/xscale.c
+++ b/src/target/xscale.c
@@ -163,7 +163,7 @@ static int xscale_jtag_set_instr(struct jtag_tap *tap, uint32_t new_instr)
 
 	if (buf_get_u32(tap-&gt;cur_instr, 0, tap-&gt;ir_length) != new_instr)
 	{
-		scan_field_t field;
+		struct scan_field field;
 		uint8_t scratch[4];
 
 		memset(&amp;field, 0, sizeof field);
@@ -182,7 +182,7 @@ static int xscale_read_dcsr(target_t *target)
 {
 	struct xscale_common_s *xscale = target_to_xscale(target);
 	int retval;
-	scan_field_t fields[3];
+	struct scan_field fields[3];
 	uint8_t field0 = 0x0;
 	uint8_t field0_check_value = 0x2;
 	uint8_t field0_check_mask = 0x7;
@@ -258,7 +258,7 @@ static int xscale_receive(target_t *target, uint32_t *buffer, int num_words)
 
 	int retval = ERROR_OK;
 	tap_state_t path[3];
-	scan_field_t fields[3];
+	struct scan_field fields[3];
 	uint8_t *field0 = malloc(num_words * 1);
 	uint8_t field0_check_value = 0x2;
 	uint8_t field0_check_mask = 0x6;
@@ -362,7 +362,7 @@ static int xscale_read_tx(target_t *target, int consume)
 	tap_state_t noconsume_path[6];
 	int retval;
 	struct timeval timeout, now;
-	scan_field_t fields[3];
+	struct scan_field fields[3];
 	uint8_t field0_in = 0x0;
 	uint8_t field0_check_value = 0x2;
 	uint8_t field0_check_mask = 0x6;
@@ -458,7 +458,7 @@ static int xscale_write_rx(target_t *target)
 	struct xscale_common_s *xscale = target_to_xscale(target);
 	int retval;
 	struct timeval timeout, now;
-	scan_field_t fields[3];
+	struct scan_field fields[3];
 	uint8_t field0_out = 0x0;
 	uint8_t field0_in = 0x0;
 	uint8_t field0_check_value = 0x2;
@@ -614,7 +614,7 @@ static int xscale_write_dcsr(target_t *target, int hold_rst, int ext_dbg_brk)
 {
 	struct xscale_common_s *xscale = target_to_xscale(target);
 	int retval;
-	scan_field_t fields[3];
+	struct scan_field fields[3];
 	uint8_t field0 = 0x0;
 	uint8_t field0_check_value = 0x2;
 	uint8_t field0_check_mask = 0x7;
@@ -686,7 +686,7 @@ static int xscale_load_ic(target_t *target, uint32_t va, uint32_t buffer[8])
 	uint8_t packet[4];
 	uint8_t cmd;
 	int word;
-	scan_field_t fields[2];
+	struct scan_field fields[2];
 
 	LOG_DEBUG(&quot;loading miniIC at 0x%8.8&quot; PRIx32 &quot;&quot;, va);
 
@@ -740,7 +740,7 @@ static int xscale_invalidate_ic_line(target_t *target, uint32_t va)
 {
 	uint8_t packet[4];
 	uint8_t cmd;
-	scan_field_t fields[2];
+	struct scan_field fields[2];
 
 	jtag_set_end_state(TAP_IDLE);
 	xscale_jtag_set_instr(target-&gt;tap, XSCALE_LDIC);
diff --git a/src/xsvf/xsvf.c b/src/xsvf/xsvf.c
index e1a30e6..c6daf5f 100644
--- a/src/xsvf/xsvf.c
+++ b/src/xsvf/xsvf.c
@@ -445,7 +445,7 @@ COMMAND_HANDLER(handle_xsvf_command)
 
 				for (attempt = 0; attempt &lt; limit;  ++attempt)
 				{
-					scan_field_t field;
+					struct scan_field field;
 
 					if (attempt &gt; 0)
 					{
@@ -692,7 +692,7 @@ COMMAND_HANDLER(handle_xsvf_command)
 					do_abort = 1;
 				else
 				{
-					scan_field_t field;
+					struct scan_field field;
 
 					field.tap = tap;
 					field.num_bits = bitcount;
@@ -924,7 +924,7 @@ COMMAND_HANDLER(handle_xsvf_command)
 
 				for (attempt = 0; attempt &lt; limit;  ++attempt)
 				{
-					scan_field_t field;
+					struct scan_field field;
 
 					result = svf_add_statemove(loop_state);
 					jtag_add_clocks(loop_clocks);

commit 42ef503d37b18d907da16d26e99167566d5aabd1
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 03:19:35 2009 -0800

    jtag_tap_t -&gt; struct jtag_tap
    
    Search and destroy the jtag_tap_t typedef.  This also cleans up a
    layering violation, removing the declaration from types.h.

diff --git a/src/flash/avrf.c b/src/flash/avrf.c
index 35d31fb..8bbb616 100644
--- a/src/flash/avrf.c
+++ b/src/flash/avrf.c
@@ -56,17 +56,17 @@ avrf_type_t avft_chips_info[] =
 	{&quot;atmega128&quot;,	0x9702,		256,				512,			8,					512},
 };
 
-int avr_jtag_sendinstr(jtag_tap_t *tap, uint8_t *ir_in, uint8_t ir_out);
-int avr_jtag_senddat(jtag_tap_t *tap, uint32_t *dr_in, uint32_t dr_out, int len);
-
-int mcu_write_ir(jtag_tap_t *tap, uint8_t *ir_in, uint8_t *ir_out, int ir_len, int rti);
-int mcu_write_dr(jtag_tap_t *tap, uint8_t *ir_in, uint8_t *ir_out, int dr_len, int rti);
-int mcu_write_ir_u8(jtag_tap_t *tap, uint8_t *ir_in, uint8_t ir_out, int ir_len, int rti);
-int mcu_write_dr_u8(jtag_tap_t *tap, uint8_t *ir_in, uint8_t ir_out, int dr_len, int rti);
-int mcu_write_ir_u16(jtag_tap_t *tap, uint16_t *ir_in, uint16_t ir_out, int ir_len, int rti);
-int mcu_write_dr_u16(jtag_tap_t *tap, uint16_t *ir_in, uint16_t ir_out, int dr_len, int rti);
-int mcu_write_ir_u32(jtag_tap_t *tap, uint32_t *ir_in, uint32_t ir_out, int ir_len, int rti);
-int mcu_write_dr_u32(jtag_tap_t *tap, uint32_t *ir_in, uint32_t ir_out, int dr_len, int rti);
+int avr_jtag_sendinstr(struct jtag_tap *tap, uint8_t *ir_in, uint8_t ir_out);
+int avr_jtag_senddat(struct jtag_tap *tap, uint32_t *dr_in, uint32_t dr_out, int len);
+
+int mcu_write_ir(struct jtag_tap *tap, uint8_t *ir_in, uint8_t *ir_out, int ir_len, int rti);
+int mcu_write_dr(struct jtag_tap *tap, uint8_t *ir_in, uint8_t *ir_out, int dr_len, int rti);
+int mcu_write_ir_u8(struct jtag_tap *tap, uint8_t *ir_in, uint8_t ir_out, int ir_len, int rti);
+int mcu_write_dr_u8(struct jtag_tap *tap, uint8_t *ir_in, uint8_t ir_out, int dr_len, int rti);
+int mcu_write_ir_u16(struct jtag_tap *tap, uint16_t *ir_in, uint16_t ir_out, int ir_len, int rti);
+int mcu_write_dr_u16(struct jtag_tap *tap, uint16_t *ir_in, uint16_t ir_out, int dr_len, int rti);
+int mcu_write_ir_u32(struct jtag_tap *tap, uint32_t *ir_in, uint32_t ir_out, int ir_len, int rti);
+int mcu_write_dr_u32(struct jtag_tap *tap, uint32_t *ir_in, uint32_t ir_out, int dr_len, int rti);
 int mcu_execute_queue(void);
 
 /* avr program functions */
diff --git a/src/flash/str9xpec.c b/src/flash/str9xpec.c
index 4056ba7..eabe21f 100644
--- a/src/flash/str9xpec.c
+++ b/src/flash/str9xpec.c
@@ -32,7 +32,7 @@ static int str9xpec_erase_area(struct flash_bank_s *bank, int first, int last);
 static int str9xpec_set_address(struct flash_bank_s *bank, uint8_t sector);
 static int str9xpec_write_options(struct flash_bank_s *bank);
 
-int str9xpec_set_instr(jtag_tap_t *tap, uint32_t new_instr, tap_state_t end_state)
+int str9xpec_set_instr(struct jtag_tap *tap, uint32_t new_instr, tap_state_t end_state)
 {
 	if (tap == NULL) {
 		return ERROR_TARGET_INVALID;
@@ -56,7 +56,7 @@ int str9xpec_set_instr(jtag_tap_t *tap, uint32_t new_instr, tap_state_t end_stat
 	return ERROR_OK;
 }
 
-static uint8_t str9xpec_isc_status(jtag_tap_t *tap)
+static uint8_t str9xpec_isc_status(struct jtag_tap *tap)
 {
 	scan_field_t field;
 	uint8_t status;
@@ -84,7 +84,7 @@ static uint8_t str9xpec_isc_status(jtag_tap_t *tap)
 static int str9xpec_isc_enable(struct flash_bank_s *bank)
 {
 	uint8_t status;
-	jtag_tap_t *tap;
+	struct jtag_tap *tap;
 	str9xpec_flash_controller_t *str9xpec_info = bank-&gt;driver_priv;
 
 	tap = str9xpec_info-&gt;tap;
@@ -111,7 +111,7 @@ static int str9xpec_isc_enable(struct flash_bank_s *bank)
 static int str9xpec_isc_disable(struct flash_bank_s *bank)
 {
 	uint8_t status;
-	jtag_tap_t *tap;
+	struct jtag_tap *tap;
 	str9xpec_flash_controller_t *str9xpec_info = bank-&gt;driver_priv;
 
 	tap = str9xpec_info-&gt;tap;
@@ -141,7 +141,7 @@ static int str9xpec_read_config(struct flash_bank_s *bank)
 {
 	scan_field_t field;
 	uint8_t status;
-	jtag_tap_t *tap;
+	struct jtag_tap *tap;
 
 	str9xpec_flash_controller_t *str9xpec_info = bank-&gt;driver_priv;
 
@@ -273,7 +273,7 @@ static int str9xpec_blank_check(struct flash_bank_s *bank, int first, int last)
 {
 	scan_field_t field;
 	uint8_t status;
-	jtag_tap_t *tap;
+	struct jtag_tap *tap;
 	int i;
 	uint8_t *buffer = NULL;
 
@@ -362,7 +362,7 @@ static int str9xpec_erase_area(struct flash_bank_s *bank, int first, int last)
 {
 	scan_field_t field;
 	uint8_t status;
-	jtag_tap_t *tap;
+	struct jtag_tap *tap;
 	int i;
 	uint8_t *buffer = NULL;
 
@@ -444,7 +444,7 @@ static int str9xpec_lock_device(struct flash_bank_s *bank)
 {
 	scan_field_t field;
 	uint8_t status;
-	jtag_tap_t *tap;
+	struct jtag_tap *tap;
 	str9xpec_flash_controller_t *str9xpec_info = NULL;
 
 	str9xpec_info = bank-&gt;driver_priv;
@@ -539,7 +539,7 @@ static int str9xpec_protect(struct flash_bank_s *bank, int set, int first, int l
 
 static int str9xpec_set_address(struct flash_bank_s *bank, uint8_t sector)
 {
-	jtag_tap_t *tap;
+	struct jtag_tap *tap;
 	scan_field_t field;
 	str9xpec_flash_controller_t *str9xpec_info = bank-&gt;driver_priv;
 
@@ -566,7 +566,7 @@ static int str9xpec_write(struct flash_bank_s *bank, uint8_t *buffer, uint32_t o
 	uint32_t bytes_written = 0;
 	uint8_t status;
 	uint32_t check_address = offset;
-	jtag_tap_t *tap;
+	struct jtag_tap *tap;
 	scan_field_t field;
 	uint8_t *scanbuf;
 	int i;
@@ -730,7 +730,7 @@ COMMAND_HANDLER(str9xpec_handle_part_id_command)
 {
 	scan_field_t field;
 	uint8_t *buffer = NULL;
-	jtag_tap_t *tap;
+	struct jtag_tap *tap;
 	uint32_t idcode;
 	str9xpec_flash_controller_t *str9xpec_info = NULL;
 
@@ -837,7 +837,7 @@ static int str9xpec_write_options(struct flash_bank_s *bank)
 {
 	scan_field_t field;
 	uint8_t status;
-	jtag_tap_t *tap;
+	struct jtag_tap *tap;
 	str9xpec_flash_controller_t *str9xpec_info = NULL;
 
 	str9xpec_info = bank-&gt;driver_priv;
@@ -1081,9 +1081,9 @@ COMMAND_HANDLER(str9xpec_handle_flash_unlock_command)
 
 COMMAND_HANDLER(str9xpec_handle_flash_enable_turbo_command)
 {
-	jtag_tap_t *tap0;
-	jtag_tap_t *tap1;
-	jtag_tap_t *tap2;
+	struct jtag_tap *tap0;
+	struct jtag_tap *tap1;
+	struct jtag_tap *tap2;
 	str9xpec_flash_controller_t *str9xpec_info = NULL;
 
 	if (argc &lt; 1)
@@ -1130,7 +1130,7 @@ COMMAND_HANDLER(str9xpec_handle_flash_enable_turbo_command)
 
 COMMAND_HANDLER(str9xpec_handle_flash_disable_turbo_command)
 {
-	jtag_tap_t *tap;
+	struct jtag_tap *tap;
 	str9xpec_flash_controller_t *str9xpec_info = NULL;
 
 	if (argc &lt; 1)
diff --git a/src/flash/str9xpec.h b/src/flash/str9xpec.h
index 376f86c..ff3b6d9 100644
--- a/src/flash/str9xpec.h
+++ b/src/flash/str9xpec.h
@@ -28,7 +28,7 @@
 
 typedef struct str9xpec_flash_controller_s
 {
-	jtag_tap_t *tap;
+	struct jtag_tap *tap;
 	uint32_t *sector_bits;
 	int chain_pos;
 	int isc_enable;
diff --git a/src/helper/types.h b/src/helper/types.h
index 50f5fe2..79eac13 100644
--- a/src/helper/types.h
+++ b/src/helper/types.h
@@ -33,8 +33,6 @@
 #include &lt;inttypes.h&gt;
 #endif
 
-typedef struct jtag_tap_s jtag_tap_t;
-
 #ifdef HAVE_STDBOOL_H
 #include &lt;stdbool.h&gt;
 #else	/* HAVE_STDBOOL_H */
diff --git a/src/jtag/core.c b/src/jtag/core.c
index bbe7425..9eee5e1 100644
--- a/src/jtag/core.c
+++ b/src/jtag/core.c
@@ -78,7 +78,7 @@ static int jtag_srst = -1;
 /**
  * List all TAPs that have been created.
  */
-static jtag_tap_t *__jtag_all_taps = NULL;
+static struct jtag_tap *__jtag_all_taps = NULL;
 /**
  * The number of TAPs in the __jtag_all_taps list, used to track the
  * assigned chain position to new TAPs
@@ -164,7 +164,7 @@ void jtag_poll_set_enabled(bool value)
 
 /************/
 
-jtag_tap_t *jtag_all_taps(void)
+struct jtag_tap *jtag_all_taps(void)
 {
 	return __jtag_all_taps;
 };
@@ -176,7 +176,7 @@ unsigned jtag_tap_count(void)
 
 unsigned jtag_tap_count_enabled(void)
 {
-	jtag_tap_t *t = jtag_all_taps();
+	struct jtag_tap *t = jtag_all_taps();
 	unsigned n = 0;
 	while (t)
 	{
@@ -188,20 +188,20 @@ unsigned jtag_tap_count_enabled(void)
 }
 
 /// Append a new TAP to the chain of all taps.
-void jtag_tap_add(struct jtag_tap_s *t)
+void jtag_tap_add(struct jtag_tap *t)
 {
 	t-&gt;abs_chain_position = jtag_num_taps++;
 
-	jtag_tap_t **tap = &amp;__jtag_all_taps;
+	struct jtag_tap **tap = &amp;__jtag_all_taps;
 	while (*tap != NULL)
 		tap = &amp;(*tap)-&gt;next_tap;
 	*tap = t;
 }
 
 /* returns a pointer to the n-th device in the scan chain */
-static inline jtag_tap_t *jtag_tap_by_position(unsigned n)
+static inline struct jtag_tap *jtag_tap_by_position(unsigned n)
 {
-	jtag_tap_t *t = jtag_all_taps();
+	struct jtag_tap *t = jtag_all_taps();
 
 	while (t &amp;&amp; n-- &gt; 0)
 		t = t-&gt;next_tap;
@@ -209,10 +209,10 @@ static inline jtag_tap_t *jtag_tap_by_position(unsigned n)
 	return t;
 }
 
-jtag_tap_t *jtag_tap_by_string(const char *s)
+struct jtag_tap *jtag_tap_by_string(const char *s)
 {
 	/* try by name first */
-	jtag_tap_t *t = jtag_all_taps();
+	struct jtag_tap *t = jtag_all_taps();
 
 	while (t)
 	{
@@ -238,10 +238,10 @@ jtag_tap_t *jtag_tap_by_string(const char *s)
 	return t;
 }
 
-jtag_tap_t *jtag_tap_by_jim_obj(Jim_Interp *interp, Jim_Obj *o)
+struct jtag_tap *jtag_tap_by_jim_obj(Jim_Interp *interp, Jim_Obj *o)
 {
 	const char *cp = Jim_GetString(o, NULL);
-	jtag_tap_t *t = cp ? jtag_tap_by_string(cp) : NULL;
+	struct jtag_tap *t = cp ? jtag_tap_by_string(cp) : NULL;
 	if (NULL == cp)
 		cp = &quot;(unknown)&quot;;
 	if (NULL == t)
@@ -249,7 +249,7 @@ jtag_tap_t *jtag_tap_by_jim_obj(Jim_Interp *interp, Jim_Obj *o)
 	return t;
 }
 
-jtag_tap_t* jtag_tap_next_enabled(jtag_tap_t* p)
+struct jtag_tap* jtag_tap_next_enabled(struct jtag_tap* p)
 {
 	p = p ? p-&gt;next_tap : jtag_all_taps();
 	while (p)
@@ -261,7 +261,7 @@ jtag_tap_t* jtag_tap_next_enabled(jtag_tap_t* p)
 	return NULL;
 }
 
-const char *jtag_tap_name(const jtag_tap_t *tap)
+const char *jtag_tap_name(const struct jtag_tap *tap)
 {
 	return (tap == NULL) ? &quot;(unknown)&quot; : tap-&gt;dotted_name;
 }
@@ -496,7 +496,7 @@ void jtag_add_plain_dr_scan(int in_num_fields, const scan_field_t *in_fields,
 	jtag_set_error(retval);
 }
 
-void jtag_add_dr_out(jtag_tap_t* tap,
+void jtag_add_dr_out(struct jtag_tap* tap,
 		int num_fields, const int* num_bits, const uint32_t* value,
 		tap_state_t end_state)
 {
@@ -856,7 +856,7 @@ int jtag_execute_queue(void)
 
 static int jtag_reset_callback(enum jtag_event event, void *priv)
 {
-	jtag_tap_t *tap = priv;
+	struct jtag_tap *tap = priv;
 
 	if (event == JTAG_TRST_ASSERTED)
 	{
@@ -989,7 +989,7 @@ static bool jtag_examine_chain_end(uint8_t *idcodes, unsigned count, unsigned ma
 	return triggered;
 }
 
-static bool jtag_examine_chain_match_tap(const struct jtag_tap_s *tap)
+static bool jtag_examine_chain_match_tap(const struct jtag_tap *tap)
 {
 	/* ignore expected BYPASS codes; warn otherwise */
 	if (0 == tap-&gt;expected_ids_cnt &amp;&amp; !tap-&gt;idcode)
@@ -1044,7 +1044,7 @@ static int jtag_examine_chain(void)
 		return ERROR_JTAG_INIT_FAILED;
 
 	/* point at the 1st tap */
-	jtag_tap_t *tap = jtag_tap_next_enabled(NULL);
+	struct jtag_tap *tap = jtag_tap_next_enabled(NULL);
 
 	if (!tap)
 		autoprobe = true;
@@ -1168,7 +1168,7 @@ static int jtag_examine_chain(void)
  */
 static int jtag_validate_ircapture(void)
 {
-	jtag_tap_t *tap;
+	struct jtag_tap *tap;
 	int total_ir_length = 0;
 	uint8_t *ir_test = NULL;
 	scan_field_t field;
@@ -1280,7 +1280,7 @@ done:
 }
 
 
-void jtag_tap_init(jtag_tap_t *tap)
+void jtag_tap_init(struct jtag_tap *tap)
 {
 	unsigned ir_len_bits;
 	unsigned ir_len_bytes;
@@ -1315,7 +1315,7 @@ void jtag_tap_init(jtag_tap_t *tap)
 	jtag_tap_add(tap);
 }
 
-void jtag_tap_free(jtag_tap_t *tap)
+void jtag_tap_free(struct jtag_tap *tap)
 {
 	jtag_unregister_event_callback(&amp;jtag_reset_callback, tap);
 
@@ -1371,7 +1371,7 @@ int jtag_interface_init(struct command_context_s *cmd_ctx)
 
 int jtag_init_inner(struct command_context_s *cmd_ctx)
 {
-	jtag_tap_t *tap;
+	struct jtag_tap *tap;
 	int retval;
 	bool issue_setup = true;
 
diff --git a/src/jtag/driver.c b/src/jtag/driver.c
index 3bce5d5..da48fdc 100644
--- a/src/jtag/driver.c
+++ b/src/jtag/driver.c
@@ -96,7 +96,7 @@ int interface_jtag_add_ir_scan(int in_num_fields, const scan_field_t *in_fields,
 
 	/* loop over all enabled TAPs */
 
-	for (jtag_tap_t * tap = jtag_tap_next_enabled(NULL); tap != NULL; tap = jtag_tap_next_enabled(tap))
+	for (struct jtag_tap * tap = jtag_tap_next_enabled(NULL); tap != NULL; tap = jtag_tap_next_enabled(tap))
 	{
 		/* search the input field list for fields for the current TAP */
 
@@ -182,7 +182,7 @@ int interface_jtag_add_dr_scan(int in_num_fields, const scan_field_t *in_fields,
 
 	size_t bypass_devices = 0;
 
-	for (jtag_tap_t * tap = jtag_tap_next_enabled(NULL); tap != NULL; tap = jtag_tap_next_enabled(tap))
+	for (struct jtag_tap * tap = jtag_tap_next_enabled(NULL); tap != NULL; tap = jtag_tap_next_enabled(tap))
 	{
 		if (tap-&gt;bypass)
 			bypass_devices++;
@@ -207,7 +207,7 @@ int interface_jtag_add_dr_scan(int in_num_fields, const scan_field_t *in_fields,
 
 	/* loop over all enabled TAPs */
 
-	for (jtag_tap_t * tap = jtag_tap_next_enabled(NULL); tap != NULL; tap = jtag_tap_next_enabled(tap))
+	for (struct jtag_tap * tap = jtag_tap_next_enabled(NULL); tap != NULL; tap = jtag_tap_next_enabled(tap))
 	{
 		/* if TAP is not bypassed insert matching input fields */
 
@@ -261,7 +261,7 @@ int interface_jtag_add_dr_scan(int in_num_fields, const scan_field_t *in_fields,
  * The bypass status of TAPs is set by jtag_add_ir_scan().
  *
  */
-void interface_jtag_add_dr_out(jtag_tap_t *target_tap,
+void interface_jtag_add_dr_out(struct jtag_tap *target_tap,
 		int in_num_fields,
 		const int *num_bits,
 		const uint32_t *value,
@@ -271,7 +271,7 @@ void interface_jtag_add_dr_out(jtag_tap_t *target_tap,
 
 	size_t bypass_devices = 0;
 
-	for (jtag_tap_t * tap = jtag_tap_next_enabled(NULL); tap != NULL; tap = jtag_tap_next_enabled(tap))
+	for (struct jtag_tap * tap = jtag_tap_next_enabled(NULL); tap != NULL; tap = jtag_tap_next_enabled(tap))
 	{
 		if (tap-&gt;bypass)
 			bypass_devices++;
@@ -299,7 +299,7 @@ void interface_jtag_add_dr_out(jtag_tap_t *target_tap,
 
 	/* loop over all enabled TAPs */
 
-	for (jtag_tap_t * tap = jtag_tap_next_enabled(NULL); tap != NULL; tap = jtag_tap_next_enabled(tap))
+	for (struct jtag_tap * tap = jtag_tap_next_enabled(NULL); tap != NULL; tap = jtag_tap_next_enabled(tap))
 	{
 		/* if TAP is not bypassed insert matching input fields */
 
diff --git a/src/jtag/jtag.h b/src/jtag/jtag.h
index 1dfefde..5224b6c 100644
--- a/src/jtag/jtag.h
+++ b/src/jtag/jtag.h
@@ -26,7 +26,6 @@
 #include &quot;binarybuffer.h&quot;
 #include &quot;log.h&quot;
 
-
 #ifdef _DEBUG_JTAG_IO_
 #define DEBUG_JTAG_IO(expr ...) \
 	do { if (1) LOG_DEBUG(expr); } while (0)
@@ -123,7 +122,7 @@ extern tap_state_t cmd_queue_cur_state;
 typedef struct scan_field_s
 {
 	/// A pointer to the tap structure to which this field refers.
-	jtag_tap_t* tap;
+	struct jtag_tap* tap;
 
 	/// The number of bits this field specifies (up to 32)
 	int num_bits;
@@ -147,11 +146,7 @@ typedef struct scan_field_s
 
 typedef struct jtag_tap_event_action_s jtag_tap_event_action_t;
 
-/* this is really: typedef jtag_tap_t */
-/* But - the typedef is done in &quot;types.h&quot; */
-/* due to &quot;forward declaration reasons&quot; */
-struct jtag_tap_s
-{
+struct jtag_tap {
 	const char* chip;
 	const char* tapname;
 	const char* dotted_name;
@@ -182,17 +177,17 @@ struct jtag_tap_s
 
 	jtag_tap_event_action_t *event_action;
 
-	jtag_tap_t* next_tap;
+	struct jtag_tap* next_tap;
 };
 
-void jtag_tap_init(jtag_tap_t *tap);
-void jtag_tap_free(jtag_tap_t *tap);
+void jtag_tap_init(struct jtag_tap *tap);
+void jtag_tap_free(struct jtag_tap *tap);
 
-jtag_tap_t* jtag_all_taps(void);
-const char *jtag_tap_name(const jtag_tap_t *tap);
-jtag_tap_t* jtag_tap_by_string(const char* dotted_name);
-jtag_tap_t* jtag_tap_by_jim_obj(Jim_Interp* interp, Jim_Obj* obj);
-jtag_tap_t* jtag_tap_next_enabled(jtag_tap_t* p);
+struct jtag_tap* jtag_all_taps(void);
+const char *jtag_tap_name(const struct jtag_tap *tap);
+struct jtag_tap* jtag_tap_by_string(const char* dotted_name);
+struct jtag_tap* jtag_tap_by_jim_obj(Jim_Interp* interp, Jim_Obj* obj);
+struct jtag_tap* jtag_tap_next_enabled(struct jtag_tap* p);
 unsigned jtag_tap_count_enabled(void);
 unsigned jtag_tap_count(void);
 
@@ -702,7 +697,7 @@ void jtag_sleep(uint32_t us);
  * There is no jtag_add_dr_outin() version of this fn that also allows
  * clocking data back in. Patches gladly accepted!
  */
-void jtag_add_dr_out(jtag_tap_t* tap,
+void jtag_add_dr_out(struct jtag_tap* tap,
 		int num_fields, const int* num_bits, const uint32_t* value,
 		tap_state_t end_state);
 
diff --git a/src/jtag/minidriver.h b/src/jtag/minidriver.h
index 57d1d6e..47400d1 100644
--- a/src/jtag/minidriver.h
+++ b/src/jtag/minidriver.h
@@ -81,7 +81,7 @@ static inline void interface_jtag_add_scan_check_alloc(scan_field_t *field)
 	field-&gt;in_value = (uint8_t *)cmd_queue_alloc(num_bytes);
 }
 
-void interface_jtag_add_dr_out(jtag_tap_t* tap,
+void interface_jtag_add_dr_out(struct jtag_tap* tap,
 		int num_fields, const int* num_bits, const uint32_t* value,
 		tap_state_t end_state);
 
diff --git a/src/jtag/minidummy/jtag_minidriver.h b/src/jtag/minidummy/jtag_minidriver.h
index 26b212b..0435737 100644
--- a/src/jtag/minidummy/jtag_minidriver.h
+++ b/src/jtag/minidummy/jtag_minidriver.h
@@ -20,7 +20,7 @@
 
 
 
-static __inline__ void interface_jtag_add_dr_out_core(jtag_tap_t *target_tap,
+static __inline__ void interface_jtag_add_dr_out_core(struct jtag_tap *target_tap,
 		int num_fields,
 		const int *num_bits,
 		const uint32_t *value,
@@ -29,7 +29,7 @@ static __inline__ void interface_jtag_add_dr_out_core(jtag_tap_t *target_tap,
 	/* synchronously do the operation here */
 }
 
-static __inline__ void interface_jtag_add_dr_out(jtag_tap_t *target_tap,
+static __inline__ void interface_jtag_add_dr_out(struct jtag_tap *target_tap,
 		int num_fields,
 		const int *num_bits,
 		const uint32_t *value,
diff --git a/src/jtag/minidummy/minidummy.c b/src/jtag/minidummy/minidummy.c
index 2cab0f5..4e21cc4 100644
--- a/src/jtag/minidummy/minidummy.c
+++ b/src/jtag/minidummy/minidummy.c
@@ -172,7 +172,7 @@ int interface_jtag_add_pathmove(int num_states, const tap_state_t *path)
 
 
 
-void embeddedice_write_dcc(jtag_tap_t *tap, int reg_addr, uint8_t *buffer, int little, int count)
+void embeddedice_write_dcc(struct jtag_tap *tap, int reg_addr, uint8_t *buffer, int little, int count)
 {
 	int i;
 	for (i = 0; i &lt; count; i++)
diff --git a/src/jtag/tcl.c b/src/jtag/tcl.c
index 923542f..abf875a 100644
--- a/src/jtag/tcl.c
+++ b/src/jtag/tcl.c
@@ -61,7 +61,7 @@ static Jim_Nvp nvp_config_opts[] = {
 	{ .name = NULL,          .value = -1 }
 };
 
-static int jtag_tap_configure_cmd(Jim_GetOptInfo *goi, jtag_tap_t * tap)
+static int jtag_tap_configure_cmd(Jim_GetOptInfo *goi, struct jtag_tap * tap)
 {
 	Jim_Nvp *n;
 	Jim_Obj *o;
@@ -165,7 +165,7 @@ static int is_bad_irval(int ir_length, jim_wide w)
 
 static int jim_newtap_cmd(Jim_GetOptInfo *goi)
 {
-	jtag_tap_t *pTap;
+	struct jtag_tap *pTap;
 	jim_wide w;
 	int x;
 	int e;
@@ -187,7 +187,7 @@ static int jim_newtap_cmd(Jim_GetOptInfo *goi)
 		{ .name = NULL				,	.value = -1 },
 	};
 
-	pTap = calloc(1, sizeof(jtag_tap_t));
+	pTap = calloc(1, sizeof(struct jtag_tap));
 	if (!pTap) {
 		Jim_SetResult_sprintf(goi-&gt;interp, &quot;no memory&quot;);
 		return JIM_ERR;
@@ -335,7 +335,7 @@ static int jim_newtap_cmd(Jim_GetOptInfo *goi)
 	return JIM_ERR;
 }
 
-static void jtag_tap_handle_event(jtag_tap_t *tap, enum jtag_event e)
+static void jtag_tap_handle_event(struct jtag_tap *tap, enum jtag_event e)
 {
 	jtag_tap_event_action_t * jteap;
 
@@ -459,7 +459,7 @@ static int jim_jtag_command(Jim_Interp *interp, int argc, Jim_Obj *const *argv)
 		}
 
 		{
-			jtag_tap_t *t;
+			struct jtag_tap *t;
 
 			t = jtag_tap_by_jim_obj(goi.interp, goi.argv[0]);
 			if (t == NULL)
@@ -511,7 +511,7 @@ static int jim_jtag_command(Jim_Interp *interp, int argc, Jim_Obj *const *argv)
 		}
 
 		{
-			jtag_tap_t *t;
+			struct jtag_tap *t;
 
 			Jim_GetOpt_Obj(&amp;goi, &amp;o);
 			t = jtag_tap_by_jim_obj(goi.interp, o);
@@ -532,7 +532,7 @@ static int jim_jtag_command(Jim_Interp *interp, int argc, Jim_Obj *const *argv)
 		}
 
 		{
-			jtag_tap_t *t;
+			struct jtag_tap *t;
 
 			Jim_GetOpt_Obj(&amp;goi, &amp;o);
 			t = jtag_tap_by_jim_obj(goi.interp, o);
@@ -552,7 +552,7 @@ static int jim_jtag_command(Jim_Interp *interp, int argc, Jim_Obj *const *argv)
 		}
 		Jim_SetResult(goi.interp, Jim_NewListObj(goi.interp, NULL, 0));
 		{
-			jtag_tap_t *tap;
+			struct jtag_tap *tap;
 
 			for (tap = jtag_all_taps(); tap; tap = tap-&gt;next_tap) {
 				Jim_ListAppendElement(goi.interp,
@@ -572,7 +572,7 @@ static int jim_jtag_command(Jim_Interp *interp, int argc, Jim_Obj *const *argv)
 
 void jtag_notify_event(enum jtag_event event)
 {
-	jtag_tap_t *tap;
+	struct jtag_tap *tap;
 
 	for (tap = jtag_all_taps(); tap; tap = tap-&gt;next_tap)
 		jtag_tap_handle_event(tap, event);
@@ -664,7 +664,7 @@ COMMAND_HANDLER(handle_interface_command)
 
 COMMAND_HANDLER(handle_scan_chain_command)
 {
-	jtag_tap_t *tap;
+	struct jtag_tap *tap;
 
 	tap = jtag_all_taps();
 	command_print(cmd_ctx, &quot;     TapName            | Enabled |   IdCode      Expected    IrLen IrCap  IrMask Instr     &quot;);
@@ -1079,7 +1079,7 @@ COMMAND_HANDLER(handle_irscan_command)
 {
 	int i;
 	scan_field_t *fields;
-	jtag_tap_t *tap;
+	struct jtag_tap *tap;
 	tap_state_t endstate;
 
 	if ((argc &lt; 2) || (argc % 2))
@@ -1163,7 +1163,7 @@ static int Jim_Command_drscan(Jim_Interp *interp, int argc, Jim_Obj *const *args
 	int num_fields;
 	int field_count = 0;
 	int i, e;
-	jtag_tap_t *tap;
+	struct jtag_tap *tap;
 	tap_state_t endstate;
 
 	/* args[1] = device
diff --git a/src/jtag/zy1000/jtag_minidriver.h b/src/jtag/zy1000/jtag_minidriver.h
index e755159..0e97913 100644
--- a/src/jtag/zy1000/jtag_minidriver.h
+++ b/src/jtag/zy1000/jtag_minidriver.h
@@ -148,7 +148,7 @@ static __inline__ void shiftValueInner(const enum tap_state state, const enum ta
 
 
 
-static __inline__ void interface_jtag_add_dr_out_core(jtag_tap_t *target_tap,
+static __inline__ void interface_jtag_add_dr_out_core(struct jtag_tap *target_tap,
 		int num_fields,
 		const int *num_bits,
 		const uint32_t *value,
@@ -156,7 +156,7 @@ static __inline__ void interface_jtag_add_dr_out_core(jtag_tap_t *target_tap,
 {
 	enum tap_state pause_state = TAP_DRSHIFT;
 
-	jtag_tap_t *tap, *nextTap;
+	struct jtag_tap *tap, *nextTap;
 	for (tap = jtag_tap_next_enabled(NULL); tap!= NULL; tap = nextTap)
 	{
 		nextTap = jtag_tap_next_enabled(tap);
@@ -180,7 +180,7 @@ static __inline__ void interface_jtag_add_dr_out_core(jtag_tap_t *target_tap,
 	}
 }
 
-static __inline__ void interface_jtag_add_dr_out(jtag_tap_t *target_tap,
+static __inline__ void interface_jtag_add_dr_out(struct jtag_tap *target_tap,
 		int num_fields,
 		const int *num_bits,
 		const uint32_t *value,
diff --git a/src/jtag/zy1000/zy1000.c b/src/jtag/zy1000/zy1000.c
index f45bff5..8619258 100644
--- a/src/jtag/zy1000/zy1000.c
+++ b/src/jtag/zy1000/zy1000.c
@@ -537,7 +537,7 @@ int interface_jtag_add_ir_scan(int num_fields, const scan_field_t *fields, tap_s
 
 	int j;
 	int scan_size = 0;
-	jtag_tap_t *tap, *nextTap;
+	struct jtag_tap *tap, *nextTap;
 	for (tap = jtag_tap_next_enabled(NULL); tap!= NULL; tap = nextTap)
 	{
 		nextTap = jtag_tap_next_enabled(tap);
@@ -601,7 +601,7 @@ int interface_jtag_add_dr_scan(int num_fields, const scan_field_t *fields, tap_s
 {
 
 	int j;
-	jtag_tap_t *tap, *nextTap;
+	struct jtag_tap *tap, *nextTap;
 	for (tap = jtag_tap_next_enabled(NULL); tap!= NULL; tap = nextTap)
 	{
 		nextTap = jtag_tap_next_enabled(tap);
@@ -759,7 +759,7 @@ int interface_jtag_add_pathmove(int num_states, const tap_state_t *path)
 
 
 
-void embeddedice_write_dcc(jtag_tap_t *tap, int reg_addr, uint8_t *buffer, int little, int count)
+void embeddedice_write_dcc(struct jtag_tap *tap, int reg_addr, uint8_t *buffer, int little, int count)
 {
 //	static int const reg_addr = 0x5;
 	tap_state_t end_state = jtag_get_end_state();
diff --git a/src/pld/virtex2.c b/src/pld/virtex2.c
index 7e422fb..2d06a0e 100644
--- a/src/pld/virtex2.c
+++ b/src/pld/virtex2.c
@@ -26,7 +26,7 @@
 #include &quot;pld.h&quot;
 
 
-static int virtex2_set_instr(jtag_tap_t *tap, uint32_t new_instr)
+static int virtex2_set_instr(struct jtag_tap *tap, uint32_t new_instr)
 {
 	if (tap == NULL)
 		return ERROR_FAIL;
@@ -209,7 +209,7 @@ COMMAND_HANDLER(virtex2_handle_read_stat_command)
 
 PLD_DEVICE_COMMAND_HANDLER(virtex2_pld_device_command)
 {
-	jtag_tap_t *tap;
+	str
uct jtag_tap *tap;
 
 	virtex2_pld_device_t *virtex2_info;
 
diff --git a/src/pld/virtex2.h b/src/pld/virtex2.h
index 65ad74a..2714dd7 100644
--- a/src/pld/virtex2.h
+++ b/src/pld/virtex2.h
@@ -24,7 +24,7 @@
 
 typedef struct virtex2_pld_device_s
 {
-  jtag_tap_t *tap;
+  struct jtag_tap *tap;
 } virtex2_pld_device_t;
 
 #endif /* VIRTEX2_H */
diff --git a/src/svf/svf.c b/src/svf/svf.c
index 8f2ee80..4dea968 100644
--- a/src/svf/svf.c
+++ b/src/svf/svf.c
@@ -216,7 +216,7 @@ static char *svf_command_buffer = NULL;
 static int svf_command_buffer_size = 0;
 static int svf_line_number = 1;
 
-static jtag_tap_t *tap = NULL;
+static struct jtag_tap *tap = NULL;
 
 #define SVF_MAX_BUFFER_SIZE_TO_COMMIT	(4 * 1024)
 static uint8_t *svf_tdi_buffer = NULL, *svf_tdo_buffer = NULL, *svf_mask_buffer = NULL;
diff --git a/src/target/arm11.c b/src/target/arm11.c
index 5b11f8e..1dc1834 100644
--- a/src/target/arm11.c
+++ b/src/target/arm11.c
@@ -2066,7 +2066,7 @@ static const uint32_t arm11_coproc_instruction_limits[] =
 
 static arm11_common_t * arm11_find_target(const char * arg)
 {
-	jtag_tap_t *	tap;
+	struct jtag_tap *	tap;
 	target_t *		t;
 
 	tap = jtag_tap_by_string(arg);
diff --git a/src/target/arm11_dbgtap.c b/src/target/arm11_dbgtap.c
index fc7a55c..369576c 100644
--- a/src/target/arm11_dbgtap.c
+++ b/src/target/arm11_dbgtap.c
@@ -100,7 +100,7 @@ void arm11_setup_field(arm11_common_t * arm11, int num_bits, void * out_data, vo
  */
 void arm11_add_IR(arm11_common_t * arm11, uint8_t instr, tap_state_t state)
 {
-	jtag_tap_t *tap;
+	struct jtag_tap *tap;
 	tap = arm11-&gt;target-&gt;tap;
 
 	if (buf_get_u32(tap-&gt;cur_instr, 0, 5) == instr)
diff --git a/src/target/arm720t.c b/src/target/arm720t.c
index af326bf..4e09228 100644
--- a/src/target/arm720t.c
+++ b/src/target/arm720t.c
@@ -377,7 +377,7 @@ static int arm720t_init_target(struct command_context_s *cmd_ctx, struct target_
 }
 
 static int arm720t_init_arch_info(target_t *target,
-		arm720t_common_t *arm720t, jtag_tap_t *tap)
+		arm720t_common_t *arm720t, struct jtag_tap *tap)
 {
 	arm7tdmi_common_t *arm7tdmi = &amp;arm720t-&gt;arm7tdmi_common;
 	arm7_9_common_t *arm7_9 = &amp;arm7tdmi-&gt;arm7_9_common;
diff --git a/src/target/arm7_9_common.c b/src/target/arm7_9_common.c
index 6a56417..96575d5 100644
--- a/src/target/arm7_9_common.c
+++ b/src/target/arm7_9_common.c
@@ -2611,7 +2611,7 @@ static int arm7_9_dcc_completion(struct target_s *target, uint32_t exit_point, i
 
 		embeddedice_reg_t *ice_reg = arm7_9-&gt;eice_cache-&gt;reg_list[EICE_COMMS_DATA].arch_info;
 		uint8_t reg_addr = ice_reg-&gt;addr &amp; 0x1f;
-		jtag_tap_t *tap;
+		struct jtag_tap *tap;
 		tap = ice_reg-&gt;jtag_info-&gt;tap;
 
 		embeddedice_write_dcc(tap, reg_addr, buffer, little, count-2);
diff --git a/src/target/arm7tdmi.c b/src/target/arm7tdmi.c
index f58ffe2..8bf4680 100644
--- a/src/target/arm7tdmi.c
+++ b/src/target/arm7tdmi.c
@@ -691,7 +691,7 @@ int arm7tdmi_init_target(struct command_context_s *cmd_ctx, struct target_s *tar
 	return ERROR_OK;
 }
 
-int arm7tdmi_init_arch_info(target_t *target, arm7tdmi_common_t *arm7tdmi, jtag_tap_t *tap)
+int arm7tdmi_init_arch_info(target_t *target, arm7tdmi_common_t *arm7tdmi, struct jtag_tap *tap)
 {
 	struct arm7_9_common_s *arm7_9 = &amp;arm7tdmi-&gt;arm7_9_common;
 
diff --git a/src/target/arm7tdmi.h b/src/target/arm7tdmi.h
index f69ba49..da0f772 100644
--- a/src/target/arm7tdmi.h
+++ b/src/target/arm7tdmi.h
@@ -33,7 +33,7 @@ typedef struct arm7tdmi_common_s
 	arm7_9_common_t arm7_9_common;
 } arm7tdmi_common_t;
 
-int arm7tdmi_init_arch_info(target_t *target, arm7tdmi_common_t *arm7tdmi, jtag_tap_t *tap);
+int arm7tdmi_init_arch_info(target_t *target, arm7tdmi_common_t *arm7tdmi, struct jtag_tap *tap);
 int arm7tdmi_init_target(struct command_context_s *cmd_ctx, struct target_s *target);
 int arm7tdmi_examine(struct target_s *target);
 
diff --git a/src/target/arm920t.c b/src/target/arm920t.c
index 81f5c6a..9fe8fc4 100644
--- a/src/target/arm920t.c
+++ b/src/target/arm920t.c
@@ -620,7 +620,7 @@ int arm920t_soft_reset_halt(struct target_s *target)
 	return ERROR_OK;
 }
 
-int arm920t_init_arch_info(target_t *target, arm920t_common_t *arm920t, jtag_tap_t *tap)
+int arm920t_init_arch_info(target_t *target, arm920t_common_t *arm920t, struct jtag_tap *tap)
 {
 	arm9tdmi_common_t *arm9tdmi = &amp;arm920t-&gt;arm9tdmi_common;
 	arm7_9_common_t *arm7_9 = &amp;arm9tdmi-&gt;arm7_9_common;
diff --git a/src/target/arm926ejs.c b/src/target/arm926ejs.c
index 77405a8..c8120b6 100644
--- a/src/target/arm926ejs.c
+++ b/src/target/arm926ejs.c
@@ -667,7 +667,7 @@ static int arm926ejs_read_phys_memory(struct target_s *target,
 }
 
 int arm926ejs_init_arch_info(target_t *target, arm926ejs_common_t *arm926ejs,
-		jtag_tap_t *tap)
+		struct jtag_tap *tap)
 {
 	arm9tdmi_common_t *arm9tdmi = &amp;arm926ejs-&gt;arm9tdmi_common;
 	arm7_9_common_t *arm7_9 = &amp;arm9tdmi-&gt;arm7_9_common;
diff --git a/src/target/arm926ejs.h b/src/target/arm926ejs.h
index 0712c53..f0df091 100644
--- a/src/target/arm926ejs.h
+++ b/src/target/arm926ejs.h
@@ -47,7 +47,7 @@ target_to_arm926(struct target_s *target)
 
 
 int arm926ejs_init_arch_info(target_t *target,
-		arm926ejs_common_t *arm926ejs, jtag_tap_t *tap);
+		arm926ejs_common_t *arm926ejs, struct jtag_tap *tap);
 int arm926ejs_register_commands(struct command_context_s *cmd_ctx);
 int arm926ejs_arch_state(struct target_s *target);
 int arm926ejs_write_memory(struct target_s *target,
diff --git a/src/target/arm966e.c b/src/target/arm966e.c
index 62ccaa8..b1fea08 100644
--- a/src/target/arm966e.c
+++ b/src/target/arm966e.c
@@ -32,7 +32,7 @@
 #define _DEBUG_INSTRUCTION_EXECUTION_
 #endif
 
-int arm966e_init_arch_info(target_t *target, arm966e_common_t *arm966e, jtag_tap_t *tap)
+int arm966e_init_arch_info(target_t *target, arm966e_common_t *arm966e, struct jtag_tap *tap)
 {
 	arm9tdmi_common_t *arm9tdmi = &amp;arm966e-&gt;arm9tdmi_common;
 	arm7_9_common_t *arm7_9 = &amp;arm9tdmi-&gt;arm7_9_common;
diff --git a/src/target/arm966e.h b/src/target/arm966e.h
index 8d0ee50..e311659 100644
--- a/src/target/arm966e.h
+++ b/src/target/arm966e.h
@@ -42,7 +42,7 @@ target_to_arm966(struct target_s *target)
 }
 
 int arm966e_init_arch_info(target_t *target,
-		arm966e_common_t *arm966e, jtag_tap_t *tap);
+		arm966e_common_t *arm966e, struct jtag_tap *tap);
 int arm966e_register_commands(struct command_context_s *cmd_ctx);
 int arm966e_write_cp15(target_t *target, int reg_addr, uint32_t value);
 
diff --git a/src/target/arm9tdmi.c b/src/target/arm9tdmi.c
index 416fe79..56ce365 100644
--- a/src/target/arm9tdmi.c
+++ b/src/target/arm9tdmi.c
@@ -786,7 +786,7 @@ int arm9tdmi_init_target(struct command_context_s *cmd_ctx,
 	return ERROR_OK;
 }
 
-int arm9tdmi_init_arch_info(target_t *target, arm9tdmi_common_t *arm9tdmi, jtag_tap_t *tap)
+int arm9tdmi_init_arch_info(target_t *target, arm9tdmi_common_t *arm9tdmi, struct jtag_tap *tap)
 {
 	armv4_5_common_t *armv4_5;
 	arm7_9_common_t *arm7_9;
diff --git a/src/target/arm9tdmi.h b/src/target/arm9tdmi.h
index c098d82..775d475 100644
--- a/src/target/arm9tdmi.h
+++ b/src/target/arm9tdmi.h
@@ -55,7 +55,7 @@ int arm9tdmi_init_target(struct command_context_s *cmd_ctx,
 		struct target_s *target);
 int arm9tdmi_examine(struct target_s *target);
 int arm9tdmi_init_arch_info(target_t *target,
-		arm9tdmi_common_t *arm9tdmi, jtag_tap_t *tap);
+		arm9tdmi_common_t *arm9tdmi, struct jtag_tap *tap);
 int arm9tdmi_register_commands(struct command_context_s *cmd_ctx);
 
 int arm9tdmi_clock_out(arm_jtag_t *jtag_info,
diff --git a/src/target/arm_jtag.c b/src/target/arm_jtag.c
index d975d9d..bcd4faa 100644
--- a/src/target/arm_jtag.c
+++ b/src/target/arm_jtag.c
@@ -33,7 +33,7 @@
 
 int arm_jtag_set_instr(arm_jtag_t *jtag_info, uint32_t new_instr,  void *no_verify_capture)
 {
-	jtag_tap_t *tap;
+	struct jtag_tap *tap;
 	tap = jtag_info-&gt;tap;
 	if (tap == NULL)
 		return ERROR_FAIL;
diff --git a/src/target/arm_jtag.h b/src/target/arm_jtag.h
index c7d12cb..5b882c6 100644
--- a/src/target/arm_jtag.h
+++ b/src/target/arm_jtag.h
@@ -27,7 +27,7 @@
 
 typedef struct arm_jtag_s
 {
-	jtag_tap_t *tap;
+	struct jtag_tap *tap;
 
 	uint32_t scann_size;
 	uint32_t scann_instr;
diff --git a/src/target/avrt.c b/src/target/avrt.c
index 98433cf..bff2418 100644
--- a/src/target/avrt.c
+++ b/src/target/avrt.c
@@ -46,17 +46,17 @@ int avr_deassert_reset(target_t *target);
 int avr_soft_reset_halt(struct target_s *target);
 
 /* IR and DR functions */
-int avr_jtag_sendinstr(jtag_tap_t *tap, uint8_t *ir_in, uint8_t ir_out);
-int avr_jtag_senddat(jtag_tap_t *tap, uint32_t *dr_in, uint32_t dr_out, int len);
-
-int mcu_write_ir(jtag_tap_t *tap, uint8_t *ir_in, uint8_t *ir_out, int ir_len, int rti);
-int mcu_write_dr(jtag_tap_t *tap, uint8_t *dr_in, uint8_t *dr_out, int dr_len, int rti);
-int mcu_write_ir_u8(jtag_tap_t *tap, uint8_t *ir_in, uint8_t ir_out, int ir_len, int rti);
-int mcu_write_dr_u8(jtag_tap_t *tap, uint8_t *ir_in, uint8_t ir_out, int dr_len, int rti);
-int mcu_write_ir_u16(jtag_tap_t *tap, uint16_t *ir_in, uint16_t ir_out, int ir_len, int rti);
-int mcu_write_dr_u16(jtag_tap_t *tap, uint16_t *ir_in, uint16_t ir_out, int dr_len, int rti);
-int mcu_write_ir_u32(jtag_tap_t *tap, uint32_t *ir_in, uint32_t ir_out, int ir_len, int rti);
-int mcu_write_dr_u32(jtag_tap_t *tap, uint32_t *ir_in, uint32_t ir_out, int dr_len, int rti);
+int avr_jtag_sendinstr(struct jtag_tap *tap, uint8_t *ir_in, uint8_t ir_out);
+int avr_jtag_senddat(struct jtag_tap *tap, uint32_t *dr_in, uint32_t dr_out, int len);
+
+int mcu_write_ir(struct jtag_tap *tap, uint8_t *ir_in, uint8_t *ir_out, int ir_len, int rti);
+int mcu_write_dr(struct jtag_tap *tap, uint8_t *dr_in, uint8_t *dr_out, int dr_len, int rti);
+int mcu_write_ir_u8(struct jtag_tap *tap, uint8_t *ir_in, uint8_t ir_out, int ir_len, int rti);
+int mcu_write_dr_u8(struct jtag_tap *tap, uint8_t *ir_in, uint8_t ir_out, int dr_len, int rti);
+int mcu_write_ir_u16(struct jtag_tap *tap, uint16_t *ir_in, uint16_t ir_out, int ir_len, int rti);
+int mcu_write_dr_u16(struct jtag_tap *tap, uint16_t *ir_in, uint16_t ir_out, int dr_len, int rti);
+int mcu_write_ir_u32(struct jtag_tap *tap, uint32_t *ir_in, uint32_t ir_out, int ir_len, int rti);
+int mcu_write_dr_u32(struct jtag_tap *tap, uint32_t *ir_in, uint32_t ir_out, int dr_len, int rti);
 int mcu_execute_queue(void);
 
 target_type_t avr_target =
@@ -175,18 +175,18 @@ int avr_soft_reset_halt(struct target_s *target)
 	return ERROR_OK;
 }
 
-int avr_jtag_senddat(jtag_tap_t *tap, uint32_t* dr_in, uint32_t dr_out, int len)
+int avr_jtag_senddat(struct jtag_tap *tap, uint32_t* dr_in, uint32_t dr_out, int len)
 {
 	return mcu_write_dr_u32(tap, dr_in, dr_out, len, 1);
 }
 
-int avr_jtag_sendinstr(jtag_tap_t *tap, uint8_t *ir_in, uint8_t ir_out)
+int avr_jtag_sendinstr(struct jtag_tap *tap, uint8_t *ir_in, uint8_t ir_out)
 {
 	return mcu_write_ir_u8(tap, ir_in, ir_out, AVR_JTAG_INS_LEN, 1);
 }
 
 /* IR and DR functions */
-int mcu_write_ir(jtag_tap_t *tap, uint8_t *ir_in, uint8_t *ir_out, int ir_len, int rti)
+int mcu_write_ir(struct jtag_tap *tap, uint8_t *ir_in, uint8_t *ir_out, int ir_len, int rti)
 {
 	if (NULL == tap)
 	{
@@ -212,7 +212,7 @@ int mcu_write_ir(jtag_tap_t *tap, uint8_t *ir_in, uint8_t *ir_out, int ir_len, i
 	return ERROR_OK;
 }
 
-int mcu_write_dr(jtag_tap_t *tap, uint8_t *dr_in, uint8_t *dr_out, int dr_len, int rti)
+int mcu_write_dr(struct jtag_tap *tap, uint8_t *dr_in, uint8_t *dr_out, int dr_len, int rti)
 {
 	if (NULL == tap)
 	{
@@ -233,7 +233,7 @@ int mcu_write_dr(jtag_tap_t *tap, uint8_t *dr_in, uint8_t *dr_out, int dr_len, i
 	return ERROR_OK;
 }
 
-int mcu_write_ir_u8(jtag_tap_t *tap, uint8_t *ir_in, uint8_t ir_out, int ir_len, int rti)
+int mcu_write_ir_u8(struct jtag_tap *tap, uint8_t *ir_in, uint8_t ir_out, int ir_len, int rti)
 {
 	if (ir_len &gt; 8)
 	{
@@ -246,7 +246,7 @@ int mcu_write_ir_u8(jtag_tap_t *tap, uint8_t *ir_in, uint8_t ir_out, int ir_len,
 	return ERROR_OK;
 }
 
-int mcu_write_dr_u8(jtag_tap_t *tap, uint8_t *dr_in, uint8_t dr_out, int dr_len, int rti)
+int mcu_write_dr_u8(struct jtag_tap *tap, uint8_t *dr_in, uint8_t dr_out, int dr_len, int rti)
 {
 	if (dr_len &gt; 8)
 	{
@@ -259,7 +259,7 @@ int mcu_write_dr_u8(jtag_tap_t *tap, uint8_t *dr_in, uint8_t dr_out, int dr_len,
 	return ERROR_OK;
 }
 
-int mcu_write_ir_u16(jtag_tap_t *tap, uint16_t *ir_in, uint16_t ir_out, int ir_len, int rti)
+int mcu_write_ir_u16(struct jtag_tap *tap, uint16_t *ir_in, uint16_t ir_out, int ir_len, int rti)
 {
 	if (ir_len &gt; 16)
 	{
@@ -272,7 +272,7 @@ int mcu_write_ir_u16(jtag_tap_t *tap, uint16_t *ir_in, uint16_t ir_out, int ir_l
 	return ERROR_OK;
 }
 
-int mcu_write_dr_u16(jtag_tap_t *tap, uint16_t *dr_in, uint16_t dr_out, int dr_len, int rti)
+int mcu_write_dr_u16(struct jtag_tap *tap, uint16_t *dr_in, uint16_t dr_out, int dr_len, int rti)
 {
 	if (dr_len &gt; 16)
 	{
@@ -285,7 +285,7 @@ int mcu_write_dr_u16(jtag_tap_t *tap, uint16_t *dr_in, uint16_t dr_out, int dr_l
 	return ERROR_OK;
 }
 
-int mcu_write_ir_u32(jtag_tap_t *tap, uint32_t *ir_in, uint32_t ir_out, int ir_len, int rti)
+int mcu_write_ir_u32(struct jtag_tap *tap, uint32_t *ir_in, uint32_t ir_out, int ir_len, int rti)
 {
 	if (ir_len &gt; 32)
 	{
@@ -298,7 +298,7 @@ int mcu_write_ir_u32(jtag_tap_t *tap, uint32_t *ir_in, uint32_t ir_out, int ir_l
 	return ERROR_OK;
 }
 
-int mcu_write_dr_u32(jtag_tap_t *tap, uint32_t *dr_in, uint32_t dr_out, int dr_len, int rti)
+int mcu_write_dr_u32(struct jtag_tap *tap, uint32_t *dr_in, uint32_t dr_out, int dr_len, int rti)
 {
 	if (dr_len &gt; 32)
 	{
diff --git a/src/target/avrt.h b/src/target/avrt.h
index 02bb005..37ea8e3 100644
--- a/src/target/avrt.h
+++ b/src/target/avrt.h
@@ -24,7 +24,7 @@
 
 typedef struct mcu_jtag_s
 {
-	jtag_tap_t *tap;
+	struct jtag_tap *tap;
 } mcu_jtag_t;
 
 typedef struct avr_common_s
diff --git a/src/target/cortex_a8.c b/src/target/cortex_a8.c
index 3ce861c..2a3cbad 100644
--- a/src/target/cortex_a8.c
+++ b/src/target/cortex_a8.c
@@ -1451,7 +1451,7 @@ static int cortex_a8_init_target(struct command_context_s *cmd_ctx,
 }
 
 int cortex_a8_init_arch_info(target_t *target,
-		cortex_a8_common_t *cortex_a8, jtag_tap_t *tap)
+		cortex_a8_common_t *cortex_a8, struct jtag_tap *tap)
 {
 	armv4_5_common_t *armv4_5;
 	armv7a_common_t *armv7a;
diff --git a/src/target/cortex_a8.h b/src/target/cortex_a8.h
index 869a6f5..39d4e77 100644
--- a/src/target/cortex_a8.h
+++ b/src/target/cortex_a8.h
@@ -144,6 +144,6 @@ target_to_cortex_a8(struct target_s *target)
 }
 
 int cortex_a8_init_arch_info(target_t *target,
-		cortex_a8_common_t *cortex_a8, jtag_tap_t *tap);
+		cortex_a8_common_t *cortex_a8, struct jtag_tap *tap);
 
 #endif /* CORTEX_A8_H */
diff --git a/src/target/cortex_m3.c b/src/target/cortex_m3.c
index 86469c4..d617817 100644
--- a/src/target/cortex_m3.c
+++ b/src/target/cortex_m3.c
@@ -1708,7 +1708,7 @@ static int cortex_m3_handle_target_request(void *priv)
 }
 
 static int cortex_m3_init_arch_info(target_t *target,
-		cortex_m3_common_t *cortex_m3, jtag_tap_t *tap)
+		cortex_m3_common_t *cortex_m3, struct jtag_tap *tap)
 {
 	int retval;
 	struct armv7m_common_s *armv7m = &amp;cortex_m3-&gt;armv7m;
diff --git a/src/target/embeddedice.c b/src/target/embeddedice.c
index 4801cf7..7b20e12 100644
--- a/src/target/embeddedice.c
+++ b/src/target/embeddedice.c
@@ -622,7 +622,7 @@ int embeddedice_handshake(arm_jtag_t *jtag_info, int hsbit, uint32_t timeout)
 /**
  * This is an inner loop of the open loop DCC write of data to target
  */
-void embeddedice_write_dcc(jtag_tap_t *tap,
+void embeddedice_write_dcc(struct jtag_tap *tap,
 		int reg_addr, uint8_t *buffer, int little, int count)
 {
 	int i;
diff --git a/src/target/embeddedice.h b/src/target/embeddedice.h
index b1ba989..c27a1b5 100644
--- a/src/target/embeddedice.h
+++ b/src/target/embeddedice.h
@@ -116,7 +116,7 @@ int embeddedice_handshake(arm_jtag_t *jtag_info, int hsbit, uint32_t timeout);
 /* If many embeddedice_write_reg() follow eachother, then the &gt;1 invocations can be this faster version of
  * embeddedice_write_reg
  */
-static __inline__ void embeddedice_write_reg_inner(jtag_tap_t *tap, int reg_addr, uint32_t value)
+static __inline__ void embeddedice_write_reg_inner(struct jtag_tap *tap, int reg_addr, uint32_t value)
 {
 	static const int embeddedice_num_bits[]={32,5,1};
 	uint32_t values[3];
@@ -132,6 +132,6 @@ static __inline__ void embeddedice_write_reg_inner(jtag_tap_t *tap, int reg_addr
 			jtag_get_end_state());
 }
 
-void embeddedice_write_dcc(jtag_tap_t *tap, int reg_addr, uint8_t *buffer, int little, int count);
+void embeddedice_write_dcc(struct jtag_tap *tap, int reg_addr, uint8_t *buffer, int little, int count);
 
 #endif /* EMBEDDED_ICE_H */
diff --git a/src/target/etb.c b/src/target/etb.c
index c0c485f..3ad7397 100644
--- a/src/target/etb.c
+++ b/src/target/etb.c
@@ -44,7 +44,7 @@ static int etb_get_reg(reg_t *reg);
 
 static int etb_set_instr(etb_t *etb, uint32_t new_instr)
 {
-	jtag_tap_t *tap;
+	struct jtag_tap *tap;
 
 	tap = etb-&gt;tap;
 	if (tap == NULL)
@@ -352,7 +352,7 @@ static int etb_write_reg(reg_t *reg, uint32_t value)
 COMMAND_HANDLER(handle_etb_config_command)
 {
 	target_t *target;
-	jtag_tap_t *tap;
+	struct jtag_tap *tap;
 	struct arm *arm;
 
 	if (argc != 2)
diff --git a/src/target/etb.h b/src/target/etb.h
index da9c9b3..6700ecb 100644
--- a/src/target/etb.h
+++ b/src/target/etb.h
@@ -37,7 +37,7 @@ enum
 typedef struct etb_s
 {
 	etm_context_t *etm_ctx;
-	jtag_tap_t *tap;
+	struct jtag_tap *tap;
 	uint32_t cur_scan_chain;
 	reg_cache_t *reg_cache;
 
diff --git a/src/target/fa526.c b/src/target/fa526.c
index 1a204b1..4592934 100644
--- a/src/target/fa526.c
+++ b/src/target/fa526.c
@@ -256,7 +256,7 @@ static void fa526_branch_resume_thumb(target_t *target)
 }
 
 static int fa526_init_arch_info_2(target_t *target,
-		arm9tdmi_common_t *arm9tdmi, jtag_tap_t *tap)
+		arm9tdmi_common_t *arm9tdmi, struct jtag_tap *tap)
 {
 	arm7_9_common_t *arm7_9;
 
@@ -315,7 +315,7 @@ static int fa526_init_arch_info_2(target_t *target,
 }
 
 static int fa526_init_arch_info(target_t *target,
-		arm920t_common_t *arm920t, jtag_tap_t *tap)
+		arm920t_common_t *arm920t, struct jtag_tap *tap)
 {
 	arm9tdmi_common_t *arm9tdmi = &amp;arm920t-&gt;arm9tdmi_common;
 	arm7_9_common_t *arm7_9 = &amp;arm9tdmi-&gt;arm7_9_common;
diff --git a/src/target/mips32.c b/src/target/mips32.c
index ac26e64..d1722c1 100644
--- a/src/target/mips32.c
+++ b/src/target/mips32.c
@@ -315,7 +315,7 @@ reg_cache_t *mips32_build_reg_cache(target_t *target)
 	return cache;
 }
 
-int mips32_init_arch_info(target_t *target, mips32_common_t *mips32, jtag_tap_t *tap)
+int mips32_init_arch_info(target_t *target, mips32_common_t *mips32, struct jtag_tap *tap)
 {
 	target-&gt;arch_info = mips32;
 	mips32-&gt;common_magic = MIPS32_COMMON_MAGIC;
diff --git a/src/target/mips32.h b/src/target/mips32.h
index 005798d..64328e3 100644
--- a/src/target/mips32.h
+++ b/src/target/mips32.h
@@ -127,7 +127,7 @@ typedef struct mips32_core_reg_s
 int mips32_arch_state(struct target_s *target);
 
 int mips32_init_arch_info(target_t *target,
-		mips32_common_t *mips32, jtag_tap_t *tap);
+		mips32_common_t *mips32, struct jtag_tap *tap);
 
 int mips32_restore_context(target_t *target);
 int mips32_save_context(target_t *target);
diff --git a/src/target/mips_ejtag.c b/src/target/mips_ejtag.c
index ef7f63e..021e3ab 100644
--- a/src/target/mips_ejtag.c
+++ b/src/target/mips_ejtag.c
@@ -29,7 +29,7 @@
 
 int mips_ejtag_set_instr(mips_ejtag_t *ejtag_info, int new_instr, void *delete_me_and_submit_patch)
 {
-	jtag_tap_t *tap;
+	struct jtag_tap *tap;
 
 	tap = ejtag_info-&gt;tap;
 	if (tap == NULL)
@@ -100,7 +100,7 @@ int mips_ejtag_get_impcode(mips_ejtag_t *ejtag_info, uint32_t *impcode)
 
 int mips_ejtag_drscan_32(mips_ejtag_t *ejtag_info, uint32_t *data)
 {
-	jtag_tap_t *tap;
+	struct jtag_tap *tap;
 	tap  = ejtag_info-&gt;tap;
 
 	if (tap == NULL)
diff --git a/src/target/mips_ejtag.h b/src/target/mips_ejtag.h
index 69ede52..74cb21d 100644
--- a/src/target/mips_ejtag.h
+++ b/src/target/mips_ejtag.h
@@ -104,7 +104,7 @@
 
 typedef struct mips_ejtag_s
 {
-	jtag_tap_t *tap;
+	struct jtag_tap *tap;
 	uint32_t impcode;
 	uint32_t idcode;
 	/*int use_dma;*/
diff --git a/src/target/mips_m4k.c b/src/target/mips_m4k.c
index 07731a0..909745a 100644
--- a/src/target/mips_m4k.c
+++ b/src/target/mips_m4k.c
@@ -917,7 +917,7 @@ int mips_m4k_init_target(struct command_context_s *cmd_ctx, struct target_s *tar
 	return ERROR_OK;
 }
 
-int mips_m4k_init_arch_info(target_t *target, mips_m4k_common_t *mips_m4k, jtag_tap_t *tap)
+int mips_m4k_init_arch_info(target_t *target, mips_m4k_common_t *mips_m4k, struct jtag_tap *tap)
 {
 	mips32_common_t *mips32 = &amp;mips_m4k-&gt;mips32_common;
 
diff --git a/src/target/target.c b/src/target/target.c
index 6346ae0..2528a64 100644
--- a/src/target/target.c
+++ b/src/target/target.c
@@ -3785,7 +3785,7 @@ static int target_configure(Jim_GetOptInfo *goi, target_t *target)
 		case TCFG_CHAIN_POSITION:
 			if (goi-&gt;isconfigure) {
 				Jim_Obj *o;
-				jtag_tap_t *tap;
+				struct jtag_tap *tap;
 				target_free_all_working_areas(target);
 				e = Jim_GetOpt_Obj(goi, &amp;o);
 				if (e != JIM_OK) {
diff --git a/src/target/target.h b/src/target/target.h
index 5a61170..f5b6eb2 100644
--- a/src/target/target.h
+++ b/src/target/target.h
@@ -136,7 +136,7 @@ typedef struct target_s
 	target_type_t *type;				/* target type definition (name, access functions) */
 	const char *cmd_name;				/* tcl Name of target */
 	int target_number;					/* DO NOT USE!  field to be removed in 2010 */
-	jtag_tap_t *tap;					/* where on the jtag chain is this */
+	struct jtag_tap *tap;					/* where on the jtag chain is this */
 	const char *variant;				/* what varient of this chip is it? */
 	target_event_action_t *event_action;
 
diff --git a/src/target/xscale.c b/src/target/xscale.c
index 88914b5..c4d22b1 100644
--- a/src/target/xscale.c
+++ b/src/target/xscale.c
@@ -156,7 +156,7 @@ static int xscale_verify_pointer(struct command_context_s *cmd_ctx,
 	return ERROR_OK;
 }
 
-static int xscale_jtag_set_instr(jtag_tap_t *tap, uint32_t new_instr)
+static int xscale_jtag_set_instr(struct jtag_tap *tap, uint32_t new_instr)
 {
 	if (tap == NULL)
 		return ERROR_FAIL;
@@ -2868,7 +2868,7 @@ static int xscale_init_target(struct command_context_s *cmd_ctx,
 }
 
 static int xscale_init_arch_info(target_t *target,
-		xscale_common_t *xscale, jtag_tap_t *tap, const char *variant)
+		xscale_common_t *xscale, struct jtag_tap *tap, const char *variant)
 {
 	armv4_5_common_t *armv4_5;
 	uint32_t high_reset_branch, low_reset_branch;
diff --git a/src/xsvf/xsvf.c b/src/xsvf/xsvf.c
index e0756b5..e1a30e6 100644
--- a/src/xsvf/xsvf.c
+++ b/src/xsvf/xsvf.c
@@ -217,7 +217,7 @@ COMMAND_HANDLER(handle_xsvf_command)
 	   additional devices in the scan chain, otherwise the device
 	   that should be affected
 	*/
-	jtag_tap_t *tap = NULL;
+	struct jtag_tap *tap = NULL;
 
 	if (argc &lt; 2)
 	{

commit 9f212b01be20da43ba534ad33b20419779c89335
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 03:08:29 2009 -0800

    fileio_t -&gt; struct fileio
    
    Remove useless structure typedef.

diff --git a/src/flash/flash.c b/src/flash/flash.c
index f3f0086..2abd8c4 100644
--- a/src/flash/flash.c
+++ b/src/flash/flash.c
@@ -812,7 +812,7 @@ COMMAND_HANDLER(handle_flash_write_bank_command)
 	uint32_t offset;
 	uint8_t *buffer;
 	uint32_t buf_cnt;
-	fileio_t fileio;
+	struct fileio fileio;
 
 	if (argc != 3)
 		return ERROR_COMMAND_SYNTAX_ERROR;
diff --git a/src/flash/lpc2900.c b/src/flash/lpc2900.c
index 953a62a..8359379 100644
--- a/src/flash/lpc2900.c
+++ b/src/flash/lpc2900.c
@@ -622,7 +622,7 @@ COMMAND_HANDLER(lpc2900_handle_read_custom_command)
 	target_write_u32( target, FCTR, FCTR_FS_CS | FCTR_FS_WEB );
 
 	/* Try and open the file */
-	fileio_t fileio;
+	struct fileio fileio;
 	const char *filename = args[1];
 	int ret = fileio_open( &amp;fileio, filename, FILEIO_WRITE, FILEIO_BINARY );
 	if( ret != ERROR_OK )
diff --git a/src/flash/mflash.c b/src/flash/mflash.c
index 5a9b7c3..54578da 100644
--- a/src/flash/mflash.c
+++ b/src/flash/mflash.c
@@ -706,7 +706,7 @@ COMMAND_HANDLER(mg_write_cmd)
 {
 	uint32_t address, buf_cnt, cnt, res, i;
 	uint8_t *buffer;
-	fileio_t fileio;
+	struct fileio fileio;
 	int ret;
 
 	if (argc != 3) {
@@ -770,7 +770,7 @@ COMMAND_HANDLER(mg_dump_cmd)
 {
 	uint32_t address, size_written, size, cnt, res, i;
 	uint8_t *buffer;
-	fileio_t fileio;
+	struct fileio fileio;
 	int ret;
 
 	if (argc != 4) {
diff --git a/src/flash/nand.c b/src/flash/nand.c
index 26eb63a..44207a8 100644
--- a/src/flash/nand.c
+++ b/src/flash/nand.c
@@ -1292,7 +1292,7 @@ COMMAND_HANDLER(handle_nand_write_command)
 	uint32_t buf_cnt;
 	enum oob_formats oob_format = NAND_OOB_NONE;
 
-	fileio_t fileio;
+	struct fileio fileio;
 
 
 	if (argc &lt; 3)
@@ -1469,7 +1469,7 @@ COMMAND_HANDLER(handle_nand_dump_command)
 		return ERROR_OK;
 	}
 
-	fileio_t fileio;
+	struct fileio fileio;
 
 	uint8_t *page = NULL;
 	uint32_t page_size = 0;
diff --git a/src/helper/fileio.c b/src/helper/fileio.c
index 42dae06..71cae75 100644
--- a/src/helper/fileio.c
+++ b/src/helper/fileio.c
@@ -31,7 +31,7 @@
 #include &quot;configuration.h&quot;
 #include &quot;fileio.h&quot;
 
-static inline int fileio_open_local(fileio_t *fileio)
+static inline int fileio_open_local(struct fileio *fileio)
 {
 	char access[4];
 
@@ -98,7 +98,7 @@ static inline int fileio_open_local(fileio_t *fileio)
 	return ERROR_OK;
 }
 
-int fileio_open(fileio_t *fileio, const char *url, enum fileio_access access,	enum fileio_type type)
+int fileio_open(struct fileio *fileio, const char *url, enum fileio_access access,	enum fileio_type type)
 {
 	int retval = ERROR_OK;
 
@@ -111,7 +111,7 @@ int fileio_open(fileio_t *fileio, const char *url, enum fileio_access access,	en
 	return retval;
 }
 
-static inline int fileio_close_local(fileio_t *fileio)
+static inline int fileio_close_local(struct fileio *fileio)
 {
 	int retval;
 	if ((retval = fclose(fileio-&gt;file)) != 0)
@@ -131,7 +131,7 @@ static inline int fileio_close_local(fileio_t *fileio)
 	return ERROR_OK;
 }
 
-int fileio_close(fileio_t *fileio)
+int fileio_close(struct fileio *fileio)
 {
 	int retval;
 
@@ -143,7 +143,7 @@ int fileio_close(fileio_t *fileio)
 	return retval;
 }
 
-int fileio_seek(fileio_t *fileio, uint32_t position)
+int fileio_seek(struct fileio *fileio, uint32_t position)
 {
 	int retval;
 	if ((retval = fseek(fileio-&gt;file, position, SEEK_SET)) != 0)
@@ -155,19 +155,19 @@ int fileio_seek(fileio_t *fileio, uint32_t position)
 	return ERROR_OK;
 }
 
-static inline int fileio_local_read(fileio_t *fileio, uint32_t size, uint8_t *buffer, uint32_t *size_read)
+static inline int fileio_local_read(struct fileio *fileio, uint32_t size, uint8_t *buffer, uint32_t *size_read)
 {
 	*size_read = fread(buffer, 1, size, fileio-&gt;file);
 
 	return ERROR_OK;
 }
 
-int fileio_read(fileio_t *fileio, uint32_t size, uint8_t *buffer, uint32_t *size_read)
+int fileio_read(struct fileio *fileio, uint32_t size, uint8_t *buffer, uint32_t *size_read)
 {
 	return fileio_local_read(fileio, size, buffer, size_read);
 }
 
-int fileio_read_u32(fileio_t *fileio, uint32_t *data)
+int fileio_read_u32(struct fileio *fileio, uint32_t *data)
 {
 	uint8_t buf[4];
 	uint32_t size_read;
@@ -180,7 +180,7 @@ int fileio_read_u32(fileio_t *fileio, uint32_t *data)
 	return ERROR_OK;
 }
 
-static inline int fileio_local_fgets(fileio_t *fileio, uint32_t size, char *buffer)
+static inline int fileio_local_fgets(struct fileio *fileio, uint32_t size, char *buffer)
 {
 	if (fgets(buffer, size, fileio-&gt;file) == NULL)
 		return ERROR_FILEIO_OPERATION_FAILED;
@@ -188,19 +188,19 @@ static inline int fileio_local_fgets(fileio_t *fileio, uint32_t size, char *buff
 	return ERROR_OK;
 }
 
-int fileio_fgets(fileio_t *fileio, uint32_t size, char *buffer)
+int fileio_fgets(struct fileio *fileio, uint32_t size, char *buffer)
 {
 	return fileio_local_fgets(fileio, size, buffer);
 }
 
-static inline int fileio_local_write(fileio_t *fileio, uint32_t size, const uint8_t *buffer, uint32_t *size_written)
+static inline int fileio_local_write(struct fileio *fileio, uint32_t size, const uint8_t *buffer, uint32_t *size_written)
 {
 	*size_written = fwrite(buffer, 1, size, fileio-&gt;file);
 
 	return ERROR_OK;
 }
 
-int fileio_write(fileio_t *fileio, uint32_t size, const uint8_t *buffer, uint32_t *size_written)
+int fileio_write(struct fileio *fileio, uint32_t size, const uint8_t *buffer, uint32_t *size_written)
 {
 	int retval;
 
@@ -212,7 +212,7 @@ int fileio_write(fileio_t *fileio, uint32_t size, const uint8_t *buffer, uint32_
 	return retval;;
 }
 
-int fileio_write_u32(fileio_t *fileio, uint32_t data)
+int fileio_write_u32(struct fileio *fileio, uint32_t data)
 {
 	uint8_t buf[4];
 	uint32_t size_written;
diff --git a/src/helper/fileio.h b/src/helper/fileio.h
index 3f47cb9..024ad08 100644
--- a/src/helper/fileio.h
+++ b/src/helper/fileio.h
@@ -45,29 +45,28 @@ enum fileio_access
 	FILEIO_APPENDREAD,	/* open for writing, position at end, allow reading */
 };
 
-typedef struct fileio_s
-{
+struct fileio {
 	char *url;
 	long long size;
 	enum fileio_type type;
 	enum fileio_access access;
 	FILE *file;
-} fileio_t;
+};
 
-int fileio_open(fileio_t *fileio,
+int fileio_open(struct fileio *fileio,
 	const char *url, enum fileio_access access, enum fileio_type type);
-int fileio_close(fileio_t *fileio);
+int fileio_close(struct fileio *fileio);
 
-int fileio_seek(fileio_t *fileio, uint32_t position);
-int fileio_fgets(fileio_t *fileio, uint32_t size, char *buffer);
+int fileio_seek(struct fileio *fileio, uint32_t position);
+int fileio_fgets(struct fileio *fileio, uint32_t size, char *buffer);
 
-int fileio_read(fileio_t *fileio,
+int fileio_read(struct fileio *fileio,
 		uint32_t size, uint8_t *buffer, uint32_t *size_read);
-int fileio_write(fileio_t *fileio,
+int fileio_write(struct fileio *fileio,
 		uint32_t size, const uint8_t *buffer, uint32_t *size_written);
 
-int fileio_read_u32(fileio_t *fileio, uint32_t *data);
-int fileio_write_u32(fileio_t *fileio, uint32_t data);
+int fileio_read_u32(struct fileio *fileio, uint32_t *data);
+int fileio_write_u32(struct fileio *fileio, uint32_t data);
 
 #define ERROR_FILEIO_LOCATION_UNKNOWN	(-1200)
 #define ERROR_FILEIO_NOT_FOUND			(-1201)
diff --git a/src/target/etm.c b/src/target/etm.c
index a4ff6c5..6d34f6c 100644
--- a/src/target/etm.c
+++ b/src/target/etm.c
@@ -1788,7 +1788,7 @@ COMMAND_HANDLER(handle_etm_image_command)
 
 COMMAND_HANDLER(handle_etm_dump_command)
 {
-	fileio_t file;
+	struct fileio file;
 	target_t *target;
 	struct arm *arm;
 	etm_context_t *etm_ctx;
@@ -1856,7 +1856,7 @@ COMMAND_HANDLER(handle_etm_dump_command)
 
 COMMAND_HANDLER(handle_etm_load_command)
 {
-	fileio_t file;
+	struct fileio file;
 	target_t *target;
 	struct arm *arm;
 	etm_context_t *etm_ctx;
diff --git a/src/target/image.c b/src/target/image.c
index cf7e11a..9a9c955 100644
--- a/src/target/image.c
+++ b/src/target/image.c
@@ -47,7 +47,7 @@
 static int autodetect_image_type(image_t *image, const char *url)
 {
 	int retval;
-	fileio_t fileio;
+	struct fileio fileio;
 	uint32_t read_bytes;
 	uint8_t buffer[9];
 
@@ -150,7 +150,7 @@ static int identify_image_type(image_t *image, const char *type_string, const ch
 static int image_ihex_buffer_complete(image_t *image)
 {
 	image_ihex_t *ihex = image-&gt;type_private;
-	fileio_t *fileio = &amp;ihex-&gt;fileio;
+	struct fileio *fileio = &amp;ihex-&gt;fileio;
 	uint32_t full_address = 0x0;
 	uint32_t cooked_bytes;
 	int i;
@@ -502,7 +502,7 @@ static int image_elf_read_section(image_t *image, int section, uint32_t offset,
 static int image_mot_buffer_complete(image_t *image)
 {
 	image_mot_t *mot = image-&gt;type_private;
-	fileio_t *fileio = &amp;mot-&gt;fileio;
+	struct fileio *fileio = &amp;mot-&gt;fileio;
 	uint32_t full_address = 0x0;
 	uint32_t cooked_bytes;
 	int i;
diff --git a/src/target/image.h b/src/target/image.h
index 30240d5..a1e24c4 100644
--- a/src/target/image.h
+++ b/src/target/image.h
@@ -69,12 +69,12 @@ typedef struct image_s
 
 typedef struct image_binary_s
 {
-	fileio_t fileio;
+	struct fileio fileio;
 } image_binary_t;
 
 typedef struct image_ihex_s
 {
-	fileio_t fileio;
+	struct fileio fileio;
 	uint8_t *buffer;
 } image_ihex_t;
 
@@ -87,7 +87,7 @@ typedef struct image_memory_s
 
 typedef struct fileio_elf_s
 {
-	fileio_t fileio;
+	struct fileio fileio;
 	Elf32_Ehdr *header;
 	Elf32_Phdr *segments;
 	uint32_t segment_count;
@@ -96,7 +96,7 @@ typedef struct fileio_elf_s
 
 typedef struct image_mot_s
 {
-	fileio_t fileio;
+	struct fileio fileio;
 	uint8_t *buffer;
 } image_mot_t;
 
diff --git a/src/target/target.c b/src/target/target.c
index 8cc46ec..6346ae0 100644
--- a/src/target/target.c
+++ b/src/target/target.c
@@ -2493,7 +2493,7 @@ COMMAND_HANDLER(handle_load_image_command)
 
 COMMAND_HANDLER(handle_dump_image_command)
 {
-	fileio_t fileio;
+	struct fileio fileio;
 
 	uint8_t buffer[560];
 	int retvaltemp;
diff --git a/src/target/xscale.c b/src/target/xscale.c
index e18d591..88914b5 100644
--- a/src/target/xscale.c
+++ b/src/target/xscale.c
@@ -3420,7 +3420,7 @@ COMMAND_HANDLER(xscale_handle_dump_trace_command)
 	target_t *target = get_current_target(cmd_ctx);
 	struct xscale_common_s *xscale = target_to_xscale(target);
 	xscale_trace_data_t *trace_data;
-	fileio_t file;
+	struct fileio file;
 	int retval;
 
 	retval = xscale_verify_pointer(cmd_ctx, xscale);

commit f59ec2043b840a4534fdd61502de59e2571988d5
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Fri Nov 13 03:00:51 2009 -0800

    log_callback_t -&gt; struct log_callback
    
    Removes useless and confusing typedef for log callback structure.
    Types with _t should be suitable for passing by-value as arguments.

diff --git a/src/helper/log.c b/src/helper/log.c
index ccc0c01..1724bec 100644
--- a/src/helper/log.c
+++ b/src/helper/log.c
@@ -45,7 +45,7 @@
 int debug_level = -1;
 
 static FILE* log_output;
-static log_callback_t *log_callbacks = NULL;
+static struct log_callback *log_callbacks = NULL;
 
 static long long last_time;
 static long long current_time;
@@ -82,7 +82,7 @@ static void log_forward(const char *file, int line, const char *function, const
 {
 	if (log_forward_count==0)
 	{
-		log_callback_t *cb, *next;
+		struct log_callback *cb, *next;
 		cb = log_callbacks;
 		/* DANGER!!!! the log callback can remove itself!!!! */
 		while (cb)
@@ -353,7 +353,7 @@ int set_log_output(struct command_context_s *cmd_ctx, FILE *output)
 /* add/remove log callback handler */
 int log_add_callback(log_callback_fn fn, void *priv)
 {
-	log_callback_t *cb;
+	struct log_callback *cb;
 
 	/* prevent the same callback to be registered more than once, just for sure */
 	for (cb = log_callbacks; cb; cb = cb-&gt;next)
@@ -363,7 +363,7 @@ int log_add_callback(log_callback_fn fn, void *priv)
 	}
 
 	/* alloc memory, it is safe just to return in case of an error, no need for the caller to check this */
-	if ((cb = malloc(sizeof(log_callback_t))) == NULL)
+	if ((cb = malloc(sizeof(struct log_callback))) == NULL)
 		return ERROR_BUF_TOO_SMALL;
 
 	/* add item to the beginning of the linked list */
@@ -377,7 +377,7 @@ int log_add_callback(log_callback_fn fn, void *priv)
 
 int log_remove_callback(log_callback_fn fn, void *priv)
 {
-	log_callback_t *cb, **p;
+	struct log_callback *cb, **p;
 
 	for (p = &amp;log_callbacks; (cb = *p); p = &amp;(*p)-&gt;next)
 	{
diff --git a/src/helper/log.h b/src/helper/log.h
index aabd1be..5742897 100644
--- a/src/helper/log.h
+++ b/src/helper/log.h
@@ -88,12 +88,11 @@ void log_rethrow(void);
 typedef void (*log_callback_fn)(void *priv, const char *file, unsigned line,
 		const char *function, const char *string);
 
-typedef struct log_callback_s
-{
+struct log_callback {
 	log_callback_fn fn;
 	void *priv;
-	struct log_callback_s *next;
-} log_callback_t;
+	struct log_callback *next;
+};
 
 int log_add_callback(log_callback_fn fn, void *priv);
 int log_remove_callback(log_callback_fn fn, void *priv);

-----------------------------------------------------------------------

Summary of changes:
 src/ecosboard.c                      |    4 +-
 src/flash/aduc702x.c                 |   70 +++----
 src/flash/arm_nandio.c               |    8 +-
 src/flash/arm_nandio.h               |    4 +-
 src/flash/at91sam3.c                 |   32 ++--
 src/flash/at91sam3.h                 |    2 +-
 src/flash/at91sam7.c                 |  100 +++++-----
 src/flash/at91sam7.h                 |    4 +-
 src/flash/avrf.c                     |   86 ++++----
 src/flash/avrf.h                     |    8 +-
 src/flash/cfi.c                      |  278 +++++++++++++-------------
 src/flash/cfi.h                      |   28 ++--
 src/flash/davinci_nand.c             |   72 ++++----
 src/flash/ecos.c                     |   78 ++++----
 src/flash/faux.c                     |   30 ++--
 src/flash/flash.c                    |  130 ++++++------
 src/flash/flash.h                    |   68 ++++----
 src/flash/lpc2000.c                  |   60 +++---
 src/flash/lpc2000.h                  |    6 +-
 src/flash/lpc288x.c                  |   58 +++---
 src/flash/lpc288x.h                  |    4 +-
 src/flash/lpc2900.c                  |  114 ++++++------
 src/flash/lpc3180_nand_controller.c  |   80 ++++----
 src/flash/lpc3180_nand_controller.h  |    6 +-
 src/flash/mflash.c                   |   60 +++---
 src/flash/mflash.h                   |   28 ++--
 src/flash/mx3_nand.c                 |  100 +++++-----
 src/flash/mx3_nand.h                 |    6 +-
 src/flash/nand.c                     |   96 +++++-----
 src/flash/nand.h                     |   76 ++++----
 src/flash/nand_ecc.c                 |    2 +-
 src/flash/nand_ecc_kw.c              |    2 +-
 src/flash/non_cfi.c                  |   10 +-
 src/flash/non_cfi.h                  |    6 +-
 src/flash/ocl.c                      |   42 ++--
 src/flash/orion_nand.c               |   46 +++---
 src/flash/pic32mx.c                  |   98 +++++-----
 src/flash/pic32mx.h                  |   10 +-
 src/flash/s3c2410_nand.c             |   28 ++--
 src/flash/s3c2412_nand.c             |   10 +-
 src/flash/s3c2440_nand.c             |   28 ++--
 src/flash/s3c2443_nand.c             |   10 +-
 src/flash/s3c24xx_nand.c             |   36 ++--
 src/flash/s3c24xx_nand.h             |   28 ++--
 src/flash/stellaris.c                |   98 +++++-----
 src/flash/stellaris.h                |    4 +-
 src/flash/stm32x.c                   |  112 ++++++------
 src/flash/stm32x.h                   |   16 +-
 src/flash/str7x.c                    |   74 ++++----
 src/flash/str7x.h                    |   10 +-
 src/flash/str9x.c                    |   52 +++---
 src/flash/str9x.h                    |    6 +-
 src/flash/str9xpec.c                 |  168 ++++++++--------
 src/flash/str9xpec.h                 |    6 +-
 src/flash/tms470.c                   |   82 ++++----
 src/flash/tms470.h                   |    4 +-
 src/helper/fileio.c                  |   26 ++--
 src/helper/fileio.h                  |   21 +-
 src/helper/log.c                     |   10 +-
 src/helper/log.h                     |    7 +-
 src/helper/types.h                   |    2 -
 src/jtag/amt_jtagaccel.c             |    4 +-
 src/jtag/arm-jtag-ew.c               |   92 +++++-----
 src/jtag/at91rm9200.c                |    4 +-
 src/jtag/bitbang.c                   |    6 +-
 src/jtag/bitbang.h                   |    9 +-
 src/jtag/bitq.c                      |   21 ++-
 src/jtag/bitq.h                      |   19 +--
 src/jtag/commands.c                  |   33 ++--
 src/jtag/commands.h                  |   86 ++++-----
 src/jtag/core.c                      |  108 ++++++-----
 src/jtag/driver.c                    |   86 ++++----
 src/jtag/dummy.c                     |    4 +-
 src/jtag/ep93xx.c                    |    4 +-
 src/jtag/ft2232.c                    |   43 ++--
 src/jtag/gw16012.c                   |    6 +-
 src/jtag/interface.h                 |    5 +-
 src/jtag/interfaces.c                |   34 ++--
 src/jtag/interfaces.h                |    2 +-
 src/jtag/jlink.c                     |  122 ++++++------
 src/jtag/jtag.h                      |   56 +++---
 src/jtag/minidriver.h                |   18 +-
 src/jtag/minidummy/jtag_minidriver.h |    4 +-
 src/jtag/minidummy/minidummy.c       |   12 +-
 src/jtag/parport.c                   |   15 +-
 src/jtag/presto.c                    |   14 +-
 src/jtag/rlink/rlink.c               |   21 +-
 src/jtag/rlink/rlink.h               |   17 +-
 src/jtag/rlink/rlink_speed_table.c   |    2 +-
 src/jtag/tcl.c                       |   38 ++--
 src/jtag/usbprog.c                   |    8 +-
 src/jtag/vsllink.c                   |  131 ++++++-------
 src/jtag/zy1000/jtag_minidriver.h    |   10 +-
 src/jtag/zy1000/zy1000.c             |   22 +-
 src/openocd.c                        |    2 +-
 src/pld/pld.c                        |   18 +-
 src/pld/pld.h                        |   20 +-
 src/pld/virtex2.c                    |   38 ++--
 src/pld/virtex2.h                    |    6 +-
 src/pld/xilinx_bit.c                 |    2 +-
 src/pld/xilinx_bit.h                 |    6 +-
 src/server/gdb_server.c              |  166 ++++++++--------
 src/server/gdb_server.h              |   14 +-
 src/server/server.c                  |   34 ++--
 src/server/server.h                  |   22 +-
 src/server/tcl_server.c              |   30 ++--
 src/server/telnet_server.c           |   38 ++--
 src/server/telnet_server.h           |    8 +-
 src/svf/svf.c                        |   46 +++---
 src/target/algorithm.c               |    8 +-
 src/target/algorithm.h               |   16 +-
 src/target/arm11.c                   |  212 ++++++++++----------
 src/target/arm11.h                   |   26 ++--
 src/target/arm11_dbgtap.c            |   84 ++++----
 src/target/arm11_dbgtap.h            |   52 +++---
 src/target/arm720t.c                 |   80 ++++----
 src/target/arm720t.h                 |   14 +-
 src/target/arm7_9_common.c           |  270 +++++++++++++-------------
 src/target/arm7_9_common.h           |  122 ++++++------
 src/target/arm7tdmi.c                |  144 +++++++-------
 src/target/arm7tdmi.h                |   12 +-
 src/target/arm920t.c                 |  118 ++++++------
 src/target/arm920t.h                 |   40 ++--
 src/target/arm926ejs.c               |  102 +++++-----
 src/target/arm926ejs.h               |   28 ++--
 src/target/arm966e.c                 |   34 ++--
 src/target/arm966e.h                 |   18 +-
 src/target/arm9tdmi.c                |  160 ++++++++--------
 src/target/arm9tdmi.h                |   50 +++---
 src/target/arm_adi_v5.c              |   76 ++++----
 src/target/arm_adi_v5.h              |   64 +++---
 src/target/arm_disassembler.c        |  116 ++++++------
 src/target/arm_disassembler.h        |   38 ++--
 src/target/arm_jtag.c                |   12 +-
 src/target/arm_jtag.h                |   12 +-
 src/target/arm_simulator.c           |   22 +-
 src/target/arm_simulator.h           |    6 +-
 src/target/armv4_5.c                 |   58 +++---
 src/target/armv4_5.h                 |   48 +++---
 src/target/armv4_5_cache.c           |    4 +-
 src/target/armv4_5_cache.h           |   18 +-
 src/target/armv4_5_mmu.c             |    8 +-
 src/target/armv4_5_mmu.h             |   28 ++--
 src/target/armv7a.c                  |   48 +++---
 src/target/armv7a.h                  |   56 +++---
 src/target/armv7m.c                  |  126 ++++++------
 src/target/armv7m.h                  |   64 +++---
 src/target/avrt.c                    |   90 +++++-----
 src/target/avrt.h                    |   12 +-
 src/target/breakpoints.c             |   52 +++---
 src/target/breakpoints.h             |   28 ++--
 src/target/cortex_a8.c               |  226 +++++++++++-----------
 src/target/cortex_a8.h               |   30 ++--
 src/target/cortex_m3.c               |  244 ++++++++++++------------
 src/target/cortex_m3.h               |   28 ++--
 src/target/embeddedice.c             |   56 +++---
 src/target/embeddedice.h             |   34 ++--
 src/target/etb.c                     |   90 +++++-----
 src/target/etb.h                     |   20 +-
 src/target/etm.c                     |  146 +++++++-------
 src/target/etm.h                     |   48 +++---
 src/target/etm_dummy.c               |   14 +-
 src/target/etm_dummy.h               |    2 +-
 src/target/fa526.c                   |   66 +++---
 src/target/feroceon.c                |  152 +++++++-------
 src/target/image.c                   |   88 ++++----
 src/target/image.h                   |   54 +++---
 src/target/mips32.c                  |   86 ++++----
 src/target/mips32.h                  |   58 +++---
 src/target/mips32_dmaacc.c           |   28 ++--
 src/target/mips32_dmaacc.h           |   16 +-
 src/target/mips32_pracc.c            |   45 +++--
 src/target/mips32_pracc.h            |   26 ++--
 src/target/mips_ejtag.c              |   34 ++--
 src/target/mips_ejtag.h              |   24 ++--
 src/target/mips_m4k.c                |  160 ++++++++--------
 src/target/mips_m4k.h                |   32 ++--
 src/target/oocd_trace.c              |   46 +++---
 src/target/oocd_trace.h              |    8 +-
 src/target/register.c                |   26 ++--
 src/target/register.h                |   42 ++--
 src/target/target.c                  |  364 +++++++++++++++++-----------------
 src/target/target.h                  |  192 +++++++++----------
 src/target/target_request.c          |   32 ++--
 src/target/target_request.h          |   10 +-
 src/target/target_type.h             |   74 ++++----
 src/target/trace.c                   |   14 +-
 src/target/trace.h                   |   14 +-
 src/target/xscale.c                  |  358 +++++++++++++++++-----------------
 src/target/xscale.h                  |   44 ++--
 src/xsvf/xsvf.c                      |    8 +-
 191 files changed, 4908 insertions(+), 4963 deletions(-)


hooks/post-receive
-- 
Main OpenOCD repository

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001775.html">[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.3.0-184-g99b57b6
</A></li>
	<LI>Next message: <A HREF="001777.html">[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.3.0-360-gef746e2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1776">[ date ]</a>
              <a href="thread.html#1776">[ thread ]</a>
              <a href="subject.html#1776">[ subject ]</a>
              <a href="author.html#1776">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-svn">More information about the openocd-svn
mailing list</a><br>
</body></html>
