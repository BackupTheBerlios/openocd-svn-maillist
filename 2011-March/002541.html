<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-797-g33a17fd
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-svn/2011-March/index.html" >
   <LINK REL="made" HREF="mailto:openocd-svn%40lists.berlios.de?Subject=Re%3A%20%5Bopenocd-svn%5D%20Main%20OpenOCD%20repository%20branch%2C%20master%2C%0A%09updated.%20v0.4.0-797-g33a17fd&In-Reply-To=%3Cmailman.26.1331736153.7625.openocd-svn%40lists.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002540.html">
   <LINK REL="Next"  HREF="002542.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-797-g33a17fd</H1>
    <B>&#216;yvind Harboe</B> 
    <A HREF="mailto:openocd-svn%40lists.berlios.de?Subject=Re%3A%20%5Bopenocd-svn%5D%20Main%20OpenOCD%20repository%20branch%2C%20master%2C%0A%09updated.%20v0.4.0-797-g33a17fd&In-Reply-To=%3Cmailman.26.1331736153.7625.openocd-svn%40lists.berlios.de%3E"
       TITLE="[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-797-g33a17fd">gowinex at users.sourceforge.net
       </A><BR>
    <I>Thu Mar 17 07:26:32 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="002540.html">[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-794-g9eeb02c
</A></li>
        <LI>Next message: <A HREF="002542.html">[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-798-g9f17b30
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2541">[ date ]</a>
              <a href="thread.html#2541">[ thread ]</a>
              <a href="subject.html#2541">[ subject ]</a>
              <a href="author.html#2541">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;Main OpenOCD repository&quot;.

The branch, master has been updated
       via  33a17fd35995a7f679f92600055a8f55ae380022 (commit)
       via  582b4195a99a21caa9522713fae659621137e0f9 (commit)
       via  9b1d38707c1d407a72c5b6d8bfd30240a9d7dd34 (commit)
      from  9eeb02c16510629f2431cf78c0fec00667db4fe6 (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit 33a17fd35995a7f679f92600055a8f55ae380022
Author: Uwe Hermann &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">uwe at hermann-uwe.de</A>&gt;
Date:   Thu Mar 17 03:22:12 2011 +0100

    Fix a bunch of typos.
    
    Fix a bunch of typos.
    
    Most are in code comments, so nothing should break. UNKOWN_COMMAND and
    CMD_UNKOWN are not used elsewhere, so correcting the spelling should
    also not break anything.

diff --git a/src/flash/nand/mx2.c b/src/flash/nand/mx2.c
index 6bad4aa..77ae138 100644
--- a/src/flash/nand/mx2.c
+++ b/src/flash/nand/mx2.c
@@ -105,7 +105,7 @@ NAND_DEVICE_COMMAND_HANDLER(imx27_nand_device_command)
 	mx2_nf_info-&gt;flags.target_little_endian =
 	(nand-&gt;target-&gt;endianness == TARGET_LITTLE_ENDIAN);
 	/*
-	 * testing host endianess
+	 * testing host endianness
 	 */
 	x = 1;
 	if (*(char *) &amp;x == 1)
diff --git a/src/flash/nand/mx3.c b/src/flash/nand/mx3.c
index 41f08b5..45591e3 100644
--- a/src/flash/nand/mx3.c
+++ b/src/flash/nand/mx3.c
@@ -100,7 +100,7 @@ NAND_DEVICE_COMMAND_HANDLER(imx31_nand_device_command)
 	mx3_nf_info-&gt;flags.target_little_endian =
 	(nand-&gt;target-&gt;endianness == TARGET_LITTLE_ENDIAN);
 	/*
-	* testing host endianess
+	* testing host endianness
 	*/
 	{
 	int x = 1;
diff --git a/src/flash/nor/at91sam3.c b/src/flash/nor/at91sam3.c
index f895935..0b71e81 100644
--- a/src/flash/nor/at91sam3.c
+++ b/src/flash/nor/at91sam3.c
@@ -2684,7 +2684,7 @@ showall:
 			   (0 == strcmp(&quot;clear&quot;, CMD_ARGV[0]))) { // quietly accept both
 		r = FLASHD_ClrGPNVM(&amp;(pChip-&gt;details.bank[0]), who);
 	} else {
-		command_print(CMD_CTX, &quot;Unkown command: %s&quot;, CMD_ARGV[0]);
+		command_print(CMD_CTX, &quot;Unknown command: %s&quot;, CMD_ARGV[0]);
 		r = ERROR_COMMAND_SYNTAX_ERROR;
 	}
 	return r;
diff --git a/src/flash/nor/stellaris.c b/src/flash/nor/stellaris.c
index 6a81047..e57943c 100644
--- a/src/flash/nor/stellaris.c
+++ b/src/flash/nor/stellaris.c
@@ -841,7 +841,7 @@ static int stellaris_protect(struct flash_bank *bank, int set, int first, int la
 	 * REVISIT DustDevil-A0 parts have an erratum making FMPPE commits
 	 * inadvisable ... it makes future mass erase operations fail.
 	 */
-	LOG_WARNING(&quot;Flash protection cannot be removed once commited, commit is NOT executed !&quot;);
+	LOG_WARNING(&quot;Flash protection cannot be removed once committed, commit is NOT executed !&quot;);
 	/* target_write_u32(target, FLASH_FMC, FMC_WRKEY | FMC_COMT); */
 
 	/* Wait until erase complete */
diff --git a/src/jtag/drivers/buspirate.c b/src/jtag/drivers/buspirate.c
index 836a4d1..7813f33 100644
--- a/src/jtag/drivers/buspirate.c
+++ b/src/jtag/drivers/buspirate.c
@@ -45,7 +45,7 @@ static void buspirate_scan(bool ir_scan, enum scan_type type,
 	uint8_t *buffer, int scan_size, struct scan_command *command);
 
 
-#define CMD_UNKOWN        0x00
+#define CMD_UNKNOWN       0x00
 #define CMD_PORT_MODE     0x01
 #define CMD_FEATURE       0x02
 #define CMD_READ_ADCS     0x03
diff --git a/src/jtag/drivers/usbprog.c b/src/jtag/drivers/usbprog.c
index cc78555..17b0116 100644
--- a/src/jtag/drivers/usbprog.c
+++ b/src/jtag/drivers/usbprog.c
@@ -54,7 +54,7 @@ static void usbprog_path_move(struct pathmove_command *cmd);
 static void usbprog_runtest(int num_cycles);
 static void usbprog_scan(bool ir_scan, enum scan_type type, uint8_t *buffer, int scan_size);
 
-#define UNKOWN_COMMAND	0x00
+#define UNKNOWN_COMMAND	0x00
 #define PORT_DIRECTION	0x01
 #define PORT_SET		0x02
 #define PORT_GET		0x03
diff --git a/src/server/startup.tcl b/src/server/startup.tcl
index 7801d1b..64ace40 100644
--- a/src/server/startup.tcl
+++ b/src/server/startup.tcl
@@ -1,6 +1,6 @@
 # Defines basic Tcl procs for OpenOCD server modules
 
-# Handle GDB 'R' packet. Can be overriden by configuration script,
+# Handle GDB 'R' packet. Can be overridden by configuration script,
 # but it's not something one would expect target scripts to do
 # normally
 proc ocd_gdb_restart {target_id} {
diff --git a/src/svf/svf.c b/src/svf/svf.c
index 6acf032..0cca768 100644
--- a/src/svf/svf.c
+++ b/src/svf/svf.c
@@ -402,7 +402,7 @@ COMMAND_HANDLER(handle_svf_command)
 
 	svf_buffer_index = 0;
 	// double the buffer size
-	// in case current command cannot be commited, and next command is a bit scan command
+	// in case current command cannot be committed, and next command is a bit scan command
 	// here is 32K bits for this big scan command, it should be enough
 	// buffer will be reallocated if buffer size is not enough
 	svf_tdi_buffer = (uint8_t *)malloc(2 * SVF_MAX_BUFFER_SIZE_TO_COMMIT);
diff --git a/src/target/armv7m.c b/src/target/armv7m.c
index 4fcde16..fff5dd8 100644
--- a/src/target/armv7m.c
+++ b/src/target/armv7m.c
@@ -315,7 +315,7 @@ static int armv7m_run_and_wait(struct target *target, uint32_t entry_point, int
 	armv7m-&gt;load_core_reg_u32(target, ARMV7M_REGISTER_CORE_GP, 15, &amp;pc);
 	if (exit_point &amp;&amp; (pc != exit_point))
 	{
-		LOG_DEBUG(&quot;failed algoritm halted at 0x%&quot; PRIx32 &quot; &quot;, pc);
+		LOG_DEBUG(&quot;failed algorithm halted at 0x%&quot; PRIx32 &quot; &quot;, pc);
 		return ERROR_TARGET_TIMEOUT;
 	}
 
diff --git a/src/target/image.c b/src/target/image.c
index b0d957f..454fc6c 100644
--- a/src/target/image.c
+++ b/src/target/image.c
@@ -431,7 +431,7 @@ static int image_elf_read_headers(struct image *image)
 	if ((elf-&gt;endianness != ELFDATA2LSB)
 		 &amp;&amp;(elf-&gt;endianness != ELFDATA2MSB))
 	{
-		LOG_ERROR(&quot;invalid ELF file, unknown endianess setting&quot;);
+		LOG_ERROR(&quot;invalid ELF file, unknown endianness setting&quot;);
 		return ERROR_IMAGE_FORMAT_ERROR;
 	}
 
diff --git a/src/target/mips32.c b/src/target/mips32.c
index e48a040..79215b5 100644
--- a/src/target/mips32.c
+++ b/src/target/mips32.c
@@ -351,7 +351,7 @@ static int mips32_run_and_wait(struct target *target, uint32_t entry_point,
 	pc = buf_get_u32(mips32-&gt;core_cache-&gt;reg_list[MIPS32_PC].value, 0, 32);
 	if (exit_point &amp;&amp; (pc != exit_point))
 	{
-		LOG_DEBUG(&quot;failed algoritm halted at 0x%&quot; PRIx32 &quot; &quot;, pc);
+		LOG_DEBUG(&quot;failed algorithm halted at 0x%&quot; PRIx32 &quot; &quot;, pc);
 		return ERROR_TARGET_TIMEOUT;
 	}
 
diff --git a/src/target/target.c b/src/target/target.c
index 3a6c6bb..be42b33 100644
--- a/src/target/target.c
+++ b/src/target/target.c
@@ -1522,7 +1522,7 @@ int target_checksum_memory(struct target *target, uint32_t address, uint32_t siz
 			return retval;
 		}
 
-		/* convert to target endianess */
+		/* convert to target endianness */
 		for (i = 0; i &lt; (size/sizeof(uint32_t)); i++)
 		{
 			uint32_t target_data;
diff --git a/src/target/target.h b/src/target/target.h
index 2bf9668..d6e7431 100644
--- a/src/target/target.h
+++ b/src/target/target.h
@@ -84,7 +84,7 @@ enum target_debug_reason
 	DBG_REASON_UNDEFINED = 6
 };
 
-enum target_endianess
+enum target_endianness
 {
 	TARGET_ENDIAN_UNKNOWN = 0,
 	TARGET_BIG_ENDIAN = 1, TARGET_LITTLE_ENDIAN = 2
@@ -139,7 +139,7 @@ struct target
 	uint32_t backup_working_area;			/* whether the content of the working area has to be preserved */
 	struct working_area *working_areas;/* list of allocated working areas */
 	enum target_debug_reason debug_reason;/* reason why the target entered debug state */
-	enum target_endianess endianness;	/* target endianess */
+	enum target_endianness endianness;	/* target endianness */
 	// also see: target_state_name()
 	enum target_state state;			/* the current backend-state (running, halted, ...) */
 	struct reg_cache *reg_cache;		/* the first register cache of the target (core regs) */

commit 582b4195a99a21caa9522713fae659621137e0f9
Author: &#195;&#152;yvind Harboe &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">oyvind.harboe at zylin.com</A>&gt;
Date:   Mon Mar 14 15:32:14 2011 +0100

    dsp563xx: fix alignment warnings
    
    Signed-off-by: &#195;&#152;yvind Harboe &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">oyvind.harboe at zylin.com</A>&gt;

diff --git a/src/target/dsp563xx.c b/src/target/dsp563xx.c
index cdfa79b..6cde152 100644
--- a/src/target/dsp563xx.c
+++ b/src/target/dsp563xx.c
@@ -1393,7 +1393,7 @@ static int dsp563xx_read_memory_core(struct target *target, int mem_type, uint32
 			return err;
 		if ((err = dsp563xx_once_execute_sw_ir(target-&gt;tap, 0, 0x08D13C)) != ERROR_OK)
 			return err;
-		if ((err = dsp563xx_once_reg_read(target-&gt;tap, 0, DSP563XX_ONCE_OGDBR, (uint32_t*)b)) != ERROR_OK)
+		if ((err = dsp563xx_once_reg_read(target-&gt;tap, 0, DSP563XX_ONCE_OGDBR, (uint32_t*)(void *)b)) != ERROR_OK)
 			return err;
 		b += 4;
 	}
@@ -1409,7 +1409,7 @@ static int dsp563xx_read_memory_core(struct target *target, int mem_type, uint32
 
 	for (i = 0; i &lt; x; i++)
 	{
-		data = *((uint32_t*)b) &amp; 0x00FFFFFF;
+		data = buf_get_u32(b, 0, 32) &amp; 0x00FFFFFF;
 //		LOG_DEBUG(&quot;R: %08X&quot;, *((uint32_t*)b));
 		target_buffer_set_u32(target, b, data);
 		b += 4;
@@ -1466,8 +1466,8 @@ static int dsp563xx_read_memory(struct target *target, int mem_type, uint32_t ad
 
 	for(i=0,i1=0;i&lt;count;i+=2,i1++)
 	{
-		((uint32_t*)buffer)[i] = ((uint32_t*)buffer_y)[i1];
-		((uint32_t*)buffer)[i+1] = ((uint32_t*)buffer_x)[i1];
+		buf_set_u32(buffer + i*sizeof(uint32_t), 0, 32, buf_get_u32(buffer_y+i1*sizeof(uint32_t), 0, 32));
+		buf_set_u32(buffer + (i + 1) *sizeof(uint32_t), 0, 32, buf_get_u32(buffer_x+i1*sizeof(uint32_t), 0, 32));
 	}
 
 	free(buffer_y);
@@ -1587,8 +1587,8 @@ static int dsp563xx_write_memory(struct target *target, int mem_type, uint32_t a
 
 	for(i=0,i1=0;i&lt;count;i+=2,i1++)
 	{
-		((uint32_t*)buffer_y)[i1] = ((uint32_t*)buffer)[i];
-		((uint32_t*)buffer_x)[i1] = ((uint32_t*)buffer)[i+1];
+		buf_set_u32(buffer_y + i1*sizeof(uint32_t), 0, 32, buf_get_u32(buffer+i*sizeof(uint32_t), 0, 32));
+		buf_set_u32(buffer_x + i1*sizeof(uint32_t), 0, 32, buf_get_u32(buffer+(i+1)*sizeof(uint32_t), 0, 32));
 	}
 
 	err = dsp563xx_write_memory_core(target,MEM_Y,address,size,count/2,buffer_y);

commit 9b1d38707c1d407a72c5b6d8bfd30240a9d7dd34
Author: &#195;&#152;yvind Harboe &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">oyvind.harboe at zylin.com</A>&gt;
Date:   Tue Mar 15 10:43:45 2011 +0100

    dsp563xx: fix bug in x buffer handling
    
    found by inspection.
    
    Signed-off-by: &#195;&#152;yvind Harboe &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">oyvind.harboe at zylin.com</A>&gt;

diff --git a/src/target/dsp563xx.c b/src/target/dsp563xx.c
index cb2025e..cdfa79b 100644
--- a/src/target/dsp563xx.c
+++ b/src/target/dsp563xx.c
@@ -1467,7 +1467,7 @@ static int dsp563xx_read_memory(struct target *target, int mem_type, uint32_t ad
 	for(i=0,i1=0;i&lt;count;i+=2,i1++)
 	{
 		((uint32_t*)buffer)[i] = ((uint32_t*)buffer_y)[i1];
-		((uint32_t*)buffer)[i] = ((uint32_t*)buffer_x)[i1];
+		((uint32_t*)buffer)[i+1] = ((uint32_t*)buffer_x)[i1];
 	}
 
 	free(buffer_y);

-----------------------------------------------------------------------

Summary of changes:
 src/flash/nand/mx2.c         |    2 +-
 src/flash/nand/mx3.c         |    2 +-
 src/flash/nor/at91sam3.c     |    2 +-
 src/flash/nor/stellaris.c    |    2 +-
 src/jtag/drivers/buspirate.c |    2 +-
 src/jtag/drivers/usbprog.c   |    2 +-
 src/server/startup.tcl       |    2 +-
 src/svf/svf.c                |    2 +-
 src/target/armv7m.c          |    2 +-
 src/target/dsp563xx.c        |   12 ++++++------
 src/target/image.c           |    2 +-
 src/target/mips32.c          |    2 +-
 src/target/target.c          |    2 +-
 src/target/target.h          |    4 ++--
 14 files changed, 20 insertions(+), 20 deletions(-)


hooks/post-receive
-- 
Main OpenOCD repository

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002540.html">[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-794-g9eeb02c
</A></li>
	<LI>Next message: <A HREF="002542.html">[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-798-g9f17b30
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2541">[ date ]</a>
              <a href="thread.html#2541">[ thread ]</a>
              <a href="subject.html#2541">[ subject ]</a>
              <a href="author.html#2541">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-svn">More information about the openocd-svn
mailing list</a><br>
</body></html>
