<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-583-ge7b2958
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-svn/2010-November/index.html" >
   <LINK REL="made" HREF="mailto:openocd-svn%40lists.berlios.de?Subject=Re%3A%20%5Bopenocd-svn%5D%20Main%20OpenOCD%20repository%20branch%2C%20master%2C%0A%09updated.%20v0.4.0-583-ge7b2958&In-Reply-To=%3CE1PFjXr-0006SQ-18%40sfp-scmshell-4.v30.ch3.sourceforge.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002426.html">
   <LINK REL="Next"  HREF="002428.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-583-ge7b2958</H1>
    <B>&#216;yvind Harboe</B> 
    <A HREF="mailto:openocd-svn%40lists.berlios.de?Subject=Re%3A%20%5Bopenocd-svn%5D%20Main%20OpenOCD%20repository%20branch%2C%20master%2C%0A%09updated.%20v0.4.0-583-ge7b2958&In-Reply-To=%3CE1PFjXr-0006SQ-18%40sfp-scmshell-4.v30.ch3.sourceforge.com%3E"
       TITLE="[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-583-ge7b2958">gowinex at users.sourceforge.net
       </A><BR>
    <I>Tue Nov  9 09:27:09 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="002426.html">[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-580-gfc4e001
</A></li>
        <LI>Next message: <A HREF="002428.html">[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-585-gaa4c140
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2427">[ date ]</a>
              <a href="thread.html#2427">[ thread ]</a>
              <a href="subject.html#2427">[ subject ]</a>
              <a href="author.html#2427">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;Main OpenOCD repository&quot;.

The branch, master has been updated
       via  e7b2958229c7e0d7e98e130764aa50d1ca9017d3 (commit)
       via  4747af362de04b508c91df4004d2aed5579c8a1c (commit)
       via  d220e22e6376fa67d85c9731a4165f86609390d8 (commit)
      from  fc4e001de34029ca6451038a351b433677d4f388 (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit e7b2958229c7e0d7e98e130764aa50d1ca9017d3
Author: Antonio Borneo &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">borneo.antonio at gmail.com</A>&gt;
Date:   Mon Nov 8 17:23:49 2010 +0800

    TCL scripts: replace &quot;puts&quot; with &quot;echo&quot;
    
    Signed-off-by: Antonio Borneo &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">borneo.antonio at gmail.com</A>&gt;

diff --git a/src/jtag/startup.tcl b/src/jtag/startup.tcl
index fdd3078..1779df5 100644
--- a/src/jtag/startup.tcl
+++ b/src/jtag/startup.tcl
@@ -30,7 +30,7 @@ proc init_reset { mode } {
 # documented nor supported except on ZY1000.
 
 proc power_restore {} {
-	puts &quot;Sensed power restore, running reset init and halting GDB.&quot;
+	echo &quot;Sensed power restore, running reset init and halting GDB.&quot;
 	reset init
 	
 	# Halt GDB so user can deal with a detected power restore.
@@ -47,7 +47,7 @@ proc power_restore {} {
 add_help_text power_restore &quot;Overridable procedure run when power restore is detected. Runs 'reset init' by default.&quot;
 
 proc power_dropout {} {
-	puts &quot;Sensed power dropout.&quot;
+	echo &quot;Sensed power dropout.&quot;
 }
 
 #########
@@ -56,7 +56,7 @@ proc power_dropout {} {
 # documented nor supported except on ZY1000.
 
 proc srst_deasserted {} {
-	puts &quot;Sensed nSRST deasserted, running reset init and halting GDB.&quot;
+	echo &quot;Sensed nSRST deasserted, running reset init and halting GDB.&quot;
 	reset init
 
 	# Halt GDB so user can deal with a detected reset.
@@ -73,7 +73,7 @@ proc srst_deasserted {} {
 add_help_text srst_deasserted &quot;Overridable procedure run when srst deassert is detected. Runs 'reset init' by default.&quot;
 
 proc srst_asserted {} {
-	puts &quot;Sensed nSRST asserted.&quot;
+	echo &quot;Sensed nSRST asserted.&quot;
 }
 
 # measure actual JTAG clock
diff --git a/tcl/bitsbytes.tcl b/tcl/bitsbytes.tcl
index 3f65c20..2c4fd29 100644
--- a/tcl/bitsbytes.tcl
+++ b/tcl/bitsbytes.tcl
@@ -54,7 +54,7 @@ proc show_normalize_bitfield { VALUE MSB LSB } {
     set m [create_mask $MSB $LSB]
     set mr [expr $VALUE &amp; $m]
     set sr [expr $mr &gt;&gt; $LSB]
-    puts [format &quot;((0x%08x &amp; 0x%08x) -&gt; 0x%08x) &gt;&gt; %2d =&gt; (0x%x) %5d &quot; $VALUE $m $mr $LSB $sr $sr]
+    echo [format &quot;((0x%08x &amp; 0x%08x) -&gt; 0x%08x) &gt;&gt; %2d =&gt; (0x%x) %5d &quot; $VALUE $m $mr $LSB $sr $sr]
    return $sr
 }
 
diff --git a/tcl/board/at91eb40a.cfg b/tcl/board/at91eb40a.cfg
index 14f21a1..dc5aacb 100644
--- a/tcl/board/at91eb40a.cfg
+++ b/tcl/board/at91eb40a.cfg
@@ -53,7 +53,7 @@ flash bank $_FLASHNAME ecosflash 0x01000000 0x200000 2 2 $_TARGETNAME ecos/at91e
 $_TARGETNAME configure -work-area-phys 0x00030000 -work-area-size 0x10000 -work-area-backup 0
 
 $_TARGETNAME configure -event reset-init {
-	puts &quot;Running reset init script for AT91EB40A&quot;
+	echo &quot;Running reset init script for AT91EB40A&quot;
 	# Reset script for AT91EB40a
 	reg cpsr 0x000000D3
 	mww 0xFFE00020 0x1
diff --git a/tcl/board/dm355evm.cfg b/tcl/board/dm355evm.cfg
index 02c4c86..0c971e9 100644
--- a/tcl/board/dm355evm.cfg
+++ b/tcl/board/dm355evm.cfg
@@ -18,7 +18,7 @@ $_TARGETNAME configure -event reset-init { dm355evm_init }
 proc dm355evm_init {} {
 	global dm355
 
-	puts &quot;Initialize DM355 EVM board&quot;
+	echo &quot;Initialize DM355 EVM board&quot;
 
 	# CLKIN	= 24 MHz ... can't talk quickly to ARM yet
 	jtag_rclk 1500
diff --git a/tcl/board/dm6446evm.cfg b/tcl/board/dm6446evm.cfg
index dcd1c4e..0d2f6a4 100644
--- a/tcl/board/dm6446evm.cfg
+++ b/tcl/board/dm6446evm.cfg
@@ -59,7 +59,7 @@ $_TARGETNAME configure -event reset-init { dm6446evm_init }
 #
 proc dm6446evm_init {} {
 
-	puts &quot;Initialize DM6446 EVM board&quot;
+	echo &quot;Initialize DM6446 EVM board&quot;
 
 	# FIXME initialize everything:
 	#  - PLL1
diff --git a/tcl/board/ethernut3.cfg b/tcl/board/ethernut3.cfg
index 34e9b72..ad45527 100644
--- a/tcl/board/ethernut3.cfg
+++ b/tcl/board/ethernut3.cfg
@@ -77,10 +77,10 @@ proc board_remap {{VERBOSE 0}} {
 	mww 0xffe00020 0x00000001
 
 	if {$VERBOSE != 0} {
-		puts &quot;0x00000000 RAM&quot;
-		puts &quot;0x10000000 Flash&quot;
-		puts &quot;0x20000000 Ethernet&quot;
-		puts &quot;0x21000000 CPLD&quot;
-		puts &quot;0x22000000 Expansion&quot;
+		echo &quot;0x00000000 RAM&quot;
+		echo &quot;0x10000000 Flash&quot;
+		echo &quot;0x20000000 Ethernet&quot;
+		echo &quot;0x21000000 CPLD&quot;
+		echo &quot;0x22000000 Expansion&quot;
 	}
 }
diff --git a/tcl/board/lubbock.cfg b/tcl/board/lubbock.cfg
index b58ad5a..298954c 100644
--- a/tcl/board/lubbock.cfg
+++ b/tcl/board/lubbock.cfg
@@ -38,7 +38,7 @@ proc hexled {u32} {
 
 proc lubbock_init {target} {
 
-	puts &quot;Initialize PXA255 Lubbock board&quot;
+	echo &quot;Initialize PXA255 Lubbock board&quot;
 
 	# (1) pinmux
 
diff --git a/tcl/board/olimex_sam9_l9260.cfg b/tcl/board/olimex_sam9_l9260.cfg
index 7c4b2cc..5c16ed2 100644
--- a/tcl/board/olimex_sam9_l9260.cfg
+++ b/tcl/board/olimex_sam9_l9260.cfg
@@ -35,7 +35,7 @@ $_TARGETNAME configure -event reset-init {
 	##
 	# Clock configuration for 99.328 MHz main clock.
 	##
-    puts &quot;Setting up clock&quot;
+    echo &quot;Setting up clock&quot;
 	mww 0xfffffc20 0x00004001 # CKGR_MOR : enable main oscillator, 512 slow clock startup
 	sleep 20                  # wait 20 ms (need 15.6 ms for startup)
 	mww 0xfffffc30 0x00000001 # PMC_MCKR : switch to main oscillator (18.432 MHz)
@@ -54,7 +54,7 @@ $_TARGETNAME configure -event reset-init {
 	##
 	# SDRAM configuration for 2 x Samsung K4S561632J-UC75, 4M x 16Bit x 4 Banks.
 	##
-    puts &quot;Configuring SDRAM&quot;
+    echo &quot;Configuring SDRAM&quot;
 	mww 0xfffff870 0xffff0000 # PIOC_ASR : select peripheral function for D15..D31
 	mww 0xfffff804 0xffff0000 # PIOC_PDR : disable PIO function for D15..D31
 	
@@ -92,7 +92,7 @@ $_TARGETNAME configure -event reset-init {
     ##
     # NAND Flash Configuration for 1 x Samsung K9F4G08U0M, 512M x 8Bit.
     ##
-    puts &quot;Configuring NAND flash&quot;
+    echo &quot;Configuring NAND flash&quot;
     mww 0xfffffc10 0x00000010 ;# PMC_PCER : enable PIOC clock
     mww 0xfffff800 0x00006000 ;# PIOC_PER : enable PIO function for 13(RDY/~BSY) and 14(~CS)
     mww 0xfffff810 0x00004000 ;# PIOC_OER : enable output on 14
@@ -116,7 +116,7 @@ $_TARGETNAME configure -event reset-init {
     ##
     # Dataflash configuration for 1 x Atmel AT45DB161D, 16Mbit
     ##
-    puts &quot;Setting up dataflash&quot;
+    echo &quot;Setting up dataflash&quot;
     mww 0xfffff404 0x00000807 ;# PIOA_PDR : disable PIO function for 0(SPI0_MISO), 1(SPI0_MOSI), 
                                #            2(SPI0_SPCK), and 11(SPI0_NPCS1)
     mww 0xfffff470 0x00000007 ;# PIOA_ASR : select peripheral A function for 0, 1, and 2
diff --git a/tcl/board/telo.cfg b/tcl/board/telo.cfg
index 1c0ad76..119373c 100644
--- a/tcl/board/telo.cfg
+++ b/tcl/board/telo.cfg
@@ -31,24 +31,24 @@ $_TARGETNAME configure -event reset-init {
 	setupTelo
 	#turn up the JTAG speed
 	adapter_khz 3000
-	puts &quot;JTAG speek now 3MHz&quot;
-	puts &quot;type helpC100 to get help on C100&quot;
+	echo &quot;JTAG speek now 3MHz&quot;
+	echo &quot;type helpC100 to get help on C100&quot;
 }
 
 $_TARGETNAME configure -event reset-deassert-post {
 	# Force target into ARM state.
 #	soft_reset_halt # not implemented on ARM11
-	puts &quot;Detected SRSRT asserted on C100.CPU&quot;
+	echo &quot;Detected SRSRT asserted on C100.CPU&quot;
 
 }
 
 $_TARGETNAME configure -event reset-assert-post {
-  puts &quot;Assering reset&quot;
+  echo &quot;Assering reset&quot;
   #sleep 10
 }
 
-proc power_restore {} { puts &quot;Sensed power restore. No action.&quot; }
-proc srst_deasserted {} { puts &quot;Sensed nSRST deasserted. No action.&quot; }
+proc power_restore {} { echo &quot;Sensed power restore. No action.&quot; }
+proc srst_deasserted {} { echo &quot;Sensed nSRST deasserted. No action.&quot; }
 
 
 # boots from NOR on CS0:  8 MBytes CFI flash, 16-bit bus
diff --git a/tcl/board/zy1000.cfg b/tcl/board/zy1000.cfg
index d2561e9..63334ee 100644
--- a/tcl/board/zy1000.cfg
+++ b/tcl/board/zy1000.cfg
@@ -85,11 +85,11 @@ proc production_info {} {
 # Progress messages are output via puts
 proc production {firmwarefile serialnumber} {
 	if {[string length $serialnumber]!=12} {
-		puts &quot;Invalid serial number&quot;
+		echo &quot;Invalid serial number&quot;
 		return
 	}
 
-	puts &quot;Power cycling target&quot;
+	echo &quot;Power cycling target&quot;
 	power off
 	sleep 3000
 	power on
@@ -99,10 +99,10 @@ proc production {firmwarefile serialnumber} {
 	verify_image $firmwarefile 0x1000000 bin
 
 	# Big endian... weee!!!!
-	puts &quot;Setting MAC number to $serialnumber&quot;
+	echo &quot;Setting MAC number to $serialnumber&quot;
 	flash fillw [expr 0x1030000-0x8] &quot;0x[string range $serialnumber 2 3][string range $serialnumber 0 1]0000&quot; 1
 	flash fillw [expr 0x1030000-0x4] &quot;0x[string range $serialnumber 10 11][string range $serialnumber 8 9][string range $serialnumber 6 7][string range $serialnumber 4 5]&quot; 1
-	puts &quot;Production successful&quot;
+	echo &quot;Production successful&quot;
 }
 
 
diff --git a/tcl/chip/atmel/at91/aic.tcl b/tcl/chip/atmel/at91/aic.tcl
index 366be6d..6dae36a 100644
--- a/tcl/chip/atmel/at91/aic.tcl
+++ b/tcl/chip/atmel/at91/aic.tcl
@@ -57,33 +57,33 @@ proc show_AIC { } {
     if [catch { mem2array aaa 32 $AIC_SMR [expr 32 * 4] } msg ] {
 	error [format &quot;%s (%s)&quot; $msg AIC_SMR]
     }
-    puts &quot;AIC_SMR: Mode &amp; Type&quot;
+    echo &quot;AIC_SMR: Mode &amp; Type&quot;
     global AT91C_ID
     for { set x 0 } { $x &lt; 32 } {  } {
-	puts -nonewline &quot;   &quot;
-	puts -nonewline [format &quot;%2d: %5s 0x%08x | &quot; $x $AT91C_ID($x) $aaa($x)]
+	echo -n &quot;   &quot;
+	echo -n [format &quot;%2d: %5s 0x%08x | &quot; $x $AT91C_ID($x) $aaa($x)]
 	incr x
-	puts -nonewline [format &quot;%2d: %5s 0x%08x | &quot; $x $AT91C_ID($x) $aaa($x)]
+	echo -n [format &quot;%2d: %5s 0x%08x | &quot; $x $AT91C_ID($x) $aaa($x)]
 	incr x
-	puts -nonewline [format &quot;%2d: %5s 0x%08x | &quot; $x $AT91C_ID($x) $aaa($x)]
+	echo -n [format &quot;%2d: %5s 0x%08x | &quot; $x $AT91C_ID($x) $aaa($x)]
 	incr x
-	puts  [format &quot;%2d: %5s 0x%08x&quot;  $x $AT91C_ID($x) $aaa($x)]
+	echo  [format &quot;%2d: %5s 0x%08x&quot;  $x $AT91C_ID($x) $aaa($x)]
 	incr x
     }
     global AIC_SVR
     if [catch { mem2array aaa 32 $AIC_SVR [expr 32 * 4] } msg ] {
 	error [format &quot;%s (%s)&quot; $msg AIC_SVR]
     }
-    puts &quot;AIC_SVR: Vectors&quot;
+    echo &quot;AIC_SVR: Vectors&quot;
     for { set x 0 } { $x &lt; 32 } {  } {
-	puts -nonewline &quot;   &quot;
-	puts -nonewline [format &quot;%2d: %5s 0x%08x | &quot; $x $AT91C_ID($x) $aaa($x)]
+	echo -n &quot;   &quot;
+	echo -n [format &quot;%2d: %5s 0x%08x | &quot; $x $AT91C_ID($x) $aaa($x)]
 	incr x
-	puts -nonewline [format &quot;%2d: %5s 0x%08x | &quot; $x $AT91C_ID($x) $aaa($x)]
+	echo -n [format &quot;%2d: %5s 0x%08x | &quot; $x $AT91C_ID($x) $aaa($x)]
 	incr x
-	puts -nonewline [format &quot;%2d: %5s 0x%08x | &quot; $x $AT91C_ID($x) $aaa($x)]
+	echo -n [format &quot;%2d: %5s 0x%08x | &quot; $x $AT91C_ID($x) $aaa($x)]
 	incr x
-	puts [format &quot;%2d: %5s 0x%08x&quot; $x $AT91C_ID($x) $aaa($x)]
+	echo [format &quot;%2d: %5s 0x%08x&quot; $x $AT91C_ID($x) $aaa($x)]
 	incr x
     }
 
diff --git a/tcl/chip/atmel/at91/rtt.tcl b/tcl/chip/atmel/at91/rtt.tcl
index 433cfe3..8be6a56 100644
--- a/tcl/chip/atmel/at91/rtt.tcl
+++ b/tcl/chip/atmel/at91/rtt.tcl
@@ -18,16 +18,16 @@ proc show_RTTC_RTMR_helper { NAME ADDR VAL } {
     # Nasty hack, make this a float by tacking a .0 on the end
     # otherwise, jim makes the value an integer
     set f [expr $AT91C_SLOWOSC_FREQ.0 / $rtpres.0]
-    puts [format &quot;\tPrescale value: 0x%04x (%5d) =&gt; %f Hz&quot; $rtpres $rtpres $f]
+    echo [format &quot;\tPrescale value: 0x%04x (%5d) =&gt; %f Hz&quot; $rtpres $rtpres $f]
     if { $VAL &amp; $BIT16 } {
-	puts &quot;\tBit16 -&gt; Alarm IRQ Enabled&quot;
+	echo &quot;\tBit16 -&gt; Alarm IRQ Enabled&quot;
     } else {
-	puts &quot;\tBit16 -&gt; Alarm IRQ Disabled&quot;
+	echo &quot;\tBit16 -&gt; Alarm IRQ Disabled&quot;
     }
     if { $VAL &amp; $BIT17 } {
-	puts &quot;\tBit17 -&gt; RTC Inc IRQ Enabled&quot;
+	echo &quot;\tBit17 -&gt; RTC Inc IRQ Enabled&quot;
     } else {
-	puts &quot;\tBit17 -&gt; RTC Inc IRQ Disabled&quot;
+	echo &quot;\tBit17 -&gt; RTC Inc IRQ Disabled&quot;
     }
     # Bit 18 is write only.
 }
@@ -35,14 +35,14 @@ proc show_RTTC_RTMR_helper { NAME ADDR VAL } {
 proc show_RTTC_RTSR_helper { NAME ADDR VAL } {
     global BIT0 BIT1
     if { $VAL &amp; $BIT0 } {
-	puts &quot;\tBit0 -&gt; ALARM PENDING&quot;
+	echo &quot;\tBit0 -&gt; ALARM PENDING&quot;
     } else {
-	puts &quot;\tBit0 -&gt; alarm not pending&quot;
+	echo &quot;\tBit0 -&gt; alarm not pending&quot;
     }
     if { $VAL &amp; $BIT1 } {
-	puts &quot;\tBit0 -&gt; RTINC PENDING&quot;
+	echo &quot;\tBit0 -&gt; RTINC PENDING&quot;
     } else {
-	puts &quot;\tBit0 -&gt; rtinc not pending&quot;
+	echo &quot;\tBit0 -&gt; rtinc not pending&quot;
     }
 }
 
diff --git a/tcl/chip/atmel/at91/usarts.tcl b/tcl/chip/atmel/at91/usarts.tcl
index f798fc4..6842029 100644
--- a/tcl/chip/atmel/at91/usarts.tcl
+++ b/tcl/chip/atmel/at91/usarts.tcl
@@ -41,9 +41,9 @@ proc show_mmr_USx_MR_helper { NAME ADDR VAL } {
 
     set x [show_normalize_bitfield $VAL 3 0]
     if { $x == 0 } {
-	puts &quot;\tNormal operation&quot;
+	echo &quot;\tNormal operation&quot;
     } else {
-	puts [format &quot;\tNon Normal operation mode: 0x%02x&quot; $x]
+	echo [format &quot;\tNon Normal operation mode: 0x%02x&quot; $x]
     }
 
     set x [show_normalize_bitfield $VAL 11 9]
@@ -61,17 +61,17 @@ proc show_mmr_USx_MR_helper { NAME ADDR VAL } {
 	    }
 	}
     }
-    puts [format &quot;\tParity: %s &quot; $s]
+    echo [format &quot;\tParity: %s &quot; $s]
 
     set x [expr 5 + [show_normalize_bitfield $VAL 7 6]]
-    puts [format &quot;\tDatabits: %d&quot; $x]
+    echo [format &quot;\tDatabits: %d&quot; $x]
 
     set x [show_normalize_bitfield $VAL 13 12]
     switch -exact $x {
-	0 { puts &quot;\tStop bits: 1&quot; }
-	1 { puts &quot;\tStop bits: 1.5&quot; }
-	2 { puts &quot;\tStop bits: 2&quot; }
-	3 { puts &quot;\tStop bits: Illegal/Reserved&quot; }
+	0 { echo &quot;\tStop bits: 1&quot; }
+	1 { echo &quot;\tStop bits: 1.5&quot; }
+	2 { echo &quot;\tStop bits: 2&quot; }
+	3 { echo &quot;\tStop bits: Illegal/Reserved&quot; }
     }
 }
 
diff --git a/tcl/chip/st/spear/quirk_no_srst.tcl b/tcl/chip/st/spear/quirk_no_srst.tcl
index df22764..fd02d07 100644
--- a/tcl/chip/st/spear/quirk_no_srst.tcl
+++ b/tcl/chip/st/spear/quirk_no_srst.tcl
@@ -37,9 +37,9 @@ proc sp_reset_deassert_post {} {
 	set bar(3) \\
 
 	poll on
-	puts &quot;====&gt; Press reset button on the board &lt;====&quot;
+	echo &quot;====&gt; Press reset button on the board &lt;====&quot;
 	for {set i 0} { [sp_is_halted] == 0 } { set i [expr $i + 1]} {
-		puts -nonewline &quot;$bar([expr $i &amp; 3])\r&quot;
+		echo -n &quot;$bar([expr $i &amp; 3])\r&quot;
 		sleep 200
 	}
 
diff --git a/tcl/chip/st/spear/spear3xx_ddr.tcl b/tcl/chip/st/spear/spear3xx_ddr.tcl
index eb1c4b0..a804cdc 100644
--- a/tcl/chip/st/spear/spear3xx_ddr.tcl
+++ b/tcl/chip/st/spear/spear3xx_ddr.tcl
@@ -23,11 +23,11 @@ proc sp3xx_ddr_init {ddr_type} {
 	mww $ddr_size 0x87654321
 	mww 0x00000000 0x12345678
 	if {[expr [mrw 0x00000000] == 0x12345678 &amp;&amp; [mrw $ddr_size] == 0x87654321]} {
-		puts [format \
+		echo [format \
 			&quot;Double chip DDR memory. Total memory size 0x%08x byte&quot; \
 			[expr 2 * $ddr_size]]
 	} else {
-		puts [format \
+		echo [format \
 			&quot;Single chip DDR memory. Memory size 0x%08x byte&quot; \
 			$ddr_size]
 	}
diff --git a/tcl/mmr_helpers.tcl b/tcl/mmr_helpers.tcl
index 9029911..ce116e4 100644
--- a/tcl/mmr_helpers.tcl
+++ b/tcl/mmr_helpers.tcl
@@ -13,7 +13,7 @@ proc show_mmr32_reg { NAME } {
     set a [set [set NAME]]
 
     if ![catch { set v [memread32 $a] } msg ] {
-	puts [format &quot;%15s: (0x%08x): 0x%08x&quot; $NAME $a $v]
+	echo [format &quot;%15s: (0x%08x): 0x%08x&quot; $NAME $a $v]
 
 	# Was a helper defined?
 	set fn show_${NAME}_helper
@@ -43,18 +43,18 @@ proc show_mmr32_bits { NAMES VAL } {
     }
 
     for { set x 24 } { $x &gt;= 0 } { incr x -8 } {
-	puts -nonewline &quot;  &quot;
+	echo -n &quot;  &quot;
 	for { set y 7 } { $y &gt;= 0 } { incr y -1 } {
 	    set s $MYNAMES([expr $x + $y])
-	    puts -nonewline [format &quot;%2d: %-*s | &quot; [expr $x + $y] $w $s ]
+	    echo -n [format &quot;%2d: %-*s | &quot; [expr $x + $y] $w $s ]
 	}
-	puts &quot;&quot;
+	echo &quot;&quot;
 
-	puts -nonewline &quot;  &quot;
+	echo -n &quot;  &quot;
 	for { set y 7 } { $y &gt;= 0 } { incr y -1 } {
-	    puts -nonewline [format &quot;    %d%*s | &quot; [expr !!($VAL &amp; (1 &lt;&lt; ($x + $y)))] [expr $w -1] &quot;&quot;]
+	    echo -n [format &quot;    %d%*s | &quot; [expr !!($VAL &amp; (1 &lt;&lt; ($x + $y)))] [expr $w -1] &quot;&quot;]
 	}
-	puts &quot;&quot;
+	echo &quot;&quot;
     }
 }
 
@@ -68,5 +68,5 @@ proc show_mmr_bitfield { MSB LSB VAL FIELDNAME FIELDVALUES } {
     } else {
 	set sval &quot;&quot;
     }
-    puts [format &quot;%-15s: %d (0x%0*x) %s&quot; $FIELDNAME $nval $width $nval $sval ]
+    echo [format &quot;%-15s: %d (0x%0*x) %s&quot; $FIELDNAME $nval $width $nval $sval ]
 }
diff --git a/tcl/target/aduc702x.cfg b/tcl/target/aduc702x.cfg
index d58b723..dcb9c12 100644
--- a/tcl/target/aduc702x.cfg
+++ b/tcl/target/aduc702x.cfg
@@ -45,7 +45,7 @@ flash bank $_FLASHNAME aduc702x 0 0 0 0 $_TARGETNAME
 proc watchdog_service {} {
     global watchdog_hdl
     mww 0xffff036c 0
-#    puts &quot;watchdog!!&quot;
+#    echo &quot;watchdog!!&quot;
     set watchdog_hdl [after 500 watchdog_service]
 }
 
diff --git a/tcl/target/c100config.tcl b/tcl/target/c100config.tcl
index 17a9476..52efa83 100644
--- a/tcl/target/c100config.tcl
+++ b/tcl/target/c100config.tcl
@@ -8,7 +8,7 @@ proc config {label} {
 
 # show the value for the param. with label
 proc showconfig {label} {
-    puts [format &quot;0x%x&quot; [dict get [configC100] $label ]]
+    echo [format &quot;0x%x&quot; [dict get [configC100] $label ]]
 }
 
 # Telo board config
@@ -53,7 +53,7 @@ proc setupTelo {} {
 
 
 proc setupNOR {} {
-    puts &quot;Setting up NOR: 16MB, 16-bit wide bus, CS0&quot;
+    echo &quot;Setting up NOR: 16MB, 16-bit wide bus, CS0&quot;
     # this is taken from u-boot/boards/mindspeed/ooma-darwin/board.c:nor_hw_init()
     set EX_CSEN_REG	    [regs EX_CSEN_REG ]
     set EX_CS0_SEG_REG	    [regs EX_CS0_SEG_REG ]
@@ -99,7 +99,7 @@ proc bootNOR {} {
     resume
 }
 proc setupGPIO {} {
-    puts &quot;Setting up GPIO block for Telo&quot;
+    echo &quot;Setting up GPIO block for Telo&quot;
     # This is current setup for Telo (see sch. for details):
     #GPIO0 reset for FXS-FXO IC, leave as input, the IC has internal pullup
     #GPIO1 irq line for FXS-FXO
@@ -117,14 +117,14 @@ proc setupGPIO {} {
 }
 
 proc highGPIO5 {} {
-    puts &quot;GPIO5 high&quot;
+    echo &quot;GPIO5 high&quot;
     set GPIO_OUTPUT_REG		    [regs GPIO_OUTPUT_REG]
     # set GPIO5=1
     mmw $GPIO_OUTPUT_REG [expr 1 &lt;&lt; 5] 0x0
 }
 
 proc lowGPIO5 {} {
-    puts &quot;GPIO5 low&quot;
+    echo &quot;GPIO5 low&quot;
     set GPIO_OUTPUT_REG		    [regs GPIO_OUTPUT_REG]
     # set GPIO5=0
     mmw $GPIO_OUTPUT_REG 0x0 [expr 1 &lt;&lt; 5]
@@ -161,12 +161,12 @@ proc ooma_board_detect {} {
 
     # read the current value of the BOOTSRAP pins
     set tmp [mrw $GPIO_BOOTSTRAP_REG]
-    puts [format &quot;GPIO_BOOTSTRAP_REG  (0x%x): 0x%x&quot; $GPIO_BOOTSTRAP_REG $tmp]
+    echo [format &quot;GPIO_BOOTSTRAP_REG  (0x%x): 0x%x&quot; $GPIO_BOOTSTRAP_REG $tmp]
     # extract the GPBP bits
     set gpbt [expr ($tmp &amp;0x1C00) &gt;&gt; 10 | ($tmp &amp; 0x40) &gt;&gt;3]
 
     # display board ID
-    puts [format &quot;This is %s (0x%x)&quot; [dict get [boardID $gpbt] $gpbt name] $gpbt]
+    echo [format &quot;This is %s (0x%x)&quot; [dict get [boardID $gpbt] $gpbt name] $gpbt]
     # show it on serial console
     putsUART0 [format &quot;This is %s (0x%x)\n&quot; [dict get [boardID $gpbt] $gpbt name] $gpbt]
     # return the ddr2 size, used to configure DDR2 on a given board.
@@ -228,13 +228,13 @@ proc configureDDR2regs_256M {} {
     # start DDRC
     mw64bit $DENALI_CTL_02_DATA [expr $DENALI_CTL_02_VAL | (1 &lt;&lt; 32)]
     # wait int_status[2] (DRAM init complete)
-    puts -nonewline &quot;Waiting for DDR2 controller to init...&quot;
+    echo -n &quot;Waiting for DDR2 controller to init...&quot;
     set tmp [mrw [expr $DENALI_CTL_08_DATA + 4]]
     while { [expr $tmp &amp; 0x040000] == 0 } {
 	sleep 1
 	set tmp [mrw [expr $DENALI_CTL_08_DATA + 4]]
     }
-    puts &quot;done.&quot;
+    echo &quot;done.&quot;
 
     # do ddr2 training sequence
     # TBD (for now, if you need it, run trainDDR command)
@@ -296,7 +296,7 @@ proc configureDDR2regs_128M {} {
     # start DDRC
     mw64bit $DENALI_CTL_02_DATA [expr $DENALI_CTL_02_VAL | (1 &lt;&lt; 32)]
     # wait int_status[2] (DRAM init complete)
-    puts -nonewline &quot;Waiting for DDR2 controller to init...&quot;
+    echo -n &quot;Waiting for DDR2 controller to init...&quot;
     set tmp [mrw [expr $DENALI_CTL_08_DATA + 4]]
     while { [expr $tmp &amp; 0x040000] == 0 } {
 	sleep 1
@@ -304,7 +304,7 @@ proc configureDDR2regs_128M {} {
     }
     # This is not necessary
     #mw64bit $DENALI_CTL_11_DATA [expr ($DENALI_CTL_11_VAL  &amp; ~0x00007F0000000000) | ($wr_dqs_shift &lt;&lt; 40) ]
-    puts &quot;done.&quot;
+    echo &quot;done.&quot;
 
     # do ddr2 training sequence
     # TBD (for now, if you need it, run trainDDR command)
@@ -398,10 +398,10 @@ proc flashUBOOT {file} {
     # make sure we are accessing the lower part of NOR
     lowGPIO5
     flash probe 0
-    puts &quot;Erasing sectors 0-3 for uboot&quot;
+    echo &quot;Erasing sectors 0-3 for uboot&quot;
     putsUART0 &quot;Erasing sectors 0-3 for uboot\n&quot;
     flash erase_sector 0 0 3
-    puts &quot;Programming u-boot&quot;
+    echo &quot;Programming u-boot&quot;
     putsUART0 &quot;Programming u-boot...&quot;
     arm11 memwrite burst enable
     flash write_image $file $EXP_CS0_BASEADDR
diff --git a/tcl/target/c100helper.tcl b/tcl/target/c100helper.tcl
index 3251066..c9124cb 100644
--- a/tcl/target/c100helper.tcl
+++ b/tcl/target/c100helper.tcl
@@ -1,28 +1,28 @@
 
 proc helpC100 {} {
-    puts &quot;List of useful functions for C100 processor:&quot;
-    puts &quot;1)  reset init:        will set up your Telo board&quot;
-    puts &quot;2)  setupNOR:          will setup NOR access&quot;
-    puts &quot;3)  showNOR:           will show current NOR config registers for 16-bit, 16MB NOR&quot;
-    puts &quot;4)  setupGPIO:         will setup GPIOs for Telo board&quot;
-    puts &quot;5)  showGPIO:          will show current GPIO config registers&quot;
-    puts &quot;6)  highGPIO5:         will set GPIO5=NOR_addr22=1 to access upper 8MB&quot;
-    puts &quot;7)  lowGPIO5:          will set GPIO5=NOR_addr22=0 to access lower 8MB&quot;
-    puts &quot;8)  showAmbaClk:       will show current config registers for Amba Bus Clock&quot;
-    puts &quot;9)  setupAmbaClk:      will setup Amba Bus Clock=165MHz&quot;
-    puts &quot;10) showArmClk:        will show current config registers for Arm Bus Clock&quot;
-    puts &quot;11) setupArmClk:       will setup Amba Bus Clock=450MHz&quot;
-    puts &quot;12) ooma_board_detect: will show which version of Telo you have&quot;
-    puts &quot;13) setupDDR2:         will configure DDR2 controller, you must have PLLs configureg&quot;
-    puts &quot;14) showDDR2:          will show DDR2 config registers&quot;
-    puts &quot;15) showWatchdog:      will show current regster config for watchdog&quot;
-    puts &quot;16) reboot:            will trigger watchdog and reboot Telo (hw reset)&quot;
-    puts &quot;17) bootNOR:           will boot Telo from NOR&quot;
-    puts &quot;18) setupUART0:        will configure UART0 for 115200 8N1, PLLs have to be confiured&quot;
-    puts &quot;19) putcUART0:         will print a character on UART0&quot;
-    puts &quot;20) putsUART0:         will print a string on UART0&quot;
-    puts &quot;21) trainDDR2:          will run DDR2 training program&quot;
-    puts &quot;22) flashUBOOT:        will prgram NOR sectors 0-3 with u-boot.bin&quot;
+    echo &quot;List of useful functions for C100 processor:&quot;
+    echo &quot;1)  reset init:        will set up your Telo board&quot;
+    echo &quot;2)  setupNOR:          will setup NOR access&quot;
+    echo &quot;3)  showNOR:           will show current NOR config registers for 16-bit, 16MB NOR&quot;
+    echo &quot;4)  setupGPIO:         will setup GPIOs for Telo board&quot;
+    echo &quot;5)  showGPIO:          will show current GPIO config registers&quot;
+    echo &quot;6)  highGPIO5:         will set GPIO5=NOR_addr22=1 to access upper 8MB&quot;
+    echo &quot;7)  lowGPIO5:          will set GPIO5=NOR_addr22=0 to access lower 8MB&quot;
+    echo &quot;8)  showAmbaClk:       will show current config registers for Amba Bus Clock&quot;
+    echo &quot;9)  setupAmbaClk:      will setup Amba Bus Clock=165MHz&quot;
+    echo &quot;10) showArmClk:        will show current config registers for Arm Bus Clock&quot;
+    echo &quot;11) setupArmClk:       will setup Amba Bus Clock=450MHz&quot;
+    echo &quot;12) ooma_board_detect: will show which version of Telo you have&quot;
+    echo &quot;13) setupDDR2:         will configure DDR2 controller, you must have PLLs configureg&quot;
+    echo &quot;14) showDDR2:          will show DDR2 config registers&quot;
+    echo &quot;15) showWatchdog:      will show current regster config for watchdog&quot;
+    echo &quot;16) reboot:            will trigger watchdog and reboot Telo (hw reset)&quot;
+    echo &quot;17) bootNOR:           will boot Telo from NOR&quot;
+    echo &quot;18) setupUART0:        will configure UART0 for 115200 8N1, PLLs have to be confiured&quot;
+    echo &quot;19) putcUART0:         will print a character on UART0&quot;
+    echo &quot;20) putsUART0:         will print a string on UART0&quot;
+    echo &quot;21) trainDDR2:          will run DDR2 training program&quot;
+    echo &quot;22) flashUBOOT:        will prgram NOR sectors 0-3 with u-boot.bin&quot;
 }
 
 source [find mem_helper.tcl]
@@ -39,14 +39,14 @@ proc mr64bit {reg} {
 proc mw64bit {reg value} {
     set high [expr $value &gt;&gt; 32]
     set low  [expr $value &amp; 0xffffffff]
-    #puts [format &quot;mw64bit(0x%x): 0x%08x%08x&quot; $reg $high $low]
+    #echo [format &quot;mw64bit(0x%x): 0x%08x%08x&quot; $reg $high $low]
     mww $reg $low
     mww [expr $reg+4] $high
 }
 
 
 proc showNOR {} {
-    puts &quot;This is the current NOR setup&quot;
+    echo &quot;This is the current NOR setup&quot;
     set EX_CSEN_REG	    [regs EX_CSEN_REG ]
     set EX_CS0_SEG_REG	    [regs EX_CS0_SEG_REG ]
     set EX_CS0_CFG_REG	    [regs EX_CS0_CFG_REG ]
@@ -59,23 +59,23 @@ proc showNOR {} {
     set EX_WRFSM_REG	    [regs EX_WRFSM_REG ]
     set EX_RDFSM_REG	    [regs EX_RDFSM_REG ]
 
-    puts [format &quot;EX_CSEN_REG      (0x%x): 0x%x&quot; $EX_CSEN_REG [mrw $EX_CSEN_REG]]
-    puts [format &quot;EX_CS0_SEG_REG   (0x%x): 0x%x&quot; $EX_CS0_SEG_REG [mrw $EX_CS0_SEG_REG]]
-    puts [format &quot;EX_CS0_CFG_REG   (0x%x): 0x%x&quot; $EX_CS0_CFG_REG [mrw $EX_CS0_CFG_REG]]
-    puts [format &quot;EX_CS0_TMG1_REG  (0x%x): 0x%x&quot; $EX_CS0_TMG1_REG [mrw $EX_CS0_TMG1_REG]]
-    puts [format &quot;EX_CS0_TMG2_REG  (0x%x): 0x%x&quot; $EX_CS0_TMG2_REG [mrw $EX_CS0_TMG2_REG]]
-    puts [format &quot;EX_CS0_TMG3_REG  (0x%x): 0x%x&quot; $EX_CS0_TMG3_REG [mrw $EX_CS0_TMG3_REG]]
-    puts [format &quot;EX_CLOCK_DIV_REG (0x%x): 0x%x&quot; $EX_CLOCK_DIV_REG [mrw $EX_CLOCK_DIV_REG]]
-    puts [format &quot;EX_MFSM_REG      (0x%x): 0x%x&quot; $EX_MFSM_REG [mrw $EX_MFSM_REG]]
-    puts [format &quot;EX_CSFSM_REG     (0x%x): 0x%x&quot; $EX_CSFSM_REG [mrw $EX_CSFSM_REG]]
-    puts [format &quot;EX_WRFSM_REG     (0x%x): 0x%x&quot; $EX_WRFSM_REG [mrw $EX_WRFSM_REG]]
-    puts [format &quot;EX_RDFSM_REG     (0x%x): 0x%x&quot; $EX_RDFSM_REG [mrw $EX_RDFSM_REG]]
+    echo [format &quot;EX_CSEN_REG      (0x%x): 0x%x&quot; $EX_CSEN_REG [mrw $EX_CSEN_REG]]
+    echo [format &quot;EX_CS0_SEG_REG   (0x%x): 0x%x&quot; $EX_CS0_SEG_REG [mrw $EX_CS0_SEG_REG]]
+    echo [format &quot;EX_CS0_CFG_REG   (0x%x): 0x%x&quot; $EX_CS0_CFG_REG [mrw $EX_CS0_CFG_REG]]
+    echo [format &quot;EX_CS0_TMG1_REG  (0x%x): 0x%x&quot; $EX_CS0_TMG1_REG [mrw $EX_CS0_TMG1_REG]]
+    echo [format &quot;EX_CS0_TMG2_REG  (0x%x): 0x%x&quot; $EX_CS0_TMG2_REG [mrw $EX_CS0_TMG2_REG]]
+    echo [format &quot;EX_CS0_TMG3_REG  (0x%x): 0x%x&quot; $EX_CS0_TMG3_REG [mrw $EX_CS0_TMG3_REG]]
+    echo [format &quot;EX_CLOCK_DIV_REG (0x%x): 0x%x&quot; $EX_CLOCK_DIV_REG [mrw $EX_CLOCK_DIV_REG]]
+    echo [format &quot;EX_MFSM_REG      (0x%x): 0x%x&quot; $EX_MFSM_REG [mrw $EX_MFSM_REG]]
+    echo [format &quot;EX_CSFSM_REG     (0x%x): 0x%x&quot; $EX_CSFSM_REG [mrw $EX_CSFSM_REG]]
+    echo [format &quot;EX_WRFSM_REG     (0x%x): 0x%x&quot; $EX_WRFSM_REG [mrw $EX_WRFSM_REG]]
+    echo [format &quot;EX_RDFSM_REG     (0x%x): 0x%x&quot; $EX_RDFSM_REG [mrw $EX_RDFSM_REG]]
 }
 
 
 
 proc showGPIO {} {
-    puts &quot;This is the current GPIO register setup&quot;
+    echo &quot;This is the current GPIO register setup&quot;
     # GPIO outputs register
     set GPIO_OUTPUT_REG		    [regs GPIO_OUTPUT_REG]
     # GPIO Output Enable register
@@ -93,19 +93,19 @@ proc showGPIO {} {
     set GPIO_IOCTRL_REG		    [regs GPIO_IOCTRL_REG]
     set GPIO_DEVID_REG		    [regs GPIO_DEVID_REG]
 
-    puts [format &quot;GPIO_OUTPUT_REG       (0x%x): 0x%x&quot; $GPIO_OUTPUT_REG [mrw $GPIO_OUTPUT_REG]]
-    puts [format &quot;GPIO_OE_REG           (0x%x): 0x%x&quot; $GPIO_OE_REG [mrw $GPIO_OE_REG]]
-    puts [format &quot;GPIO_HI_INT_ENABLE_REG(0x%x): 0x%x&quot; $GPIO_HI_INT_ENABLE_REG [mrw $GPIO_HI_INT_ENABLE_REG]]
-    puts [format &quot;GPIO_LO_INT_ENABLE_REG(0x%x): 0x%x&quot; $GPIO_LO_INT_ENABLE_REG [mrw $GPIO_LO_INT_ENABLE_REG]]
-    puts [format &quot;GPIO_INPUT_REG        (0x%x): 0x%x&quot; $GPIO_INPUT_REG [mrw $GPIO_INPUT_REG]]
-    puts [format &quot;APB_ACCESS_WS_REG     (0x%x): 0x%x&quot; $APB_ACCESS_WS_REG [mrw $APB_ACCESS_WS_REG]]
-    puts [format &quot;MUX_CONF_REG          (0x%x): 0x%x&quot; $MUX_CONF_REG [mrw $MUX_CONF_REG]]
-    puts [format &quot;SYSCONF_REG           (0x%x): 0x%x&quot; $SYSCONF_REG [mrw $SYSCONF_REG]]
-    puts [format &quot;GPIO_ARM_ID_REG       (0x%x): 0x%x&quot; $GPIO_ARM_ID_REG [mrw $GPIO_ARM_ID_REG]]
-    puts [format &quot;GPIO_BOOTSTRAP_REG    (0x%x): 0x%x&quot; $GPIO_BOOTSTRAP_REG [mrw $GPIO_BOOTSTRAP_REG]]
-    puts [format &quot;GPIO_LOCK_REG         (0x%x): 0x%x&quot; $GPIO_LOCK_REG [mrw $GPIO_LOCK_REG]]
-    puts [format &quot;GPIO_IOCTRL_REG       (0x%x): 0x%x&quot; $GPIO_IOCTRL_REG [mrw $GPIO_IOCTRL_REG]]
-    puts [format &quot;GPIO_DEVID_REG        (0x%x): 0x%x&quot; $GPIO_DEVID_REG [mrw $GPIO_DEVID_REG]]
+    echo [format &quot;GPIO_OUTPUT_REG       (0x%x): 0x%x&quot; $GPIO_OUTPUT_REG [mrw $GPIO_OUTPUT_REG]]
+    echo [format &quot;GPIO_OE_REG           (0x%x): 0x%x&quot; $GPIO_OE_REG [mrw $GPIO_OE_REG]]
+    echo [format &quot;GPIO_HI_INT_ENABLE_REG(0x%x): 0x%x&quot; $GPIO_HI_INT_ENABLE_REG [mrw $GPIO_HI_INT_ENABLE_REG]]
+    echo [format &quot;GPIO_LO_INT_ENABLE_REG(0x%x): 0x%x&quot; $GPIO_LO_INT_ENABLE_REG [mrw $GPIO_LO_INT_ENABLE_REG]]
+    echo [format &quot;GPIO_INPUT_REG        (0x%x): 0x%x&quot; $GPIO_INPUT_REG [mrw $GPIO_INPUT_REG]]
+    echo [format &quot;APB_ACCESS_WS_REG     (0x%x): 0x%x&quot; $APB_ACCESS_WS_REG [mrw $APB_ACCESS_WS_REG]]
+    echo [format &quot;MUX_CONF_REG          (0x%x): 0x%x&quot; $MUX_CONF_REG [mrw $MUX_CONF_REG]]
+    echo [format &quot;SYSCONF_REG           (0x%x): 0x%x&quot; $SYSCONF_REG [mrw $SYSCONF_REG]]
+    echo [format &quot;GPIO_ARM_ID_REG       (0x%x): 0x%x&quot; $GPIO_ARM_ID_REG [mrw $GPIO_ARM_ID_REG]]
+    echo [format &quot;GPIO_BOOTSTRAP_REG    (0x%x): 0x%x&quot; $GPIO_BOOTSTRAP_REG [mrw $GPIO_BOOTSTRAP_REG]]
+    echo [format &quot;GPIO_LOCK_REG         (0x%x): 0x%x&quot; $GPIO_LOCK_REG [mrw $GPIO_LOCK_REG]]
+    echo [format &quot;GPIO_IOCTRL_REG       (0x%x): 0x%x&quot; $GPIO_IOCTRL_REG [mrw $GPIO_IOCTRL_REG]]
+    echo [format &quot;GPIO_DEVID_REG        (0x%x): 0x%x&quot; $GPIO_DEVID_REG [mrw $GPIO_DEVID_REG]]
 }
 
 
@@ -116,22 +116,22 @@ proc showAmbaClk {} {
     set CLKCORE_AHB_CLK_CNTRL	     [regs CLKCORE_AHB_CLK_CNTRL]
     set PLL_CLK_BYPASS	             [regs PLL_CLK_BYPASS]
 
-    puts [format &quot;CLKCORE_AHB_CLK_CNTRL       (0x%x): 0x%x&quot; $CLKCORE_AHB_CLK_CNTRL [mrw $CLKCORE_AHB_CLK_CNTRL]]
+    echo [format &quot;CLKCORE_AHB_CLK_CNTRL       (0x%x): 0x%x&quot; $CLKCORE_AHB_CLK_CNTRL [mrw $CLKCORE_AHB_CLK_CNTRL]]
     mem2array value 32 $CLKCORE_AHB_CLK_CNTRL 1
     # see if the PLL is in bypass mode
     set bypass [expr ($value(0) &amp; $PLL_CLK_BYPASS) &gt;&gt; 24 ]
-    puts [format &quot;PLL bypass bit: %d&quot; $bypass]
+    echo [format &quot;PLL bypass bit: %d&quot; $bypass]
     if {$bypass == 1} {
-	puts [format &quot;Amba Clk is set to REFCLK: %d (MHz)&quot; [expr $CFG_REFCLKFREQ/1000000]]
+	echo [format &quot;Amba Clk is set to REFCLK: %d (MHz)&quot; [expr $CFG_REFCLKFREQ/1000000]]
     } else {
 	# nope, extract x,y,w and compute the PLL output freq.
 	set x [expr ($value(0) &amp; 0x0001F0000) &gt;&gt; 16]
-	puts [format &quot;x: %d&quot; $x]
+	echo [format &quot;x: %d&quot; $x]
 	set y [expr ($value(0) &amp; 0x00000007F)]
-	puts [format &quot;y: %d&quot; $y]
+	echo [format &quot;y: %d&quot; $y]
 	set w [expr ($value(0) &amp; 0x000000300) &gt;&gt; 8]
-	puts [format &quot;w: %d&quot; $w]
-	puts [format &quot;Amba PLL Clk: %d (MHz)&quot; [expr ($CFG_REFCLKFREQ * $y / (($w + 1) * ($x + 1) * 2))/1000000]]
+	echo [format &quot;w: %d&quot; $w]
+	echo [format &quot;Amba PLL Clk: %d (MHz)&quot; [expr ($CFG_REFCLKFREQ * $y / (($w + 1) * ($x + 1) * 2))/1000000]]
     }
 }
 
@@ -154,10 +154,10 @@ proc setupAmbaClk {} {
     set x    [config x_amba]
     set y    [config y_amba]
 
-    puts [format &quot;Setting Amba PLL to lock to %d MHz&quot; [expr $CONFIG_SYS_HZ_CLOCK/1000000]]
-    #puts [format &quot;setupAmbaClk: w= %d&quot; $w]
-    #puts [format &quot;setupAmbaClk: x= %d&quot; $x]
-    #puts [format &quot;setupAmbaClk: y= %d&quot; $y]
+    echo [format &quot;Setting Amba PLL to lock to %d MHz&quot; [expr $CONFIG_SYS_HZ_CLOCK/1000000]]
+    #echo [format &quot;setupAmbaClk: w= %d&quot; $w]
+    #echo [format &quot;setupAmbaClk: x= %d&quot; $x]
+    #echo [format &quot;setupAmbaClk: y= %d&quot; $y]
     # set PLL into BYPASS mode using MUX
     mmw $CLKCORE_AHB_CLK_CNTRL $PLL_CLK_BYPASS 0x0
     # do an internal PLL bypass
@@ -176,7 +176,7 @@ proc setupAmbaClk {} {
     mmw $CLKCORE_AHB_CLK_CNTRL 0x0 0xFFFFFF
     mmw $CLKCORE_AHB_CLK_CNTRL [expr (($x &lt;&lt; 16) + ($w &lt;&lt; 8) + $y)] 0x0
     # wait for PLL to lock
-    puts &quot;Wating for Amba PLL to lock&quot;
+    echo &quot;Wating for Amba PLL to lock&quot;
     while {[expr [mrw $CLKCORE_PLL_STATUS] &amp; $AHBCLK_PLL_LOCK] == 0} { sleep 1 }
     # remove the internal PLL bypass
     mmw $CLKCORE_AHB_CLK_CNTRL 0x0 $AHB_PLL_BY_CTRL
@@ -191,22 +191,22 @@ proc showArmClk {} {
     set CLKCORE_ARM_CLK_CNTRL	[regs CLKCORE_ARM_CLK_CNTRL]
     set PLL_CLK_BYPASS	        [regs PLL_CLK_BYPASS]
 
-    puts [format &quot;CLKCORE_ARM_CLK_CNTRL       (0x%x): 0x%x&quot; $CLKCORE_ARM_CLK_CNTRL [mrw $CLKCORE_ARM_CLK_CNTRL]]
+    echo [format &quot;CLKCORE_ARM_CLK_CNTRL       (0x%x): 0x%x&quot; $CLKCORE_ARM_CLK_CNTRL [mrw $CLKCORE_ARM_CLK_CNTRL]]
     mem2array value 32 $CLKCORE_ARM_CLK_CNTRL 1
     # see if the PLL is in bypass mode
     set bypass [expr ($value(0) &amp; $PLL_CLK_BYPASS) &gt;&gt; 24 ]
-    puts [format &quot;PLL bypass bit: %d&quot; $bypass]
+    echo [format &quot;PLL bypass bit: %d&quot; $bypass]
     if {$bypass == 1} {
-	puts [format &quot;Amba Clk is set to REFCLK: %d (MHz)&quot; [expr $CFG_REFCLKFREQ/1000000]]
+	echo [format &quot;Amba Clk is set to REFCLK: %d (MHz)&quot; [expr $CFG_REFCLKFREQ/1000000]]
     } else {
 	# nope, extract x,y,w and compute the PLL output freq.
 	set x [expr ($value(0) &amp; 0x0001F0000) &gt;&gt; 16]
-	puts [format &quot;x: %d&quot; $x]
+	echo [format &quot;x: %d&quot; $x]
 	set y [expr ($value(0) &amp; 0x00000007F)]
-	puts [format &quot;y: %d&quot; $y]
+	echo [format &quot;y: %d&quot; $y]
 	set w [expr ($value(0) &amp; 0x000000300) &gt;&gt; 8]
-	puts [format &quot;w: %d&quot; $w]
-	puts [format &quot;Arm PLL Clk: %d (MHz)&quot; [expr ($CFG_REFCLKFREQ * $y / (($w + 1) * ($x + 1) * 2))/1000000]]
+	echo [format &quot;w: %d&quot; $w]
+	echo [format &quot;Arm PLL Clk: %d (MHz)&quot; [expr ($CFG_REFCLKFREQ * $y / (($w + 1) * ($x + 1) * 2))/1000000]]
     }
 }
 
@@ -228,10 +228,10 @@ proc setupArmClk {} {
     set x    [config x_arm]
     set y    [config y_arm]
 
-    puts [format &quot;Setting Arm PLL to lock to %d MHz&quot; [expr $CFG_ARM_CLOCK/1000000]]
-    #puts [format &quot;setupArmClk: w= %d&quot; $w]
-    #puts [format &quot;setupArmaClk: x= %d&quot; $x]
-    #puts [format &quot;setupArmaClk: y= %d&quot; $y]
+    echo [format &quot;Setting Arm PLL to lock to %d MHz&quot; [expr $CFG_ARM_CLOCK/1000000]]
+    #echo [format &quot;setupArmClk: w= %d&quot; $w]
+    #echo [format &quot;setupArmaClk: x= %d&quot; $x]
+    #echo [format &quot;setupArmaClk: y= %d&quot; $y]
     # set PLL into BYPASS mode using MUX
     mmw $CLKCORE_ARM_CLK_CNTRL $PLL_CLK_BYPASS 0x0
     # do an internal PLL bypass
@@ -250,7 +250,7 @@ proc setupArmClk {} {
     mmw $CLKCORE_ARM_CLK_CNTRL 0x0 0xFFFFFF
     mmw $CLKCORE_ARM_CLK_CNTRL [expr (($x &lt;&lt; 16) + ($w &lt;&lt; 8) + $y)] 0x0
     # wait for PLL to lock
-    puts &quot;Wating for Amba PLL to lock&quot;
+    echo &quot;Wating for Amba PLL to lock&quot;
     while {[expr [mrw $CLKCORE_PLL_STATUS] &amp; $FCLK_PLL_LOCK] == 0} { sleep 1 }
     # remove the internal PLL bypass
     mmw $CLKCORE_ARM_CLK_CNTRL 0x0 $ARM_PLL_BY_CTRL
@@ -261,14 +261,14 @@ proc setupArmClk {} {
 
 
 proc setupPLL {} {
-    puts &quot;PLLs setup&quot;
+    echo &quot;PLLs setup&quot;
     setupAmbaClk
     setupArmClk
 }
 
 # converted from u-boot/cpu/arm1136/bsp100.c:SoC_mem_init()
 proc setupDDR2 {} {
-    puts &quot;Configuring DDR2&quot;
+    echo &quot;Configuring DDR2&quot;
 
     set MEMORY_BASE_ADDR	    [regs  MEMORY_BASE_ADDR]
     set MEMORY_MAX_ADDR	            [regs  MEMORY_MAX_ADDR]
@@ -289,13 +289,13 @@ proc setupDDR2 {} {
     # ooma_board_detect returns DDR2 memory size
     set tmp [ooma_board_detect]
     if {$tmp == &quot;128M&quot;} {
-	puts &quot;DDR2 size 128MB&quot;
+	echo &quot;DDR2 size 128MB&quot;
 	set ddr_size $DDR_SZ_128M
     } elseif {$tmp == &quot;256M&quot;} {
-	puts &quot;DDR2 size 256MB&quot;
+	echo &quot;DDR2 size 256MB&quot;
 	set ddr_size $DDR_SZ_256M
     } else {
-	puts &quot;Don't know how to handle this DDR2 size?&quot;
+	echo &quot;Don't know how to handle this DDR2 size?&quot;
     }
 
     # Memory setup register
@@ -313,7 +313,7 @@ proc setupDDR2 {} {
     } elseif {$tmp == &quot;256M&quot;} {
 	configureDDR2regs_256M
     } else {
-	puts &quot;Don't know how to configure DDR2 setup?&quot;
+	echo &quot;Don't know how to configure DDR2 setup?&quot;
     }
 }
 
@@ -344,47 +344,47 @@ proc showDDR2 {} {
     set DENALI_CTL_20_DATA    [regs DENALI_CTL_20_DATA]
 
     set tmp [mr64bit $DENALI_CTL_00_DATA]
-    puts [format &quot;DENALI_CTL_00_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_00_DATA $tmp(1) $tmp(0)]
+    echo [format &quot;DENALI_CTL_00_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_00_DATA $tmp(1) $tmp(0)]
     set tmp [mr64bit $DENALI_CTL_01_DATA]
-    puts [format &quot;DENALI_CTL_01_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_01_DATA $tmp(1) $tmp(0)]
+    echo [format &quot;DENALI_CTL_01_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_01_DATA $tmp(1) $tmp(0)]
     set tmp [mr64bit $DENALI_CTL_02_DATA]
-    puts [format &quot;DENALI_CTL_02_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_02_DATA $tmp(1) $tmp(0)]
+    echo [format &quot;DENALI_CTL_02_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_02_DATA $tmp(1) $tmp(0)]
     set tmp [mr64bit $DENALI_CTL_03_DATA]
-    puts [format &quot;DENALI_CTL_03_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_03_DATA $tmp(1) $tmp(0)]
+    echo [format &quot;DENALI_CTL_03_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_03_DATA $tmp(1) $tmp(0)]
     set tmp [mr64bit $DENALI_CTL_04_DATA]
-    puts [format &quot;DENALI_CTL_04_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_04_DATA $tmp(1) $tmp(0)]
+    echo [format &quot;DENALI_CTL_04_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_04_DATA $tmp(1) $tmp(0)]
     set tmp [mr64bit $DENALI_CTL_05_DATA]
-    puts [format &quot;DENALI_CTL_05_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_05_DATA $tmp(1) $tmp(0)]
+    echo [format &quot;DENALI_CTL_05_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_05_DATA $tmp(1) $tmp(0)]
     set tmp [mr64bit $DENALI_CTL_06_DATA]
-    puts [format &quot;DENALI_CTL_06_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_06_DATA $tmp(1) $tmp(0)]
+    echo [format &quot;DENALI_CTL_06_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_06_DATA $tmp(1) $tmp(0)]
     set tmp [mr64bit $DENALI_CTL_07_DATA]
-    puts [format &quot;DENALI_CTL_07_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_07_DATA $tmp(1) $tmp(0)]
+    echo [format &quot;DENALI_CTL_07_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_07_DATA $tmp(1) $tmp(0)]
     set tmp [mr64bit $DENALI_CTL_08_DATA]
-    puts [format &quot;DENALI_CTL_08_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_08_DATA $tmp(1) $tmp(0)]
+    echo [format &quot;DENALI_CTL_08_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_08_DATA $tmp(1) $tmp(0)]
     set tmp [mr64bit $DENALI_CTL_09_DATA]
-    puts [format &quot;DENALI_CTL_09_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_09_DATA $tmp(1) $tmp(0)]
+    echo [format &quot;DENALI_CTL_09_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_09_DATA $tmp(1) $tmp(0)]
     set tmp [mr64bit $DENALI_CTL_10_DATA]
-    puts [format &quot;DENALI_CTL_10_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_10_DATA $tmp(1) $tmp(0)]
+    echo [format &quot;DENALI_CTL_10_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_10_DATA $tmp(1) $tmp(0)]
     set tmp [mr64bit $DENALI_CTL_11_DATA]
-    puts [format &quot;DENALI_CTL_11_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_11_DATA $tmp(1) $tmp(0)]
+    echo [format &quot;DENALI_CTL_11_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_11_DATA $tmp(1) $tmp(0)]
     set tmp [mr64bit $DENALI_CTL_12_DATA]
-    puts [format &quot;DENALI_CTL_12_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_12_DATA $tmp(1) $tmp(0)]
+    echo [format &quot;DENALI_CTL_12_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_12_DATA $tmp(1) $tmp(0)]
     set tmp [mr64bit $DENALI_CTL_13_DATA]
-    puts [format &quot;DENALI_CTL_13_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_13_DATA $tmp(1) $tmp(0)]
+    echo [format &quot;DENALI_CTL_13_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_13_DATA $tmp(1) $tmp(0)]
     set tmp [mr64bit $DENALI_CTL_14_DATA]
-    puts [format &quot;DENALI_CTL_14_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_14_DATA $tmp(1) $tmp(0)]
+    echo [format &quot;DENALI_CTL_14_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_14_DATA $tmp(1) $tmp(0)]
     set tmp [mr64bit $DENALI_CTL_15_DATA]
-    puts [format &quot;DENALI_CTL_15_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_15_DATA $tmp(1) $tmp(0)]
+    echo [format &quot;DENALI_CTL_15_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_15_DATA $tmp(1) $tmp(0)]
     set tmp [mr64bit $DENALI_CTL_16_DATA]
-    puts [format &quot;DENALI_CTL_16_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_16_DATA $tmp(1) $tmp(0)]
+    echo [format &quot;DENALI_CTL_16_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_16_DATA $tmp(1) $tmp(0)]
     set tmp [mr64bit $DENALI_CTL_17_DATA]
-    puts [format &quot;DENALI_CTL_17_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_17_DATA $tmp(1) $tmp(0)]
+    echo [format &quot;DENALI_CTL_17_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_17_DATA $tmp(1) $tmp(0)]
     set tmp [mr64bit $DENALI_CTL_18_DATA]
-    puts [format &quot;DENALI_CTL_18_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_18_DATA $tmp(1) $tmp(0)]
+    echo [format &quot;DENALI_CTL_18_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_18_DATA $tmp(1) $tmp(0)]
     set tmp [mr64bit $DENALI_CTL_19_DATA]
-    puts [format &quot;DENALI_CTL_19_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_19_DATA $tmp(1) $tmp(0)]
+    echo [format &quot;DENALI_CTL_19_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_19_DATA $tmp(1) $tmp(0)]
     set tmp [mr64bit $DENALI_CTL_20_DATA]
-    puts [format &quot;DENALI_CTL_20_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_20_DATA $tmp(1) $tmp(0)]
+    echo [format &quot;DENALI_CTL_20_DATA   (0x%x): 0x%08x%08x&quot; $DENALI_CTL_20_DATA $tmp(1) $tmp(0)]
 
 }
 
@@ -462,7 +462,7 @@ proc initC100 {} {
     # DDR2 memory init
     setupDDR2
     putsUART0 &quot;C100 initialization complete.\n&quot;
-    puts &quot;C100 initialization complete.&quot;
+    echo &quot;C100 initialization complete.&quot;
 }
 
 # show current state of watchdog timer
@@ -471,9 +471,9 @@ proc showWatchdog {} {
     set TIMER_WDT_CONTROL	[regs TIMER_WDT_CONTROL]
     set TIMER_WDT_CURRENT_COUNT	[regs TIMER_WDT_CURRENT_COUNT]
 
-    puts [format &quot;TIMER_WDT_HIGH_BOUND    (0x%x): 0x%x&quot; $TIMER_WDT_HIGH_BOUND [mrw $TIMER_WDT_HIGH_BOUND]]
-    puts [format &quot;TIMER_WDT_CONTROL       (0x%x): 0x%x&quot; $TIMER_WDT_CONTROL [mrw $TIMER_WDT_CONTROL]]
-    puts [format &quot;TIMER_WDT_CURRENT_COUNT (0x%x): 0x%x&quot; $TIMER_WDT_CURRENT_COUNT [mrw $TIMER_WDT_CURRENT_COUNT]]
+    echo [format &quot;TIMER_WDT_HIGH_BOUND    (0x%x): 0x%x&quot; $TIMER_WDT_HIGH_BOUND [mrw $TIMER_WDT_HIGH_BOUND]]
+    echo [format &quot;TIMER_WDT_CONTROL       (0x%x): 0x%x&quot; $TIMER_WDT_CONTROL [mrw $TIMER_WDT_CONTROL]]
+    echo [format &quot;TIMER_WDT_CURRENT_COUNT (0x%x): 0x%x&quot; $TIMER_WDT_CURRENT_COUNT [mrw $TIMER_WDT_CURRENT_COUNT]]
 }
 
 # converted from u-boot/cpu/arm1136/comcerto/intrrupts.c:void reset_cpu (ulong ignored)
@@ -490,17 +490,17 @@ proc reboot {} {
     # I don't want to miss the high_bound==curr_count condition
     mww $TIMER_WDT_HIGH_BOUND  0xffffff
     mww $TIMER_WDT_CURRENT_COUNT 0x0
-    puts &quot;JTAG speed lowered to 100kHz&quot;
+    echo &quot;JTAG speed lowered to 100kHz&quot;
     adapter_khz 100
     mww $TIMER_WDT_CONTROL 0x1
     # wait until the reset
-    puts -nonewline &quot;Wating for watchdog to trigger...&quot;
+    echo -n &quot;Wating for watchdog to trigger...&quot;
     #while {[mrw $TIMER_WDT_CONTROL] == 1} {
-    #    puts [format &quot;TIMER_WDT_CURRENT_COUNT (0x%x): 0x%x&quot; $TIMER_WDT_CURRENT_COUNT [mrw $TIMER_WDT_CURRENT_COUNT]]
+    #    echo [format &quot;TIMER_WDT_CURRENT_COUNT (0x%x): 0x%x&quot; $TIMER_WDT_CURRENT_COUNT [mrw $TIMER_WDT_CURRENT_COUNT]]
     #    sleep 1
     #
     #}
     while {[c100.cpu curstate] != &quot;running&quot;} { sleep 1}
-    puts &quot;done.&quot;
-    puts [format &quot;Note that C100 is in %s state, type halt to stop&quot; [c100.cpu curstate]]
+    echo &quot;done.&quot;
+    echo [format &quot;Note that C100 is in %s state, type halt to stop&quot; [c100.cpu curstate]]
 }
diff --git a/tcl/target/c100regs.tcl b/tcl/target/c100regs.tcl
index 56f0771..a2c7a60 100644
--- a/tcl/target/c100regs.tcl
+++ b/tcl/target/c100regs.tcl
@@ -11,7 +11,7 @@ proc regs {reg} {
 }
 
 proc showreg {reg} {
-    puts [format &quot;0x%x&quot; [dict get [regsC100] $reg ]]
+    echo [format &quot;0x%x&quot; [dict get [regsC100] $reg ]]
 }
 
 proc regsC100 {} {
diff --git a/tcl/target/imx31.cfg b/tcl/target/imx31.cfg
index 3af6383..b9eddd0 100644
--- a/tcl/target/imx31.cfg
+++ b/tcl/target/imx31.cfg
@@ -60,8 +60,8 @@ set _TARGETNAME $_CHIPNAME.cpu
 target create $_TARGETNAME arm11 -endian $_ENDIAN -chain-position $_TARGETNAME
 
 
-proc power_restore {} { puts &quot;Sensed power restore. No action.&quot; }
-proc srst_deasserted {} { puts &quot;Sensed nSRST deasserted. No action.&quot; }
+proc power_restore {} { echo &quot;Sensed power restore. No action.&quot; }
+proc srst_deasserted {} { echo &quot;Sensed nSRST deasserted. No action.&quot; }
 
 # trace setup ... NOTE, &quot;normal full&quot; mode fudges the real ETMv3.1 mode
 etm config $_TARGETNAME 16 normal full etb
diff --git a/tcl/target/imx35.cfg b/tcl/target/imx35.cfg
index 30cb386..8a6aa87 100644
--- a/tcl/target/imx35.cfg
+++ b/tcl/target/imx35.cfg
@@ -47,8 +47,8 @@ jtag newtap $_CHIPNAME smda -irlen 5 -ircapture 0x1 -irmask 0x1f -expected-id $_
 set _TARGETNAME $_CHIPNAME.cpu
 target create $_TARGETNAME arm11 -endian $_ENDIAN -chain-position $_TARGETNAME
 
-proc power_restore {} { puts &quot;Sensed power restore. No action.&quot; }
-proc srst_deasserted {} { puts &quot;Sensed nSRST deasserted. No action.&quot; }
+proc power_restore {} { echo &quot;Sensed power restore. No action.&quot; }
+proc srst_deasserted {} { echo &quot;Sensed nSRST deasserted. No action.&quot; }
 
 # trace setup ... NOTE, &quot;normal full&quot; mode fudges the real ETMv3.1 mode
 etm config $_TARGETNAME 16 normal full etb
diff --git a/tcl/target/lpc3250.cfg b/tcl/target/lpc3250.cfg
index e902fb4..d64e15f 100644
--- a/tcl/target/lpc3250.cfg
+++ b/tcl/target/lpc3250.cfg
@@ -32,5 +32,5 @@ jtag newtap $_CHIPNAME cpu -irlen 4 -ircapture 0x1 -irmask 0xf -expected-id $_CP
 set _TARGETNAME $_CHIPNAME.cpu
 target create $_TARGETNAME arm926ejs -endian little -chain-position $_TARGETNAME -work-area-phys 0x00000000 -work-area-size 0x7d0000 -work-area-backup 0
 
-proc power_restore {} { puts &quot;Sensed power restore. No action.&quot; }
-proc srst_deasserted {} { puts &quot;Sensed nSRST deasserted. No action.&quot; }
+proc power_restore {} { echo &quot;Sensed power restore. No action.&quot; }
+proc srst_deasserted {} { echo &quot;Sensed nSRST deasserted. No action.&quot; }
diff --git a/tcl/test/selftest.cfg b/tcl/test/selftest.cfg
index 912d1c0..be420ca 100755
--- a/tcl/test/selftest.cfg
+++ b/tcl/test/selftest.cfg
@@ -8,7 +8,7 @@ proc selftest {tmpfile address size} {
    }
 
    for {set i 0} {$i &lt; 10 } {set i [expr $i+1]} {
-    puts &quot;Test iteration $i&quot;
+    echo &quot;Test iteration $i&quot;
     dump_image $tmpfile $address $size
 	verify_image $tmpfile $address bin
 	load_image $tmpfile $address bin

commit 4747af362de04b508c91df4004d2aed5579c8a1c
Author: Antonio Borneo &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">borneo.antonio at gmail.com</A>&gt;
Date:   Mon Nov 8 15:13:28 2010 +0800

    JIM: document &quot;echo&quot; command
    
    Document &quot;-n&quot; option in manual;
    Modify &quot;echo&quot; command definition as COMMAND_HANDLER to
    easily add help message
    Add help message aligned with manual.
    
    Signed-off-by: Antonio Borneo &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">borneo.antonio at gmail.com</A>&gt;

diff --git a/doc/openocd.texi b/doc/openocd.texi
index 5387082..f946bdf 100644
--- a/doc/openocd.texi
+++ b/doc/openocd.texi
@@ -5446,9 +5446,10 @@ file (which is normally the server's standard output).
 @xref{Running}.
 @end deffn
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at deffn</A> Command echo message
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at deffn</A> Command echo [-n] message
 Logs a message at &quot;user&quot; priority.
 Output @var{message} to stdout.
+Option &quot;-n&quot; suppresses trailing newline.
 @example
 echo &quot;Downloading kernel -- please wait&quot;
 @end example
diff --git a/src/helper/command.c b/src/helper/command.c
index 6c408ee..af1d66f 100644
--- a/src/helper/command.c
+++ b/src/helper/command.c
@@ -777,19 +777,16 @@ static int jim_find(Jim_Interp *interp, int argc, Jim_Obj *const *argv)
 	return JIM_OK;
 }
 
-static int jim_echo(Jim_Interp *interp, int argc, Jim_Obj *const *argv)
+COMMAND_HANDLER(jim_echo)
 {
-	const char *str;
-	str = Jim_GetString(argv[1], NULL);
-	if (argc == 3 &amp;&amp; !strcmp(str, &quot;-n&quot;))
+	if (CMD_ARGC == 2 &amp;&amp; !strcmp(CMD_ARGV[0], &quot;-n&quot;))
 	{
-		str = Jim_GetString(argv[2], NULL);
-		LOG_USER_N(&quot;%s&quot;, str);
+		LOG_USER_N(&quot;%s&quot;, CMD_ARGV[1]);
 		return JIM_OK;
 	}
-	if (argc != 2)
+	if (CMD_ARGC != 1)
 		return JIM_ERR;
-	LOG_USER(&quot;%s&quot;, str);
+	LOG_USER(&quot;%s&quot;, CMD_ARGV[0]);
 	return JIM_OK;
 }
 
@@ -1262,6 +1259,15 @@ static const struct command_registration command_subcommand_handlers[] = {
 
 static const struct command_registration command_builtin_handlers[] = {
 	{
+		.name = &quot;echo&quot;,
+		.handler = jim_echo,
+		.mode = COMMAND_ANY,
+		.help = &quot;Logs a message at \&quot;user\&quot; priority. &quot;
+			&quot;Output message to stdout. &quot;
+			&quot;Option \&quot;-n\&quot; suppresses trailing newline&quot;,
+		.usage = &quot;[-n] string&quot;,
+	},
+	{
 		.name = &quot;add_help_text&quot;,
 		.handler = handle_help_add_command,
 		.mode = COMMAND_ANY,
@@ -1364,7 +1370,6 @@ struct command_context* command_init(const char *startup_tcl, Jim_Interp *interp
 			Jim_NewStringObj(interp, HostOs , strlen(HostOs)));
 
 	Jim_CreateCommand(interp, &quot;ocd_find&quot;, jim_find, NULL, NULL);
-	Jim_CreateCommand(interp, &quot;echo&quot;, jim_echo, NULL, NULL);
 	Jim_CreateCommand(interp, &quot;capture&quot;, jim_capture, NULL, NULL);
 
 	register_commands(context, NULL, command_builtin_handlers);

commit d220e22e6376fa67d85c9731a4165f86609390d8
Author: Antonio Borneo &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">borneo.antonio at gmail.com</A>&gt;
Date:   Mon Nov 8 12:08:56 2010 +0800

    JIM: Add &quot;-n&quot; option to &quot;echo&quot;
    
    With the new JIMTCL, &quot;puts&quot; only writes to stdout.
    To write on telnet port too, &quot;echo&quot; must be used.
    This patch gives to &quot;echo&quot; similar commandline option of &quot;puts&quot;.
    
    Signed-off-by: Antonio Borneo &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">borneo.antonio at gmail.com</A>&gt;

diff --git a/src/helper/command.c b/src/helper/command.c
index 5a68208..6c408ee 100644
--- a/src/helper/command.c
+++ b/src/helper/command.c
@@ -779,9 +779,16 @@ static int jim_find(Jim_Interp *interp, int argc, Jim_Obj *const *argv)
 
 static int jim_echo(Jim_Interp *interp, int argc, Jim_Obj *const *argv)
 {
+	const char *str;
+	str = Jim_GetString(argv[1], NULL);
+	if (argc == 3 &amp;&amp; !strcmp(str, &quot;-n&quot;))
+	{
+		str = Jim_GetString(argv[2], NULL);
+		LOG_USER_N(&quot;%s&quot;, str);
+		return JIM_OK;
+	}
 	if (argc != 2)
 		return JIM_ERR;
-	const char *str = Jim_GetString(argv[1], NULL);
 	LOG_USER(&quot;%s&quot;, str);
 	return JIM_OK;
 }

-----------------------------------------------------------------------

Summary of changes:
 doc/openocd.texi                    |    3 +-
 src/helper/command.c                |   22 +++-
 src/jtag/startup.tcl                |    8 +-
 tcl/bitsbytes.tcl                   |    2 +-
 tcl/board/at91eb40a.cfg             |    2 +-
 tcl/board/dm355evm.cfg              |    2 +-
 tcl/board/dm6446evm.cfg             |    2 +-
 tcl/board/ethernut3.cfg             |   10 +-
 tcl/board/lubbock.cfg               |    2 +-
 tcl/board/olimex_sam9_l9260.cfg     |    8 +-
 tcl/board/telo.cfg                  |   12 +-
 tcl/board/zy1000.cfg                |    8 +-
 tcl/chip/atmel/at91/aic.tcl         |   24 ++--
 tcl/chip/atmel/at91/rtt.tcl         |   18 ++--
 tcl/chip/atmel/at91/usarts.tcl      |   16 ++--
 tcl/chip/st/spear/quirk_no_srst.tcl |    4 +-
 tcl/chip/st/spear/spear3xx_ddr.tcl  |    4 +-
 tcl/mmr_helpers.tcl                 |   16 ++--
 tcl/target/aduc702x.cfg             |    2 +-
 tcl/target/c100config.tcl           |   26 ++--
 tcl/target/c100helper.tcl           |  220 +++++++++++++++++-----------------
 tcl/target/c100regs.tcl             |    2 +-
 tcl/target/imx31.cfg                |    4 +-
 tcl/target/imx35.cfg                |    4 +-
 tcl/target/lpc3250.cfg              |    4 +-
 tcl/test/selftest.cfg               |    2 +-
 26 files changed, 220 insertions(+), 207 deletions(-)


hooks/post-receive
-- 
Main OpenOCD repository

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002426.html">[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-580-gfc4e001
</A></li>
	<LI>Next message: <A HREF="002428.html">[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-585-gaa4c140
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2427">[ date ]</a>
              <a href="thread.html#2427">[ thread ]</a>
              <a href="subject.html#2427">[ subject ]</a>
              <a href="author.html#2427">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-svn">More information about the openocd-svn
mailing list</a><br>
</body></html>
