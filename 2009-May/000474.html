<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-svn] r1690 - trunk/src/target
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-svn/2009-May/index.html" >
   <LINK REL="made" HREF="mailto:openocd-svn%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-svn%5D%20r1690%20-%20trunk/src/target&In-Reply-To=%3C200905101902.n4AJ2A0O017076%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000473.html">
   <LINK REL="Next"  HREF="000475.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-svn] r1690 - trunk/src/target</H1>
    <B>oharboe at BerliOS</B> 
    <A HREF="mailto:openocd-svn%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-svn%5D%20r1690%20-%20trunk/src/target&In-Reply-To=%3C200905101902.n4AJ2A0O017076%40sheep.berlios.de%3E"
       TITLE="[Openocd-svn] r1690 - trunk/src/target">oharboe at mail.berlios.de
       </A><BR>
    <I>Sun May 10 21:02:10 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000473.html">[Openocd-svn] r1689 - trunk/src/target
</A></li>
        <LI>Next message: <A HREF="000475.html">[Openocd-svn] r1691 - in trunk/src: . helper
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#474">[ date ]</a>
              <a href="thread.html#474">[ thread ]</a>
              <a href="subject.html#474">[ subject ]</a>
              <a href="author.html#474">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: oharboe
Date: 2009-05-10 21:02:07 +0200 (Sun, 10 May 2009)
New Revision: 1690

Modified:
   trunk/src/target/arm720t.c
   trunk/src/target/arm7_9_common.c
   trunk/src/target/arm7_9_common.h
   trunk/src/target/arm7tdmi.c
   trunk/src/target/arm920t.c
   trunk/src/target/arm926ejs.c
   trunk/src/target/arm9tdmi.c
   trunk/src/target/armv4_5.c
   trunk/src/target/armv4_5.h
   trunk/src/target/armv4_5_cache.c
   trunk/src/target/armv4_5_mmu.c
Log:
David Brownell &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">david-b at pacbell.net</A>&gt; whitespace fixes.

Modified: trunk/src/target/arm720t.c
===================================================================
--- trunk/src/target/arm720t.c	2009-05-10 19:01:03 UTC (rev 1689)
+++ trunk/src/target/arm720t.c	2009-05-10 19:02:07 UTC (rev 1690)
@@ -113,13 +113,12 @@
 	fields[0].num_bits = 1;
 	fields[0].out_value = &amp;instruction_buf;
 	fields[0].in_value = NULL;
-	
 
 	fields[1].tap = jtag_info-&gt;tap;
 	fields[1].num_bits = 32;
 	fields[1].out_value = out_buf;
 	fields[1].in_value = NULL;
-	
+
 	if (in)
 	{
 		u8 tmp[4];

Modified: trunk/src/target/arm7_9_common.c
===================================================================
--- trunk/src/target/arm7_9_common.c	2009-05-10 19:01:03 UTC (rev 1689)
+++ trunk/src/target/arm7_9_common.c	2009-05-10 19:02:07 UTC (rev 1690)
@@ -1287,7 +1287,7 @@
 	/* iterate through processor modes (User, FIQ, IRQ, SVC, ABT, UND)
 	 * SYS shares registers with User, so we don't touch SYS
 	 */
-	for(i = 0; i &lt; 6; i++)
+	for (i = 0; i &lt; 6; i++)
 	{
 		u32 mask = 0;
 		u32* reg_p[16];

Modified: trunk/src/target/arm7_9_common.h
===================================================================
--- trunk/src/target/arm7_9_common.h	2009-05-10 19:01:03 UTC (rev 1689)
+++ trunk/src/target/arm7_9_common.h	2009-05-10 19:02:07 UTC (rev 1690)
@@ -41,10 +41,10 @@
 typedef struct arm7_9_common_s
 {
 	u32 common_magic;
-	
+
 	arm_jtag_t jtag_info;
 	reg_cache_t *eice_cache;
-	
+
 	u32 arm_bkpt;
 	u16 thumb_bkpt;
 	int sw_breakpoints_added;
@@ -58,32 +58,32 @@
 	int dbgreq_adjust_pc;
 	int use_dbgrq;
 	int need_bypass_before_restart;
-	
+
 	etm_context_t *etm_ctx;
-	
+
 	int has_single_step;
 	int has_monitor_mode;
 	int has_vector_catch;
-	
+
 	int debug_entry_from_reset;
-	
+
 	struct working_area_s *dcc_working_area;
-	
+
 	int fast_memory_access;
 	int dcc_downloads;
 
 	int (*examine_debug_reason)(target_t *target);
-	
+
 	void (*change_to_arm)(target_t *target, u32 *r0, u32 *pc);
-	
+
 	void (*read_core_regs)(target_t *target, u32 mask, u32 *core_regs[16]);
 	void (*read_core_regs_target_buffer)(target_t *target, u32 mask, void *buffer, int size);
 	void (*read_xpsr)(target_t *target, u32 *xpsr, int spsr);
-	
+
 	void (*write_xpsr)(target_t *target, u32 xpsr, int spsr);
 	void (*write_xpsr_im8)(target_t *target, u8 xpsr_im, int rot, int spsr);
 	void (*write_core_regs)(target_t *target, u32 mask, u32 core_regs[16]);
-	
+
 	void (*load_word_regs)(target_t *target, u32 mask);
 	void (*load_hword_reg)(target_t *target, int num);
 	void (*load_byte_reg)(target_t *target, int num);
@@ -91,22 +91,22 @@
 	void (*store_word_regs)(target_t *target, u32 mask);
 	void (*store_hword_reg)(target_t *target, int num);
 	void (*store_byte_reg)(target_t *target, int num);
-	
+
 	void (*write_pc)(target_t *target, u32 pc);
 	void (*branch_resume)(target_t *target);
 	void (*branch_resume_thumb)(target_t *target);
-	
+
 	void (*enable_single_step)(target_t *target, u32 next_pc);
 	void (*disable_single_step)(target_t *target);
-	
+
 	void (*set_special_dbgrq)(target_t *target);
 
 	void (*pre_debug_entry)(target_t *target);
 	void (*post_debug_entry)(target_t *target);
-	
+
 	void (*pre_restore_context)(target_t *target);
 	void (*post_restore_context)(target_t *target);
-	
+
 	armv4_5_common_t armv4_5_common;
 	void *arch_info;
 

Modified: trunk/src/target/arm7tdmi.c
===================================================================
--- trunk/src/target/arm7tdmi.c	2009-05-10 19:01:03 UTC (rev 1689)
+++ trunk/src/target/arm7tdmi.c	2009-05-10 19:02:07 UTC (rev 1690)
@@ -115,13 +115,11 @@
 		fields[0].num_bits = 1;
 		fields[0].out_value = NULL;
 		fields[0].in_value = &breakpoint;
-		
 
 		fields[1].tap = arm7_9-&gt;jtag_info.tap;
 		fields[1].num_bits = 32;
 		fields[1].out_value = NULL;
 		fields[1].in_value = databus;
-		
 
 		if((retval = arm_jtag_scann(&amp;arm7_9-&gt;jtag_info, 0x1)) != ERROR_OK)
 		{
@@ -194,15 +192,12 @@
 	fields[0].num_bits = 1;
 	fields[0].out_value = NULL;
 	fields[0].in_value = NULL;
-	
 
-
 	fields[1].tap = jtag_info-&gt;tap;
 	fields[1].num_bits = 32;
 	fields[1].out_value = NULL;
 	u8 tmp[4];
 	fields[1].in_value = tmp;
-	
 
 	jtag_add_dr_scan_now(2, fields, TAP_INVALID);
 
@@ -286,14 +281,12 @@
 	fields[0].num_bits = 1;
 	fields[0].out_value = NULL;
 	fields[0].in_value = NULL;
-	
 
 	fields[1].tap = jtag_info-&gt;tap;
 	fields[1].num_bits = 32;
 	fields[1].out_value = NULL;
 	u8 tmp[4];
 	fields[1].in_value = tmp;
-	
 
 	jtag_add_dr_scan_now(2, fields, TAP_INVALID);
 

Modified: trunk/src/target/arm920t.c
===================================================================
--- trunk/src/target/arm920t.c	2009-05-10 19:01:03 UTC (rev 1689)
+++ trunk/src/target/arm920t.c	2009-05-10 19:02:07 UTC (rev 1690)
@@ -114,25 +114,21 @@
 	fields[0].num_bits = 1;
 	fields[0].out_value = &amp;access_type_buf;
 	fields[0].in_value = NULL;
-	
 
 	fields[1].tap = jtag_info-&gt;tap;
 	fields[1].num_bits = 32;
 	fields[1].out_value = NULL;
 	fields[1].in_value = NULL;
-	
 
 	fields[2].tap = jtag_info-&gt;tap;
 	fields[2].num_bits = 6;
 	fields[2].out_value = &amp;reg_addr_buf;
 	fields[2].in_value = NULL;
-	
 
 	fields[3].tap = jtag_info-&gt;tap;
 	fields[3].num_bits = 1;
 	fields[3].out_value = &amp;nr_w_buf;
 	fields[3].in_value = NULL;
-	
 
 	jtag_add_dr_scan(4, fields, TAP_INVALID);
 
@@ -171,43 +167,23 @@
 	fields[0].tap = jtag_info-&gt;tap;
 	fields[0].num_bits = 1;
 	fields[0].out_value = &amp;access_type_buf;
-
 	fields[0].in_value = NULL;
 
-
-	
-
-
 	fields[1].tap = jtag_info-&gt;tap;
 	fields[1].num_bits = 32;
 	fields[1].out_value = value_buf;
-
 	fields[1].in_value = NULL;
 
-
-	
-
-
 	fields[2].tap = jtag_info-&gt;tap;
 	fields[2].num_bits = 6;
 	fields[2].out_value = &amp;reg_addr_buf;
-
 	fields[2].in_value = NULL;
 
-
-	
-
-
 	fields[3].tap = jtag_info-&gt;tap;
 	fields[3].num_bits = 1;
 	fields[3].out_value = &amp;nr_w_buf;
-
 	fields[3].in_value = NULL;
 
-
-	
-
-
 	jtag_add_dr_scan(4, fields, TAP_INVALID);
 
 #ifdef _DEBUG_INSTRUCTION_EXECUTION_
@@ -238,43 +214,23 @@
 	fields[0].tap = jtag_info-&gt;tap;
 	fields[0].num_bits = 1;
 	fields[0].out_value = &amp;access_type_buf;
-
 	fields[0].in_value = NULL;
 
-
-	
-
-
 	fields[1].tap = jtag_info-&gt;tap;
 	fields[1].num_bits = 32;
 	fields[1].out_value = cp15_opcode_buf;
-
 	fields[1].in_value = NULL;
 
-
-	
-
-
 	fields[2].tap = jtag_info-&gt;tap;
 	fields[2].num_bits = 6;
 	fields[2].out_value = &amp;reg_addr_buf;
-
 	fields[2].in_value = NULL;
 
-
-	
-
-
 	fields[3].tap = jtag_info-&gt;tap;
 	fields[3].num_bits = 1;
 	fields[3].out_value = &amp;nr_w_buf;
-
 	fields[3].in_value = NULL;
 
-
-	
-
-
 	jtag_add_dr_scan(4, fields, TAP_INVALID);
 
 	arm9tdmi_clock_out(jtag_info, arm_opcode, 0, NULL, 0);
@@ -621,7 +577,7 @@
 	arm920t_common_t *arm920t = arm9tdmi-&gt;arch_info;
 	reg_t *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
 
-	if((retval = target_halt(target)) != ERROR_OK)
+	if ((retval = target_halt(target)) != ERROR_OK)
 	{
 		return retval;
 	}
@@ -633,7 +589,7 @@
 		if (buf_get_u32(dbg_stat-&gt;value, EICE_DBG_STATUS_DBGACK, 1) == 0)
 		{
 			embeddedice_read_reg(dbg_stat);
-			if((retval = jtag_execute_queue()) != ERROR_OK)
+			if ((retval = jtag_execute_queue()) != ERROR_OK)
 			{
 				return retval;
 			}
@@ -676,7 +632,7 @@
 	arm920t-&gt;armv4_5_mmu.armv4_5_cache.d_u_cache_enabled = 0;
 	arm920t-&gt;armv4_5_mmu.armv4_5_cache.i_cache_enabled = 0;
 
-	if((retval = target_call_event_callbacks(target, TARGET_EVENT_HALTED)) != ERROR_OK)
+	if ((retval = target_call_event_callbacks(target, TARGET_EVENT_HALTED)) != ERROR_OK)
 	{
 		return retval;
 	}
@@ -814,7 +770,7 @@
 
 	/* disable MMU and Caches */
 	arm920t_read_cp15_physical(target, ARM920T_CP15_PHYS_ADDR(0, 0x1, 0), &amp;cp15_ctrl);
-	if((retval = jtag_execute_queue()) != ERROR_OK)
+	if ((retval = jtag_execute_queue()) != ERROR_OK)
 	{
 		return retval;
 	}
@@ -877,7 +833,7 @@
 
 			/* read D RAM and CAM content */
 			arm9tdmi_read_core_regs(target, 0x3fe, regs_p);
-			if((retval = jtag_execute_queue()) != ERROR_OK)
+			if ((retval = jtag_execute_queue()) != ERROR_OK)
 			{
 				return retval;
 			}
@@ -963,7 +919,7 @@
 
 			/* read I RAM and CAM content */
 			arm9tdmi_read_core_regs(target, 0x3fe, regs_p);
-			if((retval = jtag_execute_queue()) != ERROR_OK)
+			if ((retval = jtag_execute_queue()) != ERROR_OK)
 			{
 				return retval;
 			}
@@ -1066,7 +1022,7 @@
 
 	/* disable MMU and Caches */
 	arm920t_read_cp15_physical(target, ARM920T_CP15_PHYS_ADDR(0, 0x1, 0), &amp;cp15_ctrl);
-	if((retval = jtag_execute_queue()) != ERROR_OK)
+	if ((retval = jtag_execute_queue()) != ERROR_OK)
 	{
 		return retval;
 	}
@@ -1076,7 +1032,7 @@
 
 	/* read CP15 test state register */
 	arm920t_read_cp15_physical(target, ARM920T_CP15_PHYS_ADDR(0, 0xf, 0), &amp;cp15c15);
-	if((retval = jtag_execute_queue()) != ERROR_OK)
+	if ((retval = jtag_execute_queue()) != ERROR_OK)
 	{
 		return retval;
 	}
@@ -1097,7 +1053,7 @@
 
 	/* read D TLB lockdown stored to r1 */
 	arm9tdmi_read_core_regs(target, 0x2, regs_p);
-	if((retval = jtag_execute_queue()) != ERROR_OK)
+	if ((retval = jtag_execute_queue()) != ERROR_OK)
 	{
 		return retval;
 	}
@@ -1126,7 +1082,7 @@
 
 		/* read D TLB CAM content stored to r2-r9 */
 		arm9tdmi_read_core_regs(target, 0x3fc, regs_p);
-		if((retval = jtag_execute_queue()) != ERROR_OK)
+		if ((retval = jtag_execute_queue()) != ERROR_OK)
 		{
 			return retval;
 		}
@@ -1161,7 +1117,7 @@
 
 		/* read D TLB RAM content stored to r2 and r3 */
 		arm9tdmi_read_core_regs(target, 0xc, regs_p);
-		if((retval = jtag_execute_queue()) != ERROR_OK)
+		if ((retval = jtag_execute_queue()) != ERROR_OK)
 		{
 			return retval;
 		}
@@ -1193,7 +1149,7 @@
 
 	/* read I TLB lockdown stored to r1 */
 	arm9tdmi_read_core_regs(target, 0x2, regs_p);
-	if((retval = jtag_execute_queue()) != ERROR_OK)
+	if ((retval = jtag_execute_queue()) != ERROR_OK)
 	{
 		return retval;
 	}
@@ -1222,7 +1178,7 @@
 
 		/* read I TLB CAM content stored to r2-r9 */
 		arm9tdmi_read_core_regs(target, 0x3fc, regs_p);
-		if((retval = jtag_execute_queue()) != ERROR_OK)
+		if ((retval = jtag_execute_queue()) != ERROR_OK)
 		{
 			return retval;
 		}
@@ -1257,7 +1213,7 @@
 
 		/* read I TLB RAM content stored to r2 and r3 */
 		arm9tdmi_read_core_regs(target, 0xc, regs_p);
-		if((retval = jtag_execute_queue()) != ERROR_OK)
+		if ((retval = jtag_execute_queue()) != ERROR_OK)
 		{
 			return retval;
 		}
@@ -1347,7 +1303,7 @@
 				command_print(cmd_ctx, &quot;couldn't access reg %i&quot;, address);
 				return ERROR_OK;
 			}
-			if((retval = jtag_execute_queue()) != ERROR_OK)
+			if ((retval = jtag_execute_queue()) != ERROR_OK)
 			{
 				return retval;
 			}

Modified: trunk/src/target/arm926ejs.c
===================================================================
--- trunk/src/target/arm926ejs.c	2009-05-10 19:01:03 UTC (rev 1689)
+++ trunk/src/target/arm926ejs.c	2009-05-10 19:02:07 UTC (rev 1690)
@@ -133,7 +133,7 @@
 	buf_set_u32(address_buf, 0, 14, address);
 
 	jtag_add_end_state(TAP_IDLE);
-	if((retval = arm_jtag_scann(jtag_info, 0xf)) != ERROR_OK)
+	if ((retval = arm_jtag_scann(jtag_info, 0xf)) != ERROR_OK)
 	{
 		return retval;
 	}
@@ -151,20 +151,16 @@
 	fields[1].out_value = &access;
 	fields[1].in_value = &access;
 
-
 	fields[2].tap = jtag_info-&gt;tap;
 	fields[2].num_bits = 14;
 	fields[2].out_value = address_buf;
 	fields[2].in_value = NULL;
 
-
-
 	fields[3].tap = jtag_info-&gt;tap;
 	fields[3].num_bits = 1;
 	fields[3].out_value = &amp;nr_w_buf;
 	fields[3].in_value = NULL;
 
-
 	jtag_add_dr_scan(4, fields, TAP_INVALID);
 
 	/*TODO: add timeout*/
@@ -177,7 +173,7 @@
 
 		*value=le_to_h_u32(tmp);
 
-		if((retval = jtag_execute_queue()) != ERROR_OK)
+		if ((retval = jtag_execute_queue()) != ERROR_OK)
 		{
 			return retval;
 		}
@@ -209,7 +205,7 @@
 	buf_set_u32(value_buf, 0, 32, value);
 
 	jtag_add_end_state(TAP_IDLE);
-	if((retval = arm_jtag_scann(jtag_info, 0xf)) != ERROR_OK)
+	if ((retval = arm_jtag_scann(jtag_info, 0xf)) != ERROR_OK)
 	{
 		return retval;
 	}
@@ -218,43 +214,23 @@
 	fields[0].tap = jtag_info-&gt;tap;
 	fields[0].num_bits = 32;
 	fields[0].out_value = value_buf;
-
 	fields[0].in_value = NULL;
 
-
-
-
-
 	fields[1].tap = jtag_info-&gt;tap;
 	fields[1].num_bits = 1;
 	fields[1].out_value = &access;
-
 	fields[1].in_value = &access;
 
-
-
-
-
 	fields[2].tap = jtag_info-&gt;tap;
 	fields[2].num_bits = 14;
 	fields[2].out_value = address_buf;
-
 	fields[2].in_value = NULL;
 
-
-
-
-
 	fields[3].tap = jtag_info-&gt;tap;
 	fields[3].num_bits = 1;
 	fields[3].out_value = &amp;nr_w_buf;
-
 	fields[3].in_value = NULL;
 
-
-
-
-
 	jtag_add_dr_scan(4, fields, TAP_INVALID);
 	/*TODO: add timeout*/
 	do
@@ -263,7 +239,7 @@
 		access = 0;
 		nr_w_buf = 0;
 		jtag_add_dr_scan(4, fields, TAP_INVALID);
-		if((retval = jtag_execute_queue()) != ERROR_OK)
+		if ((retval = jtag_execute_queue()) != ERROR_OK)
 		{
 			return retval;
 		}
@@ -595,7 +571,7 @@
 	arm926ejs_common_t *arm926ejs = arm9tdmi-&gt;arch_info;
 	reg_t *dbg_stat = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_STAT];
 
-	if((retval = target_halt(target)) != ERROR_OK)
+	if ((retval = target_halt(target)) != ERROR_OK)
 	{
 		return retval;
 	}
@@ -607,7 +583,7 @@
 		if (buf_get_u32(dbg_stat-&gt;value, EICE_DBG_STATUS_DBGACK, 1) == 0)
 		{
 			embeddedice_read_reg(dbg_stat);
-			if((retval = jtag_execute_queue()) != ERROR_OK)
+			if ((retval = jtag_execute_queue()) != ERROR_OK)
 			{
 				return retval;
 			}
@@ -812,7 +788,7 @@
 			command_print(cmd_ctx, &quot;couldn't access register&quot;);
 			return ERROR_OK;
 		}
-		if((retval = jtag_execute_queue()) != ERROR_OK)
+		if ((retval = jtag_execute_queue()) != ERROR_OK)
 		{
 			return retval;
 		}

Modified: trunk/src/target/arm9tdmi.c
===================================================================
--- trunk/src/target/arm9tdmi.c	2009-05-10 19:01:03 UTC (rev 1689)
+++ trunk/src/target/arm9tdmi.c	2009-05-10 19:02:07 UTC (rev 1690)
@@ -128,41 +128,26 @@
 		fields[0].tap = arm7_9-&gt;jtag_info.tap;
 		fields[0].num_bits = 32;
 		fields[0].out_value = NULL;
-
 		fields[0].in_value = databus;
 
-
-		
-
-
 		fields[1].tap = arm7_9-&gt;jtag_info.tap;
 		fields[1].num_bits = 3;
 		fields[1].out_value = NULL;
-
 		fields[1].in_value = &amp;debug_reason;
 
-
-		
-
-
 		fields[2].tap = arm7_9-&gt;jtag_info.tap;
 		fields[2].num_bits = 32;
 		fields[2].out_value = NULL;
-
 		fields[2].in_value = instructionbus;
 
-
-		
-
-
-		if((retval = arm_jtag_scann(&amp;arm7_9-&gt;jtag_info, 0x1)) != ERROR_OK)
+		if ((retval = arm_jtag_scann(&amp;arm7_9-&gt;jtag_info, 0x1)) != ERROR_OK)
 		{
 			return retval;
 		}
 		arm_jtag_set_instr(&amp;arm7_9-&gt;jtag_info, arm7_9-&gt;jtag_info.intest_instr, NULL);
 
 		jtag_add_dr_scan(3, fields, TAP_DRPAUSE);
-		if((retval = jtag_execute_queue()) != ERROR_OK)
+		if ((retval = jtag_execute_queue()) != ERROR_OK)
 		{
 			return retval;
 		}
@@ -206,7 +191,7 @@
 		buf_set_u32(&amp;sysspeed_buf, 2, 1, 1);
 
 	jtag_add_end_state(TAP_DRPAUSE);
-	if((retval = arm_jtag_scann(jtag_info, 0x1)) != ERROR_OK)
+	if ((retval = arm_jtag_scann(jtag_info, 0x1)) != ERROR_OK)
 	{
 		return retval;
 	}
@@ -217,20 +202,16 @@
 	fields[0].num_bits = 32;
 	fields[0].out_value = out_buf;
 	fields[0].in_value = NULL;
-	
 
 	fields[1].tap = jtag_info-&gt;tap;
 	fields[1].num_bits = 3;
 	fields[1].out_value = &amp;sysspeed_buf;
 	fields[1].in_value = NULL;
-	
 
-
 	fields[2].tap = jtag_info-&gt;tap;
 	fields[2].num_bits = 32;
 	fields[2].out_value = instr_buf;
 	fields[2].in_value = NULL;
-	
 
 	if (in)
 	{
@@ -249,7 +230,7 @@
 
 #ifdef _DEBUG_INSTRUCTION_EXECUTION_
 	{
-		if((retval = jtag_execute_queue()) != ERROR_OK)
+		if ((retval = jtag_execute_queue()) != ERROR_OK)
 		{
 			return retval;
 		}
@@ -273,7 +254,7 @@
 	scan_field_t fields[3];
 
 	jtag_add_end_state(TAP_DRPAUSE);
-	if((retval = arm_jtag_scann(jtag_info, 0x1)) != ERROR_OK)
+	if ((retval = arm_jtag_scann(jtag_info, 0x1)) != ERROR_OK)
 	{
 		return retval;
 	}
@@ -285,19 +266,16 @@
 	fields[0].out_value = NULL;
 	u8 tmp[4];
 	fields[0].in_value = tmp;
-	
 
 	fields[1].tap = jtag_info-&gt;tap;
 	fields[1].num_bits = 3;
 	fields[1].out_value = NULL;
 	fields[1].in_value = NULL;
-	
 
 	fields[2].tap = jtag_info-&gt;tap;
 	fields[2].num_bits = 32;
 	fields[2].out_value = NULL;
 	fields[2].in_value = NULL;
-	
 
 	jtag_add_dr_scan_now(3, fields, TAP_INVALID);
 
@@ -307,7 +285,7 @@
 
 #ifdef _DEBUG_INSTRUCTION_EXECUTION_
 	{
-		if((retval = jtag_execute_queue()) != ERROR_OK)
+		if ((retval = jtag_execute_queue()) != ERROR_OK)
 		{
 			return retval;
 		}
@@ -338,7 +316,7 @@
 	scan_field_t fields[3];
 
 	jtag_add_end_state(TAP_DRPAUSE);
-	if((retval = arm_jtag_scann(jtag_info, 0x1)) != ERROR_OK)
+	if ((retval = arm_jtag_scann(jtag_info, 0x1)) != ERROR_OK)
 	{
 		return retval;
 	}
@@ -350,19 +328,16 @@
 	fields[0].out_value = NULL;
 	u8 tmp[4];
 	fields[0].in_value = tmp;
-	
 
 	fields[1].tap = jtag_info-&gt;tap;
 	fields[1].num_bits = 3;
 	fields[1].out_value = NULL;
 	fields[1].in_value = NULL;
-	
 
 	fields[2].tap = jtag_info-&gt;tap;
 	fields[2].num_bits = 32;
 	fields[2].out_value = NULL;
 	fields[2].in_value = NULL;
-	
 
 	jtag_add_dr_scan_now(3, fields, TAP_INVALID);
 
@@ -373,7 +348,7 @@
 
 #ifdef _DEBUG_INSTRUCTION_EXECUTION_
 	{
-		if((retval = jtag_execute_queue()) != ERROR_OK)
+		if ((retval = jtag_execute_queue()) != ERROR_OK)
 		{
 			return retval;
 		}
@@ -435,7 +410,7 @@
 	/* NOP fetched, BX in Execute (1) */
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_T_NOP, 0, NULL, 0);
 
-	if((retval = jtag_execute_queue()) != ERROR_OK)
+	if ((retval = jtag_execute_queue()) != ERROR_OK)
 	{
 		return;
 	}
@@ -1047,7 +1022,7 @@
 			for (i = 0; i &lt; argc; i++)
 			{
 				/* go through list of vectors */
-				for(j = 0; arm9tdmi_vectors[j].name; j++)
+				for (j = 0; arm9tdmi_vectors[j].name; j++)
 				{
 					if (strcmp(args[i], arm9tdmi_vectors[j].name) == 0)
 					{

Modified: trunk/src/target/armv4_5.c
===================================================================
--- trunk/src/target/armv4_5.c	2009-05-10 19:01:03 UTC (rev 1689)
+++ trunk/src/target/armv4_5.c	2009-05-10 19:02:07 UTC (rev 1690)
@@ -428,23 +428,23 @@
 
 	for (i = 0; i &lt; count; i++)
 	{
-		if(thumb)
+		if (thumb)
 		{
-			if((retval = target_read_u16(target, address, &amp;thumb_opcode)) != ERROR_OK)
+			if ((retval = target_read_u16(target, address, &amp;thumb_opcode)) != ERROR_OK)
 			{
 				return retval;
 			}
-			if((retval = thumb_evaluate_opcode(thumb_opcode, address, &amp;cur_instruction)) != ERROR_OK)
+			if ((retval = thumb_evaluate_opcode(thumb_opcode, address, &amp;cur_instruction)) != ERROR_OK)
 			{
 				return retval;
 			}
 		}
 		else {
-			if((retval = target_read_u32(target, address, &amp;opcode)) != ERROR_OK)
+			if ((retval = target_read_u32(target, address, &amp;opcode)) != ERROR_OK)
 			{
 				return retval;
 			}
-			if((retval = arm_evaluate_opcode(opcode, address, &amp;cur_instruction)) != ERROR_OK)
+			if ((retval = arm_evaluate_opcode(opcode, address, &amp;cur_instruction)) != ERROR_OK)
 			{
 				return retval;
 			}
@@ -502,7 +502,7 @@
 	int retval;
 	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
 
-	if((retval = target_wait_state(target, TARGET_HALTED, timeout_ms)) != ERROR_OK)
+	if ((retval = target_wait_state(target, TARGET_HALTED, timeout_ms)) != ERROR_OK)
 	{
 		return retval;
 	}
@@ -564,7 +564,7 @@
 
 	for (i = 0; i &lt; num_mem_params; i++)
 	{
-		if((retval = target_write_buffer(target, mem_params[i].address, mem_params[i].size, mem_params[i].value)) != ERROR_OK)
+		if ((retval = target_write_buffer(target, mem_params[i].address, mem_params[i].size, mem_params[i].value)) != ERROR_OK)
 		{
 			return retval;
 		}
@@ -585,7 +585,7 @@
 			exit(-1);
 		}
 
-		if((retval = armv4_5_set_core_reg(reg, reg_params[i].value)) != ERROR_OK)
+		if ((retval = armv4_5_set_core_reg(reg, reg_params[i].value)) != ERROR_OK)
 		{
 			return retval;
 		}
@@ -616,7 +616,7 @@
 		return ERROR_TARGET_FAILURE;
 	}
 
-	if((retval = target_resume(target, 0, entry_point, 1, 1)) != ERROR_OK)
+	if ((retval = target_resume(target, 0, entry_point, 1, 1)) != ERROR_OK)
 	{
 		return retval;
 	}
@@ -631,7 +631,7 @@
 	for (i = 0; i &lt; num_mem_params; i++)
 	{
 		if (mem_params[i].direction != PARAM_OUT)
-			if((retvaltemp = target_read_buffer(target, mem_params[i].address, mem_params[i].size, mem_params[i].value)) != ERROR_OK)
+			if ((retvaltemp = target_read_buffer(target, mem_params[i].address, mem_params[i].size, mem_params[i].value)) != ERROR_OK)
 			{
 					retval = retvaltemp;
 			}

Modified: trunk/src/target/armv4_5.h
===================================================================
--- trunk/src/target/armv4_5.h	2009-05-10 19:01:03 UTC (rev 1689)
+++ trunk/src/target/armv4_5.h	2009-05-10 19:02:07 UTC (rev 1690)
@@ -29,10 +29,10 @@
 
 typedef enum armv4_5_mode
 {
-	ARMV4_5_MODE_USR = 16, 
-	ARMV4_5_MODE_FIQ = 17, 
-	ARMV4_5_MODE_IRQ = 18, 
-	ARMV4_5_MODE_SVC = 19, 
+	ARMV4_5_MODE_USR = 16,
+	ARMV4_5_MODE_FIQ = 17,
+	ARMV4_5_MODE_IRQ = 18,
+	ARMV4_5_MODE_SVC = 19,
 	ARMV4_5_MODE_ABT = 23,
 	ARMV4_5_MODE_UND = 27,
 	ARMV4_5_MODE_SYS = 31,
@@ -58,7 +58,7 @@
 		cache-&gt;reg_list[armv4_5_core_reg_map[mode][num]]
 
 /* offsets into armv4_5 core register cache */
-enum 
+enum
 {
 	ARMV4_5_CPSR = 31,
 	ARMV4_5_SPSR_FIQ = 32,
@@ -85,7 +85,7 @@
 typedef struct armv4_5_algorithm_s
 {
 	int common_magic;
-		
+
 	enum armv4_5_mode core_mode;
 	enum armv4_5_state core_state;
 } armv4_5_algorithm_t;
@@ -113,7 +113,7 @@
 		case ARMV4_5_MODE_UND: return 5; break;
 		case ARMV4_5_MODE_SYS: return 6; break;
 		case ARMV4_5_MODE_ANY: return 0; break;	/* map MODE_ANY to user mode */
-		default: 
+		default:
 			LOG_ERROR(&quot;invalid mode value encountered&quot;);
 			return -1;
 	}
@@ -122,7 +122,7 @@
 /* map linear number to mode bits */
 static __inline enum armv4_5_mode armv4_5_number_to_mode(int number)
 {
-	switch(number)
+	switch (number)
 	{
 		case 0: return ARMV4_5_MODE_USR; break;
 		case 1: return ARMV4_5_MODE_FIQ; break;
@@ -131,7 +131,7 @@
 		case 4: return ARMV4_5_MODE_ABT; break;
 		case 5: return ARMV4_5_MODE_UND; break;
 		case 6: return ARMV4_5_MODE_SYS; break;
-		default: 
+		default:
 			LOG_ERROR(&quot;mode index out of bounds&quot;);
 			return ARMV4_5_MODE_ANY;
 	}
@@ -149,7 +149,7 @@
 
 /* ARM mode instructions
  */
- 
+
 /* Store multiple increment after
  * Rn: base register
  * List: for each bit in list: store register
@@ -239,7 +239,7 @@
  * CRm: second coprocessor operand
  * op2: Second coprocessor opcode
  */
-#define ARMV4_5_MRC(CP, op1, Rd, CRn, CRm, op2) (0xee100010 | (CRm) | ((op2) &lt;&lt; 5) | ((CP) &lt;&lt; 8) | ((Rd) &lt;&lt; 12) | ((CRn) &lt;&lt; 16) | ((op1) &lt;&lt; 21)) 
+#define ARMV4_5_MRC(CP, op1, Rd, CRn, CRm, op2) (0xee100010 | (CRm) | ((op2) &lt;&lt; 5) | ((CP) &lt;&lt; 8) | ((Rd) &lt;&lt; 12) | ((CRn) &lt;&lt; 16) | ((op1) &lt;&lt; 21))
 
 /* Move to coprocessor from ARM register
  * CP: Coprocessor number
@@ -249,7 +249,7 @@
  * CRm: second coprocessor operand
  * op2: Second coprocessor opcode
  */
-#define ARMV4_5_MCR(CP, op1, Rd, CRn, CRm, op2) (0xee000010 | (CRm) | ((op2) &lt;&lt; 5) | ((CP) &lt;&lt; 8) | ((Rd) &lt;&lt; 12) | ((CRn) &lt;&lt; 16) | ((op1) &lt;&lt; 21)) 
+#define ARMV4_5_MCR(CP, op1, Rd, CRn, CRm, op2) (0xee000010 | (CRm) | ((op2) &lt;&lt; 5) | ((CP) &lt;&lt; 8) | ((Rd) &lt;&lt; 12) | ((CRn) &lt;&lt; 16) | ((op1) &lt;&lt; 21))
 
 /* Breakpoint instruction (ARMv5)
  * Im: 16-bit immediate
@@ -259,7 +259,7 @@
 
 /* Thumb mode instructions
  */
- 
+
 /* Store register (Thumb mode)
  * Rd: source register
  * Rn: base register
@@ -277,12 +277,12 @@
  * List: for each bit in list: store register
  */
 #define ARMV4_5_T_LDMIA(Rn, List) ((0xc800 | ((Rn) &lt;&lt; 8) | (List)) | ((0xc800 | ((Rn) &lt;&lt; 8) | List) &lt;&lt; 16))
- 
+
 /* Load register with PC relative addressing
  * Rd: register to load
  */
-#define ARMV4_5_T_LDR_PCREL(Rd)	((0x4800 | ((Rd) &lt;&lt; 8)) | ((0x4800 | ((Rd) &lt;&lt; 8)) &lt;&lt; 16)) 
- 
+#define ARMV4_5_T_LDR_PCREL(Rd)	((0x4800 | ((Rd) &lt;&lt; 8)) | ((0x4800 | ((Rd) &lt;&lt; 8)) &lt;&lt; 16))
+
 /* Move hi register (Thumb mode)
  * Rd: destination register
  * Rm: source register

Modified: trunk/src/target/armv4_5_cache.c
===================================================================
--- trunk/src/target/armv4_5_cache.c	2009-05-10 19:01:03 UTC (rev 1689)
+++ trunk/src/target/armv4_5_cache.c	2009-05-10 19:02:07 UTC (rev 1690)
@@ -63,7 +63,7 @@
 		M = (cache_type_reg &amp; 0x4) &gt;&gt; 2;
 		len = (cache_type_reg &amp; 0x3);
 		multiplier = 2 + M;
-		
+
 		if ((assoc != 0) || (M != 1)) /* assoc 0 and M 1 means cache absent */
 		{
 			/* cache is present */
@@ -85,7 +85,7 @@
 	{
 		cache-&gt;i_size = cache-&gt;d_u_size;
 	}
-	
+
 	return ERROR_OK;
 }
 
@@ -96,21 +96,21 @@
 		command_print(cmd_ctx, &quot;cache not yet identified&quot;);
 		return ERROR_OK;
 	}
-		
-	command_print(cmd_ctx, &quot;cache type: 0x%1.1x, %s&quot;, armv4_5_cache-&gt;ctype, 
+
+	command_print(cmd_ctx, &quot;cache type: 0x%1.1x, %s&quot;, armv4_5_cache-&gt;ctype,
 		(armv4_5_cache-&gt;separate) ? &quot;separate caches&quot; : &quot;unified cache&quot;);
 
-	command_print(cmd_ctx, &quot;D-Cache: linelen %i, associativity %i, nsets %i, cachesize 0x%x&quot;, 
+	command_print(cmd_ctx, &quot;D-Cache: linelen %i, associativity %i, nsets %i, cachesize 0x%x&quot;,
 		armv4_5_cache-&gt;d_u_size.linelen,
 		armv4_5_cache-&gt;d_u_size.associativity,
 		armv4_5_cache-&gt;d_u_size.nsets,
 		armv4_5_cache-&gt;d_u_size.cachesize);
 
-	command_print(cmd_ctx, &quot;I-Cache: linelen %i, associativity %i, nsets %i, cachesize 0x%x&quot;, 
+	command_print(cmd_ctx, &quot;I-Cache: linelen %i, associativity %i, nsets %i, cachesize 0x%x&quot;,
 		armv4_5_cache-&gt;i_size.linelen,
 		armv4_5_cache-&gt;i_size.associativity,
 		armv4_5_cache-&gt;i_size.nsets,
 		armv4_5_cache-&gt;i_size.cachesize);
-	
+
 	return ERROR_OK;
 }

Modified: trunk/src/target/armv4_5_mmu.c
===================================================================
--- trunk/src/target/armv4_5_mmu.c	2009-05-10 19:01:03 UTC (rev 1689)
+++ trunk/src/target/armv4_5_mmu.c	2009-05-10 19:02:07 UTC (rev 1690)
@@ -89,9 +89,9 @@
 			(first_lvl_descriptor &amp; 0xfffff000) | ((va &amp; 0x000ffc00) &gt;&gt; 8),
 			4, 1, (u8*)&amp;second_lvl_descriptor);
 	}
-	
+
 	second_lvl_descriptor = target_buffer_get_u32(target, (u8*)&amp;second_lvl_descriptor);
-	
+
 	LOG_DEBUG(&quot;2nd lvl desc: %8.8x&quot;, second_lvl_descriptor);
 
 	if ((second_lvl_descriptor &amp; 0x3) == 0)
@@ -163,14 +163,14 @@
 
 	/* disable MMU and data (or unified) cache */
 	armv4_5_mmu-&gt;disable_mmu_caches(target, 1, 1, 0);
-	
+
 	retval = armv4_5_mmu-&gt;write_memory(target, address, size, count, buffer);
 
 	/* reenable MMU / cache */
 	armv4_5_mmu-&gt;enable_mmu_caches(target, armv4_5_mmu-&gt;mmu_enabled,
 		armv4_5_mmu-&gt;armv4_5_cache.d_u_cache_enabled,
 		armv4_5_mmu-&gt;armv4_5_cache.i_cache_enabled);
-	
+
 	return retval;
 }
 
@@ -182,7 +182,7 @@
 	u32 cb;
 	int domain;
 	u32 ap;
-	
+
 	if (target-&gt;state != TARGET_HALTED)
 	{
 		command_print(cmd_ctx, &quot;target must be stopped for \&quot;virt2phys\&quot; command&quot;);
@@ -211,11 +211,11 @@
 			}
 			return ERROR_OK;
 		}
-	
+
 		command_print(cmd_ctx, &quot;0x%8.8x -&gt; 0x%8.8x, type: %s, cb: %i, domain: %i, ap: %2.2x&quot;,
 			va, pa, armv4_5_mmu_page_type_names[type], cb, domain, ap);
-	}			
-	
+	}
+
 	return ERROR_OK;
 }
 
@@ -272,7 +272,7 @@
 				break;
 			case ERROR_TARGET_NOT_HALTED:
 				command_print(cmd_ctx, &quot;error: target must be halted for memory accesses&quot;);
-				break;			
+				break;
 			case ERROR_TARGET_DATA_ABORT:
 				command_print(cmd_ctx, &quot;error: access caused data abort, system possibly corrupted&quot;);
 				break;
@@ -287,7 +287,7 @@
 	{
 		if (i%8 == 0)
 			output_len += snprintf(output + output_len, 128 - output_len, &quot;0x%8.8x: &quot;, address + (i*size));
-		
+
 		switch (size)
 		{
 			case 4:
@@ -309,7 +309,7 @@
 	}
 
 	free(buffer);
-	
+
 	return ERROR_OK;
 }
 
@@ -365,7 +365,7 @@
 			break;
 		default:
 			command_print(cmd_ctx, &quot;error: unknown error&quot;);
-	}	
+	}
 
 	return ERROR_OK;
 }


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000473.html">[Openocd-svn] r1689 - trunk/src/target
</A></li>
	<LI>Next message: <A HREF="000475.html">[Openocd-svn] r1691 - in trunk/src: . helper
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#474">[ date ]</a>
              <a href="thread.html#474">[ thread ]</a>
              <a href="subject.html#474">[ subject ]</a>
              <a href="author.html#474">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-svn">More information about the openocd-svn
mailing list</a><br>
</body></html>
