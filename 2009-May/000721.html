<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-svn] r1937 - trunk/doc
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-svn/2009-May/index.html" >
   <LINK REL="made" HREF="mailto:openocd-svn%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-svn%5D%20r1937%20-%20trunk/doc&In-Reply-To=%3C200905280111.n4S1BE9p028543%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000720.html">
   <LINK REL="Next"  HREF="000722.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-svn] r1937 - trunk/doc</H1>
    <B>zwelch at mail.berlios.de</B> 
    <A HREF="mailto:openocd-svn%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-svn%5D%20r1937%20-%20trunk/doc&In-Reply-To=%3C200905280111.n4S1BE9p028543%40sheep.berlios.de%3E"
       TITLE="[Openocd-svn] r1937 - trunk/doc">zwelch at mail.berlios.de
       </A><BR>
    <I>Thu May 28 03:11:14 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000720.html">[Openocd-svn] r1936 - trunk/doc
</A></li>
        <LI>Next message: <A HREF="000722.html">[Openocd-svn] r1938 - trunk/doc
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#721">[ date ]</a>
              <a href="thread.html#721">[ thread ]</a>
              <a href="subject.html#721">[ subject ]</a>
              <a href="author.html#721">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: zwelch
Date: 2009-05-28 03:11:10 +0200 (Thu, 28 May 2009)
New Revision: 1937

Modified:
   trunk/doc/openocd.texi
Log:
David Brownell &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">david-b at pacbell.net</A>&gt;:

Start updating the NOR flash coverage to use @deffn syntax, so the
commands have more consistent presentation and formatting.  This
reorganizes information and updates its presentation, except where
the information didn't really match the code.

This patch updates most of the driver specific support, creating one
new (and alphabetized!) section just for driver-specific data, where
previously that data was split over up to three sections.  Of note:

 - The at91sam7 docs were a bit out of date with respect to the code.

 - The &quot;str9xpec&quot; stuff still deserves some work.  For now, it sits
   in its own subsection; pretty messy.

 - Likewise the &quot;mflash&quot; stuff.  That's a parallel infrastructure,
   and is now in a section of its own.

 - The &quot;mass_erase&quot; commands for the Cortex M3 chips got turned into
   footnotes.  IMO, they should vanish sometime; they're superfluous.

 - There are still a bunch of undocumented NOR drivers.  Examples:
   avr(8), tms470, pic32mx, more.

Plus there are a handful of minor tweaks to the NAND docs (to help make
the NOR and NAND presentations be parallel); the &quot;Command Index&quot; has
been renamed as the &quot;Command and Driver Index&quot;; reference TI instead
of Luminary Micro in several places.


Modified: trunk/doc/openocd.texi
===================================================================
--- trunk/doc/openocd.texi	2009-05-28 00:47:30 UTC (rev 1936)
+++ trunk/doc/openocd.texi	2009-05-28 01:11:10 UTC (rev 1937)
@@ -82,7 +82,7 @@
 @comment Occurs when creating ``--html --no-split'' output
 @comment This fix is based on: <A HREF="http://sourceware.org/ml/binutils/2006-05/msg00215.html">http://sourceware.org/ml/binutils/2006-05/msg00215.html</A>
 * OpenOCD Concept Index::            Concept Index
-* OpenOCD Command Index::            Command Index
+* Command and Driver Index::         Command and Driver Index
 @end menu
 
 @node About
@@ -110,7 +110,7 @@
 
 @b{GDB Debug:} It allows ARM7 (ARM7TDMI and ARM720t), ARM9 (ARM920T,
 ARM922T, ARM926EJ--S, ARM966E--S), XScale (PXA25x, IXP42x) and
-Cortex-M3 (Luminary Stellaris LM3 and ST STM32) based cores to be
+Cortex-M3 (Stellaris LM3 and ST STM32) based cores to be
 debugged via the GDB protocol.
 
 @b{Flash Programing:} Flash writing is supported for external CFI
@@ -497,7 +497,7 @@
 @item @b{signalyzer}
 @* See: @url{<A HREF="http://www.signalyzer.com">http://www.signalyzer.com</A>}
 @item @b{evb_lm3s811}
-@* See: @url{<A HREF="http://www.luminarymicro.com">http://www.luminarymicro.com</A>} - The Luminary Micro Stellaris LM3S811 eval board has an FTD2232C chip built in.
+@* See: @url{<A HREF="http://www.luminarymicro.com">http://www.luminarymicro.com</A>} - The Stellaris LM3S811 eval board has an FTD2232C chip built in.
 @item @b{olimex-jtag}
 @* See: @url{<A HREF="http://www.olimex.com">http://www.olimex.com</A>}
 @item @b{flyswatter}
@@ -2398,204 +2398,265 @@
 @*Enable (@var{on}) or disable (@var{off}) protection of flash sectors &lt;@var{first}&gt; to
 &lt;@var{last}&gt; of @option{flash bank} &lt;@var{num}&gt;.
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at subsection</A> mFlash commands
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at cindex</A> mFlash commands
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at section</A> flash bank command
+The @command{flash bank} command is used to configure one or more flash
+chips (or @emph{banks} in OpenOCD terms).
+Most CPUs have the ablity to ``boot'' from the first flash bank.
+
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at quotation</A> Note
+This command is not available after OpenOCD initialization has completed.
+Use it in board specific configuration files, not interactively.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at end</A> quotation
+
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at deffn</A> {Config Command} {flash bank} driver base size chip_width bus_width target [driver_options]
+Configures a flash bank which provides persistent storage
+for addresses from @math{base} to @math{base + size - 1}.
+These banks will often be visible to GDB through the target's memory map.
+In some cases, configuring a flash bank will activate extra commands;
+see the driver-specific documentation.
+
 @itemize @bullet
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at item</A> @b{mflash probe} 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at cindex</A> mflash probe
-@*Probe mflash.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at item</A> @b{mflash write} &lt;@var{num}&gt; &lt;@var{file}&gt; &lt;@var{offset}&gt;
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at cindex</A> mflash write
-@*Write the binary &lt;@var{file}&gt; to mflash bank &lt;@var{num}&gt;, starting at
-&lt;@var{offset}&gt; bytes from the beginning of the bank.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at item</A> @b{mflash dump} &lt;@var{num}&gt; &lt;@var{file}&gt; &lt;@var{offset}&gt; &lt;@var{size}&gt;
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at cindex</A> mflash dump
-@*Dump &lt;size&gt; bytes, starting at &lt;@var{offset}&gt; bytes from the beginning of the &lt;@var{num}&gt; bank 
-to a &lt;@var{file}&gt;.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at item</A> @b{mflash config pll} &lt;@var{frequency}&gt;
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at cindex</A> mflash config pll
-@*Configure mflash pll. &lt;@var{frequency}&gt; is input frequency of mflash. The order is Hz.
-Issuing this command will erase mflash's whole internal nand and write new pll. 
-After this command, mflash needs power-on-reset for normal operation.
-If pll was newly configured, storage and boot(optional) info also need to be update.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at item</A> @b{mflash config boot}
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at cindex</A> mflash config boot
-@*Configure bootable option. If bootable option is set, mflash offer the first 8 sectors
-(4kB) for boot.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at item</A> @b{mflash config storage}
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at cindex</A> mflash config storage
-@*Configure storage information. For the normal storage operation, this information must be
-written. 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at item</A> @var{driver} ... identifies the controller driver
+associated with the flash bank being declared.
+This is usually @code{cfi} for external flash, or else
+the name of a microcontroller with embedded flash memory.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at xref</A>{Flash Driver List}.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at item</A> @var{base} ... Base address of the flash chip.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at item</A> @var{size} ... Size of the chip, in bytes.
+For some drivers, this value is detected from the hardware.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at item</A> @var{chip_width} ... Width of the flash chip, in bytes;
+ignored for most microcontroller drivers.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at item</A> @var{bus_width} ... Width of the data bus used to access the
+chip, in bytes; ignored for most microcontroller drivers.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at item</A> @var{target} ... Names the target used to issue
+commands to the flash controller.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at comment</A> Actually, it's currently a controller-specific parameter...
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at item</A> @var{driver_options} ... drivers may support, or require,
+additional parameters.  See the driver-specific documentation
+for more information.
 @end itemize
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at end</A> deffn
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at section</A> flash bank command
-The @b{flash bank} command is used to configure one or more flash chips (or banks in OpenOCD terms)
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at section</A> Flash Drivers, Options, and Commands
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at anchor</A>{Flash Driver List}
+As noted above, the @command{flash bank} command requires a driver name,
+and allows driver-specific options and behaviors.
+Some drivers also activate driver-specific commands.
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at example</A>
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at b</A>{flash bank} &lt;@var{driver}&gt; &lt;@var{base}&gt; &lt;@var{size}&gt; &lt;@var{chip_width}&gt;
-&lt;@var{bus_width}&gt; &lt;@var{target}&gt; [@var{driver_options ...}]
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at end</A> example
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at cindex</A> flash bank
-@*Configures a flash bank at &lt;@var{base}&gt; of &lt;@var{size}&gt; bytes and &lt;@var{chip_width}&gt;
-and &lt;@var{bus_width}&gt; bytes using the selected flash &lt;driver&gt;.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at subsection</A> External Flash
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at subsection</A> External Flash - cfi options
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at cindex</A> cfi options
-CFI flashes are external flash chips - often they are connected to a
-specific chip select on the CPU. By default, at hard reset, most
-CPUs have the ablity to ``boot'' from some flash chip - typically
-attached to the CPU's CS0 pin.
-
-For other chip selects: OpenOCD does not know how to configure, or
-access a specific chip select. Instead you, the human, might need to 
-configure additional chip selects via other commands (like: mww) , or
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at deffn</A> {Flash Driver} cfi
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at cindex</A> Common Flash Interface
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at cindex</A> CFI
+The ``Common Flash Interface'' (CFI) is the main standard for
+external NOR flash chips, each of which connects to a
+specific external chip select on the CPU.
+Frequently the first such chip is used to boot the system.
+Your board's @code{reset-init} handler might need to
+configure additional chip selects using other commands (like: @command{mww} to
+configure a bus and its timings) , or
 perhaps configure a GPIO pin that controls the ``write protect'' pin
 on the flash chip.
+The CFI driver can use a target-specific working area to significantly
+speed up operation.
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at b</A>{flash bank cfi} &lt;@var{base}&gt; &lt;@var{size}&gt; &lt;@var{chip_width}&gt; &lt;@var{bus_width}&gt;
-&lt;@var{target}&gt; [@var{jedec_probe}|@var{x16_as_x8}]
-@*CFI flashes require the name or number of the target they're connected to
-as an additional
-argument. The CFI driver makes use of a working area (specified for the target)
-to significantly speed up operation. 
+The CFI driver can accept the following optional parameters, in any order:
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at var</A>{chip_width} and @var{bus_width} are specified in bytes.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at itemize</A>
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at item</A> @var{jedec_probe} ... is used to detect certain non-CFI flash ROMs,
+like AM29LV010 and similar types.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at item</A> @var{x16_as_x8} ...
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at end</A> itemize
 
-The @var{jedec_probe} option is used to detect certain non-CFI flash ROMs, like AM29LV010 and similar types.
+To configure two adjacent banks of 16 MBytes each, both sixteen bits (two bytes)
+wide on a sixteen bit bus:
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at var</A>{x16_as_x8} ???
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at example</A>
+flash bank cfi 0x00000000 0x01000000 2 2 $_TARGETNAME
+flash bank cfi 0x01000000 0x01000000 2 2 $_TARGETNAME
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at end</A> example
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at end</A> deffn
 
 @subsection Internal Flash (Microcontrollers)
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at subsubsection</A> lpc2000 options
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at cindex</A> lpc2000 options
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at b</A>{flash bank lpc2000} &lt;@var{base}&gt; &lt;@var{size}&gt; 0 0 &lt;@var{target}&gt; &lt;@var{variant}&gt;
-&lt;@var{clock}&gt; [@var{calc_checksum}]
-@*LPC flashes don't require the chip and bus width to be specified. Additional
-parameters are the &lt;@var{variant}&gt;, which may be @var{lpc2000_v1} (older LPC21xx and LPC22xx)
-or @var{lpc2000_v2} (LPC213x, LPC214x, LPC210[123], LPC23xx and LPC24xx),
-the name or number of the target this flash belongs to (first is 0),
-the frequency at which the core
-is currently running (in kHz - must be an integral number), and the optional keyword
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at var</A>{calc_checksum}, telling the driver to calculate a valid checksum for the exception
-vector table. 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at deffn</A> {Flash Driver} aduc702x
+The ADUC702x analog microcontrollers from ST Micro
+include internal flash and use ARM7TDMI cores.
+The aduc702x flash driver works with models ADUC7019 through ADUC7028.
+The setup command only requires the @var{target} argument
+since all devices in this family have the same memory layout.
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at example</A>
+flash bank aduc702x 0 0 0 0 $_TARGETNAME
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at end</A> example
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at end</A> deffn
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at subsubsection</A> at91sam7 options
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at cindex</A> at91sam7 options
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at deffn</A> {Flash Driver} at91sam7
+All members of the AT91SAM7 microcontroller family from Atmel
+include internal flash and use ARM7TDMI cores.
+The driver automatically recognizes a number of these chips using
+the chip identification register, and autoconfigures itself.
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at b</A>{flash bank at91sam7} 0 0 0 0 &lt;@var{target}&gt;
-@*AT91SAM7 flashes only require the @var{target}, all other values are looked up after
-reading the chip-id and type. 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at example</A>
+flash bank at91sam7 0 0 0 0 $_TARGETNAME
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at end</A> example
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at subsubsection</A> str7 options
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at cindex</A> str7 options
+For chips which are not recognized by the controller driver, you must
+provide additional parameters in the following order:
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at b</A>{flash bank str7x} &lt;@var{base}&gt; &lt;@var{size}&gt; 0 0 &lt;@var{target}&gt; &lt;@var{variant}&gt;
-@*variant can be either STR71x, STR73x or STR75x. 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at itemize</A>
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at item</A> @var{chip_model} ... label used with @command{flash info}
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at item</A> @var{banks}
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at item</A> @var{sectors_per_bank}
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at item</A> @var{pages_per_sector}
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at item</A> @var{pages_size}
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at item</A> @var{num_nvm_bits}
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at item</A> @var{freq_khz} ... required if an external clock is provided,
+optional (but recommended) when the oscillator frequency is known
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at end</A> itemize
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at subsubsection</A> str9 options
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at cindex</A> str9 options
+It is recommended that you provide zeroes for all of those values
+except the clock frequency, so that everything except that frequency
+will be autoconfigured.
+Knowing the frequency helps ensure correct timings for flash access.
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at b</A>{flash bank str9x} &lt;@var{base}&gt; &lt;@var{size}&gt; 0 0 &lt;@var{target}&gt;
-@*The str9 needs the flash controller to be configured prior to Flash programming, e.g.
+The flash controller handles erases automatically on a page (128/256 byte)
+basis, so explicit erase commands are not necessary for flash programming.
+However, there is an ``EraseAll`` command that can erase an entire flash
+plane (of up to 256KB), and it will be used automatically when you issue
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at command</A>{flash erase_sector} or @command{flash erase_address} commands.
+
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at deffn</A> Command {at91sam7 gpnvm} bitnum (set|clear)
+Set or clear a ``General Purpose Non-Volatle Memory'' (GPNVM)
+bit for the processor.   Each processor has a number of such bits,
+used for controlling features such as brownout detection (so they
+are not truly general purpose).
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at quotation</A> Note
+This assumes that the first flash bank (number 0) is associated with
+the appropriate at91sam7 target.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at end</A> quotation
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at end</A> deffn
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at end</A> deffn
+
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at deffn</A> {Flash Driver} lpc2000
+Most members of the LPC2000 microcontroller family from NXP
+include internal flash and use ARM7TDMI cores.
+The @var{lpc2000} driver defines two mandatory and one optional parameters,
+which must appear in the following order:
+
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at itemize</A>
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at item</A> @var{variant} ... required, may be
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at var</A>{lpc2000_v1} (older LPC21xx and LPC22xx)
+or @var{lpc2000_v2} (LPC213x, LPC214x, LPC210[123], LPC23xx and LPC24xx)
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at item</A> @var{clock_kHz} ... the frequency, in kiloHertz,
+at which the core is running
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at item</A> @var{calc_checksum} ... optional (but you probably want to provide this!),
+telling the driver to calculate a valid checksum for the exception vector table.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at end</A> itemize
+
+LPC flashes don't require the chip and bus width to be specified.
+
 @example
-str9x flash_config 0 4 2 0 0x80000
+flash bank lpc2000 0x0 0x7d000 0 0 $_TARGETNAME \
+      lpc2000_v2 14765 calc_checksum
 @end example
-This will setup the BBSR, NBBSR, BBADR and NBBADR registers respectively. 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at end</A> deffn
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at subsubsection</A> str9 options (str9xpec driver)
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at deffn</A> {Flash Driver} stellaris
+All members of the Stellaris LM3Sxxx microcontroller family from
+Texas Instruments
+include internal flash and use ARM Cortex M3 cores.
+The driver automatically recognizes a number of these chips using
+the chip identification register, and autoconfigures itself.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at footnote</A>{Currently there is a @command{stellaris mass_erase} command.
+That seems pointless since the same effect can be had using the
+standard @command{flash erase_address} command.}
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at b</A>{flash bank str9xpec} &lt;@var{base}&gt; &lt;@var{size}&gt; 0 0 &lt;@var{target}&gt;
-@*Before using the flash commands the turbo mode must be enabled using str9xpec
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at option</A>{enable_turbo} &lt;@var{num&gt;.}
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at example</A>
+flash bank stellaris 0 0 0 0 $_TARGETNAME
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at end</A> example
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at end</A> deffn
 
-Only use this driver for locking/unlocking the device or configuring the option bytes.
-Use the standard str9 driver for programming. @xref{STR9 specific commands}.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at deffn</A> {Flash Driver} stm32x
+All members of the STM32 microcontroller family from ST Microelectronics
+include internal flash and use ARM Cortex M3 cores.
+The driver automatically recognizes a number of these chips using
+the chip identification register, and autoconfigures itself.
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at subsubsection</A> Stellaris (LM3Sxxx) options
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at cindex</A> Stellaris (LM3Sxxx) options
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at example</A>
+flash bank stm32x 0 0 0 0 $_TARGETNAME
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at end</A> example
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at b</A>{flash bank stellaris} &lt;@var{base}&gt; &lt;@var{size}&gt; 0 0 &lt;@var{target}&gt;
-@*Stellaris flash plugin only require the @var{target}.
+Some stm32x-specific commands
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at footnote</A>{Currently there is a @command{stm32x mass_erase} command.
+That seems pointless since the same effect can be had using the
+standard @command{flash erase_address} command.}
+are defined:
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at subsubsection</A> stm32x options
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at cindex</A> stm32x options
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at deffn</A> Command {stm32x lock} num
+Locks the entire stm32 device.
+The @var{num} parameter is a value shown by @command{flash banks}.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at end</A> deffn
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at b</A>{flash bank stm32x} &lt;@var{base}&gt; &lt;@var{size}&gt; 0 0 &lt;@var{target}&gt;
-@*stm32x flash plugin only require the @var{target}.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at deffn</A> Command {stm32x unlock} num
+Unlocks the entire stm32 device.
+The @var{num} parameter is a value shown by @command{flash banks}.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at end</A> deffn
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at subsubsection</A> aduc702x options
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at cindex</A> aduc702x options
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at deffn</A> Command {stm32x options_read} num
+Read and display the stm32 option bytes written by
+the @command{stm32x options_write} command.
+The @var{num} parameter is a value shown by @command{flash banks}.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at end</A> deffn
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at b</A>{flash bank aduc702x} 0 0 0 0 &lt;@var{target}&gt;
-@*The aduc702x flash plugin works with Analog Devices model numbers ADUC7019 through ADUC7028.  The setup command only requires the @var{target} argument (all devices in this family have the same memory layout).
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at deffn</A> Command {stm32x options_write} num (SWWDG|HWWDG) (RSTSTNDBY|NORSTSTNDBY) (RSTSTOP|NORSTSTOP)
+Writes the stm32 option byte with the specified values.
+The @var{num} parameter is a value shown by @command{flash banks}.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at end</A> deffn
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at end</A> deffn
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at subsection</A> mFlash Configuration
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at cindex</A> mFlash Configuration
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at b</A>{mflash bank} &lt;@var{soc}&gt; &lt;@var{base}&gt; &lt;@var{RST pin}&gt; &lt;@var{target}&gt;
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at cindex</A> mflash bank
-@*Configures a mflash for &lt;@var{soc}&gt; host bank at
-&lt;@var{base}&gt;. Pin number format is dependent on host GPIO calling convention.
-Currently, mflash bank support s3c2440 and pxa270.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at deffn</A> {Flash Driver} str7x
+All members of the STR7 microcontroller family from ST Microelectronics
+include internal flash and use ARM7TDMI cores.
+The @var{str7x} driver defines one mandatory parameter, @var{variant},
+which is either @code{STR71x}, @code{STR73x} or @code{STR75x}.
 
-(ex. of s3c2440) mflash &lt;@var{RST pin}&gt; is GPIO B1.
 @example
-mflash bank s3c2440 0x10000000 1b 0
+flash bank str7x 0x40000000 0x00040000 0 0 $_TARGETNAME STR71x
 @end example
-(ex. of pxa270) mflash &lt;@var{RST pin}&gt; is GPIO 43.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at end</A> deffn
+
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at deffn</A> {Flash Driver} str9x
+Most members of the STR9 microcontroller family from ST Microelectronics
+include internal flash and use ARM966E cores.
+The str9 needs the flash controller to be configured using
+the @command{str9x flash_config} command prior to Flash programming.
+
 @example
-mflash bank pxa270 0x08000000 43 0  
+flash bank str9x 0x40000000 0x00040000 0 0 $_TARGETNAME
+str9x flash_config 0 4 2 0 0x80000
 @end example
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at section</A> Microcontroller specific Flash Commands
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at deffn</A> Command {str9x flash_config} num bbsr nbbsr bbadr nbbadr
+Configures the str9 flash controller.
+The @var{num} parameter is a value shown by @command{flash banks}.
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at subsection</A> AT91SAM7 specific commands
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at cindex</A> AT91SAM7 specific commands
-The flash configuration is deduced from the chip identification register. The flash
-controller handles erases automatically on a page (128/265 byte) basis, so erase is
-not necessary for flash programming. AT91SAM7 processors with less than 512K flash
-only have a single flash bank embedded on chip. AT91SAM7xx512 have two flash planes
-that can be erased separatly. Only an EraseAll command is supported by the controller
-for each flash plane and this is called with
 @itemize @bullet
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at item</A> @b{flash erase} &lt;@var{num}&gt; @var{first_plane} @var{last_plane}
-@*bulk erase flash planes first_plane to last_plane. 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at item</A> @b{at91sam7 gpnvm} &lt;@var{num}&gt; &lt;@var{bit}&gt; &lt;@option{set}|@option{clear}&gt;
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at cindex</A> at91sam7 gpnvm
-@*set or clear a gpnvm bit for the processor 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at item</A> @var{bbsr} - Boot Bank Size register
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at item</A> @var{nbbsr} - Non Boot Bank Size register
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at item</A> @var{bbadr} - Boot Bank Start Address register
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at item</A> @var{nbbadr} - Boot Bank Start Address register
 @end itemize
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at end</A> deffn
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at subsection</A> STR9 specific commands
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at cindex</A> STR9 specific commands
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at anchor</A>{STR9 specific commands}
-These are flash specific commands when using the str9xpec driver.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at itemize</A> @bullet
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at item</A> @b{str9xpec enable_turbo} &lt;@var{num}&gt;
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at cindex</A> str9xpec enable_turbo
-@*enable turbo mode, will simply remove the str9 from the chain and talk
-directly to the embedded flash controller. 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at item</A> @b{str9xpec disable_turbo} &lt;@var{num}&gt;
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at cindex</A> str9xpec disable_turbo
-@*restore the str9 into JTAG chain. 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at item</A> @b{str9xpec lock} &lt;@var{num}&gt;
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at cindex</A> str9xpec lock
-@*lock str9 device. The str9 will only respond to an unlock command that will
-erase the device. 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at item</A> @b{str9xpec unlock} &lt;@var{num}&gt;
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at cindex</A> str9xpec unlock
-@*unlock str9 device. 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at item</A> @b{str9xpec options_read} &lt;@var{num}&gt;
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at cindex</A> str9xpec options_read
-@*read str9 option bytes. 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at item</A> @b{str9xpec options_write} &lt;@var{num}&gt;
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at cindex</A> str9xpec options_write
-@*write str9 option bytes. 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at end</A> itemize
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at end</A> deffn
 
-Note: Before using the str9xpec driver here is some background info to help
-you better understand how the drivers works. OpenOCD has two flash drivers for
-the str9.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at subsection</A> str9xpec driver
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at cindex</A> str9xpec
+
+Here is some background info to help
+you better understand how this driver works. OpenOCD has two flash drivers for
+the str9:
 @enumerate
 @item
 Standard driver @option{str9x} programmed via the str9 core. Normally used for
@@ -2630,25 +2691,45 @@
 has been locked. Halting the core is not required for the @option{str9xpec} driver
 as mentioned above, just issue the commands above manually or from a telnet prompt.
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at subsection</A> STR9 configuration
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at cindex</A> STR9 configuration
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at subsubsection</A> str9xpec driver options
+
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at b</A>{flash bank str9xpec} &lt;@var{base}&gt; &lt;@var{size}&gt; 0 0 &lt;@var{target}&gt;
+@*Before using the flash commands the turbo mode must be enabled using str9xpec
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at option</A>{enable_turbo} &lt;@var{num&gt;.}
+
+Only use this driver for locking/unlocking the device or configuring the option bytes.
+Use the standard str9 driver for programming.
+
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at subsubsection</A> str9xpec specific commands
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at cindex</A> str9xpec specific commands
+These are flash specific commands when using the str9xpec driver.
+
 @itemize @bullet
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at item</A> @b{str9x flash_config} &lt;@var{bank}&gt; &lt;@var{BBSR}&gt; &lt;@var{NBBSR}&gt;
-&lt;@var{BBADR}&gt; &lt;@var{NBBADR}&gt;
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at cindex</A> str9x flash_config
-@*Configure str9 flash controller.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at example</A>
-e.g. str9x flash_config 0 4 2 0 0x80000
-This will setup
-BBSR - Boot Bank Size register
-NBBSR - Non Boot Bank Size register
-BBADR - Boot Bank Start Address register
-NBBADR - Boot Bank Start Address register
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at end</A> example
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at item</A> @b{str9xpec enable_turbo} &lt;@var{num}&gt;
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at cindex</A> str9xpec enable_turbo
+@*enable turbo mode, will simply remove the str9 from the chain and talk
+directly to the embedded flash controller.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at item</A> @b{str9xpec disable_turbo} &lt;@var{num}&gt;
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at cindex</A> str9xpec disable_turbo
+@*restore the str9 into JTAG chain.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at item</A> @b{str9xpec lock} &lt;@var{num}&gt;
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at cindex</A> str9xpec lock
+@*lock str9 device. The str9 will only respond to an unlock command that will
+erase the device.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at item</A> @b{str9xpec unlock} &lt;@var{num}&gt;
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at cindex</A> str9xpec unlock
+@*unlock str9 device.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at item</A> @b{str9xpec options_read} &lt;@var{num}&gt;
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at cindex</A> str9xpec options_read
+@*read str9 option bytes.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at item</A> @b{str9xpec options_write} &lt;@var{num}&gt;
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at cindex</A> str9xpec options_write
+@*write str9 option bytes.
 @end itemize
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at subsection</A> STR9 option byte configuration
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at subsubsection</A> STR9 option byte configuration
 @cindex STR9 option byte configuration
+
 @itemize @bullet
 @item @b{str9xpec options_cmap} &lt;@var{num}&gt; &lt;@option{bank0}|@option{bank1}&gt;
 @cindex str9xpec options_cmap
@@ -2664,37 +2745,57 @@
 @*configure str9 lvd reset warning source. 
 @end itemize
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at subsection</A> STM32x specific commands
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at cindex</A> STM32x specific commands
- 
-These are flash specific commands when using the stm32x driver.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at itemize</A> @bullet
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at item</A> @b{stm32x lock} &lt;@var{num}&gt;
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at cindex</A> stm32x lock
-@*lock stm32 device. 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at item</A> @b{stm32x unlock} &lt;@var{num}&gt;
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at cindex</A> stm32x unlock
-@*unlock stm32 device. 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at item</A> @b{stm32x options_read} &lt;@var{num}&gt;
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at cindex</A> stm32x options_read
-@*read stm32 option bytes. 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at item</A> @b{stm32x options_write} &lt;@var{num}&gt; &lt;@option{SWWDG}|@option{HWWDG}&gt;
-&lt;@option{RSTSTNDBY}|@option{NORSTSTNDBY}&gt; &lt;@option{RSTSTOP}|@option{NORSTSTOP}&gt;
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at cindex</A> stm32x options_write
-@*write stm32 option bytes. 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at item</A> @b{stm32x mass_erase} &lt;@var{num}&gt;
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at cindex</A> stm32x mass_erase
-@*mass erase flash memory. 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at end</A> itemize
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at section</A> mFlash
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at subsection</A> Stellaris specific commands
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at cindex</A> Stellaris specific commands
- 
-These are flash specific commands when using the Stellaris driver.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at subsection</A> mFlash Configuration
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at cindex</A> mFlash Configuration
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at b</A>{mflash bank} &lt;@var{soc}&gt; &lt;@var{base}&gt; &lt;@var{RST pin}&gt; &lt;@var{target}&gt;
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at cindex</A> mflash bank
+@*Configures a mflash for &lt;@var{soc}&gt; host bank at
+&lt;@var{base}&gt;. Pin number format is dependent on host GPIO calling convention.
+Currently, mflash bank support s3c2440 and pxa270.
+
+(ex. of s3c2440) mflash &lt;@var{RST pin}&gt; is GPIO B1.
+
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at example</A>
+mflash bank s3c2440 0x10000000 1b 0
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at end</A> example
+
+(ex. of pxa270) mflash &lt;@var{RST pin}&gt; is GPIO 43.
+
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at example</A>
+mflash bank pxa270 0x08000000 43 0
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at end</A> example
+
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at subsection</A> mFlash commands
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at cindex</A> mFlash commands
+
 @itemize @bullet
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at item</A> @b{stellaris mass_erase} &lt;@var{num}&gt;
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at cindex</A> stellaris mass_erase
-@*mass erase flash memory. 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at item</A> @b{mflash probe}
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at cindex</A> mflash probe
+@*Probe mflash.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at item</A> @b{mflash write} &lt;@var{num}&gt; &lt;@var{file}&gt; &lt;@var{offset}&gt;
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at cindex</A> mflash write
+@*Write the binary &lt;@var{file}&gt; to mflash bank &lt;@var{num}&gt;, starting at
+&lt;@var{offset}&gt; bytes from the beginning of the bank.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at item</A> @b{mflash dump} &lt;@var{num}&gt; &lt;@var{file}&gt; &lt;@var{offset}&gt; &lt;@var{size}&gt;
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at cindex</A> mflash dump
+@*Dump &lt;size&gt; bytes, starting at &lt;@var{offset}&gt; bytes from the beginning of the &lt;@var{num}&gt; bank
+to a &lt;@var{file}&gt;.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at item</A> @b{mflash config pll} &lt;@var{frequency}&gt;
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at cindex</A> mflash config pll
+@*Configure mflash pll. &lt;@var{frequency}&gt; is input frequency of mflash. The order is Hz.
+Issuing this command will erase mflash's whole internal nand and write new pll.
+After this command, mflash needs power-on-reset for normal operation.
+If pll was newly configured, storage and boot(optional) info also need to be update.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at item</A> @b{mflash config boot}
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at cindex</A> mflash config boot
+@*Configure bootable option. If bootable option is set, mflash offer the first 8 sectors
+(4kB) for boot.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at item</A> @b{mflash config storage}
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at cindex</A> mflash config storage
+@*Configure storage information. For the normal storage operation, this information must be
+written.
 @end itemize
 
 @node NAND Flash Commands
@@ -2782,7 +2883,7 @@
 configuration files, not interactively.
 
 @itemize @bullet
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at item</A> @var{controller} ... identifies a the controller driver
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at item</A> @var{controller} ... identifies the controller driver
 associated with the NAND device being declared.
 @xref{NAND Driver List}.
 @item @var{target} ... names the target used when issuing
@@ -2849,6 +2950,7 @@
 
 @deffn Command {nand erase} num offset length
 @cindex NAND erasing
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at cindex</A> NAND programming
 Erases blocks on the specified NAND device, starting at the
 specified @var{offset} and continuing for @var{length} bytes.
 Both of those values must be exact multiples of the device's
@@ -2864,6 +2966,7 @@
 
 @deffn Command {nand write} num filename offset [option...]
 @cindex NAND writing
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at cindex</A> NAND programming
 Writes binary data from the file into the specified NAND device,
 starting at the specified offset.  Those pages should already
 have been erased; you can't change zero bits to one bits.
@@ -2963,7 +3066,7 @@
 with the wrong ECC data can cause them to be marked as bad.
 @end deffn
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at section</A> NAND Drivers; Driver-specific Options and Commands
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at section</A> NAND Drivers, Options, and Commands
 @anchor{NAND Driver List}
 As noted above, the @command{nand device} command allows
 driver-specific options and behaviors.
@@ -2989,7 +3092,7 @@
 @deffn {NAND Driver} lpc3180
 These controllers require an extra @command{nand device}
 parameter:  the clock rate used by the controller.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at deffn</A> Command {nand lpc3180 select} num [mlc|slc]
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at deffn</A> Command {lpc3180 select} num [mlc|slc]
 Configures use of the MLC or SLC controller mode.
 MLC implies use of hardware ECC.
 The @var{num} parameter is the value shown by @command{nand list}.
@@ -3014,7 +3117,10 @@
 change any behavior.
 @end deffn
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at deffn</A> {NAND Driver} {s3c2410, s3c2412, s3c2440, s3c2443}
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at deffn</A> {NAND Driver} s3c2410
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at deffnx</A> {NAND Driver} s3c2412
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at deffnx</A> {NAND Driver} s3c2440
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at deffnx</A> {NAND Driver} s3c2443
 These S3C24xx family controllers don't have any special
 @command{nand device} options, and don't define any
 specialized commands.
@@ -3273,7 +3379,6 @@
 @cindex Target Specific Commands
 
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at page</A>
 @section Architecture Specific Commands
 @cindex Architecture Specific Commands
 
@@ -4503,8 +4608,8 @@
 
 @printindex cp
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at node</A> OpenOCD Command Index
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at unnumbered</A> OpenOCD Command Index
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at node</A> Command and Driver Index
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at unnumbered</A> Command and Driver Index
 @printindex fn
 
 @bye


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000720.html">[Openocd-svn] r1936 - trunk/doc
</A></li>
	<LI>Next message: <A HREF="000722.html">[Openocd-svn] r1938 - trunk/doc
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#721">[ date ]</a>
              <a href="thread.html#721">[ thread ]</a>
              <a href="subject.html#721">[ subject ]</a>
              <a href="author.html#721">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-svn">More information about the openocd-svn
mailing list</a><br>
</body></html>
