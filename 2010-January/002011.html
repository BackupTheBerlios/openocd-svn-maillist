<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-rc1-78-gfc9a2d0
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-svn/2010-January/index.html" >
   <LINK REL="made" HREF="mailto:openocd-svn%40lists.berlios.de?Subject=Re%3A%20%5Bopenocd-svn%5D%20Main%20OpenOCD%20repository%20branch%2C%20master%2C%0A%09updated.%20v0.4.0-rc1-78-gfc9a2d0&In-Reply-To=%3CE1NTXDh-0004gr-Ai%40sfp-scmshell-3.v30.ch3.sourceforge.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002010.html">
   <LINK REL="Next"  HREF="002012.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-rc1-78-gfc9a2d0</H1>
    <B>David Brownell</B> 
    <A HREF="mailto:openocd-svn%40lists.berlios.de?Subject=Re%3A%20%5Bopenocd-svn%5D%20Main%20OpenOCD%20repository%20branch%2C%20master%2C%0A%09updated.%20v0.4.0-rc1-78-gfc9a2d0&In-Reply-To=%3CE1NTXDh-0004gr-Ai%40sfp-scmshell-3.v30.ch3.sourceforge.com%3E"
       TITLE="[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-rc1-78-gfc9a2d0">dbrownell at users.sourceforge.net
       </A><BR>
    <I>Sat Jan  9 10:02:51 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="002010.html">[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-rc1-77-gaafd387
</A></li>
        <LI>Next message: <A HREF="002012.html">[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-rc1-79-g70738bd
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2011">[ date ]</a>
              <a href="thread.html#2011">[ thread ]</a>
              <a href="subject.html#2011">[ subject ]</a>
              <a href="author.html#2011">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;Main OpenOCD repository&quot;.

The branch, master has been updated
       via  fc9a2d0e6f3270dc86f84749ad10dd79d97c8392 (commit)
      from  aafd3877e6fbc1745dbfc5d4f54a2c7efe8cc3d6 (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit fc9a2d0e6f3270dc86f84749ad10dd79d97c8392
Author: David Brownell &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">dbrownell at users.sourceforge.net</A>&gt;
Date:   Sat Jan 9 00:55:41 2010 -0800

    src/server: usage/help/doc updates
    
    Make &quot;usage&quot; messages use the same EBNF as the User's Guide;
    no angle brackets.  Improve and correct various helptexts.
    
    Specifically for the port commands, clarify that the number
    is optional, and omitting it causes the current number to be
    displayed.
    
    Don't use &quot;&amp;function&quot;; a function's name is its address.
    Remove a couple instances of pointless whitespace; shrink a
    few overlong lines.
    
    Signed-off-by: David Brownell &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">dbrownell at users.sourceforge.net</A>&gt;

diff --git a/doc/openocd.texi b/doc/openocd.texi
index 3adc33a..47951c6 100644
--- a/doc/openocd.texi
+++ b/doc/openocd.texi
@@ -1721,17 +1721,17 @@ In such cases, just specify the relevant port number as zero.
 If you disable all access through TCP/IP, you will need to
 use the command line @option{-pipe} option.
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at deffn</A> {Command} gdb_port (number)
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at deffn</A> {Command} gdb_port [number]
 @cindex GDB server
 Specify or query the first port used for incoming GDB connections.
 The GDB port for the
 first target will be gdb_port, the second target will listen on gdb_port + 1, and so on.
 When not specified during the configuration stage,
 the port @var{number} defaults to 3333.
-When specified as zero, this port is not activated.
+When specified as zero, GDB remote access ports are not activated.
 @end deffn
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at deffn</A> {Command} tcl_port (number)
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at deffn</A> {Command} tcl_port [number]
 Specify or query the port used for a simplified RPC
 connection that can be used by clients to issue TCL commands and get the
 output from the Tcl engine.
@@ -1741,7 +1741,7 @@ the port @var{number} defaults to 6666.
 When specified as zero, this port is not activated.
 @end deffn
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at deffn</A> {Command} telnet_port (number)
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at deffn</A> {Command} telnet_port [number]
 Specify or query the
 port on which to listen for incoming telnet connections.
 This port is intended for interaction with one human through TCL commands.
diff --git a/src/server/gdb_server.c b/src/server/gdb_server.c
index 96b9dbf..08daa68 100644
--- a/src/server/gdb_server.c
+++ b/src/server/gdb_server.c
@@ -2412,7 +2412,7 @@ COMMAND_HANDLER(handle_gdb_breakpoint_override_command)
 static const struct command_registration gdb_command_handlers[] = {
 	{
 		.name = &quot;gdb_sync&quot;,
-		.handler = &amp;handle_gdb_sync_command,
+		.handler = handle_gdb_sync_command,
 		.mode = COMMAND_ANY,
 		.help = &quot;next stepi will return immediately allowing &quot;
 			&quot;GDB to fetch register state without affecting &quot;
@@ -2420,40 +2420,41 @@ static const struct command_registration gdb_command_handlers[] = {
 	},
 	{
 		.name = &quot;gdb_port&quot;,
-		.handler = &amp;handle_gdb_port_command,
+		.handler = handle_gdb_port_command,
 		.mode = COMMAND_ANY,
-		.help = &quot;daemon configuration command gdb_port. No arguments reports &quot;
-				&quot;GDB port.&quot;,
-		.usage = &quot;&lt;port&gt;&quot;,
+		.help = &quot;Display or specify base port on which to listen &quot;
+			&quot;for incoming GDB connections.  &quot;
+			&quot;No arguments reports GDB port; zero disables.&quot;,
+		.usage = &quot;[port_num]&quot;,
 	},
 	{
 		.name = &quot;gdb_memory_map&quot;,
-		.handler = &amp;handle_gdb_memory_map_command,
+		.handler = handle_gdb_memory_map_command,
 		.mode = COMMAND_CONFIG,
 		.help = &quot;enable or disable memory map&quot;,
-		.usage = &quot;enable|disable&quot;
+		.usage = &quot;('enable'|'disable')&quot;
 	},
 	{
 		.name = &quot;gdb_flash_program&quot;,
-		.handler = &amp;handle_gdb_flash_program_command,
+		.handler = handle_gdb_flash_program_command,
 		.mode = COMMAND_CONFIG,
 		.help = &quot;enable or disable flash program&quot;,
-		.usage = &quot;enable|disable&quot;
+		.usage = &quot;('enable'|'disable')&quot;
 	},
 	{
 		.name = &quot;gdb_report_data_abort&quot;,
-		.handler = &amp;handle_gdb_report_data_abort_command,
+		.handler = handle_gdb_report_data_abort_command,
 		.mode = COMMAND_CONFIG,
 		.help = &quot;enable or disable reporting data aborts&quot;,
-		.usage = &quot;enable|disable&quot;
+		.usage = &quot;('enable'|'disable')&quot;
 	},
 	{
 		.name = &quot;gdb_breakpoint_override&quot;,
-		.handler = &amp;handle_gdb_breakpoint_override_command,
+		.handler = handle_gdb_breakpoint_override_command,
 		.mode = COMMAND_EXEC,
-		.help = &quot;force type of breakpoint &quot;
-			&quot;used by gdb 'break' commands.&quot;,
-		.usage = &quot;hard|soft|disable&quot;,
+		.help = &quot;Display or specify type of breakpoint &quot;
+			&quot;to be used by gdb 'break' commands.&quot;,
+		.usage = &quot;('hard'|'soft'|'disable')&quot;
 	},
 	COMMAND_REGISTRATION_DONE
 };
diff --git a/src/server/httpd.c b/src/server/httpd.c
index 9554ff0..af8c3c8 100644
--- a/src/server/httpd.c
+++ b/src/server/httpd.c
@@ -118,11 +118,11 @@ static int httpd_Jim_Command_writeform(Jim_Interp *interp, int argc,
 	// Find length
 	const char *data;
 	int actual;
-
 	int retcode;
-
-	const char *script = alloc_printf(&quot;set dummy_val $httppostdata(%s); set dummy_val&quot;,
+	const char *script = alloc_printf(
+			&quot;set dummy_val $httppostdata(%s); set dummy_val&quot;,
 			name);
+
 	retcode = Jim_Eval_Named(interp, script, __FILE__, __LINE__);
 	free((void *) script);
 	if (retcode != JIM_OK)
@@ -154,27 +154,25 @@ httpd_Jim_Command_formfetch(Jim_Interp *interp,
                                    int argc,
                                    Jim_Obj *const *argv)
 {
-    if (argc != 2)
-    {
-        Jim_WrongNumArgs(interp, 1, argv, &quot;method ?CMD_ARGV ...?&quot;);
-        return JIM_ERR;
-    }
-    char *name = (char*)Jim_GetString(argv[1], NULL);
-
-
-    const char *script = alloc_printf(&quot;set dummy_val $httppostdata(%s); set dummy_val&quot;,
-    			name);
-    	int retcode = Jim_Eval_Named(interp, script, __FILE__, __LINE__);
-    	free((void *) script);
-    	if (retcode != JIM_OK)
-    	{
-    	    Jim_SetResult(interp, Jim_NewEmptyStringObj(interp));
-    	} else
-    	{
-    	    Jim_SetResult(interp, Jim_GetResult(interp));
-    	}
-
-    return JIM_OK;
+	if (argc != 2)
+	{
+		Jim_WrongNumArgs(interp, 1, argv, &quot;method ?CMD_ARGV ...?&quot;);
+		return JIM_ERR;
+	}
+
+	char *name = (char*)Jim_GetString(argv[1], NULL);
+	const char *script = alloc_printf(
+		&quot;set dummy_val $httppostdata(%s); set dummy_val&quot;,
+		name);
+	int retcode = Jim_Eval_Named(interp, script, __FILE__, __LINE__);
+
+	free((void *) script);
+	if (retcode != JIM_OK)
+		Jim_SetResult(interp, Jim_NewEmptyStringObj(interp));
+	else
+		Jim_SetResult(interp, Jim_GetResult(interp));
+
+	return JIM_OK;
 }
 
 struct httpd_request
@@ -467,16 +465,16 @@ static struct MHD_Daemon * d;
 static const struct command_registration httpd_command_handlers[] = {
 	{
 		.name = &quot;formfetch&quot;,
-		.jim_handler = &amp;httpd_Jim_Command_formfetch,
+		.jim_handler = httpd_Jim_Command_formfetch,
 		.mode = COMMAND_EXEC,
-		.usage = &quot;&lt;parameter_name&gt;&quot;,
+		.usage = &quot;parameter_name&quot;,
 		.help = &quot;Reads a posted form value.&quot;,
 	},
 	{
 		.name = &quot;writeform&quot;,
-		.jim_handler = &amp;httpd_Jim_Command_writeform,
+		.jim_handler = httpd_Jim_Command_writeform,
 		.mode = COMMAND_EXEC,
-		.usage = &quot;&lt;parameter_name&gt; &lt;file&gt;&quot;,
+		.usage = &quot;parameter_name filename&quot;,
 		.help = &quot;Writes a form value to a file.&quot;,
 	},
 	COMMAND_REGISTRATION_DONE
diff --git a/src/server/tcl_server.c b/src/server/tcl_server.c
index a772c0a..a88c436 100644
--- a/src/server/tcl_server.c
+++ b/src/server/tcl_server.c
@@ -181,11 +181,12 @@ COMMAND_HANDLER(handle_tcl_port_command)
 static const struct command_registration tcl_command_handlers[] = {
 	{
 		.name = &quot;tcl_port&quot;,
-		.handler = &amp;handle_tcl_port_command,
+		.handler = handle_tcl_port_command,
 		.mode = COMMAND_CONFIG,
-		.help = &quot;port on which to listen &quot;
-			&quot;for incoming TCL syntax&quot;,
-		.usage = &quot;&lt;port&gt;&quot;,
+		.help = &quot;Specify port on which to listen &quot;
+			&quot;for incoming Tcl syntax.  &quot;
+			&quot;No arguments reports Tcl port; zero disables.&quot;,
+		.usage = &quot;[port_num]&quot;,
 	},
 	COMMAND_REGISTRATION_DONE
 };
diff --git a/src/server/telnet_server.c b/src/server/telnet_server.c
index 92e7480..6f26f0a 100644
--- a/src/server/telnet_server.c
+++ b/src/server/telnet_server.c
@@ -619,17 +619,18 @@ COMMAND_HANDLER(handle_exit_command)
 static const struct command_registration telnet_command_handlers[] = {
 	{
 		.name = &quot;exit&quot;,
-		.handler = &amp;handle_exit_command,
+		.handler = handle_exit_command,
 		.mode = COMMAND_EXEC,
 		.help = &quot;exit telnet session&quot;,
 	},
 	{
 		.name = &quot;telnet_port&quot;,
-		.handler = &amp;handle_telnet_port_command,
+		.handler = handle_telnet_port_command,
 		.mode = COMMAND_ANY,
-		.help = &quot;port on which to listen &quot;
-			&quot;for incoming telnet connections&quot;,
-		.usage = &quot;&lt;port&gt;&quot;,
+		.help = &quot;Specify port on which to listen &quot;
+			&quot;for incoming telnet connections.  &quot;
+			&quot;No arguments reports telnet port; zero disables.&quot;,
+		.usage = &quot;[port_num]&quot;,
 	},
 	COMMAND_REGISTRATION_DONE
 };

-----------------------------------------------------------------------

Summary of changes:
 doc/openocd.texi           |    8 +++---
 src/server/gdb_server.c    |   31 +++++++++++++------------
 src/server/httpd.c         |   54 +++++++++++++++++++++----------------------
 src/server/tcl_server.c    |    9 ++++---
 src/server/telnet_server.c |   11 +++++----
 5 files changed, 57 insertions(+), 56 deletions(-)


hooks/post-receive
-- 
Main OpenOCD repository

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002010.html">[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-rc1-77-gaafd387
</A></li>
	<LI>Next message: <A HREF="002012.html">[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-rc1-79-g70738bd
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2011">[ date ]</a>
              <a href="thread.html#2011">[ thread ]</a>
              <a href="subject.html#2011">[ subject ]</a>
              <a href="author.html#2011">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-svn">More information about the openocd-svn
mailing list</a><br>
</body></html>
