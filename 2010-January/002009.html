<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-rc1-73-gb800eb0
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-svn/2010-January/index.html" >
   <LINK REL="made" HREF="mailto:openocd-svn%40lists.berlios.de?Subject=Re%3A%20%5Bopenocd-svn%5D%20Main%20OpenOCD%20repository%20branch%2C%20master%2C%0A%09updated.%20v0.4.0-rc1-73-gb800eb0&In-Reply-To=%3CE1NTTOv-00077s-HY%40sfp-scmshell-1.v30.ch3.sourceforge.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002008.html">
   <LINK REL="Next"  HREF="002010.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-rc1-73-gb800eb0</H1>
    <B>David Brownell</B> 
    <A HREF="mailto:openocd-svn%40lists.berlios.de?Subject=Re%3A%20%5Bopenocd-svn%5D%20Main%20OpenOCD%20repository%20branch%2C%20master%2C%0A%09updated.%20v0.4.0-rc1-73-gb800eb0&In-Reply-To=%3CE1NTTOv-00077s-HY%40sfp-scmshell-1.v30.ch3.sourceforge.com%3E"
       TITLE="[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-rc1-73-gb800eb0">dbrownell at users.sourceforge.net
       </A><BR>
    <I>Sat Jan  9 05:58:12 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="002008.html">[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-rc1-71-gc1cb209
</A></li>
        <LI>Next message: <A HREF="002010.html">[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-rc1-77-gaafd387
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2009">[ date ]</a>
              <a href="thread.html#2009">[ thread ]</a>
              <a href="subject.html#2009">[ subject ]</a>
              <a href="author.html#2009">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;Main OpenOCD repository&quot;.

The branch, master has been updated
       via  b800eb0336a190ed53da90a2b7216a35bfbfdb23 (commit)
       via  1a2c258ed4537ca95b50e1f9e776215d82de2a86 (commit)
      from  c1cb20971ea89e4602bb23ba66180d647880bbef (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit b800eb0336a190ed53da90a2b7216a35bfbfdb23
Author: David Brownell &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">dbrownell at users.sourceforge.net</A>&gt;
Date:   Fri Jan 8 20:16:05 2010 -0800

    *SVF: help/usage updates
    
    Usage messages should use the same EBNF as the User's Guide;
    no angle brackets.  Be more complete too ... some params were
    missing.
    
    Don't use &quot;&amp;function&quot;; its name is its address.
    
    Unrelated: fix typo in one &quot;target.c&quot; usage message.
    
    Signed-off-by: David Brownell &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">dbrownell at users.sourceforge.net</A>&gt;

diff --git a/src/svf/svf.c b/src/svf/svf.c
index dfdecbc..7cb2200 100644
--- a/src/svf/svf.c
+++ b/src/svf/svf.c
@@ -1461,10 +1461,10 @@ static int svf_run_command(struct command_context *cmd_ctx, char *cmd_str)
 static const struct command_registration svf_command_handlers[] = {
 	{
 		.name = &quot;svf&quot;,
-		.handler = &amp;handle_svf_command,
+		.handler = handle_svf_command,
 		.mode = COMMAND_EXEC,
 		.help = &quot;Runs a SVF file.&quot;,
-		.usage = &quot;&lt;file&gt;&quot;,
+		.usage = &quot;filename ['quiet']&quot;,
 	},
 	COMMAND_REGISTRATION_DONE
 };
diff --git a/src/target/target.c b/src/target/target.c
index c29c45e..7994aff 100644
--- a/src/target/target.c
+++ b/src/target/target.c
@@ -4916,7 +4916,7 @@ static const struct command_registration target_exec_command_handlers[] = {
 		.handler = handle_virt2phys_command,
 		.mode = COMMAND_ANY,
 		.help = &quot;translate a virtual address into a physical address&quot;,
-		.usage = &quot;virual_address&quot;,
+		.usage = &quot;virtual_address&quot;,
 	},
 	{
 		.name = &quot;reg&quot;,
diff --git a/src/xsvf/xsvf.c b/src/xsvf/xsvf.c
index b1ddea9..539fbdc 100644
--- a/src/xsvf/xsvf.c
+++ b/src/xsvf/xsvf.c
@@ -1053,13 +1053,13 @@ COMMAND_HANDLER(handle_xsvf_command)
 static const struct command_registration xsvf_command_handlers[] = {
 	{
 		.name = &quot;xsvf&quot;,
-		.handler = &amp;handle_xsvf_command,
+		.handler = handle_xsvf_command,
 		.mode = COMMAND_EXEC,
 		.help = &quot;Runs a XSVF file.  If 'virt2' is given, xruntest &quot;
 			&quot;counts are interpreted as TCK cycles rather than &quot;
 			&quot;as microseconds.  Without the 'quiet' option, all &quot;
 			&quot;comments, retries, and mismatches will be reported.&quot;,
-		.usage = &quot;&lt;file&gt; [virt2] [quiet]&quot;,
+		.usage = &quot;(tapname|'plain') filename ['virt2'] ['quiet']&quot;,
 	},
 	COMMAND_REGISTRATION_DONE
 };

commit 1a2c258ed4537ca95b50e1f9e776215d82de2a86
Author: David Brownell &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">dbrownell at users.sourceforge.net</A>&gt;
Date:   Fri Jan 8 20:12:18 2010 -0800

    MFLASH: help/usage updates
    
    Make &quot;usage&quot; messages use the same EBNF as the User's Guide;
    no angle brackets.  Improve and correct various helptexts.
    
    Don't use &quot;&amp;function&quot;; a function's name is its address.
    Remove a couple instances of pointless whitespace.
    
    Signed-off-by: David Brownell &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">dbrownell at users.sourceforge.net</A>&gt;

diff --git a/src/flash/mflash.c b/src/flash/mflash.c
index 04f5c77..289fe5e 100644
--- a/src/flash/mflash.c
+++ b/src/flash/mflash.c
@@ -762,7 +762,7 @@ COMMAND_HANDLER(mg_write_cmd)
 	return ERROR_OK;
 
 mg_write_cmd_err:
- 	free(buffer);
+	free(buffer);
 	fileio_close(&amp;fileio);
 
 	return ret;
@@ -829,7 +829,7 @@ COMMAND_HANDLER(mg_dump_cmd)
 	return ERROR_OK;
 
 mg_dump_cmd_err:
- 	free(buffer);
+	free(buffer);
 	fileio_close(&amp;fileio);
 
 	return ret;
@@ -1271,30 +1271,33 @@ COMMAND_HANDLER(mg_config_cmd)
 static const struct command_registration mflash_exec_command_handlers[] = {
 	{
 		.name = &quot;probe&quot;,
-		.handler = &amp;mg_probe_cmd,
+		.handler = mg_probe_cmd,
 		.mode = COMMAND_EXEC,
 		.help = &quot;Detect bank configuration information&quot;,
 	},
 	{
 		.name = &quot;write&quot;,
-		.handler = &amp;mg_write_cmd,
+		.handler = mg_write_cmd,
 		.mode = COMMAND_EXEC,
-		.usage = &quot;&lt;num&gt; &lt;file&gt; &lt;address&gt;&quot;,
-		.help = &quot;Write a file at the specified address&quot;,
+		/* FIXME bank_num is unused */
+		.usage = &quot;bank_num filename address&quot;,
+		.help = &quot;Write binary file at the specified address.&quot;,
 	},
 	{
 		.name = &quot;dump&quot;,
-		.handler = &amp;mg_dump_cmd,
+		.handler = mg_dump_cmd,
 		.mode = COMMAND_EXEC,
-		.usage = &quot;&lt;num&gt; &lt;file&gt; &lt;address&gt; &lt;size&gt;&quot;,
-		.help = &quot;Dump to a file from the specified address&quot;,
+		/* FIXME bank_num is unused */
+		.usage = &quot;bank_num filename address size&quot;,
+		.help = &quot;Write specified number of bytes from a binary file &quot;
+			&quot;to the specified, address.&quot;,
 	},
 	{
 		.name = &quot;config&quot;,
-		.handler = &amp;mg_config_cmd,
+		.handler = mg_config_cmd,
 		.mode = COMMAND_EXEC,
-		.usage = &quot;&lt;num&gt; &lt;stage&gt;&quot;,
-		.help = &quot;Dump to a file from the specified address&quot;,
+		.help = &quot;Configure MFLASH options.&quot;,
+		.usage = &quot;('boot'|'storage'|'pll' frequency)&quot;,
 	},
 	COMMAND_REGISTRATION_DONE
 };
@@ -1367,15 +1370,15 @@ COMMAND_HANDLER(mg_bank_cmd)
 static const struct command_registration mflash_config_command_handlers[] = {
 	{
 		.name = &quot;bank&quot;,
-		.handler = &amp;mg_bank_cmd,
+		.handler = mg_bank_cmd,
 		.mode = COMMAND_CONFIG,
 		.help = &quot;configure a mflash device bank&quot;,
-		.usage = &quot;&lt;soc&gt; &lt;base&gt; &lt;RST pin&gt; &lt;target #&gt;&quot;,
+		.usage = &quot;soc_type base_addr pin_id target&quot;,
 	},
 	{
 		.name = &quot;init&quot;,
 		.mode = COMMAND_CONFIG,
-		.handler = &amp;handle_mflash_init_command,
+		.handler = handle_mflash_init_command,
 		.help = &quot;initialize mflash devices&quot;,
 	},
 	COMMAND_REGISTRATION_DONE

-----------------------------------------------------------------------

Summary of changes:
 src/flash/mflash.c  |   33 ++++++++++++++++++---------------
 src/svf/svf.c       |    4 ++--
 src/target/target.c |    2 +-
 src/xsvf/xsvf.c     |    4 ++--
 4 files changed, 23 insertions(+), 20 deletions(-)


hooks/post-receive
-- 
Main OpenOCD repository

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002008.html">[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-rc1-71-gc1cb209
</A></li>
	<LI>Next message: <A HREF="002010.html">[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-rc1-77-gaafd387
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2009">[ date ]</a>
              <a href="thread.html#2009">[ thread ]</a>
              <a href="subject.html#2009">[ subject ]</a>
              <a href="author.html#2009">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-svn">More information about the openocd-svn
mailing list</a><br>
</body></html>
