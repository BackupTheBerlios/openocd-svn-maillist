<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-svn] r2374 - in trunk/src: . flash flash/ocl/at91sam7x	helper jtag jtag/zy1000 target
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-svn/2009-June/index.html" >
   <LINK REL="made" HREF="mailto:openocd-svn%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-svn%5D%20r2374%20-%20in%20trunk/src%3A%20.%20flash%20flash/ocl/at91sam7x%0A%09helper%20jtag%20jtag/zy1000%20target&In-Reply-To=%3C200906232245.n5NMjhGL020441%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001157.html">
   <LINK REL="Next"  HREF="001159.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-svn] r2374 - in trunk/src: . flash flash/ocl/at91sam7x	helper jtag jtag/zy1000 target</H1>
    <B>zwelch at mail.berlios.de</B> 
    <A HREF="mailto:openocd-svn%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-svn%5D%20r2374%20-%20in%20trunk/src%3A%20.%20flash%20flash/ocl/at91sam7x%0A%09helper%20jtag%20jtag/zy1000%20target&In-Reply-To=%3C200906232245.n5NMjhGL020441%40sheep.berlios.de%3E"
       TITLE="[Openocd-svn] r2374 - in trunk/src: . flash flash/ocl/at91sam7x	helper jtag jtag/zy1000 target">zwelch at mail.berlios.de
       </A><BR>
    <I>Wed Jun 24 00:45:43 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001157.html">[Openocd-svn] r2373 - in trunk/src: flash flash/ocl/at91sam7x	helper jtag jtag/zy1000 server target xsvf
</A></li>
        <LI>Next message: <A HREF="001159.html">[Openocd-svn] r2375 - in trunk: src/flash src/flash/ocl/at91sam7x	src/helper src/jtag src/jtag/zy1000 src/server src/target	src/xsvf testing/examples/cortex
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1158">[ date ]</a>
              <a href="thread.html#1158">[ thread ]</a>
              <a href="subject.html#1158">[ subject ]</a>
              <a href="author.html#1158">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: zwelch
Date: 2009-06-24 00:45:15 +0200 (Wed, 24 Jun 2009)
New Revision: 2374

Modified:
   trunk/src/ecosboard.c
   trunk/src/flash/at91sam7.c
   trunk/src/flash/flash.c
   trunk/src/flash/lpc2000.c
   trunk/src/flash/nand.c
   trunk/src/flash/non_cfi.c
   trunk/src/flash/ocl/at91sam7x/main.c
   trunk/src/flash/ocl/at91sam7x/samflash.c
   trunk/src/flash/pic32mx.c
   trunk/src/flash/stellaris.c
   trunk/src/flash/stellaris.h
   trunk/src/flash/stm32x.c
   trunk/src/flash/str7x.c
   trunk/src/flash/str9xpec.c
   trunk/src/flash/tms470.c
   trunk/src/helper/binarybuffer.h
   trunk/src/helper/command.c
   trunk/src/helper/jim-eventloop.c
   trunk/src/helper/jim-eventloop.h
   trunk/src/helper/jim.c
   trunk/src/helper/jim.h
   trunk/src/jtag/jlink.c
   trunk/src/jtag/parport.c
   trunk/src/jtag/tcl.c
   trunk/src/jtag/zy1000/jtag_minidriver.h
   trunk/src/jtag/zy1000/zy1000.c
   trunk/src/target/arm7_9_common.c
   trunk/src/target/arm_adi_v5.c
   trunk/src/target/armv4_5.c
   trunk/src/target/cortex_m3.c
   trunk/src/target/etm.c
   trunk/src/target/mips32.h
   trunk/src/target/target.c
   trunk/src/target/xscale.c
Log:
- Fixes '[|]' whitespace
- Replace ')\([|]\)(' with ') \1 ('.
- Replace ')\([|]\)\(\w\)' with ') \1 \2'.
- Replace '\(\w\)\([|]\)(' with '\1 \2 ('.
- Replace '\(\w\)\([|]\)\(\w\)' with '\1 \2 \3'.


Modified: trunk/src/ecosboard.c
===================================================================
--- trunk/src/ecosboard.c	2009-06-23 22:44:17 UTC (rev 2373)
+++ trunk/src/ecosboard.c	2009-06-23 22:45:15 UTC (rev 2374)
@@ -1460,7 +1460,7 @@
 // For simplicity we use _FILESYSTEM synchronization for all accesses since
 // we should never block in any filesystem operations.
 FSTAB_ENTRY( logfs_fste, &quot;logfs&quot;, 0,
-		CYG_SYNCMODE_FILE_FILESYSTEM|CYG_SYNCMODE_IO_FILESYSTEM,
+		CYG_SYNCMODE_FILE_FILESYSTEM | CYG_SYNCMODE_IO_FILESYSTEM,
 		logfs_mount,
 		logfs_umount,
 		logfs_open,

Modified: trunk/src/flash/at91sam7.c
===================================================================
--- trunk/src/flash/at91sam7.c	2009-06-23 22:44:17 UTC (rev 2373)
+++ trunk/src/flash/at91sam7.c	2009-06-23 22:45:15 UTC (rev 2374)
@@ -107,7 +107,7 @@
 	command_t *at91sam7_cmd = register_command(cmd_ctx, NULL, &quot;at91sam7&quot;, NULL, COMMAND_ANY, NULL);
 
 	register_command(cmd_ctx, at91sam7_cmd, &quot;gpnvm&quot;, at91sam7_handle_gpnvm_command, COMMAND_EXEC,
-					&quot;at91sam7 gpnvm &lt;bit&gt; set|clear, set or clear one gpnvm bit&quot;);
+					&quot;at91sam7 gpnvm &lt;bit&gt; set | clear, set or clear one gpnvm bit&quot;);
 	return ERROR_OK;
 }
 
@@ -284,7 +284,7 @@
 	target_write_u32(target, MC_FCR[bank-&gt;bank_number], fcr);
 	LOG_DEBUG(&quot;Flash command: 0x%&quot; PRIx32 &quot;, flash bank: %i, page number: %u&quot;, fcr, bank-&gt;bank_number + 1, pagen);
 
-	if ((at91sam7_info-&gt;cidr_arch == 0x60) &amp;&amp; ((cmd == SLB)|(cmd == CLB)))
+	if ((at91sam7_info-&gt;cidr_arch == 0x60) &amp;&amp; ((cmd == SLB) | (cmd == CLB)))
 	{
 		/* Lock bit manipulation on AT91SAM7A3 waits for FC_FSR bit 1, EOL */
 		if (at91sam7_wait_status_busy(bank, MC_FSR_EOL, 10)&amp;0x0C)
@@ -1138,7 +1138,7 @@
 
 	if (argc != 2)
 	{
-		command_print(cmd_ctx, &quot;at91sam7 gpnvm &lt;bit&gt; &lt;set|clear&gt;&quot;);
+		command_print(cmd_ctx, &quot;at91sam7 gpnvm &lt;bit&gt; &lt;set | clear&gt;&quot;);
 		return ERROR_OK;
 	}
 

Modified: trunk/src/flash/flash.c
===================================================================
--- trunk/src/flash/flash.c	2009-06-23 22:44:17 UTC (rev 2373)
+++ trunk/src/flash/flash.c	2009-06-23 22:45:15 UTC (rev 2374)
@@ -197,7 +197,7 @@
 		register_command(cmd_ctx, flash_cmd, &quot;write_image&quot;, handle_flash_write_image_command, COMMAND_EXEC,
 						 &quot;write_image [erase] &lt;file&gt; [offset] [type]&quot;);
 		register_command(cmd_ctx, flash_cmd, &quot;protect&quot;, handle_flash_protect_command, COMMAND_EXEC,
-						 &quot;set protection of sectors at &lt;bank&gt; &lt;first&gt; &lt;last&gt; &lt;on|off&gt;&quot;);
+						 &quot;set protection of sectors at &lt;bank&gt; &lt;first&gt; &lt;last&gt; &lt;on | off&gt;&quot;);
 	}
 
 	return ERROR_OK;

Modified: trunk/src/flash/lpc2000.c
===================================================================
--- trunk/src/flash/lpc2000.c	2009-06-23 22:44:17 UTC (rev 2373)
+++ trunk/src/flash/lpc2000.c	2009-06-23 22:45:15 UTC (rev 2374)
@@ -30,18 +30,18 @@
 /* flash programming support for Philips LPC2xxx devices
  * currently supported devices:
  * variant 1 (lpc2000_v1):
- * - 2104|5|6
- * - 2114|9
- * - 2124|9
+ * - 2104 | 5|6
+ * - 2114 | 9
+ * - 2124 | 9
  * - 2194
- * - 2212|4
- * - 2292|4
+ * - 2212 | 4
+ * - 2292 | 4
  *
  * variant 2 (lpc2000_v2):
  * - 213x
  * - 214x
- * - 2101|2|3
- * - 2364|6|8
+ * - 2101 | 2|3
+ * - 2364 | 6|8
  * - 2378
  */
 

Modified: trunk/src/flash/nand.c
===================================================================
--- trunk/src/flash/nand.c	2009-06-23 22:44:17 UTC (rev 2373)
+++ trunk/src/flash/nand.c	2009-06-23 22:45:15 UTC (rev 2374)
@@ -311,9 +311,9 @@
 						 &quot;erase blocks on NAND flash device &lt;num&gt; &lt;offset&gt; &lt;length&gt;&quot;);
 		register_command(cmd_ctx, nand_cmd, &quot;dump&quot;, handle_nand_dump_command, COMMAND_EXEC,
 						 &quot;dump from NAND flash device &lt;num&gt; &lt;filename&gt; &quot;
-						 &quot;&lt;offset&gt; &lt;length&gt; [oob_raw|oob_only]&quot;);
+						 &quot;&lt;offset&gt; &lt;length&gt; [oob_raw | oob_only]&quot;);
 		register_command(cmd_ctx, nand_cmd, &quot;write&quot;, handle_nand_write_command, COMMAND_EXEC,
-						 &quot;write to NAND flash device &lt;num&gt; &lt;filename&gt; &lt;offset&gt; [oob_raw|oob_only|oob_softecc|oob_softecc_kw]&quot;);
+						 &quot;write to NAND flash device &lt;num&gt; &lt;filename&gt; &lt;offset&gt; [oob_raw | oob_only | oob_softecc | oob_softecc_kw]&quot;);
 		register_command(cmd_ctx, nand_cmd, &quot;raw_access&quot;, handle_nand_raw_access_command, COMMAND_EXEC,
 						 &quot;raw access to NAND flash device &lt;num&gt; ['enable'|'disable']&quot;);
 	}

Modified: trunk/src/flash/non_cfi.c
===================================================================
--- trunk/src/flash/non_cfi.c	2009-06-23 22:44:17 UTC (rev 2373)
+++ trunk/src/flash/non_cfi.c	2009-06-23 22:45:15 UTC (rev 2374)
@@ -29,7 +29,7 @@
 
 #define KB 1024
 #define MB (1024*1024)
-#define ERASE_REGION(num, size) (((size/256) &lt;&lt; 16)|(num-1))
+#define ERASE_REGION(num, size) (((size/256) &lt;&lt; 16) | (num-1))
 
 /* non-CFI compatible flashes */
 non_cfi_t non_cfi_flashes[] = {

Modified: trunk/src/flash/ocl/at91sam7x/main.c
===================================================================
--- trunk/src/flash/ocl/at91sam7x/main.c	2009-06-23 22:44:17 UTC (rev 2373)
+++ trunk/src/flash/ocl/at91sam7x/main.c	2009-06-23 22:45:15 UTC (rev 2374)
@@ -72,7 +72,7 @@
 	/* verify written data */
 	if (!result) result = flash_verify(adr, len, ((uint8 *)buffer) + ofs);
 
-	dcc_wr(OCL_CMD_DONE|result);
+	dcc_wr(OCL_CMD_DONE | result);
 }
 
 
@@ -84,14 +84,14 @@
 		cmd = dcc_rd();
 		switch (cmd&amp;OCL_CMD_MASK) {
 			case OCL_PROBE:
-				dcc_wr(OCL_CMD_DONE|flash_init());
+				dcc_wr(OCL_CMD_DONE | flash_init());
 				dcc_wr(0x100000); /* base */
 				dcc_wr(flash_page_count*flash_page_size); /* size */
 				dcc_wr(1); /* num_sectors */
 				dcc_wr(4096 | ((unsigned long) flash_page_size &lt;&lt; 16)); /* buflen and bufalign */
 				break;
 			case OCL_ERASE_ALL:
-				dcc_wr(OCL_CMD_DONE|flash_erase_all());
+				dcc_wr(OCL_CMD_DONE | flash_erase_all());
 				break;
 			case OCL_FLASH_BLOCK:
 				cmd_flash(cmd);

Modified: trunk/src/flash/ocl/at91sam7x/samflash.c
===================================================================
--- trunk/src/flash/ocl/at91sam7x/samflash.c	2009-06-23 22:44:17 UTC (rev 2373)
+++ trunk/src/flash/ocl/at91sam7x/samflash.c	2009-06-23 22:45:15 UTC (rev 2374)
@@ -164,7 +164,7 @@
 	if ((inr(MC_FSR + efc_ofs)&amp;MC_LOCKE)) return FLASH_STAT_LOCKE;
 
 	/* set no erase before programming */
-	outr(MC_FMR + efc_ofs, inr(MC_FMR + efc_ofs)|0x80);
+	outr(MC_FMR + efc_ofs, inr(MC_FMR + efc_ofs) | 0x80);
 
 	return FLASH_STAT_OK;
 }

Modified: trunk/src/flash/pic32mx.c
===================================================================
--- trunk/src/flash/pic32mx.c	2009-06-23 22:44:17 UTC (rev 2373)
+++ trunk/src/flash/pic32mx.c	2009-06-23 22:45:15 UTC (rev 2374)
@@ -162,7 +162,7 @@
 	target_t *target = bank-&gt;target;
 	uint32_t status;
 
-	target_write_u32(target, PIC32MX_NVMCON, NVMCON_NVMWREN|op);
+	target_write_u32(target, PIC32MX_NVMCON, NVMCON_NVMWREN | op);
 
 	/* unlock flash registers */
 	target_write_u32(target, PIC32MX_NVMKEY, NVMKEY1);
@@ -841,7 +841,7 @@
 
 	/* chip erase flash memory */
 	target_write_u32(target, PIC32MX_FLASH_CR, FLASH_MER);
-	target_write_u32(target, PIC32MX_FLASH_CR, FLASH_MER|FLASH_STRT);
+	target_write_u32(target, PIC32MX_FLASH_CR, FLASH_MER | FLASH_STRT);
 
 	status = pic32mx_wait_status_busy(bank, 10);
 

Modified: trunk/src/flash/stellaris.c
===================================================================
--- trunk/src/flash/stellaris.c	2009-06-23 22:44:17 UTC (rev 2373)
+++ trunk/src/flash/stellaris.c	2009-06-23 22:45:15 UTC (rev 2374)
@@ -346,7 +346,7 @@
 	target_t *target = bank-&gt;target;
 	uint32_t fmc;
 
-	target_read_u32(target, FLASH_CONTROL_BASE|FLASH_FMC, &amp;fmc);
+	target_read_u32(target, FLASH_CONTROL_BASE | FLASH_FMC, &amp;fmc);
 
 	return fmc;
 }
@@ -360,9 +360,9 @@
 	uint32_t rcc, pllcfg, sysdiv, usesysdiv, bypass, oscsrc;
 	unsigned long mainfreq;
 
-	target_read_u32(target, SCB_BASE|RCC, &amp;rcc);
+	target_read_u32(target, SCB_BASE | RCC, &amp;rcc);
 	LOG_DEBUG(&quot;Stellaris RCC %&quot; PRIx32 &quot;&quot;, rcc);
-	target_read_u32(target, SCB_BASE|PLLCFG, &amp;pllcfg);
+	target_read_u32(target, SCB_BASE | PLLCFG, &amp;pllcfg);
 	LOG_DEBUG(&quot;Stellaris PLLCFG %&quot; PRIx32 &quot;&quot;, pllcfg);
 	stellaris_info-&gt;rcc = rcc;
 
@@ -412,7 +412,7 @@
 
 	uint32_t usecrl = (stellaris_info-&gt;mck_freq/1000000ul-1);
 	LOG_DEBUG(&quot;usecrl = %i&quot;,(int)(usecrl));
-	target_write_u32(target, SCB_BASE|USECRL, usecrl);
+	target_write_u32(target, SCB_BASE | USECRL, usecrl);
 }
 
 #if 0
@@ -439,7 +439,7 @@
 	target_t *target = bank-&gt;target;
 
 	fmc = FMC_WRKEY | cmd;
-	target_write_u32(target, FLASH_CONTROL_BASE|FLASH_FMC, fmc);
+	target_write_u32(target, FLASH_CONTROL_BASE | FLASH_FMC, fmc);
 	LOG_DEBUG(&quot;Flash command: 0x%x&quot;, fmc);
 
 	if (stellaris_wait_status_busy(bank, cmd, 100))
@@ -460,10 +460,10 @@
 	int i;
 
 	/* Read and parse chip identification register */
-	target_read_u32(target, SCB_BASE|DID0, &amp;did0);
-	target_read_u32(target, SCB_BASE|DID1, &amp;did1);
-	target_read_u32(target, SCB_BASE|DC0, &amp;stellaris_info-&gt;dc0);
-	target_read_u32(target, SCB_BASE|DC1, &amp;stellaris_info-&gt;dc1);
+	target_read_u32(target, SCB_BASE | DID0, &amp;did0);
+	target_read_u32(target, SCB_BASE | DID1, &amp;did1);
+	target_read_u32(target, SCB_BASE | DC0, &amp;stellaris_info-&gt;dc0);
+	target_read_u32(target, SCB_BASE | DC1, &amp;stellaris_info-&gt;dc1);
 	LOG_DEBUG(&quot;did0 0x%&quot; PRIx32 &quot;, did1 0x%&quot; PRIx32 &quot;, dc0 0x%&quot; PRIx32 &quot;, dc1 0x%&quot; PRIx32 &quot;&quot;,
 		  did0, did1, stellaris_info-&gt;dc0, stellaris_info-&gt;dc1);
 
@@ -503,7 +503,7 @@
 	stellaris_info-&gt;pagesize = 1024;
 	bank-&gt;size = 1024 * stellaris_info-&gt;num_pages;
 	stellaris_info-&gt;pages_in_lockregion = 2;
-	target_read_u32(target, SCB_BASE|FMPPE, &amp;stellaris_info-&gt;lockbits);
+	target_read_u32(target, SCB_BASE | FMPPE, &amp;stellaris_info-&gt;lockbits);
 
 	/* provide this for the benefit of the higher flash driver layers */
 	bank-&gt;num_sectors = stellaris_info-&gt;num_pages;
@@ -597,7 +597,7 @@
 
 	/* Clear and disable flash programming interrupts */
 	target_write_u32(target, FLASH_CIM, 0);
-	target_write_u32(target, FLASH_MISC, PMISC|AMISC);
+	target_write_u32(target, FLASH_MISC, PMISC | AMISC);
 
 	for (banknr = first; banknr &lt;= last; banknr++)
 	{
@@ -672,10 +672,10 @@
 
 	/* Clear and disable flash programming interrupts */
 	target_write_u32(target, FLASH_CIM, 0);
-	target_write_u32(target, FLASH_MISC, PMISC|AMISC);
+	target_write_u32(target, FLASH_MISC, PMISC | AMISC);
 
 	LOG_DEBUG(&quot;fmppe 0x%&quot; PRIx32 &quot;&quot;,fmppe);
-	target_write_u32(target, SCB_BASE|FMPPE, fmppe);
+	target_write_u32(target, SCB_BASE | FMPPE, fmppe);
 	/* Commit FMPPE */
 	target_write_u32(target, FLASH_FMA, 1);
 	/* Write commit command */
@@ -698,7 +698,7 @@
 		return ERROR_FLASH_OPERATION_FAILED;
 	}
 
-	target_read_u32(target, SCB_BASE|FMPPE, &amp;stellaris_info-&gt;lockbits);
+	target_read_u32(target, SCB_BASE | FMPPE, &amp;stellaris_info-&gt;lockbits);
 
 	return ERROR_OK;
 }
@@ -869,7 +869,7 @@
 
 	/* Clear and disable flash programming interrupts */
 	target_write_u32(target, FLASH_CIM, 0);
-	target_write_u32(target, FLASH_MISC, PMISC|AMISC);
+	target_write_u32(target, FLASH_MISC, PMISC | AMISC);
 
 	/* multiple words to be programmed? */
 	if (words_remaining &gt; 0)
@@ -1014,7 +1014,7 @@
 
 	/* Clear and disable flash programming interrupts */
 	target_write_u32(target, FLASH_CIM, 0);
-	target_write_u32(target, FLASH_MISC, PMISC|AMISC);
+	target_write_u32(target, FLASH_MISC, PMISC | AMISC);
 
 	target_write_u32(target, FLASH_FMA, 0);
 	target_write_u32(target, FLASH_FMC, FMC_WRKEY | FMC_MERASE);

Modified: trunk/src/flash/stellaris.h
===================================================================
--- trunk/src/flash/stellaris.h	2009-06-23 22:44:17 UTC (rev 2373)
+++ trunk/src/flash/stellaris.h	2009-06-23 22:45:15 UTC (rev 2374)
@@ -68,12 +68,12 @@
 #define USECRL		0x140
 
 #define FLASH_CONTROL_BASE	0x400FD000
-#define FLASH_FMA	(FLASH_CONTROL_BASE|0x000)
-#define FLASH_FMD	(FLASH_CONTROL_BASE|0x004)
-#define FLASH_FMC	(FLASH_CONTROL_BASE|0x008)
-#define FLASH_CRIS	(FLASH_CONTROL_BASE|0x00C)
-#define FLASH_CIM	(FLASH_CONTROL_BASE|0x010)
-#define FLASH_MISC	(FLASH_CONTROL_BASE|0x014)
+#define FLASH_FMA	(FLASH_CONTROL_BASE | 0x000)
+#define FLASH_FMD	(FLASH_CONTROL_BASE | 0x004)
+#define FLASH_FMC	(FLASH_CONTROL_BASE | 0x008)
+#define FLASH_CRIS	(FLASH_CONTROL_BASE | 0x00C)
+#define FLASH_CIM	(FLASH_CONTROL_BASE | 0x010)
+#define FLASH_MISC	(FLASH_CONTROL_BASE | 0x014)
 
 #define AMISC	1
 #define PMISC	2

Modified: trunk/src/flash/stm32x.c
===================================================================
--- trunk/src/flash/stm32x.c	2009-06-23 22:44:17 UTC (rev 2373)
+++ trunk/src/flash/stm32x.c	2009-06-23 22:45:15 UTC (rev 2374)
@@ -122,9 +122,9 @@
 		alive_sleep(1);
 	}
 	/* Clear but report errors */
-	if (status &amp; (FLASH_WRPRTERR|FLASH_PGERR))
+	if (status &amp; (FLASH_WRPRTERR | FLASH_PGERR))
 	{
-		target_write_u32(target, STM32_FLASH_SR, FLASH_WRPRTERR|FLASH_PGERR);
+		target_write_u32(target, STM32_FLASH_SR, FLASH_WRPRTERR | FLASH_PGERR);
 	}
 	return status;
 }
@@ -140,7 +140,7 @@
 	/* read current option bytes */
 	target_read_u32(target, STM32_FLASH_OBR, &amp;optiondata);
 
-	stm32x_info-&gt;option_bytes.user_options = (uint16_t)0xFFF8|((optiondata &gt;&gt; 2) &amp; 0x07);
+	stm32x_info-&gt;option_bytes.user_options = (uint16_t)0xFFF8 | ((optiondata &gt;&gt; 2) &amp; 0x07);
 	stm32x_info-&gt;option_bytes.RDP = (optiondata &amp; (1 &lt;&lt; OPT_READOUT)) ? 0xFFFF : 0x5AA5;
 
 	if (optiondata &amp; (1 &lt;&lt; OPT_READOUT))
@@ -177,8 +177,8 @@
 	target_write_u32(target, STM32_FLASH_OPTKEYR, KEY2);
 
 	/* erase option bytes */
-	target_write_u32(target, STM32_FLASH_CR, FLASH_OPTER|FLASH_OPTWRE);
-	target_write_u32(target, STM32_FLASH_CR, FLASH_OPTER|FLASH_STRT|FLASH_OPTWRE);
+	target_write_u32(target, STM32_FLASH_CR, FLASH_OPTER | FLASH_OPTWRE);
+	target_write_u32(target, STM32_FLASH_CR, FLASH_OPTER | FLASH_STRT | FLASH_OPTWRE);
 
 	status = stm32x_wait_status_busy(bank, 10);
 
@@ -211,7 +211,7 @@
 	target_write_u32(target, STM32_FLASH_OPTKEYR, KEY2);
 
 	/* program option bytes */
-	target_write_u32(target, STM32_FLASH_CR, FLASH_OPTPG|FLASH_OPTWRE);
+	target_write_u32(target, STM32_FLASH_CR, FLASH_OPTPG | FLASH_OPTWRE);
 
 	/* write user option byte */
 	target_write_u16(target, STM32_OB_USER, stm32x_info-&gt;option_bytes.user_options);
@@ -374,7 +374,7 @@
 	{
 		target_write_u32(target, STM32_FLASH_CR, FLASH_PER);
 		target_write_u32(target, STM32_FLASH_AR, bank-&gt;base + bank-&gt;sectors[i].offset);
-		target_write_u32(target, STM32_FLASH_CR, FLASH_PER|FLASH_STRT);
+		target_write_u32(target, STM32_FLASH_CR, FLASH_PER | FLASH_STRT);
 
 		status = stm32x_wait_status_busy(bank, 10);
 
@@ -1098,7 +1098,7 @@
 
 	if (argc &lt; 4)
 	{
-		command_print(cmd_ctx, &quot;stm32x options_write &lt;bank&gt; &lt;SWWDG|HWWDG&gt; &lt;RSTSTNDBY|NORSTSTNDBY&gt; &lt;RSTSTOP|NORSTSTOP&gt;&quot;);
+		command_print(cmd_ctx, &quot;stm32x options_write &lt;bank&gt; &lt;SWWDG | HWWDG&gt; &lt;RSTSTNDBY | NORSTSTNDBY&gt; &lt;RSTSTOP | NORSTSTOP&gt;&quot;);
 		return ERROR_OK;
 	}
 
@@ -1182,7 +1182,7 @@
 
 	/* mass erase flash memory */
 	target_write_u32(target, STM32_FLASH_CR, FLASH_MER);
-	target_write_u32(target, STM32_FLASH_CR, FLASH_MER|FLASH_STRT);
+	target_write_u32(target, STM32_FLASH_CR, FLASH_MER | FLASH_STRT);
 
 	status = stm32x_wait_status_busy(bank, 10);
 

Modified: trunk/src/flash/str7x.c
===================================================================
--- trunk/src/flash/str7x.c	2009-06-23 22:44:17 UTC (rev 2373)
+++ trunk/src/flash/str7x.c	2009-06-23 22:45:15 UTC (rev 2374)
@@ -160,7 +160,7 @@
 	bank-&gt;driver_priv = str7x_info;
 	
 	/* set default bits for str71x flash */
-	str7x_info-&gt;busy_bits = (FLASH_LOCK|FLASH_BSYA1|FLASH_BSYA0);
+	str7x_info-&gt;busy_bits = (FLASH_LOCK | FLASH_BSYA1 | FLASH_BSYA0);
 	str7x_info-&gt;disable_bit = (1 &lt;&lt; 1);
 	
 	if (strcmp(args[6], &quot;STR71x&quot;) == 0)
@@ -170,7 +170,7 @@
 	else if (strcmp(args[6], &quot;STR73x&quot;) == 0)
 	{
 		str7x_info-&gt;register_base = 0x80100000;
-		str7x_info-&gt;busy_bits = (FLASH_LOCK|FLASH_BSYA0);
+		str7x_info-&gt;busy_bits = (FLASH_LOCK | FLASH_BSYA0);
 	}
 	else if (strcmp(args[6], &quot;STR75x&quot;) == 0)
 	{
@@ -270,7 +270,7 @@
 	cmd = sectors;
 	target_write_u32(target, str7x_get_flash_adr(bank, FLASH_CR1), cmd);
 	
-	cmd = FLASH_SER|FLASH_WMS;
+	cmd = FLASH_SER | FLASH_WMS;
 	target_write_u32(target, str7x_get_flash_adr(bank, FLASH_CR0), cmd);
 	
 	while (((retval = str7x_status(bank)) &amp; str7x_info-&gt;busy_bits)){
@@ -326,7 +326,7 @@
 	cmd = protect_blocks;
 	target_write_u32(target, str7x_get_flash_adr(bank, FLASH_DR0), cmd);
 	
-	cmd = FLASH_SPR|FLASH_WMS;
+	cmd = FLASH_SPR | FLASH_WMS;
 	target_write_u32(target, str7x_get_flash_adr(bank, FLASH_CR0), cmd);
 	
 	while (((retval = str7x_status(bank)) &amp; str7x_info-&gt;busy_bits)){

Modified: trunk/src/flash/str9xpec.c
===================================================================
--- trunk/src/flash/str9xpec.c	2009-06-23 22:44:17 UTC (rev 2373)
+++ trunk/src/flash/str9xpec.c	2009-06-23 22:45:15 UTC (rev 2374)
@@ -1002,7 +1002,7 @@
 
 	if (argc &lt; 2)
 	{
-		command_print(cmd_ctx, &quot;str9xpec options_cmap &lt;bank&gt; &lt;bank0|bank1&gt;&quot;);
+		command_print(cmd_ctx, &quot;str9xpec options_cmap &lt;bank&gt; &lt;bank0 | bank1&gt;&quot;);
 		return ERROR_OK;
 	}
 
@@ -1034,7 +1034,7 @@
 
 	if (argc &lt; 2)
 	{
-		command_print(cmd_ctx, &quot;str9xpec options_lvdthd &lt;bank&gt; &lt;2.4v|2.7v&gt;&quot;);
+		command_print(cmd_ctx, &quot;str9xpec options_lvdthd &lt;bank&gt; &lt;2.4v | 2.7v&gt;&quot;);
 		return ERROR_OK;
 	}
 
@@ -1066,7 +1066,7 @@
 
 	if (argc &lt; 2)
 	{
-		command_print(cmd_ctx, &quot;str9xpec options_lvdsel &lt;bank&gt; &lt;vdd|vdd_vddq&gt;&quot;);
+		command_print(cmd_ctx, &quot;str9xpec options_lvdsel &lt;bank&gt; &lt;vdd | vdd_vddq&gt;&quot;);
 		return ERROR_OK;
 	}
 
@@ -1098,7 +1098,7 @@
 
 	if (argc &lt; 2)
 	{
-		command_print(cmd_ctx, &quot;str9xpec options_lvdwarn &lt;bank&gt; &lt;vdd|vdd_vddq&gt;&quot;);
+		command_print(cmd_ctx, &quot;str9xpec options_lvdwarn &lt;bank&gt; &lt;vdd | vdd_vddq&gt;&quot;);
 		return ERROR_OK;
 	}
 

Modified: trunk/src/flash/tms470.c
===================================================================
--- trunk/src/flash/tms470.c	2009-06-23 22:44:17 UTC (rev 2373)
+++ trunk/src/flash/tms470.c	2009-06-23 22:45:15 UTC (rev 2374)
@@ -411,7 +411,7 @@
 {
 	if (argc &gt; 1)
 	{
-		command_print(cmd_ctx, &quot;tms470 plldis &lt;0|1&gt;&quot;);
+		command_print(cmd_ctx, &quot;tms470 plldis &lt;0 | 1&gt;&quot;);
 		return ERROR_INVALID_ARGUMENTS;
 	}
 	else if (argc == 1)

Modified: trunk/src/helper/binarybuffer.h
===================================================================
--- trunk/src/helper/binarybuffer.h	2009-06-23 22:44:17 UTC (rev 2373)
+++ trunk/src/helper/binarybuffer.h	2009-06-23 22:45:15 UTC (rev 2374)
@@ -55,7 +55,7 @@
 {
 	if ((num == 32) &amp;&amp; (first == 0))
 	{
-		return (((uint32_t)buffer[3]) &lt;&lt; 24)|(((uint32_t)buffer[2]) &lt;&lt; 16)|(((uint32_t)buffer[1]) &lt;&lt; 8)|(((uint32_t)buffer[0]) &lt;&lt; 0);
+		return (((uint32_t)buffer[3]) &lt;&lt; 24) | (((uint32_t)buffer[2]) &lt;&lt; 16) | (((uint32_t)buffer[1]) &lt;&lt; 8) | (((uint32_t)buffer[0]) &lt;&lt; 0);
 	} else
 	{
 		uint32_t result = 0;

Modified: trunk/src/helper/command.c
===================================================================
--- trunk/src/helper/command.c	2009-06-23 22:44:17 UTC (rev 2373)
+++ trunk/src/helper/command.c	2009-06-23 22:45:15 UTC (rev 2374)
@@ -825,7 +825,7 @@
 	if (!recursion)
 	{
 		recursion++;
-		Jim_ProcessEvents (interp, JIM_ALL_EVENTS|JIM_DONT_WAIT);
+		Jim_ProcessEvents (interp, JIM_ALL_EVENTS | JIM_DONT_WAIT);
 		recursion--;
 	}
 #endif

Modified: trunk/src/helper/jim-eventloop.c
===================================================================
--- trunk/src/helper/jim-eventloop.c	2009-06-23 22:44:17 UTC (rev 2373)
+++ trunk/src/helper/jim-eventloop.c	2009-06-23 22:45:15 UTC (rev 2374)
@@ -64,7 +64,7 @@
 /* File event structure */
 typedef struct Jim_FileEvent {
     void *handle;
-    int mask; /* one of JIM_EVENT_(READABLE|WRITABLE|EXCEPTION) */
+    int mask; /* one of JIM_EVENT_(READABLE | WRITABLE | EXCEPTION) */
     Jim_FileProc *fileProc;
     Jim_EventFinalizerProc *finalizerProc;
     void *clientData;
@@ -237,7 +237,7 @@
 /* --- POSIX version of Jim_ProcessEvents, for now the only available --- */
 #define JIM_FILE_EVENTS 1
 #define JIM_TIME_EVENTS 2
-#define JIM_ALL_EVENTS (JIM_FILE_EVENTS|JIM_TIME_EVENTS)
+#define JIM_ALL_EVENTS (JIM_FILE_EVENTS | JIM_TIME_EVENTS)
 #define JIM_DONT_WAIT 4
 
 /* Process every pending time event, then every pending file event

Modified: trunk/src/helper/jim-eventloop.h
===================================================================
--- trunk/src/helper/jim-eventloop.h	2009-06-23 22:44:17 UTC (rev 2373)
+++ trunk/src/helper/jim-eventloop.h	2009-06-23 22:45:15 UTC (rev 2374)
@@ -71,7 +71,7 @@
 /* --- POSIX version of Jim_ProcessEvents, for now the only available --- */
 #define JIM_FILE_EVENTS 1
 #define JIM_TIME_EVENTS 2
-#define JIM_ALL_EVENTS (JIM_FILE_EVENTS|JIM_TIME_EVENTS)
+#define JIM_ALL_EVENTS (JIM_FILE_EVENTS | JIM_TIME_EVENTS)
 #define JIM_DONT_WAIT 4
 
 JIM_STATIC void JIM_API(Jim_CreateFileHandler) (Jim_Interp *interp,

Modified: trunk/src/helper/jim.c
===================================================================
--- trunk/src/helper/jim.c	2009-06-23 22:44:17 UTC (rev 2373)
+++ trunk/src/helper/jim.c	2009-06-23 22:45:15 UTC (rev 2374)
@@ -6963,7 +6963,7 @@
             case JIM_EXPROP_NUMNE: wC = wA != wB; break;
             case JIM_EXPROP_BITAND: wC = wA&wB; break;
             case JIM_EXPROP_BITXOR: wC = wA^wB; break;
-            case JIM_EXPROP_BITOR: wC = wA|wB; break;
+            case JIM_EXPROP_BITOR: wC = wA | wB; break;
             case JIM_EXPROP_POW: wC = JimPowWide(wA,wB); break;
             case JIM_EXPROP_LOGICAND_LEFT:
                 if (wA == 0) {
@@ -6996,7 +6996,7 @@
                 wC = _rotl(uA,(unsigned long)wB);
 #else
                 const unsigned int S = sizeof(unsigned long) * 8;
-                wC = (unsigned long)((uA &lt;&lt; wB)|(uA &gt;&gt; (S-wB)));
+                wC = (unsigned long)((uA &lt;&lt; wB) | (uA &gt;&gt; (S-wB)));
 #endif
                 break;
             }
@@ -7006,7 +7006,7 @@
                 wC = _rotr(uA,(unsigned long)wB);
 #else
                 const unsigned int S = sizeof(unsigned long) * 8;
-                wC = (unsigned long)((uA &gt;&gt; wB)|(uA &lt;&lt; (S-wB)));
+                wC = (unsigned long)((uA &gt;&gt; wB) | (uA &lt;&lt; (S-wB)));
 #endif
                 break;
             }

Modified: trunk/src/helper/jim.h
===================================================================
--- trunk/src/helper/jim.h	2009-06-23 22:44:17 UTC (rev 2373)
+++ trunk/src/helper/jim.h	2009-06-23 22:45:15 UTC (rev 2374)
@@ -1114,7 +1114,7 @@
  *
  *     switch ( n-&gt;value ){
  *     case OPT_SEX:
- *          // handle:  --sex male|female|lots|needmore
+ *          // handle:  --sex male | female | lots | needmore
  *          e = Jim_GetOpt_Nvp( &amp;goi, &amp;nvp_sex, &amp;n );
  *          if ( e != JIM_OK ){
  *               Jim_GetOpt_NvpUnknown( &amp;ogi, nvp_sex, 1 );

Modified: trunk/src/jtag/jlink.c
===================================================================
--- trunk/src/jtag/jlink.c	2009-06-23 22:44:17 UTC (rev 2373)
+++ trunk/src/jtag/jlink.c	2009-06-23 22:45:15 UTC (rev 2374)
@@ -299,7 +299,7 @@
 		&quot;query jlink info&quot;);
 	register_command(cmd_ctx, NULL, &quot;jlink_hw_jtag&quot;,
 		&amp;jlink_handle_jlink_hw_jtag_command, COMMAND_EXEC,
-		&quot;set/get jlink hw jtag command version [2|3]&quot;);
+		&quot;set/get jlink hw jtag command version [2 | 3]&quot;);
 	return ERROR_OK;
 }
 

Modified: trunk/src/jtag/parport.c
===================================================================
--- trunk/src/jtag/parport.c	2009-06-23 22:44:17 UTC (rev 2373)
+++ trunk/src/jtag/parport.c	2009-06-23 22:45:15 UTC (rev 2374)
@@ -469,7 +469,7 @@
 {
 	if (argc != 1)
 	{
-		command_print(cmd_ctx, &quot;usage: parport_write_on_exit &lt;on|off&gt;&quot;);
+		command_print(cmd_ctx, &quot;usage: parport_write_on_exit &lt;on | off&gt;&quot;);
 		return ERROR_OK;
 	}
 

Modified: trunk/src/jtag/tcl.c
===================================================================
--- trunk/src/jtag/tcl.c	2009-06-23 22:44:17 UTC (rev 2373)
+++ trunk/src/jtag/tcl.c	2009-06-23 22:45:15 UTC (rev 2374)
@@ -699,11 +699,11 @@
 	register_jim(cmd_ctx, &quot;pathmove&quot;, Jim_Command_pathmove, &quot;move JTAG to state1 then to state2, state3, etc. &lt;state1&gt;,&lt;state2&gt;,&lt;stat3&gt;...&quot;);
 
 	register_command(cmd_ctx, NULL, &quot;verify_ircapture&quot;, handle_verify_ircapture_command,
-		COMMAND_ANY, &quot;verify value captured during Capture-IR &lt;enable|disable&gt;&quot;);
+		COMMAND_ANY, &quot;verify value captured during Capture-IR &lt;enable | disable&gt;&quot;);
 	register_command(cmd_ctx, NULL, &quot;verify_jtag&quot;, handle_verify_jtag_command,
-		COMMAND_ANY, &quot;verify value capture &lt;enable|disable&gt;&quot;);
+		COMMAND_ANY, &quot;verify value capture &lt;enable | disable&gt;&quot;);
 	register_command(cmd_ctx, NULL, &quot;tms_sequence&quot;, handle_tms_sequence_command,
-		COMMAND_ANY, &quot;choose short(default) or long tms_sequence &lt;short|long&gt;&quot;);
+		COMMAND_ANY, &quot;choose short(default) or long tms_sequence &lt;short | long&gt;&quot;);
 	return ERROR_OK;
 }
 

Modified: trunk/src/jtag/zy1000/jtag_minidriver.h
===================================================================
--- trunk/src/jtag/zy1000/jtag_minidriver.h	2009-06-23 22:44:17 UTC (rev 2373)
+++ trunk/src/jtag/zy1000/jtag_minidriver.h	2009-06-23 22:45:15 UTC (rev 2374)
@@ -74,7 +74,7 @@
 	}
 	waitQueue();
 	sampleShiftRegister();
-	ZY1000_POKE(ZY1000_JTAG_BASE + 0x8, (repeat &lt;&lt; 8)|(a &lt;&lt; 4)|a);
+	ZY1000_POKE(ZY1000_JTAG_BASE + 0x8, (repeat &lt;&lt; 8) | (a &lt;&lt; 4) | a);
 
 }
 
@@ -106,7 +106,7 @@
 			}
 			/* shift out value */
 			waitIdle();
-			ZY1000_POKE(ZY1000_JTAG_BASE + 0x28, (((value &gt;&gt; i)&amp;1) &lt;&lt; 1)|tms);
+			ZY1000_POKE(ZY1000_JTAG_BASE + 0x28, (((value &gt;&gt; i)&amp;1) &lt;&lt; 1) | tms);
 		}
 		waitIdle();
 		ZY1000_POKE(ZY1000_JTAG_BASE + 0x28, 0);
@@ -116,11 +116,11 @@
 		setCurrentState(endState);
 	} else
 	{
-		ZY1000_POKE(ZY1000_JTAG_BASE + 0x8, (repeat &lt;&lt; 8)|(a &lt;&lt; 4)|b);
+		ZY1000_POKE(ZY1000_JTAG_BASE + 0x8, (repeat &lt;&lt; 8) | (a &lt;&lt; 4) | b);
 	}
 #else
 	/* fast version */
-	ZY1000_POKE(ZY1000_JTAG_BASE + 0x8, (repeat &lt;&lt; 8)|(a &lt;&lt; 4)|b);
+	ZY1000_POKE(ZY1000_JTAG_BASE + 0x8, (repeat &lt;&lt; 8) | (a &lt;&lt; 4) | b);
 #endif
 #else
 	/* maximum debug version */
@@ -132,15 +132,15 @@
 		{
 			sampleShiftRegister();
 			ZY1000_POKE(ZY1000_JTAG_BASE + 0xc, value &gt;&gt; i);
-			ZY1000_POKE(ZY1000_JTAG_BASE + 0x8, (1 &lt;&lt; 8)|(a &lt;&lt; 4)|a);
+			ZY1000_POKE(ZY1000_JTAG_BASE + 0x8, (1 &lt;&lt; 8) | (a &lt;&lt; 4) | a);
 		}
 		sampleShiftRegister();
 		ZY1000_POKE(ZY1000_JTAG_BASE + 0xc, value &gt;&gt; (repeat-1));
-		ZY1000_POKE(ZY1000_JTAG_BASE + 0x8, (1 &lt;&lt; 8)|(a &lt;&lt; 4)|b);
+		ZY1000_POKE(ZY1000_JTAG_BASE + 0x8, (1 &lt;&lt; 8) | (a &lt;&lt; 4) | b);
 	} else
 	{
 		sampleShiftRegister();
-		ZY1000_POKE(ZY1000_JTAG_BASE + 0x8, (repeat &lt;&lt; 8)|(a &lt;&lt; 4)|b);
+		ZY1000_POKE(ZY1000_JTAG_BASE + 0x8, (repeat &lt;&lt; 8) | (a &lt;&lt; 4) | b);
 	}
 	sampleShiftRegister();
 #endif

Modified: trunk/src/jtag/zy1000/zy1000.c
===================================================================
--- trunk/src/jtag/zy1000/zy1000.c	2009-06-23 22:44:17 UTC (rev 2373)
+++ trunk/src/jtag/zy1000/zy1000.c	2009-06-23 22:45:15 UTC (rev 2374)
@@ -405,7 +405,7 @@
 	a = state;
 	b = endState;
 	ZY1000_POKE(ZY1000_JTAG_BASE + 0xc, value);
-	ZY1000_POKE(ZY1000_JTAG_BASE + 0x8, (1 &lt;&lt; 15)|(repeat &lt;&lt; 8)|(a &lt;&lt; 4)|b);
+	ZY1000_POKE(ZY1000_JTAG_BASE + 0x8, (1 &lt;&lt; 15) | (repeat &lt;&lt; 8) | (a &lt;&lt; 4) | b);
 	VERBOSE(getShiftValueFlip());
 }
 #endif
@@ -741,7 +741,7 @@
 			for (i = 0; i &lt; count; i++)
 			{
 				shiftValueInner(TAP_DRSHIFT, TAP_DRSHIFT, 32, fast_target_buffer_get_u32(buffer, 1));
-				shiftValueInner(TAP_DRSHIFT, end_state, 6, reg_addr|(1 &lt;&lt; 5));
+				shiftValueInner(TAP_DRSHIFT, end_state, 6, reg_addr | (1 &lt;&lt; 5));
 				buffer += 4;
 			}
 		} else
@@ -750,7 +750,7 @@
 			for (i = 0; i &lt; count; i++)
 			{
 				shiftValueInner(TAP_DRSHIFT, TAP_DRSHIFT, 32, fast_target_buffer_get_u32(buffer, 0));
-				shiftValueInner(TAP_DRSHIFT, end_state, 6, reg_addr|(1 &lt;&lt; 5));
+				shiftValueInner(TAP_DRSHIFT, end_state, 6, reg_addr | (1 &lt;&lt; 5));
 				buffer += 4;
 			}
 		}

Modified: trunk/src/target/arm7_9_common.c
===================================================================
--- trunk/src/target/arm7_9_common.c	2009-06-23 22:44:17 UTC (rev 2373)
+++ trunk/src/target/arm7_9_common.c	2009-06-23 22:45:15 UTC (rev 2374)
@@ -1951,7 +1951,7 @@
 		embeddedice_write_reg(&amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_W0_ADDR_MASK], 0xffffffff);
 		embeddedice_write_reg(&amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_W0_DATA_MASK], 0xffffffff);
 		embeddedice_write_reg(&amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_W0_CONTROL_VALUE], EICE_W_CTRL_ENABLE);
-		embeddedice_write_reg(&amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_W0_CONTROL_MASK], ~(EICE_W_CTRL_RANGE|EICE_W_CTRL_nOPC) &amp; 0xff);
+		embeddedice_write_reg(&amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_W0_CONTROL_MASK], ~(EICE_W_CTRL_RANGE | EICE_W_CTRL_nOPC) &amp; 0xff);
 		embeddedice_write_reg(&amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_W1_ADDR_VALUE], current_pc);
 		embeddedice_write_reg(&amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_W1_ADDR_MASK], 0);
 		embeddedice_write_reg(&amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_W1_DATA_MASK], 0xffffffff);
@@ -2842,17 +2842,17 @@
 
 	arm7_9_cmd = register_command(cmd_ctx, NULL, &quot;arm7_9&quot;, NULL, COMMAND_ANY, &quot;arm7/9 specific commands&quot;);
 
-	register_command(cmd_ctx, arm7_9_cmd, &quot;write_xpsr&quot;, handle_arm7_9_write_xpsr_command, COMMAND_EXEC, &quot;write program status register &lt;value&gt; &lt;not cpsr|spsr&gt;&quot;);
-	register_command(cmd_ctx, arm7_9_cmd, &quot;write_xpsr_im8&quot;, handle_arm7_9_write_xpsr_im8_command, COMMAND_EXEC, &quot;write program status register &lt;8bit immediate&gt; &lt;rotate&gt; &lt;not cpsr|spsr&gt;&quot;);
+	register_command(cmd_ctx, arm7_9_cmd, &quot;write_xpsr&quot;, handle_arm7_9_write_xpsr_command, COMMAND_EXEC, &quot;write program status register &lt;value&gt; &lt;not cpsr | spsr&gt;&quot;);
+	register_command(cmd_ctx, arm7_9_cmd, &quot;write_xpsr_im8&quot;, handle_arm7_9_write_xpsr_im8_command, COMMAND_EXEC, &quot;write program status register &lt;8bit immediate&gt; &lt;rotate&gt; &lt;not cpsr | spsr&gt;&quot;);
 
 	register_command(cmd_ctx, arm7_9_cmd, &quot;write_core_reg&quot;, handle_arm7_9_write_core_reg_command, COMMAND_EXEC, &quot;write core register &lt;num&gt; &lt;mode&gt; &lt;value&gt;&quot;);
 
 	register_command(cmd_ctx, arm7_9_cmd, &quot;dbgrq&quot;, handle_arm7_9_dbgrq_command,
-		COMMAND_ANY, &quot;use EmbeddedICE dbgrq instead of breakpoint for target halt requests &lt;enable|disable&gt;&quot;);
+		COMMAND_ANY, &quot;use EmbeddedICE dbgrq instead of breakpoint for target halt requests &lt;enable | disable&gt;&quot;);
 	register_command(cmd_ctx, arm7_9_cmd, &quot;fast_memory_access&quot;, handle_arm7_9_fast_memory_access_command,
-		 COMMAND_ANY, &quot;use fast memory accesses instead of slower but potentially safer accesses &lt;enable|disable&gt;&quot;);
+		 COMMAND_ANY, &quot;use fast memory accesses instead of slower but potentially safer accesses &lt;enable | disable&gt;&quot;);
 	register_command(cmd_ctx, arm7_9_cmd, &quot;dcc_downloads&quot;, handle_arm7_9_dcc_downloads_command,
-		COMMAND_ANY, &quot;use DCC downloads for larger memory writes &lt;enable|disable&gt;&quot;);
+		COMMAND_ANY, &quot;use DCC downloads for larger memory writes &lt;enable | disable&gt;&quot;);
 
 	armv4_5_register_commands(cmd_ctx);
 
@@ -2884,7 +2884,7 @@
 
 	if (argc &lt; 2)
 	{
-		command_print(cmd_ctx, &quot;usage: write_xpsr &lt;value&gt; &lt;not cpsr|spsr&gt;&quot;);
+		command_print(cmd_ctx, &quot;usage: write_xpsr &lt;value&gt; &lt;not cpsr | spsr&gt;&quot;);
 		return ERROR_OK;
 	}
 
@@ -2929,7 +2929,7 @@
 
 	if (argc &lt; 3)
 	{
-		command_print(cmd_ctx, &quot;usage: write_xpsr_im8 &lt;im8&gt; &lt;rotate&gt; &lt;not cpsr|spsr&gt;&quot;);
+		command_print(cmd_ctx, &quot;usage: write_xpsr_im8 &lt;im8&gt; &lt;rotate&gt; &lt;not cpsr | spsr&gt;&quot;);
 		return ERROR_OK;
 	}
 
@@ -3005,7 +3005,7 @@
 		}
 		else
 		{
-			command_print(cmd_ctx, &quot;usage: arm7_9 dbgrq &lt;enable|disable&gt;&quot;);
+			command_print(cmd_ctx, &quot;usage: arm7_9 dbgrq &lt;enable | disable&gt;&quot;);
 		}
 	}
 
@@ -3038,7 +3038,7 @@
 		}
 		else
 		{
-			command_print(cmd_ctx, &quot;usage: arm7_9 fast_memory_access &lt;enable|disable&gt;&quot;);
+			command_print(cmd_ctx, &quot;usage: arm7_9 fast_memory_access &lt;enable | disable&gt;&quot;);
 		}
 	}
 
@@ -3071,7 +3071,7 @@
 		}
 		else
 		{
-			command_print(cmd_ctx, &quot;usage: arm7_9 dcc_downloads &lt;enable|disable&gt;&quot;);
+			command_print(cmd_ctx, &quot;usage: arm7_9 dcc_downloads &lt;enable | disable&gt;&quot;);
 		}
 	}
 

Modified: trunk/src/target/arm_adi_v5.c
===================================================================
--- trunk/src/target/arm_adi_v5.c	2009-06-23 22:44:17 UTC (rev 2373)
+++ trunk/src/target/arm_adi_v5.c	2009-06-23 22:45:15 UTC (rev 2374)
@@ -1068,11 +1068,11 @@
 			command_print(cmd_ctx, &quot;\tROM table in legacy format&quot; );
 		}
 		/* Now we read ROM table ID registers, ref. ARM IHI 0029B sec  */
-		mem_ap_read_u32(swjdp, (dbgbase&amp;0xFFFFF000)|0xFF0, &amp;cid0);
-		mem_ap_read_u32(swjdp, (dbgbase&amp;0xFFFFF000)|0xFF4, &amp;cid1);
-		mem_ap_read_u32(swjdp, (dbgbase&amp;0xFFFFF000)|0xFF8, &amp;cid2);
-		mem_ap_read_u32(swjdp, (dbgbase&amp;0xFFFFF000)|0xFFC, &amp;cid3);
-		mem_ap_read_u32(swjdp, (dbgbase&amp;0xFFFFF000)|0xFCC, &amp;memtype);
+		mem_ap_read_u32(swjdp, (dbgbase&amp;0xFFFFF000) | 0xFF0, &amp;cid0);
+		mem_ap_read_u32(swjdp, (dbgbase&amp;0xFFFFF000) | 0xFF4, &amp;cid1);
+		mem_ap_read_u32(swjdp, (dbgbase&amp;0xFFFFF000) | 0xFF8, &amp;cid2);
+		mem_ap_read_u32(swjdp, (dbgbase&amp;0xFFFFF000) | 0xFFC, &amp;cid3);
+		mem_ap_read_u32(swjdp, (dbgbase&amp;0xFFFFF000) | 0xFCC, &amp;memtype);
 		swjdp_transaction_endcheck(swjdp);
 		command_print(cmd_ctx, &quot;\tCID3 0x%&quot; PRIx32 &quot;, CID2 0x%&quot; PRIx32 &quot;, CID1 0x%&quot; PRIx32 &quot; CID0, 0x%&quot; PRIx32,cid3,cid2,cid1,cid0);
 		if (memtype&amp;0x01)
@@ -1084,25 +1084,25 @@
 			command_print(cmd_ctx, &quot;\tMEMTYPE system memory not present. Dedicated debug bus&quot; );
 		}
 
-		/* Now we read ROM table entries from dbgbase&amp;0xFFFFF000)|0x000 until we get 0x00000000 */
+		/* Now we read ROM table entries from dbgbase&amp;0xFFFFF000) | 0x000 until we get 0x00000000 */
 		entry_offset = 0;
 		do
 		{
-			mem_ap_read_atomic_u32(swjdp, (dbgbase&amp;0xFFFFF000)|entry_offset, &amp;romentry);
+			mem_ap_read_atomic_u32(swjdp, (dbgbase&amp;0xFFFFF000) | entry_offset, &amp;romentry);
 			command_print(cmd_ctx, &quot;\tROMTABLE[0x%x] = 0x%&quot; PRIx32 &quot;&quot;,entry_offset,romentry);
 			if (romentry&amp;0x01)
 			{
 				uint32_t c_cid0,c_cid1,c_cid2,c_cid3,c_pid0,c_pid1,c_pid2,c_pid3,c_pid4,component_start;
 				uint32_t component_base = (uint32_t)((dbgbase&amp;0xFFFFF000) + (int)(romentry&amp;0xFFFFF000));
-				mem_ap_read_atomic_u32(swjdp, (component_base&amp;0xFFFFF000)|0xFE0, &amp;c_pid0);
-				mem_ap_read_atomic_u32(swjdp, (component_base&amp;0xFFFFF000)|0xFE4, &amp;c_pid1);
-				mem_ap_read_atomic_u32(swjdp, (component_base&amp;0xFFFFF000)|0xFE8, &amp;c_pid2);
-				mem_ap_read_atomic_u32(swjdp, (component_base&amp;0xFFFFF000)|0xFEC, &amp;c_pid3);
-				mem_ap_read_atomic_u32(swjdp, (component_base&amp;0xFFFFF000)|0xFD0, &amp;c_pid4);
-				mem_ap_read_atomic_u32(swjdp, (component_base&amp;0xFFFFF000)|0xFF0, &amp;c_cid0);
-				mem_ap_read_atomic_u32(swjdp, (component_base&amp;0xFFFFF000)|0xFF4, &amp;c_cid1);
-				mem_ap_read_atomic_u32(swjdp, (component_base&amp;0xFFFFF000)|0xFF8, &amp;c_cid2);
-				mem_ap_read_atomic_u32(swjdp, (component_base&amp;0xFFFFF000)|0xFFC, &amp;c_cid3);
+				mem_ap_read_atomic_u32(swjdp, (component_base&amp;0xFFFFF000) | 0xFE0, &amp;c_pid0);
+				mem_ap_read_atomic_u32(swjdp, (component_base&amp;0xFFFFF000) | 0xFE4, &amp;c_pid1);
+				mem_ap_read_atomic_u32(swjdp, (component_base&amp;0xFFFFF000) | 0xFE8, &amp;c_pid2);
+				mem_ap_read_atomic_u32(swjdp, (component_base&amp;0xFFFFF000) | 0xFEC, &amp;c_pid3);
+				mem_ap_read_atomic_u32(swjdp, (component_base&amp;0xFFFFF000) | 0xFD0, &amp;c_pid4);
+				mem_ap_read_atomic_u32(swjdp, (component_base&amp;0xFFFFF000) | 0xFF0, &amp;c_cid0);
+				mem_ap_read_atomic_u32(swjdp, (component_base&amp;0xFFFFF000) | 0xFF4, &amp;c_cid1);
+				mem_ap_read_atomic_u32(swjdp, (component_base&amp;0xFFFFF000) | 0xFF8, &amp;c_cid2);
+				mem_ap_read_atomic_u32(swjdp, (component_base&amp;0xFFFFF000) | 0xFFC, &amp;c_cid3);
 				component_start = component_base - 0x1000*(c_pid4 &gt;&gt; 4);
 				command_print(cmd_ctx, &quot;\t\tComponent base address 0x%&quot; PRIx32 &quot;, pid4 0x%&quot; PRIx32 &quot;, start address 0x%&quot; PRIx32 &quot;&quot;,component_base,c_pid4,component_start);
 				command_print(cmd_ctx, &quot;\t\tComponent cid1 0x%&quot; PRIx32 &quot;, class is %s&quot;,c_cid1,class_description[(c_cid1 &gt;&gt; 4)&amp;0xF]); /* Se ARM DDI 0314 C Table 2.2 */

Modified: trunk/src/target/armv4_5.c
===================================================================
--- trunk/src/target/armv4_5.c	2009-06-23 22:44:17 UTC (rev 2373)
+++ trunk/src/target/armv4_5.c	2009-06-23 22:45:15 UTC (rev 2374)
@@ -456,7 +456,7 @@
 	armv4_5_cmd = register_command(cmd_ctx, NULL, &quot;armv4_5&quot;, NULL, COMMAND_ANY, &quot;armv4/5 specific commands&quot;);
 
 	register_command(cmd_ctx, armv4_5_cmd, &quot;reg&quot;, handle_armv4_5_reg_command, COMMAND_EXEC, &quot;display ARM core registers&quot;);
-	register_command(cmd_ctx, armv4_5_cmd, &quot;core_state&quot;, handle_armv4_5_core_state_command, COMMAND_EXEC, &quot;display/change ARM core state &lt;arm|thumb&gt;&quot;);
+	register_command(cmd_ctx, armv4_5_cmd, &quot;core_state&quot;, handle_armv4_5_core_state_command, COMMAND_EXEC, &quot;display/change ARM core state &lt;arm | thumb&gt;&quot;);
 
 	register_command(cmd_ctx, armv4_5_cmd, &quot;disassemble&quot;, handle_armv4_5_disassemble_command, COMMAND_EXEC, &quot;disassemble instructions &lt;address&gt; &lt;count&gt; ['thumb']&quot;);
 	return ERROR_OK;

Modified: trunk/src/target/cortex_m3.c
===================================================================
--- trunk/src/target/cortex_m3.c	2009-06-23 22:44:17 UTC (rev 2373)
+++ trunk/src/target/cortex_m3.c	2009-06-23 22:45:15 UTC (rev 2374)
@@ -1112,8 +1112,8 @@
 		comparator_list[dwt_num].mask = mask;
 		comparator_list[dwt_num].function = watchpoint-&gt;rw + 5;
 		target_write_u32(target, comparator_list[dwt_num].dwt_comparator_address, comparator_list[dwt_num].comp);
-		target_write_u32(target, comparator_list[dwt_num].dwt_comparator_address|0x4, comparator_list[dwt_num].mask);
-		target_write_u32(target, comparator_list[dwt_num].dwt_comparator_address|0x8, comparator_list[dwt_num].function);
+		target_write_u32(target, comparator_list[dwt_num].dwt_comparator_address | 0x4, comparator_list[dwt_num].mask);
+		target_write_u32(target, comparator_list[dwt_num].dwt_comparator_address | 0x8, comparator_list[dwt_num].function);
 		LOG_DEBUG(&quot;dwt_num %i 0x%&quot; PRIx32 &quot; 0x%&quot; PRIx32 &quot; 0x%&quot; PRIx32 &quot;&quot;, dwt_num, comparator_list[dwt_num].comp, comparator_list[dwt_num].mask, comparator_list[dwt_num].function);
 	}
 	else
@@ -1149,7 +1149,7 @@
 	}
 	comparator_list[dwt_num].used = 0;
 	comparator_list[dwt_num].function = 0;
-	target_write_u32(target, comparator_list[dwt_num].dwt_comparator_address|0x8, comparator_list[dwt_num].function);
+	target_write_u32(target, comparator_list[dwt_num].dwt_comparator_address | 0x8, comparator_list[dwt_num].function);
 
 	watchpoint-&gt;set = 0;
 
@@ -1648,7 +1648,7 @@
 	{
 		if (!strcmp(args[0], &quot;on&quot;))
 		{
-			cortex_m3_write_debug_halt_mask(target, C_HALT|C_MASKINTS, 0);
+			cortex_m3_write_debug_halt_mask(target, C_HALT | C_MASKINTS, 0);
 		}
 		else if (!strcmp(args[0], &quot;off&quot;))
 		{

Modified: trunk/src/target/etm.c
===================================================================
--- trunk/src/target/etm.c	2009-06-23 22:44:17 UTC (rev 2373)
+++ trunk/src/target/etm.c	2009-06-23 22:45:15 UTC (rev 2374)
@@ -1107,7 +1107,7 @@
 	}
 	else if (argc != 0)
 	{
-		command_print(cmd_ctx, &quot;usage: configure trace mode &lt;none|data|address|all&gt; &lt;context id bits&gt; &lt;cycle accurate&gt; &lt;branch output&gt;&quot;);
+		command_print(cmd_ctx, &quot;usage: configure trace mode &lt;none | data | address | all&gt; &lt;context id bits&gt; &lt;cycle accurate&gt; &lt;branch output&gt;&quot;);
 		return ERROR_OK;
 	}
 
@@ -1826,7 +1826,7 @@
 int etm_register_user_commands(struct command_context_s *cmd_ctx)
 {
 	register_command(cmd_ctx, etm_cmd, &quot;tracemode&quot;, handle_etm_tracemode_command,
-		COMMAND_EXEC, &quot;configure trace mode &lt;none|data|address|all&gt; &quot;
+		COMMAND_EXEC, &quot;configure trace mode &lt;none | data | address | all&gt; &quot;
 			&quot;&lt;context_id_bits&gt; &lt;cycle_accurate&gt; &lt;branch_output&gt;&quot;);
 
 	register_command(cmd_ctx, etm_cmd, &quot;info&quot;, handle_etm_info_command,

Modified: trunk/src/target/mips32.h
===================================================================
--- trunk/src/target/mips32.h	2009-06-23 22:44:17 UTC (rev 2373)
+++ trunk/src/target/mips32.h	2009-06-23 22:45:15 UTC (rev 2374)
@@ -94,8 +94,8 @@
 #define MIPS32_COP0_MF	0x00
 #define MIPS32_COP0_MT	0x04
 
-#define MIPS32_R_INST(opcode, rs, rt, rd, shamt, funct)	(((opcode) &lt;&lt; 26) |((rs) &lt;&lt; 21)|((rt) &lt;&lt; 16)|((rd) &lt;&lt; 11)| ((shamt) &lt;&lt; 6) | (funct))
-#define MIPS32_I_INST(opcode, rs, rt, immd)	(((opcode) &lt;&lt; 26) |((rs) &lt;&lt; 21)|((rt) &lt;&lt; 16)|(immd))
+#define MIPS32_R_INST(opcode, rs, rt, rd, shamt, funct)	(((opcode) &lt;&lt; 26) |((rs) &lt;&lt; 21) | ((rt) &lt;&lt; 16) | ((rd) &lt;&lt; 11)| ((shamt) &lt;&lt; 6) | (funct))
+#define MIPS32_I_INST(opcode, rs, rt, immd)	(((opcode) &lt;&lt; 26) |((rs) &lt;&lt; 21) | ((rt) &lt;&lt; 16) | (immd))
 #define MIPS32_J_INST(opcode, addr)	(((opcode) &lt;&lt; 26) |(addr))
 
 #define MIPS32_NOP					0

Modified: trunk/src/target/target.c
===================================================================
--- trunk/src/target/target.c	2009-06-23 22:44:17 UTC (rev 2373)
+++ trunk/src/target/target.c	2009-06-23 22:45:15 UTC (rev 2374)
@@ -1483,7 +1483,7 @@
 	register_command(cmd_ctx,  NULL, &quot;halt&quot;, handle_halt_command, COMMAND_EXEC, &quot;halt target&quot;);
 	register_command(cmd_ctx,  NULL, &quot;resume&quot;, handle_resume_command, COMMAND_EXEC, &quot;resume target [addr]&quot;);
 	register_command(cmd_ctx,  NULL, &quot;step&quot;, handle_step_command, COMMAND_EXEC, &quot;step one instruction from current PC or [addr]&quot;);
-	register_command(cmd_ctx,  NULL, &quot;reset&quot;, handle_reset_command, COMMAND_EXEC, &quot;reset target [run|halt|init] - default is run&quot;);
+	register_command(cmd_ctx,  NULL, &quot;reset&quot;, handle_reset_command, COMMAND_EXEC, &quot;reset target [run | halt | init] - default is run&quot;);
 	register_command(cmd_ctx,  NULL, &quot;soft_reset_halt&quot;, handle_soft_reset_halt_command, COMMAND_EXEC, &quot;halt the target and do a soft reset&quot;);
 
 	register_command(cmd_ctx,  NULL, &quot;mdw&quot;, handle_md_command, COMMAND_EXEC, &quot;display memory words &lt;addr&gt; [count]&quot;);
@@ -3987,7 +3987,7 @@
 		break;
 	case TS_CMD_RESET:
 		if ( goi.argc != 2 ){
-			Jim_WrongNumArgs( interp, 2, argv, &quot;t|f|assert|deassert BOOL&quot;);
+			Jim_WrongNumArgs( interp, 2, argv, &quot;t | f|assert | deassert BOOL&quot;);
 			return JIM_ERR;
 		}
 		e = Jim_GetOpt_Nvp( &amp;goi, nvp_assert, &amp;n );

Modified: trunk/src/target/xscale.c
===================================================================
--- trunk/src/target/xscale.c	2009-06-23 22:44:17 UTC (rev 2373)
+++ trunk/src/target/xscale.c	2009-06-23 22:45:15 UTC (rev 2374)
@@ -3693,7 +3693,7 @@
 
 	register_command(cmd_ctx, xscale_cmd, &quot;vector_catch&quot;, xscale_handle_vector_catch_command, COMMAND_EXEC, &quot;&lt;mask&gt; of vectors that should be catched&quot;);
 
-	register_command(cmd_ctx, xscale_cmd, &quot;trace_buffer&quot;, xscale_handle_trace_buffer_command, COMMAND_EXEC, &quot;&lt;enable|disable&gt; ['fill' [n]|'wrap']&quot;);
+	register_command(cmd_ctx, xscale_cmd, &quot;trace_buffer&quot;, xscale_handle_trace_buffer_command, COMMAND_EXEC, &quot;&lt;enable | disable&gt; ['fill' [n]|'wrap']&quot;);
 
 	register_command(cmd_ctx, xscale_cmd, &quot;dump_trace&quot;, xscale_handle_dump_trace_command, COMMAND_EXEC, &quot;dump content of trace buffer to &lt;file&gt;&quot;);
 	register_command(cmd_ctx, xscale_cmd, &quot;analyze_trace&quot;, xscale_handle_analyze_trace_buffer_command, COMMAND_EXEC, &quot;analyze content of trace buffer&quot;);


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001157.html">[Openocd-svn] r2373 - in trunk/src: flash flash/ocl/at91sam7x	helper jtag jtag/zy1000 server target xsvf
</A></li>
	<LI>Next message: <A HREF="001159.html">[Openocd-svn] r2375 - in trunk: src/flash src/flash/ocl/at91sam7x	src/helper src/jtag src/jtag/zy1000 src/server src/target	src/xsvf testing/examples/cortex
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1158">[ date ]</a>
              <a href="thread.html#1158">[ thread ]</a>
              <a href="subject.html#1158">[ subject ]</a>
              <a href="author.html#1158">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-svn">More information about the openocd-svn
mailing list</a><br>
</body></html>
