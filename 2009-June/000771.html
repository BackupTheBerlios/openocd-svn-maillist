<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-svn] r1987 - trunk/src/jtag
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-svn/2009-June/index.html" >
   <LINK REL="made" HREF="mailto:openocd-svn%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-svn%5D%20r1987%20-%20trunk/src/jtag&In-Reply-To=%3C200906012313.n51NDRqK008488%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000770.html">
   <LINK REL="Next"  HREF="000772.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-svn] r1987 - trunk/src/jtag</H1>
    <B>zwelch at mail.berlios.de</B> 
    <A HREF="mailto:openocd-svn%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-svn%5D%20r1987%20-%20trunk/src/jtag&In-Reply-To=%3C200906012313.n51NDRqK008488%40sheep.berlios.de%3E"
       TITLE="[Openocd-svn] r1987 - trunk/src/jtag">zwelch at mail.berlios.de
       </A><BR>
    <I>Tue Jun  2 01:13:27 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000770.html">[Openocd-svn] r1986 - trunk/doc
</A></li>
        <LI>Next message: <A HREF="000772.html">[Openocd-svn] r1988 - trunk/src/jtag
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#771">[ date ]</a>
              <a href="thread.html#771">[ thread ]</a>
              <a href="subject.html#771">[ subject ]</a>
              <a href="author.html#771">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: zwelch
Date: 2009-06-02 01:13:24 +0200 (Tue, 02 Jun 2009)
New Revision: 1987

Modified:
   trunk/src/jtag/jtag.c
Log:
David Brownell &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">david-b at pacbell.net</A>&gt;:

Whitespace fixes in jtag.c ... mostly end-of-line crap.
Flag &quot;jtag_device&quot; command as obsolete in its helptext.


Modified: trunk/src/jtag/jtag.c
===================================================================
--- trunk/src/jtag/jtag.c	2009-06-01 23:09:19 UTC (rev 1986)
+++ trunk/src/jtag/jtag.c	2009-06-01 23:13:24 UTC (rev 1987)
@@ -6,7 +6,7 @@
  *   <A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">oyvind.harboe at zylin.com</A>                                               *
  *                                                                         *
  *   Copyright (C) 2009 SoftPLC Corporation                                *
- * 	 <A HREF="http://softplc.com">http://softplc.com</A>                                                    *
+ *       <A HREF="http://softplc.com">http://softplc.com</A>                                                *
  *   <A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">dick at softplc.com</A>                                                      *
  *                                                                         *
  *   This program is free software; you can redistribute it and/or modify  *
@@ -595,12 +595,10 @@
 {
 	if (jtag_verify&amp;&amp;jtag_verify_capture_ir)
 	{
-		/* 8 x 32 bit id's is enough for all invoations */
+		/* 8 x 32 bit id's is enough for all invocations */
 
 		for (int j = 0; j &lt; in_num_fields; j++)
 		{
-			in_fields[j].check_value=NULL;
-			in_fields[j].check_mask=NULL;
 			/* if we are to run a verification of the ir scan, we need to get the input back.
 			 * We may have to allocate space if the caller didn't ask for the input back.
 			 */
@@ -716,7 +714,7 @@
 	jtag_command_t * cmd		= cmd_queue_alloc(sizeof(jtag_command_t));
 	scan_command_t * scan		= cmd_queue_alloc(sizeof(scan_command_t));
 	scan_field_t * out_fields	= cmd_queue_alloc(in_num_fields * sizeof(scan_field_t));
-	
+
 	jtag_queue_command(cmd);
 
 	cmd-&gt;type				= JTAG_SCAN;
@@ -844,9 +842,9 @@
 	jtag_command_t * cmd		= cmd_queue_alloc(sizeof(jtag_command_t));
 	scan_command_t * scan		= cmd_queue_alloc(sizeof(scan_command_t));
 	scan_field_t * out_fields	= cmd_queue_alloc((in_num_fields + bypass_devices) * sizeof(scan_field_t));
-	
+
 	jtag_queue_command(cmd);
-	
+
 	cmd-&gt;type				= JTAG_SCAN;
 	cmd-&gt;cmd.scan			= scan;
 
@@ -880,7 +878,7 @@
 
 			assert(field &gt; start_field);	/* must have at least one input field per not bypassed TAP */
 		}
-		
+
 		/* if a TAP is bypassed, generated a dummy bit*/
 		else
 		{
@@ -2322,7 +2320,7 @@
 		COMMAND_ANY, &quot;set maximum jtag speed (if supported); &quot;
 		&quot;parameter is maximum khz, or 0 for adaptive clocking (RTCK).&quot;);
 	register_command(cmd_ctx, NULL, &quot;jtag_device&quot;, handle_jtag_device_command,
-		COMMAND_CONFIG, &quot;jtag_device &lt;ir_length&gt; &lt;ir_expected&gt; &lt;ir_mask&gt;&quot;);
+		COMMAND_CONFIG, &quot;(DEPRECATED) jtag_device &lt;ir_length&gt; &lt;ir_expected&gt; &lt;ir_mask&gt;&quot;);
 	register_command(cmd_ctx, NULL, &quot;reset_config&quot;, handle_reset_config_command,
 		COMMAND_ANY,
 		&quot;[none/trst_only/srst_only/trst_and_srst] [srst_pulls_trst/trst_pulls_srst] [combined/separate] [trst_push_pull/trst_open_drain] [srst_push_pull/srst_open_drain]&quot;);
@@ -3369,7 +3367,7 @@
 	 * N.B. OOCD clocks TMS from LSB first, so read these right-to-left.
 	 * N.B. These values are tightly bound to the table in tap_get_tms_path_len().
 	 * N.B. Reset only needs to be 0b11111, but in JLink an even byte of 1's is more stable.
-	 * 		These extra ones cause no TAP state problem, because we go into reset and stay in reset.
+	 * These extra ones cause no TAP state problem, because we go into reset and stay in reset.
 	 */
 
 
@@ -3388,7 +3386,7 @@
 
 static const struct tms_sequences short_tms_seqs[6][6] =		/*  [from_state_ndx][to_state_ndx] */
 {
-	/* 	this is the table submitted by Jeff Williams on 3/30/2009 with this comment:
+	/* this is the table submitted by Jeff Williams on 3/30/2009 with this comment:
 
 		OK, I added Peter's version of the state table, and it works OK for
 		me on MC1322x. I've recreated the jlink portion of patch with this
@@ -3443,7 +3441,7 @@
 {
 	bool is_stable;
 
-	/* 	A switch() is used because it is symbol dependent
+	/*	A switch() is used because it is symbol dependent
 		(not value dependent like an array), and can also check bounds.
 	*/
 	switch( astate )
@@ -3467,7 +3465,7 @@
 {
 	tap_state_t new_state;
 
-	/* 	A switch is used because it is symbol dependent and not value dependent
+	/*	A switch is used because it is symbol dependent and not value dependent
 		like an array.  Also it can check for out of range conditions.
 	*/
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000770.html">[Openocd-svn] r1986 - trunk/doc
</A></li>
	<LI>Next message: <A HREF="000772.html">[Openocd-svn] r1988 - trunk/src/jtag
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#771">[ date ]</a>
              <a href="thread.html#771">[ thread ]</a>
              <a href="subject.html#771">[ subject ]</a>
              <a href="author.html#771">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-svn">More information about the openocd-svn
mailing list</a><br>
</body></html>
