<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Openocd-svn] r2376 - in trunk/src: . flash flash/ocl/at91sam7x	helper jtag jtag/rlink jtag/zy1000 pld server svf target xsvf
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-svn/2009-June/index.html" >
   <LINK REL="made" HREF="mailto:openocd-svn%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-svn%5D%20r2376%20-%20in%20trunk/src%3A%20.%20flash%20flash/ocl/at91sam7x%0A%09helper%20jtag%20jtag/rlink%20jtag/zy1000%20pld%20server%20svf%20target%20xsvf&In-Reply-To=%3C200906232247.n5NMlbff021167%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001159.html">
   <LINK REL="Next"  HREF="001161.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Openocd-svn] r2376 - in trunk/src: . flash flash/ocl/at91sam7x	helper jtag jtag/rlink jtag/zy1000 pld server svf target xsvf</H1>
    <B>zwelch at mail.berlios.de</B> 
    <A HREF="mailto:openocd-svn%40lists.berlios.de?Subject=Re%3A%20%5BOpenocd-svn%5D%20r2376%20-%20in%20trunk/src%3A%20.%20flash%20flash/ocl/at91sam7x%0A%09helper%20jtag%20jtag/rlink%20jtag/zy1000%20pld%20server%20svf%20target%20xsvf&In-Reply-To=%3C200906232247.n5NMlbff021167%40sheep.berlios.de%3E"
       TITLE="[Openocd-svn] r2376 - in trunk/src: . flash flash/ocl/at91sam7x	helper jtag jtag/rlink jtag/zy1000 pld server svf target xsvf">zwelch at mail.berlios.de
       </A><BR>
    <I>Wed Jun 24 00:47:37 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001159.html">[Openocd-svn] r2375 - in trunk: src/flash src/flash/ocl/at91sam7x	src/helper src/jtag src/jtag/zy1000 src/server src/target	src/xsvf testing/examples/cortex
</A></li>
        <LI>Next message: <A HREF="001161.html">[Openocd-svn] r2377 - in trunk/src: . flash flash/ocl/at91sam7x	helper jtag jtag/rlink jtag/zy1000 pld server svf target xsvf
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1160">[ date ]</a>
              <a href="thread.html#1160">[ thread ]</a>
              <a href="subject.html#1160">[ subject ]</a>
              <a href="author.html#1160">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: zwelch
Date: 2009-06-24 00:46:23 +0200 (Wed, 24 Jun 2009)
New Revision: 2376

Modified:
   trunk/src/ecosboard.c
   trunk/src/flash/at91sam7.c
   trunk/src/flash/avrf.c
   trunk/src/flash/cfi.c
   trunk/src/flash/flash.c
   trunk/src/flash/non_cfi.c
   trunk/src/flash/ocl/at91sam7x/samflash.c
   trunk/src/flash/pic32mx.c
   trunk/src/flash/stm32x.c
   trunk/src/flash/str9x.c
   trunk/src/flash/str9xpec.c
   trunk/src/helper/command.c
   trunk/src/helper/fileio.c
   trunk/src/helper/ioutil.c
   trunk/src/helper/jim-eventloop.c
   trunk/src/helper/jim.c
   trunk/src/helper/jim.h
   trunk/src/helper/log.h
   trunk/src/helper/replacements.h
   trunk/src/jtag/amt_jtagaccel.c
   trunk/src/jtag/arm-jtag-ew.c
   trunk/src/jtag/bitq.c
   trunk/src/jtag/core.c
   trunk/src/jtag/driver.c
   trunk/src/jtag/dummy.c
   trunk/src/jtag/ft2232.c
   trunk/src/jtag/gw16012.c
   trunk/src/jtag/interface.c
   trunk/src/jtag/interface.h
   trunk/src/jtag/parport.c
   trunk/src/jtag/rlink/dtc_cmd.h
   trunk/src/jtag/rlink/rlink.c
   trunk/src/jtag/tcl.c
   trunk/src/jtag/vsllink.c
   trunk/src/jtag/zy1000/jtag_minidriver.h
   trunk/src/openocd.c
   trunk/src/pld/virtex2.c
   trunk/src/server/gdb_server.c
   trunk/src/server/httpd.c
   trunk/src/server/server.c
   trunk/src/svf/svf.c
   trunk/src/target/arm11.c
   trunk/src/target/arm720t.c
   trunk/src/target/arm7_9_common.c
   trunk/src/target/arm7tdmi.c
   trunk/src/target/arm920t.c
   trunk/src/target/arm926ejs.c
   trunk/src/target/arm966e.c
   trunk/src/target/arm9tdmi.c
   trunk/src/target/arm_adi_v5.h
   trunk/src/target/armv4_5.c
   trunk/src/target/armv7m.c
   trunk/src/target/armv7m.h
   trunk/src/target/cortex_a8.c
   trunk/src/target/cortex_m3.c
   trunk/src/target/embeddedice.h
   trunk/src/target/etb.c
   trunk/src/target/image.c
   trunk/src/target/mips32.c
   trunk/src/target/mips32_pracc.c
   trunk/src/target/mips32_pracc.h
   trunk/src/target/mips_m4k.c
   trunk/src/target/target.c
   trunk/src/target/target.h
   trunk/src/target/target_request.c
   trunk/src/target/target_type.h
   trunk/src/target/trace.c
   trunk/src/target/xscale.c
   trunk/src/xsvf/xsvf.c
Log:
Remove whitespace that occurs after '('.
- Replace '([ \t]*' with '('.


Modified: trunk/src/ecosboard.c
===================================================================
--- trunk/src/ecosboard.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/ecosboard.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -93,7 +93,7 @@
 	(int (*)(const char *, int))open,
 	close,
 	(int (*)(int, const void *, int))write,
-	( int (*)(int, void *, int))read
+	(int (*)(int, void *, int))read
 };
 
 #endif
@@ -253,7 +253,7 @@
 void copydir(char *name, char *destdir);
 
 #if 0
-MTAB_ENTRY( romfs_mte1,
+MTAB_ENTRY(romfs_mte1,
 		&quot;/rom&quot;,
 		&quot;romfs&quot;,
 		&quot;&quot;,
@@ -1130,7 +1130,7 @@
 // For simplicity we use _FILESYSTEM synchronization for all accesses since
 // we should never block in any filesystem operations.
 #if 1
-FSTAB_ENTRY( tftpfs_fste, &quot;tftpfs&quot;, 0,
+FSTAB_ENTRY(tftpfs_fste, &quot;tftpfs&quot;, 0,
 		CYG_SYNCMODE_NONE,
 		tftpfs_mount,
 		tftpfs_umount,
@@ -1151,7 +1151,7 @@
 // mtab entry.
 // This defines a single ROMFS loaded into ROM at the configured address
 //
-// MTAB_ENTRY(	rom_mte,	// structure name
+// MTAB_ENTRY(rom_mte,	// structure name
 // 		&quot;/rom&quot;,		// mount point
 // 		&quot;romfs&quot;,	// FIlesystem type
 // 		&quot;&quot;,		// hardware device
@@ -1459,7 +1459,7 @@
 // This defines the entry in the filesystem table.
 // For simplicity we use _FILESYSTEM synchronization for all accesses since
 // we should never block in any filesystem operations.
-FSTAB_ENTRY( logfs_fste, &quot;logfs&quot;, 0,
+FSTAB_ENTRY(logfs_fste, &quot;logfs&quot;, 0,
 		CYG_SYNCMODE_FILE_FILESYSTEM | CYG_SYNCMODE_IO_FILESYSTEM,
 		logfs_mount,
 		logfs_umount,

Modified: trunk/src/flash/at91sam7.c
===================================================================
--- trunk/src/flash/at91sam7.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/flash/at91sam7.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -187,7 +187,7 @@
 	}
 
 	/* Prescaler adjust */
-	if ( (((mckr &amp; PMC_MCKR_PRES) &gt;&gt; 2) == 7) || (tmp == 0) )
+	if ((((mckr &amp; PMC_MCKR_PRES) &gt;&gt; 2) == 7) || (tmp == 0) )
 	{
 		at91sam7_info-&gt;mck_valid = 0;
 		at91sam7_info-&gt;mck_freq = 0;
@@ -707,7 +707,7 @@
 	at91sam7_info-&gt;num_lockbits_on = 0;
 	for (lock_pos = 0; lock_pos &lt; bank-&gt;num_sectors; lock_pos++)
 	{
-		if ( ((status &gt;&gt; (16 + lock_pos))&amp;(0x0001)) == 1)
+		if (((status &gt;&gt; (16 + lock_pos))&amp;(0x0001)) == 1)
 		{
 			at91sam7_info-&gt;num_lockbits_on++;
 			bank-&gt;sectors[lock_pos].is_protected = 1;
@@ -725,7 +725,7 @@
 	at91sam7_info-&gt;num_nvmbits_on = 0;
 	for (gpnvm_pos = 0; gpnvm_pos &lt; at91sam7_info-&gt;num_nvmbits; gpnvm_pos++)
 	{
-		if ( ((status &gt;&gt; (8 + gpnvm_pos))&amp;(0x01)) == 1)
+		if (((status &gt;&gt; (8 + gpnvm_pos))&amp;(0x01)) == 1)
 		{
 			at91sam7_info-&gt;num_nvmbits_on++;
 		}
@@ -907,7 +907,7 @@
 			buffer[pos] = 0xFF;
 		}
 
-		if ( at91sam7_write(bank, buffer, bank-&gt;sectors[first].offset, nbytes) != ERROR_OK)
+		if (at91sam7_write(bank, buffer, bank-&gt;sectors[first].offset, nbytes) != ERROR_OK)
 		{
 			return ERROR_FLASH_OPERATION_FAILED;
 		}

Modified: trunk/src/flash/avrf.c
===================================================================
--- trunk/src/flash/avrf.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/flash/avrf.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -323,7 +323,7 @@
 		return ERROR_FAIL;
 	}
 
-	LOG_INFO( &quot;device id = 0x%08&quot; PRIx32 &quot;&quot;, device_id );
+	LOG_INFO(&quot;device id = 0x%08&quot; PRIx32 &quot;&quot;, device_id );
 	if (EXTRACT_MFG(device_id) != 0x1F)
 	{
 		LOG_ERROR(&quot;0x%&quot; PRIx32 &quot; is invalid Manufacturer for avr, 0x%X is expected&quot;, EXTRACT_MFG(device_id), 0x1F);
@@ -402,7 +402,7 @@
 		return ERROR_FAIL;
 	}
 
-	LOG_INFO( &quot;device id = 0x%08&quot; PRIx32 &quot;&quot;, device_id );
+	LOG_INFO(&quot;device id = 0x%08&quot; PRIx32 &quot;&quot;, device_id );
 	if (EXTRACT_MFG(device_id) != 0x1F)
 	{
 		LOG_ERROR(&quot;0x%&quot; PRIx32 &quot; is invalid Manufacturer for avr, 0x%X is expected&quot;, EXTRACT_MFG(device_id), 0x1F);

Modified: trunk/src/flash/cfi.c
===================================================================
--- trunk/src/flash/cfi.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/flash/cfi.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -1154,7 +1154,7 @@
 	/* flash write code */
 	if (!cfi_info-&gt;write_algorithm)
 	{
-		if ( target_code_size &gt; sizeof(target_code) )
+		if (target_code_size &gt; sizeof(target_code) )
 		{
 			LOG_WARNING(&quot;Internal error - target code buffer to small. Increase CFI_MAX_INTEL_CODESIZE and recompile.&quot;);
 			return ERROR_TARGET_RESOURCE_NOT_AVAILABLE;

Modified: trunk/src/flash/flash.c
===================================================================
--- trunk/src/flash/flash.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/flash/flash.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -793,7 +793,7 @@
 
 	for (wrote = 0; wrote &lt; (count*wordsize); wrote += cur_size)
 	{
-		cur_size = MIN( (count*wordsize - wrote), sizeof(chunk) );
+		cur_size = MIN((count*wordsize - wrote), sizeof(chunk) );
 		flash_bank_t *bank;
 		bank = get_flash_bank_by_addr(target, address);
 		if (bank == NULL)
@@ -994,7 +994,7 @@
 		}
 	}
 
-	if ( first == -1 || last == -1 )
+	if (first == -1 || last == -1 )
 		return ERROR_OK;
 
 	return flash_driver_erase(c, first, last);
@@ -1127,7 +1127,7 @@
 		if (erase)
 		{
 			/* calculate and erase sectors */
-			retval = flash_erase_address_range( target, run_address, run_size );
+			retval = flash_erase_address_range(target, run_address, run_size );
 		}
 
 		if (retval == ERROR_OK)

Modified: trunk/src/flash/non_cfi.c
===================================================================
--- trunk/src/flash/non_cfi.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/flash/non_cfi.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -114,10 +114,10 @@
 		.num_erase_regions = 4,
 		.erase_region_info =
 		{
-			ERASE_REGION( 1, 16*KB),
-			ERASE_REGION( 2,  8*KB),
-			ERASE_REGION( 1, 32*KB),
-			ERASE_REGION( 7, 64*KB)
+			ERASE_REGION(1, 16*KB),
+			ERASE_REGION(2,  8*KB),
+			ERASE_REGION(1, 32*KB),
+			ERASE_REGION(7, 64*KB)
 		}
 	},
 	{
@@ -131,10 +131,10 @@
 		.num_erase_regions = 4,
 		.erase_region_info =
 		{
-			ERASE_REGION( 7, 64*KB),
-			ERASE_REGION( 1, 32*KB),
-			ERASE_REGION( 2,  8*KB),
-			ERASE_REGION( 1, 16*KB)
+			ERASE_REGION(7, 64*KB),
+			ERASE_REGION(1, 32*KB),
+			ERASE_REGION(2,  8*KB),
+			ERASE_REGION(1, 16*KB)
 		}
 	},
 
@@ -236,10 +236,10 @@
 		.num_erase_regions = 4,
 		.erase_region_info =
 		{
-			ERASE_REGION( 1, 16*KB),
-			ERASE_REGION( 2,  8*KB),
-			ERASE_REGION( 1, 32*KB),
-			ERASE_REGION( 7, 64*KB)
+			ERASE_REGION(1, 16*KB),
+			ERASE_REGION(2,  8*KB),
+			ERASE_REGION(1, 32*KB),
+			ERASE_REGION(7, 64*KB)
 		}
 	},
 	{
@@ -253,10 +253,10 @@
 		.num_erase_regions = 4,
 		.erase_region_info =
 		{
-			ERASE_REGION( 7, 64*KB),
-			ERASE_REGION( 1, 32*KB),
-			ERASE_REGION( 2,  8*KB),
-			ERASE_REGION( 1, 16*KB)
+			ERASE_REGION(7, 64*KB),
+			ERASE_REGION(1, 32*KB),
+			ERASE_REGION(2,  8*KB),
+			ERASE_REGION(1, 16*KB)
 		}
 	},
 	{
@@ -270,9 +270,9 @@
 		.num_erase_regions = 4,
 		.erase_region_info =
 		{
-			ERASE_REGION( 1, 16*KB),
-			ERASE_REGION( 2,  8*KB),
-			ERASE_REGION( 1, 32*KB),
+			ERASE_REGION(1, 16*KB),
+			ERASE_REGION(2,  8*KB),
+			ERASE_REGION(1, 32*KB),
 			ERASE_REGION(15, 64*KB)
 		}
 	},
@@ -287,9 +287,9 @@
 		.num_erase_regions = 4,
 		.erase_region_info =
 		{
-			ERASE_REGION( 1, 16*KB),
-			ERASE_REGION( 2,  8*KB),
-			ERASE_REGION( 1, 32*KB),
+			ERASE_REGION(1, 16*KB),
+			ERASE_REGION(2,  8*KB),
+			ERASE_REGION(1, 32*KB),
 			ERASE_REGION(15, 64*KB)
 		}
 	},
@@ -304,9 +304,9 @@
 		.num_erase_regions = 4,
 		.erase_region_info =
 		{
-			ERASE_REGION( 1, 16*KB),
-			ERASE_REGION( 2, 8*KB),
-			ERASE_REGION( 1, 32*KB),
+			ERASE_REGION(1, 16*KB),
+			ERASE_REGION(2, 8*KB),
+			ERASE_REGION(1, 32*KB),
 			ERASE_REGION(15, 64*KB)
 		}
 	},
@@ -322,9 +322,9 @@
 		.num_erase_regions = 4,
 		.erase_region_info =
 		{
-			ERASE_REGION( 1, 16*KB),
-			ERASE_REGION( 2, 8*KB),
-			ERASE_REGION( 1, 32*KB),
+			ERASE_REGION(1, 16*KB),
+			ERASE_REGION(2, 8*KB),
+			ERASE_REGION(1, 32*KB),
 			ERASE_REGION(31, 64*KB)
 		}
 	},
@@ -340,9 +340,9 @@
 		.erase_region_info =
 		{
 			ERASE_REGION(31, 64*KB),
-			ERASE_REGION( 1, 32*KB),
-			ERASE_REGION( 2, 8*KB),
-			ERASE_REGION( 1, 16*KB)
+			ERASE_REGION(1, 32*KB),
+			ERASE_REGION(2, 8*KB),
+			ERASE_REGION(1, 16*KB)
 		}
 	},
 	{
@@ -356,8 +356,8 @@
 		.num_erase_regions = 3,
 		.erase_region_info =
 		{
-			ERASE_REGION( 8,  8*KB),
-			ERASE_REGION( 2, 32*KB),
+			ERASE_REGION(8,  8*KB),
+			ERASE_REGION(2, 32*KB),
 			ERASE_REGION(30, 64*KB)
 		}
 	},
@@ -373,8 +373,8 @@
 		.erase_region_info =
 		{
 			ERASE_REGION(30, 64*KB),
-			ERASE_REGION( 2, 32*KB),
-			ERASE_REGION( 8,  8*KB)
+			ERASE_REGION(2, 32*KB),
+			ERASE_REGION(8,  8*KB)
 		}
 	},
 	{
@@ -388,9 +388,9 @@
 		.num_erase_regions = 4,
 		.erase_region_info =
 		{
-			ERASE_REGION( 1, 16*KB),
-			ERASE_REGION( 2, 8*KB),
-			ERASE_REGION( 1, 32*KB),
+			ERASE_REGION(1, 16*KB),
+			ERASE_REGION(2, 8*KB),
+			ERASE_REGION(1, 32*KB),
 			ERASE_REGION(15, 64*KB)
 		}
 	},

Modified: trunk/src/flash/ocl/at91sam7x/samflash.c
===================================================================
--- trunk/src/flash/ocl/at91sam7x/samflash.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/flash/ocl/at91sam7x/samflash.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -189,7 +189,7 @@
 	unsigned char *flash_ptr;
 
 	flash_ptr = (uint8 *)FLASH_AREA_ADDR + adr;
-	for ( ;len; len--) {
+	for (;len; len--) {
 		if (*(flash_ptr++)!=*(src++)) return FLASH_STAT_VERIFE;
 	}
 	return FLASH_STAT_OK;

Modified: trunk/src/flash/pic32mx.c
===================================================================
--- trunk/src/flash/pic32mx.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/flash/pic32mx.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -229,9 +229,9 @@
 	{
 		LOG_DEBUG(&quot;Erasing entire program flash&quot;);
 		status = pic32mx_nvm_exec(bank, NVMCON_OP_PFM_ERASE, 50);
-		if ( status &amp; NVMCON_NVMERR )
+		if (status &amp; NVMCON_NVMERR )
 			return ERROR_FLASH_OPERATION_FAILED;
-		if ( status &amp; NVMCON_LVDERR )
+		if (status &amp; NVMCON_LVDERR )
 			return ERROR_FLASH_OPERATION_FAILED;
 		return ERROR_OK;
 	}
@@ -245,9 +245,9 @@
 
 		status = pic32mx_nvm_exec(bank, NVMCON_OP_PAGE_ERASE, 10);
 
-		if ( status &amp; NVMCON_NVMERR )
+		if (status &amp; NVMCON_NVMERR )
 			return ERROR_FLASH_OPERATION_FAILED;
-		if ( status &amp; NVMCON_LVDERR )
+		if (status &amp; NVMCON_LVDERR )
 			return ERROR_FLASH_OPERATION_FAILED;
 		bank-&gt;sectors[i].is_erased = 1;
 	}
@@ -313,7 +313,7 @@
 			reg = (i / pic32mx_info-&gt;ppage_size) / 8;
 			bit = (i / pic32mx_info-&gt;ppage_size) - (reg * 8);
 
-			if ( set )
+			if (set )
 				prot_reg[reg] &amp;= ~(1 &lt;&lt; bit);
 			else
 				prot_reg[reg] |= (1 &lt;&lt; bit);
@@ -327,7 +327,7 @@
 			reg = (i / pic32mx_info-&gt;ppage_size) / 8;
 			bit = (i / pic32mx_info-&gt;ppage_size) - (reg * 8);
 
-			if ( set )
+			if (set )
 				prot_reg[reg] &amp;= ~(1 &lt;&lt; bit);
 			else
 				prot_reg[reg] |= (1 &lt;&lt; bit);
@@ -434,12 +434,12 @@
 		}
 #endif
 		status = pic32mx_write_row(bank, address, source-&gt;address);
-		if ( status &amp; NVMCON_NVMERR ) {
+		if (status &amp; NVMCON_NVMERR ) {
 			LOG_ERROR(&quot;Flash write error NVMERR (status = 0x%08&quot; PRIx32 &quot;)&quot;, status);
 			retval = ERROR_FLASH_OPERATION_FAILED;
 			break;
 		}
-		if ( status &amp; NVMCON_LVDERR ) {
+		if (status &amp; NVMCON_LVDERR ) {
 			LOG_ERROR(&quot;Flash write error LVDERR (status = 0x%08&quot; PRIx32 &quot;)&quot;, status);
 			retval = ERROR_FLASH_OPERATION_FAILED;
 			break;
@@ -458,12 +458,12 @@
 		memcpy(&amp;value, buffer, sizeof(uint32_t));
 
 		uint32_t status = pic32mx_write_word(bank, address, value);
-		if ( status &amp; NVMCON_NVMERR ) {
+		if (status &amp; NVMCON_NVMERR ) {
 			LOG_ERROR(&quot;Flash write error NVMERR (status = 0x%08&quot; PRIx32 &quot;)&quot;, status);
 			retval = ERROR_FLASH_OPERATION_FAILED;
 			break;
 		}
-		if ( status &amp; NVMCON_LVDERR ) {
+		if (status &amp; NVMCON_LVDERR ) {
 			LOG_ERROR(&quot;Flash write error LVDERR (status = 0x%08&quot; PRIx32 &quot;)&quot;, status);
 			retval = ERROR_FLASH_OPERATION_FAILED;
 			break;
@@ -564,9 +564,9 @@
 		memcpy(&amp;value, buffer + bytes_written, sizeof(uint32_t));
 
 		status = pic32mx_write_word(bank, address, value);
-		if ( status &amp; NVMCON_NVMERR )
+		if (status &amp; NVMCON_NVMERR )
 			return ERROR_FLASH_OPERATION_FAILED;
-		if ( status &amp; NVMCON_LVDERR )
+		if (status &amp; NVMCON_LVDERR )
 			return ERROR_FLASH_OPERATION_FAILED;
 
 		bytes_written += 4;
@@ -580,9 +580,9 @@
 		memcpy(&amp;value, buffer + bytes_written, bytes_remaining);
 
 		status = pic32mx_write_word(bank, address, value);
-		if ( status &amp; NVMCON_NVMERR )
+		if (status &amp; NVMCON_NVMERR )
 			return ERROR_FLASH_OPERATION_FAILED;
-		if ( status &amp; NVMCON_LVDERR )
+		if (status &amp; NVMCON_LVDERR )
 			return ERROR_FLASH_OPERATION_FAILED;
 	}
 
@@ -603,14 +603,14 @@
 	pic32mx_info-&gt;probed = 0;
 
 	device_id = ejtag_info-&gt;idcode;
-	LOG_INFO( &quot;device id = 0x%08&quot; PRIx32 &quot; (manuf 0x%03x dev 0x%02x, ver 0x%03x)&quot;, 
+	LOG_INFO(&quot;device id = 0x%08&quot; PRIx32 &quot; (manuf 0x%03x dev 0x%02x, ver 0x%03x)&quot;, 
 			  device_id,
 			  (unsigned)((device_id &gt;&gt; 1)&amp;0x7ff), 
 			  (unsigned)((device_id &gt;&gt; 12)&amp;0xff), 
 			  (unsigned)((device_id &gt;&gt; 20)&amp;0xfff) );
 
 	if (((device_id &gt;&gt; 1)&amp;0x7ff) != PIC32MX_MANUF_ID) {
-		LOG_WARNING( &quot;Cannot identify target as a PIC32MX family.&quot; );
+		LOG_WARNING(&quot;Cannot identify target as a PIC32MX family.&quot; );
 		return ERROR_FLASH_OPERATION_FAILED;
 	}
 
@@ -626,7 +626,7 @@
 				break;
 			}
 		if (pic32mx_devs[i].name == NULL) {
-			LOG_WARNING( &quot;Cannot identify target as a PIC32MX family.&quot; );
+			LOG_WARNING(&quot;Cannot identify target as a PIC32MX family.&quot; );
 			return ERROR_FLASH_OPERATION_FAILED;
 		}
 	}
@@ -646,7 +646,7 @@
 	}
 #endif
 
-	LOG_INFO( &quot;flash size = %dkbytes&quot;, num_pages );
+	LOG_INFO(&quot;flash size = %dkbytes&quot;, num_pages );
 
 	/* calculate numbers of pages */
 	num_pages /= (page_size / 1024);
@@ -847,13 +847,13 @@
 
 	target_write_u32(target, PIC32MX_FLASH_CR, FLASH_LOCK);
 
-	if ( status &amp; FLASH_WRPRTERR )
+	if (status &amp; FLASH_WRPRTERR )
 	{
 		LOG_ERROR(&quot;pic32mx device protected&quot;);
 		return ERROR_OK;
 	}
 
-	if ( status &amp; FLASH_PGERR )
+	if (status &amp; FLASH_PGERR )
 	{
 		LOG_ERROR(&quot;pic32mx device programming failed&quot;);
 		return ERROR_OK;
@@ -931,9 +931,9 @@
 
 	res = ERROR_OK;
 	status = pic32mx_write_word(bank, address, value);
-	if ( status &amp; NVMCON_NVMERR )
+	if (status &amp; NVMCON_NVMERR )
 		res = ERROR_FLASH_OPERATION_FAILED;
-	if ( status &amp; NVMCON_LVDERR )
+	if (status &amp; NVMCON_LVDERR )
 		res = ERROR_FLASH_OPERATION_FAILED;
 
 	if (res == ERROR_OK)

Modified: trunk/src/flash/stm32x.c
===================================================================
--- trunk/src/flash/stm32x.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/flash/stm32x.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -182,9 +182,9 @@
 
 	status = stm32x_wait_status_busy(bank, 10);
 
-	if ( status &amp; FLASH_WRPRTERR )
+	if (status &amp; FLASH_WRPRTERR )
 		return ERROR_FLASH_OPERATION_FAILED;
-	if ( status &amp; FLASH_PGERR )
+	if (status &amp; FLASH_PGERR )
 		return ERROR_FLASH_OPERATION_FAILED;
 
 	/* clear readout protection and complementary option bytes
@@ -218,9 +218,9 @@
 
 	status = stm32x_wait_status_busy(bank, 10);
 
-	if ( status &amp; FLASH_WRPRTERR )
+	if (status &amp; FLASH_WRPRTERR )
 		return ERROR_FLASH_OPERATION_FAILED;
-	if ( status &amp; FLASH_PGERR )
+	if (status &amp; FLASH_PGERR )
 		return ERROR_FLASH_OPERATION_FAILED;
 
 	/* write protection byte 1 */
@@ -228,9 +228,9 @@
 
 	status = stm32x_wait_status_busy(bank, 10);
 
-	if ( status &amp; FLASH_WRPRTERR )
+	if (status &amp; FLASH_WRPRTERR )
 		return ERROR_FLASH_OPERATION_FAILED;
-	if ( status &amp; FLASH_PGERR )
+	if (status &amp; FLASH_PGERR )
 		return ERROR_FLASH_OPERATION_FAILED;
 
 	/* write protection byte 2 */
@@ -238,9 +238,9 @@
 
 	status = stm32x_wait_status_busy(bank, 10);
 
-	if ( status &amp; FLASH_WRPRTERR )
+	if (status &amp; FLASH_WRPRTERR )
 		return ERROR_FLASH_OPERATION_FAILED;
-	if ( status &amp; FLASH_PGERR )
+	if (status &amp; FLASH_PGERR )
 		return ERROR_FLASH_OPERATION_FAILED;
 
 	/* write protection byte 3 */
@@ -248,9 +248,9 @@
 
 	status = stm32x_wait_status_busy(bank, 10);
 
-	if ( status &amp; FLASH_WRPRTERR )
+	if (status &amp; FLASH_WRPRTERR )
 		return ERROR_FLASH_OPERATION_FAILED;
-	if ( status &amp; FLASH_PGERR )
+	if (status &amp; FLASH_PGERR )
 		return ERROR_FLASH_OPERATION_FAILED;
 
 	/* write protection byte 4 */
@@ -258,9 +258,9 @@
 
 	status = stm32x_wait_status_busy(bank, 10);
 
-	if ( status &amp; FLASH_WRPRTERR )
+	if (status &amp; FLASH_WRPRTERR )
 		return ERROR_FLASH_OPERATION_FAILED;
-	if ( status &amp; FLASH_PGERR )
+	if (status &amp; FLASH_PGERR )
 		return ERROR_FLASH_OPERATION_FAILED;
 
 	/* write readout protection bit */
@@ -268,9 +268,9 @@
 
 	status = stm32x_wait_status_busy(bank, 10);
 
-	if ( status &amp; FLASH_WRPRTERR )
+	if (status &amp; FLASH_WRPRTERR )
 		return ERROR_FLASH_OPERATION_FAILED;
-	if ( status &amp; FLASH_PGERR )
+	if (status &amp; FLASH_PGERR )
 		return ERROR_FLASH_OPERATION_FAILED;
 
 	target_write_u32(target, STM32_FLASH_CR, FLASH_LOCK);
@@ -338,7 +338,7 @@
 		{
 			set = 1;
 
-			if ( protection &amp; (1 &lt;&lt; i))
+			if (protection &amp; (1 &lt;&lt; i))
 				set = 0;
 
 			for (s = 0; s &lt; stm32x_info-&gt;ppage_size; s++)
@@ -378,9 +378,9 @@
 
 		status = stm32x_wait_status_busy(bank, 10);
 
-		if ( status &amp; FLASH_WRPRTERR )
+		if (status &amp; FLASH_WRPRTERR )
 			return ERROR_FLASH_OPERATION_FAILED;
-		if ( status &amp; FLASH_PGERR )
+		if (status &amp; FLASH_PGERR )
 			return ERROR_FLASH_OPERATION_FAILED;
 		bank-&gt;sectors[i].is_erased = 1;
 	}
@@ -445,7 +445,7 @@
 			reg = (i / stm32x_info-&gt;ppage_size) / 8;
 			bit = (i / stm32x_info-&gt;ppage_size) - (reg * 8);
 
-			if ( set )
+			if (set )
 				prot_reg[reg] &amp;= ~(1 &lt;&lt; bit);
 			else
 				prot_reg[reg] |= (1 &lt;&lt; bit);
@@ -459,7 +459,7 @@
 			reg = (i / stm32x_info-&gt;ppage_size) / 8;
 			bit = (i / stm32x_info-&gt;ppage_size) - (reg * 8);
 
-			if ( set )
+			if (set )
 				prot_reg[reg] &amp;= ~(1 &lt;&lt; bit);
 			else
 				prot_reg[reg] |= (1 &lt;&lt; bit);
@@ -658,12 +658,12 @@
 
 		status = stm32x_wait_status_busy(bank, 5);
 
-		if ( status &amp; FLASH_WRPRTERR )
+		if (status &amp; FLASH_WRPRTERR )
 		{
 			LOG_ERROR(&quot;flash memory not erased before writing&quot;);
 			return ERROR_FLASH_OPERATION_FAILED;
 		}
-		if ( status &amp; FLASH_PGERR )
+		if (status &amp; FLASH_PGERR )
 		{
 			LOG_ERROR(&quot;flash memory write protected&quot;);
 			return ERROR_FLASH_OPERATION_FAILED;
@@ -684,12 +684,12 @@
 
 		status = stm32x_wait_status_busy(bank, 5);
 
-		if ( status &amp; FLASH_WRPRTERR )
+		if (status &amp; FLASH_WRPRTERR )
 		{
 			LOG_ERROR(&quot;flash memory not erased before writing&quot;);
 			return ERROR_FLASH_OPERATION_FAILED;
 		}
-		if ( status &amp; FLASH_PGERR )
+		if (status &amp; FLASH_PGERR )
 		{
 			LOG_ERROR(&quot;flash memory write protected&quot;);
 			return ERROR_FLASH_OPERATION_FAILED;
@@ -720,7 +720,7 @@
 
 	/* read stm32 device id register */
 	target_read_u32(target, 0xE0042000, &amp;device_id);
-	LOG_INFO( &quot;device id = 0x%08&quot; PRIx32 &quot;&quot;, device_id );
+	LOG_INFO(&quot;device id = 0x%08&quot; PRIx32 &quot;&quot;, device_id );
 
 	/* get flash size from target */
 	if (target_read_u16(target, 0x1FFFF7E0, &amp;num_pages) != ERROR_OK)
@@ -740,7 +740,7 @@
 		if (num_pages == 0xffff)
 		{
 			/* number of sectors incorrect on revA */
-			LOG_WARNING( &quot;STM32 flash size failed, probe inaccurate - assuming 128k flash&quot; );
+			LOG_WARNING(&quot;STM32 flash size failed, probe inaccurate - assuming 128k flash&quot; );
 			num_pages = 128;
 		}
 	}
@@ -755,7 +755,7 @@
 		if (num_pages == 0xffff)
 		{
 			/* number of sectors incorrect on revA */
-			LOG_WARNING( &quot;STM32 flash size failed, probe inaccurate - assuming 32k flash&quot; );
+			LOG_WARNING(&quot;STM32 flash size failed, probe inaccurate - assuming 32k flash&quot; );
 			num_pages = 32;
 		}
 	}
@@ -770,7 +770,7 @@
 		if (num_pages == 0xffff)
 		{
 			/* number of sectors incorrect on revZ */
-			LOG_WARNING( &quot;STM32 flash size failed, probe inaccurate - assuming 512k flash&quot; );
+			LOG_WARNING(&quot;STM32 flash size failed, probe inaccurate - assuming 512k flash&quot; );
 			num_pages = 512;
 		}
 	}
@@ -785,17 +785,17 @@
 		if (num_pages == 0xffff)
 		{
 			/* number of sectors incorrect on revZ */
-			LOG_WARNING( &quot;STM32 flash size failed, probe inaccurate - assuming 256k flash&quot; );
+			LOG_WARNING(&quot;STM32 flash size failed, probe inaccurate - assuming 256k flash&quot; );
 			num_pages = 256;
 		}
 	}
 	else
 	{
-		LOG_WARNING( &quot;Cannot identify target as a STM32 family.&quot; );
+		LOG_WARNING(&quot;Cannot identify target as a STM32 family.&quot; );
 		return ERROR_FLASH_OPERATION_FAILED;
 	}
 
-	LOG_INFO( &quot;flash size = %dkbytes&quot;, num_pages );
+	LOG_INFO(&quot;flash size = %dkbytes&quot;, num_pages );
 
 	/* calculate numbers of pages */
 	num_pages /= (page_size / 1024);
@@ -1188,13 +1188,13 @@
 
 	target_write_u32(target, STM32_FLASH_CR, FLASH_LOCK);
 
-	if ( status &amp; FLASH_WRPRTERR )
+	if (status &amp; FLASH_WRPRTERR )
 	{
 		LOG_ERROR(&quot;stm32x device protected&quot;);
 		return ERROR_OK;
 	}
 
-	if ( status &amp; FLASH_PGERR )
+	if (status &amp; FLASH_PGERR )
 	{
 		LOG_ERROR(&quot;stm32x device programming failed&quot;);
 		return ERROR_OK;

Modified: trunk/src/flash/str9x.c
===================================================================
--- trunk/src/flash/str9x.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/flash/str9x.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -305,7 +305,7 @@
 			{
 				return retval;
 			}
-			if ( status &amp; 0x80 )
+			if (status &amp; 0x80 )
 				break;
 			alive_sleep(1);
 		}
@@ -327,7 +327,7 @@
 			return retval;
 		}
 
-		if ( status &amp; 0x22 )
+		if (status &amp; 0x22 )
 		{
 			LOG_ERROR(&quot;error erasing flash bank, status: 0x%x&quot;, status);
 			return ERROR_FLASH_OPERATION_FAILED;
@@ -365,7 +365,7 @@
 		adr = bank-&gt;base + bank-&gt;sectors[i].offset;
 
 		target_write_u16(target, adr, 0x60);
-		if ( set )
+		if (set )
 			target_write_u16(target, adr, 0x01);
 		else
 			target_write_u16(target, adr, 0xD0);
@@ -578,7 +578,7 @@
 		for (timeout = 0; timeout &lt; 1000; timeout++)
 		{
 			target_read_u8(target, bank_adr, &amp;status);
-			if ( status &amp; 0x80 )
+			if (status &amp; 0x80 )
 				break;
 			alive_sleep(1);
 		}
@@ -627,7 +627,7 @@
 		for (timeout = 0; timeout &lt; 1000; timeout++)
 		{
 			target_read_u8(target, bank_adr, &amp;status);
-			if ( status &amp; 0x80 )
+			if (status &amp; 0x80 )
 				break;
 			alive_sleep(1);
 		}

Modified: trunk/src/flash/str9xpec.c
===================================================================
--- trunk/src/flash/str9xpec.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/flash/str9xpec.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -101,7 +101,7 @@
 
 int str9xpec_set_instr(jtag_tap_t *tap, uint32_t new_instr, tap_state_t end_state)
 {
-	if ( tap == NULL ){
+	if (tap == NULL ){
 		return ERROR_TARGET_INVALID;
 	}
 
@@ -325,7 +325,7 @@
 	arm7_9 = armv4_5-&gt;arch_info;
 	jtag_info = &amp;arm7_9-&gt;jtag_info;
 
-	str9xpec_info-&gt;tap = jtag_tap_by_position( jtag_info-&gt;tap-&gt;abs_chain_position - 1);
+	str9xpec_info-&gt;tap = jtag_tap_by_position(jtag_info-&gt;tap-&gt;abs_chain_position - 1);
 	str9xpec_info-&gt;isc_enable = 0;
 
 	str9xpec_build_block_list(bank);
@@ -349,7 +349,7 @@
 	tap = str9xpec_info-&gt;tap;
 
 	if (!str9xpec_info-&gt;isc_enable) {
-		str9xpec_isc_enable( bank );
+		str9xpec_isc_enable(bank );
 	}
 
 	if (!str9xpec_info-&gt;isc_enable) {
@@ -438,7 +438,7 @@
 	tap = str9xpec_info-&gt;tap;
 
 	if (!str9xpec_info-&gt;isc_enable) {
-		str9xpec_isc_enable( bank );
+		str9xpec_isc_enable(bank );
 	}
 
 	if (!str9xpec_info-&gt;isc_enable) {
@@ -518,7 +518,7 @@
 	tap = str9xpec_info-&gt;tap;
 
 	if (!str9xpec_info-&gt;isc_enable) {
-		str9xpec_isc_enable( bank );
+		str9xpec_isc_enable(bank );
 	}
 
 	if (!str9xpec_info-&gt;isc_enable) {
@@ -575,7 +575,7 @@
 	/* last bank: 0xFF signals a full device protect */
 	if (last == 0xFF)
 	{
-		if ( set )
+		if (set )
 		{
 			status = str9xpec_lock_device(bank);
 		}
@@ -589,7 +589,7 @@
 	{
 		for (i = first; i &lt;= last; i++)
 		{
-			if ( set )
+			if (set )
 				buf_set_u32(str9xpec_info-&gt;options, str9xpec_info-&gt;sector_bits[i], 1, 1);
 			else
 				buf_set_u32(str9xpec_info-&gt;options, str9xpec_info-&gt;sector_bits[i], 1, 0);
@@ -919,13 +919,13 @@
 	tap = str9xpec_info-&gt;tap;
 
 	/* erase config options first */
-	status = str9xpec_erase_area( bank, 0xFE, 0xFE );
+	status = str9xpec_erase_area(bank, 0xFE, 0xFE );
 
 	if ((status &amp; ISC_STATUS_ERROR) != STR9XPEC_ISC_SUCCESS)
 		return status;
 
 	if (!str9xpec_info-&gt;isc_enable) {
-		str9xpec_isc_enable( bank );
+		str9xpec_isc_enable(bank );
 	}
 
 	if (!str9xpec_info-&gt;isc_enable) {

Modified: trunk/src/helper/command.c
===================================================================
--- trunk/src/helper/command.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/helper/command.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -348,8 +348,8 @@
 
 void command_output_text(command_context_t *context, const char *data)
 {
-	if ( context &amp;&amp; context-&gt;output_handler &amp;&amp; data  ){
-		context-&gt;output_handler( context, data );
+	if (context &amp;&amp; context-&gt;output_handler &amp;&amp; data  ){
+		context-&gt;output_handler(context, data );
 	}
 }
 
@@ -704,7 +704,7 @@
 	Jim_RegisterCoreCommands(interp);
 #endif
 
-#if defined( _MSC_VER )
+#if defined(_MSC_VER )
 	/* WinXX - is generic, the forward
 	 * looking problem is this:
 	 *
@@ -713,18 +713,18 @@
 	 * &quot;winxx&quot; is generic.
 	 */
 	HostOs = &quot;winxx&quot;;
-#elif defined( __LINUX__)
+#elif defined(__LINUX__)
 	HostOs = &quot;linux&quot;;
-#elif defined( __DARWIN__ )
+#elif defined(__DARWIN__ )
 	HostOs = &quot;darwin&quot;;
-#elif defined( __CYGWIN__ )
+#elif defined(__CYGWIN__ )
 	HostOs = &quot;cygwin&quot;;
-#elif defined( __MINGW32__ )
+#elif defined(__MINGW32__ )
 	HostOs = &quot;mingw32&quot;;
 #else
 	HostOs = &quot;other&quot;;
 #endif
-	Jim_SetGlobalVariableStr( interp, &quot;ocd_HOSTOS&quot;, Jim_NewStringObj( interp, HostOs , strlen(HostOs)) );
+	Jim_SetGlobalVariableStr(interp, &quot;ocd_HOSTOS&quot;, Jim_NewStringObj(interp, HostOs , strlen(HostOs)) );
 
 	Jim_CreateCommand(interp, &quot;ocd_find&quot;, jim_find, NULL, NULL);
 	Jim_CreateCommand(interp, &quot;echo&quot;, jim_echo, NULL, NULL);

Modified: trunk/src/helper/fileio.c
===================================================================
--- trunk/src/helper/fileio.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/helper/fileio.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -182,7 +182,7 @@
 
 static inline int fileio_local_fgets(fileio_t *fileio, uint32_t size, char *buffer)
 {
-	if ( fgets(buffer, size, fileio-&gt;file) == NULL)
+	if (fgets(buffer, size, fileio-&gt;file) == NULL)
 		return ERROR_FILEIO_OPERATION_FAILED;
 	
 	return ERROR_OK;

Modified: trunk/src/helper/ioutil.c
===================================================================
--- trunk/src/helper/ioutil.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/helper/ioutil.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -325,34 +325,34 @@
 
 	fd1 = open(name1, O_WRONLY | O_CREAT, 0664);
 	if (fd1 &lt; 0)
-		SHOW_RESULT( open, fd1 );
+		SHOW_RESULT(open, fd1 );
 
 	fd2 = open(name2, O_RDONLY);
 	if (fd2 &lt; 0)
-		SHOW_RESULT( open, fd2 );
+		SHOW_RESULT(open, fd2 );
 
 	for (;;)
 	{
 		done = read(fd2, buf, IOSIZE );
 		if (done &lt; 0)
 		{
-			SHOW_RESULT( read, done );
+			SHOW_RESULT(read, done );
 			break;
 		}
 
-        if ( done == 0 ) break;
+        if (done == 0 ) break;
 
 		wrote = write(fd1, buf, done);
-        if ( wrote != done ) SHOW_RESULT( write, wrote );
+        if (wrote != done ) SHOW_RESULT(write, wrote );
 
-        if ( wrote != done ) break;
+        if (wrote != done ) break;
 	}
 
 	err = close(fd1);
-    if ( err &lt; 0 ) SHOW_RESULT( close, err );
+    if (err &lt; 0 ) SHOW_RESULT(close, err );
 
 	err = close(fd2);
-    if ( err &lt; 0 ) SHOW_RESULT( close, err );
+    if (err &lt; 0 ) SHOW_RESULT(close, err );
 
 }
 
@@ -372,7 +372,7 @@
 	}
 
 	dirp = opendir(name);
-    if ( dirp == NULL ) SHOW_RESULT( opendir, -1 );
+    if (dirp == NULL ) SHOW_RESULT(opendir, -1 );
 
 	for (;;)
 	{
@@ -421,7 +421,7 @@
 	}
 
 	err = closedir(dirp);
-    if ( err &lt; 0 ) SHOW_RESULT( stat, err );
+    if (err &lt; 0 ) SHOW_RESULT(stat, err );
 }
 
 

Modified: trunk/src/helper/jim-eventloop.c
===================================================================
--- trunk/src/helper/jim-eventloop.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/helper/jim-eventloop.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -298,7 +298,7 @@
             JimGetTime(&amp;now_sec, &amp;now_ms);
             tvp = &tv;
 	    dt   = 1000 * (shortest-&gt;when_sec - now_sec);
-	    dt  += ( shortest-&gt;when_ms  - now_ms);
+	    dt  += (shortest-&gt;when_ms  - now_ms);
             if (dt &lt; 0) {
 		dt = 1;
 	    }
@@ -498,7 +498,7 @@
 	int tlen ;
 	jim_wide remain = 0;
 	const char *tok = Jim_GetString(argv[2], &amp;tlen);
-	if ( sscanf(tok,&quot;after#%lld&quot;,&amp;id) == 1) {
+	if (sscanf(tok,&quot;after#%lld&quot;,&amp;id) == 1) {
 		remain =  Jim_DeleteTimeHandler(interp, id);
 		if (remain &gt; -2)  {
 			Jim_SetResult(interp, Jim_NewIntObj(interp, remain));

Modified: trunk/src/helper/jim.c
===================================================================
--- trunk/src/helper/jim.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/helper/jim.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -117,25 +117,25 @@
  * ---------------------------------------------------------------------------*/
 
 static char *
-jim_vasprintf( const char *fmt, va_list ap )
+jim_vasprintf(const char *fmt, va_list ap )
 {
 #ifndef HAVE_VASPRINTF
 	/* yucky way */
 static char buf[2048];
-	vsnprintf( buf, sizeof(buf), fmt, ap );
+	vsnprintf(buf, sizeof(buf), fmt, ap );
 	/* garentee termination */
 	buf[sizeof(buf)-1] = 0;
 #else
 	char *buf;
 	int result;
-	result = vasprintf( &amp;buf, fmt, ap );
+	result = vasprintf(&amp;buf, fmt, ap );
 	if (result &lt; 0) exit(-1);
 #endif
 	return buf;
 }
 
 static void
-jim_vasprintf_done( void *buf )
+jim_vasprintf_done(void *buf )
 {
 #ifndef HAVE_VASPRINTF
 	(void)(buf);
@@ -438,7 +438,7 @@
     char *endptr;
 
     *intPtr = strtol(str, &amp;endptr, 10);
-    if ( (str[0] == '\0') || (str == endptr) )
+    if ((str[0] == '\0') || (str == endptr) )
         return JIM_ERR;
     if (endptr[0] != '\0') {
         while (*endptr) {
@@ -544,10 +544,10 @@
 #endif
 	
 	/* This may actually crash... we do it last */
-	if ( interp &amp;&amp; interp-&gt;cookie_stderr ){
-		Jim_fprintf(  interp, interp-&gt;cookie_stderr, JIM_NL &quot;JIM INTERPRETER PANIC: &quot;);
-		Jim_vfprintf( interp, interp-&gt;cookie_stderr, fmt, ap );
-		Jim_fprintf(  interp, interp-&gt;cookie_stderr, JIM_NL JIM_NL );
+	if (interp &amp;&amp; interp-&gt;cookie_stderr ){
+		Jim_fprintf(interp, interp-&gt;cookie_stderr, JIM_NL &quot;JIM INTERPRETER PANIC: &quot;);
+		Jim_vfprintf(interp, interp-&gt;cookie_stderr, fmt, ap );
+		Jim_fprintf(interp, interp-&gt;cookie_stderr, JIM_NL JIM_NL );
 	}
     abort();
 }
@@ -2055,17 +2055,17 @@
     StringAppendString(objPtr, str, len);
 }
 
-void Jim_AppendString_sprintf( Jim_Interp *interp, Jim_Obj *objPtr, const char *fmt, ... )
+void Jim_AppendString_sprintf(Jim_Interp *interp, Jim_Obj *objPtr, const char *fmt, ... )
 {
 	char *buf;
 	va_list ap;
 
-	va_start( ap, fmt );
-	buf = jim_vasprintf( fmt, ap );
+	va_start(ap, fmt );
+	buf = jim_vasprintf(fmt, ap );
 	va_end(ap);
 
-	if ( buf ){
-		Jim_AppendString( interp, objPtr, buf, -1 );
+	if (buf ){
+		Jim_AppendString(interp, objPtr, buf, -1 );
 		jim_vasprintf_done(buf);
 	}
 }
@@ -2283,10 +2283,10 @@
 		haveprec = 0;
 		prec = -1; /* not found yet */
     next_fmt:
-		if ( fmtLen &lt;= 0 ){
+		if (fmtLen &lt;= 0 ){
 			break;
 		}
-		switch ( *fmt ){
+		switch (*fmt ){
 			/* terminals */
         case 'b': /* binary - not all printfs() do this */
 		case 's': /* string */
@@ -2341,11 +2341,11 @@
 		case '8':
 		case '9':
 			accum = 0;
-			while ( isdigit(*fmt) &amp;&amp; (fmtLen &gt; 0) ){
+			while (isdigit(*fmt) &amp;&amp; (fmtLen &gt; 0) ){
 				accum = (accum * 10) + (*fmt - '0');
 				fmt++;  fmtLen--;
 			}
-			if ( inprec ){
+			if (inprec ){
 				haveprec = 1;
 				prec = accum;
 			} else {
@@ -2356,24 +2356,24 @@
 			/* suck up the next item as an integer */
 			fmt++;  fmtLen--;
 			objc--;
-			if ( objc &lt;= 0 ){
+			if (objc &lt;= 0 ){
 				goto not_enough_args;
 			}
-			if ( Jim_GetWide(interp,objv[0],&amp;wideValue )== JIM_ERR ){
+			if (Jim_GetWide(interp,objv[0],&amp;wideValue )== JIM_ERR ){
 				Jim_FreeNewObj(interp, resObjPtr );
 				return NULL;
 			}
-			if ( inprec ){
+			if (inprec ){
 				haveprec = 1;
 				prec = wideValue;
-				if ( prec &lt; 0 ){
+				if (prec &lt; 0 ){
 					/* man 3 printf says */
 					/* if prec is negative, it is zero */
 					prec = 0;
 				}
 			} else {
 			width = wideValue;
-			if ( width &lt; 0 ){
+			if (width &lt; 0 ){
 				ljust = 1;
 				width = -width;
 			}
@@ -2402,33 +2402,33 @@
 		 */
 		cp = fmt_str;
 		*cp++ = '%';
-		if ( altfm ){
+		if (altfm ){
 			*cp++ = '#';
 		}
-		if ( forceplus ){
+		if (forceplus ){
 			*cp++ = '+';
-		} else if ( spad ){
+		} else if (spad ){
 			/* PLUS overrides */
 			*cp++ = ' ';
 		}
-		if ( ljust ){
+		if (ljust ){
 			*cp++ = '-';
 		}
-		if ( zpad  ){
+		if (zpad  ){
 			*cp++ = '0';
 		}
-		if ( width &gt; 0 ){
-			sprintf( cp, &quot;%d&quot;, width );
+		if (width &gt; 0 ){
+			sprintf(cp, &quot;%d&quot;, width );
 			/* skip ahead */
 			cp = strchr(cp,0);
 		}
 		/* did we find a period? */
-		if ( inprec ){
+		if (inprec ){
 			/* then add it */
 			*cp++ = '.';
 			/* did something occur after the period? */
-			if ( haveprec ){
-				sprintf( cp, &quot;%d&quot;, prec );
+			if (haveprec ){
+				sprintf(cp, &quot;%d&quot;, prec );
 			}
 			cp = strchr(cp,0);
 		}
@@ -2441,7 +2441,7 @@
 			*cp++ = 's';
 			*cp   = 0;
 			/* BUG: we do not handled embeded NULLs */
-			snprintf( sprintf_buf, JIM_MAX_FMT, fmt_str, Jim_GetString( objv[0], NULL ));
+			snprintf(sprintf_buf, JIM_MAX_FMT, fmt_str, Jim_GetString(objv[0], NULL ));
             break;
         case 'c':
 			*cp++ = 'c';
@@ -2451,7 +2451,7 @@
                 return NULL;
             }
             c = (char) wideValue;
-			snprintf( sprintf_buf, JIM_MAX_FMT, fmt_str, c );
+			snprintf(sprintf_buf, JIM_MAX_FMT, fmt_str, c );
             break;
 		case 'f':
 		case 'F':
@@ -2461,11 +2461,11 @@
 		case 'E':
 			*cp++ = *fmt;
 			*cp   = 0;
-			if ( Jim_GetDouble( interp, objv[0], &amp;doubleValue ) == JIM_ERR ){
-				Jim_FreeNewObj( interp, resObjPtr );
+			if (Jim_GetDouble(interp, objv[0], &amp;doubleValue ) == JIM_ERR ){
+				Jim_FreeNewObj(interp, resObjPtr );
 				return NULL;
 			}
-			snprintf( sprintf_buf, JIM_MAX_FMT, fmt_str, doubleValue );
+			snprintf(sprintf_buf, JIM_MAX_FMT, fmt_str, doubleValue );
 			break;
         case 'b':
         case 'd':
@@ -2475,7 +2475,7 @@
 		case 'x':
 		case 'X':
 			/* jim widevaluse are 64bit */
-			if ( sizeof(jim_wide) == sizeof(long long) ){
+			if (sizeof(jim_wide) == sizeof(long long) ){
 				*cp++ = 'l'; 
 				*cp++ = 'l';
 			} else {
@@ -2509,7 +2509,7 @@
 #endif
 		
 		sprintf_buf[ JIM_MAX_FMT - 1] = 0;
-		Jim_AppendString( interp, resObjPtr, sprintf_buf, strlen(sprintf_buf) );
+		Jim_AppendString(interp, resObjPtr, sprintf_buf, strlen(sprintf_buf) );
 		/* next obj */
 		objv++;
         fmt++;
@@ -2626,13 +2626,13 @@
 	Jim_Nvp *n;
 	int e;
 
-	e = Jim_Nvp_name2value_obj( interp, nvp_table, objPtr, &amp;n );
-	if ( e == JIM_ERR ){
+	e = Jim_Nvp_name2value_obj(interp, nvp_table, objPtr, &amp;n );
+	if (e == JIM_ERR ){
 		return e;
 	}
 
 	/* Success? found? */
-	if ( n-&gt;name ){
+	if (n-&gt;name ){
 		/* remove const */
 		*result = (Jim_Nvp *)n;
 		return JIM_OK;
@@ -4424,11 +4424,11 @@
     i-&gt;cookie_stdin = stdin;
     i-&gt;cookie_stdout = stdout;
     i-&gt;cookie_stderr = stderr;
-	i-&gt;cb_fwrite   = ((size_t (*)( const void *, size_t, size_t, void *))(fwrite));
-	i-&gt;cb_fread    = ((size_t (*)(       void *, size_t, size_t, void *))(fread));
-	i-&gt;cb_vfprintf = ((int    (*)( void *, const char *fmt, va_list ))(vfprintf));
-	i-&gt;cb_fflush   = ((int    (*)( void *))(fflush));
-	i-&gt;cb_fgets    = ((char * (*)( char *, int, void *))(fgets));
+	i-&gt;cb_fwrite   = ((size_t (*)(const void *, size_t, size_t, void *))(fwrite));
+	i-&gt;cb_fread    = ((size_t (*)(void *, size_t, size_t, void *))(fread));
+	i-&gt;cb_vfprintf = ((int    (*)(void *, const char *fmt, va_list ))(vfprintf));
+	i-&gt;cb_fflush   = ((int    (*)(void *))(fflush));
+	i-&gt;cb_fgets    = ((char * (*)(char *, int, void *))(fgets));
 
     /* Note that we can create objects only after the
      * interpreter liveList and freeList pointers are
@@ -4498,23 +4498,23 @@
     if (i-&gt;liveList != NULL) {
         Jim_Obj *objPtr = i-&gt;liveList;
     
-        Jim_fprintf( i, i-&gt;cookie_stdout,JIM_NL &quot;-------------------------------------&quot; JIM_NL);
-        Jim_fprintf( i, i-&gt;cookie_stdout,&quot;Objects still in the free list:&quot; JIM_NL);
+        Jim_fprintf(i, i-&gt;cookie_stdout,JIM_NL &quot;-------------------------------------&quot; JIM_NL);
+        Jim_fprintf(i, i-&gt;cookie_stdout,&quot;Objects still in the free list:&quot; JIM_NL);
         while (objPtr) {
             const char *type = objPtr-&gt;typePtr ?
                 objPtr-&gt;typePtr-&gt;name : &quot;&quot;;
-            Jim_fprintf( i, i-&gt;cookie_stdout,&quot;%p \&quot;%-10s\&quot;: '%.20s' (refCount: %d)&quot; JIM_NL,
+            Jim_fprintf(i, i-&gt;cookie_stdout,&quot;%p \&quot;%-10s\&quot;: '%.20s' (refCount: %d)&quot; JIM_NL,
                     objPtr, type,
                     objPtr-&gt;bytes ? objPtr-&gt;bytes
                     : &quot;(null)&quot;, objPtr-&gt;refCount);
             if (objPtr-&gt;typePtr == &amp;sourceObjType) {
-                Jim_fprintf( i, i-&gt;cookie_stdout, &quot;FILE %s LINE %d&quot; JIM_NL,
+                Jim_fprintf(i, i-&gt;cookie_stdout, &quot;FILE %s LINE %d&quot; JIM_NL,
                 objPtr-&gt;internalRep.sourceValue.fileName,
                 objPtr-&gt;internalRep.sourceValue.lineNumber);
             }
             objPtr = objPtr-&gt;nextObjPtr;
         }
-        Jim_fprintf( i, i-&gt;cookie_stdout, &quot;-------------------------------------&quot; JIM_NL JIM_NL);
+        Jim_fprintf(i, i-&gt;cookie_stdout, &quot;-------------------------------------&quot; JIM_NL JIM_NL);
         Jim_Panic(i,&quot;Live list non empty freeing the interpreter! Leak?&quot;);
     }
     /* Free all the freed objects. */
@@ -6352,7 +6352,7 @@
     if (*pc-&gt;p == '-') {
         pc-&gt;p++; pc-&gt;len--;
     }
-    while (  isdigit((int)*pc-&gt;p) 
+    while (isdigit((int)*pc-&gt;p) 
           || (allowhex &amp;&amp; isxdigit((int)*pc-&gt;p) )
           || (allowdot &amp;&amp; *pc-&gt;p == '.') 
           || (pc-&gt;p-pc-&gt;tstart == 1 &amp;&amp; *pc-&gt;tstart == '0' &amp;&amp;
@@ -8684,7 +8684,7 @@
             Jim_Obj **eargv = NULL;
 
             for (j = 0; j &lt; argc; j++) {
-                Jim_ExpandArgument( interp, &amp;eargv, &amp;eargc,
+                Jim_ExpandArgument(interp, &amp;eargv, &amp;eargc,
                         ecs[j] &lt; 0, argv[j]);
             }
             if (argv != sargv)
@@ -8894,8 +8894,8 @@
     Jim_IncrRefCount(scriptObjPtr);
 
 
-	if ( filename ){
-		JimSetSourceInfo( interp, scriptObjPtr, filename, lineno );
+	if (filename ){
+		JimSetSourceInfo(interp, scriptObjPtr, filename, lineno );
 	}
 
     retval = Jim_EvalObj(interp, scriptObjPtr);
@@ -8905,7 +8905,7 @@
 
 int Jim_Eval(Jim_Interp *interp, const char *script)
 {
-	return Jim_Eval_Named( interp, script, NULL, 0 );
+	return Jim_Eval_Named(interp, script, NULL, 0 );
 }
 
 
@@ -8942,7 +8942,7 @@
         Jim_IncrRefCount(objv[1]);
         if (Jim_EvalObjVector(interp, 2, objv) != JIM_OK) {
             /* Report the error to stderr. */
-            Jim_fprintf( interp, interp-&gt;cookie_stderr, &quot;Background error:&quot; JIM_NL);
+            Jim_fprintf(interp, interp-&gt;cookie_stderr, &quot;Background error:&quot; JIM_NL);
             Jim_PrintErrorMessage(interp);
         }
         Jim_DecrRefCount(interp, objv[0]);
@@ -8963,7 +8963,7 @@
     	const int cwd_len = 2048;
 		char *cwd = malloc(cwd_len);
         Jim_SetResult(interp, Jim_NewEmptyStringObj(interp));
-	if (!getcwd( cwd, cwd_len )) strcpy(cwd, &quot;unknown&quot;);
+	if (!getcwd(cwd, cwd_len )) strcpy(cwd, &quot;unknown&quot;);
         Jim_AppendStrings(interp, Jim_GetResult(interp),
 	&quot;Error loading script \&quot;&quot;, filename, &quot;\&quot;&quot;,
 	    &quot; cwd: &quot;, cwd,
@@ -9523,7 +9523,7 @@
     }
     str = Jim_GetString(argv[1], &amp;len);
     Jim_fwrite(interp, str, 1, len, interp-&gt;cookie_stdout);
-    if (!nonewline) Jim_fprintf( interp, interp-&gt;cookie_stdout, JIM_NL);
+    if (!nonewline) Jim_fprintf(interp, interp-&gt;cookie_stdout, JIM_NL);
     return JIM_OK;
 }
 
@@ -12320,16 +12320,16 @@
                 JIM_NONE);
         line = Jim_GetString(objPtr, NULL);
         if (*proc) {
-            Jim_fprintf( interp, interp-&gt;cookie_stderr,
+            Jim_fprintf(interp, interp-&gt;cookie_stderr,
                     &quot;in procedure '%s' &quot;, proc);
         }
         if (*file) {
-            Jim_fprintf( interp, interp-&gt;cookie_stderr,
+            Jim_fprintf(interp, interp-&gt;cookie_stderr,
                     &quot;called at file \&quot;%s\&quot;, line %s&quot;,
                     file, line);
         }
         if (*file || *proc) {
-            Jim_fprintf( interp, interp-&gt;cookie_stderr, JIM_NL);
+            Jim_fprintf(interp, interp-&gt;cookie_stderr, JIM_NL);
         }
     }
 }
@@ -12357,8 +12357,8 @@
             else
                 Jim_fprintf(interp,interp-&gt;cookie_stdout, &quot;[%d] . &quot;, retcode);
         } else
-            Jim_fprintf( interp, interp-&gt;cookie_stdout, &quot;. &quot;);
-        Jim_fflush( interp, interp-&gt;cookie_stdout);
+            Jim_fprintf(interp, interp-&gt;cookie_stdout, &quot;. &quot;);
+        Jim_fflush(interp, interp-&gt;cookie_stdout);
         scriptObjPtr = Jim_NewStringObj(interp, &quot;&quot;, 0);
         Jim_IncrRefCount(scriptObjPtr);
         while (1) {
@@ -12366,7 +12366,7 @@
             char state;
             int len;
 
-            if ( Jim_fgets(interp, buf, 1024, interp-&gt;cookie_stdin) == NULL) {
+            if (Jim_fgets(interp, buf, 1024, interp-&gt;cookie_stdin) == NULL) {
                 Jim_DecrRefCount(interp, scriptObjPtr);
                 goto out;
             }
@@ -12374,8 +12374,8 @@
             str = Jim_GetString(scriptObjPtr, &amp;len);
             if (Jim_ScriptIsComplete(str, len, &amp;state))
                 break;
-            Jim_fprintf( interp, interp-&gt;cookie_stdout, &quot;%c&gt; &quot;, state);
-            Jim_fflush( interp, interp-&gt;cookie_stdout);
+            Jim_fprintf(interp, interp-&gt;cookie_stdout, &quot;%c&gt; &quot;, state);
+            Jim_fflush(interp, interp-&gt;cookie_stdout);
         }
         retcode = Jim_EvalObj(interp, scriptObjPtr);
         Jim_DecrRefCount(interp, scriptObjPtr);
@@ -12386,8 +12386,8 @@
             exit(Jim_GetExitCode(interp));
         } else {
             if (reslen) {
-				Jim_fwrite( interp, result, 1, reslen, interp-&gt;cookie_stdout);
-				Jim_fprintf( interp,interp-&gt;cookie_stdout, JIM_NL);
+				Jim_fwrite(interp, result, 1, reslen, interp-&gt;cookie_stdout);
+				Jim_fprintf(interp,interp-&gt;cookie_stdout, JIM_NL);
             }
         }
     }
@@ -12399,66 +12399,66 @@
  * Jim's idea of STDIO..
  * ---------------------------------------------------------------------------*/
 
-int Jim_fprintf( Jim_Interp *interp, void *cookie, const char *fmt, ... )
+int Jim_fprintf(Jim_Interp *interp, void *cookie, const char *fmt, ... )
 {
 	int r;
 
 	va_list ap;
 	va_start(ap,fmt);
-	r = Jim_vfprintf( interp, cookie, fmt,ap );
+	r = Jim_vfprintf(interp, cookie, fmt,ap );
 	va_end(ap);
 	return r;
 }
 
-int Jim_vfprintf( Jim_Interp *interp, void *cookie, const char *fmt, va_list ap )
+int Jim_vfprintf(Jim_Interp *interp, void *cookie, const char *fmt, va_list ap )
 {
-	if ( (interp == NULL) || (interp-&gt;cb_vfprintf == NULL) ){
+	if ((interp == NULL) || (interp-&gt;cb_vfprintf == NULL) ){
 		errno = ENOTSUP;
 		return -1;
 	}
-	return (*(interp-&gt;cb_vfprintf))( cookie, fmt, ap );
+	return (*(interp-&gt;cb_vfprintf))(cookie, fmt, ap );
 }
 
-size_t Jim_fwrite( Jim_Interp *interp, const void *ptr, size_t size, size_t n, void *cookie )
+size_t Jim_fwrite(Jim_Interp *interp, const void *ptr, size_t size, size_t n, void *cookie )
 {
-	if ( (interp == NULL) || (interp-&gt;cb_fwrite == NULL) ){
+	if ((interp == NULL) || (interp-&gt;cb_fwrite == NULL) ){
 		errno = ENOTSUP;
 		return 0;
 	}
-	return (*(interp-&gt;cb_fwrite))( ptr, size, n, cookie);
+	return (*(interp-&gt;cb_fwrite))(ptr, size, n, cookie);
 }
 
-size_t Jim_fread( Jim_Interp *interp, void *ptr, size_t size, size_t n, void *cookie )
+size_t Jim_fread(Jim_Interp *interp, void *ptr, size_t size, size_t n, void *cookie )
 {
-	if ( (interp == NULL) || (interp-&gt;cb_fread == NULL) ){
+	if ((interp == NULL) || (interp-&gt;cb_fread == NULL) ){
 		errno = ENOTSUP;
 		return 0;
 	}
-	return (*(interp-&gt;cb_fread))( ptr, size, n, cookie);
+	return (*(interp-&gt;cb_fread))(ptr, size, n, cookie);
 }
 
-int Jim_fflush( Jim_Interp *interp, void *cookie )
+int Jim_fflush(Jim_Interp *interp, void *cookie )
 {
-	if ( (interp == NULL) || (interp-&gt;cb_fflush == NULL) ){
+	if ((interp == NULL) || (interp-&gt;cb_fflush == NULL) ){
 		/* pretend all is well */
 		return 0;
 	}
-	return (*(interp-&gt;cb_fflush))( cookie );
+	return (*(interp-&gt;cb_fflush))(cookie );
 }
 
-char* Jim_fgets( Jim_Interp *interp, char *s, int size, void *cookie )
+char* Jim_fgets(Jim_Interp *interp, char *s, int size, void *cookie )
 {
-	if ( (interp == NULL) || (interp-&gt;cb_fgets == NULL) ){
+	if ((interp == NULL) || (interp-&gt;cb_fgets == NULL) ){
 		errno = ENOTSUP;
 		return NULL;
 	}
-	return (*(interp-&gt;cb_fgets))( s, size, cookie );
+	return (*(interp-&gt;cb_fgets))(s, size, cookie );
 }
 Jim_Nvp *
-Jim_Nvp_name2value_simple( const Jim_Nvp *p, const char *name )
+Jim_Nvp_name2value_simple(const Jim_Nvp *p, const char *name )
 {
-	while ( p-&gt;name ){
-		if ( 0 == strcmp( name, p-&gt;name ) ){
+	while (p-&gt;name ){
+		if (0 == strcmp(name, p-&gt;name ) ){
 			break;
 		}
 		p++;
@@ -12467,10 +12467,10 @@
 }
 
 Jim_Nvp *
-Jim_Nvp_name2value_nocase_simple( const Jim_Nvp *p, const char *name )
+Jim_Nvp_name2value_nocase_simple(const Jim_Nvp *p, const char *name )
 {
-	while ( p-&gt;name ){
-		if ( 0 == strcasecmp( name, p-&gt;name ) ){
+	while (p-&gt;name ){
+		if (0 == strcasecmp(name, p-&gt;name ) ){
 			break;
 		}
 		p++;
@@ -12479,32 +12479,32 @@
 }
 
 int
-Jim_Nvp_name2value_obj( Jim_Interp *interp, 
+Jim_Nvp_name2value_obj(Jim_Interp *interp, 
 						const Jim_Nvp *p, 
 						Jim_Obj *o, 
 						Jim_Nvp **result )
 {
-	return Jim_Nvp_name2value( interp, p, Jim_GetString( o, NULL ), result );
+	return Jim_Nvp_name2value(interp, p, Jim_GetString(o, NULL ), result );
 }
 	
 
 int 
-Jim_Nvp_name2value( Jim_Interp *interp, 
+Jim_Nvp_name2value(Jim_Interp *interp, 
 					const Jim_Nvp *_p, 
 					const char *name, 
 					Jim_Nvp **result)
 {
 	const Jim_Nvp *p;
 
-	p = Jim_Nvp_name2value_simple( _p, name );
+	p = Jim_Nvp_name2value_simple(_p, name );
 
 	/* result */
-	if ( result ){
+	if (result ){
 		*result = (Jim_Nvp *)(p);
 	}
 	
 	/* found? */
-	if ( p-&gt;name ){
+	if (p-&gt;name ){
 		return JIM_OK;
 	} else {
 		return JIM_ERR;
@@ -12512,23 +12512,23 @@
 }
 
 int
-Jim_Nvp_name2value_obj_nocase( Jim_Interp *interp, const Jim_Nvp *p, Jim_Obj *o, Jim_Nvp **puthere )
+Jim_Nvp_name2value_obj_nocase(Jim_Interp *interp, const Jim_Nvp *p, Jim_Obj *o, Jim_Nvp **puthere )
 {
-	return Jim_Nvp_name2value_nocase( interp, p, Jim_GetString( o, NULL ), puthere );
+	return Jim_Nvp_name2value_nocase(interp, p, Jim_GetString(o, NULL ), puthere );
 }
 
 int
-Jim_Nvp_name2value_nocase( Jim_Interp *interp, const Jim_Nvp *_p, const char *name, Jim_Nvp **puthere )
+Jim_Nvp_name2value_nocase(Jim_Interp *interp, const Jim_Nvp *_p, const char *name, Jim_Nvp **puthere )
 {
 	const Jim_Nvp *p;
 
-	p = Jim_Nvp_name2value_nocase_simple( _p, name );
+	p = Jim_Nvp_name2value_nocase_simple(_p, name );
 
-	if ( puthere ){
+	if (puthere ){
 		*puthere = (Jim_Nvp *)(p);
 	}
 	/* found */
-	if ( p-&gt;name ){
+	if (p-&gt;name ){
 		return JIM_OK;
 	} else {
 		return JIM_ERR;
@@ -12537,24 +12537,24 @@
 
 
 int 
-Jim_Nvp_value2name_obj( Jim_Interp *interp, const Jim_Nvp *p, Jim_Obj *o, Jim_Nvp **result )
+Jim_Nvp_value2name_obj(Jim_Interp *interp, const Jim_Nvp *p, Jim_Obj *o, Jim_Nvp **result )
 {
 	int e;;
 	jim_wide w;
 
-	e = Jim_GetWide( interp, o, &amp;w );
-	if ( e != JIM_OK ){
+	e = Jim_GetWide(interp, o, &amp;w );
+	if (e != JIM_OK ){
 		return e;
 	}
 
-	return Jim_Nvp_value2name( interp, p, w, result );
+	return Jim_Nvp_value2name(interp, p, w, result );
 }
 
 Jim_Nvp *
-Jim_Nvp_value2name_simple( const Jim_Nvp *p, int value )
+Jim_Nvp_value2name_simple(const Jim_Nvp *p, int value )
 {
-	while ( p-&gt;name ){
-		if ( value == p-&gt;value ){
+	while (p-&gt;name ){
+		if (value == p-&gt;value ){
 			break;
 		}
 		p++;
@@ -12564,17 +12564,17 @@
 
 
 int 
-Jim_Nvp_value2name( Jim_Interp *interp, const Jim_Nvp *_p, int value, Jim_Nvp **result )
+Jim_Nvp_value2name(Jim_Interp *interp, const Jim_Nvp *_p, int value, Jim_Nvp **result )
 {
 	const Jim_Nvp *p;
 
-	p = Jim_Nvp_value2name_simple( _p, value );
+	p = Jim_Nvp_value2name_simple(_p, value );
 
-	if ( result ){
+	if (result ){
 		*result = (Jim_Nvp *)(p);
 	}
 
-	if ( p-&gt;name ){
+	if (p-&gt;name ){
 		return JIM_OK;
 	} else {
 		return JIM_ERR;
@@ -12583,9 +12583,9 @@
 
 
 int
-Jim_GetOpt_Setup( Jim_GetOptInfo *p, Jim_Interp *interp, int argc, Jim_Obj * const *  argv)
+Jim_GetOpt_Setup(Jim_GetOptInfo *p, Jim_Interp *interp, int argc, Jim_Obj * const *  argv)
 {
-	memset( p, 0, sizeof(*p) );
+	memset(p, 0, sizeof(*p) );
 	p-&gt;interp = interp;
 	p-&gt;argc   = argc;
 	p-&gt;argv   = argv;
@@ -12594,37 +12594,37 @@
 }
 
 void
-Jim_GetOpt_Debug( Jim_GetOptInfo *p )
+Jim_GetOpt_Debug(Jim_GetOptInfo *p )
 {
 	int x;
 
-	Jim_fprintf( p-&gt;interp, p-&gt;interp-&gt;cookie_stderr, &quot;---args---\n&quot;);
-	for ( x = 0 ; x &lt; p-&gt;argc ; x++ ){
-		Jim_fprintf( p-&gt;interp, p-&gt;interp-&gt;cookie_stderr, 
+	Jim_fprintf(p-&gt;interp, p-&gt;interp-&gt;cookie_stderr, &quot;---args---\n&quot;);
+	for (x = 0 ; x &lt; p-&gt;argc ; x++ ){
+		Jim_fprintf(p-&gt;interp, p-&gt;interp-&gt;cookie_stderr, 
 					 &quot;%2d) %s\n&quot;, 
 					 x, 
-					 Jim_GetString( p-&gt;argv[x], NULL ) );
+					 Jim_GetString(p-&gt;argv[x], NULL ) );
 	}
-	Jim_fprintf( p-&gt;interp, p-&gt;interp-&gt;cookie_stderr, &quot;-------\n&quot;);
+	Jim_fprintf(p-&gt;interp, p-&gt;interp-&gt;cookie_stderr, &quot;-------\n&quot;);
 }
 
 
 int
-Jim_GetOpt_Obj( Jim_GetOptInfo *goi, Jim_Obj **puthere )
+Jim_GetOpt_Obj(Jim_GetOptInfo *goi, Jim_Obj **puthere )
 {
 	Jim_Obj *o;
 	
 	o = NULL; // failure 
-	if ( goi-&gt;argc ){
+	if (goi-&gt;argc ){
 		// success 
 		o = goi-&gt;argv[0];
 		goi-&gt;argc -= 1;
 		goi-&gt;argv += 1;
 	}
-	if ( puthere ){
+	if (puthere ){
 		*puthere = o;
 	}
-	if ( o != NULL ){
+	if (o != NULL ){
 		return JIM_OK;
 	} else {
 		return JIM_ERR;
@@ -12632,17 +12632,17 @@
 }
 
 int
-Jim_GetOpt_String( Jim_GetOptInfo *goi, char **puthere, int *len )
+Jim_GetOpt_String(Jim_GetOptInfo *goi, char **puthere, int *len )
 {
 	int r;
 	Jim_Obj *o;
 	const char *cp;
 
 
-	r = Jim_GetOpt_Obj( goi, &amp;o );
-	if ( r == JIM_OK ){
-		cp = Jim_GetString( o, len );
-		if ( puthere ){
+	r = Jim_GetOpt_Obj(goi, &amp;o );
+	if (r == JIM_OK ){
+		cp = Jim_GetString(o, len );
+		if (puthere ){
 			/* remove const */
 			*puthere = (char *)(cp);
 		}
@@ -12651,47 +12651,47 @@
 }
 
 int
-Jim_GetOpt_Double( Jim_GetOptInfo *goi, double *puthere )
+Jim_GetOpt_Double(Jim_GetOptInfo *goi, double *puthere )
 {
 	int r;
 	Jim_Obj *o;
 	double _safe;
 	
-	if ( puthere == NULL ){
+	if (puthere == NULL ){
 		puthere = &amp;_safe;
 	}
 
-	r = Jim_GetOpt_Obj( goi, &amp;o );
-	if ( r == JIM_OK ){
-		r = Jim_GetDouble( goi-&gt;interp, o, puthere );
-		if ( r != JIM_OK ){
-			Jim_SetResult_sprintf( goi-&gt;interp,
+	r = Jim_GetOpt_Obj(goi, &amp;o );
+	if (r == JIM_OK ){
+		r = Jim_GetDouble(goi-&gt;interp, o, puthere );
+		if (r != JIM_OK ){
+			Jim_SetResult_sprintf(goi-&gt;interp,
 								   &quot;not a number: %s&quot;, 
-								   Jim_GetString( o, NULL ) );
+								   Jim_GetString(o, NULL ) );
 		}
 	}
 	return r;
 }
 
 int
-Jim_GetOpt_Wide( Jim_GetOptInfo *goi, jim_wide *puthere )
+Jim_GetOpt_Wide(Jim_GetOptInfo *goi, jim_wide *puthere )
 {
 	int r;
 	Jim_Obj *o;
 	jim_wide _safe;
 
-	if ( puthere == NULL ){
+	if (puthere == NULL ){
 		puthere = &amp;_safe;
 	}
 
-	r = Jim_GetOpt_Obj( goi, &amp;o );
-	if ( r == JIM_OK ){
-		r = Jim_GetWide( goi-&gt;interp, o, puthere );
+	r = Jim_GetOpt_Obj(goi, &amp;o );
+	if (r == JIM_OK ){
+		r = Jim_GetWide(goi-&gt;interp, o, puthere );
 	}
 	return r;
 }
 
-int Jim_GetOpt_Nvp( Jim_GetOptInfo *goi, 
+int Jim_GetOpt_Nvp(Jim_GetOptInfo *goi, 
 					const Jim_Nvp *nvp, 
 					Jim_Nvp **puthere)
 {
@@ -12699,13 +12699,13 @@
 	Jim_Obj *o;
 	int e;
 
-	if ( puthere == NULL ){
+	if (puthere == NULL ){
 		puthere = &amp;_safe;
 	}
 
-	e = Jim_GetOpt_Obj( goi, &amp;o );
-	if ( e == JIM_OK ){
-		e = Jim_Nvp_name2value_obj( goi-&gt;interp,
+	e = Jim_GetOpt_Obj(goi, &amp;o );
+	if (e == JIM_OK ){
+		e = Jim_Nvp_name2value_obj(goi-&gt;interp,
 									nvp, 
 									o,
 									puthere );
@@ -12715,17 +12715,17 @@
 }
 
 void
-Jim_GetOpt_NvpUnknown( Jim_GetOptInfo *goi,
+Jim_GetOpt_NvpUnknown(Jim_GetOptInfo *goi,
 					   const Jim_Nvp *nvptable,
 					   int hadprefix )
 {
-	if ( hadprefix ){
-		Jim_SetResult_NvpUnknown( goi-&gt;interp,
+	if (hadprefix ){
+		Jim_SetResult_NvpUnknown(goi-&gt;interp,
 								  goi-&gt;argv[-2],
 								  goi-&gt;argv[-1],
 								  nvptable );
 	} else {
-		Jim_SetResult_NvpUnknown( goi-&gt;interp,
+		Jim_SetResult_NvpUnknown(goi-&gt;interp,
 								  NULL,
 								  goi-&gt;argv[-1],
 								  nvptable );
@@ -12734,7 +12734,7 @@
 					   
 
 int 
-Jim_GetOpt_Enum( Jim_GetOptInfo *goi,
+Jim_GetOpt_Enum(Jim_GetOptInfo *goi,
 				 const char * const *  lookup,
 				 int *puthere)
 {
@@ -12742,12 +12742,12 @@
 	Jim_Obj *o;
 	int e;
 
-	if ( puthere == NULL ){
+	if (puthere == NULL ){
 		puthere = &amp;_safe;
 	}
-	e = Jim_GetOpt_Obj( goi, &amp;o );
-	if ( e == JIM_OK ){
-		e = Jim_GetEnum( goi-&gt;interp,
+	e = Jim_GetOpt_Obj(goi, &amp;o );
+	if (e == JIM_OK ){
+		e = Jim_GetEnum(goi-&gt;interp,
 						 o,
 						 lookup,
 						 puthere,
@@ -12760,16 +12760,16 @@
 
 
 int
-Jim_SetResult_sprintf( Jim_Interp *interp, const char *fmt,... )
+Jim_SetResult_sprintf(Jim_Interp *interp, const char *fmt,... )
 {
 	va_list ap;
 	char *buf;
 
 	va_start(ap,fmt);
-	buf = jim_vasprintf( fmt, ap );
+	buf = jim_vasprintf(fmt, ap );
 	va_end(ap);
-	if ( buf ){
-		Jim_SetResultString( interp, buf, -1 );
+	if (buf ){
+		Jim_SetResultString(interp, buf, -1 );
 		jim_vasprintf_done(buf);
 	}
 	return JIM_OK;
@@ -12777,33 +12777,33 @@
 	
 
 void
-Jim_SetResult_NvpUnknown( Jim_Interp *interp, 
+Jim_SetResult_NvpUnknown(Jim_Interp *interp, 
 						  Jim_Obj *param_name,
 						  Jim_Obj *param_value,
 						  const Jim_Nvp *nvp )
 {
-	if ( param_name ){
-		Jim_SetResult_sprintf( interp,
+	if (param_name ){
+		Jim_SetResult_sprintf(interp,
 							   &quot;%s: Unknown: %s, try one of: &quot;,
-							   Jim_GetString( param_name, NULL ),
-							   Jim_GetString( param_value, NULL ) );
+							   Jim_GetString(param_name, NULL ),
+							   Jim_GetString(param_value, NULL ) );
 	} else {
-		Jim_SetResult_sprintf( interp,
+		Jim_SetResult_sprintf(interp,
 							   &quot;Unknown param: %s, try one of: &quot;,
-							   Jim_GetString( param_value, NULL ) );
+							   Jim_GetString(param_value, NULL ) );
 	}
-	while ( nvp-&gt;name ){
+	while (nvp-&gt;name ){
 		const char *a;
 		const char *b;
 
-		if ( (nvp + 1)-&gt;name ){
+		if ((nvp + 1)-&gt;name ){
 			a = nvp-&gt;name;
 			b = &quot;, &quot;;
 		} else {
 			a = &quot;or &quot;;
 			b = nvp-&gt;name;
 		}
-		Jim_AppendStrings( interp,
+		Jim_AppendStrings(interp,
 						   Jim_GetResult(interp),
 						   a, b, NULL );
 		nvp++;
@@ -12814,22 +12814,22 @@
 static Jim_Obj *debug_string_obj;
 
 const char *
-Jim_Debug_ArgvString( Jim_Interp *interp, int argc, Jim_Obj *const *argv )
+Jim_Debug_ArgvString(Jim_Interp *interp, int argc, Jim_Obj *const *argv )
 {
 	int x;
 
-	if ( debug_string_obj ){
-		Jim_FreeObj( interp, debug_string_obj );
+	if (debug_string_obj ){
+		Jim_FreeObj(interp, debug_string_obj );
 	}
 
-	debug_string_obj = Jim_NewEmptyStringObj( interp );
-	for ( x = 0 ; x &lt; argc ; x++ ){
-		Jim_AppendStrings( interp,
+	debug_string_obj = Jim_NewEmptyStringObj(interp );
+	for (x = 0 ; x &lt; argc ; x++ ){
+		Jim_AppendStrings(interp,
 						   debug_string_obj,
-						   Jim_GetString( argv[x], NULL ),
+						   Jim_GetString(argv[x], NULL ),
 						   &quot; &quot;,
 						   NULL );
 	}
 
-	return Jim_GetString( debug_string_obj, NULL );
+	return Jim_GetString(debug_string_obj, NULL );
 }

Modified: trunk/src/helper/jim.h
===================================================================
--- trunk/src/helper/jim.h	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/helper/jim.h	2009-06-23 22:46:23 UTC (rev 2376)
@@ -530,11 +530,11 @@
     void *cookie_stdin; /* input file pointer, 'stdin' by default */
     void *cookie_stdout; /* output file pointer, 'stdout' by default */
     void *cookie_stderr; /* errors file pointer, 'stderr' by default */
-    size_t (*cb_fwrite  )( const void *ptr, size_t size, size_t n, void *cookie );
-	size_t (*cb_fread   )( void *ptr, size_t size, size_t n, void *cookie );
-	int    (*cb_vfprintf)( void *cookie, const char *fmt, va_list ap );
-	int    (*cb_fflush  )( void *cookie );
-	char  *(*cb_fgets   )( char *s, int size, void *cookie );
+    size_t (*cb_fwrite  )(const void *ptr, size_t size, size_t n, void *cookie );
+	size_t (*cb_fread   )(void *ptr, size_t size, size_t n, void *cookie );
+	int    (*cb_vfprintf)(void *cookie, const char *fmt, va_list ap );
+	int    (*cb_fflush  )(void *cookie );
+	char  *(*cb_fgets   )(char *s, int size, void *cookie );
 } Jim_Interp;
 
 /* Currently provided as macro that performs the increment.
@@ -591,11 +591,11 @@
  *      };
  *
  *  Jim_Nvp *result
- *  e = Jim_Nvp_name2value( interp, yn, &quot;y&quot;, &amp;result ); 
+ *  e = Jim_Nvp_name2value(interp, yn, &quot;y&quot;, &amp;result ); 
  *         returns &amp;yn[0];
- *  e = Jim_Nvp_name2value( interp, yn, &quot;n&quot;, &amp;result );
+ *  e = Jim_Nvp_name2value(interp, yn, &quot;n&quot;, &amp;result );
  *         returns &amp;yn[1];
- *  e = Jim_Nvp_name2value( interp, yn, &quot;Blah&quot;, &amp;result );
+ *  e = Jim_Nvp_name2value(interp, yn, &quot;Blah&quot;, &amp;result );
  *         returns &amp;yn[4];
  * \endcode
  *
@@ -629,7 +629,7 @@
 
 #ifdef DOXYGEN
 #define JIM_STATIC 
-#define JIM_API( X )  X
+#define JIM_API(X )  X
 #else
 #ifndef __JIM_CORE__
 # if defined JIM_EMBEDDED
@@ -650,7 +650,7 @@
 #endif /* DOXYGEN */
 
 /** Set the result - printf() style */
-JIM_STATIC int JIM_API( Jim_SetResult_sprintf )( Jim_Interp *p, const char *fmt, ... );
+JIM_STATIC int JIM_API(Jim_SetResult_sprintf )(Jim_Interp *p, const char *fmt, ... );
 
 /* Memory allocation */
 JIM_STATIC void * JIM_API(Jim_Alloc) (int size);
@@ -660,7 +660,7 @@
 /* evaluation */
 JIM_STATIC int JIM_API(Jim_Eval)(Jim_Interp *interp, const char *script);
 /* in C code, you can do this and get better error messages */
-/*   Jim_Eval_Named( interp, &quot;some tcl commands&quot;, __FILE__, __LINE__ ); */
+/*   Jim_Eval_Named(interp, &quot;some tcl commands&quot;, __FILE__, __LINE__ ); */
 JIM_STATIC int JIM_API(Jim_Eval_Named)(Jim_Interp *interp, const char *script,const char *filename, int lineno);
 JIM_STATIC int JIM_API(Jim_EvalGlobal)(Jim_Interp *interp, const char *script);
 JIM_STATIC int JIM_API(Jim_EvalFile)(Jim_Interp *interp, const char *filename);
@@ -911,28 +911,28 @@
 JIM_STATIC void JIM_API(Jim_Panic) (Jim_Interp *interp, const char *fmt, ...);
 
 /* Jim's STDIO */
-JIM_STATIC int     JIM_API( Jim_fprintf  )( Jim_Interp *interp, void *cookie, const char *fmt, ... );
-JIM_STATIC int     JIM_API( Jim_vfprintf )( Jim_Interp *interp, void *cookie, const char *fmt, va_list ap );
-JIM_STATIC size_t  JIM_API( Jim_fwrite   )( Jim_Interp *interp, const void *ptr, size_t size, size_t nmeb, void *cookie );
-JIM_STATIC size_t  JIM_API( Jim_fread    )( Jim_Interp *interp, void *ptr, size_t size, size_t nmeb, void *cookie );
-JIM_STATIC int     JIM_API( Jim_fflush   )( Jim_Interp *interp, void *cookie );
-JIM_STATIC char *  JIM_API( Jim_fgets    )( Jim_Interp *interp, char *s, int size, void *cookie );
+JIM_STATIC int     JIM_API(Jim_fprintf  )(Jim_Interp *interp, void *cookie, const char *fmt, ... );
+JIM_STATIC int     JIM_API(Jim_vfprintf )(Jim_Interp *interp, void *cookie, const char *fmt, va_list ap );
+JIM_STATIC size_t  JIM_API(Jim_fwrite   )(Jim_Interp *interp, const void *ptr, size_t size, size_t nmeb, void *cookie );
+JIM_STATIC size_t  JIM_API(Jim_fread    )(Jim_Interp *interp, void *ptr, size_t size, size_t nmeb, void *cookie );
+JIM_STATIC int     JIM_API(Jim_fflush   )(Jim_Interp *interp, void *cookie );
+JIM_STATIC char *  JIM_API(Jim_fgets    )(Jim_Interp *interp, char *s, int size, void *cookie );
 
 /* Name Value Pairs Operations */
-JIM_STATIC Jim_Nvp *JIM_API(Jim_Nvp_name2value_simple)( const Jim_Nvp *nvp_table, const char *name );
-JIM_STATIC Jim_Nvp *JIM_API(Jim_Nvp_name2value_nocase_simple)( const Jim_Nvp *nvp_table, const char *name );
-JIM_STATIC Jim_Nvp *JIM_API(Jim_Nvp_value2name_simple)( const Jim_Nvp *nvp_table, int v );
+JIM_STATIC Jim_Nvp *JIM_API(Jim_Nvp_name2value_simple)(const Jim_Nvp *nvp_table, const char *name );
+JIM_STATIC Jim_Nvp *JIM_API(Jim_Nvp_name2value_nocase_simple)(const Jim_Nvp *nvp_table, const char *name );
+JIM_STATIC Jim_Nvp *JIM_API(Jim_Nvp_value2name_simple)(const Jim_Nvp *nvp_table, int v );
 
-JIM_STATIC int JIM_API(Jim_Nvp_name2value)( Jim_Interp *interp, const Jim_Nvp *nvp_table, const char *name, Jim_Nvp **result );
-JIM_STATIC int JIM_API(Jim_Nvp_name2value_nocase)( Jim_Interp *interp, const Jim_Nvp *nvp_table, const char *name, Jim_Nvp **result);
-JIM_STATIC int JIM_API(Jim_Nvp_value2name)( Jim_Interp *interp, const Jim_Nvp *nvp_table, int value, Jim_Nvp **result );
+JIM_STATIC int JIM_API(Jim_Nvp_name2value)(Jim_Interp *interp, const Jim_Nvp *nvp_table, const char *name, Jim_Nvp **result );
+JIM_STATIC int JIM_API(Jim_Nvp_name2value_nocase)(Jim_Interp *interp, const Jim_Nvp *nvp_table, const char *name, Jim_Nvp **result);
+JIM_STATIC int JIM_API(Jim_Nvp_value2name)(Jim_Interp *interp, const Jim_Nvp *nvp_table, int value, Jim_Nvp **result );
 
-JIM_STATIC int JIM_API(Jim_Nvp_name2value_obj)( Jim_Interp *interp, const Jim_Nvp *nvp_table, Jim_Obj *name_obj, Jim_Nvp **result );
-JIM_STATIC int JIM_API(Jim_Nvp_name2value_obj_nocase)( Jim_Interp *interp, const Jim_Nvp *nvp_table, Jim_Obj *name_obj, Jim_Nvp **result );
-JIM_STATIC int JIM_API(Jim_Nvp_value2name_obj)( Jim_Interp *interp, const Jim_Nvp *nvp_table, Jim_Obj *value_obj, Jim_Nvp **result );
+JIM_STATIC int JIM_API(Jim_Nvp_name2value_obj)(Jim_Interp *interp, const Jim_Nvp *nvp_table, Jim_Obj *name_obj, Jim_Nvp **result );
+JIM_STATIC int JIM_API(Jim_Nvp_name2value_obj_nocase)(Jim_Interp *interp, const Jim_Nvp *nvp_table, Jim_Obj *name_obj, Jim_Nvp **result );
+JIM_STATIC int JIM_API(Jim_Nvp_value2name_obj)(Jim_Interp *interp, const Jim_Nvp *nvp_table, Jim_Obj *value_obj, Jim_Nvp **result );
 
 /** prints a nice 'unknown' parameter error message to the 'result' */
-JIM_STATIC void JIM_API(Jim_SetResult_NvpUnknown)( Jim_Interp *interp, 
+JIM_STATIC void JIM_API(Jim_SetResult_NvpUnknown)(Jim_Interp *interp, 
 												   Jim_Obj *param_name,
 												   Jim_Obj *param_value,
 												   const Jim_Nvp *nvp_table );
@@ -951,11 +951,11 @@
  * For example might want do this:
  * \code
  *     fp = fopen(&quot;some.file.log&quot;, &quot;a&quot; );
- *     fprintf( fp, &quot;PARAMS are: %s\n&quot;, Jim_DebugArgvString( interp, argc, argv ) );
+ *     fprintf(fp, &quot;PARAMS are: %s\n&quot;, Jim_DebugArgvString(interp, argc, argv ) );
  *     fclose(fp);
  * \endcode
  */
-JIM_STATIC const char *JIM_API( Jim_Debug_ArgvString )( Jim_Interp *interp, int argc, Jim_Obj *const *argv );
+JIM_STATIC const char *JIM_API(Jim_Debug_ArgvString )(Jim_Interp *interp, int argc, Jim_Obj *const *argv );
 
 
 /** A TCL -ish GetOpt like code. 
@@ -983,33 +983,33 @@
  * \code
  *   Jim_GetOptInfo goi; 
  *
- *   Jim_GetOpt_Setup( &amp;goi, interp, argc, argv );
+ *   Jim_GetOpt_Setup(&amp;goi, interp, argc, argv );
  *
- *   while ( goi.argc ){
- *         e = Jim_GetOpt_Nvp( &amp;goi, nvp_options, &amp;n );
- *         if ( e != JIM_OK ){
- *               Jim_GetOpt_NvpUnknown( &amp;goi, nvp_options, 0 );
+ *   while (goi.argc ){
+ *         e = Jim_GetOpt_Nvp(&amp;goi, nvp_options, &amp;n );
+ *         if (e != JIM_OK ){
+ *               Jim_GetOpt_NvpUnknown(&amp;goi, nvp_options, 0 );
  *               return e;
  *         }
  *
- *         switch ( n-&gt;value ){
+ *         switch (n-&gt;value ){
  *         case ALIVE:
  *             printf(&quot;Option ALIVE specified\n&quot;);
  *             break;
  *         case FIRST:
- *             if ( goi.argc &lt; 1 ){
+ *             if (goi.argc &lt; 1 ){
  *                     .. not enough args error ..
  *             }
- *             Jim_GetOpt_String( &amp;goi, &amp;cp, NULL );
+ *             Jim_GetOpt_String(&amp;goi, &amp;cp, NULL );
  *             printf(&quot;FIRSTNAME: %s\n&quot;, cp );
  *         case AGE:
- *             Jim_GetOpt_Wide( &amp;goi, &amp;w );
+ *             Jim_GetOpt_Wide(&amp;goi, &amp;w );
  *             printf(&quot;AGE: %d\n&quot;, (int)(w) );
  *             break;
  *         case POLITICS:
- *             e = Jim_GetOpt_Nvp( &amp;goi, nvp_politics, &amp;n );
- *             if ( e != JIM_OK ){
- *                 Jim_GetOpt_NvpUnknown( &amp;goi, nvp_politics, 1 );
+ *             e = Jim_GetOpt_Nvp(&amp;goi, nvp_politics, &amp;n );
+ *             if (e != JIM_OK ){
+ *                 Jim_GetOpt_NvpUnknown(&amp;goi, nvp_politics, 1 );
  *                 return e;
  *             }
  *         }
@@ -1029,11 +1029,11 @@
  * \code
  *     Jim_GetOptInfo  goi;
  *   
- *     Jim_GetOptSetup( &amp;goi, interp, argc, argv );
+ *     Jim_GetOptSetup(&amp;goi, interp, argc, argv );
  * \endcode
  */
 
-JIM_STATIC int JIM_API( Jim_GetOpt_Setup )( Jim_GetOptInfo *goi, 
+JIM_STATIC int JIM_API(Jim_GetOpt_Setup )(Jim_GetOptInfo *goi, 
 											Jim_Interp *interp, 
 											int argc, 
 											Jim_Obj * const *  argv );
@@ -1042,7 +1042,7 @@
 /** Debug - Dump parameters to stderr
  * \param goi - current parameters
  */
-JIM_STATIC void JIM_API( Jim_GetOpt_Debug )( Jim_GetOptInfo *goi);
+JIM_STATIC void JIM_API(Jim_GetOpt_Debug )(Jim_GetOptInfo *goi);
 
 
 
@@ -1052,7 +1052,7 @@
  * \param puthere - where param is put
  * 
  */
-JIM_STATIC int JIM_API( Jim_GetOpt_Obj)( Jim_GetOptInfo *goi, Jim_Obj **puthere );
+JIM_STATIC int JIM_API(Jim_GetOpt_Obj)(Jim_GetOptInfo *goi, Jim_Obj **puthere );
 
 /** Remove argv[0] as string.
  *
@@ -1060,7 +1060,7 @@
  * \param puthere - where param is put
  * \param len     - return its length
  */
-JIM_STATIC int JIM_API( Jim_GetOpt_String )( Jim_GetOptInfo *goi, char **puthere, int *len );
+JIM_STATIC int JIM_API(Jim_GetOpt_String )(Jim_GetOptInfo *goi, char **puthere, int *len );
 
 /** Remove argv[0] as double.
  *
@@ -1068,14 +1068,14 @@
  * \param puthere - where param is put.
  *
  */
-JIM_STATIC int JIM_API( Jim_GetOpt_Double )( Jim_GetOptInfo *goi, double *puthere );
+JIM_STATIC int JIM_API(Jim_GetOpt_Double )(Jim_GetOptInfo *goi, double *puthere );
 
 /** Remove argv[0] as wide.
  *
  * \param goi     - get opt info
  * \param puthere - where param is put.
  */
-JIM_STATIC int JIM_API( Jim_GetOpt_Wide )( Jim_GetOptInfo *goi, jim_wide *puthere );
+JIM_STATIC int JIM_API(Jim_GetOpt_Wide )(Jim_GetOptInfo *goi, jim_wide *puthere );
 
 /** Remove argv[0] as NVP.
  *
@@ -1084,7 +1084,7 @@
  * \param puthere - where param is put.
  *
  */
-JIM_STATIC int JIM_API( Jim_GetOpt_Nvp)( Jim_GetOptInfo *goi, const Jim_Nvp *lookup, Jim_Nvp **puthere );
+JIM_STATIC int JIM_API(Jim_GetOpt_Nvp)(Jim_GetOptInfo *goi, const Jim_Nvp *lookup, Jim_Nvp **puthere );
 
 /** Create an appropriate error message for an NVP.
  *
@@ -1102,22 +1102,22 @@
  * Example:
  * \code
  *
- *  while ( goi.argc ){
+ *  while (goi.argc ){
  *     // Get the next option 
- *     e = Jim_GetOpt_Nvp( &amp;goi, cmd_options, &amp;n );
- *     if ( e != JIM_OK ){
+ *     e = Jim_GetOpt_Nvp(&amp;goi, cmd_options, &amp;n );
+ *     if (e != JIM_OK ){
  *          // option was not recognized
  *          // pass 'hadprefix = 0' because there is no prefix
- *          Jim_GetOpt_NvpUnknown( &amp;goi, cmd_options, 0 );
+ *          Jim_GetOpt_NvpUnknown(&amp;goi, cmd_options, 0 );
  *          return e;
  *     }
  *
- *     switch ( n-&gt;value ){
+ *     switch (n-&gt;value ){
  *     case OPT_SEX:
  *          // handle:  --sex male | female | lots | needmore
- *          e = Jim_GetOpt_Nvp( &amp;goi, &amp;nvp_sex, &amp;n );
- *          if ( e != JIM_OK ){
- *               Jim_GetOpt_NvpUnknown( &amp;ogi, nvp_sex, 1 );
+ *          e = Jim_GetOpt_Nvp(&amp;goi, &amp;nvp_sex, &amp;n );
+ *          if (e != JIM_OK ){
+ *               Jim_GetOpt_NvpUnknown(&amp;ogi, nvp_sex, 1 );
  *               return e;
  *          }
  *          printf(&quot;Code: (%d) is %s\n&quot;, n-&gt;value, n-&gt;name );
@@ -1129,7 +1129,7 @@
  * \endcode
  *
  */
-JIM_STATIC void JIM_API( Jim_GetOpt_NvpUnknown)( Jim_GetOptInfo *goi, const Jim_Nvp *lookup, int hadprefix );
+JIM_STATIC void JIM_API(Jim_GetOpt_NvpUnknown)(Jim_GetOptInfo *goi, const Jim_Nvp *lookup, int hadprefix );
 
 
 /** Remove argv[0] as Enum
@@ -1139,7 +1139,7 @@
  * \param puthere - where param is put.
  *
  */
-JIM_STATIC int JIM_API( Jim_GetOpt_Enum)( Jim_GetOptInfo *goi, const char * const *  lookup, int *puthere );
+JIM_STATIC int JIM_API(Jim_GetOpt_Enum)(Jim_GetOptInfo *goi, const char * const *  lookup, int *puthere );
 
 
 #undef JIM_STATIC

Modified: trunk/src/helper/log.h
===================================================================
--- trunk/src/helper/log.h	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/helper/log.h	2009-06-23 22:46:23 UTC (rev 2376)
@@ -85,7 +85,7 @@
 /* Avoid fn call and building parameter list if we're not outputting the information.
  * Matters on feeble CPUs for DEBUG/INFO statements that are involved frequently */
 
-#define LOG_LEVEL_IS( FOO )  ((debug_level) &gt;= (FOO))
+#define LOG_LEVEL_IS(FOO )  ((debug_level) &gt;= (FOO))
 
 #define LOG_DEBUG(expr ...) \
 		((debug_level &gt;= LOG_LVL_DEBUG) ? log_printf_lf (LOG_LVL_DEBUG, __FILE__, __LINE__, __FUNCTION__, expr) , 0 : 0)

Modified: trunk/src/helper/replacements.h
===================================================================
--- trunk/src/helper/replacements.h	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/helper/replacements.h	2009-06-23 22:46:23 UTC (rev 2376)
@@ -161,7 +161,7 @@
 #endif  /* _WIN32 */
 
 /* generic socket functions for Windows and Posix */
-static __inline int write_socket( int handle, const void *buffer, unsigned int count )
+static __inline int write_socket(int handle, const void *buffer, unsigned int count )
 {
 #ifdef _WIN32
 	return send(handle, buffer, count, 0);
@@ -170,7 +170,7 @@
 #endif
 }
 
-static __inline int read_socket( int handle, void *buffer, unsigned int count )
+static __inline int read_socket(int handle, void *buffer, unsigned int count )
 {
 #ifdef _WIN32
 	return recv(handle, buffer, count, 0);

Modified: trunk/src/jtag/amt_jtagaccel.c
===================================================================
--- trunk/src/jtag/amt_jtagaccel.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/jtag/amt_jtagaccel.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -395,20 +395,20 @@
 	OSVERSIONINFO version;
 
 	version.dwOSVersionInfoSize = sizeof version;
-	if (!GetVersionEx( &amp;version )) {
+	if (!GetVersionEx(&amp;version )) {
 	errno = EINVAL;
 	return -1;
 	}
 	if (version.dwPlatformId != VER_PLATFORM_WIN32_NT)
 	return 0;
 
-	h = CreateFile( &quot;\\\\.\\giveio&quot;, GENERIC_READ, 0, NULL, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, NULL );
+	h = CreateFile(&quot;\\\\.\\giveio&quot;, GENERIC_READ, 0, NULL, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, NULL );
 	if (h == INVALID_HANDLE_VALUE) {
 	errno = ENODEV;
 	return -1;
 	}
 
-	CloseHandle( h );
+	CloseHandle(h );
 
 	return 0;
 }

Modified: trunk/src/jtag/arm-jtag-ew.c
===================================================================
--- trunk/src/jtag/arm-jtag-ew.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/jtag/arm-jtag-ew.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -133,7 +133,7 @@
 		switch (cmd-&gt;type)
 		{
 			case JTAG_RUNTEST:
-				DEBUG_JTAG_IO( &quot;runtest %i cycles, end in %i&quot;, cmd-&gt;cmd.runtest-&gt;num_cycles, \
+				DEBUG_JTAG_IO(&quot;runtest %i cycles, end in %i&quot;, cmd-&gt;cmd.runtest-&gt;num_cycles, \
 					cmd-&gt;cmd.runtest-&gt;end_state);
 
 				armjtagew_end_state(cmd-&gt;cmd.runtest-&gt;end_state);

Modified: trunk/src/jtag/bitq.c
===================================================================
--- trunk/src/jtag/bitq.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/jtag/bitq.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -83,7 +83,7 @@
 									bitq_in_bufsize *= 2;
 							}
 							/* if necessary, allocate buffer and check for malloc error */
-							if (bitq_in_buffer == NULL &amp;&amp; ( bitq_in_buffer = malloc(bitq_in_bufsize) ) == NULL)
+							if (bitq_in_buffer == NULL &amp;&amp; (bitq_in_buffer = malloc(bitq_in_bufsize) ) == NULL)
 							{
 								LOG_ERROR(&quot;malloc error&quot;);
 								exit(-1);
@@ -95,7 +95,7 @@
 					/* field scanning */
 					while (bitq_in_state.bit_pos &lt; field-&gt;num_bits)
 					{
-						if ( ( tdo = bitq_interface-&gt;in() ) &lt; 0 )
+						if ((tdo = bitq_interface-&gt;in() ) &lt; 0 )
 						{
 #ifdef _DEBUG_JTAG_IO_
 							LOG_DEBUG(&quot;bitq in EOF&quot;);
@@ -131,7 +131,7 @@
 {
 	bitq_interface-&gt;out(tms, tdi, tdo_req);
 	/* check and process the input queue */
-	if ( bitq_interface-&gt;in_rdy() )
+	if (bitq_interface-&gt;in_rdy() )
 		bitq_in_proc();
 }
 
@@ -183,7 +183,7 @@
 			bitq_io(1, 0, 0);
 		else
 		{
-			LOG_ERROR( &quot;BUG: %s -&gt; %s isn't a valid TAP transition&quot;, tap_state_name(
+			LOG_ERROR(&quot;BUG: %s -&gt; %s isn't a valid TAP transition&quot;, tap_state_name(
 							 tap_get_state() ), tap_state_name(cmd-&gt;path[i]) );
 			exit(-1);
 		}
@@ -191,7 +191,7 @@
 		tap_set_state(cmd-&gt;path[i]);
 	}
 
-	tap_set_end_state( tap_get_state() );
+	tap_set_end_state(tap_get_state() );
 }
 
 
@@ -208,8 +208,8 @@
 		bitq_io(0, 0, 0);
 
 	/* finish in end_state */
-	if ( tap_get_state() != tap_get_end_state() )
-		bitq_state_move( tap_get_end_state() );
+	if (tap_get_state() != tap_get_end_state() )
+		bitq_state_move(tap_get_end_state() );
 }
 
 
@@ -241,7 +241,7 @@
 		out_ptr  = field-&gt;out_value;
 		for (bit_cnt = field-&gt;num_bits; bit_cnt &gt; 1; bit_cnt--)
 		{
-			bitq_io(0, ( (*out_ptr) &amp; out_mask ) != 0, tdo_req);
+			bitq_io(0, ((*out_ptr) &amp; out_mask ) != 0, tdo_req);
 			if (out_mask == 0x80)
 			{
 				out_mask = 0x01;
@@ -251,7 +251,7 @@
 				out_mask &lt;&lt;= 1;
 		}
 
-		bitq_io(pause, ( (*out_ptr) &amp; out_mask ) != 0, tdo_req);
+		bitq_io(pause, ((*out_ptr) &amp; out_mask ) != 0, tdo_req);
 	}
 
 	if (pause)
@@ -298,12 +298,12 @@
 #ifdef _DEBUG_JTAG_IO_
 			LOG_DEBUG(&quot;reset trst: %i srst %i&quot;, cmd-&gt;cmd.reset-&gt;trst, cmd-&gt;cmd.reset-&gt;srst);
 #endif
-			if ( (cmd-&gt;cmd.reset-&gt;trst == 1) || ( cmd-&gt;cmd.reset-&gt;srst &amp;&amp; (jtag_get_reset_config() &amp; RESET_SRST_PULLS_TRST) ) )
+			if ((cmd-&gt;cmd.reset-&gt;trst == 1) || (cmd-&gt;cmd.reset-&gt;srst &amp;&amp; (jtag_get_reset_config() &amp; RESET_SRST_PULLS_TRST) ) )
 			{
 				tap_set_state(TAP_RESET);
 			}
 			bitq_interface-&gt;reset(cmd-&gt;cmd.reset-&gt;trst, cmd-&gt;cmd.reset-&gt;srst);
-			if ( bitq_interface-&gt;in_rdy() )
+			if (bitq_interface-&gt;in_rdy() )
 				bitq_in_proc();
 			break;
 
@@ -320,7 +320,7 @@
 			LOG_DEBUG(&quot;statemove end in %i&quot;, cmd-&gt;cmd.statemove-&gt;end_state);
 #endif
 			bitq_end_state(cmd-&gt;cmd.statemove-&gt;end_state);
-			bitq_state_move( tap_get_end_state() );   /* uncoditional TAP move */
+			bitq_state_move(tap_get_end_state() );   /* uncoditional TAP move */
 			break;
 
 		case JTAG_PATHMOVE:
@@ -341,8 +341,8 @@
 #endif
 			bitq_end_state(cmd-&gt;cmd.scan-&gt;end_state);
 			bitq_scan(cmd-&gt;cmd.scan);
-			if ( tap_get_state() != tap_get_end_state() )
-				bitq_state_move( tap_get_end_state() );
+			if (tap_get_state() != tap_get_end_state() )
+				bitq_state_move(tap_get_end_state() );
 			break;
 
 		case JTAG_SLEEP:
@@ -350,7 +350,7 @@
 			LOG_DEBUG(&quot;sleep %i&quot;, cmd-&gt;cmd.sleep-&gt;us);
 #endif
 			bitq_interface-&gt;sleep(cmd-&gt;cmd.sleep-&gt;us);
-			if ( bitq_interface-&gt;in_rdy() )
+			if (bitq_interface-&gt;in_rdy() )
 				bitq_in_proc();
 			break;
 

Modified: trunk/src/jtag/core.c
===================================================================
--- trunk/src/jtag/core.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/jtag/core.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -482,7 +482,7 @@
 			return;
 		}
 
-		if ( tap_state_transition(cur_state, true)  != path[i]
+		if (tap_state_transition(cur_state, true)  != path[i]
 		  &amp;&amp; tap_state_transition(cur_state, false) != path[i])
 		{
 			LOG_ERROR(&quot;BUG: %s -&gt; %s isn't a valid TAP transition&quot;,
@@ -503,18 +503,18 @@
 {
 	tap_state_t cur_state = cmd_queue_cur_state;
 
-	LOG_DEBUG( &quot;cur_state=%s goal_state=%s&quot;,
+	LOG_DEBUG(&quot;cur_state=%s goal_state=%s&quot;,
 		tap_state_name(cur_state),
 		tap_state_name(goal_state) );
 
 
 	if (goal_state == cur_state )
 		;	/* nothing to do */
-	else if ( goal_state == TAP_RESET )
+	else if (goal_state == TAP_RESET )
 	{
 		jtag_add_tlr();
 	}
-	else if ( tap_is_state_stable(cur_state) &amp;&amp; tap_is_state_stable(goal_state) )
+	else if (tap_is_state_stable(cur_state) &amp;&amp; tap_is_state_stable(goal_state) )
 	{
 		unsigned tms_bits  = tap_get_tms_path(cur_state, goal_state);
 		unsigned tms_count = tap_get_tms_path_len(cur_state, goal_state);
@@ -531,7 +531,7 @@
 
 		jtag_add_pathmove(tms_count, moves);
 	}
-	else if ( tap_state_transition(cur_state, true)  == goal_state
+	else if (tap_state_transition(cur_state, true)  == goal_state
 		||   tap_state_transition(cur_state, false) == goal_state )
 	{
 		jtag_add_pathmove(1, &amp;goal_state);
@@ -885,7 +885,7 @@
 static void jtag_examine_chain_end(uint8_t *idcodes, unsigned count, unsigned max)
 {
 	bool triggered = false;
-	for ( ; count &lt; max - 31; count += 32)
+	for (; count &lt; max - 31; count += 32)
 	{
 		uint32_t idcode = buf_get_u32(idcodes, count, 32);
 		// do not trigger the warning if the data looks good
@@ -1026,7 +1026,7 @@
 	total_ir_length = 0;
 	for (;;){
 		tap = jtag_tap_next_enabled(tap);
-		if ( tap == NULL ){
+		if (tap == NULL ){
 			break;
 		}
 		total_ir_length += tap-&gt;ir_length;
@@ -1050,7 +1050,7 @@
 	int val;
 	for (;;){
 		tap = jtag_tap_next_enabled(tap);
-		if ( tap == NULL ){
+		if (tap == NULL ){
 			break;
 		}
 
@@ -1151,7 +1151,7 @@
 	LOG_DEBUG(&quot;Init JTAG chain&quot;);
 
 	tap = jtag_tap_next_enabled(NULL);
-	if ( tap == NULL ){
+	if (tap == NULL ){
 		LOG_ERROR(&quot;There are no enabled taps?&quot;);
 		return ERROR_JTAG_INIT_FAILED;
 	}

Modified: trunk/src/jtag/driver.c
===================================================================
--- trunk/src/jtag/driver.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/jtag/driver.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -418,7 +418,7 @@
 	return ERROR_OK;
 }
 
-int interface_jtag_add_clocks( int num_cycles )
+int interface_jtag_add_clocks(int num_cycles )
 {
 	/* allocate memory for a new list member */
 	jtag_command_t * cmd = cmd_queue_alloc(sizeof(jtag_command_t));

Modified: trunk/src/jtag/dummy.c
===================================================================
--- trunk/src/jtag/dummy.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/jtag/dummy.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -85,16 +85,16 @@
 static void dummy_write(int tck, int tms, int tdi)
 {
 	/* TAP standard: &quot;state transitions occur on rising edge of clock&quot; */
-	if ( tck != dummy_clock )
+	if (tck != dummy_clock )
 	{
-		if ( tck )
+		if (tck )
 		{
 			tap_state_t old_state = dummy_state;
-			dummy_state = tap_state_transition( old_state, tms );
+			dummy_state = tap_state_transition(old_state, tms );
 
-			if ( old_state != dummy_state )
+			if (old_state != dummy_state )
 			{
-				if ( clock_count )
+				if (clock_count )
 				{
 					LOG_DEBUG(&quot;dummy_tap: %d stable clocks&quot;, clock_count);
 					clock_count = 0;

Modified: trunk/src/jtag/ft2232.c
===================================================================
--- trunk/src/jtag/ft2232.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/jtag/ft2232.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -876,7 +876,7 @@
 			buffer_write(buffer[cur_byte]);
 	}
 
-	if (( ir_scan &amp;&amp; (tap_get_end_state() == TAP_IRSHIFT))
+	if ((ir_scan &amp;&amp; (tap_get_end_state() == TAP_IRSHIFT))
 	  || (!ir_scan &amp;&amp; (tap_get_end_state() == TAP_DRSHIFT)))
 	{
 		if (type == SCAN_IO)

Modified: trunk/src/jtag/gw16012.c
===================================================================
--- trunk/src/jtag/gw16012.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/jtag/gw16012.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -422,20 +422,20 @@
 	OSVERSIONINFO version;
 
 	version.dwOSVersionInfoSize = sizeof version;
-	if (!GetVersionEx( &amp;version )) {
+	if (!GetVersionEx(&amp;version )) {
 		errno = EINVAL;
 		return -1;
 	}
 	if (version.dwPlatformId != VER_PLATFORM_WIN32_NT)
 		return 0;
 
-	h = CreateFile( &quot;\\\\.\\giveio&quot;, GENERIC_READ, 0, NULL, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, NULL );
+	h = CreateFile(&quot;\\\\.\\giveio&quot;, GENERIC_READ, 0, NULL, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, NULL );
 	if (h == INVALID_HANDLE_VALUE) {
 		errno = ENODEV;
 		return -1;
 	}
 
-	CloseHandle( h );
+	CloseHandle(h );
 
 	return 0;
 }

Modified: trunk/src/jtag/interface.c
===================================================================
--- trunk/src/jtag/interface.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/jtag/interface.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -40,7 +40,7 @@
  */
 static tap_state_t state_follower = TAP_RESET;
 
-void tap_set_state_impl( tap_state_t new_state )
+void tap_set_state_impl(tap_state_t new_state )
 {
 	/* this is the state we think the TAPs are in now, was cur_state */
 	state_follower = new_state;
@@ -57,7 +57,7 @@
  */
 static tap_state_t end_state_follower = TAP_RESET;
 
-void tap_set_end_state( tap_state_t new_end_state )
+void tap_set_end_state(tap_state_t new_end_state )
 {
 	/* this is the state we think the TAPs will be in at completion of the
 	   current TAP operation, was end_state
@@ -71,13 +71,13 @@
 }
 
 
-int tap_move_ndx( tap_state_t astate )
+int tap_move_ndx(tap_state_t astate )
 {
 	/* given a stable state, return the index into the tms_seqs[] array within tap_get_tms_path() */
 
 	int ndx;
 
-	switch ( astate )
+	switch (astate )
 	{
 	case TAP_RESET:		ndx = 0;			break;
 	case TAP_DRSHIFT:	ndx = 2;			break;
@@ -86,7 +86,7 @@
 	case TAP_IRSHIFT:	ndx = 4;			break;
 	case TAP_IRPAUSE:	ndx = 5;			break;
 	default:
-		LOG_ERROR( &quot;fatal: unstable state \&quot;%s\&quot; used in tap_move_ndx()&quot;, tap_state_name(astate) );
+		LOG_ERROR(&quot;fatal: unstable state \&quot;%s\&quot; used in tap_move_ndx()&quot;, tap_state_name(astate) );
 		exit(1);
 	}
 
@@ -193,13 +193,13 @@
 
 static tms_table *tms_seqs=&amp;short_tms_seqs;
 
-int tap_get_tms_path( tap_state_t from, tap_state_t to )
+int tap_get_tms_path(tap_state_t from, tap_state_t to )
 {
 	return (*tms_seqs)[tap_move_ndx(from)][tap_move_ndx(to)].bits;
 }
 
 
-int tap_get_tms_path_len( tap_state_t from, tap_state_t to )
+int tap_get_tms_path_len(tap_state_t from, tap_state_t to )
 {
 	return (*tms_seqs)[tap_move_ndx(from)][tap_move_ndx(to)].bit_count;
 }
@@ -212,7 +212,7 @@
 	/*	A switch () is used because it is symbol dependent
 		(not value dependent like an array), and can also check bounds.
 	*/
-	switch ( astate )
+	switch (astate )
 	{
 	case TAP_RESET:
 	case TAP_IDLE:
@@ -278,7 +278,7 @@
 			new_state = TAP_IREXIT2;
 			break;
 		default:
-			LOG_ERROR( &quot;fatal: invalid argument cur_state=%d&quot;, cur_state );
+			LOG_ERROR(&quot;fatal: invalid argument cur_state=%d&quot;, cur_state );
 			exit(1);
 			break;
 		}
@@ -318,7 +318,7 @@
 			new_state = TAP_IRPAUSE;
 			break;
 		default:
-			LOG_ERROR( &quot;fatal: invalid argument cur_state=%d&quot;, cur_state );
+			LOG_ERROR(&quot;fatal: invalid argument cur_state=%d&quot;, cur_state );
 			exit(1);
 			break;
 		}
@@ -331,7 +331,7 @@
 {
 	const char* ret;
 
-	switch ( state )
+	switch (state )
 	{
 	case TAP_RESET:		ret = &quot;RESET&quot;;			break;
 	case TAP_IDLE:		ret = &quot;RUN/IDLE&quot;;		break;
@@ -359,9 +359,9 @@
 {
 	tap_state_t x;
 
-	for ( x = 0 ; x &lt; TAP_NUM_STATES ; x++ ){
+	for (x = 0 ; x &lt; TAP_NUM_STATES ; x++ ){
 		/* be nice to the human */
-		if ( 0 == strcasecmp( name, tap_state_name(x) ) ){
+		if (0 == strcasecmp(name, tap_state_name(x) ) ){
 			return x;
 		}
 	}

Modified: trunk/src/jtag/interface.h
===================================================================
--- trunk/src/jtag/interface.h	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/jtag/interface.h	2009-06-23 22:46:23 UTC (rev 2376)
@@ -59,7 +59,7 @@
 #if defined(_DEBUG_JTAG_IO_)
 #define tap_set_state(new_state) \
 	do { \
-		LOG_DEBUG( &quot;tap_set_state(%s)&quot;, tap_state_name(new_state) ); \
+		LOG_DEBUG(&quot;tap_set_state(%s)&quot;, tap_state_name(new_state) ); \
 		tap_set_state_impl(new_state); \
 	} while (0)
 #else

Modified: trunk/src/jtag/parport.c
===================================================================
--- trunk/src/jtag/parport.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/jtag/parport.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -263,20 +263,20 @@
 	OSVERSIONINFO version;
 
 	version.dwOSVersionInfoSize = sizeof version;
-	if (!GetVersionEx( &amp;version )) {
+	if (!GetVersionEx(&amp;version )) {
 		errno = EINVAL;
 		return -1;
 	}
 	if (version.dwPlatformId != VER_PLATFORM_WIN32_NT)
 		return 0;
 
-	h = CreateFile( &quot;\\\\.\\giveio&quot;, GENERIC_READ, 0, NULL, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, NULL );
+	h = CreateFile(&quot;\\\\.\\giveio&quot;, GENERIC_READ, 0, NULL, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, NULL );
 	if (h == INVALID_HANDLE_VALUE) {
 		errno = ENODEV;
 		return -1;
 	}
 
-	CloseHandle( h );
+	CloseHandle(h );
 
 	return 0;
 }

Modified: trunk/src/jtag/rlink/dtc_cmd.h
===================================================================
--- trunk/src/jtag/rlink/dtc_cmd.h	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/jtag/rlink/dtc_cmd.h	2009-06-23 22:46:23 UTC (rev 2376)
@@ -39,11 +39,11 @@
 #define DTC_CMD_SHIFT_TDIO_BYTES(bytes)	((0x6 &lt;&lt; 4) | ((bytes) - 1))
 /* Shift 1-16 bytes out TDI and in TDO. TMS is unaffected. */
 
-#define DTC_CMD_SHIFT_TMS_TDI_BIT_PAIR(tms, tdi, tdo)	((0x8 &lt;&lt; 4) | (	\
+#define DTC_CMD_SHIFT_TMS_TDI_BIT_PAIR(tms, tdi, tdo)	((0x8 &lt;&lt; 4) | (\
 		(tms) ? (1 &lt;&lt; 0) : 0	\
-	) | (	\
+	) | (\
 		(tdi) ? (1 &lt;&lt; 1) : 0	\
-	) | (	\
+	) | (\
 		(tdo) ? (1 &lt;&lt; 3) : 0	\
 	))
 /* Single bit shift. */

Modified: trunk/src/jtag/rlink/rlink.c
===================================================================
--- trunk/src/jtag/rlink/rlink.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/jtag/rlink/rlink.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -1636,26 +1636,26 @@
 
 		for (dev = bus-&gt;devices; dev; dev = dev-&gt;next)
 		{
-			if ( (dev-&gt;descriptor.idVendor == USB_IDVENDOR) &amp;&amp; (dev-&gt;descriptor.idProduct == USB_IDPRODUCT) )
+			if ((dev-&gt;descriptor.idVendor == USB_IDVENDOR) &amp;&amp; (dev-&gt;descriptor.idProduct == USB_IDPRODUCT) )
 			{
 				found = 1;
 				LOG_DEBUG(&quot;Found device on bus.\n&quot;);
 
 				do
 				{
-					if ( dev-&gt;descriptor.bNumConfigurations &gt; 1 )
+					if (dev-&gt;descriptor.bNumConfigurations &gt; 1 )
 					{
 						LOG_ERROR(&quot;Whoops! NumConfigurations is not 1, don't know what to do...\n&quot;);
 						break;
 					}
-					if ( dev-&gt;config-&gt;bNumInterfaces &gt; 1 )
+					if (dev-&gt;config-&gt;bNumInterfaces &gt; 1 )
 					{
 						LOG_ERROR(&quot;Whoops! NumInterfaces is not 1, don't know what to do...\n&quot;);
 						break;
 					}
 
 					pHDev = usb_open(dev);
-					if ( !pHDev )
+					if (!pHDev )
 						LOG_ERROR (&quot;Failed to open device.\n&quot;);
 					else
 					{
@@ -1686,7 +1686,7 @@
 
 						if (!i)
 						{
-							if ( usb_set_altinterface(pHDev,0) )
+							if (usb_set_altinterface(pHDev,0) )
 							{
 								LOG_ERROR(&quot;Failed to set interface.\n&quot;);
 								break;
@@ -1700,13 +1700,13 @@
 		}
 	}
 
-	if ( !found )
+	if (!found )
 	{
 		LOG_ERROR(&quot;No device found on bus.\n&quot;);
 		exit(1);
 	}
 
-	if ( !success )
+	if (!success )
 	{
 		LOG_ERROR(&quot;Initialisation failed.&quot;);
 		exit(1);

Modified: trunk/src/jtag/tcl.c
===================================================================
--- trunk/src/jtag/tcl.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/jtag/tcl.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -209,7 +209,7 @@
 	{ .name = NULL,          .value = -1 }
 };
 
-static int jtag_tap_configure_cmd( Jim_GetOptInfo *goi, jtag_tap_t * tap)
+static int jtag_tap_configure_cmd(Jim_GetOptInfo *goi, jtag_tap_t * tap)
 {
 	Jim_Nvp *n;
 	Jim_Obj *o;
@@ -228,11 +228,11 @@
 		switch (n-&gt;value) {
 			case JCFG_EVENT:
 				if (goi-&gt;argc == 0) {
-					Jim_WrongNumArgs( goi-&gt;interp, goi-&gt;argc, goi-&gt;argv, &quot;-event ?event-name? ...&quot; );
+					Jim_WrongNumArgs(goi-&gt;interp, goi-&gt;argc, goi-&gt;argv, &quot;-event ?event-name? ...&quot; );
 					return JIM_ERR;
 				}
 
-				e = Jim_GetOpt_Nvp( goi, nvp_jtag_tap_event, &amp;n );
+				e = Jim_GetOpt_Nvp(goi, nvp_jtag_tap_event, &amp;n );
 				if (e != JIM_OK) {
 					Jim_GetOpt_NvpUnknown(goi, nvp_jtag_tap_event, 1);
 					return e;
@@ -268,7 +268,7 @@
 							jteap = calloc(1, sizeof (*jteap));
 						}
 						jteap-&gt;event = n-&gt;value;
-						Jim_GetOpt_Obj( goi, &amp;o);
+						Jim_GetOpt_Obj(goi, &amp;o);
 						if (jteap-&gt;body) {
 							Jim_DecrRefCount(interp, jteap-&gt;body);
 						}
@@ -306,7 +306,7 @@
 	return (w &amp; v) != 0;
 }
 
-static int jim_newtap_cmd( Jim_GetOptInfo *goi )
+static int jim_newtap_cmd(Jim_GetOptInfo *goi )
 {
 	jtag_tap_t *pTap;
 	jim_wide w;
@@ -340,20 +340,20 @@
 	/*
 	 * we expect CHIP + TAP + OPTIONS
 	 * */
-	if ( goi-&gt;argc &lt; 3 ){
+	if (goi-&gt;argc &lt; 3 ){
 		Jim_SetResult_sprintf(goi-&gt;interp, &quot;Missing CHIP TAP OPTIONS ....&quot;);
 		return JIM_ERR;
 	}
-	Jim_GetOpt_String( goi, &amp;cp, NULL );
+	Jim_GetOpt_String(goi, &amp;cp, NULL );
 	pTap-&gt;chip = strdup(cp);
 
-	Jim_GetOpt_String( goi, &amp;cp, NULL );
+	Jim_GetOpt_String(goi, &amp;cp, NULL );
 	pTap-&gt;tapname = strdup(cp);
 
 	/* name + dot + name + null */
 	x = strlen(pTap-&gt;chip) + 1 + strlen(pTap-&gt;tapname) + 1;
-	cp = malloc( x );
-	sprintf( cp, &quot;%s.%s&quot;, pTap-&gt;chip, pTap-&gt;tapname );
+	cp = malloc(x );
+	sprintf(cp, &quot;%s.%s&quot;, pTap-&gt;chip, pTap-&gt;tapname );
 	pTap-&gt;dotted_name = cp;
 
 	LOG_DEBUG(&quot;Creating New Tap, Chip: %s, Tap: %s, Dotted: %s, %d params&quot;,
@@ -367,14 +367,14 @@
 	/* clear them as we find them */
 	reqbits = (NTREQ_IRLEN | NTREQ_IRCAPTURE | NTREQ_IRMASK);
 
-	while ( goi-&gt;argc ){
-		e = Jim_GetOpt_Nvp( goi, opts, &amp;n );
-		if ( e != JIM_OK ){
-			Jim_GetOpt_NvpUnknown( goi, opts, 0 );
+	while (goi-&gt;argc ){
+		e = Jim_GetOpt_Nvp(goi, opts, &amp;n );
+		if (e != JIM_OK ){
+			Jim_GetOpt_NvpUnknown(goi, opts, 0 );
 			return e;
 		}
 		LOG_DEBUG(&quot;Processing option: %s&quot;, n-&gt;name );
-		switch ( n-&gt;value ){
+		switch (n-&gt;value ){
 		case NTAP_OPT_ENABLED:
 			pTap-&gt;disabled_after_reset = false;
 			break;
@@ -385,15 +385,15 @@
 		{
 			uint32_t *new_expected_ids;
 
-			e = Jim_GetOpt_Wide( goi, &amp;w );
-			if ( e != JIM_OK) {
+			e = Jim_GetOpt_Wide(goi, &amp;w );
+			if (e != JIM_OK) {
 				Jim_SetResult_sprintf(goi-&gt;interp, &quot;option: %s bad parameter&quot;, n-&gt;name);
 				return e;
 			}
 
 			new_expected_ids = malloc(sizeof(uint32_t) * (pTap-&gt;expected_ids_cnt + 1));
 			if (new_expected_ids == NULL) {
-				Jim_SetResult_sprintf( goi-&gt;interp, &quot;no memory&quot;);
+				Jim_SetResult_sprintf(goi-&gt;interp, &quot;no memory&quot;);
 				return JIM_ERR;
 			}
 
@@ -409,9 +409,9 @@
 		case NTAP_OPT_IRLEN:
 		case NTAP_OPT_IRMASK:
 		case NTAP_OPT_IRCAPTURE:
-			e = Jim_GetOpt_Wide( goi, &amp;w );
-			if ( e != JIM_OK ){
-				Jim_SetResult_sprintf( goi-&gt;interp, &quot;option: %s bad parameter&quot;, n-&gt;name );
+			e = Jim_GetOpt_Wide(goi, &amp;w );
+			if (e != JIM_OK ){
+				Jim_SetResult_sprintf(goi-&gt;interp, &quot;option: %s bad parameter&quot;, n-&gt;name );
 				return e;
 			}
 			switch (n-&gt;value){
@@ -441,7 +441,7 @@
 				break;
 			}
 		} /* switch (n-&gt;value) */
-	} /* while ( goi-&gt;argc ) */
+	} /* while (goi-&gt;argc ) */
 
 	/* default is enabled-after-reset */
 	pTap-&gt;enabled = !pTap-&gt;disabled_after_reset;
@@ -471,7 +471,7 @@
 	while (jteap) {
 		if (jteap-&gt;event == e) {
 			done = 1;
-			LOG_DEBUG( &quot;JTAG tap: %s event: %d (%s) action: %s\n&quot;,
+			LOG_DEBUG(&quot;JTAG tap: %s event: %d (%s) action: %s\n&quot;,
 					tap-&gt;dotted_name,
 					e,
 					Jim_Nvp_value2name_simple(nvp_jtag_tap_event, e)-&gt;name,
@@ -491,14 +491,14 @@
 	}
 
 	if (!done) {
-		LOG_DEBUG( &quot;event %d %s - no action&quot;,
+		LOG_DEBUG(&quot;event %d %s - no action&quot;,
 				e,
-				Jim_Nvp_value2name_simple( nvp_jtag_tap_event, e)-&gt;name);
+				Jim_Nvp_value2name_simple(nvp_jtag_tap_event, e)-&gt;name);
 	}
 }
 
 
-static int jim_jtag_command( Jim_Interp *interp, int argc, Jim_Obj *const *argv )
+static int jim_jtag_command(Jim_Interp *interp, int argc, Jim_Obj *const *argv )
 {
 	Jim_GetOptInfo goi;
 	int e;
@@ -532,44 +532,44 @@
 
 	context = Jim_GetAssocData(interp, &quot;context&quot;);
 	/* go past the command */
-	Jim_GetOpt_Setup( &amp;goi, interp, argc-1, argv + 1 );
+	Jim_GetOpt_Setup(&amp;goi, interp, argc-1, argv + 1 );
 
-	e = Jim_GetOpt_Nvp( &amp;goi, jtag_cmds, &amp;n );
-	if ( e != JIM_OK ){
-		Jim_GetOpt_NvpUnknown( &amp;goi, jtag_cmds, 0 );
+	e = Jim_GetOpt_Nvp(&amp;goi, jtag_cmds, &amp;n );
+	if (e != JIM_OK ){
+		Jim_GetOpt_NvpUnknown(&amp;goi, jtag_cmds, 0 );
 		return e;
 	}
-		Jim_SetEmptyResult( goi.interp );
-	switch ( n-&gt;value ){
+		Jim_SetEmptyResult(goi.interp );
+	switch (n-&gt;value ){
 	case JTAG_CMD_INTERFACE:
 		/* return the name of the interface */
 		/* TCL code might need to know the exact type... */
 		/* FUTURE: we allow this as a means to &quot;set&quot; the interface. */
-		if ( goi.argc != 0 ){
-			Jim_WrongNumArgs( goi.interp, 1, goi.argv-1, &quot;(no params)&quot;);
+		if (goi.argc != 0 ){
+			Jim_WrongNumArgs(goi.interp, 1, goi.argv-1, &quot;(no params)&quot;);
 			return JIM_ERR;
 		}
-		Jim_SetResultString( goi.interp, jtag_interface-&gt;name, -1 );
+		Jim_SetResultString(goi.interp, jtag_interface-&gt;name, -1 );
 		return JIM_OK;
 	case JTAG_CMD_INIT_RESET:
-		if ( goi.argc != 0 ){
-			Jim_WrongNumArgs( goi.interp, 1, goi.argv-1, &quot;(no params)&quot;);
+		if (goi.argc != 0 ){
+			Jim_WrongNumArgs(goi.interp, 1, goi.argv-1, &quot;(no params)&quot;);
 			return JIM_ERR;
 		}
 		e = jtag_init_reset(context);
-		if ( e != ERROR_OK ){
-			Jim_SetResult_sprintf( goi.interp, &quot;error: %d&quot;, e);
+		if (e != ERROR_OK ){
+			Jim_SetResult_sprintf(goi.interp, &quot;error: %d&quot;, e);
 			return JIM_ERR;
 		}
 		return JIM_OK;
 	case JTAG_CMD_NEWTAP:
-		return jim_newtap_cmd( &amp;goi );
+		return jim_newtap_cmd(&amp;goi );
 		break;
 	case JTAG_CMD_TAPISENABLED:
 	case JTAG_CMD_TAPENABLE:
 	case JTAG_CMD_TAPDISABLE:
-		if ( goi.argc != 1 ){
-			Jim_SetResultString( goi.interp, &quot;Too many parameters&quot;,-1 );
+		if (goi.argc != 1 ){
+			Jim_SetResultString(goi.interp, &quot;Too many parameters&quot;,-1 );
 			return JIM_ERR;
 		}
 
@@ -619,8 +619,8 @@
 		break;
 
 	case JTAG_CMD_CGET:
-		if ( goi.argc &lt; 2 ){
-			Jim_WrongNumArgs( goi.interp, 0, NULL, &quot;?tap-name? -option ...&quot;);
+		if (goi.argc &lt; 2 ){
+			Jim_WrongNumArgs(goi.interp, 0, NULL, &quot;?tap-name? -option ...&quot;);
 			return JIM_ERR;
 		}
 
@@ -628,19 +628,19 @@
 			jtag_tap_t *t;
 
 			Jim_GetOpt_Obj(&amp;goi, &amp;o);
-			t = jtag_tap_by_jim_obj( goi.interp, o );
-			if ( t == NULL ){
+			t = jtag_tap_by_jim_obj(goi.interp, o );
+			if (t == NULL ){
 				return JIM_ERR;
 			}
 
 			goi.isconfigure = 0;
-			return jtag_tap_configure_cmd( &amp;goi, t);
+			return jtag_tap_configure_cmd(&amp;goi, t);
 		}
 		break;
 
 	case JTAG_CMD_CONFIGURE:
-		if ( goi.argc &lt; 3 ){
-			Jim_WrongNumArgs( goi.interp, 0, NULL, &quot;?tap-name? -option ?VALUE? ...&quot;);
+		if (goi.argc &lt; 3 ){
+			Jim_WrongNumArgs(goi.interp, 0, NULL, &quot;?tap-name? -option ?VALUE? ...&quot;);
 			return JIM_ERR;
 		}
 
@@ -648,13 +648,13 @@
 			jtag_tap_t *t;
 
 			Jim_GetOpt_Obj(&amp;goi, &amp;o);
-			t = jtag_tap_by_jim_obj( goi.interp, o );
-			if ( t == NULL ){
+			t = jtag_tap_by_jim_obj(goi.interp, o );
+			if (t == NULL ){
 				return JIM_ERR;
 			}
 
 			goi.isconfigure = 1;
-			return jtag_tap_configure_cmd( &amp;goi, t);
+			return jtag_tap_configure_cmd(&amp;goi, t);
 		}
 	}
 
@@ -663,7 +663,7 @@
 
 int jtag_register_commands(struct command_context_s *cmd_ctx)
 {
-	register_jim( cmd_ctx, &quot;jtag&quot;, jim_jtag_command, &quot;perform jtag tap actions&quot;);
+	register_jim(cmd_ctx, &quot;jtag&quot;, jim_jtag_command, &quot;perform jtag tap actions&quot;);
 
 	register_command(cmd_ctx, NULL, &quot;interface&quot;, handle_interface_command,
 		COMMAND_CONFIG, &quot;try to configure interface&quot;);
@@ -806,49 +806,49 @@
 	 * argv[ 3] = not actually used by anything but in the docs
 	 */
 
-	if ( argc &lt; 4 ){
-		command_print( cmd_ctx, &quot;OLD DEPRECATED SYNTAX: Please use the NEW syntax&quot;);
+	if (argc &lt; 4 ){
+		command_print(cmd_ctx, &quot;OLD DEPRECATED SYNTAX: Please use the NEW syntax&quot;);
 		return ERROR_OK;
 	}
-	command_print( cmd_ctx, &quot;OLD SYNTAX: DEPRECATED - translating to new syntax&quot;);
-	command_print( cmd_ctx, &quot;jtag newtap CHIP TAP -irlen %s -ircapture %s -irvalue %s&quot;,
+	command_print(cmd_ctx, &quot;OLD SYNTAX: DEPRECATED - translating to new syntax&quot;);
+	command_print(cmd_ctx, &quot;jtag newtap CHIP TAP -irlen %s -ircapture %s -irvalue %s&quot;,
 				   args[0],
 				   args[1],
 				   args[2] );
-	command_print( cmd_ctx, &quot;Example: STM32 has 2 taps, the cortexM3(len4) + boundaryscan(len5)&quot;);
-	command_print( cmd_ctx, &quot;jtag newtap stm32 cortexm3 ....., thus creating the tap: \&quot;stm32.cortexm3\&quot;&quot;);
-	command_print( cmd_ctx, &quot;jtag newtap stm32 boundary ....., and the tap: \&quot;stm32.boundary\&quot;&quot;);
-	command_print( cmd_ctx, &quot;And then refer to the taps by the dotted name.&quot;);
+	command_print(cmd_ctx, &quot;Example: STM32 has 2 taps, the cortexM3(len4) + boundaryscan(len5)&quot;);
+	command_print(cmd_ctx, &quot;jtag newtap stm32 cortexm3 ....., thus creating the tap: \&quot;stm32.cortexm3\&quot;&quot;);
+	command_print(cmd_ctx, &quot;jtag newtap stm32 boundary ....., and the tap: \&quot;stm32.boundary\&quot;&quot;);
+	command_print(cmd_ctx, &quot;And then refer to the taps by the dotted name.&quot;);
 
-	newargs[0] = Jim_NewStringObj( interp, &quot;jtag&quot;, -1   );
-	newargs[1] = Jim_NewStringObj( interp, &quot;newtap&quot;, -1 );
-	sprintf( buf, &quot;chip%d&quot;, jtag_tap_count() );
-	newargs[2] = Jim_NewStringObj( interp, buf, -1 );
-	sprintf( buf, &quot;tap%d&quot;, jtag_tap_count() );
-	newargs[3] = Jim_NewStringObj( interp, buf, -1  );
-	newargs[4] = Jim_NewStringObj( interp, &quot;-irlen&quot;, -1  );
-	newargs[5] = Jim_NewStringObj( interp, args[0], -1  );
-	newargs[6] = Jim_NewStringObj( interp, &quot;-ircapture&quot;, -1  );
-	newargs[7] = Jim_NewStringObj( interp, args[1], -1  );
-	newargs[8] = Jim_NewStringObj( interp, &quot;-irmask&quot;, -1  );
-	newargs[9] = Jim_NewStringObj( interp, args[2], -1  );
+	newargs[0] = Jim_NewStringObj(interp, &quot;jtag&quot;, -1   );
+	newargs[1] = Jim_NewStringObj(interp, &quot;newtap&quot;, -1 );
+	sprintf(buf, &quot;chip%d&quot;, jtag_tap_count() );
+	newargs[2] = Jim_NewStringObj(interp, buf, -1 );
+	sprintf(buf, &quot;tap%d&quot;, jtag_tap_count() );
+	newargs[3] = Jim_NewStringObj(interp, buf, -1  );
+	newargs[4] = Jim_NewStringObj(interp, &quot;-irlen&quot;, -1  );
+	newargs[5] = Jim_NewStringObj(interp, args[0], -1  );
+	newargs[6] = Jim_NewStringObj(interp, &quot;-ircapture&quot;, -1  );
+	newargs[7] = Jim_NewStringObj(interp, args[1], -1  );
+	newargs[8] = Jim_NewStringObj(interp, &quot;-irmask&quot;, -1  );
+	newargs[9] = Jim_NewStringObj(interp, args[2], -1  );
 
-	command_print( cmd_ctx, &quot;NEW COMMAND:&quot;);
-	sprintf( buf, &quot;%s %s %s %s %s %s %s %s %s %s&quot;,
-			 Jim_GetString( newargs[0], NULL ),
-			 Jim_GetString( newargs[1], NULL ),
-			 Jim_GetString( newargs[2], NULL ),
-			 Jim_GetString( newargs[3], NULL ),
-			 Jim_GetString( newargs[4], NULL ),
-			 Jim_GetString( newargs[5], NULL ),
-			 Jim_GetString( newargs[6], NULL ),
-			 Jim_GetString( newargs[7], NULL ),
-			 Jim_GetString( newargs[8], NULL ),
-			 Jim_GetString( newargs[9], NULL ) );
+	command_print(cmd_ctx, &quot;NEW COMMAND:&quot;);
+	sprintf(buf, &quot;%s %s %s %s %s %s %s %s %s %s&quot;,
+			 Jim_GetString(newargs[0], NULL ),
+			 Jim_GetString(newargs[1], NULL ),
+			 Jim_GetString(newargs[2], NULL ),
+			 Jim_GetString(newargs[3], NULL ),
+			 Jim_GetString(newargs[4], NULL ),
+			 Jim_GetString(newargs[5], NULL ),
+			 Jim_GetString(newargs[6], NULL ),
+			 Jim_GetString(newargs[7], NULL ),
+			 Jim_GetString(newargs[8], NULL ),
+			 Jim_GetString(newargs[9], NULL ) );
 
-	e = jim_jtag_command( interp, 10, newargs );
-	if ( e != JIM_OK ){
-		command_print( cmd_ctx, &quot;%s&quot;, Jim_GetString( Jim_GetResult(interp), NULL ) );
+	e = jim_jtag_command(interp, 10, newargs );
+	if (e != JIM_OK ){
+		command_print(cmd_ctx, &quot;%s&quot;, Jim_GetString(Jim_GetResult(interp), NULL ) );
 	}
 	return e;
 }
@@ -861,7 +861,7 @@
 	command_print(cmd_ctx, &quot;     TapName            | Enabled |   IdCode      Expected    IrLen IrCap  IrMask Instr     &quot;);
 	command_print(cmd_ctx, &quot;---|--------------------|---------|------------|------------|------|------|------|---------&quot;);
 
-	while ( tap ){
+	while (tap ){
 		uint32_t expected, expected_mask, cur_instr, ii;
 		expected = buf_get_u32(tap-&gt;expected, 0, tap-&gt;ir_length);
 		expected_mask = buf_get_u32(tap-&gt;expected_mask, 0, tap-&gt;ir_length);
@@ -1174,20 +1174,20 @@
 	 */
 	endstate = TAP_IDLE;
 
-	if ( argc &gt;= 4 ){
+	if (argc &gt;= 4 ){
 		/* have at least one pair of numbers. */
 		/* is last pair the magic text? */
-		if ( 0 == strcmp( &quot;-endstate&quot;, args[ argc - 2 ] ) ){
+		if (0 == strcmp(&quot;-endstate&quot;, args[ argc - 2 ] ) ){
 			const char *cpA;
 			const char *cpS;
 			cpA = args[ argc-1 ];
-			for ( endstate = 0 ; endstate &lt; TAP_NUM_STATES ; endstate++ ){
-				cpS = tap_state_name( endstate );
-				if ( 0 == strcmp( cpA, cpS ) ){
+			for (endstate = 0 ; endstate &lt; TAP_NUM_STATES ; endstate++ ){
+				cpS = tap_state_name(endstate );
+				if (0 == strcmp(cpA, cpS ) ){
 					break;
 				}
 			}
-			if ( endstate &gt;= TAP_NUM_STATES ){
+			if (endstate &gt;= TAP_NUM_STATES ){
 				return ERROR_COMMAND_SYNTAX_ERROR;
 			} else {
 				if (!scan_is_safe(endstate))
@@ -1207,10 +1207,10 @@
 	int retval;
 	for (i = 0; i &lt; num_fields; i++)
 	{
-		tap = jtag_tap_by_string( args[i*2] );
+		tap = jtag_tap_by_string(args[i*2] );
 		if (tap == NULL)
 		{
-			command_print( cmd_ctx, &quot;Tap: %s unknown&quot;, args[i*2] );
+			command_print(cmd_ctx, &quot;Tap: %s unknown&quot;, args[i*2] );
 			return ERROR_FAIL;
 		}
 		int field_size = tap-&gt;ir_length;
@@ -1281,12 +1281,12 @@
 
 		e = Jim_GetLong(interp, args[i], &amp;bits);
 		/* If valid - try next arg */
-		if ( e == JIM_OK ){
+		if (e == JIM_OK ){
 			continue;
 		}
 
 		/* Not valid.. are we at the end? */
-		if ( ((i + 2) != argc) ){
+		if (((i + 2) != argc) ){
 			/* nope, then error */
 			return e;
 		}
@@ -1297,15 +1297,15 @@
 		 */
 
 		/* get arg as a string. */
-		cp = Jim_GetString( args[i], NULL );
+		cp = Jim_GetString(args[i], NULL );
 		/* is it the magic? */
-		if ( 0 == strcmp( &quot;-endstate&quot;, cp ) ){
+		if (0 == strcmp(&quot;-endstate&quot;, cp ) ){
 			/* is the statename valid? */
-			cp = Jim_GetString( args[i + 1], NULL );
+			cp = Jim_GetString(args[i + 1], NULL );
 
 			/* see if it is a valid state name */
 			endstate = tap_state_by_name(cp);
-			if ( endstate &lt; 0 ){
+			if (endstate &lt; 0 ){
 				/* update the error message */
 				Jim_SetResult_sprintf(interp,&quot;endstate: %s invalid&quot;, cp );
 			} else {
@@ -1321,13 +1321,13 @@
 		}
 
 		/* Still an error? */
-		if ( e != JIM_OK ){
+		if (e != JIM_OK ){
 			return e; /* too bad */
 		}
 	} /* validate args */
 
-	tap = jtag_tap_by_jim_obj( interp, args[1] );
-	if ( tap == NULL ){
+	tap = jtag_tap_by_jim_obj(interp, args[1] );
+	if (tap == NULL ){
 		return JIM_ERR;
 	}
 
@@ -1399,9 +1399,9 @@
 	for (i = 0; i &lt; argc-1; i++)
 	{
 		const char *cp;
-		cp = Jim_GetString( args[i + 1], NULL );
+		cp = Jim_GetString(args[i + 1], NULL );
 		states[i] = tap_state_by_name(cp);
-		if ( states[i] &lt; 0 )
+		if (states[i] &lt; 0 )
 		{
 			/* update the error message */
 			Jim_SetResult_sprintf(interp,&quot;endstate: %s invalid&quot;, cp );
@@ -1409,7 +1409,7 @@
 		}
 	}
 
-	if ((jtag_add_statemove(states[0]) != ERROR_OK) || ( jtag_execute_queue()!= ERROR_OK))
+	if ((jtag_add_statemove(states[0]) != ERROR_OK) || (jtag_execute_queue()!= ERROR_OK))
 	{
 		Jim_SetResultString(interp, &quot;pathmove: jtag execute failed&quot;,-1);
 		return JIM_ERR;

Modified: trunk/src/jtag/vsllink.c
===================================================================
--- trunk/src/jtag/vsllink.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/jtag/vsllink.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -298,7 +298,7 @@
 		switch (cmd-&gt;type)
 		{
 			case JTAG_RUNTEST:
-				DEBUG_JTAG_IO( &quot;runtest %i cycles, end in %s&quot;, cmd-&gt;cmd.runtest-&gt;num_cycles, \
+				DEBUG_JTAG_IO(&quot;runtest %i cycles, end in %s&quot;, cmd-&gt;cmd.runtest-&gt;num_cycles, \
 					tap_state_name(cmd-&gt;cmd.runtest-&gt;end_state));
 
 				vsllink_end_state(cmd-&gt;cmd.runtest-&gt;end_state);
@@ -377,7 +377,7 @@
 					scan_size = 0;
 					break;			/* above stable states are OK */
 				default:
-					 LOG_ERROR( &quot;jtag_add_clocks() was called with TAP in non-stable state \&quot;%s\&quot;&quot;,
+					 LOG_ERROR(&quot;jtag_add_clocks() was called with TAP in non-stable state \&quot;%s\&quot;&quot;,
 							 tap_state_name(tap_get_state()) );
 					 exit(-1);
 				}

Modified: trunk/src/jtag/zy1000/jtag_minidriver.h
===================================================================
--- trunk/src/jtag/zy1000/jtag_minidriver.h	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/jtag/zy1000/jtag_minidriver.h	2009-06-23 22:46:23 UTC (rev 2376)
@@ -26,7 +26,7 @@
 #define TEST_MANUAL() 0
 
 #if 0
-int  diag_printf( const char *fmt, ... );
+int  diag_printf(const char *fmt, ... );
 #define ZY1000_POKE(a, b) HAL_WRITE_UINT32(a, b); diag_printf(&quot;poke 0x%08x,0x%08x\n&quot;, a, b)
 #define ZY1000_PEEK(a, b) HAL_READ_UINT32(a, b); diag_printf(&quot;peek 0x%08x = 0x%08x\n&quot;, a, b)
 #else

Modified: trunk/src/openocd.c
===================================================================
--- trunk/src/openocd.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/openocd.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -208,7 +208,7 @@
 	}
 	LOG_DEBUG(&quot;log init complete&quot;);
 
-	LOG_OUTPUT( OPENOCD_VERSION &quot;\n&quot; );
+	LOG_OUTPUT(OPENOCD_VERSION &quot;\n&quot; );
 
 	register_command(cmd_ctx, NULL, &quot;init&quot;, handle_init_command,
 					 COMMAND_ANY, &quot;initializes target and servers - nop on subsequent invocations&quot;);
@@ -264,7 +264,7 @@
 		return EXIT_FAILURE;
 
 	ret = parse_config_file(cmd_ctx);
-	if ( (ret != ERROR_OK) &amp;&amp; (ret != ERROR_COMMAND_CLOSE_CONNECTION) )
+	if ((ret != ERROR_OK) &amp;&amp; (ret != ERROR_COMMAND_CLOSE_CONNECTION) )
 		return EXIT_FAILURE;
 
 #if BUILD_HTTPD

Modified: trunk/src/pld/virtex2.c
===================================================================
--- trunk/src/pld/virtex2.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/pld/virtex2.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -243,7 +243,7 @@
 
 	tap = jtag_tap_by_string(args[1]);
 	if (tap == NULL) {
-		command_print( cmd_ctx, &quot;Tap: %s does not exist&quot;, args[1] );
+		command_print(cmd_ctx, &quot;Tap: %s does not exist&quot;, args[1] );
 		return ERROR_OK;
 	}
 

Modified: trunk/src/server/gdb_server.c
===================================================================
--- trunk/src/server/gdb_server.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/server/gdb_server.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -319,9 +319,9 @@
 			break;
 		if ((retval = gdb_get_char(connection, &amp;reply)) != ERROR_OK)
 			return retval;
-		if ( reply == '$' ){
+		if (reply == '$' ){
 			/* fix a problem with some IAR tools */
-			gdb_putback_char( connection, reply );
+			gdb_putback_char(connection, reply );
 			LOG_DEBUG(&quot;Unexpected start of new packet&quot;);
 			break;
 		}
@@ -402,9 +402,9 @@
 				log_remove_callback(gdb_log_callback, connection);
 				LOG_WARNING(&quot;negative reply, retrying&quot;);
 			}
-			else if ( reply == '$' ){
+			else if (reply == '$' ){
 				LOG_ERROR(&quot;GDB missing ack(1) - assumed good&quot;);
-				gdb_putback_char( connection, reply );
+				gdb_putback_char(connection, reply );
 				return ERROR_OK;
 			} else {
 
@@ -413,9 +413,9 @@
 				return ERROR_SERVER_REMOTE_CLOSED;
 			}
 		}
-		else if ( reply == '$' ){
+		else if (reply == '$' ){
 			LOG_ERROR(&quot;GDB missing ack(2) - assumed good&quot;);
-			gdb_putback_char( connection, reply );
+			gdb_putback_char(connection, reply );
 			return ERROR_OK;
 		}
 		else
@@ -709,7 +709,7 @@
 	int retval;
 	connection_t *connection = priv;
 
-	target_handle_event( target, event );
+	target_handle_event(target, event );
 	switch (event)
 	{
 		case TARGET_EVENT_EARLY_HALTED:
@@ -719,7 +719,7 @@
 			target_call_event_callbacks(target, TARGET_EVENT_GDB_END);
 			break;
 		case TARGET_EVENT_GDB_FLASH_ERASE_START:
-			target_handle_event( target, TARGET_EVENT_OLD_gdb_program_config );
+			target_handle_event(target, TARGET_EVENT_OLD_gdb_program_config );
 			if ((retval = jtag_execute_queue()) != ERROR_OK)
 			{
 				return retval;
@@ -1360,7 +1360,7 @@
 	if (packet[0] == 'c')
 	{
 		LOG_DEBUG(&quot;continue&quot;);
-		target_handle_event( target, TARGET_EVENT_OLD_pre_resume );
+		target_handle_event(target, TARGET_EVENT_OLD_pre_resume );
 		retval = target_resume(target, current, address, 0, 0); /* resume at current address, don't handle breakpoints, not debugging */
 	}
 	else if (packet[0] == 's')
@@ -1937,7 +1937,7 @@
 		target_call_event_callbacks(gdb_service-&gt;target, TARGET_EVENT_GDB_FLASH_WRITE_START);
 		result = flash_write(gdb_service-&gt;target, gdb_connection-&gt;vflash_image, &amp;written, 0);
 		target_call_event_callbacks(gdb_service-&gt;target, TARGET_EVENT_GDB_FLASH_WRITE_END);
-		if ( result != ERROR_OK)
+		if (result != ERROR_OK)
 		{
 			if (result == ERROR_FLASH_DST_OUT_OF_BANK)
 				gdb_put_packet(connection, &quot;E.memtype&quot;, 9);
@@ -1964,10 +1964,10 @@
 int gdb_detach(connection_t *connection, target_t *target)
 {
 
-	switch ( detach_mode )
+	switch (detach_mode )
 	{
 		case GDB_DETACH_RESUME:
-			target_handle_event( target, TARGET_EVENT_OLD_pre_resume );
+			target_handle_event(target, TARGET_EVENT_OLD_pre_resume );
 			target_resume(target, 1, 0, 1, 0);
 			break;
 
@@ -2036,12 +2036,12 @@
 		/* terminate with zero */
 		packet[packet_size] = 0;
 
-		if ( LOG_LEVEL_IS( LOG_LVL_DEBUG ) ){
-			if ( packet[0] == 'X' ){
+		if (LOG_LEVEL_IS(LOG_LVL_DEBUG ) ){
+			if (packet[0] == 'X' ){
 				// binary packets spew junk into the debug log stream
 				char buf[ 50 ];
 				int x;
-				for ( x = 0 ; (x &lt; 49) &amp;&amp; (packet[x] != ':') ; x++ ){
+				for (x = 0 ; (x &lt; 49) &amp;&amp; (packet[x] != ':') ; x++ ){
 					buf[x] = packet[x];
 				}
 				buf[x] = 0;

Modified: trunk/src/server/httpd.c
===================================================================
--- trunk/src/server/httpd.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/server/httpd.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -415,8 +415,8 @@
 int httpd_start(void)
 {
 	pthread_mutexattr_t attr;
-	pthread_mutexattr_init( &amp;attr );
-	pthread_mutex_init( &amp;mutex, &amp;attr );
+	pthread_mutexattr_init(&amp;attr );
+	pthread_mutex_init(&amp;mutex, &amp;attr );
 
 	int port = 8888;
 	LOG_USER(&quot;Launching httpd server on port %d&quot;, port);
@@ -446,16 +446,16 @@
 void httpd_stop(void)
 {
 	MHD_stop_daemon(d);
-	pthread_mutex_destroy( &amp;mutex );
+	pthread_mutex_destroy(&amp;mutex );
 }
 
 void openocd_sleep_prelude(void)
 {
-	pthread_mutex_unlock( &amp;mutex );
+	pthread_mutex_unlock(&amp;mutex );
 }
 
 void openocd_sleep_postlude(void)
 {
-	pthread_mutex_lock( &amp;mutex );
+	pthread_mutex_lock(&amp;mutex );
 }
 

Modified: trunk/src/server/server.c
===================================================================
--- trunk/src/server/server.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/server/server.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -528,7 +528,7 @@
 
 #ifdef _WIN32
 	WSACleanup();
-	SetConsoleCtrlHandler( ControlHandler, FALSE );
+	SetConsoleCtrlHandler(ControlHandler, FALSE );
 #endif
 
 	return ERROR_OK;

Modified: trunk/src/svf/svf.c
===================================================================
--- trunk/src/svf/svf.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/svf/svf.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -273,7 +273,7 @@
 {
 	const char* ret;
 
-	switch ( state )
+	switch (state )
 	{
 	case TAP_RESET:		ret = &quot;RESET&quot;;		break;
 	case TAP_IDLE:		ret = &quot;IDLE&quot;;		break;
@@ -422,7 +422,7 @@
 	// TAP_RESET
 	jtag_add_tlr();
 
-	while ( ERROR_OK == svf_read_command_from_file(svf_fd) )
+	while (ERROR_OK == svf_read_command_from_file(svf_fd) )
 	{
 		if (ERROR_OK != svf_run_command(cmd_ctx, svf_command_buffer))
 		{

Modified: trunk/src/target/arm11.c
===================================================================
--- trunk/src/target/arm11.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/target/arm11.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -709,7 +709,7 @@
 	arm11_common_t * arm11 = target-&gt;arch_info;
 
 	LOG_USER(&quot;target halted due to %s\ncpsr: 0x%8.8&quot; PRIx32 &quot; pc: 0x%8.8&quot; PRIx32 &quot;&quot;,
-			 Jim_Nvp_value2name_simple( nvp_target_debug_reason, target-&gt;debug_reason )-&gt;name,
+			 Jim_Nvp_value2name_simple(nvp_target_debug_reason, target-&gt;debug_reason )-&gt;name,
 			 R(CPSR),
 			 R(PC));
 
@@ -732,7 +732,7 @@
 	arm11_common_t * arm11 = target-&gt;arch_info;
 
 	LOG_DEBUG(&quot;target-&gt;state: %s&quot;,
-		Jim_Nvp_value2name_simple( nvp_target_state, target-&gt;state )-&gt;name );
+		Jim_Nvp_value2name_simple(nvp_target_state, target-&gt;state )-&gt;name );
 
 	if (target-&gt;state == TARGET_UNKNOWN)
 	{
@@ -789,7 +789,7 @@
 	arm11_common_t * arm11 = target-&gt;arch_info;
 
 	LOG_DEBUG(&quot;target-&gt;state: %s&quot;,
-		Jim_Nvp_value2name_simple( nvp_target_state, target-&gt;state )-&gt;name );
+		Jim_Nvp_value2name_simple(nvp_target_state, target-&gt;state )-&gt;name );
 
 
 	if (target-&gt;state != TARGET_HALTED)
@@ -889,7 +889,7 @@
 	FNC_INFO;
 
 	LOG_DEBUG(&quot;target-&gt;state: %s&quot;,
-		Jim_Nvp_value2name_simple( nvp_target_state, target-&gt;state )-&gt;name );
+		Jim_Nvp_value2name_simple(nvp_target_state, target-&gt;state )-&gt;name );
 
 	if (target-&gt;state != TARGET_HALTED)
 	{
@@ -1035,7 +1035,7 @@
 
 #if 0
 	LOG_DEBUG(&quot;target-&gt;state: %s&quot;,
-		Jim_Nvp_value2name_simple( nvp_target_state, target-&gt;state )-&gt;name );
+		Jim_Nvp_value2name_simple(nvp_target_state, target-&gt;state )-&gt;name );
 
 
 	/* deassert reset lines */
@@ -1951,30 +1951,30 @@
 
 	command_t * top_cmd = NULL;
 
-	RC_TOP(				&quot;arm11&quot;,				&quot;arm11 specific commands&quot;,
+	RC_TOP(&quot;arm11&quot;,				&quot;arm11 specific commands&quot;,
 
-	RC_TOP(				&quot;memwrite&quot;,				&quot;Control memory write transfer mode&quot;,
+	RC_TOP(&quot;memwrite&quot;,				&quot;Control memory write transfer mode&quot;,
 
-		RC_FINAL_BOOL(	&quot;burst&quot;,				&quot;Enable/Disable non-standard but fast burst mode (default: enabled)&quot;,
+		RC_FINAL_BOOL(&quot;burst&quot;,				&quot;Enable/Disable non-standard but fast burst mode (default: enabled)&quot;,
 						memwrite_burst)
 
-		RC_FINAL_BOOL(	&quot;error_fatal&quot;,			&quot;Terminate program if transfer error was found (default: enabled)&quot;,
+		RC_FINAL_BOOL(&quot;error_fatal&quot;,			&quot;Terminate program if transfer error was found (default: enabled)&quot;,
 						memwrite_error_fatal)
 	) /* memwrite */
 
-	RC_FINAL_BOOL(		&quot;no_increment&quot;,			&quot;Don't increment address on multi-read/-write (default: disabled)&quot;,
+	RC_FINAL_BOOL(&quot;no_increment&quot;,			&quot;Don't increment address on multi-read/-write (default: disabled)&quot;,
 						memrw_no_increment)
 
-	RC_FINAL_BOOL(		&quot;step_irq_enable&quot;,		&quot;Enable interrupts while stepping (default: disabled)&quot;,
+	RC_FINAL_BOOL(&quot;step_irq_enable&quot;,		&quot;Enable interrupts while stepping (default: disabled)&quot;,
 						step_irq_enable)
 
-	RC_FINAL(			&quot;vcr&quot;,					&quot;Control (Interrupt) Vector Catch Register&quot;,
+	RC_FINAL(&quot;vcr&quot;,					&quot;Control (Interrupt) Vector Catch Register&quot;,
 						arm11_handle_vcr)
 
-	RC_FINAL(			&quot;mrc&quot;,					&quot;Read Coprocessor register&quot;,
+	RC_FINAL(&quot;mrc&quot;,					&quot;Read Coprocessor register&quot;,
 						arm11_handle_mrc)
 
-	RC_FINAL(			&quot;mcr&quot;,					&quot;Write Coprocessor register&quot;,
+	RC_FINAL(&quot;mcr&quot;,					&quot;Write Coprocessor register&quot;,
 						arm11_handle_mcr)
 	) /* arm11 */
 

Modified: trunk/src/target/arm720t.c
===================================================================
--- trunk/src/target/arm720t.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/target/arm720t.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -319,7 +319,7 @@
 			&quot;cpsr: 0x%8.8&quot; PRIx32 &quot; pc: 0x%8.8&quot; PRIx32 &quot;\n&quot;
 			&quot;MMU: %s, Cache: %s&quot;,
 			 armv4_5_state_strings[armv4_5-&gt;core_state],
-			 Jim_Nvp_value2name_simple( nvp_target_debug_reason, target-&gt;debug_reason )-&gt;name ,
+			 Jim_Nvp_value2name_simple(nvp_target_debug_reason, target-&gt;debug_reason )-&gt;name ,
 			 armv4_5_mode_strings[armv4_5_mode_to_number(armv4_5-&gt;core_mode)],
 			 buf_get_u32(armv4_5-&gt;core_cache-&gt;reg_list[ARMV4_5_CPSR].value, 0, 32),
 			 buf_get_u32(armv4_5-&gt;core_cache-&gt;reg_list[15].value, 0, 32),

Modified: trunk/src/target/arm7_9_common.c
===================================================================
--- trunk/src/target/arm7_9_common.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/target/arm7_9_common.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -526,7 +526,7 @@
 		embeddedice_set_reg(&amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_W0_ADDR_VALUE], watchpoint-&gt;address);
 		embeddedice_set_reg(&amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_W0_ADDR_MASK], mask);
 		embeddedice_set_reg(&amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_W0_DATA_MASK], watchpoint-&gt;mask);
-		if ( watchpoint-&gt;mask != 0xffffffffu )
+		if (watchpoint-&gt;mask != 0xffffffffu )
 			embeddedice_set_reg(&amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_W0_DATA_VALUE], watchpoint-&gt;value);
 		embeddedice_set_reg(&amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_W0_CONTROL_MASK], 0xff &amp; ~EICE_W_CTRL_nOPC &amp; ~rw_mask);
 		embeddedice_set_reg(&amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_W0_CONTROL_VALUE], EICE_W_CTRL_ENABLE | EICE_W_CTRL_nOPC | (watchpoint-&gt;rw &amp; 1));
@@ -543,7 +543,7 @@
 		embeddedice_set_reg(&amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_W1_ADDR_VALUE], watchpoint-&gt;address);
 		embeddedice_set_reg(&amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_W1_ADDR_MASK], mask);
 		embeddedice_set_reg(&amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_W1_DATA_MASK], watchpoint-&gt;mask);
-		if ( watchpoint-&gt;mask != 0xffffffffu )
+		if (watchpoint-&gt;mask != 0xffffffffu )
 			embeddedice_set_reg(&amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_W1_DATA_VALUE], watchpoint-&gt;value);
 		embeddedice_set_reg(&amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_W1_CONTROL_MASK], 0xff &amp; ~EICE_W_CTRL_nOPC &amp; ~rw_mask);
 		embeddedice_set_reg(&amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_W1_CONTROL_VALUE], EICE_W_CTRL_ENABLE | EICE_W_CTRL_nOPC | (watchpoint-&gt;rw &amp; 1));
@@ -974,7 +974,7 @@
 	armv4_5_common_t *armv4_5 = target-&gt;arch_info;
 	arm7_9_common_t *arm7_9 = armv4_5-&gt;arch_info;
 	LOG_DEBUG(&quot;target-&gt;state: %s&quot;,
-		  Jim_Nvp_value2name_simple( nvp_target_state,target-&gt;state)-&gt;name);
+		  Jim_Nvp_value2name_simple(nvp_target_state,target-&gt;state)-&gt;name);
 
 	enum reset_types jtag_reset_config = jtag_get_reset_config();
 	if (!(jtag_reset_config &amp; RESET_HAS_SRST))
@@ -1044,7 +1044,7 @@
 {
 	int retval = ERROR_OK;
 	LOG_DEBUG(&quot;target-&gt;state: %s&quot;,
-		Jim_Nvp_value2name_simple( nvp_target_state,target-&gt;state)-&gt;name);
+		Jim_Nvp_value2name_simple(nvp_target_state,target-&gt;state)-&gt;name);
 
 	/* deassert reset lines */
 	jtag_add_reset(0, 0);
@@ -1257,7 +1257,7 @@
 	reg_t *dbg_ctrl = &amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_DBG_CTRL];
 
 	LOG_DEBUG(&quot;target-&gt;state: %s&quot;,
-		  Jim_Nvp_value2name_simple( nvp_target_state,target-&gt;state)-&gt;name);
+		  Jim_Nvp_value2name_simple(nvp_target_state,target-&gt;state)-&gt;name);
 
 	if (target-&gt;state == TARGET_HALTED)
 	{

Modified: trunk/src/target/arm7tdmi.c
===================================================================
--- trunk/src/target/arm7tdmi.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/target/arm7tdmi.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -822,7 +822,7 @@
 	return ERROR_OK;
 }
 
-int arm7tdmi_target_create( struct target_s *target, Jim_Interp *interp )
+int arm7tdmi_target_create(struct target_s *target, Jim_Interp *interp )
 {
 	arm7tdmi_common_t *arm7tdmi;
 

Modified: trunk/src/target/arm920t.c
===================================================================
--- trunk/src/target/arm920t.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/target/arm920t.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -497,7 +497,7 @@
 		exit(-1);
 	}
 
-	LOG_USER(	&quot;target halted in %s state due to %s, current mode: %s\n&quot;
+	LOG_USER(&quot;target halted in %s state due to %s, current mode: %s\n&quot;
 			&quot;cpsr: 0x%8.8&quot; PRIx32 &quot; pc: 0x%8.8&quot; PRIx32 &quot;\n&quot;
 			&quot;MMU: %s, D-Cache: %s, I-Cache: %s&quot;,
 			 armv4_5_state_strings[armv4_5-&gt;core_state],

Modified: trunk/src/target/arm926ejs.c
===================================================================
--- trunk/src/target/arm926ejs.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/target/arm926ejs.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -547,7 +547,7 @@
 			&quot;cpsr: 0x%8.8&quot; PRIx32 &quot; pc: 0x%8.8&quot; PRIx32 &quot;\n&quot;
 			&quot;MMU: %s, D-Cache: %s, I-Cache: %s&quot;,
 			 armv4_5_state_strings[armv4_5-&gt;core_state],
-			 Jim_Nvp_value2name_simple( nvp_target_debug_reason,target-&gt;debug_reason)-&gt;name,
+			 Jim_Nvp_value2name_simple(nvp_target_debug_reason,target-&gt;debug_reason)-&gt;name,
 			 armv4_5_mode_strings[armv4_5_mode_to_number(armv4_5-&gt;core_mode)],
 			 buf_get_u32(armv4_5-&gt;core_cache-&gt;reg_list[ARMV4_5_CPSR].value, 0, 32),
 			 buf_get_u32(armv4_5-&gt;core_cache-&gt;reg_list[15].value, 0, 32),

Modified: trunk/src/target/arm966e.c
===================================================================
--- trunk/src/target/arm966e.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/target/arm966e.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -110,7 +110,7 @@
 	return ERROR_OK;
 }
 
-int arm966e_target_create( struct target_s *target, Jim_Interp *interp )
+int arm966e_target_create(struct target_s *target, Jim_Interp *interp )
 {
 	arm966e_common_t *arm966e = calloc(1,sizeof(arm966e_common_t));
 

Modified: trunk/src/target/arm9tdmi.c
===================================================================
--- trunk/src/target/arm9tdmi.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/target/arm9tdmi.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -39,7 +39,7 @@
 int handle_arm9tdmi_catch_vectors_command(struct command_context_s *cmd_ctx, char *cmd, char **args, int argc);
 
 /* forward declarations */
-int arm9tdmi_target_create( struct target_s *target, Jim_Interp *interp );
+int arm9tdmi_target_create(struct target_s *target, Jim_Interp *interp );
 
 int arm9tdmi_quit(void);
 

Modified: trunk/src/target/arm_adi_v5.h
===================================================================
--- trunk/src/target/arm_adi_v5.h	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/target/arm_adi_v5.h	2009-06-23 22:46:23 UTC (rev 2376)
@@ -107,7 +107,7 @@
 /* Accessor function for currently selected DAP-AP number */ 
 static inline uint8_t dap_ap_get_select(swjdp_common_t *swjdp)
 {
-	return (uint8_t)( swjdp -&gt;apsel &gt;&gt; 24);
+	return (uint8_t)(swjdp -&gt;apsel &gt;&gt; 24);
 }
 
 /* Internal functions used in the module, partial transactions, use with caution */

Modified: trunk/src/target/armv4_5.c
===================================================================
--- trunk/src/target/armv4_5.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/target/armv4_5.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -299,7 +299,7 @@
 
 	LOG_USER(&quot;target halted in %s state due to %s, current mode: %s\ncpsr: 0x%8.8&quot; PRIx32 &quot; pc: 0x%8.8&quot; PRIx32 &quot;&quot;,
 			 armv4_5_state_strings[armv4_5-&gt;core_state],
-			 Jim_Nvp_value2name_simple( nvp_target_debug_reason, target-&gt;debug_reason )-&gt;name,
+			 Jim_Nvp_value2name_simple(nvp_target_debug_reason, target-&gt;debug_reason )-&gt;name,
 			 armv4_5_mode_strings[armv4_5_mode_to_number(armv4_5-&gt;core_mode)],
 			 buf_get_u32(armv4_5-&gt;core_cache-&gt;reg_list[ARMV4_5_CPSR].value, 0, 32),
 			 buf_get_u32(armv4_5-&gt;core_cache-&gt;reg_list[15].value, 0, 32));

Modified: trunk/src/target/armv7m.c
===================================================================
--- trunk/src/target/armv7m.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/target/armv7m.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -462,7 +462,7 @@
 	armv7m_common_t *armv7m = target-&gt;arch_info;
 
 	LOG_USER(&quot;target halted due to %s, current mode: %s %s\nxPSR: 0x%8.8&quot; PRIx32 &quot; pc: 0x%8.8&quot; PRIx32 &quot;&quot;,
-		 Jim_Nvp_value2name_simple( nvp_target_debug_reason,target-&gt;debug_reason)-&gt;name,
+		 Jim_Nvp_value2name_simple(nvp_target_debug_reason,target-&gt;debug_reason)-&gt;name,
 		armv7m_mode_strings[armv7m-&gt;core_mode],
 		armv7m_exception_string(armv7m-&gt;exception_number),
 		buf_get_u32(armv7m-&gt;core_cache-&gt;reg_list[ARMV7M_xPSR].value, 0, 32),

Modified: trunk/src/target/armv7m.h
===================================================================
--- trunk/src/target/armv7m.h	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/target/armv7m.h	2009-06-23 22:46:23 UTC (rev 2376)
@@ -144,7 +144,7 @@
  * Rd: source register
  * SYSm: destination special register
  */
-#define ARMV7M_T_MSR(SYSm, Rn)	((0xF380 | ( Rn &lt;&lt; 8 )) | ((0x8800 | SYSm) &lt;&lt; 16)) 
+#define ARMV7M_T_MSR(SYSm, Rn)	((0xF380 | (Rn &lt;&lt; 8 )) | ((0x8800 | SYSm) &lt;&lt; 16)) 
 
 /* Change Processor State. The instruction modifies the PRIMASK and FAULTMASK 
  * special-purpose register values  (Thumb mode) 16 bit Thumb2 instruction

Modified: trunk/src/target/cortex_a8.c
===================================================================
--- trunk/src/target/cortex_a8.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/target/cortex_a8.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -87,7 +87,7 @@
 {
 	uint16_t dcrdr;
 
-	mem_ap_read_buf_u16( swjdp, (uint8_t*)&amp;dcrdr, 1, DCB_DCRDR);
+	mem_ap_read_buf_u16(swjdp, (uint8_t*)&amp;dcrdr, 1, DCB_DCRDR);
 	*ctrl = (uint8_t)dcrdr;
 	*value = (uint8_t)(dcrdr &gt;&gt; 8);
 
@@ -98,7 +98,7 @@
 	if (dcrdr &amp; (1 &lt;&lt; 0))
 	{
 		dcrdr = 0;
-		mem_ap_write_buf_u16( swjdp, (uint8_t*)&amp;dcrdr, 1, DCB_DCRDR);
+		mem_ap_write_buf_u16(swjdp, (uint8_t*)&amp;dcrdr, 1, DCB_DCRDR);
 	}
 
 	return ERROR_OK;

Modified: trunk/src/target/cortex_m3.c
===================================================================
--- trunk/src/target/cortex_m3.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/target/cortex_m3.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -444,7 +444,7 @@
 	LOG_DEBUG(&quot;entered debug state in core mode: %s at PC 0x%&quot; PRIx32 &quot;, target-&gt;state: %s&quot;,
 		armv7m_mode_strings[armv7m-&gt;core_mode],
 		*(uint32_t*)(armv7m-&gt;core_cache-&gt;reg_list[15].value),
-		Jim_Nvp_value2name_simple( nvp_target_state, target-&gt;state )-&gt;name);
+		Jim_Nvp_value2name_simple(nvp_target_state, target-&gt;state )-&gt;name);
 
 	if (armv7m-&gt;post_debug_entry)
 		armv7m-&gt;post_debug_entry(target);
@@ -520,7 +520,7 @@
 #if 0
 	/* Read Debug Fault Status Register, added to figure out the lockup when running flashtest.script  */
 	mem_ap_read_atomic_u32(swjdp, NVIC_DFSR, &amp;cortex_m3-&gt;nvic_dfsr);
-	LOG_DEBUG(&quot;dcb_dhcsr 0x%x, nvic_dfsr 0x%x, target-&gt;state: %s&quot;, cortex_m3-&gt;dcb_dhcsr, cortex_m3-&gt;nvic_dfsr, Jim_Nvp_value2name_simple( nvp_target_state, target-&gt;state )-&gt;name );
+	LOG_DEBUG(&quot;dcb_dhcsr 0x%x, nvic_dfsr 0x%x, target-&gt;state: %s&quot;, cortex_m3-&gt;dcb_dhcsr, cortex_m3-&gt;nvic_dfsr, Jim_Nvp_value2name_simple(nvp_target_state, target-&gt;state )-&gt;name );
 #endif
 
 	return ERROR_OK;
@@ -751,7 +751,7 @@
 	int assert_srst = 1;
 
 	LOG_DEBUG(&quot;target-&gt;state: %s&quot;,
-		Jim_Nvp_value2name_simple( nvp_target_state, target-&gt;state )-&gt;name );
+		Jim_Nvp_value2name_simple(nvp_target_state, target-&gt;state )-&gt;name );
 
 	enum reset_types jtag_reset_config = jtag_get_reset_config();
 	if (!(jtag_reset_config &amp; RESET_HAS_SRST))
@@ -1491,7 +1491,7 @@
 {
 	uint16_t dcrdr;
 
-	mem_ap_read_buf_u16( swjdp, (uint8_t*)&amp;dcrdr, 1, DCB_DCRDR);
+	mem_ap_read_buf_u16(swjdp, (uint8_t*)&amp;dcrdr, 1, DCB_DCRDR);
 	*ctrl = (uint8_t)dcrdr;
 	*value = (uint8_t)(dcrdr &gt;&gt; 8);
 
@@ -1502,7 +1502,7 @@
 	if (dcrdr &amp; (1 &lt;&lt; 0))
 	{
 		dcrdr = 0;
-		mem_ap_write_buf_u16( swjdp, (uint8_t*)&amp;dcrdr, 1, DCB_DCRDR);
+		mem_ap_write_buf_u16(swjdp, (uint8_t*)&amp;dcrdr, 1, DCB_DCRDR);
 	}
 
 	return ERROR_OK;

Modified: trunk/src/target/embeddedice.h
===================================================================
--- trunk/src/target/embeddedice.h	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/target/embeddedice.h	2009-06-23 22:46:23 UTC (rev 2376)
@@ -108,7 +108,7 @@
 /* If many embeddedice_write_reg() follow eachother, then the &gt;1 invocations can be this faster version of
  * embeddedice_write_reg
  */
-static __inline__ void embeddedice_write_reg_inner( jtag_tap_t *tap, int reg_addr, uint32_t value)
+static __inline__ void embeddedice_write_reg_inner(jtag_tap_t *tap, int reg_addr, uint32_t value)
 {
 	static const int embeddedice_num_bits[]={32,5,1};
 	uint32_t values[3];
@@ -117,7 +117,7 @@
 	values[1]=reg_addr;
 	values[2]=1;
 
-	jtag_add_dr_out( tap,
+	jtag_add_dr_out(tap,
 			3,
 			embeddedice_num_bits,
 			values,

Modified: trunk/src/target/etb.c
===================================================================
--- trunk/src/target/etb.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/target/etb.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -387,7 +387,7 @@
 		return ERROR_FAIL;
 	}
 
-	tap = jtag_tap_by_string( args[1] );
+	tap = jtag_tap_by_string(args[1] );
 	if (tap == NULL)
 	{
 		command_print(cmd_ctx, &quot;Tap: %s does not exist&quot;, args[1] );

Modified: trunk/src/target/image.c
===================================================================
--- trunk/src/target/image.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/target/image.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -533,7 +533,7 @@
 		}
 		else if (record_type &gt;= 1 &amp;&amp; record_type &lt;= 3)
 		{
-			switch ( record_type )
+			switch (record_type )
 			{
 				case 1:
 					/* S1 - 16 bit address data record */
@@ -636,7 +636,7 @@
 		cal_checksum += (uint8_t)checksum;
 		bytes_read += 2;
 
-		if ( cal_checksum != 0xFF )
+		if (cal_checksum != 0xFF )
 		{
 			/* checksum failed */
 			LOG_ERROR(&quot;incorrect record checksum found in S19 file&quot;);

Modified: trunk/src/target/mips32.c
===================================================================
--- trunk/src/target/mips32.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/target/mips32.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -265,7 +265,7 @@
 	}
 	
 	LOG_USER(&quot;target halted due to %s, pc: 0x%8.8&quot; PRIx32 &quot;&quot;,
-		Jim_Nvp_value2name_simple( nvp_target_debug_reason, target-&gt;debug_reason )-&gt;name ,
+		Jim_Nvp_value2name_simple(nvp_target_debug_reason, target-&gt;debug_reason )-&gt;name ,
 		buf_get_u32(mips32-&gt;core_cache-&gt;reg_list[MIPS32_PC].value, 0, 32));
 	
 	return ERROR_OK;

Modified: trunk/src/target/mips32_pracc.c
===================================================================
--- trunk/src/target/mips32_pracc.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/target/mips32_pracc.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -207,7 +207,7 @@
 	return ERROR_OK;
 }
 
-int mips32_pracc_exec( mips_ejtag_t *ejtag_info, int code_len, uint32_t *code, int num_param_in, uint32_t *param_in, int num_param_out, uint32_t *param_out, int cycle)
+int mips32_pracc_exec(mips_ejtag_t *ejtag_info, int code_len, uint32_t *code, int num_param_in, uint32_t *param_in, int num_param_out, uint32_t *param_out, int cycle)
 {
 	uint32_t ejtag_ctrl;
 	uint32_t address, data;

Modified: trunk/src/target/mips32_pracc.h
===================================================================
--- trunk/src/target/mips32_pracc.h	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/target/mips32_pracc.h	2009-06-23 22:46:23 UTC (rev 2376)
@@ -35,7 +35,7 @@
 #define UPPER16(uint32_t) (uint32_t &gt;&gt; 16)
 #define LOWER16(uint32_t) (uint32_t &amp; 0xFFFF)
 #define NEG16(v) (((~(v)) + 1) &amp; 0xFFFF)
-/*#define NEG18(v) ( ((~(v)) + 1) &amp; 0x3FFFF )*/
+/*#define NEG18(v) (((~(v)) + 1) &amp; 0x3FFFF )*/
 
 extern int mips32_pracc_read_mem(mips_ejtag_t *ejtag_info, uint32_t addr, int size, int count, void *buf);
 extern int mips32_pracc_write_mem(mips_ejtag_t *ejtag_info, uint32_t addr, int size, int count, void *buf);
@@ -53,6 +53,6 @@
 extern int mips32_pracc_read_regs(mips_ejtag_t *ejtag_info, uint32_t *regs);
 extern int mips32_pracc_write_regs(mips_ejtag_t *ejtag_info, uint32_t *regs);
 
-extern int mips32_pracc_exec( mips_ejtag_t *ejtag_info, int code_len, uint32_t *code, int num_param_in, uint32_t *param_in, int num_param_out, uint32_t *param_out, int cycle);
+extern int mips32_pracc_exec(mips_ejtag_t *ejtag_info, int code_len, uint32_t *code, int num_param_in, uint32_t *param_in, int num_param_out, uint32_t *param_out, int cycle);
 
 #endif

Modified: trunk/src/target/mips_m4k.c
===================================================================
--- trunk/src/target/mips_m4k.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/target/mips_m4k.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -148,7 +148,7 @@
 
 	LOG_DEBUG(&quot;entered debug state at PC 0x%&quot; PRIx32 &quot;, target-&gt;state: %s&quot;,
 		*(uint32_t*)(mips32-&gt;core_cache-&gt;reg_list[MIPS32_PC].value),
-		  Jim_Nvp_value2name_simple( nvp_target_state, target-&gt;state )-&gt;name);
+		  Jim_Nvp_value2name_simple(nvp_target_state, target-&gt;state )-&gt;name);
 
 	return ERROR_OK;
 }
@@ -220,7 +220,7 @@
 	mips_ejtag_t *ejtag_info = &amp;mips32-&gt;ejtag_info;
 
 	LOG_DEBUG(&quot;target-&gt;state: %s&quot;,
-		  Jim_Nvp_value2name_simple( nvp_target_state, target-&gt;state )-&gt;name);
+		  Jim_Nvp_value2name_simple(nvp_target_state, target-&gt;state )-&gt;name);
 
 	if (target-&gt;state == TARGET_HALTED)
 	{
@@ -265,7 +265,7 @@
 	mips_ejtag_t *ejtag_info = &amp;mips32-&gt;ejtag_info;
 
 	LOG_DEBUG(&quot;target-&gt;state: %s&quot;,
-		Jim_Nvp_value2name_simple( nvp_target_state, target-&gt;state )-&gt;name);
+		Jim_Nvp_value2name_simple(nvp_target_state, target-&gt;state )-&gt;name);
 
 	enum reset_types jtag_reset_config = jtag_get_reset_config();
 	if (!(jtag_reset_config &amp; RESET_HAS_SRST))
@@ -324,7 +324,7 @@
 int mips_m4k_deassert_reset(target_t *target)
 {
 	LOG_DEBUG(&quot;target-&gt;state: %s&quot;,
-		Jim_Nvp_value2name_simple( nvp_target_state, target-&gt;state )-&gt;name);
+		Jim_Nvp_value2name_simple(nvp_target_state, target-&gt;state )-&gt;name);
 
 	/* deassert reset lines */
 	jtag_add_reset(0, 0);

Modified: trunk/src/target/target.c
===================================================================
--- trunk/src/target/target.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/target/target.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -70,7 +70,7 @@
 
 static int jim_array2mem(Jim_Interp *interp, int argc, Jim_Obj *const *argv);
 static int jim_mem2array(Jim_Interp *interp, int argc, Jim_Obj *const *argv);
-static int jim_target( Jim_Interp *interp, int argc, Jim_Obj *const *argv);
+static int jim_target(Jim_Interp *interp, int argc, Jim_Obj *const *argv);
 
 static int target_array2mem(Jim_Interp *interp, target_t *target, int argc, Jim_Obj *const *argv);
 static int target_mem2array(Jim_Interp *interp, target_t *target, int argc, Jim_Obj *const *argv);
@@ -139,12 +139,12 @@
 	{ .value = -1, .name = NULL }
 };
 
-const char *target_strerror_safe( int err )
+const char *target_strerror_safe(int err )
 {
 	const Jim_Nvp *n;
 
-	n = Jim_Nvp_value2name_simple( nvp_error_target, err );
-	if ( n-&gt;name == NULL ){
+	n = Jim_Nvp_value2name_simple(nvp_error_target, err );
+	if (n-&gt;name == NULL ){
 		return &quot;unknown&quot;;
 	} else {
 		return n-&gt;name;
@@ -244,8 +244,8 @@
 
 	x = -1;
 	t = all_targets;
-	while ( t ){
-		if ( x &lt; t-&gt;target_number ){
+	while (t ){
+		if (x &lt; t-&gt;target_number ){
 			x = (t-&gt;target_number) + 1;
 		}
 		t = t-&gt;next;
@@ -263,7 +263,7 @@
 	x = -1;
 	t = all_targets;
 	while (t){
-		if ( x &lt; t-&gt;target_number ){
+		if (x &lt; t-&gt;target_number ){
 			x = t-&gt;target_number;
 		}
 		t = t-&gt;next;
@@ -353,7 +353,7 @@
 	target_t *target = all_targets;
 
 	while (target){
-		if ( target-&gt;target_number == num ){
+		if (target-&gt;target_number == num ){
 			return target;
 		}
 		target = target-&gt;next;
@@ -428,8 +428,8 @@
 	char buf[100];
 	int retval;
 	Jim_Nvp *n;
-	n = Jim_Nvp_value2name_simple( nvp_reset_modes, reset_mode );
-	if ( n-&gt;name == NULL ){
+	n = Jim_Nvp_value2name_simple(nvp_reset_modes, reset_mode );
+	if (n-&gt;name == NULL ){
 		LOG_ERROR(&quot;invalid reset mode&quot;);
 		return ERROR_FAIL;
 	}
@@ -441,8 +441,8 @@
 	int save_poll = target_continuous_poll;
 	target_continuous_poll = 0;
 
-	sprintf( buf, &quot;ocd_process_reset %s&quot;, n-&gt;name );
-	retval = Jim_Eval( interp, buf );
+	sprintf(buf, &quot;ocd_process_reset %s&quot;, n-&gt;name );
+	retval = Jim_Eval(interp, buf );
 
 	target_continuous_poll = save_poll;
 
@@ -823,9 +823,9 @@
 
 	LOG_DEBUG(&quot;target event %i (%s)&quot;,
 			  event,
-			  Jim_Nvp_value2name_simple( nvp_target_event, event )-&gt;name );
+			  Jim_Nvp_value2name_simple(nvp_target_event, event )-&gt;name );
 
-	target_handle_event( target, event );
+	target_handle_event(target, event );
 
 	while (callback)
 	{
@@ -1286,7 +1286,7 @@
 			target_buffer_set_u32(target, &amp;buffer[i*sizeof(uint32_t)], target_data);
 		}
 
-		retval = image_calculate_checksum( buffer, size, &amp;checksum );
+		retval = image_calculate_checksum(buffer, size, &amp;checksum );
 		free(buffer);
 	}
 
@@ -1654,22 +1654,22 @@
 		int did_something = 0;
 		if (runSrstAsserted)
 		{
-			Jim_Eval( interp, &quot;srst_asserted&quot;);
+			Jim_Eval(interp, &quot;srst_asserted&quot;);
 			did_something = 1;
 		}
 		if (runSrstDeasserted)
 		{
-			Jim_Eval( interp, &quot;srst_deasserted&quot;);
+			Jim_Eval(interp, &quot;srst_deasserted&quot;);
 			did_something = 1;
 		}
 		if (runPowerDropout)
 		{
-			Jim_Eval( interp, &quot;power_dropout&quot;);
+			Jim_Eval(interp, &quot;power_dropout&quot;);
 			did_something = 1;
 		}
 		if (runPowerRestore)
 		{
-			Jim_Eval( interp, &quot;power_restore&quot;);
+			Jim_Eval(interp, &quot;power_restore&quot;);
 			did_something = 1;
 		}
 
@@ -1982,8 +1982,8 @@
 	if (argc == 1)
 	{
 		const Jim_Nvp *n;
-		n = Jim_Nvp_name2value_simple( nvp_reset_modes, args[0] );
-		if ( (n-&gt;name == NULL) || (n-&gt;value == RESET_UNKNOWN) ){
+		n = Jim_Nvp_name2value_simple(nvp_reset_modes, args[0] );
+		if ((n-&gt;name == NULL) || (n-&gt;value == RESET_UNKNOWN) ){
 			return ERROR_COMMAND_SYNTAX_ERROR;
 		}
 		reset_mode = n-&gt;value;
@@ -2473,16 +2473,16 @@
 		if (verify)
 		{
 			/* calculate checksum of image */
-			image_calculate_checksum( buffer, buf_cnt, &amp;checksum );
+			image_calculate_checksum(buffer, buf_cnt, &amp;checksum );
 
 			retval = target_checksum_memory(target, image.sections[i].base_address, buf_cnt, &amp;mem_checksum);
-			if ( retval != ERROR_OK )
+			if (retval != ERROR_OK )
 			{
 				free(buffer);
 				break;
 			}
 
-			if ( checksum != mem_checksum )
+			if (checksum != mem_checksum )
 			{
 				/* failed crc checksum, fall back to a binary compare */
 				uint8_t *data;
@@ -3084,7 +3084,7 @@
 			break;
 		default:
 			Jim_SetResult(interp, Jim_NewEmptyStringObj(interp));
-			Jim_AppendStrings( interp, Jim_GetResult(interp), &quot;Invalid width param, must be 8/16/32&quot;, NULL );
+			Jim_AppendStrings(interp, Jim_GetResult(interp), &quot;Invalid width param, must be 8/16/32&quot;, NULL );
 			return JIM_ERR;
 	}
 	if (len == 0) {
@@ -3132,7 +3132,7 @@
 			count = (sizeof(buffer)/width);
 		}
 
-		retval = target_read_memory( target, addr, width, count, buffer );
+		retval = target_read_memory(target, addr, width, count, buffer );
 		if (retval != ERROR_OK) {
 			/* BOO !*/
 			LOG_ERROR(&quot;mem2array: Read @ 0x%08x, w=%d, cnt=%d, failed&quot;, 
@@ -3215,7 +3215,7 @@
 		return JIM_ERR;
 	}
 
-	return target_array2mem( interp,target, argc-1, argv + 1 );
+	return target_array2mem(interp,target, argc-1, argv + 1 );
 }
 
 static int target_array2mem(Jim_Interp *interp, target_t *target, int argc, Jim_Obj *const *argv)
@@ -3271,7 +3271,7 @@
 			break;
 		default:
 			Jim_SetResult(interp, Jim_NewEmptyStringObj(interp));
-			Jim_AppendStrings( interp, Jim_GetResult(interp), &quot;Invalid width param, must be 8/16/32&quot;, NULL );
+			Jim_AppendStrings(interp, Jim_GetResult(interp), &quot;Invalid width param, must be 8/16/32&quot;, NULL );
 			return JIM_ERR;
 	}
 	if (len == 0) {
@@ -3355,22 +3355,22 @@
 	return JIM_OK;
 }
 
-void target_all_handle_event( enum target_event e )
+void target_all_handle_event(enum target_event e )
 {
 	target_t *target;
 
-	LOG_DEBUG( &quot;**all*targets: event: %d, %s&quot;,
+	LOG_DEBUG(&quot;**all*targets: event: %d, %s&quot;,
 			   (int)e,
-			   Jim_Nvp_value2name_simple( nvp_target_event, e )-&gt;name );
+			   Jim_Nvp_value2name_simple(nvp_target_event, e )-&gt;name );
 
 	target = all_targets;
 	while (target){
-		target_handle_event( target, e );
+		target_handle_event(target, e );
 		target = target-&gt;next;
 	}
 }
 
-void target_handle_event( target_t *target, enum target_event e )
+void target_handle_event(target_t *target, enum target_event e )
 {
 	target_event_action_t *teap;
 	int done;
@@ -3378,27 +3378,27 @@
 	teap = target-&gt;event_action;
 
 	done = 0;
-	while ( teap ){
-		if ( teap-&gt;event == e ){
+	while (teap ){
+		if (teap-&gt;event == e ){
 			done = 1;
-			LOG_DEBUG( &quot;target: (%d) %s (%s) event: %d (%s) action: %s\n&quot;,
+			LOG_DEBUG(&quot;target: (%d) %s (%s) event: %d (%s) action: %s\n&quot;,
 					   target-&gt;target_number,
 					   target-&gt;cmd_name,
 					   target_get_name(target),
 					   e,
-					   Jim_Nvp_value2name_simple( nvp_target_event, e )-&gt;name,
-					   Jim_GetString( teap-&gt;body, NULL ) );
-			if (Jim_EvalObj( interp, teap-&gt;body ) != JIM_OK)
+					   Jim_Nvp_value2name_simple(nvp_target_event, e )-&gt;name,
+					   Jim_GetString(teap-&gt;body, NULL ) );
+			if (Jim_EvalObj(interp, teap-&gt;body ) != JIM_OK)
 			{
 				Jim_PrintErrorMessage(interp);
 			}
 		}
 		teap = teap-&gt;next;
 	}
-	if ( !done ){
-		LOG_DEBUG( &quot;event: %d %s - no action&quot;,
+	if (!done ){
+		LOG_DEBUG(&quot;event: %d %s - no action&quot;,
 				   e,
-				   Jim_Nvp_value2name_simple( nvp_target_event, e )-&gt;name );
+				   Jim_Nvp_value2name_simple(nvp_target_event, e )-&gt;name );
 	}
 }
 
@@ -3428,7 +3428,7 @@
 	{ .name = NULL, .value = -1 }
 };
 
-static int target_configure( Jim_GetOptInfo *goi, target_t *target )
+static int target_configure(Jim_GetOptInfo *goi, target_t *target )
 {
 	Jim_Nvp *n;
 	Jim_Obj *o;
@@ -3437,64 +3437,64 @@
 	int e;
 
 	/* parse config or cget options ... */
-	while ( goi-&gt;argc &gt; 0 ){
-		Jim_SetEmptyResult( goi-&gt;interp );
-		/* Jim_GetOpt_Debug( goi ); */
+	while (goi-&gt;argc &gt; 0 ){
+		Jim_SetEmptyResult(goi-&gt;interp );
+		/* Jim_GetOpt_Debug(goi ); */
 
-		if ( target-&gt;type-&gt;target_jim_configure ){
+		if (target-&gt;type-&gt;target_jim_configure ){
 			/* target defines a configure function */
 			/* target gets first dibs on parameters */
-			e = (*(target-&gt;type-&gt;target_jim_configure))( target, goi );
-			if ( e == JIM_OK ){
+			e = (*(target-&gt;type-&gt;target_jim_configure))(target, goi );
+			if (e == JIM_OK ){
 				/* more? */
 				continue;
 			}
-			if ( e == JIM_ERR ){
+			if (e == JIM_ERR ){
 				/* An error */
 				return e;
 			}
 			/* otherwise we 'continue' below */
 		}
-		e = Jim_GetOpt_Nvp( goi, nvp_config_opts, &amp;n );
-		if ( e != JIM_OK ){
-			Jim_GetOpt_NvpUnknown( goi, nvp_config_opts, 0 );
+		e = Jim_GetOpt_Nvp(goi, nvp_config_opts, &amp;n );
+		if (e != JIM_OK ){
+			Jim_GetOpt_NvpUnknown(goi, nvp_config_opts, 0 );
 			return e;
 		}
-		switch ( n-&gt;value ){
+		switch (n-&gt;value ){
 		case TCFG_TYPE:
 			/* not setable */
-			if ( goi-&gt;isconfigure ){
-				Jim_SetResult_sprintf( goi-&gt;interp, &quot;not setable: %s&quot;, n-&gt;name );
+			if (goi-&gt;isconfigure ){
+				Jim_SetResult_sprintf(goi-&gt;interp, &quot;not setable: %s&quot;, n-&gt;name );
 				return JIM_ERR;
 			} else {
 			no_params:
-				if ( goi-&gt;argc != 0 ){
-					Jim_WrongNumArgs( goi-&gt;interp, goi-&gt;argc, goi-&gt;argv, &quot;NO PARAMS&quot;);
+				if (goi-&gt;argc != 0 ){
+					Jim_WrongNumArgs(goi-&gt;interp, goi-&gt;argc, goi-&gt;argv, &quot;NO PARAMS&quot;);
 					return JIM_ERR;
 				}
 			}
-			Jim_SetResultString( goi-&gt;interp, target_get_name(target), -1 );
+			Jim_SetResultString(goi-&gt;interp, target_get_name(target), -1 );
 			/* loop for more */
 			break;
 		case TCFG_EVENT:
-			if ( goi-&gt;argc == 0 ){
-				Jim_WrongNumArgs( goi-&gt;interp, goi-&gt;argc, goi-&gt;argv, &quot;-event ?event-name? ...&quot;);
+			if (goi-&gt;argc == 0 ){
+				Jim_WrongNumArgs(goi-&gt;interp, goi-&gt;argc, goi-&gt;argv, &quot;-event ?event-name? ...&quot;);
 				return JIM_ERR;
 			}
 
-			e = Jim_GetOpt_Nvp( goi, nvp_target_event, &amp;n );
-			if ( e != JIM_OK ){
-				Jim_GetOpt_NvpUnknown( goi, nvp_target_event, 1 );
+			e = Jim_GetOpt_Nvp(goi, nvp_target_event, &amp;n );
+			if (e != JIM_OK ){
+				Jim_GetOpt_NvpUnknown(goi, nvp_target_event, 1 );
 				return e;
 			}
 
-			if ( goi-&gt;isconfigure ){
-				if ( goi-&gt;argc != 1 ){
-					Jim_WrongNumArgs( goi-&gt;interp, goi-&gt;argc, goi-&gt;argv, &quot;-event ?event-name? ?EVENT-BODY?&quot;);
+			if (goi-&gt;isconfigure ){
+				if (goi-&gt;argc != 1 ){
+					Jim_WrongNumArgs(goi-&gt;interp, goi-&gt;argc, goi-&gt;argv, &quot;-event ?event-name? ?EVENT-BODY?&quot;);
 					return JIM_ERR;
 				}
 			} else {
-				if ( goi-&gt;argc != 0 ){
+				if (goi-&gt;argc != 0 ){
 					Jim_WrongNumArgs(goi-&gt;interp, goi-&gt;argc, goi-&gt;argv, &quot;-event ?event-name?&quot;);
 					return JIM_ERR;
 				}
@@ -3505,24 +3505,24 @@
 
 				teap = target-&gt;event_action;
 				/* replace existing? */
-				while ( teap ){
-					if ( teap-&gt;event == (enum target_event)n-&gt;value ){
+				while (teap ){
+					if (teap-&gt;event == (enum target_event)n-&gt;value ){
 						break;
 					}
 					teap = teap-&gt;next;
 				}
 
-				if ( goi-&gt;isconfigure ){
-					if ( teap == NULL ){
+				if (goi-&gt;isconfigure ){
+					if (teap == NULL ){
 						/* create new */
-						teap = calloc( 1, sizeof(*teap) );
+						teap = calloc(1, sizeof(*teap) );
 					}
 					teap-&gt;event = n-&gt;value;
-					Jim_GetOpt_Obj( goi, &amp;o );
-					if ( teap-&gt;body ){
-						Jim_DecrRefCount( interp, teap-&gt;body );
+					Jim_GetOpt_Obj(goi, &amp;o );
+					if (teap-&gt;body ){
+						Jim_DecrRefCount(interp, teap-&gt;body );
 					}
-					teap-&gt;body  = Jim_DuplicateObj( goi-&gt;interp, o );
+					teap-&gt;body  = Jim_DuplicateObj(goi-&gt;interp, o );
 					/*
 					 * FIXME:
 					 *     Tcl/TK - &quot;tk events&quot; have a nice feature.
@@ -3533,7 +3533,7 @@
 					 *     The idea is: %N - target number
 					 *     The idea is: %E - event name.
 					 */
-					Jim_IncrRefCount( teap-&gt;body );
+					Jim_IncrRefCount(teap-&gt;body );
 
 					/* add to head of event list */
 					teap-&gt;next = target-&gt;event_action;
@@ -3541,10 +3541,10 @@
 					Jim_SetEmptyResult(goi-&gt;interp);
 				} else {
 					/* get */
-					if ( teap == NULL ){
-						Jim_SetEmptyResult( goi-&gt;interp );
+					if (teap == NULL ){
+						Jim_SetEmptyResult(goi-&gt;interp );
 					} else {
-						Jim_SetResult( goi-&gt;interp, Jim_DuplicateObj( goi-&gt;interp, teap-&gt;body ) );
+						Jim_SetResult(goi-&gt;interp, Jim_DuplicateObj(goi-&gt;interp, teap-&gt;body ) );
 					}
 				}
 			}
@@ -3552,67 +3552,67 @@
 			break;
 
 		case TCFG_WORK_AREA_VIRT:
-			if ( goi-&gt;isconfigure ){
+			if (goi-&gt;isconfigure ){
 				target_free_all_working_areas(target);
-				e = Jim_GetOpt_Wide( goi, &amp;w );
-				if ( e != JIM_OK ){
+				e = Jim_GetOpt_Wide(goi, &amp;w );
+				if (e != JIM_OK ){
 					return e;
 				}
 				target-&gt;working_area_virt = w;
 			} else {
-				if ( goi-&gt;argc != 0 ){
+				if (goi-&gt;argc != 0 ){
 					goto no_params;
 				}
 			}
-			Jim_SetResult( interp, Jim_NewIntObj( goi-&gt;interp, target-&gt;working_area_virt ) );
+			Jim_SetResult(interp, Jim_NewIntObj(goi-&gt;interp, target-&gt;working_area_virt ) );
 			/* loop for more */
 			break;
 
 		case TCFG_WORK_AREA_PHYS:
-			if ( goi-&gt;isconfigure ){
+			if (goi-&gt;isconfigure ){
 				target_free_all_working_areas(target);
-				e = Jim_GetOpt_Wide( goi, &amp;w );
-				if ( e != JIM_OK ){
+				e = Jim_GetOpt_Wide(goi, &amp;w );
+				if (e != JIM_OK ){
 					return e;
 				}
 				target-&gt;working_area_phys = w;
 			} else {
-				if ( goi-&gt;argc != 0 ){
+				if (goi-&gt;argc != 0 ){
 					goto no_params;
 				}
 			}
-			Jim_SetResult( interp, Jim_NewIntObj( goi-&gt;interp, target-&gt;working_area_phys ) );
+			Jim_SetResult(interp, Jim_NewIntObj(goi-&gt;interp, target-&gt;working_area_phys ) );
 			/* loop for more */
 			break;
 
 		case TCFG_WORK_AREA_SIZE:
-			if ( goi-&gt;isconfigure ){
+			if (goi-&gt;isconfigure ){
 				target_free_all_working_areas(target);
-				e = Jim_GetOpt_Wide( goi, &amp;w );
-				if ( e != JIM_OK ){
+				e = Jim_GetOpt_Wide(goi, &amp;w );
+				if (e != JIM_OK ){
 					return e;
 				}
 				target-&gt;working_area_size = w;
 			} else {
-				if ( goi-&gt;argc != 0 ){
+				if (goi-&gt;argc != 0 ){
 					goto no_params;
 				}
 			}
-			Jim_SetResult( interp, Jim_NewIntObj( goi-&gt;interp, target-&gt;working_area_size ) );
+			Jim_SetResult(interp, Jim_NewIntObj(goi-&gt;interp, target-&gt;working_area_size ) );
 			/* loop for more */
 			break;
 
 		case TCFG_WORK_AREA_BACKUP:
-			if ( goi-&gt;isconfigure ){
+			if (goi-&gt;isconfigure ){
 				target_free_all_working_areas(target);
-				e = Jim_GetOpt_Wide( goi, &amp;w );
-				if ( e != JIM_OK ){
+				e = Jim_GetOpt_Wide(goi, &amp;w );
+				if (e != JIM_OK ){
 					return e;
 				}
 				/* make this exactly 1 or 0 */
 				target-&gt;backup_working_area = (!!w);
 			} else {
-				if ( goi-&gt;argc != 0 ){
+				if (goi-&gt;argc != 0 ){
 					goto no_params;
 				}
 			}
@@ -3621,73 +3621,73 @@
 			break;
 
 		case TCFG_ENDIAN:
-			if ( goi-&gt;isconfigure ){
-				e = Jim_GetOpt_Nvp( goi, nvp_target_endian, &amp;n );
-				if ( e != JIM_OK ){
-					Jim_GetOpt_NvpUnknown( goi, nvp_target_endian, 1 );
+			if (goi-&gt;isconfigure ){
+				e = Jim_GetOpt_Nvp(goi, nvp_target_endian, &amp;n );
+				if (e != JIM_OK ){
+					Jim_GetOpt_NvpUnknown(goi, nvp_target_endian, 1 );
 					return e;
 				}
 				target-&gt;endianness = n-&gt;value;
 			} else {
-				if ( goi-&gt;argc != 0 ){
+				if (goi-&gt;argc != 0 ){
 					goto no_params;
 				}
 			}
-			n = Jim_Nvp_value2name_simple( nvp_target_endian, target-&gt;endianness );
-			if ( n-&gt;name == NULL ){
+			n = Jim_Nvp_value2name_simple(nvp_target_endian, target-&gt;endianness );
+			if (n-&gt;name == NULL ){
 				target-&gt;endianness = TARGET_LITTLE_ENDIAN;
-				n = Jim_Nvp_value2name_simple( nvp_target_endian, target-&gt;endianness );
+				n = Jim_Nvp_value2name_simple(nvp_target_endian, target-&gt;endianness );
 			}
-			Jim_SetResultString( goi-&gt;interp, n-&gt;name, -1 );
+			Jim_SetResultString(goi-&gt;interp, n-&gt;name, -1 );
 			/* loop for more */
 			break;
 
 		case TCFG_VARIANT:
-			if ( goi-&gt;isconfigure ){
-				if ( goi-&gt;argc &lt; 1 ){
-					Jim_SetResult_sprintf( goi-&gt;interp,
+			if (goi-&gt;isconfigure ){
+				if (goi-&gt;argc &lt; 1 ){
+					Jim_SetResult_sprintf(goi-&gt;interp,
 										   &quot;%s ?STRING?&quot;,
 										   n-&gt;name );
 					return JIM_ERR;
 				}
-				if ( target-&gt;variant ){
+				if (target-&gt;variant ){
 					free((void *)(target-&gt;variant));
 				}
-				e = Jim_GetOpt_String( goi, &amp;cp, NULL );
+				e = Jim_GetOpt_String(goi, &amp;cp, NULL );
 				target-&gt;variant = strdup(cp);
 			} else {
-				if ( goi-&gt;argc != 0 ){
+				if (goi-&gt;argc != 0 ){
 					goto no_params;
 				}
 			}
-			Jim_SetResultString( goi-&gt;interp, target-&gt;variant,-1 );
+			Jim_SetResultString(goi-&gt;interp, target-&gt;variant,-1 );
 			/* loop for more */
 			break;
 		case TCFG_CHAIN_POSITION:
-			if ( goi-&gt;isconfigure ){
+			if (goi-&gt;isconfigure ){
 				Jim_Obj *o;
 				jtag_tap_t *tap;
 				target_free_all_working_areas(target);
-				e = Jim_GetOpt_Obj( goi, &amp;o );
-				if ( e != JIM_OK ){
+				e = Jim_GetOpt_Obj(goi, &amp;o );
+				if (e != JIM_OK ){
 					return e;
 				}
-				tap = jtag_tap_by_jim_obj( goi-&gt;interp, o );
-				if ( tap == NULL ){
+				tap = jtag_tap_by_jim_obj(goi-&gt;interp, o );
+				if (tap == NULL ){
 					return JIM_ERR;
 				}
 				/* make this exactly 1 or 0 */
 				target-&gt;tap = tap;
 			} else {
-				if ( goi-&gt;argc != 0 ){
+				if (goi-&gt;argc != 0 ){
 					goto no_params;
 				}
 			}
-			Jim_SetResultString( interp, target-&gt;tap-&gt;dotted_name, -1 );
+			Jim_SetResultString(interp, target-&gt;tap-&gt;dotted_name, -1 );
 			/* loop for more e*/
 			break;
 		}
-	} /* while ( goi-&gt;argc ) */
+	} /* while (goi-&gt;argc ) */
 
 
 		/* done - we return */
@@ -3695,7 +3695,7 @@
 }
 
 /** this is the 'tcl' handler for the target specific command */
-static int tcl_target_func( Jim_Interp *interp, int argc, Jim_Obj *const *argv )
+static int tcl_target_func(Jim_Interp *interp, int argc, Jim_Obj *const *argv )
 {
 	Jim_GetOptInfo goi;
 	jim_wide a,b,c;
@@ -3749,36 +3749,36 @@
 	};
 
 	/* go past the &quot;command&quot; */
-	Jim_GetOpt_Setup( &amp;goi, interp, argc-1, argv + 1 );
+	Jim_GetOpt_Setup(&amp;goi, interp, argc-1, argv + 1 );
 
-	target = Jim_CmdPrivData( goi.interp );
+	target = Jim_CmdPrivData(goi.interp );
 	cmd_ctx = Jim_GetAssocData(goi.interp, &quot;context&quot;);
 
 	/* commands here are in an NVP table */
-	e = Jim_GetOpt_Nvp( &amp;goi, target_options, &amp;n );
-	if ( e != JIM_OK ){
-		Jim_GetOpt_NvpUnknown( &amp;goi, target_options, 0 );
+	e = Jim_GetOpt_Nvp(&amp;goi, target_options, &amp;n );
+	if (e != JIM_OK ){
+		Jim_GetOpt_NvpUnknown(&amp;goi, target_options, 0 );
 		return e;
 	}
 	/* Assume blank result */
-	Jim_SetEmptyResult( goi.interp );
+	Jim_SetEmptyResult(goi.interp );
 
-	switch ( n-&gt;value ){
+	switch (n-&gt;value ){
 	case TS_CMD_CONFIGURE:
-		if ( goi.argc &lt; 2 ){
-			Jim_WrongNumArgs( goi.interp, goi.argc, goi.argv, &quot;missing: -option VALUE ...&quot;);
+		if (goi.argc &lt; 2 ){
+			Jim_WrongNumArgs(goi.interp, goi.argc, goi.argv, &quot;missing: -option VALUE ...&quot;);
 			return JIM_ERR;
 		}
 		goi.isconfigure = 1;
-		return target_configure( &amp;goi, target );
+		return target_configure(&amp;goi, target );
 	case TS_CMD_CGET:
 		// some things take params
-		if ( goi.argc &lt; 1 ){
-			Jim_WrongNumArgs( goi.interp, 0, goi.argv, &quot;missing: ?-option?&quot;);
+		if (goi.argc &lt; 1 ){
+			Jim_WrongNumArgs(goi.interp, 0, goi.argv, &quot;missing: ?-option?&quot;);
 			return JIM_ERR;
 		}
 		goi.isconfigure = 0;
-		return target_configure( &amp;goi, target );
+		return target_configure(&amp;goi, target );
 		break;
 	case TS_CMD_MWW:
 	case TS_CMD_MWH:
@@ -3789,50 +3789,50 @@
 		 * argv[3] = optional count.
 		 */
 
-		if ( (goi.argc == 2) || (goi.argc == 3) ){
+		if ((goi.argc == 2) || (goi.argc == 3) ){
 			/* all is well */
 		} else {
 		mwx_error:
-			Jim_SetResult_sprintf( goi.interp, &quot;expected: %s ADDR DATA [COUNT]&quot;, n-&gt;name );
+			Jim_SetResult_sprintf(goi.interp, &quot;expected: %s ADDR DATA [COUNT]&quot;, n-&gt;name );
 			return JIM_ERR;
 		}
 
-		e = Jim_GetOpt_Wide( &amp;goi, &amp;a );
-		if ( e != JIM_OK ){
+		e = Jim_GetOpt_Wide(&amp;goi, &amp;a );
+		if (e != JIM_OK ){
 			goto mwx_error;
 		}
 
-		e = Jim_GetOpt_Wide( &amp;goi, &amp;b );
-		if ( e != JIM_OK ){
+		e = Jim_GetOpt_Wide(&amp;goi, &amp;b );
+		if (e != JIM_OK ){
 			goto mwx_error;
 		}
 		if (goi.argc == 3) {
-			e = Jim_GetOpt_Wide( &amp;goi, &amp;c );
-			if ( e != JIM_OK ){
+			e = Jim_GetOpt_Wide(&amp;goi, &amp;c );
+			if (e != JIM_OK ){
 				goto mwx_error;
 			}
 		} else {
 			c = 1;
 		}
 
-		switch ( n-&gt;value ){
+		switch (n-&gt;value ){
 		case TS_CMD_MWW:
-			target_buffer_set_u32( target, target_buf, b );
+			target_buffer_set_u32(target, target_buf, b );
 			b = 4;
 			break;
 		case TS_CMD_MWH:
-			target_buffer_set_u16( target, target_buf, b );
+			target_buffer_set_u16(target, target_buf, b );
 			b = 2;
 			break;
 		case TS_CMD_MWB:
-			target_buffer_set_u8( target, target_buf, b );
+			target_buffer_set_u8(target, target_buf, b );
 			b = 1;
 			break;
 		}
-		for ( x = 0 ; x &lt; c ; x++ ){
-			e = target_write_memory( target, a, b, 1, target_buf );
-			if ( e != ERROR_OK ){
-				Jim_SetResult_sprintf( interp, &quot;Error writing @ 0x%08x: %d\n&quot;, (int)(a), e );
+		for (x = 0 ; x &lt; c ; x++ ){
+			e = target_write_memory(target, a, b, 1, target_buf );
+			if (e != ERROR_OK ){
+				Jim_SetResult_sprintf(interp, &quot;Error writing @ 0x%08x: %d\n&quot;, (int)(a), e );
 				return JIM_ERR;
 			}
 			/* b = width */
@@ -3849,24 +3849,24 @@
 		 * argv[1] = address
 		 * argv[2] = optional count
 		 */
-		if ( (goi.argc == 2) || (goi.argc == 3) ){
-			Jim_SetResult_sprintf( goi.interp, &quot;expected: %s ADDR [COUNT]&quot;, n-&gt;name );
+		if ((goi.argc == 2) || (goi.argc == 3) ){
+			Jim_SetResult_sprintf(goi.interp, &quot;expected: %s ADDR [COUNT]&quot;, n-&gt;name );
 			return JIM_ERR;
 		}
-		e = Jim_GetOpt_Wide( &amp;goi, &amp;a );
-		if ( e != JIM_OK ){
+		e = Jim_GetOpt_Wide(&amp;goi, &amp;a );
+		if (e != JIM_OK ){
 			return JIM_ERR;
 		}
-		if ( goi.argc ){
-			e = Jim_GetOpt_Wide( &amp;goi, &amp;c );
-			if ( e != JIM_OK ){
+		if (goi.argc ){
+			e = Jim_GetOpt_Wide(&amp;goi, &amp;c );
+			if (e != JIM_OK ){
 				return JIM_ERR;
 			}
 		} else {
 			c = 1;
 		}
 		b = 1; /* shut up gcc */
-		switch ( n-&gt;value ){
+		switch (n-&gt;value ){
 		case TS_CMD_MDW:
 			b =  4;
 			break;
@@ -3881,51 +3881,51 @@
 		/* convert to &quot;bytes&quot; */
 		c = c * b;
 		/* count is now in 'BYTES' */
-		while ( c &gt; 0 ){
+		while (c &gt; 0 ){
 			y = c;
-			if ( y &gt; 16 ){
+			if (y &gt; 16 ){
 				y = 16;
 			}
-			e = target_read_memory( target, a, b, y / b, target_buf );
-			if ( e != ERROR_OK ){
-				Jim_SetResult_sprintf( interp, &quot;error reading target @ 0x%08lx&quot;, (int)(a) );
+			e = target_read_memory(target, a, b, y / b, target_buf );
+			if (e != ERROR_OK ){
+				Jim_SetResult_sprintf(interp, &quot;error reading target @ 0x%08lx&quot;, (int)(a) );
 				return JIM_ERR;
 			}
 
-			Jim_fprintf( interp, interp-&gt;cookie_stdout, &quot;0x%08x &quot;, (int)(a) );
-			switch ( b ){
+			Jim_fprintf(interp, interp-&gt;cookie_stdout, &quot;0x%08x &quot;, (int)(a) );
+			switch (b ){
 			case 4:
-				for ( x = 0 ; (x &lt; 16) &amp;&amp; (x &lt; y) ; x += 4 ){
-					z = target_buffer_get_u32( target, &amp;(target_buf[ x * 4 ]) );
-					Jim_fprintf( interp, interp-&gt;cookie_stdout, &quot;%08x &quot;, (int)(z) );
+				for (x = 0 ; (x &lt; 16) &amp;&amp; (x &lt; y) ; x += 4 ){
+					z = target_buffer_get_u32(target, &amp;(target_buf[ x * 4 ]) );
+					Jim_fprintf(interp, interp-&gt;cookie_stdout, &quot;%08x &quot;, (int)(z) );
 				}
-				for ( ; (x &lt; 16) ; x += 4 ){
-					Jim_fprintf( interp, interp-&gt;cookie_stdout, &quot;         &quot; );
+				for (; (x &lt; 16) ; x += 4 ){
+					Jim_fprintf(interp, interp-&gt;cookie_stdout, &quot;         &quot; );
 				}
 				break;
 			case 2:
-				for ( x = 0 ; (x &lt; 16) &amp;&amp; (x &lt; y) ; x += 2 ){
-					z = target_buffer_get_u16( target, &amp;(target_buf[ x * 2 ]) );
-					Jim_fprintf( interp, interp-&gt;cookie_stdout, &quot;%04x &quot;, (int)(z) );
+				for (x = 0 ; (x &lt; 16) &amp;&amp; (x &lt; y) ; x += 2 ){
+					z = target_buffer_get_u16(target, &amp;(target_buf[ x * 2 ]) );
+					Jim_fprintf(interp, interp-&gt;cookie_stdout, &quot;%04x &quot;, (int)(z) );
 				}
-				for ( ; (x &lt; 16) ; x += 2 ){
-					Jim_fprintf( interp, interp-&gt;cookie_stdout, &quot;     &quot; );
+				for (; (x &lt; 16) ; x += 2 ){
+					Jim_fprintf(interp, interp-&gt;cookie_stdout, &quot;     &quot; );
 				}
 				break;
 			case 1:
 			default:
-				for ( x = 0 ; (x &lt; 16) &amp;&amp; (x &lt; y) ; x += 1 ){
-					z = target_buffer_get_u8( target, &amp;(target_buf[ x * 4 ]) );
-					Jim_fprintf( interp, interp-&gt;cookie_stdout, &quot;%02x &quot;, (int)(z) );
+				for (x = 0 ; (x &lt; 16) &amp;&amp; (x &lt; y) ; x += 1 ){
+					z = target_buffer_get_u8(target, &amp;(target_buf[ x * 4 ]) );
+					Jim_fprintf(interp, interp-&gt;cookie_stdout, &quot;%02x &quot;, (int)(z) );
 				}
-				for ( ; (x &lt; 16) ; x += 1 ){
-					Jim_fprintf( interp, interp-&gt;cookie_stdout, &quot;   &quot; );
+				for (; (x &lt; 16) ; x += 1 ){
+					Jim_fprintf(interp, interp-&gt;cookie_stdout, &quot;   &quot; );
 				}
 				break;
 			}
 			/* ascii-ify the bytes */
-			for ( x = 0 ; x &lt; y ; x++ ){
-				if ( (target_buf[x] &gt;= 0x20) &amp;&amp;
+			for (x = 0 ; x &lt; y ; x++ ){
+				if ((target_buf[x] &gt;= 0x20) &amp;&amp;
 					(target_buf[x] &lt;= 0x7e) ){
 					/* good */
 				} else {
@@ -3934,70 +3934,70 @@
 				}
 			}
 			/* space pad  */
-			while ( x &lt; 16 ){
+			while (x &lt; 16 ){
 				target_buf[x] = ' ';
 				x++;
 			}
 			/* terminate */
 			target_buf[16] = 0;
 			/* print - with a newline */
-			Jim_fprintf( interp, interp-&gt;cookie_stdout, &quot;%s\n&quot;, target_buf );
+			Jim_fprintf(interp, interp-&gt;cookie_stdout, &quot;%s\n&quot;, target_buf );
 			/* NEXT... */
 			c -= 16;
 			a += 16;
 		}
 		return JIM_OK;
 	case TS_CMD_MEM2ARRAY:
-		return target_mem2array( goi.interp, target, goi.argc, goi.argv );
+		return target_mem2array(goi.interp, target, goi.argc, goi.argv );
 		break;
 	case TS_CMD_ARRAY2MEM:
-		return target_array2mem( goi.interp, target, goi.argc, goi.argv );
+		return target_array2mem(goi.interp, target, goi.argc, goi.argv );
 		break;
 	case TS_CMD_EXAMINE:
-		if ( goi.argc ){
-			Jim_WrongNumArgs( goi.interp, 2, argv, &quot;[no parameters]&quot;);
+		if (goi.argc ){
+			Jim_WrongNumArgs(goi.interp, 2, argv, &quot;[no parameters]&quot;);
 			return JIM_ERR;
 		}
 		if (!target-&gt;tap-&gt;enabled)
 			goto err_tap_disabled;
-		e = target-&gt;type-&gt;examine( target );
-		if ( e != ERROR_OK ){
-			Jim_SetResult_sprintf( interp, &quot;examine-fails: %d&quot;, e );
+		e = target-&gt;type-&gt;examine(target );
+		if (e != ERROR_OK ){
+			Jim_SetResult_sprintf(interp, &quot;examine-fails: %d&quot;, e );
 			return JIM_ERR;
 		}
 		return JIM_OK;
 	case TS_CMD_POLL:
-		if ( goi.argc ){
-			Jim_WrongNumArgs( goi.interp, 2, argv, &quot;[no parameters]&quot;);
+		if (goi.argc ){
+			Jim_WrongNumArgs(goi.interp, 2, argv, &quot;[no parameters]&quot;);
 			return JIM_ERR;
 		}
 		if (!target-&gt;tap-&gt;enabled)
 			goto err_tap_disabled;
-		if ( !(target_was_examined(target)) ){
+		if (!(target_was_examined(target)) ){
 			e = ERROR_TARGET_NOT_EXAMINED;
 		} else {
-			e = target-&gt;type-&gt;poll( target );
+			e = target-&gt;type-&gt;poll(target );
 		}
-		if ( e != ERROR_OK ){
-			Jim_SetResult_sprintf( interp, &quot;poll-fails: %d&quot;, e );
+		if (e != ERROR_OK ){
+			Jim_SetResult_sprintf(interp, &quot;poll-fails: %d&quot;, e );
 			return JIM_ERR;
 		} else {
 			return JIM_OK;
 		}
 		break;
 	case TS_CMD_RESET:
-		if ( goi.argc != 2 ){
-			Jim_WrongNumArgs( interp, 2, argv, &quot;t | f|assert | deassert BOOL&quot;);
+		if (goi.argc != 2 ){
+			Jim_WrongNumArgs(interp, 2, argv, &quot;t | f|assert | deassert BOOL&quot;);
 			return JIM_ERR;
 		}
-		e = Jim_GetOpt_Nvp( &amp;goi, nvp_assert, &amp;n );
-		if ( e != JIM_OK ){
-			Jim_GetOpt_NvpUnknown( &amp;goi, nvp_assert, 1 );
+		e = Jim_GetOpt_Nvp(&amp;goi, nvp_assert, &amp;n );
+		if (e != JIM_OK ){
+			Jim_GetOpt_NvpUnknown(&amp;goi, nvp_assert, 1 );
 			return e;
 		}
 		/* the halt or not param */
-		e = Jim_GetOpt_Wide( &amp;goi, &amp;a);
-		if ( e != JIM_OK ){
+		e = Jim_GetOpt_Wide(&amp;goi, &amp;a);
+		if (e != JIM_OK ){
 			return e;
 		}
 		if (!target-&gt;tap-&gt;enabled)
@@ -4008,41 +4008,41 @@
 		target_free_all_working_areas_restore(target, 0);
 
 		/* do the assert */
-		if ( n-&gt;value == NVP_ASSERT ){
-			target-&gt;type-&gt;assert_reset( target );
+		if (n-&gt;value == NVP_ASSERT ){
+			target-&gt;type-&gt;assert_reset(target );
 		} else {
-			target-&gt;type-&gt;deassert_reset( target );
+			target-&gt;type-&gt;deassert_reset(target );
 		}
 		return JIM_OK;
 	case TS_CMD_HALT:
-		if ( goi.argc ){
-			Jim_WrongNumArgs( goi.interp, 0, argv, &quot;halt [no parameters]&quot;);
+		if (goi.argc ){
+			Jim_WrongNumArgs(goi.interp, 0, argv, &quot;halt [no parameters]&quot;);
 			return JIM_ERR;
 		}
 		if (!target-&gt;tap-&gt;enabled)
 			goto err_tap_disabled;
-		target-&gt;type-&gt;halt( target );
+		target-&gt;type-&gt;halt(target );
 		return JIM_OK;
 	case TS_CMD_WAITSTATE:
 		/* params:  &lt;name&gt;  statename timeoutmsecs */
-		if ( goi.argc != 2 ){
-			Jim_SetResult_sprintf( goi.interp, &quot;%s STATENAME TIMEOUTMSECS&quot;, n-&gt;name );
+		if (goi.argc != 2 ){
+			Jim_SetResult_sprintf(goi.interp, &quot;%s STATENAME TIMEOUTMSECS&quot;, n-&gt;name );
 			return JIM_ERR;
 		}
-		e = Jim_GetOpt_Nvp( &amp;goi, nvp_target_state, &amp;n );
-		if ( e != JIM_OK ){
-			Jim_GetOpt_NvpUnknown( &amp;goi, nvp_target_state,1 );
+		e = Jim_GetOpt_Nvp(&amp;goi, nvp_target_state, &amp;n );
+		if (e != JIM_OK ){
+			Jim_GetOpt_NvpUnknown(&amp;goi, nvp_target_state,1 );
 			return e;
 		}
-		e = Jim_GetOpt_Wide( &amp;goi, &amp;a );
-		if ( e != JIM_OK ){
+		e = Jim_GetOpt_Wide(&amp;goi, &amp;a );
+		if (e != JIM_OK ){
 			return e;
 		}
 		if (!target-&gt;tap-&gt;enabled)
 			goto err_tap_disabled;
-		e = target_wait_state( target, n-&gt;value, a );
-		if ( e != ERROR_OK ){
-			Jim_SetResult_sprintf( goi.interp,
+		e = target_wait_state(target, n-&gt;value, a );
+		if (e != ERROR_OK ){
+			Jim_SetResult_sprintf(goi.interp,
 								   &quot;target: %s wait %s fails (%d) %s&quot;,
 								   target-&gt;cmd_name,
 								   n-&gt;name,
@@ -4058,40 +4058,40 @@
 		{
 			target_event_action_t *teap;
 			teap = target-&gt;event_action;
-			command_print( cmd_ctx, &quot;Event actions for target (%d) %s\n&quot;,
+			command_print(cmd_ctx, &quot;Event actions for target (%d) %s\n&quot;,
 						   target-&gt;target_number,
 						   target-&gt;cmd_name );
-			command_print( cmd_ctx, &quot;%-25s | Body&quot;, &quot;Event&quot;);
-			command_print( cmd_ctx, &quot;------------------------- | ----------------------------------------&quot;);
-			while ( teap ){
-				command_print( cmd_ctx,
+			command_print(cmd_ctx, &quot;%-25s | Body&quot;, &quot;Event&quot;);
+			command_print(cmd_ctx, &quot;------------------------- | ----------------------------------------&quot;);
+			while (teap ){
+				command_print(cmd_ctx,
 							   &quot;%-25s | %s&quot;,
-							   Jim_Nvp_value2name_simple( nvp_target_event, teap-&gt;event )-&gt;name,
-							   Jim_GetString( teap-&gt;body, NULL ) );
+							   Jim_Nvp_value2name_simple(nvp_target_event, teap-&gt;event )-&gt;name,
+							   Jim_GetString(teap-&gt;body, NULL ) );
 				teap = teap-&gt;next;
 			}
-			command_print( cmd_ctx, &quot;***END***&quot;);
+			command_print(cmd_ctx, &quot;***END***&quot;);
 			return JIM_OK;
 		}
 	case TS_CMD_CURSTATE:
-		if ( goi.argc != 0 ){
-			Jim_WrongNumArgs( goi.interp, 0, argv, &quot;[no parameters]&quot;);
+		if (goi.argc != 0 ){
+			Jim_WrongNumArgs(goi.interp, 0, argv, &quot;[no parameters]&quot;);
 			return JIM_ERR;
 		}
-		Jim_SetResultString( goi.interp,
+		Jim_SetResultString(goi.interp,
 							 Jim_Nvp_value2name_simple(nvp_target_state,target-&gt;state)-&gt;name,-1);
 		return JIM_OK;
 	case TS_CMD_INVOKE_EVENT:
-		if ( goi.argc != 1 ){
-			Jim_SetResult_sprintf( goi.interp, &quot;%s ?EVENTNAME?&quot;,n-&gt;name);
+		if (goi.argc != 1 ){
+			Jim_SetResult_sprintf(goi.interp, &quot;%s ?EVENTNAME?&quot;,n-&gt;name);
 			return JIM_ERR;
 		}
-		e = Jim_GetOpt_Nvp( &amp;goi, nvp_target_event, &amp;n );
-		if ( e != JIM_OK ){
-			Jim_GetOpt_NvpUnknown( &amp;goi, nvp_target_event, 1 );
+		e = Jim_GetOpt_Nvp(&amp;goi, nvp_target_event, &amp;n );
+		if (e != JIM_OK ){
+			Jim_GetOpt_NvpUnknown(&amp;goi, nvp_target_event, 1 );
 			return e;
 		}
-		target_handle_event( target, n-&gt;value );
+		target_handle_event(target, n-&gt;value );
 		return JIM_OK;
 	}
 	return JIM_ERR;
@@ -4101,7 +4101,7 @@
 	return JIM_ERR;
 }
 
-static int target_create( Jim_GetOptInfo *goi )
+static int target_create(Jim_GetOptInfo *goi )
 {
 	Jim_Obj *new_cmd;
 	Jim_Cmd *cmd;
@@ -4113,41 +4113,41 @@
 	struct command_context_s *cmd_ctx;
 
 	cmd_ctx = Jim_GetAssocData(goi-&gt;interp, &quot;context&quot;);
-	if ( goi-&gt;argc &lt; 3 ){
-		Jim_WrongNumArgs( goi-&gt;interp, 1, goi-&gt;argv, &quot;?name? ?type? ..options...&quot;);
+	if (goi-&gt;argc &lt; 3 ){
+		Jim_WrongNumArgs(goi-&gt;interp, 1, goi-&gt;argv, &quot;?name? ?type? ..options...&quot;);
 		return JIM_ERR;
 	}
 
 	/* COMMAND */
-	Jim_GetOpt_Obj( goi, &amp;new_cmd );
+	Jim_GetOpt_Obj(goi, &amp;new_cmd );
 	/* does this command exist? */
-	cmd = Jim_GetCommand( goi-&gt;interp, new_cmd, JIM_ERRMSG );
-	if ( cmd ){
-		cp = Jim_GetString( new_cmd, NULL );
+	cmd = Jim_GetCommand(goi-&gt;interp, new_cmd, JIM_ERRMSG );
+	if (cmd ){
+		cp = Jim_GetString(new_cmd, NULL );
 		Jim_SetResult_sprintf(goi-&gt;interp, &quot;Command/target: %s Exists&quot;, cp);
 		return JIM_ERR;
 	}
 
 	/* TYPE */
-	e = Jim_GetOpt_String( goi, &amp;cp2, NULL );
+	e = Jim_GetOpt_String(goi, &amp;cp2, NULL );
 	cp = cp2;
 	/* now does target type exist */
-	for ( x = 0 ; target_types[x] ; x++ ){
-		if ( 0 == strcmp( cp, target_types[x]-&gt;name ) ){
+	for (x = 0 ; target_types[x] ; x++ ){
+		if (0 == strcmp(cp, target_types[x]-&gt;name ) ){
 			/* found */
 			break;
 		}
 	}
-	if ( target_types[x] == NULL ){
-		Jim_SetResult_sprintf( goi-&gt;interp, &quot;Unknown target type %s, try one of &quot;, cp );
-		for ( x = 0 ; target_types[x] ; x++ ){
-			if ( target_types[x + 1] ){
-				Jim_AppendStrings( goi-&gt;interp,
+	if (target_types[x] == NULL ){
+		Jim_SetResult_sprintf(goi-&gt;interp, &quot;Unknown target type %s, try one of &quot;, cp );
+		for (x = 0 ; target_types[x] ; x++ ){
+			if (target_types[x + 1] ){
+				Jim_AppendStrings(goi-&gt;interp,
 								   Jim_GetResult(goi-&gt;interp),
 								   target_types[x]-&gt;name,
 								   &quot;, &quot;, NULL);
 			} else {
-				Jim_AppendStrings( goi-&gt;interp,
+				Jim_AppendStrings(goi-&gt;interp,
 								   Jim_GetResult(goi-&gt;interp),
 								   &quot; or &quot;,
 								   target_types[x]-&gt;name,NULL );
@@ -4164,7 +4164,7 @@
 	/* allocate memory for each unique target type */
 	target-&gt;type = (target_type_t*)calloc(1,sizeof(target_type_t));
 
-	memcpy( target-&gt;type, target_types[x], sizeof(target_type_t));
+	memcpy(target-&gt;type, target_types[x], sizeof(target_type_t));
 
 	/* will be set by &quot;-endian&quot; */
 	target-&gt;endianness = TARGET_ENDIAN_UNKNOWN;
@@ -4201,21 +4201,21 @@
 
 	/* Do the rest as &quot;configure&quot; options */
 	goi-&gt;isconfigure = 1;
-	e = target_configure( goi, target);
+	e = target_configure(goi, target);
 
 	if (target-&gt;tap == NULL)
 	{
-		Jim_SetResultString( interp, &quot;-chain-position required when creating target&quot;, -1);
+		Jim_SetResultString(interp, &quot;-chain-position required when creating target&quot;, -1);
 		e = JIM_ERR;
 	}
 
-	if ( e != JIM_OK ){
-		free( target-&gt;type );
-		free( target );
+	if (e != JIM_OK ){
+		free(target-&gt;type );
+		free(target );
 		return e;
 	}
 
-	if ( target-&gt;endianness == TARGET_ENDIAN_UNKNOWN ){
+	if (target-&gt;endianness == TARGET_ENDIAN_UNKNOWN ){
 		/* default endian to little if not specified */
 		target-&gt;endianness = TARGET_LITTLE_ENDIAN;
 	}
@@ -4225,28 +4225,28 @@
 		target-&gt;variant = strdup(&quot;&quot;);
 
 	/* create the target specific commands */
-	if ( target-&gt;type-&gt;register_commands ){
-		(*(target-&gt;type-&gt;register_commands))( cmd_ctx );
+	if (target-&gt;type-&gt;register_commands ){
+		(*(target-&gt;type-&gt;register_commands))(cmd_ctx );
 	}
-	if ( target-&gt;type-&gt;target_create ){
-		(*(target-&gt;type-&gt;target_create))( target, goi-&gt;interp );
+	if (target-&gt;type-&gt;target_create ){
+		(*(target-&gt;type-&gt;target_create))(target, goi-&gt;interp );
 	}
 
 	/* append to end of list */
 	{
 		target_t **tpp;
 		tpp = &amp;(all_targets);
-		while ( *tpp ){
-			tpp = &amp;( (*tpp)-&gt;next );
+		while (*tpp ){
+			tpp = &amp;((*tpp)-&gt;next );
 		}
 		*tpp = target;
 	}
 
-	cp = Jim_GetString( new_cmd, NULL );
+	cp = Jim_GetString(new_cmd, NULL );
 	target-&gt;cmd_name = strdup(cp);
 
 	/* now - create the new target name command */
-	e = Jim_CreateCommand( goi-&gt;interp,
+	e = Jim_CreateCommand(goi-&gt;interp,
 						   /* name */
 						   cp,
 						   tcl_target_func, /* C function */
@@ -4256,7 +4256,7 @@
 	return e;
 }
 
-static int jim_target( Jim_Interp *interp, int argc, Jim_Obj *const *argv )
+static int jim_target(Jim_Interp *interp, int argc, Jim_Obj *const *argv )
 {
 	int x,r,e;
 	jim_wide w;
@@ -4281,18 +4281,18 @@
 	LOG_DEBUG(&quot;Target command params:&quot;);
 	LOG_DEBUG(&quot;%s&quot;, Jim_Debug_ArgvString(interp, argc, argv));
 
-	cmd_ctx = Jim_GetAssocData( interp, &quot;context&quot; );
+	cmd_ctx = Jim_GetAssocData(interp, &quot;context&quot; );
 
-	Jim_GetOpt_Setup( &amp;goi, interp, argc-1, argv + 1 );
+	Jim_GetOpt_Setup(&amp;goi, interp, argc-1, argv + 1 );
 
-	if ( goi.argc == 0 ){
+	if (goi.argc == 0 ){
 		Jim_WrongNumArgs(interp, 1, argv, &quot;missing: command ...&quot;);
 		return JIM_ERR;
 	}
 
-	/* Jim_GetOpt_Debug( &amp;goi ); */
-	r = Jim_GetOpt_Enum( &amp;goi, target_cmds, &amp;x   );
-	if ( r != JIM_OK ){
+	/* Jim_GetOpt_Debug(&amp;goi ); */
+	r = Jim_GetOpt_Enum(&amp;goi, target_cmds, &amp;x   );
+	if (r != JIM_OK ){
 		return r;
 	}
 
@@ -4301,71 +4301,71 @@
 		Jim_Panic(goi.interp,&quot;Why am I here?&quot;);
 		return JIM_ERR;
 	case TG_CMD_CURRENT:
-		if ( goi.argc != 0 ){
-			Jim_WrongNumArgs( goi.interp, 1, goi.argv, &quot;Too many parameters&quot;);
+		if (goi.argc != 0 ){
+			Jim_WrongNumArgs(goi.interp, 1, goi.argv, &quot;Too many parameters&quot;);
 			return JIM_ERR;
 		}
-		Jim_SetResultString( goi.interp, get_current_target( cmd_ctx )-&gt;cmd_name, -1 );
+		Jim_SetResultString(goi.interp, get_current_target(cmd_ctx )-&gt;cmd_name, -1 );
 		return JIM_OK;
 	case TG_CMD_TYPES:
-		if ( goi.argc != 0 ){
-			Jim_WrongNumArgs( goi.interp, 1, goi.argv, &quot;Too many parameters&quot; );
+		if (goi.argc != 0 ){
+			Jim_WrongNumArgs(goi.interp, 1, goi.argv, &quot;Too many parameters&quot; );
 			return JIM_ERR;
 		}
-		Jim_SetResult( goi.interp, Jim_NewListObj( goi.interp, NULL, 0 ) );
-		for ( x = 0 ; target_types[x] ; x++ ){
-			Jim_ListAppendElement( goi.interp,
+		Jim_SetResult(goi.interp, Jim_NewListObj(goi.interp, NULL, 0 ) );
+		for (x = 0 ; target_types[x] ; x++ ){
+			Jim_ListAppendElement(goi.interp,
 								   Jim_GetResult(goi.interp),
-								   Jim_NewStringObj( goi.interp, target_types[x]-&gt;name, -1 ) );
+								   Jim_NewStringObj(goi.interp, target_types[x]-&gt;name, -1 ) );
 		}
 		return JIM_OK;
 	case TG_CMD_NAMES:
-		if ( goi.argc != 0 ){
-			Jim_WrongNumArgs( goi.interp, 1, goi.argv, &quot;Too many parameters&quot; );
+		if (goi.argc != 0 ){
+			Jim_WrongNumArgs(goi.interp, 1, goi.argv, &quot;Too many parameters&quot; );
 			return JIM_ERR;
 		}
-		Jim_SetResult( goi.interp, Jim_NewListObj( goi.interp, NULL, 0 ) );
+		Jim_SetResult(goi.interp, Jim_NewListObj(goi.interp, NULL, 0 ) );
 		target = all_targets;
-		while ( target ){
-			Jim_ListAppendElement( goi.interp,
+		while (target ){
+			Jim_ListAppendElement(goi.interp,
 								   Jim_GetResult(goi.interp),
-								   Jim_NewStringObj( goi.interp, target-&gt;cmd_name, -1 ) );
+								   Jim_NewStringObj(goi.interp, target-&gt;cmd_name, -1 ) );
 			target = target-&gt;next;
 		}
 		return JIM_OK;
 	case TG_CMD_CREATE:
-		if ( goi.argc &lt; 3 ){
-			Jim_WrongNumArgs( goi.interp, goi.argc, goi.argv, &quot;?name  ... config options ...&quot;);
+		if (goi.argc &lt; 3 ){
+			Jim_WrongNumArgs(goi.interp, goi.argc, goi.argv, &quot;?name  ... config options ...&quot;);
 			return JIM_ERR;
 		}
-		return target_create( &amp;goi );
+		return target_create(&amp;goi );
 		break;
 	case TG_CMD_NUMBER:
-		if ( goi.argc != 1 ){
-			Jim_SetResult_sprintf( goi.interp, &quot;expected: target number ?NUMBER?&quot;);
+		if (goi.argc != 1 ){
+			Jim_SetResult_sprintf(goi.interp, &quot;expected: target number ?NUMBER?&quot;);
 			return JIM_ERR;
 		}
-		e = Jim_GetOpt_Wide( &amp;goi, &amp;w );
-		if ( e != JIM_OK ){
+		e = Jim_GetOpt_Wide(&amp;goi, &amp;w );
+		if (e != JIM_OK ){
 			return JIM_ERR;
 		}
 		{
 			target_t *t;
 			t = get_target_by_num(w);
-			if ( t == NULL ){
-				Jim_SetResult_sprintf( goi.interp,&quot;Target: number %d does not exist&quot;, (int)(w));
+			if (t == NULL ){
+				Jim_SetResult_sprintf(goi.interp,&quot;Target: number %d does not exist&quot;, (int)(w));
 				return JIM_ERR;
 			}
-			Jim_SetResultString( goi.interp, t-&gt;cmd_name, -1 );
+			Jim_SetResultString(goi.interp, t-&gt;cmd_name, -1 );
 			return JIM_OK;
 		}
 	case TG_CMD_COUNT:
-		if ( goi.argc != 0 ){
-			Jim_WrongNumArgs( goi.interp, 0, goi.argv, &quot;&lt;no parameters&gt;&quot;);
+		if (goi.argc != 0 ){
+			Jim_WrongNumArgs(goi.interp, 0, goi.argv, &quot;&lt;no parameters&gt;&quot;);
 			return JIM_ERR;
 		}
-		Jim_SetResult( goi.interp,
-					   Jim_NewIntObj( goi.interp, max_target_number()));
+		Jim_SetResult(goi.interp,
+					   Jim_NewIntObj(goi.interp, max_target_number()));
 		return JIM_OK;
 	}
 

Modified: trunk/src/target/target.h
===================================================================
--- trunk/src/target/target.h	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/target/target.h	2009-06-23 22:46:23 UTC (rev 2376)
@@ -396,8 +396,8 @@
 /* Issues USER() statements with target state information */
 int target_arch_state(struct target_s *target);
 
-void target_handle_event( target_t *t, enum target_event e);
-void target_all_handle_event( enum target_event e );
+void target_handle_event(target_t *t, enum target_event e);
+void target_all_handle_event(enum target_event e );
 
 #define ERROR_TARGET_INVALID	(-300)
 #define ERROR_TARGET_INIT_FAILED (-301)
@@ -412,6 +412,6 @@
 #define ERROR_TARGET_NOT_EXAMINED (-311)
 
 extern const Jim_Nvp nvp_error_target[];
-extern const char *target_strerror_safe( int err );
+extern const char *target_strerror_safe(int err );
 
 #endif /* TARGET_H */

Modified: trunk/src/target/target_request.c
===================================================================
--- trunk/src/target/target_request.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/target/target_request.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -117,7 +117,7 @@
 {
 	target_req_cmd_t target_req_cmd = request &amp; 0xff;
 
-	if ( charmsg_mode ) {
+	if (charmsg_mode ) {
 		target_charmsg(target, target_req_cmd );
 		return ERROR_OK;
 	}

Modified: trunk/src/target/target_type.h
===================================================================
--- trunk/src/target/target_type.h	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/target/target_type.h	2009-06-23 22:46:23 UTC (rev 2376)
@@ -129,16 +129,16 @@
 	int (*register_commands)(struct command_context_s *cmd_ctx);
 
 	/* called when target is created */
-	int (*target_create)( struct target_s *target, Jim_Interp *interp );
+	int (*target_create)(struct target_s *target, Jim_Interp *interp );
 
 	/* called for various config parameters */
 	/* returns JIM_CONTINUE - if option not understood */
 	/* otherwise: JIM_OK, or JIM_ERR, */
-	int (*target_jim_configure)( struct target_s *target, Jim_GetOptInfo *goi );
+	int (*target_jim_configure)(struct target_s *target, Jim_GetOptInfo *goi );
 
 	/* target commands specifically handled by the target */
 	/* returns JIM_OK, or JIM_ERR, or JIM_CONTINUE - if option not understood */
-	int (*target_jim_commands)( struct target_s *target, Jim_GetOptInfo *goi );
+	int (*target_jim_commands)(struct target_s *target, Jim_GetOptInfo *goi );
 
 	/* invoked after JTAG chain has been examined &amp; validated. During
 	 * this stage the target is examined and any additional setup is

Modified: trunk/src/target/trace.c
===================================================================
--- trunk/src/target/trace.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/target/trace.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -123,7 +123,7 @@
 		uint32_t first = 0;
 		uint32_t last = trace-&gt;trace_history_pos;
 
-		if ( !trace-&gt;trace_history_size ) {
+		if (!trace-&gt;trace_history_size ) {
 			command_print(cmd_ctx, &quot;trace history buffer is not allocated&quot;);
 			return ERROR_OK;
 		}

Modified: trunk/src/target/xscale.c
===================================================================
--- trunk/src/target/xscale.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/target/xscale.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -959,7 +959,7 @@
 			&quot;MMU: %s, D-Cache: %s, I-Cache: %s&quot;
 			&quot;%s&quot;,
 			 armv4_5_state_strings[armv4_5-&gt;core_state],
-			 Jim_Nvp_value2name_simple( nvp_target_debug_reason, target-&gt;debug_reason )-&gt;name ,
+			 Jim_Nvp_value2name_simple(nvp_target_debug_reason, target-&gt;debug_reason )-&gt;name ,
 			 armv4_5_mode_strings[armv4_5_mode_to_number(armv4_5-&gt;core_mode)],
 			 buf_get_u32(armv4_5-&gt;core_cache-&gt;reg_list[ARMV4_5_CPSR].value, 0, 32),
 			 buf_get_u32(armv4_5-&gt;core_cache-&gt;reg_list[15].value, 0, 32),
@@ -1202,7 +1202,7 @@
 	xscale_common_t *xscale = armv4_5-&gt;arch_info;
 
 	LOG_DEBUG(&quot;target-&gt;state: %s&quot;,
-		  Jim_Nvp_value2name_simple( nvp_target_state, target-&gt;state )-&gt;name);
+		  Jim_Nvp_value2name_simple(nvp_target_state, target-&gt;state )-&gt;name);
 
 	if (target-&gt;state == TARGET_HALTED)
 	{
@@ -1568,7 +1568,7 @@
 	xscale_common_t *xscale = armv4_5-&gt;arch_info;
 
 	LOG_DEBUG(&quot;target-&gt;state: %s&quot;,
-		  Jim_Nvp_value2name_simple( nvp_target_state, target-&gt;state )-&gt;name);
+		  Jim_Nvp_value2name_simple(nvp_target_state, target-&gt;state )-&gt;name);
 
 	/* select DCSR instruction (set endstate to R-T-I to ensure we don't
 	 * end up in T-L-R, which would reset JTAG

Modified: trunk/src/xsvf/xsvf.c
===================================================================
--- trunk/src/xsvf/xsvf.c	2009-06-23 22:45:47 UTC (rev 2375)
+++ trunk/src/xsvf/xsvf.c	2009-06-23 22:46:23 UTC (rev 2376)
@@ -129,11 +129,11 @@
 
 
 /* map xsvf tap state to an openocd &quot;tap_state_t&quot; */
-static tap_state_t xsvf_to_tap( int xsvf_state )
+static tap_state_t xsvf_to_tap(int xsvf_state )
 {
 	tap_state_t	ret;
 
-	switch ( xsvf_state )
+	switch (xsvf_state )
 	{
 	case XSV_RESET:			ret = TAP_RESET;			break;
 	case XSV_IDLE:			ret = TAP_IDLE;			break;
@@ -152,7 +152,7 @@
 	case XSV_IREXIT2:		ret = TAP_IREXIT2;		break;
 	case XSV_IRUPDATE:		ret = TAP_IRUPDATE;		break;
 	default:
-		LOG_ERROR( &quot;UNKNOWN XSVF STATE 0x%02X&quot;, xsvf_state );
+		LOG_ERROR(&quot;UNKNOWN XSVF STATE 0x%02X&quot;, xsvf_state );
 		exit(1);
 	}
 
@@ -232,10 +232,10 @@
 
 	if (strcmp(args[0], &quot;plain&quot;) != 0)
 	{
-		tap = jtag_tap_by_string( args[0] );
+		tap = jtag_tap_by_string(args[0] );
 		if (!tap )
 		{
-			command_print( cmd_ctx, &quot;Tap: %s unknown&quot;, args[0] );
+			command_print(cmd_ctx, &quot;Tap: %s unknown&quot;, args[0] );
 			return ERROR_FAIL;
 		}
 	}
@@ -261,7 +261,7 @@
 
 	LOG_USER(&quot;xsvf processing file: \&quot;%s\&quot;&quot;, filename);
 
-	while ( read(xsvf_fd, &amp;opcode, 1) &gt; 0 )
+	while (read(xsvf_fd, &amp;opcode, 1) &gt; 0 )
 	{
 		/* record the position of the just read opcode within the file */
 		file_offset = lseek(xsvf_fd, 0, SEEK_CUR) - 1;
@@ -327,9 +327,9 @@
 				xsdrsize = be_to_h_u32(xsdrsize_buf);
 				LOG_DEBUG(&quot;XSDRSIZE %d&quot;, xsdrsize);
 
-				if ( dr_out_buf ) free(dr_out_buf);
-				if ( dr_in_buf)   free(dr_in_buf);
-				if ( dr_in_mask)  free(dr_in_mask);
+				if (dr_out_buf ) free(dr_out_buf);
+				if (dr_in_buf)   free(dr_in_buf);
+				if (dr_in_mask)  free(dr_in_mask);
 
 				dr_out_buf = malloc((xsdrsize + 7) / 8);
 				dr_in_buf = malloc((xsdrsize + 7) / 8);
@@ -366,11 +366,11 @@
 
 				LOG_DEBUG(&quot;%s %d&quot;, op_name, xsdrsize);
 
-				for ( attempt = 0; attempt &lt; limit;  ++attempt )
+				for (attempt = 0; attempt &lt; limit;  ++attempt )
 				{
 					scan_field_t field;
 
-					if ( attempt &gt; 0 )
+					if (attempt &gt; 0 )
 					{
 						/* perform the XC9500 exception handling sequence shown in xapp067.pdf and
 						   illustrated in psuedo code at end of this file.  We start from state
@@ -393,7 +393,7 @@
 							TAP_IDLE,
 						};
 
-						jtag_add_pathmove( DIM(exception_path), exception_path );
+						jtag_add_pathmove(DIM(exception_path), exception_path );
 
 						if (verbose)
 							LOG_USER(&quot;%s mismatch, xsdrsize=%d retry=%d&quot;, op_name, xsdrsize, attempt);
@@ -425,7 +425,7 @@
 
 				if (!matched)
 				{
-					LOG_USER( &quot;%s mismatch&quot;, op_name);
+					LOG_USER(&quot;%s mismatch&quot;, op_name);
 					tdo_mismatch = 1;
 					break;
 				}
@@ -505,7 +505,7 @@
 					the XSTATE.
 				*/
 
-				if ( jtag_add_statemove( mystate ) != ERROR_OK )
+				if (jtag_add_statemove(mystate ) != ERROR_OK )
 				{
 					/*	For special states known as stable states
 						(Test-Logic-Reset, Run-Test/Idle, Pause-DR, Pause- IR),
@@ -538,9 +538,9 @@
 			}
 
 			/* see page 22 of XSVF spec */
-			if ( uc == 0 )
+			if (uc == 0 )
 				xendir = TAP_IDLE;
-			else if ( uc == 1 )
+			else if (uc == 1 )
 				xendir = TAP_IRPAUSE;
 			else
 			{
@@ -561,9 +561,9 @@
 			}
 
 			/* see page 22 of XSVF spec */
-			if ( uc == 0 )
+			if (uc == 0 )
 				xenddr = TAP_IDLE;
-			else if ( uc == 1 )
+			else if (uc == 1 )
 				xenddr = TAP_DRPAUSE;
 			else
 			{
@@ -583,7 +583,7 @@
 				int bitcount;
 				tap_state_t my_end_state = xruntest ? TAP_IDLE : xendir;
 
-				if ( opcode == XSIR )
+				if (opcode == XSIR )
 				{
 					/* one byte bitcount */
 					if (read(xsvf_fd, short_buf, 1) &lt; 0)
@@ -664,7 +664,7 @@
 						break;
 					}
 
-					if ( ndx &lt; sizeof(comment)-1 )
+					if (ndx &lt; sizeof(comment)-1 )
 						comment[ndx++] = uc;
 
 				} while (uc != 0);
@@ -689,7 +689,7 @@
 				tap_state_t end_state;
 				int 	delay;
 
-				if ( read(xsvf_fd, &amp;wait, 1) &lt; 0
+				if (read(xsvf_fd, &amp;wait, 1) &lt; 0
 				  || read(xsvf_fd, &amp;end, 1) &lt; 0
 				  || read(xsvf_fd, delay_buf, 4) &lt; 0)
 				{
@@ -709,9 +709,9 @@
 				}
 				else
 				{
-					jtag_add_statemove( wait_state );
+					jtag_add_statemove(wait_state );
 					jtag_add_sleep(delay);
-					jtag_add_statemove( end_state );
+					jtag_add_statemove(end_state );
 				}
 			}
 			break;
@@ -731,7 +731,7 @@
 				int clock_count;
 				int usecs;
 
-				if ( read(xsvf_fd, &amp;wait, 1) &lt; 0
+				if (read(xsvf_fd, &amp;wait, 1) &lt; 0
 				 ||  read(xsvf_fd, &amp;end, 1) &lt; 0
 				 ||  read(xsvf_fd, clock_buf, 4) &lt; 0
 				 ||  read(xsvf_fd, usecs_buf, 4) &lt; 0 )
@@ -740,8 +740,8 @@
 					break;
 				}
 
-				wait_state = xsvf_to_tap( wait );
-				end_state  = xsvf_to_tap( end );
+				wait_state = xsvf_to_tap(wait );
+				end_state  = xsvf_to_tap(end );
 
 				clock_count = be_to_h_u32(clock_buf);
 				usecs       = be_to_h_u32(usecs_buf);
@@ -758,17 +758,17 @@
 				 */
 				if (wait_state != TAP_IRPAUSE &amp;&amp; wait_state != TAP_DRPAUSE &amp;&amp; wait_state != TAP_RESET &amp;&amp; wait_state != TAP_IDLE)
 				{
-					LOG_ERROR(&quot;illegal XWAITSTATE wait_state: \&quot;%s\&quot;&quot;, tap_state_name( wait_state ));
+					LOG_ERROR(&quot;illegal XWAITSTATE wait_state: \&quot;%s\&quot;&quot;, tap_state_name(wait_state ));
 					unsupported = 1;
 				}
 
-				jtag_add_statemove( wait_state );
+				jtag_add_statemove(wait_state );
 
-				jtag_add_clocks( clock_count );
+				jtag_add_clocks(clock_count );
 
-				jtag_add_sleep( usecs );
+				jtag_add_sleep(usecs );
 
-				jtag_add_statemove( end_state );
+				jtag_add_statemove(end_state );
 			}
 			break;
 
@@ -779,7 +779,7 @@
 				*/
 				uint8_t  count_buf[4];
 
-				if ( read(xsvf_fd, count_buf, 4) &lt; 0 )
+				if (read(xsvf_fd, count_buf, 4) &lt; 0 )
 				{
 					do_abort = 1;
 					break;
@@ -799,7 +799,7 @@
 				uint8_t  clock_buf[4];
 				uint8_t  usecs_buf[4];
 
-				if ( read(xsvf_fd, &amp;state, 1) &lt; 0
+				if (read(xsvf_fd, &amp;state, 1) &lt; 0
 				  || read(xsvf_fd, clock_buf, 4) &lt; 0
 				  ||	 read(xsvf_fd, usecs_buf, 4) &lt; 0 )
 				{
@@ -826,7 +826,7 @@
 
 				LOG_DEBUG(&quot;LSDR&quot;);
 
-				if ( xsvf_read_buffer(xsdrsize, xsvf_fd, dr_out_buf) != ERROR_OK
+				if (xsvf_read_buffer(xsdrsize, xsvf_fd, dr_out_buf) != ERROR_OK
 				  || xsvf_read_buffer(xsdrsize, xsvf_fd, dr_in_buf) != ERROR_OK )
 				{
 					do_abort = 1;
@@ -836,11 +836,11 @@
 				if (limit &lt; 1)
 					limit = 1;
 
-				for ( attempt = 0; attempt &lt; limit;  ++attempt )
+				for (attempt = 0; attempt &lt; limit;  ++attempt )
 				{
 					scan_field_t field;
 
-					jtag_add_statemove( loop_state );
+					jtag_add_statemove(loop_state );
 					jtag_add_clocks(loop_clocks);
 					jtag_add_sleep(loop_usecs);
 
@@ -873,7 +873,7 @@
 
 				if (!matched )
 				{
-					LOG_USER( &quot;LSDR mismatch&quot; );
+					LOG_USER(&quot;LSDR mismatch&quot; );
 					tdo_mismatch = 1;
 					break;
 				}
@@ -890,7 +890,7 @@
 					break;
 				}
 
-				switch ( trst_mode )
+				switch (trst_mode )
 				{
 				case XTRST_ON:
 					jtag_add_reset(1, 0);
@@ -902,7 +902,7 @@
 				case XTRST_ABSENT:
 					break;
 				default:
-					LOG_ERROR( &quot;XTRST mode argument (0x%02X) out of range&quot;, trst_mode );
+					LOG_ERROR(&quot;XTRST mode argument (0x%02X) out of range&quot;, trst_mode );
 					do_abort = 1;
 				}
 			}
@@ -918,7 +918,7 @@
 			LOG_DEBUG(&quot;xsvf failed, setting taps to reasonable state&quot;);
 
 			/* upon error, return the TAPs to a reasonable state */
-			jtag_add_statemove( TAP_IDLE );
+			jtag_add_statemove(TAP_IDLE );
 			jtag_execute_queue();
 			break;
 		}


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001159.html">[Openocd-svn] r2375 - in trunk: src/flash src/flash/ocl/at91sam7x	src/helper src/jtag src/jtag/zy1000 src/server src/target	src/xsvf testing/examples/cortex
</A></li>
	<LI>Next message: <A HREF="001161.html">[Openocd-svn] r2377 - in trunk/src: . flash flash/ocl/at91sam7x	helper jtag jtag/rlink jtag/zy1000 pld server svf target xsvf
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1160">[ date ]</a>
              <a href="thread.html#1160">[ thread ]</a>
              <a href="subject.html#1160">[ subject ]</a>
              <a href="author.html#1160">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-svn">More information about the openocd-svn
mailing list</a><br>
</body></html>
