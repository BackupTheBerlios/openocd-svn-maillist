<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-970-g69ac20a
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-svn/2011-July/index.html" >
   <LINK REL="made" HREF="mailto:openocd-svn%40lists.berlios.de?Subject=Re%3A%20%5Bopenocd-svn%5D%20Main%20OpenOCD%20repository%20branch%2C%20master%2C%0A%09updated.%20v0.4.0-970-g69ac20a&In-Reply-To=%3Cmailman.134.1331736156.7625.openocd-svn%40lists.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002648.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-970-g69ac20a</H1>
    <B>Spencer Oliver</B> 
    <A HREF="mailto:openocd-svn%40lists.berlios.de?Subject=Re%3A%20%5Bopenocd-svn%5D%20Main%20OpenOCD%20repository%20branch%2C%20master%2C%0A%09updated.%20v0.4.0-970-g69ac20a&In-Reply-To=%3Cmailman.134.1331736156.7625.openocd-svn%40lists.berlios.de%3E"
       TITLE="[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-970-g69ac20a">ntfreak at users.sourceforge.net
       </A><BR>
    <I>Fri Jul 29 23:56:25 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="002648.html">[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-964-gb5a324e
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2649">[ date ]</a>
              <a href="thread.html#2649">[ thread ]</a>
              <a href="subject.html#2649">[ subject ]</a>
              <a href="author.html#2649">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;Main OpenOCD repository&quot;.

The branch, master has been updated
       via  69ac20a1556b06f837986cd12c4724970550c24f (commit)
       via  633b1a2b49f84720e7f9ec24f42abfefd558ec6a (commit)
       via  852289bc4935ec8ac27242812fccb4806e304859 (commit)
       via  89f593d8cbd74eb1db5d6beb2e60e9844504db6e (commit)
       via  c73342fbe77b0d0432ce189566e0e8383f2b7493 (commit)
       via  b066a7db2498eadcdeb55ea763d805c75fbbd00b (commit)
      from  b5a324e63c066b97c148c72ecec2e0dfc6023c70 (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit 69ac20a1556b06f837986cd12c4724970550c24f
Author: Spencer Oliver &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">ntfreak at users.sourceforge.net</A>&gt;
Date:   Fri Jul 29 17:01:31 2011 +0100

    cfg: support calling legacy stm32 scripts
    
    For the time being we support the old stm32 script names - this will
    be removed before the next release cycle.
    
    Signed-off-by: Spencer Oliver &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">ntfreak at users.sourceforge.net</A>&gt;

diff --git a/tcl/target/stm32.cfg b/tcl/target/stm32.cfg
new file mode 100644
index 0000000..217b79d
--- /dev/null
+++ b/tcl/target/stm32.cfg
@@ -0,0 +1,3 @@
+# deprecated cfg file
+echo &quot;DEPRECATED! use script 'target/stm32f1x.cfg' not 'target/stm32.cfg'&quot;
+source [find target/stm32f1x.cfg]
diff --git a/tcl/target/stm32f2xxx.cfg b/tcl/target/stm32f2xxx.cfg
new file mode 100644
index 0000000..ab5b1a4
--- /dev/null
+++ b/tcl/target/stm32f2xxx.cfg
@@ -0,0 +1,3 @@
+# deprecated cfg file
+echo &quot;DEPRECATED! use script 'target/stm32f2x.cfg' not 'target/stm32f2xxx.cfg'&quot;
+source [find target/stm32f2x.cfg]

commit 633b1a2b49f84720e7f9ec24f42abfefd558ec6a
Author: Spencer Oliver &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">ntfreak at users.sourceforge.net</A>&gt;
Date:   Thu Jul 28 16:06:24 2011 +0100

    docs: remove obsolete luminary target info
    
    The lm3s variant is not required as this is handled in the
    target script - see tcl/target/stellaris.cfg.
    
    Signed-off-by: Spencer Oliver &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">ntfreak at users.sourceforge.net</A>&gt;

diff --git a/doc/openocd.texi b/doc/openocd.texi
index 069367d..e3934e8 100644
--- a/doc/openocd.texi
+++ b/doc/openocd.texi
@@ -3602,14 +3602,7 @@ At this writing, the supported CPU types and variants are:
 (Support for this is preliminary and incomplete.)
 @item @code{cortex_a8} -- this is an ARMv7 core with an MMU
 @item @code{cortex_m3} -- this is an ARMv7 core, supporting only the
-compact Thumb2 instruction set.  It supports one variant:
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at itemize</A> @minus
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at item</A> @code{lm3s} ... Use this when debugging older Stellaris LM3S targets.
-This will cause OpenOCD to use a software reset rather than asserting
-SRST, to avoid a issue with clearing the debug registers.
-This is fixed in Fury Rev B, DustDevil Rev B, Tempest; these revisions will
-be detected and the normal reset behaviour used.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at end</A> itemize
+compact Thumb2 instruction set.
 @item @code{dragonite} -- resembles arm966e
 @item @code{dsp563xx} -- implements Freescale's 24-bit DSP.
 (Support for this is still incomplete.)

commit 852289bc4935ec8ac27242812fccb4806e304859
Author: Spencer Oliver &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">ntfreak at users.sourceforge.net</A>&gt;
Date:   Thu Jul 28 12:47:49 2011 +0100

    flash: add support for deprecated stm32 flash cmds
    
    Issue warning when the old cmd is used and redirect to new supported one.
    These deprecated cmds will be removed at some point.
    
    Signed-off-by: Spencer Oliver &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">ntfreak at users.sourceforge.net</A>&gt;

diff --git a/src/flash/startup.tcl b/src/flash/startup.tcl
index 6cb7d8e..5f40e64 100644
--- a/src/flash/startup.tcl
+++ b/src/flash/startup.tcl
@@ -1,2 +1,13 @@
 # Defines basic Tcl procs for OpenOCD flash module
 
+# ease migration to updated flash driver
+proc stm32x args {
+	echo &quot;DEPRECATED! use 'stm32f1x $args' not 'stm32x $args'&quot;
+	eval stm32f1x $args
+}
+
+proc stm32f2xxx args {
+	echo &quot;DEPRECATED! use 'stm32f2x $args' not 'stm32f2xxx $args'&quot;
+	eval stm32f2x $args
+}
+

commit 89f593d8cbd74eb1db5d6beb2e60e9844504db6e
Author: Spencer Oliver &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">ntfreak at users.sourceforge.net</A>&gt;
Date:   Thu Jul 28 11:45:09 2011 +0100

    cfg: update scripts to use new stm32 driver names
    
    Signed-off-by: Spencer Oliver &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">ntfreak at users.sourceforge.net</A>&gt;

diff --git a/tcl/board/hitex_stm32-performancestick.cfg b/tcl/board/hitex_stm32-performancestick.cfg
index 515f7e0..0ec4076 100644
--- a/tcl/board/hitex_stm32-performancestick.cfg
+++ b/tcl/board/hitex_stm32-performancestick.cfg
@@ -5,7 +5,7 @@ reset_config trst_and_srst
 source [find interface/stm32-stick.cfg]
 
 set  CHIPNAME stm32_hitex
-source [find target/stm32.cfg]
+source [find target/stm32f1x.cfg]
 
 # configure str750 connected to jtag chain
 # FIXME -- source [find target/str750.cfg] after cleaning that up
diff --git a/tcl/board/olimex_stm32_h103.cfg b/tcl/board/olimex_stm32_h103.cfg
index 98b0b65..ec03034 100644
--- a/tcl/board/olimex_stm32_h103.cfg
+++ b/tcl/board/olimex_stm32_h103.cfg
@@ -4,4 +4,4 @@
 # Work-area size (RAM size) = 20kB for STM32F103RB device
 set WORKAREASIZE 0x5000
 
-source [find target/stm32.cfg]
+source [find target/stm32f1x.cfg]
diff --git a/tcl/board/olimex_stm32_h107.cfg b/tcl/board/olimex_stm32_h107.cfg
index c21e19b..1d34a23 100644
--- a/tcl/board/olimex_stm32_h107.cfg
+++ b/tcl/board/olimex_stm32_h107.cfg
@@ -5,4 +5,4 @@
 # Work-area size (RAM size) = 64kB for STM32F107VC device
 set WORKAREASIZE 0x10000
 
-source [find target/stm32.cfg]
+source [find target/stm32f1x.cfg]
diff --git a/tcl/board/stm32100b_eval.cfg b/tcl/board/stm32100b_eval.cfg
index e04b612..41153e5 100644
--- a/tcl/board/stm32100b_eval.cfg
+++ b/tcl/board/stm32100b_eval.cfg
@@ -4,4 +4,4 @@
 # The chip has only 8KB sram
 set WORKAREASIZE 0x2000
 
-source [find target/stm32.cfg]
+source [find target/stm32f1x.cfg]
diff --git a/tcl/board/stm3210b_eval.cfg b/tcl/board/stm3210b_eval.cfg
index 70798c1..ff3f777 100644
--- a/tcl/board/stm3210b_eval.cfg
+++ b/tcl/board/stm3210b_eval.cfg
@@ -4,4 +4,4 @@
 # increase working area to 32KB for faster flash programming
 set WORKAREASIZE 0x8000
 
-source [find target/stm32.cfg]
+source [find target/stm32f1x.cfg]
diff --git a/tcl/board/stm3210c_eval.cfg b/tcl/board/stm3210c_eval.cfg
index 27684f0..e069c04 100644
--- a/tcl/board/stm3210c_eval.cfg
+++ b/tcl/board/stm3210c_eval.cfg
@@ -4,4 +4,4 @@
 # increase working area to 32KB for faster flash programming
 set WORKAREASIZE 0x8000
 
-source [find target/stm32.cfg]
+source [find target/stm32f1x.cfg]
diff --git a/tcl/board/stm3210e_eval.cfg b/tcl/board/stm3210e_eval.cfg
index 786d027..91807ce 100644
--- a/tcl/board/stm3210e_eval.cfg
+++ b/tcl/board/stm3210e_eval.cfg
@@ -4,7 +4,7 @@
 # increase working area to 32KB for faster flash programming
 set WORKAREASIZE 0x8000
 
-source [find target/stm32.cfg]
+source [find target/stm32f1x.cfg]
 
 #
 # configure FSMC Bank 1 (NOR/PSRAM Bank 2) NOR flash
diff --git a/tcl/board/stm3220g_eval.cfg b/tcl/board/stm3220g_eval.cfg
index e836f0e..48b57c1 100644
--- a/tcl/board/stm3220g_eval.cfg
+++ b/tcl/board/stm3220g_eval.cfg
@@ -8,4 +8,4 @@ set WORKAREASIZE 0x20000
 # chip name
 set CHIPNAME STM32F207IGT6
 
-source [find target/stm32f2xxx.cfg]
+source [find target/stm32f2x.cfg]
diff --git a/tcl/target/stm32.cfg b/tcl/target/stm32f1x.cfg
similarity index 96%
rename from tcl/target/stm32.cfg
rename to tcl/target/stm32f1x.cfg
index 9879c04..8007ff5 100644
--- a/tcl/target/stm32.cfg
+++ b/tcl/target/stm32f1x.cfg
@@ -68,7 +68,7 @@ $_TARGETNAME configure -work-area-phys 0x20000000 -work-area-size $_WORKAREASIZE
 
 # flash size will be probed
 set _FLASHNAME $_CHIPNAME.flash
-flash bank $_FLASHNAME stm32x 0x08000000 0 0 0 $_TARGETNAME
+flash bank $_FLASHNAME stm32f1x 0x08000000 0 0 0 $_TARGETNAME
 
 # if srst is not fitted use SYSRESETREQ to
 # perform a soft reset
diff --git a/tcl/target/stm32f2xxx.cfg b/tcl/target/stm32f2x.cfg
similarity index 96%
rename from tcl/target/stm32f2xxx.cfg
rename to tcl/target/stm32f2x.cfg
index 8a85724..b8de384 100644
--- a/tcl/target/stm32f2xxx.cfg
+++ b/tcl/target/stm32f2x.cfg
@@ -57,5 +57,5 @@ target create $_TARGETNAME cortex_m3 -endian $_ENDIAN -chain-position $_TARGETNA
 $_TARGETNAME configure -work-area-phys 0x20000000 -work-area-size $_WORKAREASIZE -work-area-backup 0
 
 set _FLASHNAME $_CHIPNAME.flash
-flash bank $_FLASHNAME stm32f2xxx 0 0 0 0 $_TARGETNAME
+flash bank $_FLASHNAME stm32f2x 0 0 0 0 $_TARGETNAME
 
diff --git a/tcl/target/stm32xl.cfg b/tcl/target/stm32xl.cfg
index cde07df..f72896d 100644
--- a/tcl/target/stm32xl.cfg
+++ b/tcl/target/stm32xl.cfg
@@ -1,6 +1,6 @@
 # script for stm32xl family (dual flash bank)
-source [find target/stm32.cfg]
+source [find target/stm32f1x.cfg]
 
 # flash size will be probed
 set _FLASHNAME $_CHIPNAME.flash1
-flash bank $_FLASHNAME stm32x 0x08080000 0 0 0 $_TARGETNAME
+flash bank $_FLASHNAME stm32f1x 0x08080000 0 0 0 $_TARGETNAME

commit c73342fbe77b0d0432ce189566e0e8383f2b7493
Author: Spencer Oliver &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">ntfreak at users.sourceforge.net</A>&gt;
Date:   Thu Jul 28 11:44:48 2011 +0100

    docs: update to use new stm32 driver names
    
    Signed-off-by: Spencer Oliver &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">ntfreak at users.sourceforge.net</A>&gt;

diff --git a/doc/openocd.texi b/doc/openocd.texi
index dfb8e30..069367d 100644
--- a/doc/openocd.texi
+++ b/doc/openocd.texi
@@ -1277,7 +1277,7 @@ at91sam3u4c.cfg  lm3s9b9x.cfg  samsung_s3c6410.cfg
 at91sam3u4e.cfg  lpc1768.cfg   sharp_lh79532.cfg
 at91sam3uXX.cfg  lpc2103.cfg   smdk6410.cfg
 at91sam7sx.cfg   lpc2124.cfg   smp8634.cfg
-at91sam9260.cfg  lpc2129.cfg   stm32.cfg
+at91sam9260.cfg  lpc2129.cfg   stm32f1x.cfg
 c100.cfg         lpc2148.cfg   str710.cfg
 c100config.tcl   lpc2294.cfg   str730.cfg
 c100helper.tcl   lpc2378.cfg   str750.cfg
@@ -4762,44 +4762,51 @@ applied to all of them.
 @end quotation
 @end deffn
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at deffn</A> {Flash Driver} stm32x
-All members of the STM32 microcontroller family from ST Microelectronics
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at deffn</A> {Flash Driver} stm32f1x
+All members of the STM32f1x microcontroller family from ST Microelectronics
 include internal flash and use ARM Cortex M3 cores.
 The driver automatically recognizes a number of these chips using
 the chip identification register, and autoconfigures itself.
 
 @example
-flash bank $_FLASHNAME stm32x 0 0 0 0 $_TARGETNAME
+flash bank $_FLASHNAME stm32f1x 0 0 0 0 $_TARGETNAME
 @end example
 
-Some stm32x-specific commands
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at footnote</A>{Currently there is a @command{stm32x mass_erase} command.
+Some stm32f1x-specific commands
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at footnote</A>{Currently there is a @command{stm32f1x mass_erase} command.
 That seems pointless since the same effect can be had using the
 standard @command{flash erase_address} command.}
 are defined:
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at deffn</A> Command {stm32x lock} num
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at deffn</A> Command {stm32f1x lock} num
 Locks the entire stm32 device.
 The @var{num} parameter is a value shown by @command{flash banks}.
 @end deffn
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at deffn</A> Command {stm32x unlock} num
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at deffn</A> Command {stm32f1x unlock} num
 Unlocks the entire stm32 device.
 The @var{num} parameter is a value shown by @command{flash banks}.
 @end deffn
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at deffn</A> Command {stm32x options_read} num
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at deffn</A> Command {stm32f1x options_read} num
 Read and display the stm32 option bytes written by
-the @command{stm32x options_write} command.
+the @command{stm32f1x options_write} command.
 The @var{num} parameter is a value shown by @command{flash banks}.
 @end deffn
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">- at deffn</A> Command {stm32x options_write} num (@option{SWWDG}|@option{HWWDG}) (@option{RSTSTNDBY}|@option{NORSTSTNDBY}) (@option{RSTSTOP}|@option{NORSTSTOP})
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at deffn</A> Command {stm32f1x options_write} num (@option{SWWDG}|@option{HWWDG}) (@option{RSTSTNDBY}|@option{NORSTSTNDBY}) (@option{RSTSTOP}|@option{NORSTSTOP})
 Writes the stm32 option byte with the specified values.
 The @var{num} parameter is a value shown by @command{flash banks}.
 @end deffn
 @end deffn
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at deffn</A> {Flash Driver} stm32f2x
+All members of the STM32f2x microcontroller family from ST Microelectronics
+include internal flash and use ARM Cortex M3 cores.
+The driver automatically recognizes a number of these chips using
+the chip identification register, and autoconfigures itself.
<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">+ at end</A> deffn
+
 @deffn {Flash Driver} str7x
 All members of the STR7 microcontroller family from ST Microelectronics
 include internal flash and use ARM7TDMI cores.

commit b066a7db2498eadcdeb55ea763d805c75fbbd00b
Author: Spencer Oliver &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">ntfreak at users.sourceforge.net</A>&gt;
Date:   Thu Jul 28 11:42:27 2011 +0100

    flash: update stm32 driver names
    
    Use consistent names for the stm32 family flash drivers, eg.
    stm32x -&gt; stm32f1x
    stm32f2xxx -&gt; stm32f2x
    
    this makes it easier to add support for newer stm32 families.
    
    Signed-off-by: Spencer Oliver &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">ntfreak at users.sourceforge.net</A>&gt;

diff --git a/src/flash/nor/Makefile.am b/src/flash/nor/Makefile.am
index c897851..6dd95fe 100644
--- a/src/flash/nor/Makefile.am
+++ b/src/flash/nor/Makefile.am
@@ -24,8 +24,8 @@ NOR_DRIVERS = \
 	pic32mx.c \
 	stmsmi.c \
 	stellaris.c \
-	stm32x.c \
-	stm32f2xxx.c \
+	stm32f1x.c \
+	stm32f2x.c \
 	str7x.c \
 	str9x.c \
 	str9xpec.c \
diff --git a/src/flash/nor/drivers.c b/src/flash/nor/drivers.c
index dc927b3..669b0b9 100644
--- a/src/flash/nor/drivers.c
+++ b/src/flash/nor/drivers.c
@@ -32,8 +32,8 @@ extern struct flash_driver str9x_flash;
 extern struct flash_driver aduc702x_flash;
 extern struct flash_driver stellaris_flash;
 extern struct flash_driver str9xpec_flash;
-extern struct flash_driver stm32x_flash;
-extern struct flash_driver stm32xf2xxx_flash;
+extern struct flash_driver stm32f1x_flash;
+extern struct flash_driver stm32f2x_flash;
 extern struct flash_driver tms470_flash;
 extern struct flash_driver ecosflash_flash;
 extern struct flash_driver ocl_flash;
@@ -62,8 +62,8 @@ static struct flash_driver *flash_drivers[] = {
 	&amp;aduc702x_flash,
 	&amp;stellaris_flash,
 	&amp;str9xpec_flash,
-	&amp;stm32x_flash,
-	&amp;stm32xf2xxx_flash,
+	&amp;stm32f1x_flash,
+	&amp;stm32f2x_flash,
 	&amp;tms470_flash,
 	&amp;ecosflash_flash,
 	&amp;ocl_flash,
diff --git a/src/flash/nor/stm32x.c b/src/flash/nor/stm32f1x.c
similarity index 99%
rename from src/flash/nor/stm32x.c
rename to src/flash/nor/stm32f1x.c
index b4300be..6bc4300 100644
--- a/src/flash/nor/stm32x.c
+++ b/src/flash/nor/stm32f1x.c
@@ -1544,16 +1544,16 @@ static const struct command_registration stm32x_exec_command_handlers[] = {
 
 static const struct command_registration stm32x_command_handlers[] = {
 	{
-		.name = &quot;stm32x&quot;,
+		.name = &quot;stm32f1x&quot;,
 		.mode = COMMAND_ANY,
-		.help = &quot;stm32x flash command group&quot;,
+		.help = &quot;stm32f1x flash command group&quot;,
 		.chain = stm32x_exec_command_handlers,
 	},
 	COMMAND_REGISTRATION_DONE
 };
 
-struct flash_driver stm32x_flash = {
-	.name = &quot;stm32x&quot;,
+struct flash_driver stm32f1x_flash = {
+	.name = &quot;stm32f1x&quot;,
 	.commands = stm32x_command_handlers,
 	.flash_bank_command = stm32x_flash_bank_command,
 	.erase = stm32x_erase,
diff --git a/src/flash/nor/stm32f2xxx.c b/src/flash/nor/stm32f2x.c
similarity index 97%
rename from src/flash/nor/stm32f2xxx.c
rename to src/flash/nor/stm32f2x.c
index df50e84..c2f586a 100644
--- a/src/flash/nor/stm32f2xxx.c
+++ b/src/flash/nor/stm32f2x.c
@@ -48,8 +48,7 @@
  *
  */
 
-
-/* Danger!!!! The STM32F1xxxx and STM32F2xxxx series actually have
+/* Danger!!!! The STM32F1x and STM32F2x series actually have
  * quite different flash controllers.
  *
  * What's more scary is that the names of the registers and their
@@ -57,7 +56,7 @@
  * can be very different.
  *
  * To reduce testing complexity and dangers of regressions,
- * a seperate file is used for stm32fx2222.
+ * a seperate file is used for stm32fx2x.
  *
  * 1mByte part with 4 x 16, 1 x 64, 7 x 128kBytes sectors
  *
@@ -73,16 +72,16 @@
  * PM0059
  * www.st.com/internet/com/TECHNICAL_RESOURCES/TECHNICAL_LITERATURE/PROGRAMMING_MANUAL/CD00233952.pdf
  *
- * STM32F1xxx series - notice that this code was copy, pasted and knocked
- * into a stm32f2xxx driver, so in case something has been converted or
+ * STM32F1x series - notice that this code was copy, pasted and knocked
+ * into a stm32f2x driver, so in case something has been converted or
  * bugs haven't been fixed, here are the original manuals:
  *
  * RM0008 - Reference manual
  *
  * RM0042, the Flash programming manual for low-, medium- high-density and
- * connectivity line STM32F10xxx devices
+ * connectivity line STM32F10x devices
  *
- * PM0068, the Flash programming manual for XL-density STM32F10xxx devices.
+ * PM0068, the Flash programming manual for XL-density STM32F10x devices.
  *
  */
 
@@ -683,16 +682,16 @@ static const struct command_registration stm32x_exec_command_handlers[] = {
 
 static const struct command_registration stm32x_command_handlers[] = {
 	{
-		.name = &quot;stm32f2xxx&quot;,
+		.name = &quot;stm32f2x&quot;,
 		.mode = COMMAND_ANY,
-		.help = &quot;stm32f2xxx flash command group&quot;,
+		.help = &quot;stm32f2x flash command group&quot;,
 		.chain = stm32x_exec_command_handlers,
 	},
 	COMMAND_REGISTRATION_DONE
 };
 
-struct flash_driver stm32xf2xxx_flash = {
-	.name = &quot;stm32f2xxx&quot;,
+struct flash_driver stm32f2x_flash = {
+	.name = &quot;stm32f2x&quot;,
 	.commands = stm32x_command_handlers,
 	.flash_bank_command = stm32x_flash_bank_command,
 	.erase = stm32x_erase,

-----------------------------------------------------------------------

Summary of changes:
 doc/openocd.texi                            |   38 +++++++-------
 src/flash/nor/Makefile.am                   |    4 +-
 src/flash/nor/drivers.c                     |    8 ++--
 src/flash/nor/{stm32x.c =&gt; stm32f1x.c}      |    8 ++--
 src/flash/nor/{stm32f2xxx.c =&gt; stm32f2x.c}  |   21 ++++----
 src/flash/startup.tcl                       |   11 ++++
 tcl/board/hitex_stm32-performancestick.cfg  |    2 +-
 tcl/board/olimex_stm32_h103.cfg             |    2 +-
 tcl/board/olimex_stm32_h107.cfg             |    2 +-
 tcl/board/stm32100b_eval.cfg                |    2 +-
 tcl/board/stm3210b_eval.cfg                 |    2 +-
 tcl/board/stm3210c_eval.cfg                 |    2 +-
 tcl/board/stm3210e_eval.cfg                 |    2 +-
 tcl/board/stm3220g_eval.cfg                 |    2 +-
 tcl/target/stm32.cfg                        |   78 +-------------------------
 tcl/target/{stm32.cfg =&gt; stm32f1x.cfg}      |    2 +-
 tcl/target/{stm32f2xxx.cfg =&gt; stm32f2x.cfg} |    2 +-
 tcl/target/stm32f2xxx.cfg                   |   64 +---------------------
 tcl/target/stm32xl.cfg                      |    4 +-
 19 files changed, 68 insertions(+), 188 deletions(-)
 rename src/flash/nor/{stm32x.c =&gt; stm32f1x.c} (99%)
 rename src/flash/nor/{stm32f2xxx.c =&gt; stm32f2x.c} (97%)
 copy tcl/target/{stm32.cfg =&gt; stm32f1x.cfg} (96%)
 copy tcl/target/{stm32f2xxx.cfg =&gt; stm32f2x.cfg} (96%)


hooks/post-receive
-- 
Main OpenOCD repository

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002648.html">[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-964-gb5a324e
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2649">[ date ]</a>
              <a href="thread.html#2649">[ thread ]</a>
              <a href="subject.html#2649">[ subject ]</a>
              <a href="author.html#2649">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-svn">More information about the openocd-svn
mailing list</a><br>
</body></html>
