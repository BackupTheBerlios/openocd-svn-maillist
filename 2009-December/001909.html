<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openocd-svn] Main OpenOCD repository branch, master,	updated. v0.3.0-771-g879a04c
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-svn/2009-December/index.html" >
   <LINK REL="made" HREF="mailto:openocd-svn%40lists.berlios.de?Subject=Re%3A%20%5Bopenocd-svn%5D%20Main%20OpenOCD%20repository%20branch%2C%20master%2C%0A%09updated.%20v0.3.0-771-g879a04c&In-Reply-To=%3CE1NG6SZ-0001wF-4x%40sfp-scmshell-1.v30.ch3.sourceforge.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001908.html">
   <LINK REL="Next"  HREF="001910.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.3.0-771-g879a04c</H1>
    <B>Zach Welch</B> 
    <A HREF="mailto:openocd-svn%40lists.berlios.de?Subject=Re%3A%20%5Bopenocd-svn%5D%20Main%20OpenOCD%20repository%20branch%2C%20master%2C%0A%09updated.%20v0.3.0-771-g879a04c&In-Reply-To=%3CE1NG6SZ-0001wF-4x%40sfp-scmshell-1.v30.ch3.sourceforge.com%3E"
       TITLE="[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.3.0-771-g879a04c">zwelch at users.sourceforge.net
       </A><BR>
    <I>Thu Dec  3 08:50:41 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001908.html">[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.3.0-767-gd5e4e23
</A></li>
        <LI>Next message: <A HREF="001910.html">[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.3.0-772-ga976ce2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1909">[ date ]</a>
              <a href="thread.html#1909">[ thread ]</a>
              <a href="subject.html#1909">[ subject ]</a>
              <a href="author.html#1909">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;Main OpenOCD repository&quot;.

The branch, master has been updated
       via  879a04cc6bc2bdf62b19b974524e1f15f2c9da8e (commit)
       via  865efd828a267992db0f2a92a731c5ce23a34236 (commit)
       via  fe9228a32db930be297d4d3b35ffb94d6de1b9ab (commit)
       via  e1ec02bb055fa356b058dddc0a15710e0fdc9870 (commit)
      from  d5e4e23f9a5b1074cd298d5386e638a9fa78b1ad (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit 879a04cc6bc2bdf62b19b974524e1f15f2c9da8e
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Wed Dec 2 17:30:33 2009 -0800

    remove #if HAVE_JTAG_INTERFACE_H from minidriver.h
    
    Adds two &quot;minidriver_imp.h&quot; files, so the right one is allowed to be
    &quot;#included&quot; by the Makefile logic.

diff --git a/src/jtag/Makefile.am b/src/jtag/Makefile.am
index c735897..421987c 100644
--- a/src/jtag/Makefile.am
+++ b/src/jtag/Makefile.am
@@ -11,6 +11,9 @@ libjtag_la_LIBADD =
 
 if MINIDRIVER
 
+# for minidriver_imp.h
+AM_CPPFLAGS += -I$(srcdir)/minidriver
+
 if ZY1000
 DRIVERFILES += zy1000/zy1000.c
 AM_CPPFLAGS += -I$(srcdir)/zy1000
@@ -27,6 +30,9 @@ DRIVERFILES += commands.c
 SUBDIRS += drivers
 libjtag_la_LIBADD += $(top_builddir)/src/jtag/drivers/libocdjtagdrivers.la
 
+# for minidriver_imp.h
+AM_CPPFLAGS += -I$(srcdir)/drivers
+
 endif
 # endif // MINIDRIVER
 
@@ -43,6 +49,7 @@ noinst_HEADERS = \
 	interfaces.h \
 	minidriver.h \
 	jtag.h \
+	minidriver/minidriver_imp.h \
 	minidummy/jtag_minidriver.h
 
 EXTRA_DIST = startup.tcl
diff --git a/src/jtag/drivers/Makefile.am b/src/jtag/drivers/Makefile.am
index 0a007b4..15fbae3 100644
--- a/src/jtag/drivers/Makefile.am
+++ b/src/jtag/drivers/Makefile.am
@@ -65,6 +65,7 @@ endif
 noinst_HEADERS = \
 	bitbang.h \
 	bitq.h \
+	minidriver_imp.h \
 	rlink.h \
 	rlink_dtc_cmd.h \
 	rlink_ep1_cmd.h \
diff --git a/src/jtag/drivers/minidriver_imp.h b/src/jtag/drivers/minidriver_imp.h
new file mode 100644
index 0000000..f60580c
--- /dev/null
+++ b/src/jtag/drivers/minidriver_imp.h
@@ -0,0 +1,47 @@
+/***************************************************************************
+ *   Copyright (C) 2005 by Dominic Rath &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">Dominic.Rath at gmx.de</A>&gt;              *
+ *   Copyright (C) 2007,2008 &#195;&#152;yvind Harboe &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">oyvind.harboe at zylin.com</A>&gt;       *
+ *   Copyright (C) 2009 Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;             *
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ *   This program is distributed in the hope that it will be useful,       *
+ *   but WITHOUT ANY WARRANTY; without even the implied warranty of        *
+ *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         *
+ *   GNU General Public License for more details.                          *
+ *                                                                         *
+ *   You should have received a copy of the GNU General Public License     *
+ *   along with this program; if not, write to the                         *
+ *   Free Software Foundation, Inc.,                                       *
+ *   59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.             *
+ ***************************************************************************/
+#ifndef MINIDRIVER_IMP_H
+#define MINIDRIVER_IMP_H
+
+#include &quot;commands.h&quot;
+
+static inline void interface_jtag_alloc_in_value32(struct scan_field *field)
+{
+	field-&gt;in_value = (uint8_t *)cmd_queue_alloc(4);
+}
+
+static inline void interface_jtag_add_scan_check_alloc(struct scan_field *field)
+{
+	unsigned num_bytes = DIV_ROUND_UP(field-&gt;num_bits, 8);
+	field-&gt;in_value = (uint8_t *)cmd_queue_alloc(num_bytes);
+}
+
+void interface_jtag_add_dr_out(struct jtag_tap* tap,
+		int num_fields, const int* num_bits, const uint32_t* value,
+		tap_state_t end_state);
+
+void interface_jtag_add_callback(jtag_callback1_t f, jtag_callback_data_t data0);
+
+void interface_jtag_add_callback4(jtag_callback_t f, jtag_callback_data_t data0,
+		jtag_callback_data_t data1, jtag_callback_data_t data2,
+		jtag_callback_data_t data3);
+
+#endif // MINIDRIVER_IMP_H
diff --git a/src/jtag/minidriver.h b/src/jtag/minidriver.h
index 392a190..ea780fa 100644
--- a/src/jtag/minidriver.h
+++ b/src/jtag/minidriver.h
@@ -26,13 +26,14 @@
 #ifndef MINIDRIVER_H
 #define MINIDRIVER_H
 
-/* @page jtagminidriver JTAG Mini-Driver
+/**
+ * @page jtagminidriver JTAG Mini-Driver
  *
  * The JTAG minidriver interface allows the definition of alternate
  * interface functions, instead of the built-in asynchronous driver
  * module that is used by the standard JTAG interface drivers.
  *
- * In addtion to the functions defined in the c minidriver.h file, the
+ * In addtion to the functions defined in the @c minidriver.h file, the
  * @c jtag_minidriver.h file must declare the following functions (or
  * define static inline versions of them):
  * - jtag_add_callback
@@ -44,54 +45,9 @@
  * - default_interface_jtag_execute_queue()
  */
 
-#ifdef HAVE_JTAG_MINIDRIVER_H
-
-#include &quot;jtag_minidriver.h&quot;
-
-static inline void interface_jtag_alloc_in_value32(struct scan_field *field)
-{
-	field-&gt;in_value = field-&gt;intmp;
-}
-
-static inline void interface_jtag_add_scan_check_alloc(struct scan_field *field)
-{
-	/* We're executing this synchronously, so try to use local storage. */
-	if (field-&gt;num_bits &gt; 32)
-	{
-		unsigned num_bytes = DIV_ROUND_UP(field-&gt;num_bits, 8);
-		field-&gt;in_value = (uint8_t *)malloc(num_bytes);
-		field-&gt;allocated = 1;
-	}
-	else
-		field-&gt;in_value = field-&gt;intmp;
-}
-
-#else
-
-#include &quot;commands.h&quot;
-
-static inline void interface_jtag_alloc_in_value32(struct scan_field *field)
-{
-	field-&gt;in_value = (uint8_t *)cmd_queue_alloc(4);
-}
-
-static inline void interface_jtag_add_scan_check_alloc(struct scan_field *field)
-{
-	unsigned num_bytes = DIV_ROUND_UP(field-&gt;num_bits, 8);
-	field-&gt;in_value = (uint8_t *)cmd_queue_alloc(num_bytes);
-}
-
-void interface_jtag_add_dr_out(struct jtag_tap* tap,
-		int num_fields, const int* num_bits, const uint32_t* value,
-		tap_state_t end_state);
-
-void interface_jtag_add_callback(jtag_callback1_t f, jtag_callback_data_t data0);
-
-void interface_jtag_add_callback4(jtag_callback_t f, jtag_callback_data_t data0,
-		jtag_callback_data_t data1, jtag_callback_data_t data2,
-		jtag_callback_data_t data3);
-
-#endif
+// this header will be provided by the minidriver implementation,
+// and it may provide additional declarations that must be defined.
+#include &quot;minidriver_imp.h&quot;
 
 int interface_jtag_add_ir_scan(
 		int num_fields, const struct scan_field* fields,
diff --git a/src/jtag/minidriver/minidriver_imp.h b/src/jtag/minidriver/minidriver_imp.h
new file mode 100644
index 0000000..e371514
--- /dev/null
+++ b/src/jtag/minidriver/minidriver_imp.h
@@ -0,0 +1,44 @@
+/***************************************************************************
+ *   Copyright (C) 2005 by Dominic Rath &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">Dominic.Rath at gmx.de</A>&gt;              *
+ *   Copyright (C) 2007,2008 &#195;&#152;yvind Harboe &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">oyvind.harboe at zylin.com</A>&gt;       *
+ *   Copyright (C) 2009 Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;             *
+ *                                                                         *
+ *   This program is free software; you can redistribute it and/or modify  *
+ *   it under the terms of the GNU General Public License as published by  *
+ *   the Free Software Foundation; either version 2 of the License, or     *
+ *   (at your option) any later version.                                   *
+ *                                                                         *
+ *   This program is distributed in the hope that it will be useful,       *
+ *   but WITHOUT ANY WARRANTY; without even the implied warranty of        *
+ *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         *
+ *   GNU General Public License for more details.                          *
+ *                                                                         *
+ *   You should have received a copy of the GNU General Public License     *
+ *   along with this program; if not, write to the                         *
+ *   Free Software Foundation, Inc.,                                       *
+ *   59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.             *
+ ***************************************************************************/
+#ifndef MINIDRIVER_IMP_H
+#define MINIDRIVER_IMP_H
+
+#include &quot;jtag_minidriver.h&quot;
+
+static inline void interface_jtag_alloc_in_value32(struct scan_field *field)
+{
+	field-&gt;in_value = field-&gt;intmp;
+}
+
+static inline void interface_jtag_add_scan_check_alloc(struct scan_field *field)
+{
+	/* We're executing this synchronously, so try to use local storage. */
+	if (field-&gt;num_bits &gt; 32)
+	{
+		unsigned num_bytes = DIV_ROUND_UP(field-&gt;num_bits, 8);
+		field-&gt;in_value = (uint8_t *)malloc(num_bytes);
+		field-&gt;allocated = 1;
+	}
+	else
+		field-&gt;in_value = field-&gt;intmp;
+}
+
+#endif // MINIDRIVER_IMP_H

commit 865efd828a267992db0f2a92a731c5ce23a34236
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Wed Dec 2 17:18:05 2009 -0800

    move jtag drivers to src/jtag/drivers
    
    Moves JTAG interface drivers to src/jtag/drivers/,
    Adds src/jtag/drivers/Makefile.am.
    Builds libocdjtagdrivers.la.
    
    Flattens the rlink driver files into the drivers/ directory, adding
    the 'rlink_' prefix or '.rlink' suffix as appropriate.

diff --git a/configure.in b/configure.in
index 7b2b4af..5020ed6 100644
--- a/configure.in
+++ b/configure.in
@@ -1117,6 +1117,7 @@ AC_OUTPUT(dnl
     src/Makefile dnl
     src/helper/Makefile dnl
     src/jtag/Makefile dnl
+    src/jtag/drivers/Makefile dnl
     src/xsvf/Makefile dnl
     src/svf/Makefile dnl
     src/target/Makefile dnl
diff --git a/src/jtag/Makefile.am b/src/jtag/Makefile.am
index 5254a2b..c735897 100644
--- a/src/jtag/Makefile.am
+++ b/src/jtag/Makefile.am
@@ -5,7 +5,9 @@ AM_CPPFLAGS = \
 METASOURCES = AUTO
 noinst_LTLIBRARIES = libjtag.la
 
+SUBDIRS =
 DRIVERFILES =
+libjtag_la_LIBADD =
 
 if MINIDRIVER
 
@@ -20,63 +22,14 @@ endif
 
 else
 
-# Standard Driver: common files
-DRIVERFILES += driver.c commands.c
+DRIVERFILES += commands.c
 
-if USB
-DRIVERFILES += usb_common.c
-endif
-
-if BITBANG
-DRIVERFILES += bitbang.c
-endif
-if PARPORT
-DRIVERFILES += parport.c
-endif
-if DUMMY
-DRIVERFILES += dummy.c
-endif
-if FT2232_DRIVER
-DRIVERFILES += ft2232.c
-endif
-if AMTJTAGACCEL
-DRIVERFILES += amt_jtagaccel.c
-endif
-if EP93XX
-DRIVERFILES += ep93xx.c
-endif
-if AT91RM9200
-DRIVERFILES += at91rm9200.c
-endif
-if GW16012
-DRIVERFILES += gw16012.c
-endif
-if BITQ
-DRIVERFILES += bitq.c
-endif
-if PRESTO_DRIVER
-DRIVERFILES += presto.c
-endif
-if USBPROG
-DRIVERFILES += usbprog.c
-endif
-if JLINK
-DRIVERFILES += jlink.c
-endif
-if RLINK
-DRIVERFILES += rlink/rlink.c rlink/rlink_speed_table.c
-endif
-if VSLLINK
-DRIVERFILES += vsllink.c
-endif
-if ARMJTAGEW
-DRIVERFILES += arm-jtag-ew.c
-endif
+SUBDIRS += drivers
+libjtag_la_LIBADD += $(top_builddir)/src/jtag/drivers/libocdjtagdrivers.la
 
 endif
 # endif // MINIDRIVER
 
-
 libjtag_la_SOURCES = \
 	core.c \
 	interface.c \
@@ -85,19 +38,12 @@ libjtag_la_SOURCES = \
 	$(DRIVERFILES)
 
 noinst_HEADERS = \
+	commands.h \
 	interface.h \
 	interfaces.h \
-	commands.h \
 	minidriver.h \
-	bitbang.h \
 	jtag.h \
-	bitq.h \
-	rlink/dtc_cmd.h \
-	rlink/ep1_cmd.h \
-	rlink/rlink.h \
-	rlink/st7.h \
-	minidummy/jtag_minidriver.h \
-	usb_common.h
+	minidummy/jtag_minidriver.h
 
 EXTRA_DIST = startup.tcl
 
diff --git a/src/jtag/Makefile.am b/src/jtag/drivers/Makefile.am
similarity index 56%
copy from src/jtag/Makefile.am
copy to src/jtag/drivers/Makefile.am
index 5254a2b..0a007b4 100644
--- a/src/jtag/Makefile.am
+++ b/src/jtag/drivers/Makefile.am
@@ -1,27 +1,16 @@
 AM_CPPFLAGS = \
 	-I$(top_srcdir)/src/helper \
-	-I$(top_srcdir)/src/target
+	-I$(top_srcdir)/src/jtag
 
-METASOURCES = AUTO
-noinst_LTLIBRARIES = libjtag.la
+noinst_LTLIBRARIES = libocdjtagdrivers.la
 
-DRIVERFILES =
-
-if MINIDRIVER
-
-if ZY1000
-DRIVERFILES += zy1000/zy1000.c
-AM_CPPFLAGS += -I$(srcdir)/zy1000
-endif
-if MINIDRIVER_DUMMY
-DRIVERFILES += minidummy/minidummy.c commands.c
-AM_CPPFLAGS += -I$(srcdir)/minidummy
-endif
+libocdjtagdrivers_la_SOURCES = \
+	$(DRIVERFILES)
 
-else
+DRIVERFILES =
 
 # Standard Driver: common files
-DRIVERFILES += driver.c commands.c
+DRIVERFILES += driver.c
 
 if USB
 DRIVERFILES += usb_common.c
@@ -64,7 +53,7 @@ if JLINK
 DRIVERFILES += jlink.c
 endif
 if RLINK
-DRIVERFILES += rlink/rlink.c rlink/rlink_speed_table.c
+DRIVERFILES += rlink.c rlink_speed_table.c
 endif
 if VSLLINK
 DRIVERFILES += vsllink.c
@@ -73,32 +62,13 @@ if ARMJTAGEW
 DRIVERFILES += arm-jtag-ew.c
 endif
 
-endif
-# endif // MINIDRIVER
-
-
-libjtag_la_SOURCES = \
-	core.c \
-	interface.c \
-	interfaces.c \
-	tcl.c \
-	$(DRIVERFILES)
-
 noinst_HEADERS = \
-	interface.h \
-	interfaces.h \
-	commands.h \
-	minidriver.h \
 	bitbang.h \
-	jtag.h \
 	bitq.h \
-	rlink/dtc_cmd.h \
-	rlink/ep1_cmd.h \
-	rlink/rlink.h \
-	rlink/st7.h \
-	minidummy/jtag_minidriver.h \
+	rlink.h \
+	rlink_dtc_cmd.h \
+	rlink_ep1_cmd.h \
+	rlink_st7.h \
 	usb_common.h
 
-EXTRA_DIST = startup.tcl
-
 MAINTAINERCLEANFILES = $(srcdir)/Makefile.in
diff --git a/src/jtag/rlink/Makefile b/src/jtag/drivers/Makefile.rlink
similarity index 100%
rename from src/jtag/rlink/Makefile
rename to src/jtag/drivers/Makefile.rlink
diff --git a/src/jtag/amt_jtagaccel.c b/src/jtag/drivers/amt_jtagaccel.c
similarity index 100%
rename from src/jtag/amt_jtagaccel.c
rename to src/jtag/drivers/amt_jtagaccel.c
diff --git a/src/jtag/arm-jtag-ew.c b/src/jtag/drivers/arm-jtag-ew.c
similarity index 100%
rename from src/jtag/arm-jtag-ew.c
rename to src/jtag/drivers/arm-jtag-ew.c
diff --git a/src/jtag/at91rm9200.c b/src/jtag/drivers/at91rm9200.c
similarity index 100%
rename from src/jtag/at91rm9200.c
rename to src/jtag/drivers/at91rm9200.c
diff --git a/src/jtag/bitbang.c b/src/jtag/drivers/bitbang.c
similarity index 100%
rename from src/jtag/bitbang.c
rename to src/jtag/drivers/bitbang.c
diff --git a/src/jtag/bitbang.h b/src/jtag/drivers/bitbang.h
similarity index 100%
rename from src/jtag/bitbang.h
rename to src/jtag/drivers/bitbang.h
diff --git a/src/jtag/bitq.c b/src/jtag/drivers/bitq.c
similarity index 100%
rename from src/jtag/bitq.c
rename to src/jtag/drivers/bitq.c
diff --git a/src/jtag/bitq.h b/src/jtag/drivers/bitq.h
similarity index 100%
rename from src/jtag/bitq.h
rename to src/jtag/drivers/bitq.h
diff --git a/src/jtag/driver.c b/src/jtag/drivers/driver.c
similarity index 100%
rename from src/jtag/driver.c
rename to src/jtag/drivers/driver.c
diff --git a/src/jtag/dummy.c b/src/jtag/drivers/dummy.c
similarity index 100%
rename from src/jtag/dummy.c
rename to src/jtag/drivers/dummy.c
diff --git a/src/jtag/ep93xx.c b/src/jtag/drivers/ep93xx.c
similarity index 100%
rename from src/jtag/ep93xx.c
rename to src/jtag/drivers/ep93xx.c
diff --git a/src/jtag/ft2232.c b/src/jtag/drivers/ft2232.c
similarity index 100%
rename from src/jtag/ft2232.c
rename to src/jtag/drivers/ft2232.c
diff --git a/src/jtag/gw16012.c b/src/jtag/drivers/gw16012.c
similarity index 100%
rename from src/jtag/gw16012.c
rename to src/jtag/drivers/gw16012.c
diff --git a/src/jtag/jlink.c b/src/jtag/drivers/jlink.c
similarity index 100%
rename from src/jtag/jlink.c
rename to src/jtag/drivers/jlink.c
diff --git a/src/jtag/parport.c b/src/jtag/drivers/parport.c
similarity index 100%
rename from src/jtag/parport.c
rename to src/jtag/drivers/parport.c
diff --git a/src/jtag/presto.c b/src/jtag/drivers/presto.c
similarity index 100%
rename from src/jtag/presto.c
rename to src/jtag/drivers/presto.c
diff --git a/src/jtag/rlink/rlink.c b/src/jtag/drivers/rlink.c
similarity index 99%
rename from src/jtag/rlink/rlink.c
rename to src/jtag/drivers/rlink.c
index bb33ad8..a039080 100644
--- a/src/jtag/rlink/rlink.c
+++ b/src/jtag/drivers/rlink.c
@@ -31,9 +31,9 @@
 #include &quot;interface.h&quot;
 #include &quot;commands.h&quot;
 #include &quot;rlink.h&quot;
-#include &quot;st7.h&quot;
-#include &quot;ep1_cmd.h&quot;
-#include &quot;dtc_cmd.h&quot;
+#include &quot;rlink_st7.h&quot;
+#include &quot;rlink_ep1_cmd.h&quot;
+#include &quot;rlink_dtc_cmd.h&quot;
 #include &quot;usb_common.h&quot;
 
 
diff --git a/src/jtag/rlink/rlink.h b/src/jtag/drivers/rlink.h
similarity index 100%
rename from src/jtag/rlink/rlink.h
rename to src/jtag/drivers/rlink.h
diff --git a/src/jtag/rlink/call.m4 b/src/jtag/drivers/rlink_call.m4
similarity index 100%
rename from src/jtag/rlink/call.m4
rename to src/jtag/drivers/rlink_call.m4
diff --git a/src/jtag/rlink/dtc_cmd.h b/src/jtag/drivers/rlink_dtc_cmd.h
similarity index 100%
rename from src/jtag/rlink/dtc_cmd.h
rename to src/jtag/drivers/rlink_dtc_cmd.h
diff --git a/src/jtag/rlink/ep1_cmd.h b/src/jtag/drivers/rlink_ep1_cmd.h
similarity index 100%
rename from src/jtag/rlink/ep1_cmd.h
rename to src/jtag/drivers/rlink_ep1_cmd.h
diff --git a/src/jtag/rlink/init.m4 b/src/jtag/drivers/rlink_init.m4
similarity index 100%
rename from src/jtag/rlink/init.m4
rename to src/jtag/drivers/rlink_init.m4
diff --git a/src/jtag/rlink/rlink_speed_table.c b/src/jtag/drivers/rlink_speed_table.c
similarity index 99%
rename from src/jtag/rlink/rlink_speed_table.c
rename to src/jtag/drivers/rlink_speed_table.c
index 2ef62ee..fa40fe8 100644
--- a/src/jtag/rlink/rlink_speed_table.c
+++ b/src/jtag/drivers/rlink_speed_table.c
@@ -4,7 +4,7 @@
 #endif
 
 #include &quot;rlink.h&quot;
-#include &quot;st7.h&quot;
+#include &quot;rlink_st7.h&quot;
 
 static const uint8_t dtc_64[] = {
 	0, 2, 68, 84, 67, 2, 13, 160, 176, 151, 147, 182, 141, 152, 177, 129, 148,
diff --git a/src/jtag/rlink/st7.h b/src/jtag/drivers/rlink_st7.h
similarity index 100%
rename from src/jtag/rlink/st7.h
rename to src/jtag/drivers/rlink_st7.h
diff --git a/src/jtag/usb_common.c b/src/jtag/drivers/usb_common.c
similarity index 100%
rename from src/jtag/usb_common.c
rename to src/jtag/drivers/usb_common.c
diff --git a/src/jtag/usb_common.h b/src/jtag/drivers/usb_common.h
similarity index 100%
rename from src/jtag/usb_common.h
rename to src/jtag/drivers/usb_common.h
diff --git a/src/jtag/usbprog.c b/src/jtag/drivers/usbprog.c
similarity index 100%
rename from src/jtag/usbprog.c
rename to src/jtag/drivers/usbprog.c
diff --git a/src/jtag/vsllink.c b/src/jtag/drivers/vsllink.c
similarity index 100%
rename from src/jtag/vsllink.c
rename to src/jtag/drivers/vsllink.c

commit fe9228a32db930be297d4d3b35ffb94d6de1b9ab
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Wed Dec 2 15:54:15 2009 -0800

    move nor drivers to src/flash/nor
    
    Moves NOR flash drivers to 'src/flash/nor/'.
    Adds 'src/flash/nor/Makefile.am'.
    Builds 'libocdflashnor.la'.

diff --git a/configure.in b/configure.in
index 3680cac..7b2b4af 100644
--- a/configure.in
+++ b/configure.in
@@ -1122,6 +1122,7 @@ AC_OUTPUT(dnl
     src/target/Makefile dnl
     src/server/Makefile dnl
     src/flash/Makefile dnl
+    src/flash/nor/Makefile dnl
     src/flash/nand/Makefile dnl
     src/pld/Makefile dnl
     doc/Makefile dnl
diff --git a/src/flash/Makefile.am b/src/flash/Makefile.am
index 353fcf1..54a5116 100644
--- a/src/flash/Makefile.am
+++ b/src/flash/Makefile.am
@@ -1,4 +1,5 @@
 SUBDIRS = \
+	nor \
 	nand
 
 AM_CPPFLAGS = \
@@ -9,66 +10,24 @@ AM_CPPFLAGS = \
 METASOURCES = AUTO
 noinst_LTLIBRARIES = libflash.la
 libflash_la_SOURCES = \
-	$(FLASH_SRCS) \
-	$(NAND_SRCS) \
-	mflash.c
-
-libflash_la_LIBADD = \
-	$(top_builddir)/src/flash/nand/libocdflashnand.la
-
-FLASH_SRCS = \
 	common.c \
-	cfi.c \
-	non_cfi.c \
-	faux.c \
-	$(FLASH_DEVICES_SRCS) \
-	flash.c
-
-FLASH_DEVICES_SRCS = \
-	aduc702x.c \
-	at91sam3.c \
-	at91sam7.c \
-	avrf.c \
-	ecos.c \
-	lpc2000.c \
-	lpc288x.c \
-	lpc2900.c \
-	ocl.c \
-	pic32mx.c \
-	stellaris.c \
-	stm32x.c \
-	str7x.c \
-	str9x.c \
-	str9xpec.c \
-	tms470.c
-
-NAND_SRCS = \
+	flash.c \
 	arm_nandio.c \
 	nand_ecc.c \
 	nand_ecc_kw.c \
-	nand.c
+	nand.c \
+	mflash.c
+
+libflash_la_LIBADD = \
+	$(top_builddir)/src/flash/nor/libocdflashnor.la \
+	$(top_builddir)/src/flash/nand/libocdflashnand.la
 
 noinst_HEADERS = \
 	arm_nandio.h \
-	at91sam7.h \
-	at91sam3.h \
-	avrf.h \
-	cfi.h \
 	common.h \
 	flash.h \
-	lpc2000.h \
-	lpc288x.h \
 	mflash.h \
-	non_cfi.h \
-	nand.h \
-	ocl.h \
-	pic32mx.h \
-	stellaris.h \
-	stm32x.h \
-	str7x.h \
-	str9x.h \
-	str9xpec.h \
-	tms470.h
+	nand.h
 
 EXTRA_DIST = startup.tcl
 
diff --git a/src/flash/nor/Makefile.am b/src/flash/nor/Makefile.am
new file mode 100644
index 0000000..d2d9998
--- /dev/null
+++ b/src/flash/nor/Makefile.am
@@ -0,0 +1,46 @@
+AM_CPPFLAGS = \
+	-I$(top_srcdir)/src/helper \
+	-I$(top_srcdir)/src/jtag \
+	-I$(top_srcdir)/src/flash \
+	-I$(top_srcdir)/src/target
+
+noinst_LTLIBRARIES = libocdflashnor.la
+libocdflashnor_la_SOURCES = \
+	aduc702x.c \
+	at91sam3.c \
+	at91sam7.c \
+	avrf.c \
+	cfi.c \
+	ecos.c \
+	faux.c \
+	lpc2000.c \
+	lpc288x.c \
+	lpc2900.c \
+	non_cfi.c \
+	ocl.c \
+	pic32mx.c \
+	stellaris.c \
+	stm32x.c \
+	str7x.c \
+	str9x.c \
+	str9xpec.c \
+	tms470.c
+
+noinst_HEADERS = \
+	at91sam7.h \
+	at91sam3.h \
+	avrf.h \
+	cfi.h \
+	lpc2000.h \
+	lpc288x.h \
+	non_cfi.h \
+	ocl.h \
+	pic32mx.h \
+	stellaris.h \
+	stm32x.h \
+	str7x.h \
+	str9x.h \
+	str9xpec.h \
+	tms470.h
+
+MAINTAINERCLEANFILES = $(srcdir)/Makefile.in
diff --git a/src/flash/aduc702x.c b/src/flash/nor/aduc702x.c
similarity index 100%
rename from src/flash/aduc702x.c
rename to src/flash/nor/aduc702x.c
diff --git a/src/flash/at91sam3.c b/src/flash/nor/at91sam3.c
similarity index 100%
rename from src/flash/at91sam3.c
rename to src/flash/nor/at91sam3.c
diff --git a/src/flash/at91sam3.h b/src/flash/nor/at91sam3.h
similarity index 100%
rename from src/flash/at91sam3.h
rename to src/flash/nor/at91sam3.h
diff --git a/src/flash/at91sam7.c b/src/flash/nor/at91sam7.c
similarity index 100%
rename from src/flash/at91sam7.c
rename to src/flash/nor/at91sam7.c
diff --git a/src/flash/at91sam7.h b/src/flash/nor/at91sam7.h
similarity index 100%
rename from src/flash/at91sam7.h
rename to src/flash/nor/at91sam7.h
diff --git a/src/flash/avrf.c b/src/flash/nor/avrf.c
similarity index 100%
rename from src/flash/avrf.c
rename to src/flash/nor/avrf.c
diff --git a/src/flash/avrf.h b/src/flash/nor/avrf.h
similarity index 100%
rename from src/flash/avrf.h
rename to src/flash/nor/avrf.h
diff --git a/src/flash/cfi.c b/src/flash/nor/cfi.c
similarity index 100%
rename from src/flash/cfi.c
rename to src/flash/nor/cfi.c
diff --git a/src/flash/cfi.h b/src/flash/nor/cfi.h
similarity index 100%
rename from src/flash/cfi.h
rename to src/flash/nor/cfi.h
diff --git a/src/flash/ecos.c b/src/flash/nor/ecos.c
similarity index 100%
rename from src/flash/ecos.c
rename to src/flash/nor/ecos.c
diff --git a/src/flash/faux.c b/src/flash/nor/faux.c
similarity index 100%
rename from src/flash/faux.c
rename to src/flash/nor/faux.c
diff --git a/src/flash/lpc2000.c b/src/flash/nor/lpc2000.c
similarity index 100%
rename from src/flash/lpc2000.c
rename to src/flash/nor/lpc2000.c
diff --git a/src/flash/lpc2000.h b/src/flash/nor/lpc2000.h
similarity index 100%
rename from src/flash/lpc2000.h
rename to src/flash/nor/lpc2000.h
diff --git a/src/flash/lpc288x.c b/src/flash/nor/lpc288x.c
similarity index 100%
rename from src/flash/lpc288x.c
rename to src/flash/nor/lpc288x.c
diff --git a/src/flash/lpc288x.h b/src/flash/nor/lpc288x.h
similarity index 100%
rename from src/flash/lpc288x.h
rename to src/flash/nor/lpc288x.h
diff --git a/src/flash/lpc2900.c b/src/flash/nor/lpc2900.c
similarity index 100%
rename from src/flash/lpc2900.c
rename to src/flash/nor/lpc2900.c
diff --git a/src/flash/non_cfi.c b/src/flash/nor/non_cfi.c
similarity index 100%
rename from src/flash/non_cfi.c
rename to src/flash/nor/non_cfi.c
diff --git a/src/flash/non_cfi.h b/src/flash/nor/non_cfi.h
similarity index 100%
rename from src/flash/non_cfi.h
rename to src/flash/nor/non_cfi.h
diff --git a/src/flash/ocl.c b/src/flash/nor/ocl.c
similarity index 100%
rename from src/flash/ocl.c
rename to src/flash/nor/ocl.c
diff --git a/src/flash/ocl.h b/src/flash/nor/ocl.h
similarity index 100%
rename from src/flash/ocl.h
rename to src/flash/nor/ocl.h
diff --git a/src/flash/pic32mx.c b/src/flash/nor/pic32mx.c
similarity index 100%
rename from src/flash/pic32mx.c
rename to src/flash/nor/pic32mx.c
diff --git a/src/flash/pic32mx.h b/src/flash/nor/pic32mx.h
similarity index 100%
rename from src/flash/pic32mx.h
rename to src/flash/nor/pic32mx.h
diff --git a/src/flash/stellaris.c b/src/flash/nor/stellaris.c
similarity index 100%
rename from src/flash/stellaris.c
rename to src/flash/nor/stellaris.c
diff --git a/src/flash/stellaris.h b/src/flash/nor/stellaris.h
similarity index 100%
rename from src/flash/stellaris.h
rename to src/flash/nor/stellaris.h
diff --git a/src/flash/stm32x.c b/src/flash/nor/stm32x.c
similarity index 100%
rename from src/flash/stm32x.c
rename to src/flash/nor/stm32x.c
diff --git a/src/flash/stm32x.h b/src/flash/nor/stm32x.h
similarity index 100%
rename from src/flash/stm32x.h
rename to src/flash/nor/stm32x.h
diff --git a/src/flash/str7x.c b/src/flash/nor/str7x.c
similarity index 100%
rename from src/flash/str7x.c
rename to src/flash/nor/str7x.c
diff --git a/src/flash/str7x.h b/src/flash/nor/str7x.h
similarity index 100%
rename from src/flash/str7x.h
rename to src/flash/nor/str7x.h
diff --git a/src/flash/str9x.c b/src/flash/nor/str9x.c
similarity index 100%
rename from src/flash/str9x.c
rename to src/flash/nor/str9x.c
diff --git a/src/flash/str9x.h b/src/flash/nor/str9x.h
similarity index 100%
rename from src/flash/str9x.h
rename to src/flash/nor/str9x.h
diff --git a/src/flash/str9xpec.c b/src/flash/nor/str9xpec.c
similarity index 100%
rename from src/flash/str9xpec.c
rename to src/flash/nor/str9xpec.c
diff --git a/src/flash/str9xpec.h b/src/flash/nor/str9xpec.h
similarity index 100%
rename from src/flash/str9xpec.h
rename to src/flash/nor/str9xpec.h
diff --git a/src/flash/tms470.c b/src/flash/nor/tms470.c
similarity index 100%
rename from src/flash/tms470.c
rename to src/flash/nor/tms470.c
diff --git a/src/flash/tms470.h b/src/flash/nor/tms470.h
similarity index 100%
rename from src/flash/tms470.h
rename to src/flash/nor/tms470.h

commit e1ec02bb055fa356b058dddc0a15710e0fdc9870
Author: Zachary T Welch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">zw at superlucidity.net</A>&gt;
Date:   Tue Dec 1 22:37:11 2009 -0800

    move nand drivers to src/flash/nand/
    
    Moves NAND drivers to src/flash/nand/.
    Adds src/flash/nand/Makefile.am.
    Builds libocdflashnand.la.

diff --git a/configure.in b/configure.in
index dbddcb2..3680cac 100644
--- a/configure.in
+++ b/configure.in
@@ -1122,6 +1122,7 @@ AC_OUTPUT(dnl
     src/target/Makefile dnl
     src/server/Makefile dnl
     src/flash/Makefile dnl
+    src/flash/nand/Makefile dnl
     src/pld/Makefile dnl
     doc/Makefile dnl
   )
diff --git a/src/flash/Makefile.am b/src/flash/Makefile.am
index 94cc86e..353fcf1 100644
--- a/src/flash/Makefile.am
+++ b/src/flash/Makefile.am
@@ -1,3 +1,6 @@
+SUBDIRS = \
+	nand
+
 AM_CPPFLAGS = \
 	-I$(top_srcdir)/src/helper \
 	-I$(top_srcdir)/src/jtag \
@@ -10,6 +13,9 @@ libflash_la_SOURCES = \
 	$(NAND_SRCS) \
 	mflash.c
 
+libflash_la_LIBADD = \
+	$(top_builddir)/src/flash/nand/libocdflashnand.la
+
 FLASH_SRCS = \
 	common.c \
 	cfi.c \
@@ -40,22 +46,8 @@ NAND_SRCS = \
 	arm_nandio.c \
 	nand_ecc.c \
 	nand_ecc_kw.c \
-	$(NAND_DEVICES_SRCS) \
 	nand.c
 
-NAND_DEVICES_SRCS = \
-	nonce_nand.c \
-	davinci_nand.c \
-	lpc3180_nand_controller.c \
-	mx3_nand.c \
-	orion_nand.c \
-	s3c24xx_nand.c \
-	s3c2410_nand.c \
-	s3c2412_nand.c \
-	s3c2440_nand.c \
-	s3c2443_nand.c
-
-
 noinst_HEADERS = \
 	arm_nandio.h \
 	at91sam7.h \
@@ -66,9 +58,7 @@ noinst_HEADERS = \
 	flash.h \
 	lpc2000.h \
 	lpc288x.h \
-	lpc3180_nand_controller.h \
 	mflash.h \
-	mx3_nand.h \
 	non_cfi.h \
 	nand.h \
 	ocl.h \
@@ -78,9 +68,7 @@ noinst_HEADERS = \
 	str7x.h \
 	str9x.h \
 	str9xpec.h \
-	tms470.h \
-	s3c24xx_nand.h \
-	s3c24xx_regs_nand.h
+	tms470.h
 
 EXTRA_DIST = startup.tcl
 
diff --git a/src/flash/nand/Makefile.am b/src/flash/nand/Makefile.am
new file mode 100644
index 0000000..e95717e
--- /dev/null
+++ b/src/flash/nand/Makefile.am
@@ -0,0 +1,27 @@
+AM_CPPFLAGS = \
+	-I$(top_srcdir)/src/flash \
+	-I$(top_srcdir)/src/helper \
+	-I$(top_srcdir)/src/jtag \
+	-I$(top_srcdir)/src/target
+
+noinst_LTLIBRARIES = libocdflashnand.la
+
+libocdflashnand_la_SOURCES = \
+	nonce.c \
+	davinci.c \
+	lpc3180.c \
+	mx3.c \
+	orion.c \
+	s3c24xx.c \
+	s3c2410.c \
+	s3c2412.c \
+	s3c2440.c \
+	s3c2443.c
+
+noinst_HEADERS = \
+	lpc3180.h \
+	mx3.h \
+	s3c24xx.h \
+	s3c24xx_regs.h
+
+MAINTAINERCLEANFILES = $(srcdir)/Makefile.in
diff --git a/src/flash/davinci_nand.c b/src/flash/nand/davinci.c
similarity index 100%
rename from src/flash/davinci_nand.c
rename to src/flash/nand/davinci.c
diff --git a/src/flash/lpc3180_nand_controller.c b/src/flash/nand/lpc3180.c
similarity index 99%
rename from src/flash/lpc3180_nand_controller.c
rename to src/flash/nand/lpc3180.c
index 146c843..031e6b1 100644
--- a/src/flash/lpc3180_nand_controller.c
+++ b/src/flash/nand/lpc3180.c
@@ -21,7 +21,7 @@
 #include &quot;config.h&quot;
 #endif
 
-#include &quot;lpc3180_nand_controller.h&quot;
+#include &quot;lpc3180.h&quot;
 #include &quot;nand.h&quot;
 
 static int lpc3180_reset(struct nand_device *nand);
diff --git a/src/flash/lpc3180_nand_controller.h b/src/flash/nand/lpc3180.h
similarity index 100%
rename from src/flash/lpc3180_nand_controller.h
rename to src/flash/nand/lpc3180.h
diff --git a/src/flash/mx3_nand.c b/src/flash/nand/mx3.c
similarity index 99%
rename from src/flash/mx3_nand.c
rename to src/flash/nand/mx3.c
index 1dc4fcb..21577a6 100644
--- a/src/flash/mx3_nand.c
+++ b/src/flash/nand/mx3.c
@@ -35,7 +35,7 @@ get_next_halfword_from_sram_buffer() not tested
 #include &quot;config.h&quot;
 #endif
 
-#include &quot;mx3_nand.h&quot;
+#include &quot;mx3.h&quot;
 
 static const char target_not_halted_err_msg[] =
 	&quot;target must be halted to use mx3 NAND flash controller&quot;;
diff --git a/src/flash/mx3_nand.h b/src/flash/nand/mx3.h
similarity index 100%
rename from src/flash/mx3_nand.h
rename to src/flash/nand/mx3.h
diff --git a/src/flash/nonce_nand.c b/src/flash/nand/nonce.c
similarity index 100%
rename from src/flash/nonce_nand.c
rename to src/flash/nand/nonce.c
diff --git a/src/flash/orion_nand.c b/src/flash/nand/orion.c
similarity index 100%
rename from src/flash/orion_nand.c
rename to src/flash/nand/orion.c
diff --git a/src/flash/s3c2410_nand.c b/src/flash/nand/s3c2410.c
similarity index 99%
rename from src/flash/s3c2410_nand.c
rename to src/flash/nand/s3c2410.c
index ca50c99..3c391bc 100644
--- a/src/flash/s3c2410_nand.c
+++ b/src/flash/nand/s3c2410.c
@@ -28,7 +28,7 @@
 #include &quot;config.h&quot;
 #endif
 
-#include &quot;s3c24xx_nand.h&quot;
+#include &quot;s3c24xx.h&quot;
 
 NAND_DEVICE_COMMAND_HANDLER(s3c2410_nand_device_command)
 {
diff --git a/src/flash/s3c2412_nand.c b/src/flash/nand/s3c2412.c
similarity index 99%
rename from src/flash/s3c2412_nand.c
rename to src/flash/nand/s3c2412.c
index acc6d99..5784305 100644
--- a/src/flash/s3c2412_nand.c
+++ b/src/flash/nand/s3c2412.c
@@ -28,7 +28,7 @@
 #include &quot;config.h&quot;
 #endif
 
-#include &quot;s3c24xx_nand.h&quot;
+#include &quot;s3c24xx.h&quot;
 
 NAND_DEVICE_COMMAND_HANDLER(s3c2412_nand_device_command)
 {
diff --git a/src/flash/s3c2440_nand.c b/src/flash/nand/s3c2440.c
similarity index 99%
rename from src/flash/s3c2440_nand.c
rename to src/flash/nand/s3c2440.c
index 556f6f1..d1a421e 100644
--- a/src/flash/s3c2440_nand.c
+++ b/src/flash/nand/s3c2440.c
@@ -28,7 +28,7 @@
 #include &quot;config.h&quot;
 #endif
 
-#include &quot;s3c24xx_nand.h&quot;
+#include &quot;s3c24xx.h&quot;
 
 
 NAND_DEVICE_COMMAND_HANDLER(s3c2440_nand_device_command)
diff --git a/src/flash/s3c2443_nand.c b/src/flash/nand/s3c2443.c
similarity index 99%
rename from src/flash/s3c2443_nand.c
rename to src/flash/nand/s3c2443.c
index 311bb69..d341477 100644
--- a/src/flash/s3c2443_nand.c
+++ b/src/flash/nand/s3c2443.c
@@ -28,7 +28,7 @@
 #include &quot;config.h&quot;
 #endif
 
-#include &quot;s3c24xx_nand.h&quot;
+#include &quot;s3c24xx.h&quot;
 
 
 NAND_DEVICE_COMMAND_HANDLER(s3c2443_nand_device_command)
diff --git a/src/flash/s3c24xx_nand.c b/src/flash/nand/s3c24xx.c
similarity index 99%
rename from src/flash/s3c24xx_nand.c
rename to src/flash/nand/s3c24xx.c
index 1a2ece7..d305b22 100644
--- a/src/flash/s3c24xx_nand.c
+++ b/src/flash/nand/s3c24xx.c
@@ -28,7 +28,7 @@
 #include &quot;config.h&quot;
 #endif
 
-#include &quot;s3c24xx_nand.h&quot;
+#include &quot;s3c24xx.h&quot;
 
 
 S3C24XX_DEVICE_COMMAND()
diff --git a/src/flash/s3c24xx_nand.h b/src/flash/nand/s3c24xx.h
similarity index 99%
rename from src/flash/s3c24xx_nand.h
rename to src/flash/nand/s3c24xx.h
index fad33a0..38057b2 100644
--- a/src/flash/s3c24xx_nand.h
+++ b/src/flash/nand/s3c24xx.h
@@ -28,7 +28,7 @@
  */
 
 #include &quot;nand.h&quot;
-#include &quot;s3c24xx_regs_nand.h&quot;
+#include &quot;s3c24xx_regs.h&quot;
 
 struct s3c24xx_nand_controller
 {
diff --git a/src/flash/s3c24xx_regs_nand.h b/src/flash/nand/s3c24xx_regs.h
similarity index 100%
rename from src/flash/s3c24xx_regs_nand.h
rename to src/flash/nand/s3c24xx_regs.h

-----------------------------------------------------------------------

Summary of changes:
 configure.in                                       |    3 +
 src/flash/Makefile.am                              |   75 +++-----------------
 src/flash/nand/Makefile.am                         |   27 +++++++
 src/flash/{davinci_nand.c =&gt; nand/davinci.c}       |    0
 .../{lpc3180_nand_controller.c =&gt; nand/lpc3180.c}  |    2 +-
 .../{lpc3180_nand_controller.h =&gt; nand/lpc3180.h}  |    0
 src/flash/{mx3_nand.c =&gt; nand/mx3.c}               |    2 +-
 src/flash/{mx3_nand.h =&gt; nand/mx3.h}               |    0
 src/flash/{nonce_nand.c =&gt; nand/nonce.c}           |    0
 src/flash/{orion_nand.c =&gt; nand/orion.c}           |    0
 src/flash/{s3c2410_nand.c =&gt; nand/s3c2410.c}       |    2 +-
 src/flash/{s3c2412_nand.c =&gt; nand/s3c2412.c}       |    2 +-
 src/flash/{s3c2440_nand.c =&gt; nand/s3c2440.c}       |    2 +-
 src/flash/{s3c2443_nand.c =&gt; nand/s3c2443.c}       |    2 +-
 src/flash/{s3c24xx_nand.c =&gt; nand/s3c24xx.c}       |    2 +-
 src/flash/{s3c24xx_nand.h =&gt; nand/s3c24xx.h}       |    2 +-
 .../{s3c24xx_regs_nand.h =&gt; nand/s3c24xx_regs.h}   |    0
 src/flash/nor/Makefile.am                          |   46 ++++++++++++
 src/flash/{ =&gt; nor}/aduc702x.c                     |    0
 src/flash/{ =&gt; nor}/at91sam3.c                     |    0
 src/flash/{ =&gt; nor}/at91sam3.h                     |    0
 src/flash/{ =&gt; nor}/at91sam7.c                     |    0
 src/flash/{ =&gt; nor}/at91sam7.h                     |    0
 src/flash/{ =&gt; nor}/avrf.c                         |    0
 src/flash/{ =&gt; nor}/avrf.h                         |    0
 src/flash/{ =&gt; nor}/cfi.c                          |    0
 src/flash/{ =&gt; nor}/cfi.h                          |    0
 src/flash/{ =&gt; nor}/ecos.c                         |    0
 src/flash/{ =&gt; nor}/faux.c                         |    0
 src/flash/{ =&gt; nor}/lpc2000.c                      |    0
 src/flash/{ =&gt; nor}/lpc2000.h                      |    0
 src/flash/{ =&gt; nor}/lpc288x.c                      |    0
 src/flash/{ =&gt; nor}/lpc288x.h                      |    0
 src/flash/{ =&gt; nor}/lpc2900.c                      |    0
 src/flash/{ =&gt; nor}/non_cfi.c                      |    0
 src/flash/{ =&gt; nor}/non_cfi.h                      |    0
 src/flash/{ =&gt; nor}/ocl.c                          |    0
 src/flash/{ =&gt; nor}/ocl.h                          |    0
 src/flash/{ =&gt; nor}/pic32mx.c                      |    0
 src/flash/{ =&gt; nor}/pic32mx.h                      |    0
 src/flash/{ =&gt; nor}/stellaris.c                    |    0
 src/flash/{ =&gt; nor}/stellaris.h                    |    0
 src/flash/{ =&gt; nor}/stm32x.c                       |    0
 src/flash/{ =&gt; nor}/stm32x.h                       |    0
 src/flash/{ =&gt; nor}/str7x.c                        |    0
 src/flash/{ =&gt; nor}/str7x.h                        |    0
 src/flash/{ =&gt; nor}/str9x.c                        |    0
 src/flash/{ =&gt; nor}/str9x.h                        |    0
 src/flash/{ =&gt; nor}/str9xpec.c                     |    0
 src/flash/{ =&gt; nor}/str9xpec.h                     |    0
 src/flash/{ =&gt; nor}/tms470.c                       |    0
 src/flash/{ =&gt; nor}/tms470.h                       |    0
 src/jtag/Makefile.am                               |   73 ++++----------------
 src/jtag/{ =&gt; drivers}/Makefile.am                 |   53 +++-----------
 .../{rlink/Makefile =&gt; drivers/Makefile.rlink}     |    0
 src/jtag/{ =&gt; drivers}/amt_jtagaccel.c             |    0
 src/jtag/{ =&gt; drivers}/arm-jtag-ew.c               |    0
 src/jtag/{ =&gt; drivers}/at91rm9200.c                |    0
 src/jtag/{ =&gt; drivers}/bitbang.c                   |    0
 src/jtag/{ =&gt; drivers}/bitbang.h                   |    0
 src/jtag/{ =&gt; drivers}/bitq.c                      |    0
 src/jtag/{ =&gt; drivers}/bitq.h                      |    0
 src/jtag/{ =&gt; drivers}/driver.c                    |    0
 src/jtag/{ =&gt; drivers}/dummy.c                     |    0
 src/jtag/{ =&gt; drivers}/ep93xx.c                    |    0
 src/jtag/{ =&gt; drivers}/ft2232.c                    |    0
 src/jtag/{ =&gt; drivers}/gw16012.c                   |    0
 src/jtag/{ =&gt; drivers}/jlink.c                     |    0
 .../drivers/minidriver_imp.h}                      |   32 ++++++---
 src/jtag/{ =&gt; drivers}/parport.c                   |    0
 src/jtag/{ =&gt; drivers}/presto.c                    |    0
 src/jtag/{rlink =&gt; drivers}/rlink.c                |    6 +-
 src/jtag/{rlink =&gt; drivers}/rlink.h                |    0
 src/jtag/{rlink/call.m4 =&gt; drivers/rlink_call.m4}  |    0
 .../{rlink/dtc_cmd.h =&gt; drivers/rlink_dtc_cmd.h}   |    0
 .../{rlink/ep1_cmd.h =&gt; drivers/rlink_ep1_cmd.h}   |    0
 src/jtag/{rlink/init.m4 =&gt; drivers/rlink_init.m4}  |    0
 src/jtag/{rlink =&gt; drivers}/rlink_speed_table.c    |    2 +-
 src/jtag/{rlink/st7.h =&gt; drivers/rlink_st7.h}      |    0
 src/jtag/{ =&gt; drivers}/usb_common.c                |    0
 src/jtag/{ =&gt; drivers}/usb_common.h                |    0
 src/jtag/{ =&gt; drivers}/usbprog.c                   |    0
 src/jtag/{ =&gt; drivers}/vsllink.c                   |    0
 src/jtag/minidriver.h                              |   56 ++-------------
 .../minidriver/minidriver_imp.h}                   |   29 +++++---
 85 files changed, 173 insertions(+), 245 deletions(-)
 create mode 100644 src/flash/nand/Makefile.am
 rename src/flash/{davinci_nand.c =&gt; nand/davinci.c} (100%)
 rename src/flash/{lpc3180_nand_controller.c =&gt; nand/lpc3180.c} (99%)
 rename src/flash/{lpc3180_nand_controller.h =&gt; nand/lpc3180.h} (100%)
 rename src/flash/{mx3_nand.c =&gt; nand/mx3.c} (99%)
 rename src/flash/{mx3_nand.h =&gt; nand/mx3.h} (100%)
 rename src/flash/{nonce_nand.c =&gt; nand/nonce.c} (100%)
 rename src/flash/{orion_nand.c =&gt; nand/orion.c} (100%)
 rename src/flash/{s3c2410_nand.c =&gt; nand/s3c2410.c} (99%)
 rename src/flash/{s3c2412_nand.c =&gt; nand/s3c2412.c} (99%)
 rename src/flash/{s3c2440_nand.c =&gt; nand/s3c2440.c} (99%)
 rename src/flash/{s3c2443_nand.c =&gt; nand/s3c2443.c} (99%)
 rename src/flash/{s3c24xx_nand.c =&gt; nand/s3c24xx.c} (99%)
 rename src/flash/{s3c24xx_nand.h =&gt; nand/s3c24xx.h} (99%)
 rename src/flash/{s3c24xx_regs_nand.h =&gt; nand/s3c24xx_regs.h} (100%)
 create mode 100644 src/flash/nor/Makefile.am
 rename src/flash/{ =&gt; nor}/aduc702x.c (100%)
 rename src/flash/{ =&gt; nor}/at91sam3.c (100%)
 rename src/flash/{ =&gt; nor}/at91sam3.h (100%)
 rename src/flash/{ =&gt; nor}/at91sam7.c (100%)
 rename src/flash/{ =&gt; nor}/at91sam7.h (100%)
 rename src/flash/{ =&gt; nor}/avrf.c (100%)
 rename src/flash/{ =&gt; nor}/avrf.h (100%)
 rename src/flash/{ =&gt; nor}/cfi.c (100%)
 rename src/flash/{ =&gt; nor}/cfi.h (100%)
 rename src/flash/{ =&gt; nor}/ecos.c (100%)
 rename src/flash/{ =&gt; nor}/faux.c (100%)
 rename src/flash/{ =&gt; nor}/lpc2000.c (100%)
 rename src/flash/{ =&gt; nor}/lpc2000.h (100%)
 rename src/flash/{ =&gt; nor}/lpc288x.c (100%)
 rename src/flash/{ =&gt; nor}/lpc288x.h (100%)
 rename src/flash/{ =&gt; nor}/lpc2900.c (100%)
 rename src/flash/{ =&gt; nor}/non_cfi.c (100%)
 rename src/flash/{ =&gt; nor}/non_cfi.h (100%)
 rename src/flash/{ =&gt; nor}/ocl.c (100%)
 rename src/flash/{ =&gt; nor}/ocl.h (100%)
 rename src/flash/{ =&gt; nor}/pic32mx.c (100%)
 rename src/flash/{ =&gt; nor}/pic32mx.h (100%)
 rename src/flash/{ =&gt; nor}/stellaris.c (100%)
 rename src/flash/{ =&gt; nor}/stellaris.h (100%)
 rename src/flash/{ =&gt; nor}/stm32x.c (100%)
 rename src/flash/{ =&gt; nor}/stm32x.h (100%)
 rename src/flash/{ =&gt; nor}/str7x.c (100%)
 rename src/flash/{ =&gt; nor}/str7x.h (100%)
 rename src/flash/{ =&gt; nor}/str9x.c (100%)
 rename src/flash/{ =&gt; nor}/str9x.h (100%)
 rename src/flash/{ =&gt; nor}/str9xpec.c (100%)
 rename src/flash/{ =&gt; nor}/str9xpec.h (100%)
 rename src/flash/{ =&gt; nor}/tms470.c (100%)
 rename src/flash/{ =&gt; nor}/tms470.h (100%)
 copy src/jtag/{ =&gt; drivers}/Makefile.am (56%)
 rename src/jtag/{rlink/Makefile =&gt; drivers/Makefile.rlink} (100%)
 rename src/jtag/{ =&gt; drivers}/amt_jtagaccel.c (100%)
 rename src/jtag/{ =&gt; drivers}/arm-jtag-ew.c (100%)
 rename src/jtag/{ =&gt; drivers}/at91rm9200.c (100%)
 rename src/jtag/{ =&gt; drivers}/bitbang.c (100%)
 rename src/jtag/{ =&gt; drivers}/bitbang.h (100%)
 rename src/jtag/{ =&gt; drivers}/bitq.c (100%)
 rename src/jtag/{ =&gt; drivers}/bitq.h (100%)
 rename src/jtag/{ =&gt; drivers}/driver.c (100%)
 rename src/jtag/{ =&gt; drivers}/dummy.c (100%)
 rename src/jtag/{ =&gt; drivers}/ep93xx.c (100%)
 rename src/jtag/{ =&gt; drivers}/ft2232.c (100%)
 rename src/jtag/{ =&gt; drivers}/gw16012.c (100%)
 rename src/jtag/{ =&gt; drivers}/jlink.c (100%)
 copy src/{server/httpd_stubs.c =&gt; jtag/drivers/minidriver_imp.h} (58%)
 rename src/jtag/{ =&gt; drivers}/parport.c (100%)
 rename src/jtag/{ =&gt; drivers}/presto.c (100%)
 rename src/jtag/{rlink =&gt; drivers}/rlink.c (99%)
 rename src/jtag/{rlink =&gt; drivers}/rlink.h (100%)
 rename src/jtag/{rlink/call.m4 =&gt; drivers/rlink_call.m4} (100%)
 rename src/jtag/{rlink/dtc_cmd.h =&gt; drivers/rlink_dtc_cmd.h} (100%)
 rename src/jtag/{rlink/ep1_cmd.h =&gt; drivers/rlink_ep1_cmd.h} (100%)
 rename src/jtag/{rlink/init.m4 =&gt; drivers/rlink_init.m4} (100%)
 rename src/jtag/{rlink =&gt; drivers}/rlink_speed_table.c (99%)
 rename src/jtag/{rlink/st7.h =&gt; drivers/rlink_st7.h} (100%)
 rename src/jtag/{ =&gt; drivers}/usb_common.c (100%)
 rename src/jtag/{ =&gt; drivers}/usb_common.h (100%)
 rename src/jtag/{ =&gt; drivers}/usbprog.c (100%)
 rename src/jtag/{ =&gt; drivers}/vsllink.c (100%)
 copy src/{server/httpd_stubs.c =&gt; jtag/minidriver/minidriver_imp.h} (65%)


hooks/post-receive
-- 
Main OpenOCD repository

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001908.html">[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.3.0-767-gd5e4e23
</A></li>
	<LI>Next message: <A HREF="001910.html">[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.3.0-772-ga976ce2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1909">[ date ]</a>
              <a href="thread.html#1909">[ thread ]</a>
              <a href="subject.html#1909">[ subject ]</a>
              <a href="author.html#1909">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-svn">More information about the openocd-svn
mailing list</a><br>
</body></html>
