<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-328-g8022940
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-svn/2010-June/index.html" >
   <LINK REL="made" HREF="mailto:openocd-svn%40lists.berlios.de?Subject=Re%3A%20%5Bopenocd-svn%5D%20Main%20OpenOCD%20repository%20branch%2C%20master%2C%0A%09updated.%20v0.4.0-328-g8022940&In-Reply-To=%3CE1OOeE4-0007wL-NL%40sfp-scmshell-1.v30.ch3.sourceforge.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002282.html">
   <LINK REL="Next"  HREF="002284.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-328-g8022940</H1>
    <B>&#216;yvind Harboe</B> 
    <A HREF="mailto:openocd-svn%40lists.berlios.de?Subject=Re%3A%20%5Bopenocd-svn%5D%20Main%20OpenOCD%20repository%20branch%2C%20master%2C%0A%09updated.%20v0.4.0-328-g8022940&In-Reply-To=%3CE1OOeE4-0007wL-NL%40sfp-scmshell-1.v30.ch3.sourceforge.com%3E"
       TITLE="[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-328-g8022940">gowinex at users.sourceforge.net
       </A><BR>
    <I>Wed Jun 16 00:03:18 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="002282.html">[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-323-g953d96f
</A></li>
        <LI>Next message: <A HREF="002284.html">[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-329-gf1ce4fe
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2283">[ date ]</a>
              <a href="thread.html#2283">[ thread ]</a>
              <a href="subject.html#2283">[ subject ]</a>
              <a href="author.html#2283">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;Main OpenOCD repository&quot;.

The branch, master has been updated
       via  8022940c5c3a12ecdbc8f8866351ee0ef5de1d35 (commit)
       via  72eb87673cefbd046416fc27579507b1192fae94 (commit)
       via  e53836718664e507a9cb431444a0fc9021ebae04 (commit)
       via  0a837fc36bee177094cc064d8146c2a96e4a8f1d (commit)
       via  0365225c4860d5926c3aacbc2a91a98f873a364e (commit)
      from  953d96f1e2c6619da76f4925fdb62b7f54f0e0fd (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit 8022940c5c3a12ecdbc8f8866351ee0ef5de1d35
Author: &#195;&#152;yvind Harboe &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">oyvind.harboe at zylin.com</A>&gt;
Date:   Wed Jun 16 00:02:58 2010 +0200

    str7x: -Wshadow warning fixes
    
    Signed-off-by: &#195;&#152;yvind Harboe &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">oyvind.harboe at zylin.com</A>&gt;

diff --git a/src/flash/nor/str7x.c b/src/flash/nor/str7x.c
index 46510ed..4c450af 100644
--- a/src/flash/nor/str7x.c
+++ b/src/flash/nor/str7x.c
@@ -625,7 +625,7 @@ static int str7x_write(struct flash_bank *bank, uint8_t *buffer,
 	if (bytes_remaining)
 	{
 		uint8_t last_dword[8] = {0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff};
-		int i = 0;
+		i = 0;
 
 		while (bytes_remaining &gt; 0)
 		{
@@ -680,7 +680,7 @@ COMMAND_HANDLER(str7x_handle_part_id_command)
 }
 #endif
 
-static int str7x_info(struct flash_bank *bank, char *buf, int buf_size)
+static int get_str7x_info(struct flash_bank *bank, char *buf, int buf_size)
 {
 	snprintf(buf, buf_size, &quot;str7x flash driver info&quot;);
 	/* STR7x flash doesn't support sector protection interrogation.
@@ -795,5 +795,5 @@ struct flash_driver str7x_flash = {
 	.auto_probe = str7x_probe,
 	.erase_check = default_flash_blank_check,
 	.protect_check = str7x_protect_check,
-	.info = str7x_info,
+	.info = get_str7x_info,
 };

commit 72eb87673cefbd046416fc27579507b1192fae94
Author: &#195;&#152;yvind Harboe &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">oyvind.harboe at zylin.com</A>&gt;
Date:   Wed Jun 16 00:00:57 2010 +0200

    stm32x: -Wshadow warning fixes
    
    Signed-off-by: &#195;&#152;yvind Harboe &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">oyvind.harboe at zylin.com</A>&gt;

diff --git a/src/flash/nor/stm32x.c b/src/flash/nor/stm32x.c
index 47ed640..5ce5d45 100644
--- a/src/flash/nor/stm32x.c
+++ b/src/flash/nor/stm32x.c
@@ -814,7 +814,7 @@ COMMAND_HANDLER(stm32x_handle_part_id_command)
 }
 #endif
 
-static int stm32x_info(struct flash_bank *bank, char *buf, int buf_size)
+static int get_stm32x_info(struct flash_bank *bank, char *buf, int buf_size)
 {
 	struct target *target = bank-&gt;target;
 	uint32_t device_id;
@@ -1305,5 +1305,5 @@ struct flash_driver stm32x_flash = {
 	.auto_probe = stm32x_auto_probe,
 	.erase_check = default_flash_mem_blank_check,
 	.protect_check = stm32x_protect_check,
-	.info = stm32x_info,
+	.info = get_stm32x_info,
 };

commit e53836718664e507a9cb431444a0fc9021ebae04
Author: &#195;&#152;yvind Harboe &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">oyvind.harboe at zylin.com</A>&gt;
Date:   Tue Jun 15 23:59:21 2010 +0200

    stellaris: -Wshadow warning fixes
    
    Signed-off-by: &#195;&#152;yvind Harboe &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">oyvind.harboe at zylin.com</A>&gt;

diff --git a/src/flash/nor/stellaris.c b/src/flash/nor/stellaris.c
index f7e2e8d..ff1c2e4 100644
--- a/src/flash/nor/stellaris.c
+++ b/src/flash/nor/stellaris.c
@@ -255,7 +255,7 @@ FLASH_BANK_COMMAND_HANDLER(stellaris_flash_bank_command)
 	return ERROR_OK;
 }
 
-static int stellaris_info(struct flash_bank *bank, char *buf, int buf_size)
+static int get_stellaris_info(struct flash_bank *bank, char *buf, int buf_size)
 {
 	int printed, device_class;
 	struct stellaris_flash_bank *stellaris_info = bank-&gt;driver_priv;
@@ -1272,5 +1272,5 @@ struct flash_driver stellaris_flash = {
 	.auto_probe = stellaris_probe,
 	.erase_check = default_flash_mem_blank_check,
 	.protect_check = stellaris_protect_check,
-	.info = stellaris_info,
+	.info = get_stellaris_info,
 };

commit 0a837fc36bee177094cc064d8146c2a96e4a8f1d
Author: &#195;&#152;yvind Harboe &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">oyvind.harboe at zylin.com</A>&gt;
Date:   Tue Jun 15 23:58:19 2010 +0200

    lpc2900: -Wshadow warning fixes
    
    Signed-off-by: &#195;&#152;yvind Harboe &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">oyvind.harboe at zylin.com</A>&gt;

diff --git a/src/flash/nor/lpc2900.c b/src/flash/nor/lpc2900.c
index 3ae7bb4..e17823e 100644
--- a/src/flash/nor/lpc2900.c
+++ b/src/flash/nor/lpc2900.c
@@ -306,39 +306,39 @@ static uint32_t lpc2900_read_security_status( struct flash_bank *bank )
 	 * a protected sector!
 	 */
 	int sector;
-	int index;
+	int index_t;
 	for( sector = 0; sector &lt; bank-&gt;num_sectors; sector++ )
 	{
 		/* Convert logical sector number to physical sector number */
 		if( sector &lt;= 4 )
 		{
-			index = sector + 11;
+			index_t = sector + 11;
 		}
 		else if( sector &lt;= 7 )
 		{
-			index = sector + 27;
+			index_t = sector + 27;
 		}
 		else
 		{
-			index = sector - 8;
+			index_t = sector - 8;
 		}
 
 		bank-&gt;sectors[sector].is_protected = -1;
 
 		if (
-		    (iss_secured_field[index][0] == 0x00000000) &amp;&amp;
-		    (iss_secured_field[index][1] == 0x00000000) &amp;&amp;
-		    (iss_secured_field[index][2] == 0x00000000) &amp;&amp;
-		    (iss_secured_field[index][3] == 0x00000000) )
+		    (iss_secured_field[index_t][0] == 0x00000000) &amp;&amp;
+		    (iss_secured_field[index_t][1] == 0x00000000) &amp;&amp;
+		    (iss_secured_field[index_t][2] == 0x00000000) &amp;&amp;
+		    (iss_secured_field[index_t][3] == 0x00000000) )
 		{
 			bank-&gt;sectors[sector].is_protected = 1;
 		}
 
 		if (
-		    (iss_secured_field[index][0] == 0xFFFFFFFF) &amp;&amp;
-		    (iss_secured_field[index][1] == 0xFFFFFFFF) &amp;&amp;
-		    (iss_secured_field[index][2] == 0xFFFFFFFF) &amp;&amp;
-		    (iss_secured_field[index][3] == 0xFFFFFFFF) )
+		    (iss_secured_field[index_t][0] == 0xFFFFFFFF) &amp;&amp;
+		    (iss_secured_field[index_t][1] == 0xFFFFFFFF) &amp;&amp;
+		    (iss_secured_field[index_t][2] == 0xFFFFFFFF) &amp;&amp;
+		    (iss_secured_field[index_t][3] == 0xFFFFFFFF) )
 		{
 			bank-&gt;sectors[sector].is_protected = 0;
 		}
@@ -507,7 +507,7 @@ static int lpc2900_write_index_page( struct flash_bank *bank,
  * @param clock System clock in Hz
  * @param time Program/erase time in &#194;&#181;s
  */
-static uint32_t lpc2900_calc_tr( uint32_t clock, uint32_t time )
+static uint32_t lpc2900_calc_tr( uint32_t clock_var, uint32_t time_var )
 {
 	/*           ((time[&#194;&#181;s]/1e6) * f[Hz]) + 511
 	 * FPTR.TR = -------------------------------
@@ -516,7 +516,7 @@ static uint32_t lpc2900_calc_tr( uint32_t clock, uint32_t time )
 	 * The result is the
 	 */
 
-	uint32_t tr_val = (uint32_t)((((time / 1e6) * clock) + 511.0) / 512.0);
+	uint32_t tr_val = (uint32_t)((((time_var / 1e6) * clock_var) + 511.0) / 512.0);
 
 	return tr_val;
 }
@@ -1365,7 +1365,7 @@ static int lpc2900_write(struct flash_bank *bank, uint8_t *buffer,
 				this_buffer = buffer;
 
 				/* Make sure we stop at the next secured sector */
-				int sector = start_sector + 1;
+				sector = start_sector + 1;
 				while( sector &lt; bank-&gt;num_sectors )
 				{
 					/* Secured? */

commit 0365225c4860d5926c3aacbc2a91a98f873a364e
Author: &#195;&#152;yvind Harboe &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">oyvind.harboe at zylin.com</A>&gt;
Date:   Tue Jun 15 23:53:36 2010 +0200

    lpc2000: -Wshadow warning fixes
    
    Signed-off-by: &#195;&#152;yvind Harboe &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">oyvind.harboe at zylin.com</A>&gt;

diff --git a/src/flash/nor/lpc2000.c b/src/flash/nor/lpc2000.c
index 154248c..866be50 100644
--- a/src/flash/nor/lpc2000.c
+++ b/src/flash/nor/lpc2000.c
@@ -594,7 +594,6 @@ static int lpc2000_write(struct flash_bank *bank, uint8_t *buffer, uint32_t offs
 	if ((offset == 0) &amp;&amp; (count &gt;= 0x20) &amp;&amp; lpc2000_info-&gt;calc_checksum)
 	{
 		uint32_t checksum = 0;
-		int i;
 		for (i = 0; i &lt; 8; i++)
 		{
 			LOG_DEBUG(&quot;Vector 0x%2.2x: 0x%8.8&quot; PRIx32, i * 4, buf_get_u32(buffer + (i * 4), 0, 32));
@@ -740,7 +739,7 @@ static int lpc2000_protect_check(struct flash_bank *bank)
 	return ERROR_OK;
 }
 
-static int lpc2000_info(struct flash_bank *bank, char *buf, int buf_size)
+static int get_lpc2000_info(struct flash_bank *bank, char *buf, int buf_size)
 {
 	struct lpc2000_flash_bank *lpc2000_info = bank-&gt;driver_priv;
 
@@ -819,5 +818,5 @@ struct flash_driver lpc2000_flash = {
 	.auto_probe = lpc2000_probe,
 	.erase_check = lpc2000_erase_check,
 	.protect_check = lpc2000_protect_check,
-	.info = lpc2000_info,
+	.info = get_lpc2000_info,
 };

-----------------------------------------------------------------------

Summary of changes:
 src/flash/nor/lpc2000.c   |    5 ++---
 src/flash/nor/lpc2900.c   |   30 +++++++++++++++---------------
 src/flash/nor/stellaris.c |    4 ++--
 src/flash/nor/stm32x.c    |    4 ++--
 src/flash/nor/str7x.c     |    6 +++---
 5 files changed, 24 insertions(+), 25 deletions(-)


hooks/post-receive
-- 
Main OpenOCD repository

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002282.html">[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-323-g953d96f
</A></li>
	<LI>Next message: <A HREF="002284.html">[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-329-gf1ce4fe
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2283">[ date ]</a>
              <a href="thread.html#2283">[ thread ]</a>
              <a href="subject.html#2283">[ subject ]</a>
              <a href="author.html#2283">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-svn">More information about the openocd-svn
mailing list</a><br>
</body></html>
