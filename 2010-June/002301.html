<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-373-gf747b16
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openocd-svn/2010-June/index.html" >
   <LINK REL="made" HREF="mailto:openocd-svn%40lists.berlios.de?Subject=Re%3A%20%5Bopenocd-svn%5D%20Main%20OpenOCD%20repository%20branch%2C%20master%2C%0A%09updated.%20v0.4.0-373-gf747b16&In-Reply-To=%3CE1OQiQ3-0003BL-9F%40sfp-scmshell-3.v30.ch3.sourceforge.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002300.html">
   <LINK REL="Next"  HREF="002302.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-373-gf747b16</H1>
    <B>&#216;yvind Harboe</B> 
    <A HREF="mailto:openocd-svn%40lists.berlios.de?Subject=Re%3A%20%5Bopenocd-svn%5D%20Main%20OpenOCD%20repository%20branch%2C%20master%2C%0A%09updated.%20v0.4.0-373-gf747b16&In-Reply-To=%3CE1OQiQ3-0003BL-9F%40sfp-scmshell-3.v30.ch3.sourceforge.com%3E"
       TITLE="[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-373-gf747b16">gowinex at users.sourceforge.net
       </A><BR>
    <I>Mon Jun 21 16:56:13 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="002300.html">[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-362-g2fbb0b5
</A></li>
        <LI>Next message: <A HREF="002302.html">[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-380-gfe1f7f6
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2301">[ date ]</a>
              <a href="thread.html#2301">[ thread ]</a>
              <a href="subject.html#2301">[ subject ]</a>
              <a href="author.html#2301">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This is an automated email from the git hooks/post-receive script. It was
generated because a ref change was pushed to the repository containing
the project &quot;Main OpenOCD repository&quot;.

The branch, master has been updated
       via  f747b16e4e14f25f19e391b4811db9fa70be919a (commit)
       via  9b5572857a3e42e0984b0daa3c478561337a0451 (commit)
       via  bc7fa896e69d5a325776da4e5b423940cb1124dd (commit)
       via  190986eb8c6967cebafe0b415733c72305489f76 (commit)
       via  ff1c09fbeabc568c7cd6e29b4681e15e5d0d184c (commit)
       via  decd417064b63c8eda69ad523a63fefd22036d16 (commit)
       via  d26b5236bac524ca33799f2c10f40f65755bdd08 (commit)
       via  3f59fcf77e5eb1d8c504a337b05bb1a5797e656f (commit)
       via  b978dcbbee628ed30286b90cecf7085eb2cb7a82 (commit)
       via  3cfbf705597732c7b6a5b11a556c818529ea725b (commit)
       via  ec073e89435785375dece2fb7c4664002c22859c (commit)
      from  2fbb0b5972b04e10090e39137817e9f359fb6105 (commit)

Those revisions listed above that are new to this repository have
not appeared on any other notification email; so we list those
revisions in full, below.

- Log -----------------------------------------------------------------
commit f747b16e4e14f25f19e391b4811db9fa70be919a
Author: Antonio Borneo &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">borneo.antonio at gmail.com</A>&gt;
Date:   Sun Jun 20 18:40:02 2010 +0800

    nand/mx2: review scope of symbols
    
    Add &quot;static&quot; qualifier to private variable.
    
    Signed-off-by: Antonio Borneo &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">borneo.antonio at gmail.com</A>&gt;

diff --git a/src/flash/nand/mx2.c b/src/flash/nand/mx2.c
index 83e1cb1..147546d 100644
--- a/src/flash/nand/mx2.c
+++ b/src/flash/nand/mx2.c
@@ -61,7 +61,7 @@ static const char sram_buffer_bounds_err_msg[] =
 	&quot;trying to access out of SRAM buffer bound (addr=0x%&quot; PRIx32 &quot;)&quot;;
 static const char get_status_register_err_msg[] = &quot;can't get NAND status&quot;;
 static uint32_t in_sram_address;
-unsigned char sign_of_sequental_byte_read;
+static unsigned char sign_of_sequental_byte_read;
 
 static int initialize_nf_controller(struct nand_device *nand);
 static int get_next_byte_from_sram_buffer(struct target * target, uint8_t * value);

commit 9b5572857a3e42e0984b0daa3c478561337a0451
Author: Antonio Borneo &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">borneo.antonio at gmail.com</A>&gt;
Date:   Sun Jun 20 17:44:24 2010 +0800

    nor/str7x: review scope of symbols
    
    Add &quot;static&quot; qualifier to private function.
    
    Signed-off-by: Antonio Borneo &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">borneo.antonio at gmail.com</A>&gt;

diff --git a/src/flash/nor/str7x.c b/src/flash/nor/str7x.c
index 4c450af..069e90c 100644
--- a/src/flash/nor/str7x.c
+++ b/src/flash/nor/str7x.c
@@ -394,7 +394,7 @@ static int str7x_protect(struct flash_bank *bank, int set, int first, int last)
 	return ERROR_OK;
 }
 
-int str7x_write_block(struct flash_bank *bank, uint8_t *buffer,
+static int str7x_write_block(struct flash_bank *bank, uint8_t *buffer,
 		uint32_t offset, uint32_t count)
 {
 	struct str7x_flash_bank *str7x_info = bank-&gt;driver_priv;

commit bc7fa896e69d5a325776da4e5b423940cb1124dd
Author: Antonio Borneo &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">borneo.antonio at gmail.com</A>&gt;
Date:   Sun Jun 20 17:40:28 2010 +0800

    openocd.c: review scope of symbols
    
    Add &quot;static&quot; qualifier to private data.
    
    Signed-off-by: Antonio Borneo &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">borneo.antonio at gmail.com</A>&gt;

diff --git a/src/openocd.c b/src/openocd.c
index 81c2dcd..623bd0c 100644
--- a/src/openocd.c
+++ b/src/openocd.c
@@ -210,7 +210,7 @@ static int openocd_register_commands(struct command_context *cmd_ctx)
 struct command_context *global_cmd_ctx;
 
 /* NB! this fn can be invoked outside this file for non PC hosted builds */
-struct command_context *setup_command_handler(Jim_Interp *interp)
+static struct command_context *setup_command_handler(Jim_Interp *interp)
 {
 	log_init();
 	LOG_DEBUG(&quot;log_init: complete&quot;);

commit 190986eb8c6967cebafe0b415733c72305489f76
Author: Antonio Borneo &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">borneo.antonio at gmail.com</A>&gt;
Date:   Sun Jun 20 17:38:19 2010 +0800

    nor/virtual: review scope of symbols
    
    Add &quot;static&quot; qualifier to private functions.
    
    Signed-off-by: Antonio Borneo &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">borneo.antonio at gmail.com</A>&gt;

diff --git a/src/flash/nor/virtual.c b/src/flash/nor/virtual.c
index eb1885e..e91dfc7 100644
--- a/src/flash/nor/virtual.c
+++ b/src/flash/nor/virtual.c
@@ -195,7 +195,7 @@ static int virtual_info(struct flash_bank *bank, char *buf, int buf_size)
 	return ERROR_OK;
 }
 
-int virtual_blank_check(struct flash_bank *bank)
+static int virtual_blank_check(struct flash_bank *bank)
 {
 	struct flash_bank *master_bank = virtual_get_master_bank(bank);
 	int retval;
@@ -211,7 +211,7 @@ int virtual_blank_check(struct flash_bank *bank)
 	return ERROR_OK;
 }
 
-int virtual_flash_read(struct flash_bank *bank,
+static int virtual_flash_read(struct flash_bank *bank,
 		uint8_t *buffer, uint32_t offset, uint32_t count)
 {
 	struct flash_bank *master_bank = virtual_get_master_bank(bank);

commit ff1c09fbeabc568c7cd6e29b4681e15e5d0d184c
Author: Antonio Borneo &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">borneo.antonio at gmail.com</A>&gt;
Date:   Sun Jun 20 13:05:56 2010 +0800

    target/avrt: review unused symbols
    
    Remove unused functions:
    - mcu_write_dr_u16
    - mcu_write_dr_u8
    - mcu_write_ir_u16
    - mcu_write_ir_u32
    
    Signed-off-by: Antonio Borneo &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">borneo.antonio at gmail.com</A>&gt;

diff --git a/src/target/avrt.c b/src/target/avrt.c
index 3861199..1ddf24d 100644
--- a/src/target/avrt.c
+++ b/src/target/avrt.c
@@ -46,10 +46,6 @@ static int avr_soft_reset_halt(struct target *target);
 static int mcu_write_ir(struct jtag_tap *tap, uint8_t *ir_in, uint8_t *ir_out, int ir_len, int rti);
 static int mcu_write_dr(struct jtag_tap *tap, uint8_t *dr_in, uint8_t *dr_out, int dr_len, int rti);
 static int mcu_write_ir_u8(struct jtag_tap *tap, uint8_t *ir_in, uint8_t ir_out, int ir_len, int rti);
-int mcu_write_dr_u8(struct jtag_tap *tap, uint8_t *ir_in, uint8_t ir_out, int dr_len, int rti);
-int mcu_write_ir_u16(struct jtag_tap *tap, uint16_t *ir_in, uint16_t ir_out, int ir_len, int rti);
-int mcu_write_dr_u16(struct jtag_tap *tap, uint16_t *ir_in, uint16_t ir_out, int dr_len, int rti);
-int mcu_write_ir_u32(struct jtag_tap *tap, uint32_t *ir_in, uint32_t ir_out, int ir_len, int rti);
 static int mcu_write_dr_u32(struct jtag_tap *tap, uint32_t *ir_in, uint32_t ir_out, int dr_len, int rti);
 
 struct target_type avr_target =
@@ -225,58 +221,6 @@ static int mcu_write_ir_u8(struct jtag_tap *tap, uint8_t *ir_in,
 	return ERROR_OK;
 }
 
-int mcu_write_dr_u8(struct jtag_tap *tap, uint8_t *dr_in, uint8_t dr_out, int dr_len, int rti)
-{
-	if (dr_len &gt; 8)
-	{
-		LOG_ERROR(&quot;dr_len overflow, maxium is 8&quot;);
-		return ERROR_FAIL;
-	}
-
-	mcu_write_dr(tap, dr_in, &amp;dr_out, dr_len, rti);
-
-	return ERROR_OK;
-}
-
-int mcu_write_ir_u16(struct jtag_tap *tap, uint16_t *ir_in, uint16_t ir_out, int ir_len, int rti)
-{
-	if (ir_len &gt; 16)
-	{
-		LOG_ERROR(&quot;ir_len overflow, maxium is 16&quot;);
-		return ERROR_FAIL;
-	}
-
-	mcu_write_ir(tap, (uint8_t*)ir_in, (uint8_t*)&amp;ir_out, ir_len, rti);
-
-	return ERROR_OK;
-}
-
-int mcu_write_dr_u16(struct jtag_tap *tap, uint16_t *dr_in, uint16_t dr_out, int dr_len, int rti)
-{
-	if (dr_len &gt; 16)
-	{
-		LOG_ERROR(&quot;dr_len overflow, maxium is 16&quot;);
-		return ERROR_FAIL;
-	}
-
-	mcu_write_dr(tap, (uint8_t*)dr_in, (uint8_t*)&amp;dr_out, dr_len, rti);
-
-	return ERROR_OK;
-}
-
-int mcu_write_ir_u32(struct jtag_tap *tap, uint32_t *ir_in, uint32_t ir_out, int ir_len, int rti)
-{
-	if (ir_len &gt; 32)
-	{
-		LOG_ERROR(&quot;ir_len overflow, maxium is 32&quot;);
-		return ERROR_FAIL;
-	}
-
-	mcu_write_ir(tap, (uint8_t*)ir_in, (uint8_t*)&amp;ir_out, ir_len, rti);
-
-	return ERROR_OK;
-}
-
 static int mcu_write_dr_u32(struct jtag_tap *tap, uint32_t *dr_in,
 		uint32_t dr_out, int dr_len, int rti)
 {

commit decd417064b63c8eda69ad523a63fefd22036d16
Author: Antonio Borneo &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">borneo.antonio at gmail.com</A>&gt;
Date:   Sun Jun 20 12:52:07 2010 +0800

    target/avr: review scope of symbols
    
    Add &quot;static&quot; qualifier to private functions.
    Move duplicated global declarations from &quot;target/avrt.c&quot;
    and &quot;nor/avrf.c&quot; to &quot;target/avrt.h&quot;.
    Remove unused declarations form &quot;nor/avrf.c&quot;.
    
    Signed-off-by: Antonio Borneo &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">borneo.antonio at gmail.com</A>&gt;

diff --git a/src/flash/nor/avrf.c b/src/flash/nor/avrf.c
index 8472d83..4dc7c23 100644
--- a/src/flash/nor/avrf.c
+++ b/src/flash/nor/avrf.c
@@ -59,19 +59,6 @@ static struct avrf_type avft_chips_info[] =
 	{&quot;at90can128&quot;,	0x9781, 256, 512, 8, 512},
 };
 
-int avr_jtag_sendinstr(struct jtag_tap *tap, uint8_t *ir_in, uint8_t ir_out);
-int avr_jtag_senddat(struct jtag_tap *tap, uint32_t *dr_in, uint32_t dr_out, int len);
-
-int mcu_write_ir(struct jtag_tap *tap, uint8_t *ir_in, uint8_t *ir_out, int ir_len, int rti);
-int mcu_write_dr(struct jtag_tap *tap, uint8_t *ir_in, uint8_t *ir_out, int dr_len, int rti);
-int mcu_write_ir_u8(struct jtag_tap *tap, uint8_t *ir_in, uint8_t ir_out, int ir_len, int rti);
-int mcu_write_dr_u8(struct jtag_tap *tap, uint8_t *ir_in, uint8_t ir_out, int dr_len, int rti);
-int mcu_write_ir_u16(struct jtag_tap *tap, uint16_t *ir_in, uint16_t ir_out, int ir_len, int rti);
-int mcu_write_dr_u16(struct jtag_tap *tap, uint16_t *ir_in, uint16_t ir_out, int dr_len, int rti);
-int mcu_write_ir_u32(struct jtag_tap *tap, uint32_t *ir_in, uint32_t ir_out, int ir_len, int rti);
-int mcu_write_dr_u32(struct jtag_tap *tap, uint32_t *ir_in, uint32_t ir_out, int dr_len, int rti);
-int mcu_execute_queue(void);
-
 /* avr program functions */
 static int avr_jtag_reset(struct avr_common *avr, uint32_t reset)
 {
diff --git a/src/target/avrt.c b/src/target/avrt.c
index 17f7c24..3861199 100644
--- a/src/target/avrt.c
+++ b/src/target/avrt.c
@@ -29,32 +29,28 @@
 #define AVR_JTAG_INS_LEN	4
 
 /* forward declarations */
-int avr_target_create(struct target *target, Jim_Interp *interp);
-int avr_init_target(struct command_context *cmd_ctx, struct target *target);
+static int avr_target_create(struct target *target, Jim_Interp *interp);
+static int avr_init_target(struct command_context *cmd_ctx, struct target *target);
 
-int avr_arch_state(struct target *target);
-int avr_poll(struct target *target);
-int avr_halt(struct target *target);
-int avr_resume(struct target *target, int current, uint32_t address, int handle_breakpoints, int debug_execution);
-int avr_step(struct target *target, int current, uint32_t address, int handle_breakpoints);
+static int avr_arch_state(struct target *target);
+static int avr_poll(struct target *target);
+static int avr_halt(struct target *target);
+static int avr_resume(struct target *target, int current, uint32_t address, int handle_breakpoints, int debug_execution);
+static int avr_step(struct target *target, int current, uint32_t address, int handle_breakpoints);
 
-int avr_assert_reset(struct target *target);
-int avr_deassert_reset(struct target *target);
-int avr_soft_reset_halt(struct target *target);
+static int avr_assert_reset(struct target *target);
+static int avr_deassert_reset(struct target *target);
+static int avr_soft_reset_halt(struct target *target);
 
 /* IR and DR functions */
-int avr_jtag_sendinstr(struct jtag_tap *tap, uint8_t *ir_in, uint8_t ir_out);
-int avr_jtag_senddat(struct jtag_tap *tap, uint32_t *dr_in, uint32_t dr_out, int len);
-
-int mcu_write_ir(struct jtag_tap *tap, uint8_t *ir_in, uint8_t *ir_out, int ir_len, int rti);
-int mcu_write_dr(struct jtag_tap *tap, uint8_t *dr_in, uint8_t *dr_out, int dr_len, int rti);
-int mcu_write_ir_u8(struct jtag_tap *tap, uint8_t *ir_in, uint8_t ir_out, int ir_len, int rti);
+static int mcu_write_ir(struct jtag_tap *tap, uint8_t *ir_in, uint8_t *ir_out, int ir_len, int rti);
+static int mcu_write_dr(struct jtag_tap *tap, uint8_t *dr_in, uint8_t *dr_out, int dr_len, int rti);
+static int mcu_write_ir_u8(struct jtag_tap *tap, uint8_t *ir_in, uint8_t ir_out, int ir_len, int rti);
 int mcu_write_dr_u8(struct jtag_tap *tap, uint8_t *ir_in, uint8_t ir_out, int dr_len, int rti);
 int mcu_write_ir_u16(struct jtag_tap *tap, uint16_t *ir_in, uint16_t ir_out, int ir_len, int rti);
 int mcu_write_dr_u16(struct jtag_tap *tap, uint16_t *ir_in, uint16_t ir_out, int dr_len, int rti);
 int mcu_write_ir_u32(struct jtag_tap *tap, uint32_t *ir_in, uint32_t ir_out, int ir_len, int rti);
-int mcu_write_dr_u32(struct jtag_tap *tap, uint32_t *ir_in, uint32_t ir_out, int dr_len, int rti);
-int mcu_execute_queue(void);
+static int mcu_write_dr_u32(struct jtag_tap *tap, uint32_t *ir_in, uint32_t ir_out, int dr_len, int rti);
 
 struct target_type avr_target =
 {
@@ -92,7 +88,7 @@ struct target_type avr_target =
 	.init_target = avr_init_target,
 };
 
-int avr_target_create(struct target *target, Jim_Interp *interp)
+static int avr_target_create(struct target *target, Jim_Interp *interp)
 {
 	struct avr_common *avr = calloc(1, sizeof(struct avr_common));
 
@@ -102,19 +98,19 @@ int avr_target_create(struct target *target, Jim_Interp *interp)
 	return ERROR_OK;
 }
 
-int avr_init_target(struct command_context *cmd_ctx, struct target *target)
+static int avr_init_target(struct command_context *cmd_ctx, struct target *target)
 {
 	LOG_DEBUG(&quot;%s&quot;, __FUNCTION__);
 	return ERROR_OK;
 }
 
-int avr_arch_state(struct target *target)
+static int avr_arch_state(struct target *target)
 {
 	LOG_DEBUG(&quot;%s&quot;, __FUNCTION__);
 	return ERROR_OK;
 }
 
-int avr_poll(struct target *target)
+static int avr_poll(struct target *target)
 {
 	if ((target-&gt;state == TARGET_RUNNING) || (target-&gt;state == TARGET_DEBUG_RUNNING))
 	{
@@ -125,25 +121,26 @@ int avr_poll(struct target *target)
 	return ERROR_OK;
 }
 
-int avr_halt(struct target *target)
+static int avr_halt(struct target *target)
 {
 	LOG_DEBUG(&quot;%s&quot;, __FUNCTION__);
 	return ERROR_OK;
 }
 
-int avr_resume(struct target *target, int current, uint32_t address, int handle_breakpoints, int debug_execution)
+static int avr_resume(struct target *target, int current, uint32_t address,
+		int handle_breakpoints, int debug_execution)
 {
 	LOG_DEBUG(&quot;%s&quot;, __FUNCTION__);
 	return ERROR_OK;
 }
 
-int avr_step(struct target *target, int current, uint32_t address, int handle_breakpoints)
+static int avr_step(struct target *target, int current, uint32_t address, int handle_breakpoints)
 {
 	LOG_DEBUG(&quot;%s&quot;, __FUNCTION__);
 	return ERROR_OK;
 }
 
-int avr_assert_reset(struct target *target)
+static int avr_assert_reset(struct target *target)
 {
 	target-&gt;state = TARGET_RESET;
 
@@ -151,7 +148,7 @@ int avr_assert_reset(struct target *target)
 	return ERROR_OK;
 }
 
-int avr_deassert_reset(struct target *target)
+static int avr_deassert_reset(struct target *target)
 {
 	target-&gt;state = TARGET_RUNNING;
 
@@ -159,13 +156,14 @@ int avr_deassert_reset(struct target *target)
 	return ERROR_OK;
 }
 
-int avr_soft_reset_halt(struct target *target)
+static int avr_soft_reset_halt(struct target *target)
 {
 	LOG_DEBUG(&quot;%s&quot;, __FUNCTION__);
 	return ERROR_OK;
 }
 
-int avr_jtag_senddat(struct jtag_tap *tap, uint32_t* dr_in, uint32_t dr_out, int len)
+int avr_jtag_senddat(struct jtag_tap *tap, uint32_t* dr_in, uint32_t dr_out,
+		int len)
 {
 	return mcu_write_dr_u32(tap, dr_in, dr_out, len, 1);
 }
@@ -176,7 +174,8 @@ int avr_jtag_sendinstr(struct jtag_tap *tap, uint8_t *ir_in, uint8_t ir_out)
 }
 
 /* IR and DR functions */
-int mcu_write_ir(struct jtag_tap *tap, uint8_t *ir_in, uint8_t *ir_out, int ir_len, int rti)
+static int mcu_write_ir(struct jtag_tap *tap, uint8_t *ir_in, uint8_t *ir_out,
+		int ir_len, int rti)
 {
 	if (NULL == tap)
 	{
@@ -196,7 +195,8 @@ int mcu_write_ir(struct jtag_tap *tap, uint8_t *ir_in, uint8_t *ir_out, int ir_l
 	return ERROR_OK;
 }
 
-int mcu_write_dr(struct jtag_tap *tap, uint8_t *dr_in, uint8_t *dr_out, int dr_len, int rti)
+static int mcu_write_dr(struct jtag_tap *tap, uint8_t *dr_in, uint8_t *dr_out,
+		int dr_len, int rti)
 {
 	if (NULL == tap)
 	{
@@ -211,7 +211,8 @@ int mcu_write_dr(struct jtag_tap *tap, uint8_t *dr_in, uint8_t *dr_out, int dr_l
 	return ERROR_OK;
 }
 
-int mcu_write_ir_u8(struct jtag_tap *tap, uint8_t *ir_in, uint8_t ir_out, int ir_len, int rti)
+static int mcu_write_ir_u8(struct jtag_tap *tap, uint8_t *ir_in,
+		uint8_t ir_out, int ir_len, int rti)
 {
 	if (ir_len &gt; 8)
 	{
@@ -276,7 +277,8 @@ int mcu_write_ir_u32(struct jtag_tap *tap, uint32_t *ir_in, uint32_t ir_out, int
 	return ERROR_OK;
 }
 
-int mcu_write_dr_u32(struct jtag_tap *tap, uint32_t *dr_in, uint32_t dr_out, int dr_len, int rti)
+static int mcu_write_dr_u32(struct jtag_tap *tap, uint32_t *dr_in,
+		uint32_t dr_out, int dr_len, int rti)
 {
 	if (dr_len &gt; 32)
 	{
diff --git a/src/target/avrt.h b/src/target/avrt.h
index 221296a..221f924 100644
--- a/src/target/avrt.h
+++ b/src/target/avrt.h
@@ -32,4 +32,9 @@ struct avr_common
 	struct mcu_jtag jtag_info;
 };
 
+int mcu_execute_queue(void);
+int avr_jtag_sendinstr(struct jtag_tap *tap, uint8_t *ir_in, uint8_t ir_out);
+int avr_jtag_senddat(struct jtag_tap *tap, uint32_t *dr_in, uint32_t dr_out,
+		int len);
+
 #endif /* AVRT_H */

commit d26b5236bac524ca33799f2c10f40f65755bdd08
Author: Antonio Borneo &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">borneo.antonio at gmail.com</A>&gt;
Date:   Sun Jun 20 12:20:01 2010 +0800

    target/feroceon: review scope of symbols
    
    Add &quot;static&quot; qualifier to private functions.
    
    Signed-off-by: Antonio Borneo &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">borneo.antonio at gmail.com</A>&gt;

diff --git a/src/target/feroceon.c b/src/target/feroceon.c
index efd3040..ea22ca0 100644
--- a/src/target/feroceon.c
+++ b/src/target/feroceon.c
@@ -59,7 +59,7 @@
 #include &quot;arm_opcodes.h&quot;
 
 
-int feroceon_assert_reset(struct target *target)
+static int feroceon_assert_reset(struct target *target)
 {
 	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
@@ -72,7 +72,7 @@ int feroceon_assert_reset(struct target *target)
 	return arm7_9_assert_reset(target);
 }
 
-int feroceon_dummy_clock_out(struct arm_jtag *jtag_info, uint32_t instr)
+static int feroceon_dummy_clock_out(struct arm_jtag *jtag_info, uint32_t instr)
 {
 	struct scan_field fields[3];
 	uint8_t out_buf[4];
@@ -107,7 +107,8 @@ int feroceon_dummy_clock_out(struct arm_jtag *jtag_info, uint32_t instr)
 	return ERROR_OK;
 }
 
-void feroceon_change_to_arm(struct target *target, uint32_t *r0, uint32_t *pc)
+static void feroceon_change_to_arm(struct target *target, uint32_t *r0,
+		uint32_t *pc)
 {
 	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
@@ -153,7 +154,8 @@ void feroceon_change_to_arm(struct target *target, uint32_t *r0, uint32_t *pc)
 	*pc -= (12 + 4);
 }
 
-void feroceon_read_core_regs(struct target *target, uint32_t mask, uint32_t* core_regs[16])
+static void feroceon_read_core_regs(struct target *target,
+		uint32_t mask, uint32_t* core_regs[16])
 {
 	int i;
 	struct arm *armv4_5 = target-&gt;arch_info;
@@ -172,7 +174,8 @@ void feroceon_read_core_regs(struct target *target, uint32_t mask, uint32_t* cor
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_NOP, 0, NULL, 0);
 }
 
-void feroceon_read_core_regs_target_buffer(struct target *target, uint32_t mask, void* buffer, int size)
+static void feroceon_read_core_regs_target_buffer(struct target *target,
+		uint32_t mask, void* buffer, int size)
 {
 	int i;
 	struct arm *armv4_5 = target-&gt;arch_info;
@@ -209,7 +212,7 @@ void feroceon_read_core_regs_target_buffer(struct target *target, uint32_t mask,
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_NOP, 0, NULL, 0);
 }
 
-void feroceon_read_xpsr(struct target *target, uint32_t *xpsr, int spsr)
+static void feroceon_read_xpsr(struct target *target, uint32_t *xpsr, int spsr)
 {
 	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
@@ -232,7 +235,7 @@ void feroceon_read_xpsr(struct target *target, uint32_t *xpsr, int spsr)
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_NOP, 0, NULL, 0);
 }
 
-void feroceon_write_xpsr(struct target *target, uint32_t xpsr, int spsr)
+static void feroceon_write_xpsr(struct target *target, uint32_t xpsr, int spsr)
 {
 	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
@@ -273,7 +276,8 @@ void feroceon_write_xpsr(struct target *target, uint32_t xpsr, int spsr)
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_NOP, 0, NULL, 0);
 }
 
-void feroceon_write_xpsr_im8(struct target *target, uint8_t xpsr_im, int rot, int spsr)
+static void feroceon_write_xpsr_im8(struct target *target,
+		uint8_t xpsr_im, int rot, int spsr)
 {
 	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
@@ -290,7 +294,8 @@ void feroceon_write_xpsr_im8(struct target *target, uint8_t xpsr_im, int rot, in
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_NOP, 0, NULL, 0);
 }
 
-void feroceon_write_core_regs(struct target *target, uint32_t mask, uint32_t core_regs[16])
+static void feroceon_write_core_regs(struct target *target,
+		uint32_t mask, uint32_t core_regs[16])
 {
 	int i;
 	struct arm *armv4_5 = target-&gt;arch_info;
@@ -310,7 +315,7 @@ void feroceon_write_core_regs(struct target *target, uint32_t mask, uint32_t cor
 	arm9tdmi_clock_out(jtag_info, ARMV4_5_NOP, 0, NULL, 0);
 }
 
-void feroceon_branch_resume(struct target *target)
+static void feroceon_branch_resume(struct target *target)
 {
 	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
@@ -325,7 +330,7 @@ void feroceon_branch_resume(struct target *target)
 	arm7_9-&gt;need_bypass_before_restart = 1;
 }
 
-void feroceon_branch_resume_thumb(struct target *target)
+static void feroceon_branch_resume_thumb(struct target *target)
 {
 	LOG_DEBUG(&quot;-&quot;);
 
@@ -360,7 +365,8 @@ void feroceon_branch_resume_thumb(struct target *target)
 	arm7_9-&gt;need_bypass_before_restart = 1;
 }
 
-int feroceon_read_cp15(struct target *target, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t *value)
+static int feroceon_read_cp15(struct target *target, uint32_t op1,
+		uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t *value)
 {
 	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
@@ -382,7 +388,8 @@ int feroceon_read_cp15(struct target *target, uint32_t op1, uint32_t op2, uint32
 	return jtag_execute_queue();
 }
 
-int feroceon_write_cp15(struct target *target, uint32_t op1, uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t value)
+static int feroceon_write_cp15(struct target *target, uint32_t op1,
+		uint32_t op2, uint32_t CRn, uint32_t CRm, uint32_t value)
 {
 	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
@@ -401,7 +408,7 @@ int feroceon_write_cp15(struct target *target, uint32_t op1, uint32_t op2, uint3
 	return arm7_9_execute_sys_speed(target);
 }
 
-void feroceon_set_dbgrq(struct target *target)
+static void feroceon_set_dbgrq(struct target *target)
 {
 	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
@@ -411,7 +418,7 @@ void feroceon_set_dbgrq(struct target *target)
 	embeddedice_store_reg(dbg_ctrl);
 }
 
-void feroceon_enable_single_step(struct target *target, uint32_t next_pc)
+static void feroceon_enable_single_step(struct target *target, uint32_t next_pc)
 {
 	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
@@ -424,7 +431,7 @@ void feroceon_enable_single_step(struct target *target, uint32_t next_pc)
 	embeddedice_write_reg(&amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_W0_CONTROL_MASK], 0xf7);
 }
 
-void feroceon_disable_single_step(struct target *target)
+static void feroceon_disable_single_step(struct target *target)
 {
 	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
@@ -436,7 +443,7 @@ void feroceon_disable_single_step(struct target *target)
 	embeddedice_store_reg(&amp;arm7_9-&gt;eice_cache-&gt;reg_list[EICE_W0_CONTROL_VALUE]);
 }
 
-int feroceon_examine_debug_reason(struct target *target)
+static int feroceon_examine_debug_reason(struct target *target)
 {
 	/* the MOE is not implemented */
 	if (target-&gt;debug_reason != DBG_REASON_SINGLESTEP)
@@ -447,7 +454,8 @@ int feroceon_examine_debug_reason(struct target *target)
 	return ERROR_OK;
 }
 
-int feroceon_bulk_write_memory(struct target *target, uint32_t address, uint32_t count, uint8_t *buffer)
+static int feroceon_bulk_write_memory(struct target *target,
+		uint32_t address, uint32_t count, uint8_t *buffer)
 {
 	int retval;
 	struct arm *armv4_5 = target-&gt;arch_info;
@@ -576,13 +584,14 @@ int feroceon_bulk_write_memory(struct target *target, uint32_t address, uint32_t
 	return retval;
 }
 
-int feroceon_init_target(struct command_context *cmd_ctx, struct target *target)
+static int feroceon_init_target(struct command_context *cmd_ctx,
+		struct target *target)
 {
 	arm9tdmi_init_target(cmd_ctx, target);
 	return ERROR_OK;
 }
 
-void feroceon_common_setup(struct target *target)
+static void feroceon_common_setup(struct target *target)
 {
 	struct arm *armv4_5 = target-&gt;arch_info;
 	struct arm7_9_common *arm7_9 = armv4_5-&gt;arch_info;
@@ -615,7 +624,7 @@ void feroceon_common_setup(struct target *target)
 	arm7_9-&gt;wp1_used_default = -1;
 }
 
-int feroceon_target_create(struct target *target, Jim_Interp *interp)
+static int feroceon_target_create(struct target *target, Jim_Interp *interp)
 {
 	struct arm926ejs_common *arm926ejs = calloc(1,sizeof(struct arm926ejs_common));
 
@@ -629,7 +638,7 @@ int feroceon_target_create(struct target *target, Jim_Interp *interp)
 	return ERROR_OK;
 }
 
-int dragonite_target_create(struct target *target, Jim_Interp *interp)
+static int dragonite_target_create(struct target *target, Jim_Interp *interp)
 {
 	struct arm966e_common *arm966e = calloc(1,sizeof(struct arm966e_common));
 
@@ -639,7 +648,7 @@ int dragonite_target_create(struct target *target, Jim_Interp *interp)
 	return ERROR_OK;
 }
 
-int feroceon_examine(struct target *target)
+static int feroceon_examine(struct target *target)
 {
 	struct arm *armv4_5;
 	struct arm7_9_common *arm7_9;

commit 3f59fcf77e5eb1d8c504a337b05bb1a5797e656f
Author: Antonio Borneo &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">borneo.antonio at gmail.com</A>&gt;
Date:   Sun Jun 20 00:22:12 2010 +0800

    target/mips_m4k: review scope of symbols
    
    Add &quot;static&quot; qualifier to private functions.
    Remove private prototypes from include file.
    
    Signed-off-by: Antonio Borneo &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">borneo.antonio at gmail.com</A>&gt;

diff --git a/src/target/mips_m4k.c b/src/target/mips_m4k.c
index e258b71..21ff0ba 100644
--- a/src/target/mips_m4k.c
+++ b/src/target/mips_m4k.c
@@ -32,7 +32,14 @@
 #include &quot;target_type.h&quot;
 #include &quot;register.h&quot;
 
-int mips_m4k_examine_debug_reason(struct target *target)
+static void mips_m4k_enable_breakpoints(struct target *target);
+static void mips_m4k_enable_watchpoints(struct target *target);
+static int mips_m4k_set_breakpoint(struct target *target,
+		struct breakpoint *breakpoint);
+static int mips_m4k_unset_breakpoint(struct target *target,
+		struct breakpoint *breakpoint);
+
+static int mips_m4k_examine_debug_reason(struct target *target)
 {
 	uint32_t break_status;
 	int retval;
@@ -66,7 +73,7 @@ int mips_m4k_examine_debug_reason(struct target *target)
 	return ERROR_OK;
 }
 
-int mips_m4k_debug_entry(struct target *target)
+static int mips_m4k_debug_entry(struct target *target)
 {
 	struct mips32_common *mips32 = target_to_mips32(target);
 	struct mips_ejtag *ejtag_info = &amp;mips32-&gt;ejtag_info;
@@ -104,7 +111,7 @@ int mips_m4k_debug_entry(struct target *target)
 	return ERROR_OK;
 }
 
-int mips_m4k_poll(struct target *target)
+static int mips_m4k_poll(struct target *target)
 {
 	int retval;
 	struct mips32_common *mips32 = target_to_mips32(target);
@@ -162,7 +169,7 @@ int mips_m4k_poll(struct target *target)
 	return ERROR_OK;
 }
 
-int mips_m4k_halt(struct target *target)
+static int mips_m4k_halt(struct target *target)
 {
 	struct mips32_common *mips32 = target_to_mips32(target);
 	struct mips_ejtag *ejtag_info = &amp;mips32-&gt;ejtag_info;
@@ -207,7 +214,7 @@ int mips_m4k_halt(struct target *target)
 	return ERROR_OK;
 }
 
-int mips_m4k_assert_reset(struct target *target)
+static int mips_m4k_assert_reset(struct target *target)
 {
 	struct mips_m4k_common *mips_m4k = target_to_m4k(target);
 	struct mips_ejtag *ejtag_info = &amp;mips_m4k-&gt;mips32.ejtag_info;
@@ -286,7 +293,7 @@ int mips_m4k_assert_reset(struct target *target)
 	return ERROR_OK;
 }
 
-int mips_m4k_deassert_reset(struct target *target)
+static int mips_m4k_deassert_reset(struct target *target)
 {
 	LOG_DEBUG(&quot;target-&gt;state: %s&quot;,
 		target_state_name(target));
@@ -297,13 +304,13 @@ int mips_m4k_deassert_reset(struct target *target)
 	return ERROR_OK;
 }
 
-int mips_m4k_soft_reset_halt(struct target *target)
+static int mips_m4k_soft_reset_halt(struct target *target)
 {
 	/* TODO */
 	return ERROR_OK;
 }
 
-int mips_m4k_single_step_core(struct target *target)
+static int mips_m4k_single_step_core(struct target *target)
 {
 	struct mips32_common *mips32 = target_to_mips32(target);
 	struct mips_ejtag *ejtag_info = &amp;mips32-&gt;ejtag_info;
@@ -322,7 +329,8 @@ int mips_m4k_single_step_core(struct target *target)
 	return ERROR_OK;
 }
 
-int mips_m4k_resume(struct target *target, int current, uint32_t address, int handle_breakpoints, int debug_execution)
+static int mips_m4k_resume(struct target *target, int current,
+		uint32_t address, int handle_breakpoints, int debug_execution)
 {
 	struct mips32_common *mips32 = target_to_mips32(target);
 	struct mips_ejtag *ejtag_info = &amp;mips32-&gt;ejtag_info;
@@ -397,7 +405,8 @@ int mips_m4k_resume(struct target *target, int current, uint32_t address, int ha
 	return ERROR_OK;
 }
 
-int mips_m4k_step(struct target *target, int current, uint32_t address, int handle_breakpoints)
+static int mips_m4k_step(struct target *target, int current,
+		uint32_t address, int handle_breakpoints)
 {
 	/* get pointers to arch-specific information */
 	struct mips32_common *mips32 = target_to_mips32(target);
@@ -452,7 +461,7 @@ int mips_m4k_step(struct target *target, int current, uint32_t address, int hand
 	return ERROR_OK;
 }
 
-void mips_m4k_enable_breakpoints(struct target *target)
+static void mips_m4k_enable_breakpoints(struct target *target)
 {
 	struct breakpoint *breakpoint = target-&gt;breakpoints;
 
@@ -465,7 +474,8 @@ void mips_m4k_enable_breakpoints(struct target *target)
 	}
 }
 
-int mips_m4k_set_breakpoint(struct target *target, struct breakpoint *breakpoint)
+static int mips_m4k_set_breakpoint(struct target *target,
+		struct breakpoint *breakpoint)
 {
 	struct mips32_common *mips32 = target_to_mips32(target);
 	struct mips32_comparator * comparator_list = mips32-&gt;inst_break_list;
@@ -557,7 +567,8 @@ int mips_m4k_set_breakpoint(struct target *target, struct breakpoint *breakpoint
 	return ERROR_OK;
 }
 
-int mips_m4k_unset_breakpoint(struct target *target, struct breakpoint *breakpoint)
+static int mips_m4k_unset_breakpoint(struct target *target,
+		struct breakpoint *breakpoint)
 {
 	/* get pointers to arch-specific information */
 	struct mips32_common *mips32 = target_to_mips32(target);
@@ -636,7 +647,7 @@ int mips_m4k_unset_breakpoint(struct target *target, struct breakpoint *breakpoi
 	return ERROR_OK;
 }
 
-int mips_m4k_add_breakpoint(struct target *target, struct breakpoint *breakpoint)
+static int mips_m4k_add_breakpoint(struct target *target, struct breakpoint *breakpoint)
 {
 	struct mips32_common *mips32 = target_to_mips32(target);
 
@@ -656,7 +667,8 @@ int mips_m4k_add_breakpoint(struct target *target, struct breakpoint *breakpoint
 	return ERROR_OK;
 }
 
-int mips_m4k_remove_breakpoint(struct target *target, struct breakpoint *breakpoint)
+static int mips_m4k_remove_breakpoint(struct target *target,
+		struct breakpoint *breakpoint)
 {
 	/* get pointers to arch-specific information */
 	struct mips32_common *mips32 = target_to_mips32(target);
@@ -678,7 +690,8 @@ int mips_m4k_remove_breakpoint(struct target *target, struct breakpoint *breakpo
 	return ERROR_OK;
 }
 
-int mips_m4k_set_watchpoint(struct target *target, struct watchpoint *watchpoint)
+static int mips_m4k_set_watchpoint(struct target *target,
+		struct watchpoint *watchpoint)
 {
 	struct mips32_common *mips32 = target_to_mips32(target);
 	struct mips32_comparator *comparator_list = mips32-&gt;data_break_list;
@@ -745,7 +758,8 @@ int mips_m4k_set_watchpoint(struct target *target, struct watchpoint *watchpoint
 	return ERROR_OK;
 }
 
-int mips_m4k_unset_watchpoint(struct target *target, struct watchpoint *watchpoint)
+static int mips_m4k_unset_watchpoint(struct target *target,
+		struct watchpoint *watchpoint)
 {
 	/* get pointers to arch-specific information */
 	struct mips32_common *mips32 = target_to_mips32(target);
@@ -771,7 +785,7 @@ int mips_m4k_unset_watchpoint(struct target *target, struct watchpoint *watchpoi
 	return ERROR_OK;
 }
 
-int mips_m4k_add_watchpoint(struct target *target, struct watchpoint *watchpoint)
+static int mips_m4k_add_watchpoint(struct target *target, struct watchpoint *watchpoint)
 {
 	struct mips32_common *mips32 = target_to_mips32(target);
 
@@ -787,7 +801,8 @@ int mips_m4k_add_watchpoint(struct target *target, struct watchpoint *watchpoint
 	return ERROR_OK;
 }
 
-int mips_m4k_remove_watchpoint(struct target *target, struct watchpoint *watchpoint)
+static int mips_m4k_remove_watchpoint(struct target *target,
+		struct watchpoint *watchpoint)
 {
 	/* get pointers to arch-specific information */
 	struct mips32_common *mips32 = target_to_mips32(target);
@@ -808,7 +823,7 @@ int mips_m4k_remove_watchpoint(struct target *target, struct watchpoint *watchpo
 	return ERROR_OK;
 }
 
-void mips_m4k_enable_watchpoints(struct target *target)
+static void mips_m4k_enable_watchpoints(struct target *target)
 {
 	struct watchpoint *watchpoint = target-&gt;watchpoints;
 
@@ -821,7 +836,8 @@ void mips_m4k_enable_watchpoints(struct target *target)
 	}
 }
 
-int mips_m4k_read_memory(struct target *target, uint32_t address, uint32_t size, uint32_t count, uint8_t *buffer)
+static int mips_m4k_read_memory(struct target *target, uint32_t address,
+		uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	struct mips32_common *mips32 = target_to_mips32(target);
 	struct mips_ejtag *ejtag_info = &amp;mips32-&gt;ejtag_info;
@@ -853,8 +869,8 @@ int mips_m4k_read_memory(struct target *target, uint32_t address, uint32_t size,
 	return ERROR_OK;
 }
 
-int mips_m4k_write_memory(struct target *target, uint32_t address, uint32_t size,
-		uint32_t count, uint8_t *buffer)
+static int mips_m4k_write_memory(struct target *target, uint32_t address,
+		uint32_t size, uint32_t count, uint8_t *buffer)
 {
 	struct mips32_common *mips32 = target_to_mips32(target);
 	struct mips_ejtag *ejtag_info = &amp;mips32-&gt;ejtag_info;
@@ -882,15 +898,16 @@ int mips_m4k_write_memory(struct target *target, uint32_t address, uint32_t size
 		return mips32_dmaacc_write_mem(ejtag_info, address, size, count, (void *)buffer);
 }
 
-int mips_m4k_init_target(struct command_context *cmd_ctx, struct target *target)
+static int mips_m4k_init_target(struct command_context *cmd_ctx,
+		struct target *target)
 {
 	mips32_build_reg_cache(target);
 
 	return ERROR_OK;
 }
 
-int mips_m4k_init_arch_info(struct target *target, struct mips_m4k_common *mips_m4k,
-		struct jtag_tap *tap)
+static int mips_m4k_init_arch_info(struct target *target,
+		struct mips_m4k_common *mips_m4k, struct jtag_tap *tap)
 {
 	struct mips32_common *mips32 = &amp;mips_m4k-&gt;mips32;
 
@@ -903,7 +920,7 @@ int mips_m4k_init_arch_info(struct target *target, struct mips_m4k_common *mips_
 	return ERROR_OK;
 }
 
-int mips_m4k_target_create(struct target *target, Jim_Interp *interp)
+static int mips_m4k_target_create(struct target *target, Jim_Interp *interp)
 {
 	struct mips_m4k_common *mips_m4k = calloc(1, sizeof(struct mips_m4k_common));
 
@@ -912,7 +929,7 @@ int mips_m4k_target_create(struct target *target, Jim_Interp *interp)
 	return ERROR_OK;
 }
 
-int mips_m4k_examine(struct target *target)
+static int mips_m4k_examine(struct target *target)
 {
 	int retval;
 	struct mips_m4k_common *mips_m4k = target_to_m4k(target);
@@ -944,7 +961,7 @@ int mips_m4k_examine(struct target *target)
 	return ERROR_OK;
 }
 
-int mips_m4k_bulk_write_memory(struct target *target, uint32_t address,
+static int mips_m4k_bulk_write_memory(struct target *target, uint32_t address,
 		uint32_t count, uint8_t *buffer)
 {
 	struct mips32_common *mips32 = target_to_mips32(target);
diff --git a/src/target/mips_m4k.h b/src/target/mips_m4k.h
index 5eb2029..bb37ee2 100644
--- a/src/target/mips_m4k.h
+++ b/src/target/mips_m4k.h
@@ -43,19 +43,4 @@ target_to_m4k(struct target *target)
 			struct mips_m4k_common, mips32);
 }
 
-int mips_m4k_bulk_write_memory(struct target *target,
-		uint32_t address, uint32_t count, uint8_t *buffer);
-
-void mips_m4k_enable_breakpoints(struct target *target);
-int mips_m4k_set_breakpoint(struct target *target, struct breakpoint *bp);
-int mips_m4k_unset_breakpoint(struct target *target, struct breakpoint *bp);
-int mips_m4k_add_breakpoint(struct target *target, struct breakpoint *bp);
-int mips_m4k_remove_breakpoint(struct target *target, struct breakpoint *bp);
-
-void mips_m4k_enable_watchpoints(struct target *target);
-int mips_m4k_set_watchpoint(struct target *target, struct watchpoint *wp);
-int mips_m4k_unset_watchpoint(struct target *target, struct watchpoint *wp);
-int mips_m4k_add_watchpoint(struct target *target, struct watchpoint *wp);
-int mips_m4k_remove_watchpoint(struct target *target, struct watchpoint *wp);
-
 #endif	/*MIPS_M4K_H*/

commit b978dcbbee628ed30286b90cecf7085eb2cb7a82
Author: Antonio Borneo &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">borneo.antonio at gmail.com</A>&gt;
Date:   Sat Jun 19 23:46:46 2010 +0800

    helper/jim-eventloop.h: review unused definitions
    
    Remove unused typedef and define
    
    Signed-off-by: Antonio Borneo &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">borneo.antonio at gmail.com</A>&gt;

diff --git a/src/helper/jim-eventloop.h b/src/helper/jim-eventloop.h
index 77ee8fe..95c31d6 100644
--- a/src/helper/jim-eventloop.h
+++ b/src/helper/jim-eventloop.h
@@ -53,7 +53,6 @@
 #define __JIM_EVENTLOOP_H__
 
 typedef int Jim_FileProc(Jim_Interp *interp, void *clientData, int mask);
-typedef int Jim_SignalProc(Jim_Interp *interp, void *clientData, void *msg);
 typedef void Jim_TimeProc(Jim_Interp *interp, void *clientData);
 typedef void Jim_EventFinalizerProc(Jim_Interp *interp, void *clientData);
 
@@ -63,8 +62,6 @@ typedef void Jim_EventFinalizerProc(Jim_Interp *interp, void *clientData);
 #define JIM_EVENT_EXCEPTION 4
 #define JIM_EVENT_FEOF 8
 
-#define JIM_API(x) x
-
 int Jim_EventLoopOnLoad(Jim_Interp *interp);
 
 /* --- POSIX version of Jim_ProcessEvents, for now the only available --- */
@@ -73,16 +70,6 @@ int Jim_EventLoopOnLoad(Jim_Interp *interp);
 #define JIM_ALL_EVENTS (JIM_FILE_EVENTS | JIM_TIME_EVENTS)
 #define JIM_DONT_WAIT 4
 
-int JIM_API(Jim_ProcessEvents) (Jim_Interp *interp, int flags);
-
-#undef JIM_API
-
-#ifndef __JIM_EVENTLOOP_CORE__
-
-#define JIM_GET_API(name) \
-    Jim_GetApi(interp, &quot;Jim_&quot; #name, ((void *)&amp;Jim_ ## name))
-
-#undef JIM_GET_API
-#endif /* __JIM_EVENTLOOP_CORE__ */
+int Jim_ProcessEvents(Jim_Interp *interp, int flags);
 
 #endif /* __JIM_EVENTLOOP_H__ */

commit 3cfbf705597732c7b6a5b11a556c818529ea725b
Author: Antonio Borneo &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">borneo.antonio at gmail.com</A>&gt;
Date:   Sat Jun 19 23:37:33 2010 +0800

    helper/jim-eventloop: review unused symbols
    
    Remove unused functions:
    - Jim_CreateSignalHandler
    - Jim_DeleteSignalHandler
    
    Signed-off-by: Antonio Borneo &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">borneo.antonio at gmail.com</A>&gt;

diff --git a/src/helper/jim-eventloop.c b/src/helper/jim-eventloop.c
index 23115fe..fe2d685 100644
--- a/src/helper/jim-eventloop.c
+++ b/src/helper/jim-eventloop.c
@@ -131,16 +131,6 @@ static void Jim_DeleteFileHandler(Jim_Interp *interp, void *handle)
     }
 }
 
-// The same for signals.
-void Jim_CreateSignalHandler(Jim_Interp *interp, int signum,
-        Jim_FileProc *proc, void *clientData,
-        Jim_EventFinalizerProc *finalizerProc)
-{
-}
-void Jim_DeleteSignalHandler(Jim_Interp *interp, int signum)
-{
-}
-
 /* That's another part of this extension that needs to be ported
  * to WIN32. */
 static void JimGetTime(long *seconds, long *milliseconds)

commit ec073e89435785375dece2fb7c4664002c22859c
Author: Antonio Borneo &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">borneo.antonio at gmail.com</A>&gt;
Date:   Sat Jun 19 23:34:05 2010 +0800

    helper/jim-eventloop: review scope of symbols
    
    Add &quot;static&quot; qualifier to private functions.
    Remove private prototypes from include file.
    Remove empty definition of JIM_STATIC.
    
    Signed-off-by: Antonio Borneo &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openocd-svn">borneo.antonio at gmail.com</A>&gt;

diff --git a/src/helper/jim-eventloop.c b/src/helper/jim-eventloop.c
index fae46e8..23115fe 100644
--- a/src/helper/jim-eventloop.c
+++ b/src/helper/jim-eventloop.c
@@ -90,7 +90,7 @@ typedef struct Jim_EventLoop {
     Jim_TimeEvent *timeEventHead;
 } Jim_EventLoop;
 
-void Jim_CreateFileHandler(Jim_Interp *interp, void *handle, int mask,
+static void Jim_CreateFileHandler(Jim_Interp *interp, void *handle, int mask,
         Jim_FileProc *proc, void *clientData,
         Jim_EventFinalizerProc *finalizerProc)
 {
@@ -109,7 +109,7 @@ void Jim_CreateFileHandler(Jim_Interp *interp, void *handle, int mask,
 	// fprintf(stderr,&quot;raus\n&quot;);
 }
 
-void Jim_DeleteFileHandler(Jim_Interp *interp, void *handle)
+static void Jim_DeleteFileHandler(Jim_Interp *interp, void *handle)
 {
     Jim_FileEvent *fe, *prev = NULL;
     Jim_EventLoop *eventLoop = Jim_GetAssocData(interp, &quot;eventloop&quot;);
@@ -152,7 +152,7 @@ static void JimGetTime(long *seconds, long *milliseconds)
     *milliseconds = tv.tv_usec/1000;
 }
 
-jim_wide Jim_CreateTimeHandler(Jim_Interp *interp, jim_wide milliseconds,
+static jim_wide Jim_CreateTimeHandler(Jim_Interp *interp, jim_wide milliseconds,
         Jim_TimeProc *proc, void *clientData,
         Jim_EventFinalizerProc *finalizerProc)
 {
@@ -181,7 +181,7 @@ jim_wide Jim_CreateTimeHandler(Jim_Interp *interp, jim_wide milliseconds,
     return id;
 }
 
-jim_wide Jim_DeleteTimeHandler(Jim_Interp *interp, jim_wide id)
+static jim_wide Jim_DeleteTimeHandler(Jim_Interp *interp, jim_wide id)
 {
     Jim_TimeEvent *te, *prev = NULL;
     Jim_EventLoop *eventLoop = Jim_GetAssocData(interp, &quot;eventloop&quot;);
@@ -391,7 +391,7 @@ int Jim_ProcessEvents(Jim_Interp *interp, int flags)
 }
 /* ---------------------------------------------------------------------- */
 
-void JimELAssocDataDeleProc(Jim_Interp *interp, void *data)
+static void JimELAssocDataDeleProc(Jim_Interp *interp, void *data)
 {
     void *next;
     Jim_FileEvent *fe;
@@ -446,14 +446,14 @@ static int JimELVwaitCommand(Jim_Interp *interp, int argc,
     return JIM_OK;
 }
 
-void JimAfterTimeHandler(Jim_Interp *interp, void *clientData)
+static void JimAfterTimeHandler(Jim_Interp *interp, void *clientData)
 {
     Jim_Obj *objPtr = clientData;
 
     Jim_EvalObjBackground(interp, objPtr);
 }
 
-void JimAfterTimeEventFinalizer(Jim_Interp *interp, void *clientData)
+static void JimAfterTimeEventFinalizer(Jim_Interp *interp, void *clientData)
 {
     Jim_Obj *objPtr = clientData;
 
diff --git a/src/helper/jim-eventloop.h b/src/helper/jim-eventloop.h
index ddb6fc9..77ee8fe 100644
--- a/src/helper/jim-eventloop.h
+++ b/src/helper/jim-eventloop.h
@@ -64,9 +64,8 @@ typedef void Jim_EventFinalizerProc(Jim_Interp *interp, void *clientData);
 #define JIM_EVENT_FEOF 8
 
 #define JIM_API(x) x
-#define JIM_STATIC
 
-JIM_STATIC int Jim_EventLoopOnLoad(Jim_Interp *interp);
+int Jim_EventLoopOnLoad(Jim_Interp *interp);
 
 /* --- POSIX version of Jim_ProcessEvents, for now the only available --- */
 #define JIM_FILE_EVENTS 1
@@ -74,20 +73,8 @@ JIM_STATIC int Jim_EventLoopOnLoad(Jim_Interp *interp);
 #define JIM_ALL_EVENTS (JIM_FILE_EVENTS | JIM_TIME_EVENTS)
 #define JIM_DONT_WAIT 4
 
-JIM_STATIC void JIM_API(Jim_CreateFileHandler) (Jim_Interp *interp,
-        void *handle, int mask,
-        Jim_FileProc *proc, void *clientData,
-        Jim_EventFinalizerProc *finalizerProc);
-JIM_STATIC void JIM_API(Jim_DeleteFileHandler) (Jim_Interp *interp,
-        void *handle);
-JIM_STATIC jim_wide JIM_API(Jim_CreateTimeHandler) (Jim_Interp *interp,
-        jim_wide milliseconds,
-        Jim_TimeProc *proc, void *clientData,
-        Jim_EventFinalizerProc *finalizerProc);
-JIM_STATIC jim_wide JIM_API(Jim_DeleteTimeHandler) (Jim_Interp *interp, jim_wide id);
-JIM_STATIC int JIM_API(Jim_ProcessEvents) (Jim_Interp *interp, int flags);
+int JIM_API(Jim_ProcessEvents) (Jim_Interp *interp, int flags);
 
-#undef JIM_STATIC
 #undef JIM_API
 
 #ifndef __JIM_EVENTLOOP_CORE__

-----------------------------------------------------------------------

Summary of changes:
 src/flash/nand/mx2.c       |    2 +-
 src/flash/nor/avrf.c       |   13 -----
 src/flash/nor/str7x.c      |    2 +-
 src/flash/nor/virtual.c    |    4 +-
 src/helper/jim-eventloop.c |   24 +++------
 src/helper/jim-eventloop.h |   30 +----------
 src/openocd.c              |    2 +-
 src/target/avrt.c          |  124 ++++++++++++-------------------------------
 src/target/avrt.h          |    5 ++
 src/target/feroceon.c      |   55 +++++++++++--------
 src/target/mips_m4k.c      |   75 ++++++++++++++++----------
 src/target/mips_m4k.h      |   15 -----
 12 files changed, 132 insertions(+), 219 deletions(-)


hooks/post-receive
-- 
Main OpenOCD repository

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002300.html">[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-362-g2fbb0b5
</A></li>
	<LI>Next message: <A HREF="002302.html">[openocd-svn] Main OpenOCD repository branch, master,	updated. v0.4.0-380-gfe1f7f6
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2301">[ date ]</a>
              <a href="thread.html#2301">[ thread ]</a>
              <a href="subject.html#2301">[ subject ]</a>
              <a href="author.html#2301">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openocd-svn">More information about the openocd-svn
mailing list</a><br>
</body></html>
